(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=t(s);fetch(s.href,n)}})();const widgets="",mars3d$1="";function makeMap(r,e){const t=Object.create(null),i=r.split(",");for(let s=0;s<i.length;s++)t[i[s]]=!0;return e?s=>!!t[s.toLowerCase()]:s=>!!t[s]}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(r){return!!r||r===""}function normalizeStyle(r){if(isArray(r)){const e={};for(let t=0;t<r.length;t++){const i=r[t],s=isString(i)?parseStringStyle(i):normalizeStyle(i);if(s)for(const n in s)e[n]=s[n]}return e}else{if(isString(r))return r;if(isObject(r))return r}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:(.+)/;function parseStringStyle(r){const e={};return r.split(listDelimiterRE).forEach(t=>{if(t){const i=t.split(propertyDelimiterRE);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function normalizeClass(r){let e="";if(isString(r))e=r;else if(isArray(r))for(let t=0;t<r.length;t++){const i=normalizeClass(r[t]);i&&(e+=i+" ")}else if(isObject(r))for(const t in r)r[t]&&(e+=t+" ");return e.trim()}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=r=>onRE.test(r),isModelListener=r=>r.startsWith("onUpdate:"),extend=Object.assign,remove=(r,e)=>{const t=r.indexOf(e);t>-1&&r.splice(t,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(r,e)=>hasOwnProperty$1.call(r,e),isArray=Array.isArray,isMap=r=>toTypeString(r)==="[object Map]",isSet=r=>toTypeString(r)==="[object Set]",isFunction=r=>typeof r=="function",isString=r=>typeof r=="string",isSymbol=r=>typeof r=="symbol",isObject=r=>r!==null&&typeof r=="object",isPromise=r=>isObject(r)&&isFunction(r.then)&&isFunction(r.catch),objectToString=Object.prototype.toString,toTypeString=r=>objectToString.call(r),toRawType=r=>toTypeString(r).slice(8,-1),isPlainObject=r=>toTypeString(r)==="[object Object]",isIntegerKey=r=>isString(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=r=>{const e=Object.create(null);return t=>e[t]||(e[t]=r(t))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(r=>r.replace(camelizeRE,(e,t)=>t?t.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(r=>r.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(r=>r.charAt(0).toUpperCase()+r.slice(1)),toHandlerKey=cacheStringFunction(r=>r?`on${capitalize(r)}`:""),hasChanged=(r,e)=>!Object.is(r,e),invokeArrayFns=(r,e)=>{for(let t=0;t<r.length;t++)r[t](e)},def=(r,e,t)=>{Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value:t})},toNumber=r=>{const e=parseFloat(r);return isNaN(e)?r:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let activeEffectScope;class EffectScope{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&activeEffectScope&&(this.parent=activeEffectScope,this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}run(e){if(this.active){const t=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=t}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this.active){let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);if(this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.active=!1}}}function recordEffectScope(r,e=activeEffectScope){e&&e.active&&e.effects.push(r)}const createDep=r=>{const e=new Set(r);return e.w=0,e.n=0,e},wasTracked=r=>(r.w&trackOpBit)>0,newTracked=r=>(r.n&trackOpBit)>0,initDepMarkers=({deps:r})=>{if(r.length)for(let e=0;e<r.length;e++)r[e].w|=trackOpBit},finalizeDepMarkers=r=>{const{deps:e}=r;if(e.length){let t=0;for(let i=0;i<e.length;i++){const s=e[i];wasTracked(s)&&!newTracked(s)?s.delete(r):e[t++]=s,s.w&=~trackOpBit,s.n&=~trackOpBit}e.length=t}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(e,t=null,i){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,i)}run(){if(!this.active)return this.fn();let e=activeEffect,t=shouldTrack;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(r){const{deps:e}=r;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(r);e.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const r=trackStack.pop();shouldTrack=r===void 0?!0:r}function track(r,e,t){if(shouldTrack&&activeEffect){let i=targetMap.get(r);i||targetMap.set(r,i=new Map);let s=i.get(t);s||i.set(t,s=createDep()),trackEffects(s)}}function trackEffects(r,e){let t=!1;effectTrackDepth<=maxMarkerBits?newTracked(r)||(r.n|=trackOpBit,t=!wasTracked(r)):t=!r.has(activeEffect),t&&(r.add(activeEffect),activeEffect.deps.push(r))}function trigger(r,e,t,i,s,n){const o=targetMap.get(r);if(!o)return;let c=[];if(e==="clear")c=[...o.values()];else if(t==="length"&&isArray(r))o.forEach((_,l)=>{(l==="length"||l>=i)&&c.push(_)});else switch(t!==void 0&&c.push(o.get(t)),e){case"add":isArray(r)?isIntegerKey(t)&&c.push(o.get("length")):(c.push(o.get(ITERATE_KEY)),isMap(r)&&c.push(o.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray(r)||(c.push(o.get(ITERATE_KEY)),isMap(r)&&c.push(o.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(r)&&c.push(o.get(ITERATE_KEY));break}if(c.length===1)c[0]&&triggerEffects(c[0]);else{const _=[];for(const l of c)l&&_.push(...l);triggerEffects(createDep(_))}}function triggerEffects(r,e){const t=isArray(r)?r:[...r];for(const i of t)i.computed&&triggerEffect(i);for(const i of t)i.computed||triggerEffect(i)}function triggerEffect(r,e){(r!==activeEffect||r.allowRecurse)&&(r.scheduler?r.scheduler():r.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(isSymbol)),get=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const r={};return["includes","indexOf","lastIndexOf"].forEach(e=>{r[e]=function(...t){const i=toRaw(this);for(let n=0,o=this.length;n<o;n++)track(i,"get",n+"");const s=i[e](...t);return s===-1||s===!1?i[e](...t.map(toRaw)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{r[e]=function(...t){pauseTracking();const i=toRaw(this)[e].apply(this,t);return resetTracking(),i}}),r}function createGetter(r=!1,e=!1){return function(i,s,n){if(s==="__v_isReactive")return!r;if(s==="__v_isReadonly")return r;if(s==="__v_isShallow")return e;if(s==="__v_raw"&&n===(r?e?shallowReadonlyMap:readonlyMap:e?shallowReactiveMap:reactiveMap).get(i))return i;const o=isArray(i);if(!r&&o&&hasOwn(arrayInstrumentations,s))return Reflect.get(arrayInstrumentations,s,n);const c=Reflect.get(i,s,n);return(isSymbol(s)?builtInSymbols.has(s):isNonTrackableKeys(s))||(r||track(i,"get",s),e)?c:isRef(c)?o&&isIntegerKey(s)?c:c.value:isObject(c)?r?readonly(c):reactive(c):c}}const set=createSetter(),shallowSet=createSetter(!0);function createSetter(r=!1){return function(t,i,s,n){let o=t[i];if(isReadonly(o)&&isRef(o)&&!isRef(s))return!1;if(!r&&(!isShallow(s)&&!isReadonly(s)&&(o=toRaw(o),s=toRaw(s)),!isArray(t)&&isRef(o)&&!isRef(s)))return o.value=s,!0;const c=isArray(t)&&isIntegerKey(i)?Number(i)<t.length:hasOwn(t,i),_=Reflect.set(t,i,s,n);return t===toRaw(n)&&(c?hasChanged(s,o)&&trigger(t,"set",i,s):trigger(t,"add",i,s)),_}}function deleteProperty(r,e){const t=hasOwn(r,e);r[e];const i=Reflect.deleteProperty(r,e);return i&&t&&trigger(r,"delete",e,void 0),i}function has(r,e){const t=Reflect.has(r,e);return(!isSymbol(e)||!builtInSymbols.has(e))&&track(r,"has",e),t}function ownKeys(r){return track(r,"iterate",isArray(r)?"length":ITERATE_KEY),Reflect.ownKeys(r)}const mutableHandlers={get,set,deleteProperty,has,ownKeys},readonlyHandlers={get:readonlyGet,set(r,e){return!0},deleteProperty(r,e){return!0}},shallowReactiveHandlers=extend({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=r=>r,getProto=r=>Reflect.getPrototypeOf(r);function get$1(r,e,t=!1,i=!1){r=r.__v_raw;const s=toRaw(r),n=toRaw(e);t||(e!==n&&track(s,"get",e),track(s,"get",n));const{has:o}=getProto(s),c=i?toShallow:t?toReadonly:toReactive;if(o.call(s,e))return c(r.get(e));if(o.call(s,n))return c(r.get(n));r!==s&&r.get(e)}function has$1(r,e=!1){const t=this.__v_raw,i=toRaw(t),s=toRaw(r);return e||(r!==s&&track(i,"has",r),track(i,"has",s)),r===s?t.has(r):t.has(r)||t.has(s)}function size(r,e=!1){return r=r.__v_raw,!e&&track(toRaw(r),"iterate",ITERATE_KEY),Reflect.get(r,"size",r)}function add$1(r){r=toRaw(r);const e=toRaw(this);return getProto(e).has.call(e,r)||(e.add(r),trigger(e,"add",r,r)),this}function set$1(r,e){e=toRaw(e);const t=toRaw(this),{has:i,get:s}=getProto(t);let n=i.call(t,r);n||(r=toRaw(r),n=i.call(t,r));const o=s.call(t,r);return t.set(r,e),n?hasChanged(e,o)&&trigger(t,"set",r,e):trigger(t,"add",r,e),this}function deleteEntry(r){const e=toRaw(this),{has:t,get:i}=getProto(e);let s=t.call(e,r);s||(r=toRaw(r),s=t.call(e,r)),i&&i.call(e,r);const n=e.delete(r);return s&&trigger(e,"delete",r,void 0),n}function clear(){const r=toRaw(this),e=r.size!==0,t=r.clear();return e&&trigger(r,"clear",void 0,void 0),t}function createForEach(r,e){return function(i,s){const n=this,o=n.__v_raw,c=toRaw(o),_=e?toShallow:r?toReadonly:toReactive;return!r&&track(c,"iterate",ITERATE_KEY),o.forEach((l,h)=>i.call(s,_(l),_(h),n))}}function createIterableMethod(r,e,t){return function(...i){const s=this.__v_raw,n=toRaw(s),o=isMap(n),c=r==="entries"||r===Symbol.iterator&&o,_=r==="keys"&&o,l=s[r](...i),h=t?toShallow:e?toReadonly:toReactive;return!e&&track(n,"iterate",_?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:f,done:m}=l.next();return m?{value:f,done:m}:{value:c?[h(f[0]),h(f[1])]:h(f),done:m}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(r){return function(...e){return r==="delete"?!1:this}}function createInstrumentations(){const r={get(n){return get$1(this,n)},get size(){return size(this)},has:has$1,add:add$1,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},e={get(n){return get$1(this,n,!1,!0)},get size(){return size(this)},has:has$1,add:add$1,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},t={get(n){return get$1(this,n,!0)},get size(){return size(this,!0)},has(n){return has$1.call(this,n,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},i={get(n){return get$1(this,n,!0,!0)},get size(){return size(this,!0)},has(n){return has$1.call(this,n,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(n=>{r[n]=createIterableMethod(n,!1,!1),t[n]=createIterableMethod(n,!0,!1),e[n]=createIterableMethod(n,!1,!0),i[n]=createIterableMethod(n,!0,!0)}),[r,t,e,i]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(r,e){const t=e?r?shallowReadonlyInstrumentations:shallowInstrumentations:r?readonlyInstrumentations:mutableInstrumentations;return(i,s,n)=>s==="__v_isReactive"?!r:s==="__v_isReadonly"?r:s==="__v_raw"?i:Reflect.get(hasOwn(t,s)&&s in i?t:i,s,n)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(r){return r.__v_skip||!Object.isExtensible(r)?0:targetTypeMap(toRawType(r))}function reactive(r){return isReadonly(r)?r:createReactiveObject(r,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(r){return createReactiveObject(r,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(r){return createReactiveObject(r,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(r,e,t,i,s){if(!isObject(r)||r.__v_raw&&!(e&&r.__v_isReactive))return r;const n=s.get(r);if(n)return n;const o=getTargetType(r);if(o===0)return r;const c=new Proxy(r,o===2?i:t);return s.set(r,c),c}function isReactive(r){return isReadonly(r)?isReactive(r.__v_raw):!!(r&&r.__v_isReactive)}function isReadonly(r){return!!(r&&r.__v_isReadonly)}function isShallow(r){return!!(r&&r.__v_isShallow)}function isProxy(r){return isReactive(r)||isReadonly(r)}function toRaw(r){const e=r&&r.__v_raw;return e?toRaw(e):r}function markRaw(r){return def(r,"__v_skip",!0),r}const toReactive=r=>isObject(r)?reactive(r):r,toReadonly=r=>isObject(r)?readonly(r):r;function trackRefValue(r){shouldTrack&&activeEffect&&(r=toRaw(r),trackEffects(r.dep||(r.dep=createDep())))}function triggerRefValue(r,e){r=toRaw(r),r.dep&&triggerEffects(r.dep)}function isRef(r){return!!(r&&r.__v_isRef===!0)}function unref(r){return isRef(r)?r.value:r}const shallowUnwrapHandlers={get:(r,e,t)=>unref(Reflect.get(r,e,t)),set:(r,e,t,i)=>{const s=r[e];return isRef(s)&&!isRef(t)?(s.value=t,!0):Reflect.set(r,e,t,i)}};function proxyRefs(r){return isReactive(r)?r:new Proxy(r,shallowUnwrapHandlers)}var _a;class ComputedRefImpl{constructor(e,t,i,s){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this[_a]=!1,this._dirty=!0,this.effect=new ReactiveEffect(e,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=i}get value(){const e=toRaw(this);return trackRefValue(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}_a="__v_isReadonly";function computed$1(r,e,t=!1){let i,s;const n=isFunction(r);return n?(i=r,s=NOOP):(i=r.get,s=r.set),new ComputedRefImpl(i,s,n||!s,t)}function callWithErrorHandling(r,e,t,i){let s;try{s=i?r(...i):r()}catch(n){handleError(n,e,t)}return s}function callWithAsyncErrorHandling(r,e,t,i){if(isFunction(r)){const n=callWithErrorHandling(r,e,t,i);return n&&isPromise(n)&&n.catch(o=>{handleError(o,e,t)}),n}const s=[];for(let n=0;n<r.length;n++)s.push(callWithAsyncErrorHandling(r[n],e,t,i));return s}function handleError(r,e,t,i=!0){const s=e?e.vnode:null;if(e){let n=e.parent;const o=e.proxy,c=t;for(;n;){const l=n.ec;if(l){for(let h=0;h<l.length;h++)if(l[h](r,o,c)===!1)return}n=n.parent}const _=e.appContext.config.errorHandler;if(_){callWithErrorHandling(_,null,10,[r,o,c]);return}}logError(r,t,s,i)}function logError(r,e,t,i=!0){console.error(r)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(r){const e=currentFlushPromise||resolvedPromise;return r?e.then(this?r.bind(this):r):e}function findInsertionIndex(r){let e=flushIndex+1,t=queue.length;for(;e<t;){const i=e+t>>>1;getId(queue[i])<r?e=i+1:t=i}return e}function queueJob(r){(!queue.length||!queue.includes(r,isFlushing&&r.allowRecurse?flushIndex+1:flushIndex))&&(r.id==null?queue.push(r):queue.splice(findInsertionIndex(r.id),0,r),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(r){const e=queue.indexOf(r);e>flushIndex&&queue.splice(e,1)}function queuePostFlushCb(r){isArray(r)?pendingPostFlushCbs.push(...r):(!activePostFlushCbs||!activePostFlushCbs.includes(r,r.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(r),queueFlush()}function flushPreFlushCbs(r,e=isFlushing?flushIndex+1:0){for(;e<queue.length;e++){const t=queue[e];t&&t.pre&&(queue.splice(e,1),e--,t())}}function flushPostFlushCbs(r){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,activePostFlushCbs.sort((t,i)=>getId(t)-getId(i)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=r=>r.id==null?1/0:r.id,comparator=(r,e)=>{const t=getId(r)-getId(e);if(t===0){if(r.pre&&!e.pre)return-1;if(e.pre&&!r.pre)return 1}return t};function flushJobs(r){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const e=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const t=queue[flushIndex];t&&t.active!==!1&&callWithErrorHandling(t,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit$1(r,e,...t){if(r.isUnmounted)return;const i=r.vnode.props||EMPTY_OBJ;let s=t;const n=e.startsWith("update:"),o=n&&e.slice(7);if(o&&o in i){const h=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:m}=i[h]||EMPTY_OBJ;m&&(s=t.map(g=>g.trim())),f&&(s=t.map(toNumber))}let c,_=i[c=toHandlerKey(e)]||i[c=toHandlerKey(camelize(e))];!_&&n&&(_=i[c=toHandlerKey(hyphenate(e))]),_&&callWithAsyncErrorHandling(_,r,6,s);const l=i[c+"Once"];if(l){if(!r.emitted)r.emitted={};else if(r.emitted[c])return;r.emitted[c]=!0,callWithAsyncErrorHandling(l,r,6,s)}}function normalizeEmitsOptions(r,e,t=!1){const i=e.emitsCache,s=i.get(r);if(s!==void 0)return s;const n=r.emits;let o={},c=!1;if(!isFunction(r)){const _=l=>{const h=normalizeEmitsOptions(l,e,!0);h&&(c=!0,extend(o,h))};!t&&e.mixins.length&&e.mixins.forEach(_),r.extends&&_(r.extends),r.mixins&&r.mixins.forEach(_)}return!n&&!c?(isObject(r)&&i.set(r,null),null):(isArray(n)?n.forEach(_=>o[_]=null):extend(o,n),isObject(r)&&i.set(r,o),o)}function isEmitListener(r,e){return!r||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn(r,e[0].toLowerCase()+e.slice(1))||hasOwn(r,hyphenate(e))||hasOwn(r,e))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(r){const e=currentRenderingInstance;return currentRenderingInstance=r,currentScopeId=r&&r.type.__scopeId||null,e}function withCtx(r,e=currentRenderingInstance,t){if(!e||r._n)return r;const i=(...s)=>{i._d&&setBlockTracking(-1);const n=setCurrentRenderingInstance(e),o=r(...s);return setCurrentRenderingInstance(n),i._d&&setBlockTracking(1),o};return i._n=!0,i._c=!0,i._d=!0,i}function markAttrsAccessed(){}function renderComponentRoot(r){const{type:e,vnode:t,proxy:i,withProxy:s,props:n,propsOptions:[o],slots:c,attrs:_,emit:l,render:h,renderCache:f,data:m,setupState:g,ctx:C,inheritAttrs:E}=r;let P,w;const M=setCurrentRenderingInstance(r);try{if(t.shapeFlag&4){const L=s||i;P=normalizeVNode(h.call(L,L,f,n,g,m,C)),w=_}else{const L=e;P=normalizeVNode(L.length>1?L(n,{attrs:_,slots:c,emit:l}):L(n,null)),w=e.props?_:getFunctionalFallthrough(_)}}catch(L){blockStack.length=0,handleError(L,r,1),P=createVNode(Comment)}let T=P;if(w&&E!==!1){const L=Object.keys(w),{shapeFlag:R}=T;L.length&&R&7&&(o&&L.some(isModelListener)&&(w=filterModelListeners(w,o)),T=cloneVNode(T,w))}return t.dirs&&(T=cloneVNode(T),T.dirs=T.dirs?T.dirs.concat(t.dirs):t.dirs),t.transition&&(T.transition=t.transition),P=T,setCurrentRenderingInstance(M),P}const getFunctionalFallthrough=r=>{let e;for(const t in r)(t==="class"||t==="style"||isOn(t))&&((e||(e={}))[t]=r[t]);return e},filterModelListeners=(r,e)=>{const t={};for(const i in r)(!isModelListener(i)||!(i.slice(9)in e))&&(t[i]=r[i]);return t};function shouldUpdateComponent(r,e,t){const{props:i,children:s,component:n}=r,{props:o,children:c,patchFlag:_}=e,l=n.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&_>=0){if(_&1024)return!0;if(_&16)return i?hasPropsChanged(i,o,l):!!o;if(_&8){const h=e.dynamicProps;for(let f=0;f<h.length;f++){const m=h[f];if(o[m]!==i[m]&&!isEmitListener(l,m))return!0}}}else return(s||c)&&(!c||!c.$stable)?!0:i===o?!1:i?o?hasPropsChanged(i,o,l):!0:!!o;return!1}function hasPropsChanged(r,e,t){const i=Object.keys(e);if(i.length!==Object.keys(r).length)return!0;for(let s=0;s<i.length;s++){const n=i[s];if(e[n]!==r[n]&&!isEmitListener(t,n))return!0}return!1}function updateHOCHostEl({vnode:r,parent:e},t){for(;e&&e.subTree===r;)(r=e.vnode).el=t,e=e.parent}const isSuspense=r=>r.__isSuspense;function queueEffectWithSuspense(r,e){e&&e.pendingBranch?isArray(r)?e.effects.push(...r):e.effects.push(r):queuePostFlushCb(r)}function provide(r,e){if(currentInstance){let t=currentInstance.provides;const i=currentInstance.parent&&currentInstance.parent.provides;i===t&&(t=currentInstance.provides=Object.create(i)),t[r]=e}}function inject(r,e,t=!1){const i=currentInstance||currentRenderingInstance;if(i){const s=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(s&&r in s)return s[r];if(arguments.length>1)return t&&isFunction(e)?e.call(i.proxy):e}}const INITIAL_WATCHER_VALUE={};function watch(r,e,t){return doWatch(r,e,t)}function doWatch(r,e,{immediate:t,deep:i,flush:s,onTrack:n,onTrigger:o}=EMPTY_OBJ){const c=currentInstance;let _,l=!1,h=!1;if(isRef(r)?(_=()=>r.value,l=isShallow(r)):isReactive(r)?(_=()=>r,i=!0):isArray(r)?(h=!0,l=r.some(w=>isReactive(w)||isShallow(w)),_=()=>r.map(w=>{if(isRef(w))return w.value;if(isReactive(w))return traverse(w);if(isFunction(w))return callWithErrorHandling(w,c,2)})):isFunction(r)?e?_=()=>callWithErrorHandling(r,c,2):_=()=>{if(!(c&&c.isUnmounted))return f&&f(),callWithAsyncErrorHandling(r,c,3,[m])}:_=NOOP,e&&i){const w=_;_=()=>traverse(w())}let f,m=w=>{f=P.onStop=()=>{callWithErrorHandling(w,c,4)}};if(isInSSRComponentSetup)return m=NOOP,e?t&&callWithAsyncErrorHandling(e,c,3,[_(),h?[]:void 0,m]):_(),NOOP;let g=h?[]:INITIAL_WATCHER_VALUE;const C=()=>{if(P.active)if(e){const w=P.run();(i||l||(h?w.some((M,T)=>hasChanged(M,g[T])):hasChanged(w,g)))&&(f&&f(),callWithAsyncErrorHandling(e,c,3,[w,g===INITIAL_WATCHER_VALUE?void 0:g,m]),g=w)}else P.run()};C.allowRecurse=!!e;let E;s==="sync"?E=C:s==="post"?E=()=>queuePostRenderEffect(C,c&&c.suspense):(C.pre=!0,c&&(C.id=c.uid),E=()=>queueJob(C));const P=new ReactiveEffect(_,E);return e?t?C():g=P.run():s==="post"?queuePostRenderEffect(P.run.bind(P),c&&c.suspense):P.run(),()=>{P.stop(),c&&c.scope&&remove(c.scope.effects,P)}}function instanceWatch(r,e,t){const i=this.proxy,s=isString(r)?r.includes(".")?createPathGetter(i,r):()=>i[r]:r.bind(i,i);let n;isFunction(e)?n=e:(n=e.handler,t=e);const o=currentInstance;setCurrentInstance(this);const c=doWatch(s,n.bind(i),t);return o?setCurrentInstance(o):unsetCurrentInstance(),c}function createPathGetter(r,e){const t=e.split(".");return()=>{let i=r;for(let s=0;s<t.length&&i;s++)i=i[t[s]];return i}}function traverse(r,e){if(!isObject(r)||r.__v_skip||(e=e||new Set,e.has(r)))return r;if(e.add(r),isRef(r))traverse(r.value,e);else if(isArray(r))for(let t=0;t<r.length;t++)traverse(r[t],e);else if(isSet(r)||isMap(r))r.forEach(t=>{traverse(t,e)});else if(isPlainObject(r))for(const t in r)traverse(r[t],e);return r}function useTransitionState(){const r={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{r.isMounted=!0}),onBeforeUnmount(()=>{r.isUnmounting=!0}),r}const TransitionHookValidator=[Function,Array],BaseTransitionImpl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},setup(r,{slots:e}){const t=getCurrentInstance(),i=useTransitionState();let s;return()=>{const n=e.default&&getTransitionRawChildren(e.default(),!0);if(!n||!n.length)return;let o=n[0];if(n.length>1){for(const E of n)if(E.type!==Comment){o=E;break}}const c=toRaw(r),{mode:_}=c;if(i.isLeaving)return emptyPlaceholder(o);const l=getKeepAliveChild(o);if(!l)return emptyPlaceholder(o);const h=resolveTransitionHooks(l,c,i,t);setTransitionHooks(l,h);const f=t.subTree,m=f&&getKeepAliveChild(f);let g=!1;const{getTransitionKey:C}=l.type;if(C){const E=C();s===void 0?s=E:E!==s&&(s=E,g=!0)}if(m&&m.type!==Comment&&(!isSameVNodeType(l,m)||g)){const E=resolveTransitionHooks(m,c,i,t);if(setTransitionHooks(m,E),_==="out-in")return i.isLeaving=!0,E.afterLeave=()=>{i.isLeaving=!1,t.update()},emptyPlaceholder(o);_==="in-out"&&l.type!==Comment&&(E.delayLeave=(P,w,M)=>{const T=getLeavingNodesForType(i,m);T[String(m.key)]=m,P._leaveCb=()=>{w(),P._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=M})}return o}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(r,e){const{leavingVNodes:t}=r;let i=t.get(e.type);return i||(i=Object.create(null),t.set(e.type,i)),i}function resolveTransitionHooks(r,e,t,i){const{appear:s,mode:n,persisted:o=!1,onBeforeEnter:c,onEnter:_,onAfterEnter:l,onEnterCancelled:h,onBeforeLeave:f,onLeave:m,onAfterLeave:g,onLeaveCancelled:C,onBeforeAppear:E,onAppear:P,onAfterAppear:w,onAppearCancelled:M}=e,T=String(r.key),L=getLeavingNodesForType(t,r),R=(k,B)=>{k&&callWithAsyncErrorHandling(k,i,9,B)},D=(k,B)=>{const $=B[1];R(k,B),isArray(k)?k.every(H=>H.length<=1)&&$():k.length<=1&&$()},N={mode:n,persisted:o,beforeEnter(k){let B=c;if(!t.isMounted)if(s)B=E||c;else return;k._leaveCb&&k._leaveCb(!0);const $=L[T];$&&isSameVNodeType(r,$)&&$.el._leaveCb&&$.el._leaveCb(),R(B,[k])},enter(k){let B=_,$=l,H=h;if(!t.isMounted)if(s)B=P||_,$=w||l,H=M||h;else return;let W=!1;const J=k._enterCb=z=>{W||(W=!0,z?R(H,[k]):R($,[k]),N.delayedLeave&&N.delayedLeave(),k._enterCb=void 0)};B?D(B,[k,J]):J()},leave(k,B){const $=String(r.key);if(k._enterCb&&k._enterCb(!0),t.isUnmounting)return B();R(f,[k]);let H=!1;const W=k._leaveCb=J=>{H||(H=!0,B(),J?R(C,[k]):R(g,[k]),k._leaveCb=void 0,L[$]===r&&delete L[$])};L[$]=r,m?D(m,[k,W]):W()},clone(k){return resolveTransitionHooks(k,e,t,i)}};return N}function emptyPlaceholder(r){if(isKeepAlive(r))return r=cloneVNode(r),r.children=null,r}function getKeepAliveChild(r){return isKeepAlive(r)?r.children?r.children[0]:void 0:r}function setTransitionHooks(r,e){r.shapeFlag&6&&r.component?setTransitionHooks(r.component.subTree,e):r.shapeFlag&128?(r.ssContent.transition=e.clone(r.ssContent),r.ssFallback.transition=e.clone(r.ssFallback)):r.transition=e}function getTransitionRawChildren(r,e=!1,t){let i=[],s=0;for(let n=0;n<r.length;n++){let o=r[n];const c=t==null?o.key:String(t)+String(o.key!=null?o.key:n);o.type===Fragment?(o.patchFlag&128&&s++,i=i.concat(getTransitionRawChildren(o.children,e,c))):(e||o.type!==Comment)&&i.push(c!=null?cloneVNode(o,{key:c}):o)}if(s>1)for(let n=0;n<i.length;n++)i[n].patchFlag=-2;return i}function defineComponent(r){return isFunction(r)?{setup:r,name:r.name}:r}const isAsyncWrapper=r=>!!r.type.__asyncLoader,isKeepAlive=r=>r.type.__isKeepAlive;function onActivated(r,e){registerKeepAliveHook(r,"a",e)}function onDeactivated(r,e){registerKeepAliveHook(r,"da",e)}function registerKeepAliveHook(r,e,t=currentInstance){const i=r.__wdc||(r.__wdc=()=>{let s=t;for(;s;){if(s.isDeactivated)return;s=s.parent}return r()});if(injectHook(e,i,t),t){let s=t.parent;for(;s&&s.parent;)isKeepAlive(s.parent.vnode)&&injectToKeepAliveRoot(i,e,t,s),s=s.parent}}function injectToKeepAliveRoot(r,e,t,i){const s=injectHook(e,r,i,!0);onUnmounted(()=>{remove(i[e],s)},t)}function injectHook(r,e,t=currentInstance,i=!1){if(t){const s=t[r]||(t[r]=[]),n=e.__weh||(e.__weh=(...o)=>{if(t.isUnmounted)return;pauseTracking(),setCurrentInstance(t);const c=callWithAsyncErrorHandling(e,t,r,o);return unsetCurrentInstance(),resetTracking(),c});return i?s.unshift(n):s.push(n),n}}const createHook=r=>(e,t=currentInstance)=>(!isInSSRComponentSetup||r==="sp")&&injectHook(r,e,t),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(r,e=currentInstance){injectHook("ec",r,e)}function invokeDirectiveHook(r,e,t,i){const s=r.dirs,n=e&&e.dirs;for(let o=0;o<s.length;o++){const c=s[o];n&&(c.oldValue=n[o].value);let _=c.dir[i];_&&(pauseTracking(),callWithAsyncErrorHandling(_,t,8,[r.el,c,r,e]),resetTracking())}}const NULL_DYNAMIC_COMPONENT=Symbol(),getPublicInstance=r=>r?isStatefulComponent(r)?getExposeProxy(r)||r.proxy:getPublicInstance(r.parent):null,publicPropertiesMap=extend(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>getPublicInstance(r.parent),$root:r=>getPublicInstance(r.root),$emit:r=>r.emit,$options:r=>resolveMergedOptions(r),$forceUpdate:r=>r.f||(r.f=()=>queueJob(r.update)),$nextTick:r=>r.n||(r.n=nextTick.bind(r.proxy)),$watch:r=>instanceWatch.bind(r)}),PublicInstanceProxyHandlers={get({_:r},e){const{ctx:t,setupState:i,data:s,props:n,accessCache:o,type:c,appContext:_}=r;let l;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return i[e];case 2:return s[e];case 4:return t[e];case 3:return n[e]}else{if(i!==EMPTY_OBJ&&hasOwn(i,e))return o[e]=1,i[e];if(s!==EMPTY_OBJ&&hasOwn(s,e))return o[e]=2,s[e];if((l=r.propsOptions[0])&&hasOwn(l,e))return o[e]=3,n[e];if(t!==EMPTY_OBJ&&hasOwn(t,e))return o[e]=4,t[e];shouldCacheAccess&&(o[e]=0)}}const h=publicPropertiesMap[e];let f,m;if(h)return e==="$attrs"&&track(r,"get",e),h(r);if((f=c.__cssModules)&&(f=f[e]))return f;if(t!==EMPTY_OBJ&&hasOwn(t,e))return o[e]=4,t[e];if(m=_.config.globalProperties,hasOwn(m,e))return m[e]},set({_:r},e,t){const{data:i,setupState:s,ctx:n}=r;return s!==EMPTY_OBJ&&hasOwn(s,e)?(s[e]=t,!0):i!==EMPTY_OBJ&&hasOwn(i,e)?(i[e]=t,!0):hasOwn(r.props,e)||e[0]==="$"&&e.slice(1)in r?!1:(n[e]=t,!0)},has({_:{data:r,setupState:e,accessCache:t,ctx:i,appContext:s,propsOptions:n}},o){let c;return!!t[o]||r!==EMPTY_OBJ&&hasOwn(r,o)||e!==EMPTY_OBJ&&hasOwn(e,o)||(c=n[0])&&hasOwn(c,o)||hasOwn(i,o)||hasOwn(publicPropertiesMap,o)||hasOwn(s.config.globalProperties,o)},defineProperty(r,e,t){return t.get!=null?r._.accessCache[e]=0:hasOwn(t,"value")&&this.set(r,e,t.value,null),Reflect.defineProperty(r,e,t)}};let shouldCacheAccess=!0;function applyOptions(r){const e=resolveMergedOptions(r),t=r.proxy,i=r.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook(e.beforeCreate,r,"bc");const{data:s,computed:n,methods:o,watch:c,provide:_,inject:l,created:h,beforeMount:f,mounted:m,beforeUpdate:g,updated:C,activated:E,deactivated:P,beforeDestroy:w,beforeUnmount:M,destroyed:T,unmounted:L,render:R,renderTracked:D,renderTriggered:N,errorCaptured:k,serverPrefetch:B,expose:$,inheritAttrs:H,components:W,directives:J,filters:z}=e;if(l&&resolveInjections(l,i,null,r.appContext.config.unwrapInjectedRef),o)for(const te in o){const ie=o[te];isFunction(ie)&&(i[te]=ie.bind(t))}if(s){const te=s.call(t,t);isObject(te)&&(r.data=reactive(te))}if(shouldCacheAccess=!0,n)for(const te in n){const ie=n[te],xe=isFunction(ie)?ie.bind(t,t):isFunction(ie.get)?ie.get.bind(t,t):NOOP,oe=!isFunction(ie)&&isFunction(ie.set)?ie.set.bind(t):NOOP,de=computed({get:xe,set:oe});Object.defineProperty(i,te,{enumerable:!0,configurable:!0,get:()=>de.value,set:X=>de.value=X})}if(c)for(const te in c)createWatcher(c[te],i,t,te);if(_){const te=isFunction(_)?_.call(t):_;Reflect.ownKeys(te).forEach(ie=>{provide(ie,te[ie])})}h&&callHook(h,r,"c");function q(te,ie){isArray(ie)?ie.forEach(xe=>te(xe.bind(t))):ie&&te(ie.bind(t))}if(q(onBeforeMount,f),q(onMounted,m),q(onBeforeUpdate,g),q(onUpdated,C),q(onActivated,E),q(onDeactivated,P),q(onErrorCaptured,k),q(onRenderTracked,D),q(onRenderTriggered,N),q(onBeforeUnmount,M),q(onUnmounted,L),q(onServerPrefetch,B),isArray($))if($.length){const te=r.exposed||(r.exposed={});$.forEach(ie=>{Object.defineProperty(te,ie,{get:()=>t[ie],set:xe=>t[ie]=xe})})}else r.exposed||(r.exposed={});R&&r.render===NOOP&&(r.render=R),H!=null&&(r.inheritAttrs=H),W&&(r.components=W),J&&(r.directives=J)}function resolveInjections(r,e,t=NOOP,i=!1){isArray(r)&&(r=normalizeInject(r));for(const s in r){const n=r[s];let o;isObject(n)?"default"in n?o=inject(n.from||s,n.default,!0):o=inject(n.from||s):o=inject(n),isRef(o)&&i?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:c=>o.value=c}):e[s]=o}}function callHook(r,e,t){callWithAsyncErrorHandling(isArray(r)?r.map(i=>i.bind(e.proxy)):r.bind(e.proxy),e,t)}function createWatcher(r,e,t,i){const s=i.includes(".")?createPathGetter(t,i):()=>t[i];if(isString(r)){const n=e[r];isFunction(n)&&watch(s,n)}else if(isFunction(r))watch(s,r.bind(t));else if(isObject(r))if(isArray(r))r.forEach(n=>createWatcher(n,e,t,i));else{const n=isFunction(r.handler)?r.handler.bind(t):e[r.handler];isFunction(n)&&watch(s,n,r)}}function resolveMergedOptions(r){const e=r.type,{mixins:t,extends:i}=e,{mixins:s,optionsCache:n,config:{optionMergeStrategies:o}}=r.appContext,c=n.get(e);let _;return c?_=c:!s.length&&!t&&!i?_=e:(_={},s.length&&s.forEach(l=>mergeOptions(_,l,o,!0)),mergeOptions(_,e,o)),isObject(e)&&n.set(e,_),_}function mergeOptions(r,e,t,i=!1){const{mixins:s,extends:n}=e;n&&mergeOptions(r,n,t,!0),s&&s.forEach(o=>mergeOptions(r,o,t,!0));for(const o in e)if(!(i&&o==="expose")){const c=internalOptionMergeStrats[o]||t&&t[o];r[o]=c?c(r[o],e[o]):e[o]}return r}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(r,e){return e?r?function(){return extend(isFunction(r)?r.call(this,this):r,isFunction(e)?e.call(this,this):e)}:e:r}function mergeInject(r,e){return mergeObjectOptions(normalizeInject(r),normalizeInject(e))}function normalizeInject(r){if(isArray(r)){const e={};for(let t=0;t<r.length;t++)e[r[t]]=r[t];return e}return r}function mergeAsArray(r,e){return r?[...new Set([].concat(r,e))]:e}function mergeObjectOptions(r,e){return r?extend(extend(Object.create(null),r),e):e}function mergeWatchOptions(r,e){if(!r)return e;if(!e)return r;const t=extend(Object.create(null),r);for(const i in e)t[i]=mergeAsArray(r[i],e[i]);return t}function initProps(r,e,t,i=!1){const s={},n={};def(n,InternalObjectKey,1),r.propsDefaults=Object.create(null),setFullProps(r,e,s,n);for(const o in r.propsOptions[0])o in s||(s[o]=void 0);t?r.props=i?s:shallowReactive(s):r.type.props?r.props=s:r.props=n,r.attrs=n}function updateProps(r,e,t,i){const{props:s,attrs:n,vnode:{patchFlag:o}}=r,c=toRaw(s),[_]=r.propsOptions;let l=!1;if((i||o>0)&&!(o&16)){if(o&8){const h=r.vnode.dynamicProps;for(let f=0;f<h.length;f++){let m=h[f];if(isEmitListener(r.emitsOptions,m))continue;const g=e[m];if(_)if(hasOwn(n,m))g!==n[m]&&(n[m]=g,l=!0);else{const C=camelize(m);s[C]=resolvePropValue(_,c,C,g,r,!1)}else g!==n[m]&&(n[m]=g,l=!0)}}}else{setFullProps(r,e,s,n)&&(l=!0);let h;for(const f in c)(!e||!hasOwn(e,f)&&((h=hyphenate(f))===f||!hasOwn(e,h)))&&(_?t&&(t[f]!==void 0||t[h]!==void 0)&&(s[f]=resolvePropValue(_,c,f,void 0,r,!0)):delete s[f]);if(n!==c)for(const f in n)(!e||!hasOwn(e,f))&&(delete n[f],l=!0)}l&&trigger(r,"set","$attrs")}function setFullProps(r,e,t,i){const[s,n]=r.propsOptions;let o=!1,c;if(e)for(let _ in e){if(isReservedProp(_))continue;const l=e[_];let h;s&&hasOwn(s,h=camelize(_))?!n||!n.includes(h)?t[h]=l:(c||(c={}))[h]=l:isEmitListener(r.emitsOptions,_)||(!(_ in i)||l!==i[_])&&(i[_]=l,o=!0)}if(n){const _=toRaw(t),l=c||EMPTY_OBJ;for(let h=0;h<n.length;h++){const f=n[h];t[f]=resolvePropValue(s,_,f,l[f],r,!hasOwn(l,f))}}return o}function resolvePropValue(r,e,t,i,s,n){const o=r[t];if(o!=null){const c=hasOwn(o,"default");if(c&&i===void 0){const _=o.default;if(o.type!==Function&&isFunction(_)){const{propsDefaults:l}=s;t in l?i=l[t]:(setCurrentInstance(s),i=l[t]=_.call(null,e),unsetCurrentInstance())}else i=_}o[0]&&(n&&!c?i=!1:o[1]&&(i===""||i===hyphenate(t))&&(i=!0))}return i}function normalizePropsOptions(r,e,t=!1){const i=e.propsCache,s=i.get(r);if(s)return s;const n=r.props,o={},c=[];let _=!1;if(!isFunction(r)){const h=f=>{_=!0;const[m,g]=normalizePropsOptions(f,e,!0);extend(o,m),g&&c.push(...g)};!t&&e.mixins.length&&e.mixins.forEach(h),r.extends&&h(r.extends),r.mixins&&r.mixins.forEach(h)}if(!n&&!_)return isObject(r)&&i.set(r,EMPTY_ARR),EMPTY_ARR;if(isArray(n))for(let h=0;h<n.length;h++){const f=camelize(n[h]);validatePropName(f)&&(o[f]=EMPTY_OBJ)}else if(n)for(const h in n){const f=camelize(h);if(validatePropName(f)){const m=n[h],g=o[f]=isArray(m)||isFunction(m)?{type:m}:m;if(g){const C=getTypeIndex(Boolean,g.type),E=getTypeIndex(String,g.type);g[0]=C>-1,g[1]=E<0||C<E,(C>-1||hasOwn(g,"default"))&&c.push(f)}}}const l=[o,c];return isObject(r)&&i.set(r,l),l}function validatePropName(r){return r[0]!=="$"}function getType(r){const e=r&&r.toString().match(/^\s*function (\w+)/);return e?e[1]:r===null?"null":""}function isSameType(r,e){return getType(r)===getType(e)}function getTypeIndex(r,e){return isArray(e)?e.findIndex(t=>isSameType(t,r)):isFunction(e)&&isSameType(e,r)?0:-1}const isInternalKey=r=>r[0]==="_"||r==="$stable",normalizeSlotValue=r=>isArray(r)?r.map(normalizeVNode):[normalizeVNode(r)],normalizeSlot=(r,e,t)=>{if(e._n)return e;const i=withCtx((...s)=>normalizeSlotValue(e(...s)),t);return i._c=!1,i},normalizeObjectSlots=(r,e,t)=>{const i=r._ctx;for(const s in r){if(isInternalKey(s))continue;const n=r[s];if(isFunction(n))e[s]=normalizeSlot(s,n,i);else if(n!=null){const o=normalizeSlotValue(n);e[s]=()=>o}}},normalizeVNodeSlots=(r,e)=>{const t=normalizeSlotValue(e);r.slots.default=()=>t},initSlots=(r,e)=>{if(r.vnode.shapeFlag&32){const t=e._;t?(r.slots=toRaw(e),def(e,"_",t)):normalizeObjectSlots(e,r.slots={})}else r.slots={},e&&normalizeVNodeSlots(r,e);def(r.slots,InternalObjectKey,1)},updateSlots=(r,e,t)=>{const{vnode:i,slots:s}=r;let n=!0,o=EMPTY_OBJ;if(i.shapeFlag&32){const c=e._;c?t&&c===1?n=!1:(extend(s,e),!t&&c===1&&delete s._):(n=!e.$stable,normalizeObjectSlots(e,s)),o=e}else e&&(normalizeVNodeSlots(r,e),o={default:1});if(n)for(const c in s)!isInternalKey(c)&&!(c in o)&&delete s[c]};function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid=0;function createAppAPI(r,e){return function(i,s=null){isFunction(i)||(i=Object.assign({},i)),s!=null&&!isObject(s)&&(s=null);const n=createAppContext(),o=new Set;let c=!1;const _=n.app={_uid:uid++,_component:i,_props:s,_container:null,_context:n,_instance:null,version,get config(){return n.config},set config(l){},use(l,...h){return o.has(l)||(l&&isFunction(l.install)?(o.add(l),l.install(_,...h)):isFunction(l)&&(o.add(l),l(_,...h))),_},mixin(l){return n.mixins.includes(l)||n.mixins.push(l),_},component(l,h){return h?(n.components[l]=h,_):n.components[l]},directive(l,h){return h?(n.directives[l]=h,_):n.directives[l]},mount(l,h,f){if(!c){const m=createVNode(i,s);return m.appContext=n,h&&e?e(m,l):r(m,l,f),c=!0,_._container=l,l.__vue_app__=_,getExposeProxy(m.component)||m.component.proxy}},unmount(){c&&(r(null,_._container),delete _._container.__vue_app__)},provide(l,h){return n.provides[l]=h,_}};return _}}function setRef(r,e,t,i,s=!1){if(isArray(r)){r.forEach((m,g)=>setRef(m,e&&(isArray(e)?e[g]:e),t,i,s));return}if(isAsyncWrapper(i)&&!s)return;const n=i.shapeFlag&4?getExposeProxy(i.component)||i.component.proxy:i.el,o=s?null:n,{i:c,r:_}=r,l=e&&e.r,h=c.refs===EMPTY_OBJ?c.refs={}:c.refs,f=c.setupState;if(l!=null&&l!==_&&(isString(l)?(h[l]=null,hasOwn(f,l)&&(f[l]=null)):isRef(l)&&(l.value=null)),isFunction(_))callWithErrorHandling(_,c,12,[o,h]);else{const m=isString(_),g=isRef(_);if(m||g){const C=()=>{if(r.f){const E=m?h[_]:_.value;s?isArray(E)&&remove(E,n):isArray(E)?E.includes(n)||E.push(n):m?(h[_]=[n],hasOwn(f,_)&&(f[_]=h[_])):(_.value=[n],r.k&&(h[r.k]=_.value))}else m?(h[_]=o,hasOwn(f,_)&&(f[_]=o)):g&&(_.value=o,r.k&&(h[r.k]=o))};o?(C.id=-1,queuePostRenderEffect(C,t)):C()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(r){return baseCreateRenderer(r)}function baseCreateRenderer(r,e){const t=getGlobalThis();t.__VUE__=!0;const{insert:i,remove:s,patchProp:n,createElement:o,createText:c,createComment:_,setText:l,setElementText:h,parentNode:f,nextSibling:m,setScopeId:g=NOOP,cloneNode:C,insertStaticContent:E}=r,P=(Q,me,Ie,De=null,Ee=null,Oe=null,le=!1,Y=null,j=!!me.dynamicChildren)=>{if(Q===me)return;Q&&!isSameVNodeType(Q,me)&&(De=ze(Q),he(Q,Ee,Oe,!0),Q=null),me.patchFlag===-2&&(j=!1,me.dynamicChildren=null);const{type:U,ref:re,shapeFlag:ce}=me;switch(U){case Text:w(Q,me,Ie,De);break;case Comment:M(Q,me,Ie,De);break;case Static:Q==null&&T(me,Ie,De,le);break;case Fragment:J(Q,me,Ie,De,Ee,Oe,le,Y,j);break;default:ce&1?D(Q,me,Ie,De,Ee,Oe,le,Y,j):ce&6?z(Q,me,Ie,De,Ee,Oe,le,Y,j):(ce&64||ce&128)&&U.process(Q,me,Ie,De,Ee,Oe,le,Y,j,ye)}re!=null&&Ee&&setRef(re,Q&&Q.ref,Oe,me||Q,!me)},w=(Q,me,Ie,De)=>{if(Q==null)i(me.el=c(me.children),Ie,De);else{const Ee=me.el=Q.el;me.children!==Q.children&&l(Ee,me.children)}},M=(Q,me,Ie,De)=>{Q==null?i(me.el=_(me.children||""),Ie,De):me.el=Q.el},T=(Q,me,Ie,De)=>{[Q.el,Q.anchor]=E(Q.children,me,Ie,De,Q.el,Q.anchor)},L=({el:Q,anchor:me},Ie,De)=>{let Ee;for(;Q&&Q!==me;)Ee=m(Q),i(Q,Ie,De),Q=Ee;i(me,Ie,De)},R=({el:Q,anchor:me})=>{let Ie;for(;Q&&Q!==me;)Ie=m(Q),s(Q),Q=Ie;s(me)},D=(Q,me,Ie,De,Ee,Oe,le,Y,j)=>{le=le||me.type==="svg",Q==null?N(me,Ie,De,Ee,Oe,le,Y,j):$(Q,me,Ee,Oe,le,Y,j)},N=(Q,me,Ie,De,Ee,Oe,le,Y)=>{let j,U;const{type:re,props:ce,shapeFlag:be,transition:Ae,patchFlag:Pe,dirs:Je}=Q;if(Q.el&&C!==void 0&&Pe===-1)j=Q.el=C(Q.el);else{if(j=Q.el=o(Q.type,Oe,ce&&ce.is,ce),be&8?h(j,Q.children):be&16&&B(Q.children,j,null,De,Ee,Oe&&re!=="foreignObject",le,Y),Je&&invokeDirectiveHook(Q,null,De,"created"),ce){for(const qe in ce)qe!=="value"&&!isReservedProp(qe)&&n(j,qe,null,ce[qe],Oe,Q.children,De,Ee,Be);"value"in ce&&n(j,"value",null,ce.value),(U=ce.onVnodeBeforeMount)&&invokeVNodeHook(U,De,Q)}k(j,Q,Q.scopeId,le,De)}Je&&invokeDirectiveHook(Q,null,De,"beforeMount");const Ue=(!Ee||Ee&&!Ee.pendingBranch)&&Ae&&!Ae.persisted;Ue&&Ae.beforeEnter(j),i(j,me,Ie),((U=ce&&ce.onVnodeMounted)||Ue||Je)&&queuePostRenderEffect(()=>{U&&invokeVNodeHook(U,De,Q),Ue&&Ae.enter(j),Je&&invokeDirectiveHook(Q,null,De,"mounted")},Ee)},k=(Q,me,Ie,De,Ee)=>{if(Ie&&g(Q,Ie),De)for(let Oe=0;Oe<De.length;Oe++)g(Q,De[Oe]);if(Ee){let Oe=Ee.subTree;if(me===Oe){const le=Ee.vnode;k(Q,le,le.scopeId,le.slotScopeIds,Ee.parent)}}},B=(Q,me,Ie,De,Ee,Oe,le,Y,j=0)=>{for(let U=j;U<Q.length;U++){const re=Q[U]=Y?cloneIfMounted(Q[U]):normalizeVNode(Q[U]);P(null,re,me,Ie,De,Ee,Oe,le,Y)}},$=(Q,me,Ie,De,Ee,Oe,le)=>{const Y=me.el=Q.el;let{patchFlag:j,dynamicChildren:U,dirs:re}=me;j|=Q.patchFlag&16;const ce=Q.props||EMPTY_OBJ,be=me.props||EMPTY_OBJ;let Ae;Ie&&toggleRecurse(Ie,!1),(Ae=be.onVnodeBeforeUpdate)&&invokeVNodeHook(Ae,Ie,me,Q),re&&invokeDirectiveHook(me,Q,Ie,"beforeUpdate"),Ie&&toggleRecurse(Ie,!0);const Pe=Ee&&me.type!=="foreignObject";if(U?H(Q.dynamicChildren,U,Y,Ie,De,Pe,Oe):le||xe(Q,me,Y,null,Ie,De,Pe,Oe,!1),j>0){if(j&16)W(Y,me,ce,be,Ie,De,Ee);else if(j&2&&ce.class!==be.class&&n(Y,"class",null,be.class,Ee),j&4&&n(Y,"style",ce.style,be.style,Ee),j&8){const Je=me.dynamicProps;for(let Ue=0;Ue<Je.length;Ue++){const qe=Je[Ue],ct=ce[qe],vt=be[qe];(vt!==ct||qe==="value")&&n(Y,qe,ct,vt,Ee,Q.children,Ie,De,Be)}}j&1&&Q.children!==me.children&&h(Y,me.children)}else!le&&U==null&&W(Y,me,ce,be,Ie,De,Ee);((Ae=be.onVnodeUpdated)||re)&&queuePostRenderEffect(()=>{Ae&&invokeVNodeHook(Ae,Ie,me,Q),re&&invokeDirectiveHook(me,Q,Ie,"updated")},De)},H=(Q,me,Ie,De,Ee,Oe,le)=>{for(let Y=0;Y<me.length;Y++){const j=Q[Y],U=me[Y],re=j.el&&(j.type===Fragment||!isSameVNodeType(j,U)||j.shapeFlag&70)?f(j.el):Ie;P(j,U,re,null,De,Ee,Oe,le,!0)}},W=(Q,me,Ie,De,Ee,Oe,le)=>{if(Ie!==De){for(const Y in De){if(isReservedProp(Y))continue;const j=De[Y],U=Ie[Y];j!==U&&Y!=="value"&&n(Q,Y,U,j,le,me.children,Ee,Oe,Be)}if(Ie!==EMPTY_OBJ)for(const Y in Ie)!isReservedProp(Y)&&!(Y in De)&&n(Q,Y,Ie[Y],null,le,me.children,Ee,Oe,Be);"value"in De&&n(Q,"value",Ie.value,De.value)}},J=(Q,me,Ie,De,Ee,Oe,le,Y,j)=>{const U=me.el=Q?Q.el:c(""),re=me.anchor=Q?Q.anchor:c("");let{patchFlag:ce,dynamicChildren:be,slotScopeIds:Ae}=me;Ae&&(Y=Y?Y.concat(Ae):Ae),Q==null?(i(U,Ie,De),i(re,Ie,De),B(me.children,Ie,re,Ee,Oe,le,Y,j)):ce>0&&ce&64&&be&&Q.dynamicChildren?(H(Q.dynamicChildren,be,Ie,Ee,Oe,le,Y),(me.key!=null||Ee&&me===Ee.subTree)&&traverseStaticChildren(Q,me,!0)):xe(Q,me,Ie,re,Ee,Oe,le,Y,j)},z=(Q,me,Ie,De,Ee,Oe,le,Y,j)=>{me.slotScopeIds=Y,Q==null?me.shapeFlag&512?Ee.ctx.activate(me,Ie,De,le,j):fe(me,Ie,De,Ee,Oe,le,j):q(Q,me,j)},fe=(Q,me,Ie,De,Ee,Oe,le)=>{const Y=Q.component=createComponentInstance(Q,De,Ee);if(isKeepAlive(Q)&&(Y.ctx.renderer=ye),setupComponent(Y),Y.asyncDep){if(Ee&&Ee.registerDep(Y,te),!Q.el){const j=Y.subTree=createVNode(Comment);M(null,j,me,Ie)}return}te(Y,Q,me,Ie,Ee,Oe,le)},q=(Q,me,Ie)=>{const De=me.component=Q.component;if(shouldUpdateComponent(Q,me,Ie))if(De.asyncDep&&!De.asyncResolved){ie(De,me,Ie);return}else De.next=me,invalidateJob(De.update),De.update();else me.el=Q.el,De.vnode=me},te=(Q,me,Ie,De,Ee,Oe,le)=>{const Y=()=>{if(Q.isMounted){let{next:re,bu:ce,u:be,parent:Ae,vnode:Pe}=Q,Je=re,Ue;toggleRecurse(Q,!1),re?(re.el=Pe.el,ie(Q,re,le)):re=Pe,ce&&invokeArrayFns(ce),(Ue=re.props&&re.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Ue,Ae,re,Pe),toggleRecurse(Q,!0);const qe=renderComponentRoot(Q),ct=Q.subTree;Q.subTree=qe,P(ct,qe,f(ct.el),ze(ct),Q,Ee,Oe),re.el=qe.el,Je===null&&updateHOCHostEl(Q,qe.el),be&&queuePostRenderEffect(be,Ee),(Ue=re.props&&re.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Ue,Ae,re,Pe),Ee)}else{let re;const{el:ce,props:be}=me,{bm:Ae,m:Pe,parent:Je}=Q,Ue=isAsyncWrapper(me);if(toggleRecurse(Q,!1),Ae&&invokeArrayFns(Ae),!Ue&&(re=be&&be.onVnodeBeforeMount)&&invokeVNodeHook(re,Je,me),toggleRecurse(Q,!0),ce&&Ce){const qe=()=>{Q.subTree=renderComponentRoot(Q),Ce(ce,Q.subTree,Q,Ee,null)};Ue?me.type.__asyncLoader().then(()=>!Q.isUnmounted&&qe()):qe()}else{const qe=Q.subTree=renderComponentRoot(Q);P(null,qe,Ie,De,Q,Ee,Oe),me.el=qe.el}if(Pe&&queuePostRenderEffect(Pe,Ee),!Ue&&(re=be&&be.onVnodeMounted)){const qe=me;queuePostRenderEffect(()=>invokeVNodeHook(re,Je,qe),Ee)}(me.shapeFlag&256||Je&&isAsyncWrapper(Je.vnode)&&Je.vnode.shapeFlag&256)&&Q.a&&queuePostRenderEffect(Q.a,Ee),Q.isMounted=!0,me=Ie=De=null}},j=Q.effect=new ReactiveEffect(Y,()=>queueJob(U),Q.scope),U=Q.update=()=>j.run();U.id=Q.uid,toggleRecurse(Q,!0),U()},ie=(Q,me,Ie)=>{me.component=Q;const De=Q.vnode.props;Q.vnode=me,Q.next=null,updateProps(Q,me.props,De,Ie),updateSlots(Q,me.children,Ie),pauseTracking(),flushPreFlushCbs(),resetTracking()},xe=(Q,me,Ie,De,Ee,Oe,le,Y,j=!1)=>{const U=Q&&Q.children,re=Q?Q.shapeFlag:0,ce=me.children,{patchFlag:be,shapeFlag:Ae}=me;if(be>0){if(be&128){de(U,ce,Ie,De,Ee,Oe,le,Y,j);return}else if(be&256){oe(U,ce,Ie,De,Ee,Oe,le,Y,j);return}}Ae&8?(re&16&&Be(U,Ee,Oe),ce!==U&&h(Ie,ce)):re&16?Ae&16?de(U,ce,Ie,De,Ee,Oe,le,Y,j):Be(U,Ee,Oe,!0):(re&8&&h(Ie,""),Ae&16&&B(ce,Ie,De,Ee,Oe,le,Y,j))},oe=(Q,me,Ie,De,Ee,Oe,le,Y,j)=>{Q=Q||EMPTY_ARR,me=me||EMPTY_ARR;const U=Q.length,re=me.length,ce=Math.min(U,re);let be;for(be=0;be<ce;be++){const Ae=me[be]=j?cloneIfMounted(me[be]):normalizeVNode(me[be]);P(Q[be],Ae,Ie,null,Ee,Oe,le,Y,j)}U>re?Be(Q,Ee,Oe,!0,!1,ce):B(me,Ie,De,Ee,Oe,le,Y,j,ce)},de=(Q,me,Ie,De,Ee,Oe,le,Y,j)=>{let U=0;const re=me.length;let ce=Q.length-1,be=re-1;for(;U<=ce&&U<=be;){const Ae=Q[U],Pe=me[U]=j?cloneIfMounted(me[U]):normalizeVNode(me[U]);if(isSameVNodeType(Ae,Pe))P(Ae,Pe,Ie,null,Ee,Oe,le,Y,j);else break;U++}for(;U<=ce&&U<=be;){const Ae=Q[ce],Pe=me[be]=j?cloneIfMounted(me[be]):normalizeVNode(me[be]);if(isSameVNodeType(Ae,Pe))P(Ae,Pe,Ie,null,Ee,Oe,le,Y,j);else break;ce--,be--}if(U>ce){if(U<=be){const Ae=be+1,Pe=Ae<re?me[Ae].el:De;for(;U<=be;)P(null,me[U]=j?cloneIfMounted(me[U]):normalizeVNode(me[U]),Ie,Pe,Ee,Oe,le,Y,j),U++}}else if(U>be)for(;U<=ce;)he(Q[U],Ee,Oe,!0),U++;else{const Ae=U,Pe=U,Je=new Map;for(U=Pe;U<=be;U++){const At=me[U]=j?cloneIfMounted(me[U]):normalizeVNode(me[U]);At.key!=null&&Je.set(At.key,U)}let Ue,qe=0;const ct=be-Pe+1;let vt=!1,Mt=0;const pt=new Array(ct);for(U=0;U<ct;U++)pt[U]=0;for(U=Ae;U<=ce;U++){const At=Q[U];if(qe>=ct){he(At,Ee,Oe,!0);continue}let It;if(At.key!=null)It=Je.get(At.key);else for(Ue=Pe;Ue<=be;Ue++)if(pt[Ue-Pe]===0&&isSameVNodeType(At,me[Ue])){It=Ue;break}It===void 0?he(At,Ee,Oe,!0):(pt[It-Pe]=U+1,It>=Mt?Mt=It:vt=!0,P(At,me[It],Ie,null,Ee,Oe,le,Y,j),qe++)}const Lt=vt?getSequence(pt):EMPTY_ARR;for(Ue=Lt.length-1,U=ct-1;U>=0;U--){const At=Pe+U,It=me[At],Rt=At+1<re?me[At+1].el:De;pt[U]===0?P(null,It,Ie,Rt,Ee,Oe,le,Y,j):vt&&(Ue<0||U!==Lt[Ue]?X(It,Ie,Rt,2):Ue--)}}},X=(Q,me,Ie,De,Ee=null)=>{const{el:Oe,type:le,transition:Y,children:j,shapeFlag:U}=Q;if(U&6){X(Q.component.subTree,me,Ie,De);return}if(U&128){Q.suspense.move(me,Ie,De);return}if(U&64){le.move(Q,me,Ie,ye);return}if(le===Fragment){i(Oe,me,Ie);for(let ce=0;ce<j.length;ce++)X(j[ce],me,Ie,De);i(Q.anchor,me,Ie);return}if(le===Static){L(Q,me,Ie);return}if(De!==2&&U&1&&Y)if(De===0)Y.beforeEnter(Oe),i(Oe,me,Ie),queuePostRenderEffect(()=>Y.enter(Oe),Ee);else{const{leave:ce,delayLeave:be,afterLeave:Ae}=Y,Pe=()=>i(Oe,me,Ie),Je=()=>{ce(Oe,()=>{Pe(),Ae&&Ae()})};be?be(Oe,Pe,Je):Je()}else i(Oe,me,Ie)},he=(Q,me,Ie,De=!1,Ee=!1)=>{const{type:Oe,props:le,ref:Y,children:j,dynamicChildren:U,shapeFlag:re,patchFlag:ce,dirs:be}=Q;if(Y!=null&&setRef(Y,null,Ie,Q,!0),re&256){me.ctx.deactivate(Q);return}const Ae=re&1&&be,Pe=!isAsyncWrapper(Q);let Je;if(Pe&&(Je=le&&le.onVnodeBeforeUnmount)&&invokeVNodeHook(Je,me,Q),re&6)Re(Q.component,Ie,De);else{if(re&128){Q.suspense.unmount(Ie,De);return}Ae&&invokeDirectiveHook(Q,null,me,"beforeUnmount"),re&64?Q.type.remove(Q,me,Ie,Ee,ye,De):U&&(Oe!==Fragment||ce>0&&ce&64)?Be(U,me,Ie,!1,!0):(Oe===Fragment&&ce&384||!Ee&&re&16)&&Be(j,me,Ie),De&&Se(Q)}(Pe&&(Je=le&&le.onVnodeUnmounted)||Ae)&&queuePostRenderEffect(()=>{Je&&invokeVNodeHook(Je,me,Q),Ae&&invokeDirectiveHook(Q,null,me,"unmounted")},Ie)},Se=Q=>{const{type:me,el:Ie,anchor:De,transition:Ee}=Q;if(me===Fragment){Te(Ie,De);return}if(me===Static){R(Q);return}const Oe=()=>{s(Ie),Ee&&!Ee.persisted&&Ee.afterLeave&&Ee.afterLeave()};if(Q.shapeFlag&1&&Ee&&!Ee.persisted){const{leave:le,delayLeave:Y}=Ee,j=()=>le(Ie,Oe);Y?Y(Q.el,Oe,j):j()}else Oe()},Te=(Q,me)=>{let Ie;for(;Q!==me;)Ie=m(Q),s(Q),Q=Ie;s(me)},Re=(Q,me,Ie)=>{const{bum:De,scope:Ee,update:Oe,subTree:le,um:Y}=Q;De&&invokeArrayFns(De),Ee.stop(),Oe&&(Oe.active=!1,he(le,Q,me,Ie)),Y&&queuePostRenderEffect(Y,me),queuePostRenderEffect(()=>{Q.isUnmounted=!0},me),me&&me.pendingBranch&&!me.isUnmounted&&Q.asyncDep&&!Q.asyncResolved&&Q.suspenseId===me.pendingId&&(me.deps--,me.deps===0&&me.resolve())},Be=(Q,me,Ie,De=!1,Ee=!1,Oe=0)=>{for(let le=Oe;le<Q.length;le++)he(Q[le],me,Ie,De,Ee)},ze=Q=>Q.shapeFlag&6?ze(Q.component.subTree):Q.shapeFlag&128?Q.suspense.next():m(Q.anchor||Q.el),Ve=(Q,me,Ie)=>{Q==null?me._vnode&&he(me._vnode,null,null,!0):P(me._vnode||null,Q,me,null,null,null,Ie),flushPreFlushCbs(),flushPostFlushCbs(),me._vnode=Q},ye={p:P,um:he,m:X,r:Se,mt:fe,mc:B,pc:xe,pbc:H,n:ze,o:r};let Fe,Ce;return e&&([Fe,Ce]=e(ye)),{render:Ve,hydrate:Fe,createApp:createAppAPI(Ve,Fe)}}function toggleRecurse({effect:r,update:e},t){r.allowRecurse=e.allowRecurse=t}function traverseStaticChildren(r,e,t=!1){const i=r.children,s=e.children;if(isArray(i)&&isArray(s))for(let n=0;n<i.length;n++){const o=i[n];let c=s[n];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=s[n]=cloneIfMounted(s[n]),c.el=o.el),t||traverseStaticChildren(o,c))}}function getSequence(r){const e=r.slice(),t=[0];let i,s,n,o,c;const _=r.length;for(i=0;i<_;i++){const l=r[i];if(l!==0){if(s=t[t.length-1],r[s]<l){e[i]=s,t.push(i);continue}for(n=0,o=t.length-1;n<o;)c=n+o>>1,r[t[c]]<l?n=c+1:o=c;l<r[t[n]]&&(n>0&&(e[i]=t[n-1]),t[n]=i)}}for(n=t.length,o=t[n-1];n-- >0;)t[n]=o,o=e[o];return t}const isTeleport=r=>r.__isTeleport,Fragment=Symbol(void 0),Text=Symbol(void 0),Comment=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(r=!1){blockStack.push(currentBlock=r?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(r){isBlockTreeEnabled+=r}function setupBlock(r){return r.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(r),r}function createElementBlock(r,e,t,i,s,n){return setupBlock(createBaseVNode(r,e,t,i,s,n,!0))}function createBlock(r,e,t,i,s){return setupBlock(createVNode(r,e,t,i,s,!0))}function isVNode(r){return r?r.__v_isVNode===!0:!1}function isSameVNodeType(r,e){return r.type===e.type&&r.key===e.key}const InternalObjectKey="__vInternal",normalizeKey=({key:r})=>r??null,normalizeRef=({ref:r,ref_key:e,ref_for:t})=>r!=null?isString(r)||isRef(r)||isFunction(r)?{i:currentRenderingInstance,r,k:e,f:!!t}:r:null;function createBaseVNode(r,e=null,t=null,i=0,s=null,n=r===Fragment?0:1,o=!1,c=!1){const _={__v_isVNode:!0,__v_skip:!0,type:r,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null};return c?(normalizeChildren(_,t),n&128&&r.normalize(_)):t&&(_.shapeFlag|=isString(t)?8:16),isBlockTreeEnabled>0&&!o&&currentBlock&&(_.patchFlag>0||n&6)&&_.patchFlag!==32&&currentBlock.push(_),_}const createVNode=_createVNode;function _createVNode(r,e=null,t=null,i=0,s=null,n=!1){if((!r||r===NULL_DYNAMIC_COMPONENT)&&(r=Comment),isVNode(r)){const c=cloneVNode(r,e,!0);return t&&normalizeChildren(c,t),isBlockTreeEnabled>0&&!n&&currentBlock&&(c.shapeFlag&6?currentBlock[currentBlock.indexOf(r)]=c:currentBlock.push(c)),c.patchFlag|=-2,c}if(isClassComponent(r)&&(r=r.__vccOpts),e){e=guardReactiveProps(e);let{class:c,style:_}=e;c&&!isString(c)&&(e.class=normalizeClass(c)),isObject(_)&&(isProxy(_)&&!isArray(_)&&(_=extend({},_)),e.style=normalizeStyle(_))}const o=isString(r)?1:isSuspense(r)?128:isTeleport(r)?64:isObject(r)?4:isFunction(r)?2:0;return createBaseVNode(r,e,t,i,s,o,n,!0)}function guardReactiveProps(r){return r?isProxy(r)||InternalObjectKey in r?extend({},r):r:null}function cloneVNode(r,e,t=!1){const{props:i,ref:s,patchFlag:n,children:o}=r,c=e?mergeProps(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:r.type,props:c,key:c&&normalizeKey(c),ref:e&&e.ref?t&&s?isArray(s)?s.concat(normalizeRef(e)):[s,normalizeRef(e)]:normalizeRef(e):s,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:o,target:r.target,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:e&&r.type!==Fragment?n===-1?16:n|16:n,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:r.transition,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&cloneVNode(r.ssContent),ssFallback:r.ssFallback&&cloneVNode(r.ssFallback),el:r.el,anchor:r.anchor}}function createTextVNode(r=" ",e=0){return createVNode(Text,null,r,e)}function normalizeVNode(r){return r==null||typeof r=="boolean"?createVNode(Comment):isArray(r)?createVNode(Fragment,null,r.slice()):typeof r=="object"?cloneIfMounted(r):createVNode(Text,null,String(r))}function cloneIfMounted(r){return r.el===null||r.memo?r:cloneVNode(r)}function normalizeChildren(r,e){let t=0;const{shapeFlag:i}=r;if(e==null)e=null;else if(isArray(e))t=16;else if(typeof e=="object")if(i&65){const s=e.default;s&&(s._c&&(s._d=!1),normalizeChildren(r,s()),s._c&&(s._d=!0));return}else{t=32;const s=e._;!s&&!(InternalObjectKey in e)?e._ctx=currentRenderingInstance:s===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,r.patchFlag|=1024))}else isFunction(e)?(e={default:e,_ctx:currentRenderingInstance},t=32):(e=String(e),i&64?(t=16,e=[createTextVNode(e)]):t=8);r.children=e,r.shapeFlag|=t}function mergeProps(...r){const e={};for(let t=0;t<r.length;t++){const i=r[t];for(const s in i)if(s==="class")e.class!==i.class&&(e.class=normalizeClass([e.class,i.class]));else if(s==="style")e.style=normalizeStyle([e.style,i.style]);else if(isOn(s)){const n=e[s],o=i[s];o&&n!==o&&!(isArray(n)&&n.includes(o))&&(e[s]=n?[].concat(n,o):o)}else s!==""&&(e[s]=i[s])}return e}function invokeVNodeHook(r,e,t,i=null){callWithAsyncErrorHandling(r,e,7,[t,i])}const emptyAppContext=createAppContext();let uid$1=0;function createComponentInstance(r,e,t){const i=r.type,s=(e?e.appContext:r.appContext)||emptyAppContext,n={uid:uid$1++,vnode:r,type:i,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(i,s),emitsOptions:normalizeEmitsOptions(i,s),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:i.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=e?e.root:n,n.emit=emit$1.bind(null,n),r.ce&&r.ce(n),n}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=r=>{currentInstance=r,r.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(r){return r.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(r,e=!1){isInSSRComponentSetup=e;const{props:t,children:i}=r.vnode,s=isStatefulComponent(r);initProps(r,t,s,e),initSlots(r,i);const n=s?setupStatefulComponent(r,e):void 0;return isInSSRComponentSetup=!1,n}function setupStatefulComponent(r,e){const t=r.type;r.accessCache=Object.create(null),r.proxy=markRaw(new Proxy(r.ctx,PublicInstanceProxyHandlers));const{setup:i}=t;if(i){const s=r.setupContext=i.length>1?createSetupContext(r):null;setCurrentInstance(r),pauseTracking();const n=callWithErrorHandling(i,r,0,[r.props,s]);if(resetTracking(),unsetCurrentInstance(),isPromise(n)){if(n.then(unsetCurrentInstance,unsetCurrentInstance),e)return n.then(o=>{handleSetupResult(r,o,e)}).catch(o=>{handleError(o,r,0)});r.asyncDep=n}else handleSetupResult(r,n,e)}else finishComponentSetup(r,e)}function handleSetupResult(r,e,t){isFunction(e)?r.type.__ssrInlineRender?r.ssrRender=e:r.render=e:isObject(e)&&(r.setupState=proxyRefs(e)),finishComponentSetup(r,t)}let compile;function finishComponentSetup(r,e,t){const i=r.type;if(!r.render){if(!e&&compile&&!i.render){const s=i.template||resolveMergedOptions(r).template;if(s){const{isCustomElement:n,compilerOptions:o}=r.appContext.config,{delimiters:c,compilerOptions:_}=i,l=extend(extend({isCustomElement:n,delimiters:c},o),_);i.render=compile(s,l)}}r.render=i.render||NOOP}setCurrentInstance(r),pauseTracking(),applyOptions(r),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(r){return new Proxy(r.attrs,{get(e,t){return track(r,"get","$attrs"),e[t]}})}function createSetupContext(r){const e=i=>{r.exposed=i||{}};let t;return{get attrs(){return t||(t=createAttrsProxy(r))},slots:r.slots,emit:r.emit,expose:e}}function getExposeProxy(r){if(r.exposed)return r.exposeProxy||(r.exposeProxy=new Proxy(proxyRefs(markRaw(r.exposed)),{get(e,t){if(t in e)return e[t];if(t in publicPropertiesMap)return publicPropertiesMap[t](r)}}))}function isClassComponent(r){return isFunction(r)&&"__vccOpts"in r}const computed=(r,e)=>computed$1(r,e,isInSSRComponentSetup),version="3.2.39",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(r,e,t)=>{e.insertBefore(r,t||null)},remove:r=>{const e=r.parentNode;e&&e.removeChild(r)},createElement:(r,e,t,i)=>{const s=e?doc.createElementNS(svgNS,r):doc.createElement(r,t?{is:t}:void 0);return r==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:r=>doc.createTextNode(r),createComment:r=>doc.createComment(r),setText:(r,e)=>{r.nodeValue=e},setElementText:(r,e)=>{r.textContent=e},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>doc.querySelector(r),setScopeId(r,e){r.setAttribute(e,"")},cloneNode(r){const e=r.cloneNode(!0);return"_value"in r&&(e._value=r._value),e},insertStaticContent(r,e,t,i,s,n){const o=t?t.previousSibling:e.lastChild;if(s&&(s===n||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),t),!(s===n||!(s=s.nextSibling)););else{templateContainer.innerHTML=i?`<svg>${r}</svg>`:r;const c=templateContainer.content;if(i){const _=c.firstChild;for(;_.firstChild;)c.appendChild(_.firstChild);c.removeChild(_)}e.insertBefore(c,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}};function patchClass(r,e,t){const i=r._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?r.removeAttribute("class"):t?r.setAttribute("class",e):r.className=e}function patchStyle(r,e,t){const i=r.style,s=isString(t);if(t&&!s){for(const n in t)setStyle(i,n,t[n]);if(e&&!isString(e))for(const n in e)t[n]==null&&setStyle(i,n,"")}else{const n=i.display;s?e!==t&&(i.cssText=t):e&&r.removeAttribute("style"),"_vod"in r&&(i.display=n)}}const importantRE=/\s*!important$/;function setStyle(r,e,t){if(isArray(t))t.forEach(i=>setStyle(r,e,i));else if(t==null&&(t=""),e.startsWith("--"))r.setProperty(e,t);else{const i=autoPrefix(r,e);importantRE.test(t)?r.setProperty(hyphenate(i),t.replace(importantRE,""),"important"):r[i]=t}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(r,e){const t=prefixCache[e];if(t)return t;let i=camelize(e);if(i!=="filter"&&i in r)return prefixCache[e]=i;i=capitalize(i);for(let s=0;s<prefixes.length;s++){const n=prefixes[s]+i;if(n in r)return prefixCache[e]=n}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(r,e,t,i,s){if(i&&e.startsWith("xlink:"))t==null?r.removeAttributeNS(xlinkNS,e.slice(6,e.length)):r.setAttributeNS(xlinkNS,e,t);else{const n=isSpecialBooleanAttr(e);t==null||n&&!includeBooleanAttr(t)?r.removeAttribute(e):r.setAttribute(e,n?"":t)}}function patchDOMProp(r,e,t,i,s,n,o){if(e==="innerHTML"||e==="textContent"){i&&o(i,s,n),r[e]=t??"";return}if(e==="value"&&r.tagName!=="PROGRESS"&&!r.tagName.includes("-")){r._value=t;const _=t??"";(r.value!==_||r.tagName==="OPTION")&&(r.value=_),t==null&&r.removeAttribute(e);return}let c=!1;if(t===""||t==null){const _=typeof r[e];_==="boolean"?t=includeBooleanAttr(t):t==null&&_==="string"?(t="",c=!0):_==="number"&&(t=0,c=!0)}try{r[e]=t}catch{}c&&r.removeAttribute(e)}const[_getNow,skipTimestampCheck]=(()=>{let r=Date.now,e=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(r=performance.now.bind(performance));const t=navigator.userAgent.match(/firefox\/(\d+)/i);e=!!(t&&Number(t[1])<=53)}return[r,e]})();let cachedNow=0;const p=Promise.resolve(),reset=()=>{cachedNow=0},getNow=()=>cachedNow||(p.then(reset),cachedNow=_getNow());function addEventListener(r,e,t,i){r.addEventListener(e,t,i)}function removeEventListener(r,e,t,i){r.removeEventListener(e,t,i)}function patchEvent(r,e,t,i,s=null){const n=r._vei||(r._vei={}),o=n[e];if(i&&o)o.value=i;else{const[c,_]=parseName(e);if(i){const l=n[e]=createInvoker(i,s);addEventListener(r,c,l,_)}else o&&(removeEventListener(r,c,o,_),n[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(r){let e;if(optionsModifierRE.test(r)){e={};let i;for(;i=r.match(optionsModifierRE);)r=r.slice(0,r.length-i[0].length),e[i[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):hyphenate(r.slice(2)),e]}function createInvoker(r,e){const t=i=>{const s=i.timeStamp||_getNow();(skipTimestampCheck||s>=t.attached-1)&&callWithAsyncErrorHandling(patchStopImmediatePropagation(i,t.value),e,5,[i])};return t.value=r,t.attached=getNow(),t}function patchStopImmediatePropagation(r,e){if(isArray(e)){const t=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{t.call(r),r._stopped=!0},e.map(i=>s=>!s._stopped&&i&&i(s))}else return e}const nativeOnRE=/^on[a-z]/,patchProp=(r,e,t,i,s=!1,n,o,c,_)=>{e==="class"?patchClass(r,i,s):e==="style"?patchStyle(r,t,i):isOn(e)?isModelListener(e)||patchEvent(r,e,t,i,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(r,e,i,s))?patchDOMProp(r,e,i,n,o,c,_):(e==="true-value"?r._trueValue=i:e==="false-value"&&(r._falseValue=i),patchAttr(r,e,i,s))};function shouldSetAsProp(r,e,t,i){return i?!!(e==="innerHTML"||e==="textContent"||e in r&&nativeOnRE.test(e)&&isFunction(t)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&r.tagName==="INPUT"||e==="type"&&r.tagName==="TEXTAREA"||nativeOnRE.test(e)&&isString(t)?!1:e in r}const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};BaseTransition.props;const rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...r)=>{const e=ensureRenderer().createApp(...r),{mount:t}=e;return e.mount=i=>{const s=normalizeContainer(i);if(!s)return;const n=e._component;!isFunction(n)&&!n.render&&!n.template&&(n.template=s.innerHTML),s.innerHTML="";const o=t(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function normalizeContainer(r){return isString(r)?document.querySelector(r):r}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getAugmentedNamespace(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function i(){if(this instanceof i){var s=[null];s.push.apply(s,arguments);var n=Function.bind.apply(e,s);return new n}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var s=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return r[i]}})}),t}var mars3d={exports:{}};const _global_Cesium=Cesium;var js$1G={},js$1F={exports:{}},js$1E={},js$1D={},js$1C={},hasRequiredJs$1G;function requireJs$1G(){return hasRequiredJs$1G||(hasRequiredJs$1G=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.earthRadius=63710088e-1,r.factors={centimeters:r.earthRadius*100,centimetres:r.earthRadius*100,degrees:r.earthRadius/111325,feet:r.earthRadius*3.28084,inches:r.earthRadius*39.37,kilometers:r.earthRadius/1e3,kilometres:r.earthRadius/1e3,meters:r.earthRadius,metres:r.earthRadius,miles:r.earthRadius/1609.344,millimeters:r.earthRadius*1e3,millimetres:r.earthRadius*1e3,nauticalmiles:r.earthRadius/1852,radians:1,yards:r.earthRadius*1.0936},r.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/r.earthRadius,yards:1.0936133},r.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function e(H,W,J){J===void 0&&(J={});var z={type:"Feature"};return(J.id===0||J.id)&&(z.id=J.id),J.bbox&&(z.bbox=J.bbox),z.properties=W||{},z.geometry=H,z}r.feature=e;function t(H,W,J){switch(H){case"Point":return i(W).geometry;case"LineString":return c(W).geometry;case"Polygon":return n(W).geometry;case"MultiPoint":return f(W).geometry;case"MultiLineString":return h(W).geometry;case"MultiPolygon":return m(W).geometry;default:throw new Error(H+" is invalid")}}r.geometry=t;function i(H,W,J){if(J===void 0&&(J={}),!H)throw new Error("coordinates is required");if(!Array.isArray(H))throw new Error("coordinates must be an Array");if(H.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!N(H[0])||!N(H[1]))throw new Error("coordinates must contain numbers");var z={type:"Point",coordinates:H};return e(z,W,J)}r.point=i;function s(H,W,J){return J===void 0&&(J={}),l(H.map(function(z){return i(z,W)}),J)}r.points=s;function n(H,W,J){J===void 0&&(J={});for(var z=0,fe=H;z<fe.length;z++){var q=fe[z];if(q.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var te=0;te<q[q.length-1].length;te++)if(q[q.length-1][te]!==q[0][te])throw new Error("First and last Position are not equivalent.")}var ie={type:"Polygon",coordinates:H};return e(ie,W,J)}r.polygon=n;function o(H,W,J){return J===void 0&&(J={}),l(H.map(function(z){return n(z,W)}),J)}r.polygons=o;function c(H,W,J){if(J===void 0&&(J={}),H.length<2)throw new Error("coordinates must be an array of two or more positions");var z={type:"LineString",coordinates:H};return e(z,W,J)}r.lineString=c;function _(H,W,J){return J===void 0&&(J={}),l(H.map(function(z){return c(z,W)}),J)}r.lineStrings=_;function l(H,W){W===void 0&&(W={});var J={type:"FeatureCollection"};return W.id&&(J.id=W.id),W.bbox&&(J.bbox=W.bbox),J.features=H,J}r.featureCollection=l;function h(H,W,J){J===void 0&&(J={});var z={type:"MultiLineString",coordinates:H};return e(z,W,J)}r.multiLineString=h;function f(H,W,J){J===void 0&&(J={});var z={type:"MultiPoint",coordinates:H};return e(z,W,J)}r.multiPoint=f;function m(H,W,J){J===void 0&&(J={});var z={type:"MultiPolygon",coordinates:H};return e(z,W,J)}r.multiPolygon=m;function g(H,W,J){J===void 0&&(J={});var z={type:"GeometryCollection",geometries:H};return e(z,W,J)}r.geometryCollection=g;function C(H,W){if(W===void 0&&(W=0),W&&!(W>=0))throw new Error("precision must be a positive number");var J=Math.pow(10,W||0);return Math.round(H*J)/J}r.round=C;function E(H,W){W===void 0&&(W="kilometers");var J=r.factors[W];if(!J)throw new Error(W+" units is invalid");return H*J}r.radiansToLength=E;function P(H,W){W===void 0&&(W="kilometers");var J=r.factors[W];if(!J)throw new Error(W+" units is invalid");return H/J}r.lengthToRadians=P;function w(H,W){return T(P(H,W))}r.lengthToDegrees=w;function M(H){var W=H%360;return W<0&&(W+=360),W}r.bearingToAzimuth=M;function T(H){var W=H%(2*Math.PI);return W*180/Math.PI}r.radiansToDegrees=T;function L(H){var W=H%360;return W*Math.PI/180}r.degreesToRadians=L;function R(H,W,J){if(W===void 0&&(W="kilometers"),J===void 0&&(J="kilometers"),!(H>=0))throw new Error("length must be a positive number");return E(P(H,W),J)}r.convertLength=R;function D(H,W,J){if(W===void 0&&(W="meters"),J===void 0&&(J="kilometers"),!(H>=0))throw new Error("area must be a positive number");var z=r.areaFactors[W];if(!z)throw new Error("invalid original units");var fe=r.areaFactors[J];if(!fe)throw new Error("invalid final units");return H/z*fe}r.convertArea=D;function N(H){return!isNaN(H)&&H!==null&&!Array.isArray(H)}r.isNumber=N;function k(H){return!!H&&H.constructor===Object}r.isObject=k;function B(H){if(!H)throw new Error("bbox is required");if(!Array.isArray(H))throw new Error("bbox must be an Array");if(H.length!==4&&H.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");H.forEach(function(W){if(!N(W))throw new Error("bbox must only contain numbers")})}r.validateBBox=B;function $(H){if(!H)throw new Error("id is required");if(["string","number"].indexOf(typeof H)===-1)throw new Error("id must be a number or a string")}r.validateId=$}(js$1C)),js$1C}var hasRequiredJs$1F;function requireJs$1F(){if(hasRequiredJs$1F)return js$1D;hasRequiredJs$1F=1,Object.defineProperty(js$1D,"__esModule",{value:!0});var r=requireJs$1G();function e(M,T,L){if(M!==null)for(var R,D,N,k,B,$,H,W=0,J=0,z,fe=M.type,q=fe==="FeatureCollection",te=fe==="Feature",ie=q?M.features.length:1,xe=0;xe<ie;xe++){H=q?M.features[xe].geometry:te?M.geometry:M,z=H?H.type==="GeometryCollection":!1,B=z?H.geometries.length:1;for(var oe=0;oe<B;oe++){var de=0,X=0;if(k=z?H.geometries[oe]:H,k!==null){$=k.coordinates;var he=k.type;switch(W=L&&(he==="Polygon"||he==="MultiPolygon")?1:0,he){case null:break;case"Point":if(T($,J,xe,de,X)===!1)return!1;J++,de++;break;case"LineString":case"MultiPoint":for(R=0;R<$.length;R++){if(T($[R],J,xe,de,X)===!1)return!1;J++,he==="MultiPoint"&&de++}he==="LineString"&&de++;break;case"Polygon":case"MultiLineString":for(R=0;R<$.length;R++){for(D=0;D<$[R].length-W;D++){if(T($[R][D],J,xe,de,X)===!1)return!1;J++}he==="MultiLineString"&&de++,he==="Polygon"&&X++}he==="Polygon"&&de++;break;case"MultiPolygon":for(R=0;R<$.length;R++){for(X=0,D=0;D<$[R].length;D++){for(N=0;N<$[R][D].length-W;N++){if(T($[R][D][N],J,xe,de,X)===!1)return!1;J++}X++}de++}break;case"GeometryCollection":for(R=0;R<k.geometries.length;R++)if(e(k.geometries[R],T,L)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function t(M,T,L,R){var D=L;return e(M,function(N,k,B,$,H){k===0&&L===void 0?D=N:D=T(D,N,k,B,$,H)},R),D}function i(M,T){var L;switch(M.type){case"FeatureCollection":for(L=0;L<M.features.length&&T(M.features[L].properties,L)!==!1;L++);break;case"Feature":T(M.properties,0);break}}function s(M,T,L){var R=L;return i(M,function(D,N){N===0&&L===void 0?R=D:R=T(R,D,N)}),R}function n(M,T){if(M.type==="Feature")T(M,0);else if(M.type==="FeatureCollection")for(var L=0;L<M.features.length&&T(M.features[L],L)!==!1;L++);}function o(M,T,L){var R=L;return n(M,function(D,N){N===0&&L===void 0?R=D:R=T(R,D,N)}),R}function c(M){var T=[];return e(M,function(L){T.push(L)}),T}function _(M,T){var L,R,D,N,k,B,$,H,W,J,z=0,fe=M.type==="FeatureCollection",q=M.type==="Feature",te=fe?M.features.length:1;for(L=0;L<te;L++){for(B=fe?M.features[L].geometry:q?M.geometry:M,H=fe?M.features[L].properties:q?M.properties:{},W=fe?M.features[L].bbox:q?M.bbox:void 0,J=fe?M.features[L].id:q?M.id:void 0,$=B?B.type==="GeometryCollection":!1,k=$?B.geometries.length:1,D=0;D<k;D++){if(N=$?B.geometries[D]:B,N===null){if(T(null,z,H,W,J)===!1)return!1;continue}switch(N.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(T(N,z,H,W,J)===!1)return!1;break}case"GeometryCollection":{for(R=0;R<N.geometries.length;R++)if(T(N.geometries[R],z,H,W,J)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}z++}}function l(M,T,L){var R=L;return _(M,function(D,N,k,B,$){N===0&&L===void 0?R=D:R=T(R,D,N,k,B,$)}),R}function h(M,T){_(M,function(L,R,D,N,k){var B=L===null?null:L.type;switch(B){case null:case"Point":case"LineString":case"Polygon":return T(r.feature(L,D,{bbox:N,id:k}),R,0)===!1?!1:void 0}var $;switch(B){case"MultiPoint":$="Point";break;case"MultiLineString":$="LineString";break;case"MultiPolygon":$="Polygon";break}for(var H=0;H<L.coordinates.length;H++){var W=L.coordinates[H],J={type:$,coordinates:W};if(T(r.feature(J,D),R,H)===!1)return!1}})}function f(M,T,L){var R=L;return h(M,function(D,N,k){N===0&&k===0&&L===void 0?R=D:R=T(R,D,N,k)}),R}function m(M,T){h(M,function(L,R,D){var N=0;if(L.geometry){var k=L.geometry.type;if(!(k==="Point"||k==="MultiPoint")){var B,$=0,H=0,W=0;if(e(L,function(J,z,fe,q,te){if(B===void 0||R>$||q>H||te>W){B=J,$=R,H=q,W=te,N=0;return}var ie=r.lineString([B,J],L.properties);if(T(ie,R,D,te,N)===!1)return!1;N++,B=J})===!1)return!1}}})}function g(M,T,L){var R=L,D=!1;return m(M,function(N,k,B,$,H){D===!1&&L===void 0?R=N:R=T(R,N,k,B,$,H),D=!0}),R}function C(M,T){if(!M)throw new Error("geojson is required");h(M,function(L,R,D){if(L.geometry!==null){var N=L.geometry.type,k=L.geometry.coordinates;switch(N){case"LineString":if(T(L,R,D,0,0)===!1)return!1;break;case"Polygon":for(var B=0;B<k.length;B++)if(T(r.lineString(k[B],L.properties),R,D,B)===!1)return!1;break}}})}function E(M,T,L){var R=L;return C(M,function(D,N,k,B){N===0&&L===void 0?R=D:R=T(R,D,N,k,B)}),R}function P(M,T){if(T=T||{},!r.isObject(T))throw new Error("options is invalid");var L=T.featureIndex||0,R=T.multiFeatureIndex||0,D=T.geometryIndex||0,N=T.segmentIndex||0,k=T.properties,B;switch(M.type){case"FeatureCollection":L<0&&(L=M.features.length+L),k=k||M.features[L].properties,B=M.features[L].geometry;break;case"Feature":k=k||M.properties,B=M.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":B=M;break;default:throw new Error("geojson is invalid")}if(B===null)return null;var $=B.coordinates;switch(B.type){case"Point":case"MultiPoint":return null;case"LineString":return N<0&&(N=$.length+N-1),r.lineString([$[N],$[N+1]],k,T);case"Polygon":return D<0&&(D=$.length+D),N<0&&(N=$[D].length+N-1),r.lineString([$[D][N],$[D][N+1]],k,T);case"MultiLineString":return R<0&&(R=$.length+R),N<0&&(N=$[R].length+N-1),r.lineString([$[R][N],$[R][N+1]],k,T);case"MultiPolygon":return R<0&&(R=$.length+R),D<0&&(D=$[R].length+D),N<0&&(N=$[R][D].length-N-1),r.lineString([$[R][D][N],$[R][D][N+1]],k,T)}throw new Error("geojson is invalid")}function w(M,T){if(T=T||{},!r.isObject(T))throw new Error("options is invalid");var L=T.featureIndex||0,R=T.multiFeatureIndex||0,D=T.geometryIndex||0,N=T.coordIndex||0,k=T.properties,B;switch(M.type){case"FeatureCollection":L<0&&(L=M.features.length+L),k=k||M.features[L].properties,B=M.features[L].geometry;break;case"Feature":k=k||M.properties,B=M.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":B=M;break;default:throw new Error("geojson is invalid")}if(B===null)return null;var $=B.coordinates;switch(B.type){case"Point":return r.point($,k,T);case"MultiPoint":return R<0&&(R=$.length+R),r.point($[R],k,T);case"LineString":return N<0&&(N=$.length+N),r.point($[N],k,T);case"Polygon":return D<0&&(D=$.length+D),N<0&&(N=$[D].length+N),r.point($[D][N],k,T);case"MultiLineString":return R<0&&(R=$.length+R),N<0&&(N=$[R].length+N),r.point($[R][N],k,T);case"MultiPolygon":return R<0&&(R=$.length+R),D<0&&(D=$[R].length+D),N<0&&(N=$[R][D].length-N),r.point($[R][D][N],k,T)}throw new Error("geojson is invalid")}return js$1D.coordAll=c,js$1D.coordEach=e,js$1D.coordReduce=t,js$1D.featureEach=n,js$1D.featureReduce=o,js$1D.findPoint=w,js$1D.findSegment=P,js$1D.flattenEach=h,js$1D.flattenReduce=f,js$1D.geomEach=_,js$1D.geomReduce=l,js$1D.lineEach=C,js$1D.lineReduce=E,js$1D.propEach=i,js$1D.propReduce=s,js$1D.segmentEach=m,js$1D.segmentReduce=g,js$1D}var hasRequiredJs$1E;function requireJs$1E(){if(hasRequiredJs$1E)return js$1E;hasRequiredJs$1E=1,Object.defineProperty(js$1E,"__esModule",{value:!0});var r=requireJs$1F();function e(t){var i=[1/0,1/0,-1/0,-1/0];return r.coordEach(t,function(s){i[0]>s[0]&&(i[0]=s[0]),i[1]>s[1]&&(i[1]=s[1]),i[2]<s[0]&&(i[2]=s[0]),i[3]<s[1]&&(i[3]=s[1])}),i}return e.default=e,js$1E.default=e,js$1E}var js$1B={},hasRequiredJs$1D;function requireJs$1D(){if(hasRequiredJs$1D)return js$1B;hasRequiredJs$1D=1,Object.defineProperty(js$1B,"__esModule",{value:!0});var r=requireJs$1G();function e(l){if(!l)throw new Error("coord is required");if(!Array.isArray(l)){if(l.type==="Feature"&&l.geometry!==null&&l.geometry.type==="Point")return l.geometry.coordinates;if(l.type==="Point")return l.coordinates}if(Array.isArray(l)&&l.length>=2&&!Array.isArray(l[0])&&!Array.isArray(l[1]))return l;throw new Error("coord must be GeoJSON Point or an Array of numbers")}js$1B.getCoord=e;function t(l){if(Array.isArray(l))return l;if(l.type==="Feature"){if(l.geometry!==null)return l.geometry.coordinates}else if(l.coordinates)return l.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}js$1B.getCoords=t;function i(l){if(l.length>1&&r.isNumber(l[0])&&r.isNumber(l[1]))return!0;if(Array.isArray(l[0])&&l[0].length)return i(l[0]);throw new Error("coordinates must only contain numbers")}js$1B.containsNumber=i;function s(l,h,f){if(!h||!f)throw new Error("type and name required");if(!l||l.type!==h)throw new Error("Invalid input to "+f+": must be a "+h+", given "+l.type)}js$1B.geojsonType=s;function n(l,h,f){if(!l)throw new Error("No feature passed");if(!f)throw new Error(".featureOf() requires a name");if(!l||l.type!=="Feature"||!l.geometry)throw new Error("Invalid input to "+f+", Feature with geometry required");if(!l.geometry||l.geometry.type!==h)throw new Error("Invalid input to "+f+": must be a "+h+", given "+l.geometry.type)}js$1B.featureOf=n;function o(l,h,f){if(!l)throw new Error("No featureCollection passed");if(!f)throw new Error(".collectionOf() requires a name");if(!l||l.type!=="FeatureCollection")throw new Error("Invalid input to "+f+", FeatureCollection required");for(var m=0,g=l.features;m<g.length;m++){var C=g[m];if(!C||C.type!=="Feature"||!C.geometry)throw new Error("Invalid input to "+f+", Feature with geometry required");if(!C.geometry||C.geometry.type!==h)throw new Error("Invalid input to "+f+": must be a "+h+", given "+C.geometry.type)}}js$1B.collectionOf=o;function c(l){return l.type==="Feature"?l.geometry:l}js$1B.getGeom=c;function _(l,h){return l.type==="FeatureCollection"?"FeatureCollection":l.type==="GeometryCollection"?"GeometryCollection":l.type==="Feature"&&l.geometry!==null?l.geometry.type:l.type}return js$1B.getType=_,js$1B}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var objectAssign,hasRequiredObjectAssign;function requireObjectAssign(){if(hasRequiredObjectAssign)return objectAssign;hasRequiredObjectAssign=1;var r=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable;function i(n){if(n==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}function s(){try{if(!Object.assign)return!1;var n=new String("abc");if(n[5]="de",Object.getOwnPropertyNames(n)[0]==="5")return!1;for(var o={},c=0;c<10;c++)o["_"+String.fromCharCode(c)]=c;var _=Object.getOwnPropertyNames(o).map(function(h){return o[h]});if(_.join("")!=="0123456789")return!1;var l={};return"abcdefghijklmnopqrst".split("").forEach(function(h){l[h]=h}),Object.keys(Object.assign({},l)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return objectAssign=s()?Object.assign:function(n,o){for(var c,_=i(n),l,h=1;h<arguments.length;h++){c=Object(arguments[h]);for(var f in c)e.call(c,f)&&(_[f]=c[f]);if(r){l=r(c);for(var m=0;m<l.length;m++)t.call(c,l[m])&&(_[l[m]]=c[l[m]])}}return _},objectAssign}var hasRequiredJs$1C;function requireJs$1C(){if(hasRequiredJs$1C)return js$1F.exports;hasRequiredJs$1C=1;var r=requireJs$1E(),e=requireJs$1F(),t=requireJs$1D(),i=requireJs$1G(),s=requireObjectAssign();function n(k){return k&&typeof k=="object"&&"default"in k?k:{default:k}}var o=n(r),c=n(s);/**
 * @license GNU Affero General Public License.
 * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
 * v. 1.2.0
 * https://github.com/RaumZeit/MarchingSquares.js
 *
 * MarchingSquaresJS is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * MarchingSquaresJS is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * As additional permission under GNU Affero General Public License version 3
 * section 7, third-party projects (personal or commercial) may distribute,
 * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
 * requirement that said third-party project for that reason alone becomes
 * subject to any requirement of the GNU Affero General Public License version 3.
 * Any modifications to MarchingSquaresJS, however, must be shared with the public
 * and made available.
 *
 * In summary this:
 * - allows you to use MarchingSquaresJS at no cost
 * - allows you to use MarchingSquaresJS for both personal and commercial purposes
 * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
 *   license as long as this license notice is included
 * - enables you to keep the source code of your program that uses MarchingSquaresJS
 *   undisclosed
 * - forces you to share any modifications you have made to MarchingSquaresJS,
 *   e.g. bug-fixes
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
 */var _={successCallback:null,verbose:!1},l={};function h(k,B,$){$=$||{};for(var H=Object.keys(_),W=0;W<H.length;W++){var J=H[W],z=$[J];z=typeof z<"u"&&z!==null?z:_[J],l[J]=z}l.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+B);var fe=w(m(k,B));return typeof l.successCallback=="function"&&l.successCallback(fe),fe}function f(k,B,$){return(k-B)/($-B)}function m(k,B){for(var $=k.length-1,H=k[0].length-1,W={rows:$,cols:H,cells:[]},J=0;J<$;++J){W.cells[J]=[];for(var z=0;z<H;++z){var fe=0,q=k[J+1][z],te=k[J+1][z+1],ie=k[J][z+1],xe=k[J][z];if(!(isNaN(q)||isNaN(te)||isNaN(ie)||isNaN(xe))){fe|=q>=B?8:0,fe|=te>=B?4:0,fe|=ie>=B?2:0,fe|=xe>=B?1:0;var oe=!1;if(fe===5||fe===10){var de=(q+te+ie+xe)/4;fe===5&&de<B?(fe=10,oe=!0):fe===10&&de<B&&(fe=5,oe=!0)}if(fe!==0&&fe!==15){var X,he,Se,Te;X=he=Se=Te=.5,fe===1?(Se=1-f(B,q,xe),he=1-f(B,ie,xe)):fe===2?(he=f(B,xe,ie),Te=1-f(B,te,ie)):fe===3?(Se=1-f(B,q,xe),Te=1-f(B,te,ie)):fe===4?(X=f(B,q,te),Te=f(B,ie,te)):fe===5?(X=f(B,q,te),Te=f(B,ie,te),he=1-f(B,ie,xe),Se=1-f(B,q,xe)):fe===6?(he=f(B,xe,ie),X=f(B,q,te)):fe===7?(Se=1-f(B,q,xe),X=f(B,q,te)):fe===8?(Se=f(B,xe,q),X=1-f(B,te,q)):fe===9?(he=1-f(B,ie,xe),X=1-f(B,te,q)):fe===10?(X=1-f(B,te,q),Te=1-f(B,te,ie),he=f(B,xe,ie),Se=f(B,xe,q)):fe===11?(X=1-f(B,te,q),Te=1-f(B,te,ie)):fe===12?(Se=f(B,xe,q),Te=f(B,ie,te)):fe===13?(he=1-f(B,ie,xe),Te=f(B,ie,te)):fe===14?(Se=f(B,xe,q),he=f(B,xe,ie)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+fe),W.cells[J][z]={cval:fe,flipped:oe,top:X,right:Te,bottom:he,left:Se}}}}}return W}function g(k){return k.cval===5||k.cval===10}function C(k){return k.cval===0||k.cval===15}function E(k){!C(k)&&k.cval!==5&&k.cval!==10&&(k.cval=15)}function P(k,B){if(B==="top")return[k.top,1];if(B==="bottom")return[k.bottom,0];if(B==="right")return[1,k.right];if(B==="left")return[0,k.left]}function w(k){var B=[],$=0,H=1e-7;return k.cells.forEach(function(W,J){W.forEach(function(z,fe){if(typeof z<"u"&&!g(z)&&!C(z)){var q=M(k.cells,J,fe),te=!1;if(q.info==="mergeable"){for(var ie=q.path[q.path.length-1][0],xe=q.path[q.path.length-1][1],oe=$-1;oe>=0;oe--)if(Math.abs(B[oe][0][0]-ie)<=H&&Math.abs(B[oe][0][1]-xe)<=H){for(var de=q.path.length-2;de>=0;--de)B[oe].unshift(q.path[de]);te=!0;break}}te||(B[$++]=q.path)}})}),B}function M(k,B,$){var H=k.length,W=[],J=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],z=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],fe,q,te=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"],ie=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],de,xe=k[B][$],oe=xe.cval,de=te[oe],X=P(xe,de);W.push([$+X[0],B+X[1]]),de=ie[oe],X=P(xe,de),W.push([$+X[0],B+X[1]]),E(xe);for(var he=$+J[oe],Se=B+z[oe],Te=oe;he>=0&&Se>=0&&Se<H&&(he!=$||Se!=B)&&(xe=k[Se][he],!(typeof xe>"u"));){if(oe=xe.cval,oe===0||oe===15)return{path:W,info:"mergeable"};de=ie[oe],fe=J[oe],q=z[oe],(oe===5||oe===10)&&(oe===5?xe.flipped?z[Te]===-1?(de="left",fe=-1,q=0):(de="right",fe=1,q=0):J[Te]===-1&&(de="bottom",fe=0,q=-1):oe===10&&(xe.flipped?J[Te]===-1?(de="top",fe=0,q=1):(de="bottom",fe=0,q=-1):z[Te]===1&&(de="left",fe=-1,q=0))),X=P(xe,de),W.push([he+X[0],Se+X[1]]),E(xe),he+=fe,Se+=q,Te=oe}return{path:W,info:"closed"}}function T(k,B){if(B=B||{},!i.isObject(B))throw new Error("options is invalid");var $=B.zProperty||"elevation",H=B.flip,W=B.flags;t.collectionOf(k,"Point","input must contain Points");for(var J=L(k,H),z=[],fe=0;fe<J.length;fe++){for(var q=J[fe],te=[],ie=0;ie<q.length;ie++){var xe=q[ie];xe.properties[$]?te.push(xe.properties[$]):te.push(0),W===!0&&(xe.properties.matrixPosition=[fe,ie])}z.push(te)}return z}function L(k,B){var $={};e.featureEach(k,function(J){var z=t.getCoords(J)[1];$[z]||($[z]=[]),$[z].push(J)});var H=Object.keys($).map(function(J){var z=$[J],fe=z.sort(function(q,te){return t.getCoords(q)[0]-t.getCoords(te)[0]});return fe}),W=H.sort(function(J,z){return B?t.getCoords(J[0])[1]-t.getCoords(z[0])[1]:t.getCoords(z[0])[1]-t.getCoords(J[0])[1]});return W}function R(k,B,$){if($=$||{},!i.isObject($))throw new Error("options is invalid");var H=$.zProperty||"elevation",W=$.commonProperties||{},J=$.breaksProperties||[];if(t.collectionOf(k,"Point","Input must contain Points"),!B)throw new Error("breaks is required");if(!Array.isArray(B))throw new Error("breaks must be an Array");if(!i.isObject(W))throw new Error("commonProperties must be an Object");if(!Array.isArray(J))throw new Error("breaksProperties must be an Array");var z=T(k,{zProperty:H,flip:!0}),fe=D(z,B,H,W,J),q=N(fe,z,k);return i.featureCollection(q)}function D(k,B,$,H,W){for(var J=[],z=1;z<B.length;z++){var fe=+B[z],q=c.default({},H,W[z]);q[$]=fe;var te=i.multiLineString(h(k,fe),q);J.push(te)}return J}function N(k,B,$){var H=o.default($),W=H[2]-H[0],J=H[3]-H[1],z=H[0],fe=H[1],q=B[0].length-1,te=B.length-1,ie=W/q,xe=J/te,oe=function(de){de[0]=de[0]*ie+z,de[1]=de[1]*xe+fe};return k.forEach(function(de){e.coordEach(de,oe)}),k}return js$1F.exports=R,js$1F.exports.default=R,js$1F.exports}var js$1A={},concaveman={exports:{}},rbush_min={exports:{}},hasRequiredRbush_min;function requireRbush_min(){return hasRequiredRbush_min||(hasRequiredRbush_min=1,function(r,e){(function(t,i){r.exports=i()})(commonjsGlobal,function(){function t(M,T,L,R,D){(function N(k,B,$,H,W){for(;H>$;){if(H-$>600){var J=H-$+1,z=B-$+1,fe=Math.log(J),q=.5*Math.exp(2*fe/3),te=.5*Math.sqrt(fe*q*(J-q)/J)*(z-J/2<0?-1:1),ie=Math.max($,Math.floor(B-z*q/J+te)),xe=Math.min(H,Math.floor(B+(J-z)*q/J+te));N(k,B,ie,xe,W)}var oe=k[B],de=$,X=H;for(i(k,$,B),W(k[H],oe)>0&&i(k,$,H);de<X;){for(i(k,de,X),de++,X--;W(k[de],oe)<0;)de++;for(;W(k[X],oe)>0;)X--}W(k[$],oe)===0?i(k,$,X):i(k,++X,H),X<=B&&($=X+1),B<=X&&(H=X-1)}})(M,T,L||0,R||M.length-1,D||s)}function i(M,T,L){var R=M[T];M[T]=M[L],M[L]=R}function s(M,T){return M<T?-1:M>T?1:0}var n=function(M){M===void 0&&(M=9),this._maxEntries=Math.max(4,M),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function o(M,T,L){if(!L)return T.indexOf(M);for(var R=0;R<T.length;R++)if(L(M,T[R]))return R;return-1}function c(M,T){_(M,0,M.children.length,T,M)}function _(M,T,L,R,D){D||(D=P(null)),D.minX=1/0,D.minY=1/0,D.maxX=-1/0,D.maxY=-1/0;for(var N=T;N<L;N++){var k=M.children[N];l(D,M.leaf?R(k):k)}return D}function l(M,T){return M.minX=Math.min(M.minX,T.minX),M.minY=Math.min(M.minY,T.minY),M.maxX=Math.max(M.maxX,T.maxX),M.maxY=Math.max(M.maxY,T.maxY),M}function h(M,T){return M.minX-T.minX}function f(M,T){return M.minY-T.minY}function m(M){return(M.maxX-M.minX)*(M.maxY-M.minY)}function g(M){return M.maxX-M.minX+(M.maxY-M.minY)}function C(M,T){return M.minX<=T.minX&&M.minY<=T.minY&&T.maxX<=M.maxX&&T.maxY<=M.maxY}function E(M,T){return T.minX<=M.maxX&&T.minY<=M.maxY&&T.maxX>=M.minX&&T.maxY>=M.minY}function P(M){return{children:M,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function w(M,T,L,R,D){for(var N=[T,L];N.length;)if(!((L=N.pop())-(T=N.pop())<=R)){var k=T+Math.ceil((L-T)/R/2)*R;t(M,k,T,L,D),N.push(T,k,k,L)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(M){var T=this.data,L=[];if(!E(M,T))return L;for(var R=this.toBBox,D=[];T;){for(var N=0;N<T.children.length;N++){var k=T.children[N],B=T.leaf?R(k):k;E(M,B)&&(T.leaf?L.push(k):C(M,B)?this._all(k,L):D.push(k))}T=D.pop()}return L},n.prototype.collides=function(M){var T=this.data;if(!E(M,T))return!1;for(var L=[];T;){for(var R=0;R<T.children.length;R++){var D=T.children[R],N=T.leaf?this.toBBox(D):D;if(E(M,N)){if(T.leaf||C(M,N))return!0;L.push(D)}}T=L.pop()}return!1},n.prototype.load=function(M){if(!M||!M.length)return this;if(M.length<this._minEntries){for(var T=0;T<M.length;T++)this.insert(M[T]);return this}var L=this._build(M.slice(),0,M.length-1,0);if(this.data.children.length)if(this.data.height===L.height)this._splitRoot(this.data,L);else{if(this.data.height<L.height){var R=this.data;this.data=L,L=R}this._insert(L,this.data.height-L.height-1,!0)}else this.data=L;return this},n.prototype.insert=function(M){return M&&this._insert(M,this.data.height-1),this},n.prototype.clear=function(){return this.data=P([]),this},n.prototype.remove=function(M,T){if(!M)return this;for(var L,R,D,N=this.data,k=this.toBBox(M),B=[],$=[];N||B.length;){if(N||(N=B.pop(),R=B[B.length-1],L=$.pop(),D=!0),N.leaf){var H=o(M,N.children,T);if(H!==-1)return N.children.splice(H,1),B.push(N),this._condense(B),this}D||N.leaf||!C(N,k)?R?(L++,N=R.children[L],D=!1):N=null:(B.push(N),$.push(L),L=0,R=N,N=N.children[0])}return this},n.prototype.toBBox=function(M){return M},n.prototype.compareMinX=function(M,T){return M.minX-T.minX},n.prototype.compareMinY=function(M,T){return M.minY-T.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(M){return this.data=M,this},n.prototype._all=function(M,T){for(var L=[];M;)M.leaf?T.push.apply(T,M.children):L.push.apply(L,M.children),M=L.pop();return T},n.prototype._build=function(M,T,L,R){var D,N=L-T+1,k=this._maxEntries;if(N<=k)return c(D=P(M.slice(T,L+1)),this.toBBox),D;R||(R=Math.ceil(Math.log(N)/Math.log(k)),k=Math.ceil(N/Math.pow(k,R-1))),(D=P([])).leaf=!1,D.height=R;var B=Math.ceil(N/k),$=B*Math.ceil(Math.sqrt(k));w(M,T,L,$,this.compareMinX);for(var H=T;H<=L;H+=$){var W=Math.min(H+$-1,L);w(M,H,W,B,this.compareMinY);for(var J=H;J<=W;J+=B){var z=Math.min(J+B-1,W);D.children.push(this._build(M,J,z,R-1))}}return c(D,this.toBBox),D},n.prototype._chooseSubtree=function(M,T,L,R){for(;R.push(T),!T.leaf&&R.length-1!==L;){for(var D=1/0,N=1/0,k=void 0,B=0;B<T.children.length;B++){var $=T.children[B],H=m($),W=(J=M,z=$,(Math.max(z.maxX,J.maxX)-Math.min(z.minX,J.minX))*(Math.max(z.maxY,J.maxY)-Math.min(z.minY,J.minY))-H);W<N?(N=W,D=H<D?H:D,k=$):W===N&&H<D&&(D=H,k=$)}T=k||T.children[0]}var J,z;return T},n.prototype._insert=function(M,T,L){var R=L?M:this.toBBox(M),D=[],N=this._chooseSubtree(R,this.data,T,D);for(N.children.push(M),l(N,R);T>=0&&D[T].children.length>this._maxEntries;)this._split(D,T),T--;this._adjustParentBBoxes(R,D,T)},n.prototype._split=function(M,T){var L=M[T],R=L.children.length,D=this._minEntries;this._chooseSplitAxis(L,D,R);var N=this._chooseSplitIndex(L,D,R),k=P(L.children.splice(N,L.children.length-N));k.height=L.height,k.leaf=L.leaf,c(L,this.toBBox),c(k,this.toBBox),T?M[T-1].children.push(k):this._splitRoot(L,k)},n.prototype._splitRoot=function(M,T){this.data=P([M,T]),this.data.height=M.height+1,this.data.leaf=!1,c(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(M,T,L){for(var R,D,N,k,B,$,H,W=1/0,J=1/0,z=T;z<=L-T;z++){var fe=_(M,0,z,this.toBBox),q=_(M,z,L,this.toBBox),te=(D=fe,N=q,k=void 0,B=void 0,$=void 0,H=void 0,k=Math.max(D.minX,N.minX),B=Math.max(D.minY,N.minY),$=Math.min(D.maxX,N.maxX),H=Math.min(D.maxY,N.maxY),Math.max(0,$-k)*Math.max(0,H-B)),ie=m(fe)+m(q);te<W?(W=te,R=z,J=ie<J?ie:J):te===W&&ie<J&&(J=ie,R=z)}return R||L-T},n.prototype._chooseSplitAxis=function(M,T,L){var R=M.leaf?this.compareMinX:h,D=M.leaf?this.compareMinY:f;this._allDistMargin(M,T,L,R)<this._allDistMargin(M,T,L,D)&&M.children.sort(R)},n.prototype._allDistMargin=function(M,T,L,R){M.children.sort(R);for(var D=this.toBBox,N=_(M,0,T,D),k=_(M,L-T,L,D),B=g(N)+g(k),$=T;$<L-T;$++){var H=M.children[$];l(N,M.leaf?D(H):H),B+=g(N)}for(var W=L-T-1;W>=T;W--){var J=M.children[W];l(k,M.leaf?D(J):J),B+=g(k)}return B},n.prototype._adjustParentBBoxes=function(M,T,L){for(var R=L;R>=0;R--)l(T[R],M)},n.prototype._condense=function(M){for(var T=M.length-1,L=void 0;T>=0;T--)M[T].children.length===0?T>0?(L=M[T-1].children).splice(L.indexOf(M[T]),1):this.clear():c(M[T],this.toBBox)},n})}(rbush_min)),rbush_min.exports}class TinyQueue{constructor(e=[],t=defaultCompare){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:i}=this,s=t[e];for(;e>0;){const n=e-1>>1,o=t[n];if(i(s,o)>=0)break;t[e]=o,e=n}t[e]=s}_down(e){const{data:t,compare:i}=this,s=this.length>>1,n=t[e];for(;e<s;){let o=(e<<1)+1,c=t[o];const _=o+1;if(_<this.length&&i(t[_],c)<0&&(o=_,c=t[_]),i(c,n)>=0)break;t[e]=c,e=o}t[e]=n}}function defaultCompare(r,e){return r<e?-1:r>e?1:0}const tinyqueue=Object.freeze(Object.defineProperty({__proto__:null,default:TinyQueue},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(tinyqueue);var pointInPolygon={exports:{}},flat,hasRequiredFlat;function requireFlat(){return hasRequiredFlat||(hasRequiredFlat=1,flat=function(e,t,i,s){var n=e[0],o=e[1],c=!1;i===void 0&&(i=0),s===void 0&&(s=t.length);for(var _=(s-i)/2,l=0,h=_-1;l<_;h=l++){var f=t[i+l*2+0],m=t[i+l*2+1],g=t[i+h*2+0],C=t[i+h*2+1],E=m>o!=C>o&&n<(g-f)*(o-m)/(C-m)+f;E&&(c=!c)}return c}),flat}var nested,hasRequiredNested;function requireNested(){return hasRequiredNested||(hasRequiredNested=1,nested=function(e,t,i,s){var n=e[0],o=e[1],c=!1;i===void 0&&(i=0),s===void 0&&(s=t.length);for(var _=s-i,l=0,h=_-1;l<_;h=l++){var f=t[l+i][0],m=t[l+i][1],g=t[h+i][0],C=t[h+i][1],E=m>o!=C>o&&n<(g-f)*(o-m)/(C-m)+f;E&&(c=!c)}return c}),nested}var hasRequiredPointInPolygon;function requirePointInPolygon(){if(hasRequiredPointInPolygon)return pointInPolygon.exports;hasRequiredPointInPolygon=1;var r=requireFlat(),e=requireNested();return pointInPolygon.exports=function(i,s,n,o){return s.length>0&&Array.isArray(s[0])?e(i,s,n,o):r(i,s,n,o)},pointInPolygon.exports.nested=e,pointInPolygon.exports.flat=r,pointInPolygon.exports}var orient2d_min={exports:{}},hasRequiredOrient2d_min;function requireOrient2d_min(){return hasRequiredOrient2d_min||(hasRequiredOrient2d_min=1,function(r,e){(function(t,i){i(e)})(commonjsGlobal,function(t){const s=33306690738754706e-32;function n(E,P,w,M,T){let L,R,D,N,k=P[0],B=M[0],$=0,H=0;B>k==B>-k?(L=k,k=P[++$]):(L=B,B=M[++H]);let W=0;if($<E&&H<w)for(B>k==B>-k?(D=L-((R=k+L)-k),k=P[++$]):(D=L-((R=B+L)-B),B=M[++H]),L=R,D!==0&&(T[W++]=D);$<E&&H<w;)B>k==B>-k?(D=L-((R=L+k)-(N=R-L))+(k-N),k=P[++$]):(D=L-((R=L+B)-(N=R-L))+(B-N),B=M[++H]),L=R,D!==0&&(T[W++]=D);for(;$<E;)D=L-((R=L+k)-(N=R-L))+(k-N),k=P[++$],L=R,D!==0&&(T[W++]=D);for(;H<w;)D=L-((R=L+B)-(N=R-L))+(B-N),B=M[++H],L=R,D!==0&&(T[W++]=D);return L===0&&W!==0||(T[W++]=L),W}function o(E){return new Float64Array(E)}const c=33306690738754716e-32,_=22204460492503146e-32,l=11093356479670487e-47,h=o(4),f=o(8),m=o(12),g=o(16),C=o(4);t.orient2d=function(E,P,w,M,T,L){const R=(P-L)*(w-T),D=(E-T)*(M-L),N=R-D;if(R===0||D===0||R>0!=D>0)return N;const k=Math.abs(R+D);return Math.abs(N)>=c*k?N:-function(B,$,H,W,J,z,fe){let q,te,ie,xe,oe,de,X,he,Se,Te,Re,Be,ze,Ve,ye,Fe,Ce,Q;const me=B-J,Ie=H-J,De=$-z,Ee=W-z;oe=(ye=(he=me-(X=(de=134217729*me)-(de-me)))*(Te=Ee-(Se=(de=134217729*Ee)-(de-Ee)))-((Ve=me*Ee)-X*Se-he*Se-X*Te))-(Re=ye-(Ce=(he=De-(X=(de=134217729*De)-(de-De)))*(Te=Ie-(Se=(de=134217729*Ie)-(de-Ie)))-((Fe=De*Ie)-X*Se-he*Se-X*Te))),h[0]=ye-(Re+oe)+(oe-Ce),oe=(ze=Ve-((Be=Ve+Re)-(oe=Be-Ve))+(Re-oe))-(Re=ze-Fe),h[1]=ze-(Re+oe)+(oe-Fe),oe=(Q=Be+Re)-Be,h[2]=Be-(Q-oe)+(Re-oe),h[3]=Q;let Oe=function(re,ce){let be=ce[0];for(let Ae=1;Ae<re;Ae++)be+=ce[Ae];return be}(4,h),le=_*fe;if(Oe>=le||-Oe>=le||(q=B-(me+(oe=B-me))+(oe-J),ie=H-(Ie+(oe=H-Ie))+(oe-J),te=$-(De+(oe=$-De))+(oe-z),xe=W-(Ee+(oe=W-Ee))+(oe-z),q===0&&te===0&&ie===0&&xe===0)||(le=l*fe+s*Math.abs(Oe),(Oe+=me*xe+Ee*q-(De*ie+Ie*te))>=le||-Oe>=le))return Oe;oe=(ye=(he=q-(X=(de=134217729*q)-(de-q)))*(Te=Ee-(Se=(de=134217729*Ee)-(de-Ee)))-((Ve=q*Ee)-X*Se-he*Se-X*Te))-(Re=ye-(Ce=(he=te-(X=(de=134217729*te)-(de-te)))*(Te=Ie-(Se=(de=134217729*Ie)-(de-Ie)))-((Fe=te*Ie)-X*Se-he*Se-X*Te))),C[0]=ye-(Re+oe)+(oe-Ce),oe=(ze=Ve-((Be=Ve+Re)-(oe=Be-Ve))+(Re-oe))-(Re=ze-Fe),C[1]=ze-(Re+oe)+(oe-Fe),oe=(Q=Be+Re)-Be,C[2]=Be-(Q-oe)+(Re-oe),C[3]=Q;const Y=n(4,h,4,C,f);oe=(ye=(he=me-(X=(de=134217729*me)-(de-me)))*(Te=xe-(Se=(de=134217729*xe)-(de-xe)))-((Ve=me*xe)-X*Se-he*Se-X*Te))-(Re=ye-(Ce=(he=De-(X=(de=134217729*De)-(de-De)))*(Te=ie-(Se=(de=134217729*ie)-(de-ie)))-((Fe=De*ie)-X*Se-he*Se-X*Te))),C[0]=ye-(Re+oe)+(oe-Ce),oe=(ze=Ve-((Be=Ve+Re)-(oe=Be-Ve))+(Re-oe))-(Re=ze-Fe),C[1]=ze-(Re+oe)+(oe-Fe),oe=(Q=Be+Re)-Be,C[2]=Be-(Q-oe)+(Re-oe),C[3]=Q;const j=n(Y,f,4,C,m);oe=(ye=(he=q-(X=(de=134217729*q)-(de-q)))*(Te=xe-(Se=(de=134217729*xe)-(de-xe)))-((Ve=q*xe)-X*Se-he*Se-X*Te))-(Re=ye-(Ce=(he=te-(X=(de=134217729*te)-(de-te)))*(Te=ie-(Se=(de=134217729*ie)-(de-ie)))-((Fe=te*ie)-X*Se-he*Se-X*Te))),C[0]=ye-(Re+oe)+(oe-Ce),oe=(ze=Ve-((Be=Ve+Re)-(oe=Be-Ve))+(Re-oe))-(Re=ze-Fe),C[1]=ze-(Re+oe)+(oe-Fe),oe=(Q=Be+Re)-Be,C[2]=Be-(Q-oe)+(Re-oe),C[3]=Q;const U=n(j,m,4,C,g);return g[U-1]}(E,P,w,M,T,L,k)},t.orient2dfast=function(E,P,w,M,T,L){return(P-L)*(w-T)-(E-T)*(M-L)},Object.defineProperty(t,"__esModule",{value:!0})})}(orient2d_min,orient2d_min.exports)),orient2d_min.exports}var hasRequiredConcaveman;function requireConcaveman(){if(hasRequiredConcaveman)return concaveman.exports;hasRequiredConcaveman=1;var r=requireRbush_min(),e=require$$1,t=requirePointInPolygon(),i=requireOrient2d_min().orient2d;e.default&&(e=e.default),concaveman.exports=s,concaveman.exports.default=s;function s(L,R,D){R=Math.max(0,R===void 0?2:R),D=D||0;var N=g(L),k=new r(16);k.toBBox=function(X){return{minX:X[0],minY:X[1],maxX:X[0],maxY:X[1]}},k.compareMinX=function(X,he){return X[0]-he[0]},k.compareMinY=function(X,he){return X[1]-he[1]},k.load(L);for(var B=[],$=0,H;$<N.length;$++){var W=N[$];k.remove(W),H=C(W,H),B.push(H)}var J=new r(16);for($=0;$<B.length;$++)J.insert(m(B[$]));for(var z=R*R,fe=D*D;B.length;){var q=B.shift(),te=q.p,ie=q.next.p,xe=E(te,ie);if(!(xe<fe)){var oe=xe/z;W=n(k,q.prev.p,te,ie,q.next.next.p,oe,J),W&&Math.min(E(W,te),E(W,ie))<=oe&&(B.push(q),B.push(C(W,q)),k.remove(W),J.remove(q),J.insert(m(q)),J.insert(m(q.next)))}}q=H;var de=[];do de.push(q.p),q=q.next;while(q!==H);return de.push(q.p),de}function n(L,R,D,N,k,B,$){for(var H=new e([],o),W=L.data;W;){for(var J=0;J<W.children.length;J++){var z=W.children[J],fe=W.leaf?P(z,D,N):c(D,N,z);fe>B||H.push({node:z,dist:fe})}for(;H.length&&!H.peek().node.children;){var q=H.pop(),te=q.node,ie=P(te,R,D),xe=P(te,N,k);if(q.dist<ie&&q.dist<xe&&l(D,te,$)&&l(N,te,$))return te}W=H.pop(),W&&(W=W.node)}return null}function o(L,R){return L.dist-R.dist}function c(L,R,D){if(_(L,D)||_(R,D))return 0;var N=w(L[0],L[1],R[0],R[1],D.minX,D.minY,D.maxX,D.minY);if(N===0)return 0;var k=w(L[0],L[1],R[0],R[1],D.minX,D.minY,D.minX,D.maxY);if(k===0)return 0;var B=w(L[0],L[1],R[0],R[1],D.maxX,D.minY,D.maxX,D.maxY);if(B===0)return 0;var $=w(L[0],L[1],R[0],R[1],D.minX,D.maxY,D.maxX,D.maxY);return $===0?0:Math.min(N,k,B,$)}function _(L,R){return L[0]>=R.minX&&L[0]<=R.maxX&&L[1]>=R.minY&&L[1]<=R.maxY}function l(L,R,D){for(var N=Math.min(L[0],R[0]),k=Math.min(L[1],R[1]),B=Math.max(L[0],R[0]),$=Math.max(L[1],R[1]),H=D.search({minX:N,minY:k,maxX:B,maxY:$}),W=0;W<H.length;W++)if(f(H[W].p,H[W].next.p,L,R))return!1;return!0}function h(L,R,D){return i(L[0],L[1],R[0],R[1],D[0],D[1])}function f(L,R,D,N){return L!==N&&R!==D&&h(L,R,D)>0!=h(L,R,N)>0&&h(D,N,L)>0!=h(D,N,R)>0}function m(L){var R=L.p,D=L.next.p;return L.minX=Math.min(R[0],D[0]),L.minY=Math.min(R[1],D[1]),L.maxX=Math.max(R[0],D[0]),L.maxY=Math.max(R[1],D[1]),L}function g(L){for(var R=L[0],D=L[0],N=L[0],k=L[0],B=0;B<L.length;B++){var $=L[B];$[0]<R[0]&&(R=$),$[0]>N[0]&&(N=$),$[1]<D[1]&&(D=$),$[1]>k[1]&&(k=$)}var H=[R,D,N,k],W=H.slice();for(B=0;B<L.length;B++)t(L[B],H)||W.push(L[B]);return T(W)}function C(L,R){var D={p:L,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return R?(D.next=R.next,D.prev=R,R.next.prev=D,R.next=D):(D.prev=D,D.next=D),D}function E(L,R){var D=L[0]-R[0],N=L[1]-R[1];return D*D+N*N}function P(L,R,D){var N=R[0],k=R[1],B=D[0]-N,$=D[1]-k;if(B!==0||$!==0){var H=((L[0]-N)*B+(L[1]-k)*$)/(B*B+$*$);H>1?(N=D[0],k=D[1]):H>0&&(N+=B*H,k+=$*H)}return B=L[0]-N,$=L[1]-k,B*B+$*$}function w(L,R,D,N,k,B,$,H){var W=D-L,J=N-R,z=$-k,fe=H-B,q=L-k,te=R-B,ie=W*W+J*J,xe=W*z+J*fe,oe=z*z+fe*fe,de=W*q+J*te,X=z*q+fe*te,he=ie*oe-xe*xe,Se,Te,Re,Be,ze=he,Ve=he;he===0?(Te=0,ze=1,Be=X,Ve=oe):(Te=xe*X-oe*de,Be=ie*X-xe*de,Te<0?(Te=0,Be=X,Ve=oe):Te>ze&&(Te=ze,Be=X+xe,Ve=oe)),Be<0?(Be=0,-de<0?Te=0:-de>ie?Te=ze:(Te=-de,ze=ie)):Be>Ve&&(Be=Ve,-de+xe<0?Te=0:-de+xe>ie?Te=ze:(Te=-de+xe,ze=ie)),Se=Te===0?0:Te/ze,Re=Be===0?0:Be/Ve;var ye=(1-Se)*L+Se*D,Fe=(1-Se)*R+Se*N,Ce=(1-Re)*k+Re*$,Q=(1-Re)*B+Re*H,me=Ce-ye,Ie=Q-Fe;return me*me+Ie*Ie}function M(L,R){return L[0]===R[0]?L[1]-R[1]:L[0]-R[0]}function T(L){L.sort(M);for(var R=[],D=0;D<L.length;D++){for(;R.length>=2&&h(R[R.length-2],R[R.length-1],L[D])<=0;)R.pop();R.push(L[D])}for(var N=[],k=L.length-1;k>=0;k--){for(;N.length>=2&&h(N[N.length-2],N[N.length-1],L[k])<=0;)N.pop();N.push(L[k])}return N.pop(),R.pop(),R.concat(N)}return concaveman.exports}var hasRequiredJs$1B;function requireJs$1B(){if(hasRequiredJs$1B)return js$1A;hasRequiredJs$1B=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(js$1A,"__esModule",{value:!0});var e=requireJs$1G(),t=requireJs$1F(),i=r(requireConcaveman());function s(n,o){o===void 0&&(o={}),o.concavity=o.concavity||1/0;var c=[];if(t.coordEach(n,function(l){c.push([l[0],l[1]])}),!c.length)return null;var _=i.default(c,o.concavity);return _.length>3?e.polygon([_]):null}return js$1A.default=s,js$1A}var js$1z={exports:{}},js$1y={},hasRequiredJs$1A;function requireJs$1A(){if(hasRequiredJs$1A)return js$1y;hasRequiredJs$1A=1,Object.defineProperty(js$1y,"__esModule",{value:!0});var r=requireJs$1D();function e(s,n,o){if(o===void 0&&(o={}),!s)throw new Error("point is required");if(!n)throw new Error("polygon is required");var c=r.getCoord(s),_=r.getGeom(n),l=_.type,h=n.bbox,f=_.coordinates;if(h&&i(c,h)===!1)return!1;l==="Polygon"&&(f=[f]);for(var m=!1,g=0;g<f.length&&!m;g++)if(t(c,f[g][0],o.ignoreBoundary)){for(var C=!1,E=1;E<f[g].length&&!C;)t(c,f[g][E],!o.ignoreBoundary)&&(C=!0),E++;C||(m=!0)}return m}js$1y.default=e;function t(s,n,o){var c=!1;n[0][0]===n[n.length-1][0]&&n[0][1]===n[n.length-1][1]&&(n=n.slice(0,n.length-1));for(var _=0,l=n.length-1;_<n.length;l=_++){var h=n[_][0],f=n[_][1],m=n[l][0],g=n[l][1],C=s[1]*(h-m)+f*(m-s[0])+g*(s[0]-h)===0&&(h-s[0])*(m-s[0])<=0&&(f-s[1])*(g-s[1])<=0;if(C)return!o;var E=f>s[1]!=g>s[1]&&s[0]<(m-h)*(s[1]-f)/(g-f)+h;E&&(c=!c)}return c}function i(s,n){return n[0]<=s[0]&&n[1]<=s[1]&&n[2]>=s[0]&&n[3]>=s[1]}return js$1y}var hasRequiredJs$1z;function requireJs$1z(){if(hasRequiredJs$1z)return js$1z.exports;hasRequiredJs$1z=1;var r=requireJs$1A(),e=requireJs$1G(),t=requireJs$1F();function i(o){return o&&typeof o=="object"&&"default"in o?o:{default:o}}var s=i(r);function n(o,c){var _=[];return t.featureEach(o,function(l){var h=!1;if(l.geometry.type==="Point")t.geomEach(c,function(m){s.default(l,m)&&(h=!0)}),h&&_.push(l);else if(l.geometry.type==="MultiPoint"){var f=[];t.geomEach(c,function(m){t.coordEach(l,function(g){s.default(g,m)&&(h=!0,f.push(g))})}),h&&_.push(e.multiPoint(f))}else throw new Error("Input geometry must be a Point or MultiPoint")}),e.featureCollection(_)}return js$1z.exports=n,js$1z.exports.default=n,js$1z.exports}var js$1x={},js$1w={},hasRequiredJs$1y;function requireJs$1y(){if(hasRequiredJs$1y)return js$1w;hasRequiredJs$1y=1,Object.defineProperty(js$1w,"__esModule",{value:!0});var r=requireJs$1D(),e=requireJs$1G();function t(i,s,n){n===void 0&&(n={});var o=r.getCoord(i),c=r.getCoord(s),_=e.degreesToRadians(c[1]-o[1]),l=e.degreesToRadians(c[0]-o[0]),h=e.degreesToRadians(o[1]),f=e.degreesToRadians(c[1]),m=Math.pow(Math.sin(_/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(h)*Math.cos(f);return e.radiansToLength(2*Math.atan2(Math.sqrt(m),Math.sqrt(1-m)),n.units)}return js$1w.default=t,js$1w}var js$1v={},hasRequiredJs$1x;function requireJs$1x(){if(hasRequiredJs$1x)return js$1v;hasRequiredJs$1x=1,Object.defineProperty(js$1v,"__esModule",{value:!0});var r=requireJs$1G();function e(o,c){var _=!1;return r.featureCollection(n(o.features.map(function(l){var h={x:l.geometry.coordinates[0],y:l.geometry.coordinates[1]};return c?h.z=l.properties[c]:l.geometry.coordinates.length===3&&(_=!0,h.z=l.geometry.coordinates[2]),h})).map(function(l){var h=[l.a.x,l.a.y],f=[l.b.x,l.b.y],m=[l.c.x,l.c.y],g={};return _?(h.push(l.a.z),f.push(l.b.z),m.push(l.c.z)):g={a:l.a.z,b:l.b.z,c:l.c.z},r.polygon([[h,f,m,h]],g)}))}js$1v.default=e;var t=function(){function o(c,_,l){this.a=c,this.b=_,this.c=l;var h=_.x-c.x,f=_.y-c.y,m=l.x-c.x,g=l.y-c.y,C=h*(c.x+_.x)+f*(c.y+_.y),E=m*(c.x+l.x)+g*(c.y+l.y),P=2*(h*(l.y-_.y)-f*(l.x-_.x)),w,M;this.x=(g*C-f*E)/P,this.y=(h*E-m*C)/P,w=this.x-c.x,M=this.y-c.y,this.r=w*w+M*M}return o}();function i(o,c){return c.x-o.x}function s(o){var c=o.length,_,l,h,f,m;e:for(;c;)for(l=o[--c],_=o[--c],h=c;h;)if(m=o[--h],f=o[--h],_===f&&l===m||_===m&&l===f){o.splice(c,2),o.splice(h,2),c-=2;continue e}}function n(o){if(o.length<3)return[];o.sort(i);for(var c=o.length-1,_=o[c].x,l=o[0].x,h=o[c].y,f=h,m=1e-12,g,C,E,P,w,M;c--;)o[c].y<h&&(h=o[c].y),o[c].y>f&&(f=o[c].y);var T=l-_,L=f-h,R=T>L?T:L,D=(l+_)*.5,N=(f+h)*.5,k=[new t({__sentinel:!0,x:D-20*R,y:N-R},{__sentinel:!0,x:D,y:N+20*R},{__sentinel:!0,x:D+20*R,y:N-R})],B=[],$=[],H;for(c=o.length;c--;){for($.length=0,H=k.length;H--;){if(T=o[c].x-k[H].x,T>0&&T*T>k[H].r){B.push(k[H]),k.splice(H,1);continue}L=o[c].y-k[H].y,!(T*T+L*L>k[H].r)&&($.push(k[H].a,k[H].b,k[H].b,k[H].c,k[H].c,k[H].a),k.splice(H,1))}for(s($),H=$.length;H;)C=$[--H],g=$[--H],E=o[c],P=C.x-g.x,w=C.y-g.y,M=2*(P*(E.y-C.y)-w*(E.x-C.x)),Math.abs(M)>m&&k.push(new t(g,C,E))}for(Array.prototype.push.apply(B,k),c=B.length;c--;)(B[c].a.__sentinel||B[c].b.__sentinel||B[c].c.__sentinel)&&B.splice(c,1);return B}return js$1v}var turfDissolve={},js$1u={},hasRequiredJs$1w;function requireJs$1w(){if(hasRequiredJs$1w)return js$1u;hasRequiredJs$1w=1,Object.defineProperty(js$1u,"__esModule",{value:!0});function r(o){if(!o)throw new Error("geojson is required");switch(o.type){case"Feature":return e(o);case"FeatureCollection":return i(o);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return s(o);default:throw new Error("unknown GeoJSON type")}}function e(o){var c={type:"Feature"};return Object.keys(o).forEach(function(_){switch(_){case"type":case"properties":case"geometry":return;default:c[_]=o[_]}}),c.properties=t(o.properties),c.geometry=s(o.geometry),c}function t(o){var c={};return o&&Object.keys(o).forEach(function(_){var l=o[_];typeof l=="object"?l===null?c[_]=null:Array.isArray(l)?c[_]=l.map(function(h){return h}):c[_]=t(l):c[_]=l}),c}function i(o){var c={type:"FeatureCollection"};return Object.keys(o).forEach(function(_){switch(_){case"type":case"features":return;default:c[_]=o[_]}}),c.features=o.features.map(function(_){return e(_)}),c}function s(o){var c={type:o.type};return o.bbox&&(c.bbox=o.bbox),o.type==="GeometryCollection"?(c.geometries=o.geometries.map(function(_){return s(_)}),c):(c.coordinates=n(o.coordinates),c)}function n(o){var c=o;return typeof c[0]!="object"?c.slice():c.map(function(_){return n(_)})}return js$1u.default=r,js$1u}var turfLineDissolve={},hasRequiredTurfLineDissolve;function requireTurfLineDissolve(){if(hasRequiredTurfLineDissolve)return turfLineDissolve;hasRequiredTurfLineDissolve=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(turfLineDissolve,"__esModule",{value:!0});var e=r(requireJs$1w()),t=requireJs$1G(),i=requireJs$1D(),s=requireJs$1F();function n(_,l){if(l===void 0&&(l={}),l=l||{},!t.isObject(l))throw new Error("options is invalid");var h=l.mutate;if(i.getType(_)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!_.features.length)throw new Error("geojson is empty");(h===!1||h===void 0)&&(_=e.default(_));var f=[],m=s.lineReduce(_,function(g,C){var E=c(g,C);return E||(f.push(g),C)});return m&&f.push(m),f.length?f.length===1?f[0]:t.multiLineString(f.map(function(g){return g.coordinates})):null}function o(_){return _[0].toString()+","+_[1].toString()}function c(_,l){var h=_.geometry.coordinates,f=l.geometry.coordinates,m=o(h[0]),g=o(h[h.length-1]),C=o(f[0]),E=o(f[f.length-1]),P;if(m===E)P=f.concat(h.slice(1));else if(C===g)P=h.concat(f.slice(1));else if(m===C)P=h.slice(1).reverse().concat(f);else if(g===E)P=h.concat(f.reverse().slice(1));else return null;return t.lineString(P)}return turfLineDissolve.default=n,turfLineDissolve}var turfPolygonDissolve={};function identity$2(r){return r}function transform$1(r){if(r==null)return identity$2;var e,t,i=r.scale[0],s=r.scale[1],n=r.translate[0],o=r.translate[1];return function(c,_){_||(e=t=0);var l=2,h=c.length,f=new Array(h);for(f[0]=(e+=c[0])*i+n,f[1]=(t+=c[1])*s+o;l<h;)f[l]=c[l],++l;return f}}function bbox(r){var e=transform$1(r.transform),t,i=1/0,s=i,n=-i,o=-i;function c(l){l=e(l),l[0]<i&&(i=l[0]),l[0]>n&&(n=l[0]),l[1]<s&&(s=l[1]),l[1]>o&&(o=l[1])}function _(l){switch(l.type){case"GeometryCollection":l.geometries.forEach(_);break;case"Point":c(l.coordinates);break;case"MultiPoint":l.coordinates.forEach(c);break}}r.arcs.forEach(function(l){for(var h=-1,f=l.length,m;++h<f;)m=e(l[h],h),m[0]<i&&(i=m[0]),m[0]>n&&(n=m[0]),m[1]<s&&(s=m[1]),m[1]>o&&(o=m[1])});for(t in r.objects)_(r.objects[t]);return[i,s,n,o]}function reverse$1(r,e){for(var t,i=r.length,s=i-e;s<--i;)t=r[s],r[s++]=r[i],r[i]=t}function feature(r,e){return typeof e=="string"&&(e=r.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(t){return feature$1(r,t)})}:feature$1(r,e)}function feature$1(r,e){var t=e.id,i=e.bbox,s=e.properties==null?{}:e.properties,n=object$1(r,e);return t==null&&i==null?{type:"Feature",properties:s,geometry:n}:i==null?{type:"Feature",id:t,properties:s,geometry:n}:{type:"Feature",id:t,bbox:i,properties:s,geometry:n}}function object$1(r,e){var t=transform$1(r.transform),i=r.arcs;function s(h,f){f.length&&f.pop();for(var m=i[h<0?~h:h],g=0,C=m.length;g<C;++g)f.push(t(m[g],g));h<0&&reverse$1(f,C)}function n(h){return t(h)}function o(h){for(var f=[],m=0,g=h.length;m<g;++m)s(h[m],f);return f.length<2&&f.push(f[0]),f}function c(h){for(var f=o(h);f.length<4;)f.push(f[0]);return f}function _(h){return h.map(c)}function l(h){var f=h.type,m;switch(f){case"GeometryCollection":return{type:f,geometries:h.geometries.map(l)};case"Point":m=n(h.coordinates);break;case"MultiPoint":m=h.coordinates.map(n);break;case"LineString":m=o(h.arcs);break;case"MultiLineString":m=h.arcs.map(o);break;case"Polygon":m=_(h.arcs);break;case"MultiPolygon":m=h.arcs.map(_);break;default:return null}return{type:f,coordinates:m}}return l(e)}function stitch(r,e){var t={},i={},s={},n=[],o=-1;e.forEach(function(l,h){var f=r.arcs[l<0?~l:l],m;f.length<3&&!f[1][0]&&!f[1][1]&&(m=e[++o],e[o]=l,e[h]=m)}),e.forEach(function(l){var h=c(l),f=h[0],m=h[1],g,C;if(g=s[f])if(delete s[g.end],g.push(l),g.end=m,C=i[m]){delete i[C.start];var E=C===g?g:g.concat(C);i[E.start=g.start]=s[E.end=C.end]=E}else i[g.start]=s[g.end]=g;else if(g=i[m])if(delete i[g.start],g.unshift(l),g.start=f,C=s[f]){delete s[C.end];var P=C===g?g:C.concat(g);i[P.start=C.start]=s[P.end=g.end]=P}else i[g.start]=s[g.end]=g;else g=[l],i[g.start=f]=s[g.end=m]=g});function c(l){var h=r.arcs[l<0?~l:l],f=h[0],m;return r.transform?(m=[0,0],h.forEach(function(g){m[0]+=g[0],m[1]+=g[1]})):m=h[h.length-1],l<0?[m,f]:[f,m]}function _(l,h){for(var f in l){var m=l[f];delete h[m.start],delete m.start,delete m.end,m.forEach(function(g){t[g<0?~g:g]=1}),n.push(m)}}return _(s,i),_(i,s),e.forEach(function(l){t[l<0?~l:l]||n.push([l])}),n}function mesh(r){return object$1(r,meshArcs.apply(this,arguments))}function meshArcs(r,e,t){var i,s,n;if(arguments.length>1)i=extractArcs(r,e,t);else for(s=0,i=new Array(n=r.arcs.length);s<n;++s)i[s]=s;return{type:"MultiLineString",arcs:stitch(r,i)}}function extractArcs(r,e,t){var i=[],s=[],n;function o(f){var m=f<0?~f:f;(s[m]||(s[m]=[])).push({i:f,g:n})}function c(f){f.forEach(o)}function _(f){f.forEach(c)}function l(f){f.forEach(_)}function h(f){switch(n=f,f.type){case"GeometryCollection":f.geometries.forEach(h);break;case"LineString":c(f.arcs);break;case"MultiLineString":case"Polygon":_(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return h(e),s.forEach(t==null?function(f){i.push(f[0].i)}:function(f){t(f[0].g,f[f.length-1].g)&&i.push(f[0].i)}),i}function planarRingArea(r){for(var e=-1,t=r.length,i,s=r[t-1],n=0;++e<t;)i=s,s=r[e],n+=i[0]*s[1]-i[1]*s[0];return Math.abs(n)}function merge$1(r){return object$1(r,mergeArcs.apply(this,arguments))}function mergeArcs(r,e){var t={},i=[],s=[];e.forEach(n);function n(_){switch(_.type){case"GeometryCollection":_.geometries.forEach(n);break;case"Polygon":o(_.arcs);break;case"MultiPolygon":_.arcs.forEach(o);break}}function o(_){_.forEach(function(l){l.forEach(function(h){(t[h=h<0?~h:h]||(t[h]=[])).push(_)})}),i.push(_)}function c(_){return planarRingArea(object$1(r,{type:"Polygon",arcs:[_]}).coordinates[0])}return i.forEach(function(_){if(!_._){var l=[],h=[_];for(_._=1,s.push(l);_=h.pop();)l.push(_),_.forEach(function(f){f.forEach(function(m){t[m<0?~m:m].forEach(function(g){g._||(g._=1,h.push(g))})})})}}),i.forEach(function(_){delete _._}),{type:"MultiPolygon",arcs:s.map(function(_){var l=[],h;if(_.forEach(function(E){E.forEach(function(P){P.forEach(function(w){t[w<0?~w:w].length<2&&l.push(w)})})}),l=stitch(r,l),(h=l.length)>1)for(var f=1,m=c(l[0]),g,C;f<h;++f)(g=c(l[f]))>m&&(C=l[0],l[0]=l[f],l[f]=C,m=g);return l}).filter(function(_){return _.length>0})}}function bisect(r,e){for(var t=0,i=r.length;t<i;){var s=t+i>>>1;r[s]<e?t=s+1:i=s}return t}function neighbors(r){var e={},t=r.map(function(){return[]});function i(E,P){E.forEach(function(w){w<0&&(w=~w);var M=e[w];M?M.push(P):e[w]=[P]})}function s(E,P){E.forEach(function(w){i(w,P)})}function n(E,P){E.type==="GeometryCollection"?E.geometries.forEach(function(w){n(w,P)}):E.type in o&&o[E.type](E.arcs,P)}var o={LineString:i,MultiLineString:s,Polygon:s,MultiPolygon:function(E,P){E.forEach(function(w){s(w,P)})}};r.forEach(n);for(var c in e)for(var _=e[c],l=_.length,h=0;h<l;++h)for(var f=h+1;f<l;++f){var m=_[h],g=_[f],C;(C=t[m])[c=bisect(C,g)]!==g&&C.splice(c,0,g),(C=t[g])[c=bisect(C,m)]!==m&&C.splice(c,0,m)}return t}function untransform(r){if(r==null)return identity$2;var e,t,i=r.scale[0],s=r.scale[1],n=r.translate[0],o=r.translate[1];return function(c,_){_||(e=t=0);var l=2,h=c.length,f=new Array(h),m=Math.round((c[0]-n)/i),g=Math.round((c[1]-o)/s);for(f[0]=m-e,e=m,f[1]=g-t,t=g;l<h;)f[l]=c[l],++l;return f}}function quantize(r,e){if(r.transform)throw new Error("already quantized");if(!e||!e.scale){if(!((o=Math.floor(e))>=2))throw new Error("n must be ≥2");_=r.bbox||bbox(r);var t=_[0],i=_[1],s=_[2],n=_[3],o;e={scale:[s-t?(s-t)/(o-1):1,n-i?(n-i)/(o-1):1],translate:[t,i]}}else _=r.bbox;var c=untransform(e),_,l,h=r.objects,f={};function m(E){return c(E)}function g(E){var P;switch(E.type){case"GeometryCollection":P={type:"GeometryCollection",geometries:E.geometries.map(g)};break;case"Point":P={type:"Point",coordinates:m(E.coordinates)};break;case"MultiPoint":P={type:"MultiPoint",coordinates:E.coordinates.map(m)};break;default:return E}return E.id!=null&&(P.id=E.id),E.bbox!=null&&(P.bbox=E.bbox),E.properties!=null&&(P.properties=E.properties),P}function C(E){var P=0,w=1,M=E.length,T,L=new Array(M);for(L[0]=c(E[0],0);++P<M;)((T=c(E[P],P))[0]||T[1])&&(L[w++]=T);return w===1&&(L[w++]=[0,0]),L.length=w,L}for(l in h)f[l]=g(h[l]);return{type:"Topology",bbox:_,transform:e,objects:f,arcs:r.arcs.map(C)}}const src$2=Object.freeze(Object.defineProperty({__proto__:null,bbox,feature,merge:merge$1,mergeArcs,mesh,meshArcs,neighbors,quantize,transform:transform$1,untransform},Symbol.toStringTag,{value:"Module"})),require$$4=getAugmentedNamespace(src$2);var hasOwnProperty=Object.prototype.hasOwnProperty;function bounds$1(r){var e=1/0,t=1/0,i=-1/0,s=-1/0;function n(f){f!=null&&hasOwnProperty.call(o,f.type)&&o[f.type](f)}var o={GeometryCollection:function(f){f.geometries.forEach(n)},Point:function(f){c(f.coordinates)},MultiPoint:function(f){f.coordinates.forEach(c)},LineString:function(f){_(f.arcs)},MultiLineString:function(f){f.arcs.forEach(_)},Polygon:function(f){f.arcs.forEach(_)},MultiPolygon:function(f){f.arcs.forEach(l)}};function c(f){var m=f[0],g=f[1];m<e&&(e=m),m>i&&(i=m),g<t&&(t=g),g>s&&(s=g)}function _(f){f.forEach(c)}function l(f){f.forEach(_)}for(var h in r)n(r[h]);return i>=e&&s>=t?[e,t,i,s]:void 0}function hashset(r,e,t,i,s){arguments.length===3&&(i=Array,s=null);for(var n=new i(r=1<<Math.max(4,Math.ceil(Math.log(r)/Math.LN2))),o=r-1,c=0;c<r;++c)n[c]=s;function _(f){for(var m=e(f)&o,g=n[m],C=0;g!=s;){if(t(g,f))return!0;if(++C>=r)throw new Error("full hashset");g=n[m=m+1&o]}return n[m]=f,!0}function l(f){for(var m=e(f)&o,g=n[m],C=0;g!=s;){if(t(g,f))return!0;if(++C>=r)break;g=n[m=m+1&o]}return!1}function h(){for(var f=[],m=0,g=n.length;m<g;++m){var C=n[m];C!=s&&f.push(C)}return f}return{add:_,has:l,values:h}}function hashmap(r,e,t,i,s,n){arguments.length===3&&(i=n=Array,s=null);for(var o=new i(r=1<<Math.max(4,Math.ceil(Math.log(r)/Math.LN2))),c=new n(r),_=r-1,l=0;l<r;++l)o[l]=s;function h(C,E){for(var P=e(C)&_,w=o[P],M=0;w!=s;){if(t(w,C))return c[P]=E;if(++M>=r)throw new Error("full hashmap");w=o[P=P+1&_]}return o[P]=C,c[P]=E,E}function f(C,E){for(var P=e(C)&_,w=o[P],M=0;w!=s;){if(t(w,C))return c[P];if(++M>=r)throw new Error("full hashmap");w=o[P=P+1&_]}return o[P]=C,c[P]=E,E}function m(C,E){for(var P=e(C)&_,w=o[P],M=0;w!=s;){if(t(w,C))return c[P];if(++M>=r)break;w=o[P=P+1&_]}return E}function g(){for(var C=[],E=0,P=o.length;E<P;++E){var w=o[E];w!=s&&C.push(w)}return C}return{set:h,maybeSet:f,get:m,keys:g}}function equalPoint(r,e){return r[0]===e[0]&&r[1]===e[1]}var buffer=new ArrayBuffer(16),floats=new Float64Array(buffer),uints=new Uint32Array(buffer);function hashPoint(r){floats[0]=r[0],floats[1]=r[1];var e=uints[0]^uints[1];return e=e<<5^e>>7^uints[2]^uints[3],e&2147483647}function join(r){var e=r.coordinates,t=r.lines,i=r.rings,s=D(),n=new Int32Array(e.length),o=new Int32Array(e.length),c=new Int32Array(e.length),_=new Int8Array(e.length),l=0,h,f,m,g,C;for(h=0,f=e.length;h<f;++h)n[h]=o[h]=c[h]=-1;for(h=0,f=t.length;h<f;++h){var E=t[h],P=E[0],w=E[1];for(g=s[P],C=s[++P],++l,_[g]=1;++P<=w;)R(h,m=g,g=C,C=s[P]);++l,_[C]=1}for(h=0,f=e.length;h<f;++h)n[h]=-1;for(h=0,f=i.length;h<f;++h){var M=i[h],T=M[0]+1,L=M[1];for(m=s[L-1],g=s[T-1],C=s[T],R(h,m,g,C);++T<=L;)R(h,m=g,g=C,C=s[T])}function R(H,W,J,z){if(n[J]!==H){n[J]=H;var fe=o[J];if(fe>=0){var q=c[J];(fe!==W||q!==z)&&(fe!==z||q!==W)&&(++l,_[J]=1)}else o[J]=W,c[J]=z}}function D(){for(var H=hashmap(e.length*1.4,N,k,Int32Array,-1,Int32Array),W=new Int32Array(e.length),J=0,z=e.length;J<z;++J)W[J]=H.maybeSet(J,J);return W}function N(H){return hashPoint(e[H])}function k(H,W){return equalPoint(e[H],e[W])}n=o=c=null;var B=hashset(l*1.4,hashPoint,equalPoint),$;for(h=0,f=e.length;h<f;++h)_[$=s[h]]&&B.add(e[$]);return B}function cut(r){var e=join(r),t=r.coordinates,i=r.lines,s=r.rings,n,o,c;for(o=0,c=i.length;o<c;++o)for(var _=i[o],l=_[0],h=_[1];++l<h;)e.has(t[l])&&(n={0:l,1:_[1]},_[1]=l,_=_.next=n);for(o=0,c=s.length;o<c;++o)for(var f=s[o],m=f[0],g=m,C=f[1],E=e.has(t[m]);++g<C;)e.has(t[g])&&(E?(n={0:g,1:f[1]},f[1]=g,f=f.next=n):(rotateArray(t,m,C,C-g),t[C]=t[m],E=!0,g=m));return r}function rotateArray(r,e,t,i){reverse(r,e,t),reverse(r,e,e+i),reverse(r,e+i,t)}function reverse(r,e,t){for(var i=e+(t---e>>1),s;e<i;++e,--t)s=r[e],r[e]=r[t],r[t]=s}function dedup(r){var e=r.coordinates,t=r.lines,i,s=r.rings,n,o=t.length+s.length,c,_;for(delete r.lines,delete r.rings,c=0,_=t.length;c<_;++c)for(i=t[c];i=i.next;)++o;for(c=0,_=s.length;c<_;++c)for(n=s[c];n=n.next;)++o;var l=hashmap(o*2*1.4,hashPoint,equalPoint),h=r.arcs=[];for(c=0,_=t.length;c<_;++c){i=t[c];do f(i);while(i=i.next)}for(c=0,_=s.length;c<_;++c)if(n=s[c],n.next)do f(n);while(n=n.next);else m(n);function f(M){var T,L,R,D,N,k,B,$;if(R=l.get(T=e[M[0]])){for(B=0,$=R.length;B<$;++B)if(D=R[B],g(D,M)){M[0]=D[0],M[1]=D[1];return}}if(N=l.get(L=e[M[1]])){for(B=0,$=N.length;B<$;++B)if(k=N[B],C(k,M)){M[1]=k[0],M[0]=k[1];return}}R?R.push(M):l.set(T,[M]),N?N.push(M):l.set(L,[M]),h.push(M)}function m(M){var T,L,R,D,N;if(L=l.get(T=e[M[0]]))for(D=0,N=L.length;D<N;++D){if(R=L[D],E(R,M)){M[0]=R[0],M[1]=R[1];return}if(P(R,M)){M[0]=R[1],M[1]=R[0];return}}if(L=l.get(T=e[M[0]+w(M)]))for(D=0,N=L.length;D<N;++D){if(R=L[D],E(R,M)){M[0]=R[0],M[1]=R[1];return}if(P(R,M)){M[0]=R[1],M[1]=R[0];return}}L?L.push(M):l.set(T,[M]),h.push(M)}function g(M,T){var L=M[0],R=T[0],D=M[1],N=T[1];if(L-D!==R-N)return!1;for(;L<=D;++L,++R)if(!equalPoint(e[L],e[R]))return!1;return!0}function C(M,T){var L=M[0],R=T[0],D=M[1],N=T[1];if(L-D!==R-N)return!1;for(;L<=D;++L,--N)if(!equalPoint(e[L],e[N]))return!1;return!0}function E(M,T){var L=M[0],R=T[0],D=M[1],N=T[1],k=D-L;if(k!==N-R)return!1;for(var B=w(M),$=w(T),H=0;H<k;++H)if(!equalPoint(e[L+(H+B)%k],e[R+(H+$)%k]))return!1;return!0}function P(M,T){var L=M[0],R=T[0],D=M[1],N=T[1],k=D-L;if(k!==N-R)return!1;for(var B=w(M),$=k-w(T),H=0;H<k;++H)if(!equalPoint(e[L+(H+B)%k],e[N-(H+$)%k]))return!1;return!0}function w(M){for(var T=M[0],L=M[1],R=T,D=R,N=e[R];++R<L;){var k=e[R];(k[0]<N[0]||k[0]===N[0]&&k[1]<N[1])&&(D=R,N=k)}return D-T}return r}function delta(r){for(var e=-1,t=r.length;++e<t;){for(var i=r[e],s=0,n=1,o=i.length,c=i[0],_=c[0],l=c[1],h,f;++s<o;)c=i[s],h=c[0],f=c[1],(h!==_||f!==l)&&(i[n++]=[h-_,f-l],_=h,l=f);n===1&&(i[n++]=[0,0]),i.length=n}return r}function extract(r){var e=-1,t=[],i=[],s=[];function n(f){f&&hasOwnProperty.call(o,f.type)&&o[f.type](f)}var o={GeometryCollection:function(f){f.geometries.forEach(n)},LineString:function(f){f.arcs=c(f.arcs)},MultiLineString:function(f){f.arcs=f.arcs.map(c)},Polygon:function(f){f.arcs=f.arcs.map(_)},MultiPolygon:function(f){f.arcs=f.arcs.map(l)}};function c(f){for(var m=0,g=f.length;m<g;++m)s[++e]=f[m];var C={0:e-g+1,1:e};return t.push(C),C}function _(f){for(var m=0,g=f.length;m<g;++m)s[++e]=f[m];var C={0:e-g+1,1:e};return i.push(C),C}function l(f){return f.map(_)}for(var h in r)n(r[h]);return{type:"Topology",coordinates:s,lines:t,rings:i,objects:r}}function geometry(r){var e={},t;for(t in r)e[t]=geomifyObject(r[t]);return e}function geomifyObject(r){return r==null?{type:null}:(r.type==="FeatureCollection"?geomifyFeatureCollection:r.type==="Feature"?geomifyFeature:geomifyGeometry)(r)}function geomifyFeatureCollection(r){var e={type:"GeometryCollection",geometries:r.features.map(geomifyFeature)};return r.bbox!=null&&(e.bbox=r.bbox),e}function geomifyFeature(r){var e=geomifyGeometry(r.geometry),t;r.id!=null&&(e.id=r.id),r.bbox!=null&&(e.bbox=r.bbox);for(t in r.properties){e.properties=r.properties;break}return e}function geomifyGeometry(r){if(r==null)return{type:null};var e=r.type==="GeometryCollection"?{type:"GeometryCollection",geometries:r.geometries.map(geomifyGeometry)}:r.type==="Point"||r.type==="MultiPoint"?{type:r.type,coordinates:r.coordinates}:{type:r.type,arcs:r.coordinates};return r.bbox!=null&&(e.bbox=r.bbox),e}function prequantize(r,e,t){var i=e[0],s=e[1],n=e[2],o=e[3],c=n-i?(t-1)/(n-i):1,_=o-s?(t-1)/(o-s):1;function l(w){return[Math.round((w[0]-i)*c),Math.round((w[1]-s)*_)]}function h(w,M){for(var T=-1,L=0,R=w.length,D=new Array(R),N,k,B,$,H;++T<R;)N=w[T],$=Math.round((N[0]-i)*c),H=Math.round((N[1]-s)*_),($!==k||H!==B)&&(D[L++]=[k=$,B=H]);for(D.length=L;L<M;)L=D.push([D[0][0],D[0][1]]);return D}function f(w){return h(w,2)}function m(w){return h(w,4)}function g(w){return w.map(m)}function C(w){w!=null&&hasOwnProperty.call(E,w.type)&&E[w.type](w)}var E={GeometryCollection:function(w){w.geometries.forEach(C)},Point:function(w){w.coordinates=l(w.coordinates)},MultiPoint:function(w){w.coordinates=w.coordinates.map(l)},LineString:function(w){w.arcs=f(w.arcs)},MultiLineString:function(w){w.arcs=w.arcs.map(f)},Polygon:function(w){w.arcs=g(w.arcs)},MultiPolygon:function(w){w.arcs=w.arcs.map(g)}};for(var P in r)C(r[P]);return{scale:[1/c,1/_],translate:[i,s]}}function topology(r,e){var t=bounds$1(r=geometry(r)),i=e>0&&t&&prequantize(r,t,e),s=dedup(cut(extract(r))),n=s.coordinates,o=hashmap(s.arcs.length*1.4,hashArc,equalArc);r=s.objects,s.bbox=t,s.arcs=s.arcs.map(function(m,g){return o.set(m,g),n.slice(m[0],m[1]+1)}),delete s.coordinates,n=null;function c(m){m&&hasOwnProperty.call(_,m.type)&&_[m.type](m)}var _={GeometryCollection:function(m){m.geometries.forEach(c)},LineString:function(m){m.arcs=l(m.arcs)},MultiLineString:function(m){m.arcs=m.arcs.map(l)},Polygon:function(m){m.arcs=m.arcs.map(l)},MultiPolygon:function(m){m.arcs=m.arcs.map(h)}};function l(m){var g=[];do{var C=o.get(m);g.push(m[0]<m[1]?C:~C)}while(m=m.next);return g}function h(m){return m.map(l)}for(var f in r)c(r[f]);return i&&(s.transform=i,s.arcs=delta(s.arcs)),s}function hashArc(r){var e=r[0],t=r[1],i;return t<e&&(i=e,e=t,t=i),e+31*t}function equalArc(r,e){var t=r[0],i=r[1],s=e[0],n=e[1],o;return i<t&&(o=t,t=i,i=o),n<s&&(o=s,s=n,n=o),t===s&&i===n}const src$1=Object.freeze(Object.defineProperty({__proto__:null,topology},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(src$1);var hasRequiredTurfPolygonDissolve;function requireTurfPolygonDissolve(){if(hasRequiredTurfPolygonDissolve)return turfPolygonDissolve;hasRequiredTurfPolygonDissolve=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(turfPolygonDissolve,"__esModule",{value:!0});var e=r(requireJs$1w()),t=requireJs$1G(),i=requireJs$1D(),s=requireJs$1F(),n=require$$4,o=require$$5;function c(_,l){if(l===void 0&&(l={}),i.getType(_)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!_.features.length)throw new Error("geojson is empty");(l.mutate===!1||l.mutate===void 0)&&(_=e.default(_));var h=[];s.flattenEach(_,function(g){h.push(g.geometry)});var f=o.topology({geoms:t.geometryCollection(h).geometry}),m=n.merge(f,f.objects.geoms.geometries);return m}return turfPolygonDissolve.default=c,turfPolygonDissolve}var hasRequiredTurfDissolve;function requireTurfDissolve(){if(hasRequiredTurfDissolve)return turfDissolve;hasRequiredTurfDissolve=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(turfDissolve,"__esModule",{value:!0});var e=r(requireJs$1w()),t=requireJs$1G(),i=requireJs$1D(),s=requireJs$1F(),n=r(requireTurfLineDissolve()),o=r(requireTurfPolygonDissolve());function c(l,h){if(h===void 0&&(h={}),h=h||{},!t.isObject(h))throw new Error("options is invalid");var f=h.mutate;if(i.getType(l)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!l.features.length)throw new Error("geojson is empty");(f===!1||f===void 0)&&(l=e.default(l));var m=_(l);if(!m)throw new Error("geojson must be homogenous");var g=l;switch(m){case"LineString":return n.default(g,h);case"Polygon":return o.default(g,h);default:throw new Error(m+" is not supported")}}function _(l){var h={};s.flattenEach(l,function(m){h[m.geometry.type]=!0});var f=Object.keys(h);return f.length===1?f[0]:null}return turfDissolve.default=c,turfDissolve}var hasRequiredJs$1v;function requireJs$1v(){if(hasRequiredJs$1v)return js$1x;hasRequiredJs$1v=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(js$1x,"__esModule",{value:!0});var e=r(requireJs$1y()),t=requireJs$1G(),i=requireJs$1F(),s=r(requireJs$1x()),n=r(requireTurfDissolve());function o(_,l){l===void 0&&(l={});var h=l.maxEdge||1/0,f=c(_),m=s.default(f);if(m.features=m.features.filter(function(C){var E=C.geometry.coordinates[0][0],P=C.geometry.coordinates[0][1],w=C.geometry.coordinates[0][2],M=e.default(E,P,l),T=e.default(P,w,l),L=e.default(E,w,l);return M<=h&&T<=h&&L<=h}),m.features.length<1)return null;var g=n.default(m);return g.coordinates.length===1&&(g.coordinates=g.coordinates[0],g.type="Polygon"),t.feature(g)}function c(_){var l=[],h={};return i.featureEach(_,function(f){if(f.geometry){var m=f.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(h,m)||(l.push(f),h[m]=!0)}}),t.featureCollection(l)}return js$1x.default=o,js$1x}var js$1t={},rbush$1={exports:{}},quickselect$1={exports:{}},hasRequiredQuickselect$1;function requireQuickselect$1(){return hasRequiredQuickselect$1||(hasRequiredQuickselect$1=1,function(r,e){(function(t,i){r.exports=i()})(commonjsGlobal,function(){function t(o,c,_,l,h){i(o,c,_||0,l||o.length-1,h||n)}function i(o,c,_,l,h){for(;l>_;){if(l-_>600){var f=l-_+1,m=c-_+1,g=Math.log(f),C=.5*Math.exp(2*g/3),E=.5*Math.sqrt(g*C*(f-C)/f)*(m-f/2<0?-1:1),P=Math.max(_,Math.floor(c-m*C/f+E)),w=Math.min(l,Math.floor(c+(f-m)*C/f+E));i(o,c,P,w,h)}var M=o[c],T=_,L=l;for(s(o,_,c),h(o[l],M)>0&&s(o,_,l);T<L;){for(s(o,T,L),T++,L--;h(o[T],M)<0;)T++;for(;h(o[L],M)>0;)L--}h(o[_],M)===0?s(o,_,L):(L++,s(o,L,l)),L<=c&&(_=L+1),c<=L&&(l=L-1)}}function s(o,c,_){var l=o[c];o[c]=o[_],o[_]=l}function n(o,c){return o<c?-1:o>c?1:0}return t})}(quickselect$1)),quickselect$1.exports}var hasRequiredRbush$1;function requireRbush$1(){if(hasRequiredRbush$1)return rbush$1.exports;hasRequiredRbush$1=1,rbush$1.exports=e,rbush$1.exports.default=e;var r=requireQuickselect$1();function e(P,w){if(!(this instanceof e))return new e(P,w);this._maxEntries=Math.max(4,P||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),w&&this._initFormat(w),this.clear()}e.prototype={all:function(){return this._all(this.data,[])},search:function(P){var w=this.data,M=[],T=this.toBBox;if(!g(P,w))return M;for(var L=[],R,D,N,k;w;){for(R=0,D=w.children.length;R<D;R++)N=w.children[R],k=w.leaf?T(N):N,g(P,k)&&(w.leaf?M.push(N):m(P,k)?this._all(N,M):L.push(N));w=L.pop()}return M},collides:function(P){var w=this.data,M=this.toBBox;if(!g(P,w))return!1;for(var T=[],L,R,D,N;w;){for(L=0,R=w.children.length;L<R;L++)if(D=w.children[L],N=w.leaf?M(D):D,g(P,N)){if(w.leaf||m(P,N))return!0;T.push(D)}w=T.pop()}return!1},load:function(P){if(!(P&&P.length))return this;if(P.length<this._minEntries){for(var w=0,M=P.length;w<M;w++)this.insert(P[w]);return this}var T=this._build(P.slice(),0,P.length-1,0);if(!this.data.children.length)this.data=T;else if(this.data.height===T.height)this._splitRoot(this.data,T);else{if(this.data.height<T.height){var L=this.data;this.data=T,T=L}this._insert(T,this.data.height-T.height-1,!0)}return this},insert:function(P){return P&&this._insert(P,this.data.height-1),this},clear:function(){return this.data=C([]),this},remove:function(P,w){if(!P)return this;for(var M=this.data,T=this.toBBox(P),L=[],R=[],D,N,k,B;M||L.length;){if(M||(M=L.pop(),N=L[L.length-1],D=R.pop(),B=!0),M.leaf&&(k=t(P,M.children,w),k!==-1))return M.children.splice(k,1),L.push(M),this._condense(L),this;!B&&!M.leaf&&m(M,T)?(L.push(M),R.push(D),D=0,N=M,M=M.children[0]):N?(D++,M=N.children[D],B=!1):M=null}return this},toBBox:function(P){return P},compareMinX:o,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(P){return this.data=P,this},_all:function(P,w){for(var M=[];P;)P.leaf?w.push.apply(w,P.children):M.push.apply(M,P.children),P=M.pop();return w},_build:function(P,w,M,T){var L=M-w+1,R=this._maxEntries,D;if(L<=R)return D=C(P.slice(w,M+1)),i(D,this.toBBox),D;T||(T=Math.ceil(Math.log(L)/Math.log(R)),R=Math.ceil(L/Math.pow(R,T-1))),D=C([]),D.leaf=!1,D.height=T;var N=Math.ceil(L/R),k=N*Math.ceil(Math.sqrt(R)),B,$,H,W;for(E(P,w,M,k,this.compareMinX),B=w;B<=M;B+=k)for(H=Math.min(B+k-1,M),E(P,B,H,N,this.compareMinY),$=B;$<=H;$+=N)W=Math.min($+N-1,H),D.children.push(this._build(P,$,W,T-1));return i(D,this.toBBox),D},_chooseSubtree:function(P,w,M,T){for(var L,R,D,N,k,B,$,H;T.push(w),!(w.leaf||T.length-1===M);){for($=H=1/0,L=0,R=w.children.length;L<R;L++)D=w.children[L],k=_(D),B=h(P,D)-k,B<H?(H=B,$=k<$?k:$,N=D):B===H&&k<$&&($=k,N=D);w=N||w.children[0]}return w},_insert:function(P,w,M){var T=this.toBBox,L=M?P:T(P),R=[],D=this._chooseSubtree(L,this.data,w,R);for(D.children.push(P),n(D,L);w>=0&&R[w].children.length>this._maxEntries;)this._split(R,w),w--;this._adjustParentBBoxes(L,R,w)},_split:function(P,w){var M=P[w],T=M.children.length,L=this._minEntries;this._chooseSplitAxis(M,L,T);var R=this._chooseSplitIndex(M,L,T),D=C(M.children.splice(R,M.children.length-R));D.height=M.height,D.leaf=M.leaf,i(M,this.toBBox),i(D,this.toBBox),w?P[w-1].children.push(D):this._splitRoot(M,D)},_splitRoot:function(P,w){this.data=C([P,w]),this.data.height=P.height+1,this.data.leaf=!1,i(this.data,this.toBBox)},_chooseSplitIndex:function(P,w,M){var T,L,R,D,N,k,B,$;for(k=B=1/0,T=w;T<=M-w;T++)L=s(P,0,T,this.toBBox),R=s(P,T,M,this.toBBox),D=f(L,R),N=_(L)+_(R),D<k?(k=D,$=T,B=N<B?N:B):D===k&&N<B&&(B=N,$=T);return $},_chooseSplitAxis:function(P,w,M){var T=P.leaf?this.compareMinX:o,L=P.leaf?this.compareMinY:c,R=this._allDistMargin(P,w,M,T),D=this._allDistMargin(P,w,M,L);R<D&&P.children.sort(T)},_allDistMargin:function(P,w,M,T){P.children.sort(T);var L=this.toBBox,R=s(P,0,w,L),D=s(P,M-w,M,L),N=l(R)+l(D),k,B;for(k=w;k<M-w;k++)B=P.children[k],n(R,P.leaf?L(B):B),N+=l(R);for(k=M-w-1;k>=w;k--)B=P.children[k],n(D,P.leaf?L(B):B),N+=l(D);return N},_adjustParentBBoxes:function(P,w,M){for(var T=M;T>=0;T--)n(w[T],P)},_condense:function(P){for(var w=P.length-1,M;w>=0;w--)P[w].children.length===0?w>0?(M=P[w-1].children,M.splice(M.indexOf(P[w]),1)):this.clear():i(P[w],this.toBBox)},_initFormat:function(P){var w=["return a"," - b",";"];this.compareMinX=new Function("a","b",w.join(P[0])),this.compareMinY=new Function("a","b",w.join(P[1])),this.toBBox=new Function("a","return {minX: a"+P[0]+", minY: a"+P[1]+", maxX: a"+P[2]+", maxY: a"+P[3]+"};")}};function t(P,w,M){if(!M)return w.indexOf(P);for(var T=0;T<w.length;T++)if(M(P,w[T]))return T;return-1}function i(P,w){s(P,0,P.children.length,w,P)}function s(P,w,M,T,L){L||(L=C(null)),L.minX=1/0,L.minY=1/0,L.maxX=-1/0,L.maxY=-1/0;for(var R=w,D;R<M;R++)D=P.children[R],n(L,P.leaf?T(D):D);return L}function n(P,w){return P.minX=Math.min(P.minX,w.minX),P.minY=Math.min(P.minY,w.minY),P.maxX=Math.max(P.maxX,w.maxX),P.maxY=Math.max(P.maxY,w.maxY),P}function o(P,w){return P.minX-w.minX}function c(P,w){return P.minY-w.minY}function _(P){return(P.maxX-P.minX)*(P.maxY-P.minY)}function l(P){return P.maxX-P.minX+(P.maxY-P.minY)}function h(P,w){return(Math.max(w.maxX,P.maxX)-Math.min(w.minX,P.minX))*(Math.max(w.maxY,P.maxY)-Math.min(w.minY,P.minY))}function f(P,w){var M=Math.max(P.minX,w.minX),T=Math.max(P.minY,w.minY),L=Math.min(P.maxX,w.maxX),R=Math.min(P.maxY,w.maxY);return Math.max(0,L-M)*Math.max(0,R-T)}function m(P,w){return P.minX<=w.minX&&P.minY<=w.minY&&w.maxX<=P.maxX&&w.maxY<=P.maxY}function g(P,w){return w.minX<=P.maxX&&w.minY<=P.maxY&&w.maxX>=P.minX&&w.maxY>=P.minY}function C(P){return{children:P,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function E(P,w,M,T,L){for(var R=[w,M],D;R.length;)M=R.pop(),w=R.pop(),!(M-w<=T)&&(D=w+Math.ceil((M-w)/T/2)*T,r(P,D,w,M,L),R.push(w,D,D,M))}return rbush$1.exports}var hasRequiredJs$1u;function requireJs$1u(){if(hasRequiredJs$1u)return js$1t;hasRequiredJs$1u=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(js$1t,"__esModule",{value:!0});var e=r(requireJs$1E()),t=r(requireJs$1A()),i=r(requireRbush$1());function s(n,o,c,_){var l=i.default(6),h=o.features.map(function(f){var m;return{minX:f.geometry.coordinates[0],minY:f.geometry.coordinates[1],maxX:f.geometry.coordinates[0],maxY:f.geometry.coordinates[1],property:(m=f.properties)===null||m===void 0?void 0:m[c]}});return l.load(h),n.features.forEach(function(f){f.properties||(f.properties={});var m=e.default(f),g=l.search({minX:m[0],minY:m[1],maxX:m[2],maxY:m[3]}),C=[];g.forEach(function(E){t.default([E.minX,E.minY],f)&&C.push(E.property)}),f.properties[_]=C}),n}return js$1t.default=s,js$1t}var js$1s={exports:{}},hasRequiredJs$1t;function requireJs$1t(){if(hasRequiredJs$1t)return js$1s.exports;hasRequiredJs$1t=1;var r=requireJs$1F(),e=requireJs$1G(),t=requireJs$1w();function i(o){return o&&typeof o=="object"&&"default"in o?o:{default:o}}var s=i(t);function n(o,c){if(c=c||{},!e.isObject(c))throw new Error("options is invalid");var _=c.mutate;if(!o)throw new Error("geojson is required");return(_===!1||_===void 0)&&(o=s.default(o)),r.coordEach(o,function(l){var h=l[0],f=l[1];l[0]=f,l[1]=h}),o}return js$1s.exports=n,js$1s.exports.default=n,js$1s.exports}var js$1r={exports:{}},js$1q={},hasRequiredJs$1s;function requireJs$1s(){if(hasRequiredJs$1s)return js$1q;hasRequiredJs$1s=1,Object.defineProperty(js$1q,"__esModule",{value:!0});var r=requireJs$1G(),e=requireJs$1D();function t(o,c){c===void 0&&(c={});var _=typeof c=="object"?c.mutate:c;if(!o)throw new Error("geojson is required");var l=e.getType(o),h=[];switch(l){case"LineString":h=i(o);break;case"MultiLineString":case"Polygon":e.getCoords(o).forEach(function(m){h.push(i(m))});break;case"MultiPolygon":e.getCoords(o).forEach(function(m){var g=[];m.forEach(function(C){g.push(i(C))}),h.push(g)});break;case"Point":return o;case"MultiPoint":var f={};e.getCoords(o).forEach(function(m){var g=m.join("-");Object.prototype.hasOwnProperty.call(f,g)||(h.push(m),f[g]=!0)});break;default:throw new Error(l+" geometry not supported")}return o.coordinates?_===!0?(o.coordinates=h,o):{type:l,coordinates:h}:_===!0?(o.geometry.coordinates=h,o):r.feature({type:l,coordinates:h},o.properties,{bbox:o.bbox,id:o.id})}function i(o){var c=e.getCoords(o);if(c.length===2&&!s(c[0],c[1]))return c;var _=[],l=c.length-1,h=_.length;_.push(c[0]);for(var f=1;f<l;f++){var m=_[_.length-1];c[f][0]===m[0]&&c[f][1]===m[1]||(_.push(c[f]),h=_.length,h>2&&n(_[h-3],_[h-1],_[h-2])&&_.splice(_.length-2,1))}if(_.push(c[c.length-1]),h=_.length,s(c[0],c[c.length-1])&&h<4)throw new Error("invalid polygon");return n(_[h-3],_[h-1],_[h-2])&&_.splice(_.length-2,1),_}function s(o,c){return o[0]===c[0]&&o[1]===c[1]}function n(o,c,_){var l=_[0],h=_[1],f=o[0],m=o[1],g=c[0],C=c[1],E=l-f,P=h-m,w=g-f,M=C-m,T=E*M-P*w;return T!==0?!1:Math.abs(w)>=Math.abs(M)?w>0?f<=l&&l<=g:g<=l&&l<=f:M>0?m<=h&&h<=C:C<=h&&h<=m}return js$1q.default=t,js$1q}var hasRequiredJs$1r;function requireJs$1r(){if(hasRequiredJs$1r)return js$1r.exports;hasRequiredJs$1r=1;var r=requireJs$1s(),e=requireJs$1w(),t=requireJs$1F(),i=requireJs$1G();function s(M){return M&&typeof M=="object"&&"default"in M?M:{default:M}}var n=s(r),o=s(e);function c(M,T){var L=M.x-T.x,R=M.y-T.y;return L*L+R*R}function _(M,T,L){var R=T.x,D=T.y,N=L.x-R,k=L.y-D;if(N!==0||k!==0){var B=((M.x-R)*N+(M.y-D)*k)/(N*N+k*k);B>1?(R=L.x,D=L.y):B>0&&(R+=N*B,D+=k*B)}return N=M.x-R,k=M.y-D,N*N+k*k}function l(M,T){for(var L=M[0],R=[L],D,N=1,k=M.length;N<k;N++)D=M[N],c(D,L)>T&&(R.push(D),L=D);return L!==D&&R.push(D),R}function h(M,T,L,R,D){for(var N=R,k,B=T+1;B<L;B++){var $=_(M[B],M[T],M[L]);$>N&&(k=B,N=$)}N>R&&(k-T>1&&h(M,T,k,R,D),D.push(M[k]),L-k>1&&h(M,k,L,R,D))}function f(M,T){var L=M.length-1,R=[M[0]];return h(M,0,L,T,R),R.push(M[L]),R}function m(M,T,L){if(M.length<=2)return M;var R=T!==void 0?T*T:1;return M=L?M:l(M,R),M=f(M,R),M}function g(M,T){if(T=T||{},!i.isObject(T))throw new Error("options is invalid");var L=T.tolerance!==void 0?T.tolerance:1,R=T.highQuality||!1,D=T.mutate||!1;if(!M)throw new Error("geojson is required");if(L&&L<0)throw new Error("invalid tolerance");return D!==!0&&(M=o.default(M)),t.geomEach(M,function(N){C(N,L,R)}),M}function C(M,T,L){var R=M.type;if(R==="Point"||R==="MultiPoint")return M;n.default(M,!0);var D=M.coordinates;switch(R){case"LineString":M.coordinates=E(D,T,L);break;case"MultiLineString":M.coordinates=D.map(function(N){return E(N,T,L)});break;case"Polygon":M.coordinates=P(D,T,L);break;case"MultiPolygon":M.coordinates=D.map(function(N){return P(N,T,L)})}return M}function E(M,T,L){return m(M.map(function(R){return{x:R[0],y:R[1],z:R[2]}}),T,L).map(function(R){return R.z?[R.x,R.y,R.z]:[R.x,R.y]})}function P(M,T,L){return M.map(function(R){var D=R.map(function(k){return{x:k[0],y:k[1]}});if(D.length<4)throw new Error("invalid polygon");for(var N=m(D,T,L).map(function(k){return[k.x,k.y]});!w(N);)T-=T*.01,N=m(D,T,L).map(function(k){return[k.x,k.y]});return(N[N.length-1][0]!==N[0][0]||N[N.length-1][1]!==N[0][1])&&N.push(N[0]),N})}function w(M){return M.length<3?!1:!(M.length===3&&M[2][0]===M[0][0]&&M[2][1]===M[0][1])}return js$1r.exports=g,js$1r.exports.default=g,js$1r.exports}var js$1p={},spline={},hasRequiredSpline;function requireSpline(){if(hasRequiredSpline)return spline;hasRequiredSpline=1,Object.defineProperty(spline,"__esModule",{value:!0});var r=function(){function i(s){this.points=s.points||[],this.duration=s.duration||1e4,this.sharpness=s.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=s.stepLength||60,this.length=this.points.length,this.delay=0;for(var n=0;n<this.length;n++)this.points[n].z=this.points[n].z||0;for(var n=0;n<this.length-1;n++){var o=this.points[n],c=this.points[n+1];this.centers.push({x:(o.x+c.x)/2,y:(o.y+c.y)/2,z:(o.z+c.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(var n=0;n<this.centers.length-1;n++){var _=this.points[n+1].x-(this.centers[n].x+this.centers[n+1].x)/2,l=this.points[n+1].y-(this.centers[n].y+this.centers[n+1].y)/2,h=this.points[n+1].z-(this.centers[n].y+this.centers[n+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[n+1].x+this.sharpness*(this.centers[n].x+_),y:(1-this.sharpness)*this.points[n+1].y+this.sharpness*(this.centers[n].y+l),z:(1-this.sharpness)*this.points[n+1].z+this.sharpness*(this.centers[n].z+h)},{x:(1-this.sharpness)*this.points[n+1].x+this.sharpness*(this.centers[n+1].x+_),y:(1-this.sharpness)*this.points[n+1].y+this.sharpness*(this.centers[n+1].y+l),z:(1-this.sharpness)*this.points[n+1].z+this.sharpness*(this.centers[n+1].z+h)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return i.prototype.cacheSteps=function(s){var n=[],o=this.pos(0);n.push(0);for(var c=0;c<this.duration;c+=10){var _=this.pos(c),l=Math.sqrt((_.x-o.x)*(_.x-o.x)+(_.y-o.y)*(_.y-o.y)+(_.z-o.z)*(_.z-o.z));l>s&&(n.push(c),o=_)}return n},i.prototype.vector=function(s){var n=this.pos(s+10),o=this.pos(s-10);return{angle:180*Math.atan2(n.y-o.y,n.x-o.x)/3.14,speed:Math.sqrt((o.x-n.x)*(o.x-n.x)+(o.y-n.y)*(o.y-n.y)+(o.z-n.z)*(o.z-n.z))}},i.prototype.pos=function(s){var n=s-this.delay;n<0&&(n=0),n>this.duration&&(n=this.duration-1);var o=n/this.duration;if(o>=1)return this.points[this.length-1];var c=Math.floor((this.points.length-1)*o),_=(this.length-1)*o-c;return e(_,this.points[c],this.controls[c][1],this.controls[c+1][0],this.points[c+1])},i}();spline.default=r;function e(i,s,n,o,c){var _=t(i),l={x:c.x*_[0]+o.x*_[1]+n.x*_[2]+s.x*_[3],y:c.y*_[0]+o.y*_[1]+n.y*_[2]+s.y*_[3],z:c.z*_[0]+o.z*_[1]+n.z*_[2]+s.z*_[3]};return l}function t(i){var s=i*i,n=s*i;return[n,3*s*(1-i),3*i*(1-i)*(1-i),(1-i)*(1-i)*(1-i)]}return spline}var hasRequiredJs$1q;function requireJs$1q(){if(hasRequiredJs$1q)return js$1p;hasRequiredJs$1q=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(js$1p,"__esModule",{value:!0});var e=requireJs$1G(),t=requireJs$1D(),i=r(requireSpline());function s(n,o){o===void 0&&(o={});for(var c=o.resolution||1e4,_=o.sharpness||.85,l=[],h=t.getGeom(n).coordinates.map(function(C){return{x:C[0],y:C[1]}}),f=new i.default({duration:c,points:h,sharpness:_}),m=function(C){var E=f.pos(C);Math.floor(C/100)%2===0&&l.push([E.x,E.y])},g=0;g<f.duration;g+=10)m(g);return m(f.duration),e.lineString(l,o.properties)}return js$1p.default=s,js$1p}var js$1o={exports:{}},hasRequiredJs$1p;function requireJs$1p(){if(hasRequiredJs$1p)return js$1o.exports;hasRequiredJs$1p=1;var r=requireJs$1A(),e=requireJs$1w(),t=requireJs$1F();function i(c){return c&&typeof c=="object"&&"default"in c?c:{default:c}}var s=i(r),n=i(e);function o(c,_,l,h){return c=n.default(c),_=n.default(_),t.featureEach(c,function(f){f.properties||(f.properties={}),t.featureEach(_,function(m){f.properties[h]===void 0&&s.default(f,m)&&(f.properties[h]=m.properties[l])})}),c}return js$1o.exports=o,js$1o.exports.default=o,js$1o.exports}var js$1n={exports:{}},hasRequiredJs$1o;function requireJs$1o(){if(hasRequiredJs$1o)return js$1n.exports;hasRequiredJs$1o=1;var r=requireJs$1G();function e(i,s){if(!i)throw new Error("featurecollection is required");if(s==null)throw new Error("num is required");if(typeof s!="number")throw new Error("num must be a number");var n=r.featureCollection(t(i.features,s));return n}function t(i,s){for(var n=i.slice(0),o=i.length,c=o-s,_,l;o-- >c;)l=Math.floor((o+1)*Math.random()),_=n[l],n[l]=n[o],n[o]=_;return n.slice(c)}return js$1n.exports=e,js$1n.exports.default=e,js$1n.exports}var js$1m={exports:{}},js$1l={},hasRequiredJs$1n;function requireJs$1n(){if(hasRequiredJs$1n)return js$1l;hasRequiredJs$1n=1,Object.defineProperty(js$1l,"__esModule",{value:!0});var r=requireJs$1G();function e(t,i){i===void 0&&(i={});var s=Number(t[0]),n=Number(t[1]),o=Number(t[2]),c=Number(t[3]);if(t.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var _=[s,n],l=[s,c],h=[o,c],f=[o,n];return r.polygon([[_,f,h,l,_]],i.properties,{bbox:t,id:i.id})}return js$1l.default=e,js$1l}var hasRequiredJs$1m;function requireJs$1m(){if(hasRequiredJs$1m)return js$1m.exports;hasRequiredJs$1m=1;var r=requireJs$1E(),e=requireJs$1n();function t(o){return o&&typeof o=="object"&&"default"in o?o:{default:o}}var i=t(r),s=t(e);function n(o){return s.default(i.default(o))}return js$1m.exports=n,js$1m.exports.default=n,js$1m.exports}var js$1k={exports:{}},hasRequiredJs$1l;function requireJs$1l(){if(hasRequiredJs$1l)return js$1k.exports;hasRequiredJs$1l=1;var r=requireJs$1y();function e(s){return s&&typeof s=="object"&&"default"in s?s:{default:s}}var t=e(r);function i(s){var n=s[0],o=s[1],c=s[2],_=s[3],l=t.default(s.slice(0,2),[c,o]),h=t.default(s.slice(0,2),[n,_]);if(l>=h){var f=(o+_)/2;return[n,f-(c-n)/2,c,f+(c-n)/2]}else{var m=(n+c)/2;return[m-(_-o)/2,o,m+(_-o)/2,_]}}return js$1k.exports=i,js$1k.exports.default=i,js$1k.exports}var js$1j={},js$1i={},hasRequiredJs$1k;function requireJs$1k(){if(hasRequiredJs$1k)return js$1i;hasRequiredJs$1k=1,Object.defineProperty(js$1i,"__esModule",{value:!0});var r=requireJs$1G(),e=requireJs$1D();function t(i,s,n,o){o===void 0&&(o={});var c=e.getCoord(i),_=r.degreesToRadians(c[0]),l=r.degreesToRadians(c[1]),h=r.degreesToRadians(n),f=r.lengthToRadians(s,o.units),m=Math.asin(Math.sin(l)*Math.cos(f)+Math.cos(l)*Math.sin(f)*Math.cos(h)),g=_+Math.atan2(Math.sin(h)*Math.sin(f)*Math.cos(l),Math.cos(f)-Math.sin(l)*Math.sin(m)),C=r.radiansToDegrees(g),E=r.radiansToDegrees(m);return r.point([C,E],o.properties)}return js$1i.default=t,js$1i}var hasRequiredJs$1j;function requireJs$1j(){if(hasRequiredJs$1j)return js$1j;hasRequiredJs$1j=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(js$1j,"__esModule",{value:!0});var e=r(requireJs$1k()),t=requireJs$1G();function i(s,n,o){o===void 0&&(o={});for(var c=o.steps||64,_=o.properties?o.properties:!Array.isArray(s)&&s.type==="Feature"&&s.properties?s.properties:{},l=[],h=0;h<c;h++)l.push(e.default(s,n,h*-360/c,o).geometry.coordinates);return l.push(l[0]),t.polygon([l],_)}return js$1j.default=i,js$1j}var js$1h={exports:{}},js$1g={},hasRequiredJs$1i;function requireJs$1i(){if(hasRequiredJs$1i)return js$1g;hasRequiredJs$1i=1,Object.defineProperty(js$1g,"__esModule",{value:!0});var r=requireJs$1G(),e=requireJs$1D();function t(s,n,o){if(o===void 0&&(o={}),o.final===!0)return i(s,n);var c=e.getCoord(s),_=e.getCoord(n),l=r.degreesToRadians(c[0]),h=r.degreesToRadians(_[0]),f=r.degreesToRadians(c[1]),m=r.degreesToRadians(_[1]),g=Math.sin(h-l)*Math.cos(m),C=Math.cos(f)*Math.sin(m)-Math.sin(f)*Math.cos(m)*Math.cos(h-l);return r.radiansToDegrees(Math.atan2(g,C))}js$1g.default=t;function i(s,n){var o=t(n,s);return o=(o+180)%360,o}return js$1g}var hasRequiredJs$1h;function requireJs$1h(){if(hasRequiredJs$1h)return js$1h.exports;hasRequiredJs$1h=1;var r=requireJs$1i(),e=requireJs$1k(),t=requireJs$1y();function i(_){return _&&typeof _=="object"&&"default"in _?_:{default:_}}var s=i(r),n=i(e),o=i(t);function c(_,l){var h=o.default(_,l),f=s.default(_,l),m=n.default(_,h/2,f);return m}return js$1h.exports=c,js$1h.exports.default=c,js$1h.exports}var js$1f={},hasRequiredJs$1g;function requireJs$1g(){if(hasRequiredJs$1g)return js$1f;hasRequiredJs$1g=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(js$1f,"__esModule",{value:!0});var e=r(requireJs$1E()),t=requireJs$1G();function i(s,n){n===void 0&&(n={});var o=e.default(s),c=(o[0]+o[2])/2,_=(o[1]+o[3])/2;return t.point([c,_],n.properties,n)}return js$1f.default=i,js$1f}var js$1e={},js$1d={},hasRequiredJs$1f;function requireJs$1f(){if(hasRequiredJs$1f)return js$1d;hasRequiredJs$1f=1,Object.defineProperty(js$1d,"__esModule",{value:!0});var r=requireJs$1F(),e=requireJs$1G();function t(i,s){s===void 0&&(s={});var n=0,o=0,c=0;return r.coordEach(i,function(_){n+=_[0],o+=_[1],c++},!0),e.point([n/c,o/c],s.properties)}return js$1d.default=t,js$1d}var hasRequiredJs$1e;function requireJs$1e(){if(hasRequiredJs$1e)return js$1e;hasRequiredJs$1e=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(js$1e,"__esModule",{value:!0});var e=r(requireJs$1B()),t=r(requireJs$1f()),i=requireJs$1G(),s=requireJs$1D(),n=requireJs$1F();function o(c,_){switch(_===void 0&&(_={}),s.getType(c)){case"Point":return i.point(s.getCoord(c),_.properties);case"Polygon":var l=[];n.coordEach(c,function(H){l.push(H)});var h=t.default(c,{properties:_.properties}),f=h.geometry.coordinates,m=0,g=0,C=0,E,P,w,M,T,L,R,D,N=l.map(function(H){return[H[0]-f[0],H[1]-f[1]]});for(E=0;E<l.length-1;E++)P=N[E],M=P[0],L=P[1],w=N[E+1],T=w[0],R=w[1],D=M*R-T*L,C+=D,m+=(M+T)*D,g+=(L+R)*D;if(C===0)return h;var k=C*.5,B=1/(6*k);return i.point([f[0]+B*m,f[1]+B*g],_.properties);default:var $=e.default(c);return $?o($,{properties:_.properties}):t.default(c,{properties:_.properties})}}return js$1e.default=o,js$1e}var js$1c={},hasRequiredJs$1d;function requireJs$1d(){if(hasRequiredJs$1d)return js$1c;hasRequiredJs$1d=1,Object.defineProperty(js$1c,"__esModule",{value:!0});var r=requireJs$1G(),e=requireJs$1F();function t(i){var s={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return e.featureEach(i,function(n){var o,c,_,l;switch((l=n.geometry)===null||l===void 0?void 0:l.type){case"Point":s.MultiPoint.coordinates.push(n.geometry.coordinates),s.MultiPoint.properties.push(n.properties);break;case"MultiPoint":(o=s.MultiPoint.coordinates).push.apply(o,n.geometry.coordinates),s.MultiPoint.properties.push(n.properties);break;case"LineString":s.MultiLineString.coordinates.push(n.geometry.coordinates),s.MultiLineString.properties.push(n.properties);break;case"MultiLineString":(c=s.MultiLineString.coordinates).push.apply(c,n.geometry.coordinates),s.MultiLineString.properties.push(n.properties);break;case"Polygon":s.MultiPolygon.coordinates.push(n.geometry.coordinates),s.MultiPolygon.properties.push(n.properties);break;case"MultiPolygon":(_=s.MultiPolygon.coordinates).push.apply(_,n.geometry.coordinates),s.MultiPolygon.properties.push(n.properties);break}}),r.featureCollection(Object.keys(s).filter(function(n){return s[n].coordinates.length}).sort().map(function(n){var o={type:n,coordinates:s[n].coordinates},c={collectedProperties:s[n].properties};return r.feature(o,c)}))}return js$1c.default=t,js$1c}var js$1b={exports:{}},hasRequiredJs$1c;function requireJs$1c(){if(hasRequiredJs$1c)return js$1b.exports;hasRequiredJs$1c=1;var r=requireJs$1F(),e=requireJs$1G();function t(i){var s=[];return i.type==="FeatureCollection"?r.featureEach(i,function(n){r.coordEach(n,function(o){s.push(e.point(o,n.properties))})}):r.coordEach(i,function(n){s.push(e.point(n,i.properties))}),e.featureCollection(s)}return js$1b.exports=t,js$1b.exports.default=t,js$1b.exports}var js$1a={exports:{}},earcut={exports:{}},hasRequiredEarcut;function requireEarcut(){if(hasRequiredEarcut)return earcut.exports;hasRequiredEarcut=1,earcut.exports=r,earcut.exports.default=r;function r(q,te,ie){ie=ie||2;var xe=te&&te.length,oe=xe?te[0]*ie:q.length,de=e(q,0,oe,ie,!0),X=[];if(!de||de.next===de.prev)return X;var he,Se,Te,Re,Be,ze,Ve;if(xe&&(de=_(q,te,de,ie)),q.length>80*ie){he=Te=q[0],Se=Re=q[1];for(var ye=ie;ye<oe;ye+=ie)Be=q[ye],ze=q[ye+1],Be<he&&(he=Be),ze<Se&&(Se=ze),Be>Te&&(Te=Be),ze>Re&&(Re=ze);Ve=Math.max(Te-he,Re-Se),Ve=Ve!==0?32767/Ve:0}return i(de,X,ie,he,Se,Ve,0),X}function e(q,te,ie,xe,oe){var de,X;if(oe===fe(q,te,ie,xe)>0)for(de=te;de<ie;de+=xe)X=W(de,q[de],q[de+1],X);else for(de=ie-xe;de>=te;de-=xe)X=W(de,q[de],q[de+1],X);return X&&L(X,X.next)&&(J(X),X=X.next),X}function t(q,te){if(!q)return q;te||(te=q);var ie=q,xe;do if(xe=!1,!ie.steiner&&(L(ie,ie.next)||T(ie.prev,ie,ie.next)===0)){if(J(ie),ie=te=ie.prev,ie===ie.next)break;xe=!0}else ie=ie.next;while(xe||ie!==te);return te}function i(q,te,ie,xe,oe,de,X){if(q){!X&&de&&g(q,xe,oe,de);for(var he=q,Se,Te;q.prev!==q.next;){if(Se=q.prev,Te=q.next,de?n(q,xe,oe,de):s(q)){te.push(Se.i/ie|0),te.push(q.i/ie|0),te.push(Te.i/ie|0),J(q),q=Te.next,he=Te.next;continue}if(q=Te,q===he){X?X===1?(q=o(t(q),te,ie),i(q,te,ie,xe,oe,de,2)):X===2&&c(q,te,ie,xe,oe,de):i(t(q),te,ie,xe,oe,de,1);break}}}}function s(q){var te=q.prev,ie=q,xe=q.next;if(T(te,ie,xe)>=0)return!1;for(var oe=te.x,de=ie.x,X=xe.x,he=te.y,Se=ie.y,Te=xe.y,Re=oe<de?oe<X?oe:X:de<X?de:X,Be=he<Se?he<Te?he:Te:Se<Te?Se:Te,ze=oe>de?oe>X?oe:X:de>X?de:X,Ve=he>Se?he>Te?he:Te:Se>Te?Se:Te,ye=xe.next;ye!==te;){if(ye.x>=Re&&ye.x<=ze&&ye.y>=Be&&ye.y<=Ve&&w(oe,he,de,Se,X,Te,ye.x,ye.y)&&T(ye.prev,ye,ye.next)>=0)return!1;ye=ye.next}return!0}function n(q,te,ie,xe){var oe=q.prev,de=q,X=q.next;if(T(oe,de,X)>=0)return!1;for(var he=oe.x,Se=de.x,Te=X.x,Re=oe.y,Be=de.y,ze=X.y,Ve=he<Se?he<Te?he:Te:Se<Te?Se:Te,ye=Re<Be?Re<ze?Re:ze:Be<ze?Be:ze,Fe=he>Se?he>Te?he:Te:Se>Te?Se:Te,Ce=Re>Be?Re>ze?Re:ze:Be>ze?Be:ze,Q=E(Ve,ye,te,ie,xe),me=E(Fe,Ce,te,ie,xe),Ie=q.prevZ,De=q.nextZ;Ie&&Ie.z>=Q&&De&&De.z<=me;){if(Ie.x>=Ve&&Ie.x<=Fe&&Ie.y>=ye&&Ie.y<=Ce&&Ie!==oe&&Ie!==X&&w(he,Re,Se,Be,Te,ze,Ie.x,Ie.y)&&T(Ie.prev,Ie,Ie.next)>=0||(Ie=Ie.prevZ,De.x>=Ve&&De.x<=Fe&&De.y>=ye&&De.y<=Ce&&De!==oe&&De!==X&&w(he,Re,Se,Be,Te,ze,De.x,De.y)&&T(De.prev,De,De.next)>=0))return!1;De=De.nextZ}for(;Ie&&Ie.z>=Q;){if(Ie.x>=Ve&&Ie.x<=Fe&&Ie.y>=ye&&Ie.y<=Ce&&Ie!==oe&&Ie!==X&&w(he,Re,Se,Be,Te,ze,Ie.x,Ie.y)&&T(Ie.prev,Ie,Ie.next)>=0)return!1;Ie=Ie.prevZ}for(;De&&De.z<=me;){if(De.x>=Ve&&De.x<=Fe&&De.y>=ye&&De.y<=Ce&&De!==oe&&De!==X&&w(he,Re,Se,Be,Te,ze,De.x,De.y)&&T(De.prev,De,De.next)>=0)return!1;De=De.nextZ}return!0}function o(q,te,ie){var xe=q;do{var oe=xe.prev,de=xe.next.next;!L(oe,de)&&R(oe,xe,xe.next,de)&&B(oe,de)&&B(de,oe)&&(te.push(oe.i/ie|0),te.push(xe.i/ie|0),te.push(de.i/ie|0),J(xe),J(xe.next),xe=q=de),xe=xe.next}while(xe!==q);return t(xe)}function c(q,te,ie,xe,oe,de){var X=q;do{for(var he=X.next.next;he!==X.prev;){if(X.i!==he.i&&M(X,he)){var Se=H(X,he);X=t(X,X.next),Se=t(Se,Se.next),i(X,te,ie,xe,oe,de,0),i(Se,te,ie,xe,oe,de,0);return}he=he.next}X=X.next}while(X!==q)}function _(q,te,ie,xe){var oe=[],de,X,he,Se,Te;for(de=0,X=te.length;de<X;de++)he=te[de]*xe,Se=de<X-1?te[de+1]*xe:q.length,Te=e(q,he,Se,xe,!1),Te===Te.next&&(Te.steiner=!0),oe.push(P(Te));for(oe.sort(l),de=0;de<oe.length;de++)ie=h(oe[de],ie);return ie}function l(q,te){return q.x-te.x}function h(q,te){var ie=f(q,te);if(!ie)return te;var xe=H(ie,q);return t(xe,xe.next),t(ie,ie.next)}function f(q,te){var ie=te,xe=q.x,oe=q.y,de=-1/0,X;do{if(oe<=ie.y&&oe>=ie.next.y&&ie.next.y!==ie.y){var he=ie.x+(oe-ie.y)*(ie.next.x-ie.x)/(ie.next.y-ie.y);if(he<=xe&&he>de&&(de=he,X=ie.x<ie.next.x?ie:ie.next,he===xe))return X}ie=ie.next}while(ie!==te);if(!X)return null;var Se=X,Te=X.x,Re=X.y,Be=1/0,ze;ie=X;do xe>=ie.x&&ie.x>=Te&&xe!==ie.x&&w(oe<Re?xe:de,oe,Te,Re,oe<Re?de:xe,oe,ie.x,ie.y)&&(ze=Math.abs(oe-ie.y)/(xe-ie.x),B(ie,q)&&(ze<Be||ze===Be&&(ie.x>X.x||ie.x===X.x&&m(X,ie)))&&(X=ie,Be=ze)),ie=ie.next;while(ie!==Se);return X}function m(q,te){return T(q.prev,q,te.prev)<0&&T(te.next,q,q.next)<0}function g(q,te,ie,xe){var oe=q;do oe.z===0&&(oe.z=E(oe.x,oe.y,te,ie,xe)),oe.prevZ=oe.prev,oe.nextZ=oe.next,oe=oe.next;while(oe!==q);oe.prevZ.nextZ=null,oe.prevZ=null,C(oe)}function C(q){var te,ie,xe,oe,de,X,he,Se,Te=1;do{for(ie=q,q=null,de=null,X=0;ie;){for(X++,xe=ie,he=0,te=0;te<Te&&(he++,xe=xe.nextZ,!!xe);te++);for(Se=Te;he>0||Se>0&&xe;)he!==0&&(Se===0||!xe||ie.z<=xe.z)?(oe=ie,ie=ie.nextZ,he--):(oe=xe,xe=xe.nextZ,Se--),de?de.nextZ=oe:q=oe,oe.prevZ=de,de=oe;ie=xe}de.nextZ=null,Te*=2}while(X>1);return q}function E(q,te,ie,xe,oe){return q=(q-ie)*oe|0,te=(te-xe)*oe|0,q=(q|q<<8)&16711935,q=(q|q<<4)&252645135,q=(q|q<<2)&858993459,q=(q|q<<1)&1431655765,te=(te|te<<8)&16711935,te=(te|te<<4)&252645135,te=(te|te<<2)&858993459,te=(te|te<<1)&1431655765,q|te<<1}function P(q){var te=q,ie=q;do(te.x<ie.x||te.x===ie.x&&te.y<ie.y)&&(ie=te),te=te.next;while(te!==q);return ie}function w(q,te,ie,xe,oe,de,X,he){return(oe-X)*(te-he)>=(q-X)*(de-he)&&(q-X)*(xe-he)>=(ie-X)*(te-he)&&(ie-X)*(de-he)>=(oe-X)*(xe-he)}function M(q,te){return q.next.i!==te.i&&q.prev.i!==te.i&&!k(q,te)&&(B(q,te)&&B(te,q)&&$(q,te)&&(T(q.prev,q,te.prev)||T(q,te.prev,te))||L(q,te)&&T(q.prev,q,q.next)>0&&T(te.prev,te,te.next)>0)}function T(q,te,ie){return(te.y-q.y)*(ie.x-te.x)-(te.x-q.x)*(ie.y-te.y)}function L(q,te){return q.x===te.x&&q.y===te.y}function R(q,te,ie,xe){var oe=N(T(q,te,ie)),de=N(T(q,te,xe)),X=N(T(ie,xe,q)),he=N(T(ie,xe,te));return!!(oe!==de&&X!==he||oe===0&&D(q,ie,te)||de===0&&D(q,xe,te)||X===0&&D(ie,q,xe)||he===0&&D(ie,te,xe))}function D(q,te,ie){return te.x<=Math.max(q.x,ie.x)&&te.x>=Math.min(q.x,ie.x)&&te.y<=Math.max(q.y,ie.y)&&te.y>=Math.min(q.y,ie.y)}function N(q){return q>0?1:q<0?-1:0}function k(q,te){var ie=q;do{if(ie.i!==q.i&&ie.next.i!==q.i&&ie.i!==te.i&&ie.next.i!==te.i&&R(ie,ie.next,q,te))return!0;ie=ie.next}while(ie!==q);return!1}function B(q,te){return T(q.prev,q,q.next)<0?T(q,te,q.next)>=0&&T(q,q.prev,te)>=0:T(q,te,q.prev)<0||T(q,q.next,te)<0}function $(q,te){var ie=q,xe=!1,oe=(q.x+te.x)/2,de=(q.y+te.y)/2;do ie.y>de!=ie.next.y>de&&ie.next.y!==ie.y&&oe<(ie.next.x-ie.x)*(de-ie.y)/(ie.next.y-ie.y)+ie.x&&(xe=!xe),ie=ie.next;while(ie!==q);return xe}function H(q,te){var ie=new z(q.i,q.x,q.y),xe=new z(te.i,te.x,te.y),oe=q.next,de=te.prev;return q.next=te,te.prev=q,ie.next=oe,oe.prev=ie,xe.next=ie,ie.prev=xe,de.next=xe,xe.prev=de,xe}function W(q,te,ie,xe){var oe=new z(q,te,ie);return xe?(oe.next=xe.next,oe.prev=xe,xe.next.prev=oe,xe.next=oe):(oe.prev=oe,oe.next=oe),oe}function J(q){q.next.prev=q.prev,q.prev.next=q.next,q.prevZ&&(q.prevZ.nextZ=q.nextZ),q.nextZ&&(q.nextZ.prevZ=q.prevZ)}function z(q,te,ie){this.i=q,this.x=te,this.y=ie,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}r.deviation=function(q,te,ie,xe){var oe=te&&te.length,de=oe?te[0]*ie:q.length,X=Math.abs(fe(q,0,de,ie));if(oe)for(var he=0,Se=te.length;he<Se;he++){var Te=te[he]*ie,Re=he<Se-1?te[he+1]*ie:q.length;X-=Math.abs(fe(q,Te,Re,ie))}var Be=0;for(he=0;he<xe.length;he+=3){var ze=xe[he]*ie,Ve=xe[he+1]*ie,ye=xe[he+2]*ie;Be+=Math.abs((q[ze]-q[ye])*(q[Ve+1]-q[ze+1])-(q[ze]-q[Ve])*(q[ye+1]-q[ze+1]))}return X===0&&Be===0?0:Math.abs((Be-X)/X)};function fe(q,te,ie,xe){for(var oe=0,de=te,X=ie-xe;de<ie;de+=xe)oe+=(q[X]-q[de])*(q[de+1]+q[X+1]),X=de;return oe}return r.flatten=function(q){for(var te=q[0][0].length,ie={vertices:[],holes:[],dimensions:te},xe=0,oe=0;oe<q.length;oe++){for(var de=0;de<q[oe].length;de++)for(var X=0;X<te;X++)ie.vertices.push(q[oe][de][X]);oe>0&&(xe+=q[oe-1].length,ie.holes.push(xe))}return ie},earcut.exports}var hasRequiredJs$1b;function requireJs$1b(){if(hasRequiredJs$1b)return js$1a.exports;hasRequiredJs$1b=1;var r=requireEarcut(),e=requireJs$1G();function t(c){return c&&typeof c=="object"&&"default"in c?c:{default:c}}var i=t(r);function s(c){if(!c.geometry||c.geometry.type!=="Polygon"&&c.geometry.type!=="MultiPolygon")throw new Error("input must be a Polygon or MultiPolygon");var _={type:"FeatureCollection",features:[]};return c.geometry.type==="Polygon"?_.features=n(c.geometry.coordinates):c.geometry.coordinates.forEach(function(l){_.features=_.features.concat(n(l))}),_}function n(c){var _=o(c),l=2,h=i.default(_.vertices,_.holes,l),f=[],m=[];h.forEach(function(E,P){var w=h[P];m.push([_.vertices[w*l],_.vertices[w*l+1]])});for(var g=0;g<m.length;g+=3){var C=m.slice(g,g+3);C.push(m[g]),f.push(e.polygon([C]))}return f}function o(c){for(var _=c[0][0].length,l={vertices:[],holes:[],dimensions:_},h=0,f=0;f<c.length;f++){for(var m=0;m<c[f].length;m++)for(var g=0;g<_;g++)l.vertices.push(c[f][m][g]);f>0&&(h+=c[f-1].length,l.holes.push(h))}return l}return js$1a.exports=s,js$1a.exports.default=s,js$1a.exports}var js$19={},hasRequiredJs$1a;function requireJs$1a(){if(hasRequiredJs$1a)return js$19;hasRequiredJs$1a=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(js$19,"__esModule",{value:!0});var e=r(requireJs$1w()),t=r(requireJs$1y()),i=requireJs$1F();function s(n,o){if(!n)throw new Error("targetPoint is required");if(!o)throw new Error("points is required");var c,_=1/0,l=0;return i.featureEach(o,function(h,f){var m=t.default(n,h);m<_&&(l=f,_=m)}),c=e.default(o.features[l]),c.properties.featureIndex=l,c.properties.distanceToPoint=_,c}return js$19.default=s,js$19}var js$18={},js$17={},js$16={},hasRequiredJs$19;function requireJs$19(){if(hasRequiredJs$19)return js$16;hasRequiredJs$19=1,Object.defineProperty(js$16,"__esModule",{value:!0});var r=requireJs$1G(),e=requireJs$1D(),t=requireJs$1F();function i(c){if(!c)throw new Error("geojson is required");var _=[];return t.flattenEach(c,function(l){s(l,_)}),r.featureCollection(_)}function s(c,_){var l=[],h=c.geometry;if(h!==null){switch(h.type){case"Polygon":l=e.getCoords(h);break;case"LineString":l=[e.getCoords(h)]}l.forEach(function(f){var m=n(f,c.properties);m.forEach(function(g){g.id=_.length,_.push(g)})})}}function n(c,_){var l=[];return c.reduce(function(h,f){var m=r.lineString([h,f],_);return m.bbox=o(h,f),l.push(m),f}),l}function o(c,_){var l=c[0],h=c[1],f=_[0],m=_[1],g=l<f?l:f,C=h<m?h:m,E=l>f?l:f,P=h>m?h:m;return[g,C,E,P]}return js$16.default=i,js$16}var geojsonRbush={exports:{}},hasRequiredGeojsonRbush;function requireGeojsonRbush(){if(hasRequiredGeojsonRbush)return geojsonRbush.exports;hasRequiredGeojsonRbush=1;var r=requireRbush_min(),e=requireJs$1G(),t=requireJs$1F(),i=requireJs$1E().default,s=t.featureEach;t.coordEach,e.polygon;var n=e.featureCollection;function o(c){var _=new r(c);return _.insert=function(l){if(l.type!=="Feature")throw new Error("invalid feature");return l.bbox=l.bbox?l.bbox:i(l),r.prototype.insert.call(this,l)},_.load=function(l){var h=[];return Array.isArray(l)?l.forEach(function(f){if(f.type!=="Feature")throw new Error("invalid features");f.bbox=f.bbox?f.bbox:i(f),h.push(f)}):s(l,function(f){if(f.type!=="Feature")throw new Error("invalid features");f.bbox=f.bbox?f.bbox:i(f),h.push(f)}),r.prototype.load.call(this,h)},_.remove=function(l,h){if(l.type!=="Feature")throw new Error("invalid feature");return l.bbox=l.bbox?l.bbox:i(l),r.prototype.remove.call(this,l,h)},_.clear=function(){return r.prototype.clear.call(this)},_.search=function(l){var h=r.prototype.search.call(this,this.toBBox(l));return n(h)},_.collides=function(l){return r.prototype.collides.call(this,this.toBBox(l))},_.all=function(){var l=r.prototype.all.call(this);return n(l)},_.toJSON=function(){return r.prototype.toJSON.call(this)},_.fromJSON=function(l){return r.prototype.fromJSON.call(this,l)},_.toBBox=function(l){var h;if(l.bbox)h=l.bbox;else if(Array.isArray(l)&&l.length===4)h=l;else if(Array.isArray(l)&&l.length===6)h=[l[0],l[1],l[3],l[4]];else if(l.type==="Feature")h=i(l);else if(l.type==="FeatureCollection")h=i(l);else throw new Error("invalid geojson");return{minX:h[0],minY:h[1],maxX:h[2],maxY:h[3]}},_}return geojsonRbush.exports=o,geojsonRbush.exports.default=o,geojsonRbush.exports}var hasRequiredJs$18;function requireJs$18(){if(hasRequiredJs$18)return js$17;hasRequiredJs$18=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(js$17,"__esModule",{value:!0});var e=requireJs$1G(),t=requireJs$1D(),i=r(requireJs$19()),s=requireJs$1F(),n=r(requireGeojsonRbush());function o(_,l){var h={},f=[];if(_.type==="LineString"&&(_=e.feature(_)),l.type==="LineString"&&(l=e.feature(l)),_.type==="Feature"&&l.type==="Feature"&&_.geometry!==null&&l.geometry!==null&&_.geometry.type==="LineString"&&l.geometry.type==="LineString"&&_.geometry.coordinates.length===2&&l.geometry.coordinates.length===2){var m=c(_,l);return m&&f.push(m),e.featureCollection(f)}var g=n.default();return g.load(i.default(l)),s.featureEach(i.default(_),function(C){s.featureEach(g.search(C),function(E){var P=c(C,E);if(P){var w=t.getCoords(P).join(",");h[w]||(h[w]=!0,f.push(P))}})}),e.featureCollection(f)}function c(_,l){var h=t.getCoords(_),f=t.getCoords(l);if(h.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(f.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var m=h[0][0],g=h[0][1],C=h[1][0],E=h[1][1],P=f[0][0],w=f[0][1],M=f[1][0],T=f[1][1],L=(T-w)*(C-m)-(M-P)*(E-g),R=(M-P)*(g-w)-(T-w)*(m-P),D=(C-m)*(g-w)-(E-g)*(m-P);if(L===0)return null;var N=R/L,k=D/L;if(N>=0&&N<=1&&k>=0&&k<=1){var B=m+N*(C-m),$=g+N*(E-g);return e.point([B,$])}return null}return js$17.default=o,js$17}var hasRequiredJs$17;function requireJs$17(){if(hasRequiredJs$17)return js$18;hasRequiredJs$17=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(js$18,"__esModule",{value:!0});var e=r(requireJs$1i()),t=r(requireJs$1y()),i=r(requireJs$1k()),s=r(requireJs$18()),n=requireJs$1F(),o=requireJs$1G(),c=requireJs$1D();function _(l,h,f){f===void 0&&(f={});var m=o.point([1/0,1/0],{dist:1/0}),g=0;return n.flattenEach(l,function(C){for(var E=c.getCoords(C),P=0;P<E.length-1;P++){var w=o.point(E[P]);w.properties.dist=t.default(h,w,f);var M=o.point(E[P+1]);M.properties.dist=t.default(h,M,f);var T=t.default(w,M,f),L=Math.max(w.properties.dist,M.properties.dist),R=e.default(w,M),D=i.default(h,L,R+90,f),N=i.default(h,L,R-90,f),k=s.default(o.lineString([D.geometry.coordinates,N.geometry.coordinates]),o.lineString([w.geometry.coordinates,M.geometry.coordinates])),B=null;k.features.length>0&&(B=k.features[0],B.properties.dist=t.default(h,B,f),B.properties.location=g+t.default(w,B,f)),w.properties.dist<m.properties.dist&&(m=w,m.properties.index=P,m.properties.location=g),M.properties.dist<m.properties.dist&&(m=M,m.properties.index=P+1,m.properties.location=g+T),B&&B.properties.dist<m.properties.dist&&(m=B,m.properties.index=P),g+=T}}),m}return js$18.default=_,js$18}var js$15={},js$14={},js$13={},hasRequiredJs$16;function requireJs$16(){if(hasRequiredJs$16)return js$13;hasRequiredJs$16=1,Object.defineProperty(js$13,"__esModule",{value:!0});var r=requireJs$1G(),e=requireJs$1D();function t(s,n,o){o===void 0&&(o={});var c=e.getCoord(s),_=e.getCoord(n);_[0]+=_[0]-c[0]>180?-360:c[0]-_[0]>180?360:0;var l=i(c,_),h=r.convertLength(l,"meters",o.units);return h}function i(s,n,o){o=o===void 0?r.earthRadius:Number(o);var c=o,_=s[1]*Math.PI/180,l=n[1]*Math.PI/180,h=l-_,f=Math.abs(n[0]-s[0])*Math.PI/180;f>Math.PI&&(f-=2*Math.PI);var m=Math.log(Math.tan(l/2+Math.PI/4)/Math.tan(_/2+Math.PI/4)),g=Math.abs(m)>1e-11?h/m:Math.cos(_),C=Math.sqrt(h*h+g*g*f*f),E=C*c;return E}return js$13.default=t,js$13}var hasRequiredJs$15;function requireJs$15(){if(hasRequiredJs$15)return js$14;hasRequiredJs$15=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(js$14,"__esModule",{value:!0});var e=r(requireJs$1y()),t=requireJs$1G(),i=requireJs$1D(),s=requireJs$1F(),n=r(requireJs$16());function o(h,f,m){if(m===void 0&&(m={}),m.method||(m.method="geodesic"),m.units||(m.units="kilometers"),!h)throw new Error("pt is required");if(Array.isArray(h)?h=t.point(h):h.type==="Point"?h=t.feature(h):i.featureOf(h,"Point","point"),!f)throw new Error("line is required");Array.isArray(f)?f=t.lineString(f):f.type==="LineString"?f=t.feature(f):i.featureOf(f,"LineString","line");var g=1/0,C=h.geometry.coordinates;return s.segmentEach(f,function(E){var P=E.geometry.coordinates[0],w=E.geometry.coordinates[1],M=c(C,P,w,m);M<g&&(g=M)}),t.convertLength(g,"degrees",m.units)}function c(h,f,m,g){var C=[m[0]-f[0],m[1]-f[1]],E=[h[0]-f[0],h[1]-f[1]],P=_(E,C);if(P<=0)return l(h,f,{method:g.method,units:"degrees"});var w=_(C,C);if(w<=P)return l(h,m,{method:g.method,units:"degrees"});var M=P/w,T=[f[0]+M*C[0],f[1]+M*C[1]];return l(h,T,{method:g.method,units:"degrees"})}function _(h,f){return h[0]*f[0]+h[1]*f[1]}function l(h,f,m){return m.method==="planar"?n.default(h,f,m):e.default(h,f,m)}return js$14.default=o,js$14}var hasRequiredJs$14;function requireJs$14(){if(hasRequiredJs$14)return js$15;hasRequiredJs$14=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(js$15,"__esModule",{value:!0});var e=requireJs$1D(),t=requireJs$1F(),i=r(requireJs$15()),s=r(requireObjectAssign());function n(c,_,l){l===void 0&&(l={});var h=l.units,f=l.properties||{},m=o(c);if(!m.features.length)throw new Error("points must contain features");if(!_)throw new Error("line is required");if(e.getType(_)!=="LineString")throw new Error("line must be a LineString");var g=1/0,C=null;return t.featureEach(m,function(E){var P=i.default(E,_,{units:h});P<g&&(g=P,C=E)}),C&&(C.properties=s.default({dist:g},C.properties,f)),C}function o(c){var _=[],l=c.geometry?c.geometry.type:c.type;switch(l){case"GeometryCollection":return t.geomEach(c,function(h){h.type==="Point"&&_.push({type:"Feature",properties:{},geometry:h})}),{type:"FeatureCollection",features:_};case"FeatureCollection":return c.features=c.features.filter(function(h){return h.geometry.type==="Point"}),c;default:throw new Error("points must be a Point Collection")}}return js$15.default=n,js$15}var js$12={exports:{}},hasRequiredJs$13;function requireJs$13(){if(hasRequiredJs$13)return js$12.exports;hasRequiredJs$13=1;var r=requireJs$1D();function e(t,i){var s=r.getCoord(t),n=r.getGeom(i),o=n.coordinates,c=o[0];if(c.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var _=i.properties||{},l=_.a,h=_.b,f=_.c,m=s[0],g=s[1],C=c[0][0],E=c[0][1],P=l!==void 0?l:c[0][2],w=c[1][0],M=c[1][1],T=h!==void 0?h:c[1][2],L=c[2][0],R=c[2][1],D=f!==void 0?f:c[2][2],N=(D*(m-C)*(g-M)+P*(m-w)*(g-R)+T*(m-L)*(g-E)-T*(m-C)*(g-R)-D*(m-w)*(g-E)-P*(m-L)*(g-M))/((m-C)*(g-M)+(m-w)*(g-R)+(m-L)*(g-E)-(m-C)*(g-R)-(m-w)*(g-E)-(m-L)*(g-M));return N}return js$12.exports=e,js$12.exports.default=e,js$12.exports}var js$11={},hasRequiredJs$12;function requireJs$12(){if(hasRequiredJs$12)return js$11;hasRequiredJs$12=1,Object.defineProperty(js$11,"__esModule",{value:!0});var r=requireJs$1G();function e(i){var s,n,o={type:"FeatureCollection",features:[]};if(i.type==="Feature"?n=i.geometry:n=i,n.type==="LineString")s=[n.coordinates];else if(n.type==="MultiLineString")s=n.coordinates;else if(n.type==="MultiPolygon")s=[].concat.apply([],n.coordinates);else if(n.type==="Polygon")s=n.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return s.forEach(function(c){s.forEach(function(_){for(var l=0;l<c.length-1;l++)for(var h=l;h<_.length-1;h++)if(!(c===_&&(Math.abs(l-h)===1||l===0&&h===c.length-2&&c[l][0]===c[c.length-1][0]&&c[l][1]===c[c.length-1][1]))){var f=t(c[l][0],c[l][1],c[l+1][0],c[l+1][1],_[h][0],_[h][1],_[h+1][0],_[h+1][1]);f&&o.features.push(r.point([f[0],f[1]]))}})}),o}js$11.default=e;function t(i,s,n,o,c,_,l,h){var f,m,g,C,E,P={x:null,y:null,onLine1:!1,onLine2:!1};return f=(h-_)*(n-i)-(l-c)*(o-s),f===0?P.x!==null&&P.y!==null?P:!1:(m=s-_,g=i-c,C=(l-c)*m-(h-_)*g,E=(n-i)*m-(o-s)*g,m=C/f,g=E/f,P.x=i+m*(n-i),P.y=s+m*(o-s),m>=0&&m<=1&&(P.onLine1=!0),g>=0&&g<=1&&(P.onLine2=!0),P.onLine1&&P.onLine2?[P.x,P.y]:!1)}return js$11}var js$10={exports:{}},hasRequiredJs$11;function requireJs$11(){if(hasRequiredJs$11)return js$10.exports;hasRequiredJs$11=1;var r=requireJs$1c(),e=requireJs$1g(),t=requireJs$1a(),i=requireJs$1A(),s=requireJs$1G();function n(g){return g&&typeof g=="object"&&"default"in g?g:{default:g}}var o=n(r),c=n(e),_=n(t),l=n(i);function h(g){for(var C=f(g),E=c.default(C),P=!1,w=0;!P&&w<C.features.length;){var M=C.features[w].geometry,T,L,R,D,N,k,B,$=!1;if(M.type==="Point")E.geometry.coordinates[0]===M.coordinates[0]&&E.geometry.coordinates[1]===M.coordinates[1]&&(P=!0);else if(M.type==="MultiPoint"){var H=!1;for(B=0;!H&&B<M.coordinates.length;)E.geometry.coordinates[0]===M.coordinates[B][0]&&E.geometry.coordinates[1]===M.coordinates[B][1]&&(P=!0,H=!0),B++}else if(M.type==="LineString")for(B=0;!$&&B<M.coordinates.length-1;)T=E.geometry.coordinates[0],L=E.geometry.coordinates[1],R=M.coordinates[B][0],D=M.coordinates[B][1],N=M.coordinates[B+1][0],k=M.coordinates[B+1][1],m(T,L,R,D,N,k)&&($=!0,P=!0),B++;else if(M.type==="MultiLineString")for(var W=0;W<M.coordinates.length;){$=!1,B=0;for(var J=M.coordinates[W];!$&&B<J.length-1;)T=E.geometry.coordinates[0],L=E.geometry.coordinates[1],R=J[B][0],D=J[B][1],N=J[B+1][0],k=J[B+1][1],m(T,L,R,D,N,k)&&($=!0,P=!0),B++;W++}else(M.type==="Polygon"||M.type==="MultiPolygon")&&l.default(E,M)&&(P=!0);w++}if(P)return E;var z=s.featureCollection([]);for(w=0;w<C.features.length;w++)z.features=z.features.concat(o.default(C.features[w]).features);return s.point(_.default(E,z).geometry.coordinates)}function f(g){return g.type!=="FeatureCollection"?g.type!=="Feature"?s.featureCollection([s.feature(g)]):s.featureCollection([g]):g}function m(g,C,E,P,w,M){var T=Math.sqrt((w-E)*(w-E)+(M-P)*(M-P)),L=Math.sqrt((g-E)*(g-E)+(C-P)*(C-P)),R=Math.sqrt((w-g)*(w-g)+(M-C)*(M-C));return T===L+R}return js$10.exports=h,js$10.exports.default=h,js$10.exports}var js$$={},hasRequiredJs$10;function requireJs$10(){if(hasRequiredJs$10)return js$$;hasRequiredJs$10=1,Object.defineProperty(js$$,"__esModule",{value:!0});var r=requireJs$1F(),e=6378137;function t(c){return r.geomReduce(c,function(_,l){return _+i(l)},0)}js$$.default=t;function i(c){var _=0,l;switch(c.type){case"Polygon":return s(c.coordinates);case"MultiPolygon":for(l=0;l<c.coordinates.length;l++)_+=s(c.coordinates[l]);return _;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function s(c){var _=0;if(c&&c.length>0){_+=Math.abs(n(c[0]));for(var l=1;l<c.length;l++)_-=Math.abs(n(c[l]))}return _}function n(c){var _,l,h,f,m,g,C,E=0,P=c.length;if(P>2){for(C=0;C<P;C++)C===P-2?(f=P-2,m=P-1,g=0):C===P-1?(f=P-1,m=0,g=1):(f=C,m=C+1,g=C+2),_=c[f],l=c[m],h=c[g],E+=(o(h[0])-o(_[0]))*Math.sin(o(l[1]));E=E*e*e/2}return E}function o(c){return c*Math.PI/180}return js$$}var js$_={},hasRequiredJs$$;function requireJs$$(){if(hasRequiredJs$$)return js$_;hasRequiredJs$$=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(js$_,"__esModule",{value:!0});var e=r(requireJs$1i()),t=r(requireJs$1k()),i=r(requireJs$1y()),s=requireJs$1G(),n=requireJs$1D();function o(c,_,l){l===void 0&&(l={});for(var h=n.getGeom(c),f=h.coordinates,m=0,g=0;g<f.length&&!(_>=m&&g===f.length-1);g++)if(m>=_){var C=_-m;if(C){var E=e.default(f[g],f[g-1])-180,P=t.default(f[g],C,E,l);return P}else return s.point(f[g])}else m+=i.default(f[g],f[g+1],l);return s.point(f[f.length-1])}return js$_.default=o,js$_}var js$Z={},hasRequiredJs$_;function requireJs$_(){if(hasRequiredJs$_)return js$Z;hasRequiredJs$_=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(js$Z,"__esModule",{value:!0});var e=r(requireJs$1y()),t=requireJs$1F();function i(s,n){return n===void 0&&(n={}),t.segmentReduce(s,function(o,c){var _=c.geometry.coordinates;return o+e.default(_[0],_[1],n)},0)}return js$Z.default=i,js$Z}var js$Y={exports:{}},hasRequiredJs$Z;function requireJs$Z(){if(hasRequiredJs$Z)return js$Y.exports;hasRequiredJs$Z=1;var r=requireJs$1D(),e=requireJs$1G(),t=requireJs$17();function i(o){return o&&typeof o=="object"&&"default"in o?o:{default:o}}var s=i(t);function n(o,c,_){var l=r.getCoords(_);if(r.getType(_)!=="LineString")throw new Error("line must be a LineString");var h=s.default(_,o),f=s.default(_,c),m;h.properties.index<=f.properties.index?m=[h,f]:m=[f,h];for(var g=[m[0].geometry.coordinates],C=m[0].properties.index+1;C<m[1].properties.index+1;C++)g.push(l[C]);return g.push(m[1].geometry.coordinates),e.lineString(g,_.properties)}return js$Y.exports=n,js$Y.exports.default=n,js$Y.exports}var js$X={exports:{}},hasRequiredJs$Y;function requireJs$Y(){if(hasRequiredJs$Y)return js$X.exports;hasRequiredJs$Y=1;var r=requireJs$1i(),e=requireJs$1y(),t=requireJs$1k(),i=requireJs$1G();function s(l){return l&&typeof l=="object"&&"default"in l?l:{default:l}}var n=s(r),o=s(e),c=s(t);function _(l,h,f,m){if(m=m||{},!i.isObject(m))throw new Error("options is invalid");var g,C=[];if(l.type==="Feature")g=l.geometry.coordinates;else if(l.type==="LineString")g=l.coordinates;else throw new Error("input must be a LineString Feature or Geometry");for(var E=g.length,P=0,w,M,T,L=0;L<g.length&&!(h>=P&&L===g.length-1);L++){if(P>h&&C.length===0){if(w=h-P,!w)return C.push(g[L]),i.lineString(C);M=n.default(g[L],g[L-1])-180,T=c.default(g[L],w,M,m),C.push(T.geometry.coordinates)}if(P>=f)return w=f-P,w?(M=n.default(g[L],g[L-1])-180,T=c.default(g[L],w,M,m),C.push(T.geometry.coordinates),i.lineString(C)):(C.push(g[L]),i.lineString(C));if(P>=h&&C.push(g[L]),L===g.length-1)return i.lineString(C);P+=o.default(g[L],g[L+1],m)}if(P<h&&g.length===E)throw new Error("Start position is beyond line");var R=g[g.length-1];return i.lineString([R,R])}return js$X.exports=_,js$X.exports.default=_,js$X.exports}var js$W={},js$V={},js$U={},hasRequiredJs$X;function requireJs$X(){if(hasRequiredJs$X)return js$U;hasRequiredJs$X=1,Object.defineProperty(js$U,"__esModule",{value:!0});var r=requireJs$1D();function e(i,s,n){n===void 0&&(n={});for(var o=r.getCoord(i),c=r.getCoords(s),_=0;_<c.length-1;_++){var l=!1;if(n.ignoreEndVertices&&(_===0&&(l="start"),_===c.length-2&&(l="end"),_===0&&_+1===c.length-1&&(l="both")),t(c[_],c[_+1],o,l,typeof n.epsilon>"u"?null:n.epsilon))return!0}return!1}function t(i,s,n,o,c){var _=n[0],l=n[1],h=i[0],f=i[1],m=s[0],g=s[1],C=n[0]-h,E=n[1]-f,P=m-h,w=g-f,M=C*w-E*P;if(c!==null){if(Math.abs(M)>c)return!1}else if(M!==0)return!1;if(o){if(o==="start")return Math.abs(P)>=Math.abs(w)?P>0?h<_&&_<=m:m<=_&&_<h:w>0?f<l&&l<=g:g<=l&&l<f;if(o==="end")return Math.abs(P)>=Math.abs(w)?P>0?h<=_&&_<m:m<_&&_<=h:w>0?f<=l&&l<g:g<l&&l<=f;if(o==="both")return Math.abs(P)>=Math.abs(w)?P>0?h<_&&_<m:m<_&&_<h:w>0?f<l&&l<g:g<l&&l<f}else return Math.abs(P)>=Math.abs(w)?P>0?h<=_&&_<=m:m<=_&&_<=h:w>0?f<=l&&l<=g:g<=l&&l<=f;return!1}return js$U.default=e,js$U}var hasRequiredJs$W;function requireJs$W(){if(hasRequiredJs$W)return js$V;hasRequiredJs$W=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(js$V,"__esModule",{value:!0});var e=r(requireJs$1E()),t=r(requireJs$X()),i=r(requireJs$1A()),s=requireJs$1D();function n(P,w){var M=s.getGeom(P),T=s.getGeom(w),L=M.type,R=T.type;switch(L){case"Point":switch(R){case"MultiPoint":return o(M,T);case"LineString":return t.default(M,T,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return i.default(M,T,{ignoreBoundary:!0});default:throw new Error("feature2 "+R+" geometry not supported")}case"MultiPoint":switch(R){case"MultiPoint":return c(M,T);case"LineString":return _(M,T);case"Polygon":case"MultiPolygon":return l(M,T);default:throw new Error("feature2 "+R+" geometry not supported")}case"LineString":switch(R){case"LineString":return h(M,T);case"Polygon":case"MultiPolygon":return f(M,T);default:throw new Error("feature2 "+R+" geometry not supported")}case"Polygon":switch(R){case"Polygon":case"MultiPolygon":return m(M,T);default:throw new Error("feature2 "+R+" geometry not supported")}default:throw new Error("feature1 "+L+" geometry not supported")}}function o(P,w){var M,T=!1;for(M=0;M<w.coordinates.length;M++)if(C(w.coordinates[M],P.coordinates)){T=!0;break}return T}function c(P,w){for(var M=0;M<P.coordinates.length;M++){for(var T=!1,L=0;L<w.coordinates.length;L++)C(P.coordinates[M],w.coordinates[L])&&(T=!0);if(!T)return!1}return!0}function _(P,w){for(var M=!1,T=0;T<P.coordinates.length;T++){if(!t.default(P.coordinates[T],w))return!1;M||(M=t.default(P.coordinates[T],w,{ignoreEndVertices:!0}))}return M}function l(P,w){for(var M=!0,T=!1,L=0;L<P.coordinates.length;L++){if(T=i.default(P.coordinates[1],w),!T){M=!1;break}T=i.default(P.coordinates[1],w,{ignoreBoundary:!0})}return M&&T}function h(P,w){for(var M=0;M<P.coordinates.length;M++)if(!t.default(P.coordinates[M],w))return!1;return!0}function f(P,w){var M=e.default(w),T=e.default(P);if(!g(M,T))return!1;for(var L=!1,R=0;R<P.coordinates.length-1;R++){if(!i.default(P.coordinates[R],w))return!1;if(L||(L=i.default(P.coordinates[R],w,{ignoreBoundary:!0})),!L){var D=E(P.coordinates[R],P.coordinates[R+1]);L=i.default(D,w,{ignoreBoundary:!0})}}return L}function m(P,w){var M=e.default(P),T=e.default(w);if(!g(T,M))return!1;for(var L=0;L<P.coordinates[0].length;L++)if(!i.default(P.coordinates[0][L],w))return!1;return!0}function g(P,w){return!(P[0]>w[0]||P[2]<w[2]||P[1]>w[1]||P[3]<w[3])}function C(P,w){return P[0]===w[0]&&P[1]===w[1]}function E(P,w){return[(P[0]+w[0])/2,(P[1]+w[1])/2]}return js$V.default=n,js$V}var hasRequiredJs$V;function requireJs$V(){if(hasRequiredJs$V)return js$W;hasRequiredJs$V=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(js$W,"__esModule",{value:!0});var e=r(requireJs$W()),t=r(requireJs$1y()),i=requireJs$1G();function s(n,o,c){c===void 0&&(c={}),c.mask&&!c.units&&(c.units="kilometers");for(var _=[],l=n[0],h=n[1],f=n[2],m=n[3],g=o/t.default([l,h],[f,h],c),C=g*(f-l),E=o/t.default([l,h],[l,m],c),P=E*(m-h),w=f-l,M=m-h,T=Math.floor(w/C),L=Math.floor(M/P),R=(w-T*C)/2,D=(M-L*P)/2,N=l+R;N<=f;){for(var k=h+D;k<=m;){var B=i.point([N,k],c.properties);c.mask?e.default(B,c.mask)&&_.push(B):_.push(B),k+=P}N+=C}return i.featureCollection(_)}return js$W.default=s,js$W}var js$T={},hasRequiredJs$U;function requireJs$U(){if(hasRequiredJs$U)return js$T;hasRequiredJs$U=1,Object.defineProperty(js$T,"__esModule",{value:!0});var r=requireJs$1F();function e(i,s){s===void 0&&(s={});var n=s.precision,o=s.coordinates,c=s.mutate;if(n=n==null||isNaN(n)?6:n,o=o==null||isNaN(o)?3:o,!i)throw new Error("<geojson> is required");if(typeof n!="number")throw new Error("<precision> must be a number");if(typeof o!="number")throw new Error("<coordinates> must be a number");(c===!1||c===void 0)&&(i=JSON.parse(JSON.stringify(i)));var _=Math.pow(10,n);return r.coordEach(i,function(l){t(l,_,o)}),i}function t(i,s,n){i.length>n&&i.splice(n,i.length);for(var o=0;o<i.length;o++)i[o]=Math.round(i[o]*s)/s;return i}return js$T.default=e,js$T}var js$S={exports:{}},hasRequiredJs$T;function requireJs$T(){if(hasRequiredJs$T)return js$S.exports;hasRequiredJs$T=1;var r=requireJs$1F(),e=requireJs$1G();function t(i){if(!i)throw new Error("geojson is required");var s=[];return r.flattenEach(i,function(n){s.push(n)}),e.featureCollection(s)}return js$S.exports=t,js$S.exports.default=t,js$S.exports}var js$R={exports:{}},hasRequiredJs$S;function requireJs$S(){if(hasRequiredJs$S)return js$R.exports;hasRequiredJs$S=1;var r=requireJs$_(),e=requireJs$Y(),t=requireJs$1F(),i=requireJs$1G();function s(l){return l&&typeof l=="object"&&"default"in l?l:{default:l}}var n=s(r),o=s(e);function c(l,h,f){if(f=f||{},!i.isObject(f))throw new Error("options is invalid");var m=f.units,g=f.reverse;if(!l)throw new Error("geojson is required");if(h<=0)throw new Error("segmentLength must be greater than 0");var C=[];return t.flattenEach(l,function(E){g&&(E.geometry.coordinates=E.geometry.coordinates.reverse()),_(E,h,m,function(P){C.push(P)})}),i.featureCollection(C)}function _(l,h,f,m){var g=n.default(l,{units:f});if(g<=h)return m(l);var C=g/h;Number.isInteger(C)||(C=Math.floor(C)+1);for(var E=0;E<C;E++){var P=o.default(l,h*E,h*(E+1),{units:f});m(P,E)}}return js$R.exports=c,js$R.exports.default=c,js$R.exports}var js$Q={exports:{}},rbush={exports:{}},quickselect={exports:{}},hasRequiredQuickselect;function requireQuickselect(){return hasRequiredQuickselect||(hasRequiredQuickselect=1,function(r,e){(function(t,i){r.exports=i()})(commonjsGlobal,function(){function t(o,c,_,l,h){i(o,c,_||0,l||o.length-1,h||n)}function i(o,c,_,l,h){for(;l>_;){if(l-_>600){var f=l-_+1,m=c-_+1,g=Math.log(f),C=.5*Math.exp(2*g/3),E=.5*Math.sqrt(g*C*(f-C)/f)*(m-f/2<0?-1:1),P=Math.max(_,Math.floor(c-m*C/f+E)),w=Math.min(l,Math.floor(c+(f-m)*C/f+E));i(o,c,P,w,h)}var M=o[c],T=_,L=l;for(s(o,_,c),h(o[l],M)>0&&s(o,_,l);T<L;){for(s(o,T,L),T++,L--;h(o[T],M)<0;)T++;for(;h(o[L],M)>0;)L--}h(o[_],M)===0?s(o,_,L):(L++,s(o,L,l)),L<=c&&(_=L+1),c<=L&&(l=L-1)}}function s(o,c,_){var l=o[c];o[c]=o[_],o[_]=l}function n(o,c){return o<c?-1:o>c?1:0}return t})}(quickselect)),quickselect.exports}var hasRequiredRbush;function requireRbush(){if(hasRequiredRbush)return rbush.exports;hasRequiredRbush=1,rbush.exports=e,rbush.exports.default=e;var r=requireQuickselect();function e(P,w){if(!(this instanceof e))return new e(P,w);this._maxEntries=Math.max(4,P||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),w&&this._initFormat(w),this.clear()}e.prototype={all:function(){return this._all(this.data,[])},search:function(P){var w=this.data,M=[],T=this.toBBox;if(!g(P,w))return M;for(var L=[],R,D,N,k;w;){for(R=0,D=w.children.length;R<D;R++)N=w.children[R],k=w.leaf?T(N):N,g(P,k)&&(w.leaf?M.push(N):m(P,k)?this._all(N,M):L.push(N));w=L.pop()}return M},collides:function(P){var w=this.data,M=this.toBBox;if(!g(P,w))return!1;for(var T=[],L,R,D,N;w;){for(L=0,R=w.children.length;L<R;L++)if(D=w.children[L],N=w.leaf?M(D):D,g(P,N)){if(w.leaf||m(P,N))return!0;T.push(D)}w=T.pop()}return!1},load:function(P){if(!(P&&P.length))return this;if(P.length<this._minEntries){for(var w=0,M=P.length;w<M;w++)this.insert(P[w]);return this}var T=this._build(P.slice(),0,P.length-1,0);if(!this.data.children.length)this.data=T;else if(this.data.height===T.height)this._splitRoot(this.data,T);else{if(this.data.height<T.height){var L=this.data;this.data=T,T=L}this._insert(T,this.data.height-T.height-1,!0)}return this},insert:function(P){return P&&this._insert(P,this.data.height-1),this},clear:function(){return this.data=C([]),this},remove:function(P,w){if(!P)return this;for(var M=this.data,T=this.toBBox(P),L=[],R=[],D,N,k,B;M||L.length;){if(M||(M=L.pop(),N=L[L.length-1],D=R.pop(),B=!0),M.leaf&&(k=t(P,M.children,w),k!==-1))return M.children.splice(k,1),L.push(M),this._condense(L),this;!B&&!M.leaf&&m(M,T)?(L.push(M),R.push(D),D=0,N=M,M=M.children[0]):N?(D++,M=N.children[D],B=!1):M=null}return this},toBBox:function(P){return P},compareMinX:o,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(P){return this.data=P,this},_all:function(P,w){for(var M=[];P;)P.leaf?w.push.apply(w,P.children):M.push.apply(M,P.children),P=M.pop();return w},_build:function(P,w,M,T){var L=M-w+1,R=this._maxEntries,D;if(L<=R)return D=C(P.slice(w,M+1)),i(D,this.toBBox),D;T||(T=Math.ceil(Math.log(L)/Math.log(R)),R=Math.ceil(L/Math.pow(R,T-1))),D=C([]),D.leaf=!1,D.height=T;var N=Math.ceil(L/R),k=N*Math.ceil(Math.sqrt(R)),B,$,H,W;for(E(P,w,M,k,this.compareMinX),B=w;B<=M;B+=k)for(H=Math.min(B+k-1,M),E(P,B,H,N,this.compareMinY),$=B;$<=H;$+=N)W=Math.min($+N-1,H),D.children.push(this._build(P,$,W,T-1));return i(D,this.toBBox),D},_chooseSubtree:function(P,w,M,T){for(var L,R,D,N,k,B,$,H;T.push(w),!(w.leaf||T.length-1===M);){for($=H=1/0,L=0,R=w.children.length;L<R;L++)D=w.children[L],k=_(D),B=h(P,D)-k,B<H?(H=B,$=k<$?k:$,N=D):B===H&&k<$&&($=k,N=D);w=N||w.children[0]}return w},_insert:function(P,w,M){var T=this.toBBox,L=M?P:T(P),R=[],D=this._chooseSubtree(L,this.data,w,R);for(D.children.push(P),n(D,L);w>=0&&R[w].children.length>this._maxEntries;)this._split(R,w),w--;this._adjustParentBBoxes(L,R,w)},_split:function(P,w){var M=P[w],T=M.children.length,L=this._minEntries;this._chooseSplitAxis(M,L,T);var R=this._chooseSplitIndex(M,L,T),D=C(M.children.splice(R,M.children.length-R));D.height=M.height,D.leaf=M.leaf,i(M,this.toBBox),i(D,this.toBBox),w?P[w-1].children.push(D):this._splitRoot(M,D)},_splitRoot:function(P,w){this.data=C([P,w]),this.data.height=P.height+1,this.data.leaf=!1,i(this.data,this.toBBox)},_chooseSplitIndex:function(P,w,M){var T,L,R,D,N,k,B,$;for(k=B=1/0,T=w;T<=M-w;T++)L=s(P,0,T,this.toBBox),R=s(P,T,M,this.toBBox),D=f(L,R),N=_(L)+_(R),D<k?(k=D,$=T,B=N<B?N:B):D===k&&N<B&&(B=N,$=T);return $},_chooseSplitAxis:function(P,w,M){var T=P.leaf?this.compareMinX:o,L=P.leaf?this.compareMinY:c,R=this._allDistMargin(P,w,M,T),D=this._allDistMargin(P,w,M,L);R<D&&P.children.sort(T)},_allDistMargin:function(P,w,M,T){P.children.sort(T);var L=this.toBBox,R=s(P,0,w,L),D=s(P,M-w,M,L),N=l(R)+l(D),k,B;for(k=w;k<M-w;k++)B=P.children[k],n(R,P.leaf?L(B):B),N+=l(R);for(k=M-w-1;k>=w;k--)B=P.children[k],n(D,P.leaf?L(B):B),N+=l(D);return N},_adjustParentBBoxes:function(P,w,M){for(var T=M;T>=0;T--)n(w[T],P)},_condense:function(P){for(var w=P.length-1,M;w>=0;w--)P[w].children.length===0?w>0?(M=P[w-1].children,M.splice(M.indexOf(P[w]),1)):this.clear():i(P[w],this.toBBox)},_initFormat:function(P){var w=["return a"," - b",";"];this.compareMinX=new Function("a","b",w.join(P[0])),this.compareMinY=new Function("a","b",w.join(P[1])),this.toBBox=new Function("a","return {minX: a"+P[0]+", minY: a"+P[1]+", maxX: a"+P[2]+", maxY: a"+P[3]+"};")}};function t(P,w,M){if(!M)return w.indexOf(P);for(var T=0;T<w.length;T++)if(M(P,w[T]))return T;return-1}function i(P,w){s(P,0,P.children.length,w,P)}function s(P,w,M,T,L){L||(L=C(null)),L.minX=1/0,L.minY=1/0,L.maxX=-1/0,L.maxY=-1/0;for(var R=w,D;R<M;R++)D=P.children[R],n(L,P.leaf?T(D):D);return L}function n(P,w){return P.minX=Math.min(P.minX,w.minX),P.minY=Math.min(P.minY,w.minY),P.maxX=Math.max(P.maxX,w.maxX),P.maxY=Math.max(P.maxY,w.maxY),P}function o(P,w){return P.minX-w.minX}function c(P,w){return P.minY-w.minY}function _(P){return(P.maxX-P.minX)*(P.maxY-P.minY)}function l(P){return P.maxX-P.minX+(P.maxY-P.minY)}function h(P,w){return(Math.max(w.maxX,P.maxX)-Math.min(w.minX,P.minX))*(Math.max(w.maxY,P.maxY)-Math.min(w.minY,P.minY))}function f(P,w){var M=Math.max(P.minX,w.minX),T=Math.max(P.minY,w.minY),L=Math.min(P.maxX,w.maxX),R=Math.min(P.maxY,w.maxY);return Math.max(0,L-M)*Math.max(0,R-T)}function m(P,w){return P.minX<=w.minX&&P.minY<=w.minY&&w.maxX<=P.maxX&&w.maxY<=P.maxY}function g(P,w){return w.minX<=P.maxX&&w.minY<=P.maxY&&w.maxX>=P.minX&&w.maxY>=P.minY}function C(P){return{children:P,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function E(P,w,M,T,L){for(var R=[w,M],D;R.length;)M=R.pop(),w=R.pop(),!(M-w<=T)&&(D=w+Math.ceil((M-w)/T/2)*T,r(P,D,w,M,L),R.push(w,D,D,M))}return rbush.exports}var hasRequiredJs$R;function requireJs$R(){if(hasRequiredJs$R)return js$Q.exports;hasRequiredJs$R=1;var r=requireJs$1F(),e=requireJs$1G(),t=requireRbush(),i=requireJs$10(),s=requireJs$1A();function n(R){return R&&typeof R=="object"&&"default"in R?R:{default:R}}var o=n(t),c=n(i),_=n(s);function l(R,D,N){if(R.geometry.type!=="Polygon")throw new Error("The input feature must be a Polygon");N===void 0&&(N=1);var k=R.geometry.coordinates,B=[],$={};if(N){for(var H=[],W=0;W<k.length;W++)for(var J=0;J<k[W].length-1;J++)H.push(de(W,J));var z=o.default();z.load(H)}for(var fe=0;fe<k.length;fe++)for(var q=0;q<k[fe].length-1;q++)if(N){var te=z.search(de(fe,q));te.forEach(function(X){var he=X.ring,Se=X.edge;oe(fe,q,he,Se)})}else for(var ie=0;ie<k.length;ie++)for(var xe=0;xe<k[ie].length-1;xe++)oe(fe,q,ie,xe);return D||(B={type:"Feature",geometry:{type:"MultiPoint",coordinates:B}}),B;function oe(X,he,Se,Te){var Re=k[X][he],Be=k[X][he+1],ze=k[Se][Te],Ve=k[Se][Te+1],ye=h(Re,Be,ze,Ve);if(ye!==null){var Fe,Ce;if(Be[0]!==Re[0]?Fe=(ye[0]-Re[0])/(Be[0]-Re[0]):Fe=(ye[1]-Re[1])/(Be[1]-Re[1]),Ve[0]!==ze[0]?Ce=(ye[0]-ze[0])/(Ve[0]-ze[0]):Ce=(ye[1]-ze[1])/(Ve[1]-ze[1]),!(Fe>=1||Fe<=0||Ce>=1||Ce<=0)){var Q=ye,me=!$[Q];me&&($[Q]=!0),D?B.push(D(ye,X,he,Re,Be,Fe,Se,Te,ze,Ve,Ce,me)):B.push(ye)}}}function de(X,he){var Se=k[X][he],Te=k[X][he+1],Re,Be,ze,Ve;return Se[0]<Te[0]?(Re=Se[0],Be=Te[0]):(Re=Te[0],Be=Se[0]),Se[1]<Te[1]?(ze=Se[1],Ve=Te[1]):(ze=Te[1],Ve=Se[1]),{minX:Re,minY:ze,maxX:Be,maxY:Ve,ring:X,edge:he}}}function h(R,D,N,k){if(f(R,N)||f(R,k)||f(D,N)||f(k,N))return null;var B=R[0],$=R[1],H=D[0],W=D[1],J=N[0],z=N[1],fe=k[0],q=k[1],te=(B-H)*(z-q)-($-W)*(J-fe);if(te===0)return null;var ie=((B*W-$*H)*(J-fe)-(B-H)*(J*q-z*fe))/te,xe=((B*W-$*H)*(z-q)-($-W)*(J*q-z*fe))/te;return[ie,xe]}function f(R,D){if(!R||!D||R.length!==D.length)return!1;for(var N=0,k=R.length;N<k;N++)if(R[N]instanceof Array&&D[N]instanceof Array){if(!f(R[N],D[N]))return!1}else if(R[N]!==D[N])return!1;return!0}function m(R){if(R.type!="Feature")throw new Error("The input must a geojson object of type Feature");if(R.geometry===void 0||R.geometry==null)throw new Error("The input must a geojson object with a non-empty geometry");if(R.geometry.type!="Polygon")throw new Error("The input must be a geojson Polygon");for(var D=R.geometry.coordinates.length,N=[],he=0;he<D;he++){var k=R.geometry.coordinates[he];w(k[0],k[k.length-1])||k.push(k[0]),N.push.apply(N,k.slice(0,k.length-1))}if(!T(N))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var B=N.length,$=l(R,function(be,Ae,Pe,Je,Ue,qe,ct,vt,Mt,pt,Lt,At){return[be,Ae,Pe,Je,Ue,qe,ct,vt,Mt,pt,Lt,At]}),H=$.length;if(H==0){for(var ze=[],he=0;he<D;he++)ze.push(e.polygon([R.geometry.coordinates[he]],{parent:-1,winding:P(R.geometry.coordinates[he])}));var Y=e.featureCollection(ze);return j(),U(),Y}for(var W=[],J=[],he=0;he<D;he++){W.push([]);for(var z=0;z<R.geometry.coordinates[he].length-1;z++)W[he].push([new g(R.geometry.coordinates[he][M(z+1,R.geometry.coordinates[he].length-1)],1,[he,z],[he,M(z+1,R.geometry.coordinates[he].length-1)],void 0)]),J.push(new C(R.geometry.coordinates[he][z],[he,M(z-1,R.geometry.coordinates[he].length-1)],[he,z],void 0,void 0,!1,!0))}for(var he=0;he<H;he++)W[$[he][1]][$[he][2]].push(new g($[he][0],$[he][5],[$[he][1],$[he][2]],[$[he][6],$[he][7]],void 0)),$[he][11]&&J.push(new C($[he][0],[$[he][1],$[he][2]],[$[he][6],$[he][7]],void 0,void 0,!0,!0));for(var fe=J.length,he=0;he<W.length;he++)for(var z=0;z<W[he].length;z++)W[he][z].sort(function(Ae,Pe){return Ae.param<Pe.param?-1:1});for(var q=[],he=0;he<fe;he++)q.push({minX:J[he].coord[0],minY:J[he].coord[1],maxX:J[he].coord[0],maxY:J[he].coord[1],index:he});var te=o.default();te.load(q);for(var he=0;he<W.length;he++)for(var z=0;z<W[he].length;z++)for(var ie=0;ie<W[he][z].length;ie++){var xe;ie==W[he][z].length-1?xe=W[he][M(z+1,R.geometry.coordinates[he].length-1)][0].coord:xe=W[he][z][ie+1].coord;var oe=te.search({minX:xe[0],minY:xe[1],maxX:xe[0],maxY:xe[1]})[0];W[he][z][ie].nxtIsectAlongEdgeIn=oe.index}for(var he=0;he<W.length;he++)for(var z=0;z<W[he].length;z++)for(var ie=0;ie<W[he][z].length;ie++){var xe=W[he][z][ie].coord,oe=te.search({minX:xe[0],minY:xe[1],maxX:xe[0],maxY:xe[1]})[0],de=oe.index;de<B?J[de].nxtIsectAlongRingAndEdge2=W[he][z][ie].nxtIsectAlongEdgeIn:w(J[de].ringAndEdge1,W[he][z][ie].ringAndEdgeIn)?J[de].nxtIsectAlongRingAndEdge1=W[he][z][ie].nxtIsectAlongEdgeIn:J[de].nxtIsectAlongRingAndEdge2=W[he][z][ie].nxtIsectAlongEdgeIn}for(var X=[],he=0,z=0;z<D;z++){for(var Se=he,ie=0;ie<R.geometry.coordinates[z].length-1;ie++)J[he].coord[0]<J[Se].coord[0]&&(Se=he),he++;for(var Te=J[Se].nxtIsectAlongRingAndEdge2,ie=0;ie<J.length;ie++)if(J[ie].nxtIsectAlongRingAndEdge1==Se||J[ie].nxtIsectAlongRingAndEdge2==Se){var Re=ie;break}var Be=E([J[Re].coord,J[Se].coord,J[Te].coord],!0)?1:-1;X.push({isect:Se,parent:-1,winding:Be})}X.sort(function(ce,be){return J[ce.isect].coord>J[be.isect].coord?-1:1});for(var ze=[];X.length>0;){var Ve=X.pop(),ye=Ve.isect,Fe=Ve.parent,Ce=Ve.winding,Q=ze.length,me=[J[ye].coord],Ie=ye;if(J[ye].ringAndEdge1Walkable)var De=J[ye].ringAndEdge1,Ee=J[ye].nxtIsectAlongRingAndEdge1;else var De=J[ye].ringAndEdge2,Ee=J[ye].nxtIsectAlongRingAndEdge2;for(;!w(J[ye].coord,J[Ee].coord);){me.push(J[Ee].coord);for(var Oe=void 0,he=0;he<X.length;he++)if(X[he].isect==Ee){Oe=he;break}if(Oe!=null&&X.splice(Oe,1),w(De,J[Ee].ringAndEdge1)){if(De=J[Ee].ringAndEdge2,J[Ee].ringAndEdge2Walkable=!1,J[Ee].ringAndEdge1Walkable){var le={isect:Ee};E([J[Ie].coord,J[Ee].coord,J[J[Ee].nxtIsectAlongRingAndEdge2].coord],Ce==1)?(le.parent=Fe,le.winding=-Ce):(le.parent=Q,le.winding=Ce),X.push(le)}Ie=Ee,Ee=J[Ee].nxtIsectAlongRingAndEdge2}else{if(De=J[Ee].ringAndEdge1,J[Ee].ringAndEdge1Walkable=!1,J[Ee].ringAndEdge2Walkable){var le={isect:Ee};E([J[Ie].coord,J[Ee].coord,J[J[Ee].nxtIsectAlongRingAndEdge1].coord],Ce==1)?(le.parent=Fe,le.winding=-Ce):(le.parent=Q,le.winding=Ce),X.push(le)}Ie=Ee,Ee=J[Ee].nxtIsectAlongRingAndEdge1}}me.push(J[Ee].coord),ze.push(e.polygon([me],{index:Q,parent:Fe,winding:Ce,netWinding:void 0}))}var Y=e.featureCollection(ze);j(),U();function j(){for(var ce=[],be=0;be<Y.features.length;be++)Y.features[be].properties.parent==-1&&ce.push(be);if(ce.length>1)for(var be=0;be<ce.length;be++){for(var Ae=-1,Pe=1/0,Je=0;Je<Y.features.length;Je++)ce[be]!=Je&&_.default(Y.features[ce[be]].geometry.coordinates[0][0],Y.features[Je],{ignoreBoundary:!0})&&c.default(Y.features[Je])<Pe&&(Ae=Je);Y.features[ce[be]].properties.parent=Ae}}function U(){for(var ce=0;ce<Y.features.length;ce++)if(Y.features[ce].properties.parent==-1){var be=Y.features[ce].properties.winding;Y.features[ce].properties.netWinding=be,re(ce,be)}}function re(ce,be){for(var Ae=0;Ae<Y.features.length;Ae++)if(Y.features[Ae].properties.parent==ce){var Pe=be+Y.features[Ae].properties.winding;Y.features[Ae].properties.netWinding=Pe,re(Ae,Pe)}}return Y}var g=function(R,D,N,k,B){this.coord=R,this.param=D,this.ringAndEdgeIn=N,this.ringAndEdgeOut=k,this.nxtIsectAlongEdgeIn=B},C=function(R,D,N,k,B,$,H){this.coord=R,this.ringAndEdge1=D,this.ringAndEdge2=N,this.nxtIsectAlongRingAndEdge1=k,this.nxtIsectAlongRingAndEdge2=B,this.ringAndEdge1Walkable=$,this.ringAndEdge2Walkable=H};function E(R,D){if(typeof D>"u"&&(D=!0),R.length!=3)throw new Error("This function requires an array of three points [x,y]");var N=(R[1][0]-R[0][0])*(R[2][1]-R[0][1])-(R[1][1]-R[0][1])*(R[2][0]-R[0][0]);return N>=0==D}function P(R){for(var D=0,N=0;N<R.length-1;N++)R[N][0]<R[D][0]&&(D=N);if(E([R[M(D-1,R.length-1)],R[D],R[M(D+1,R.length-1)]],!0))var k=1;else var k=-1;return k}function w(R,D){if(!R||!D||R.length!=D.length)return!1;for(var N=0,k=R.length;N<k;N++)if(R[N]instanceof Array&&D[N]instanceof Array){if(!w(R[N],D[N]))return!1}else if(R[N]!=D[N])return!1;return!0}function M(R,D){return(R%D+D)%D}function T(R){for(var D={},N=1,k=0,B=R.length;k<B;++k){if(Object.prototype.hasOwnProperty.call(D,R[k])){N=0;break}D[R[k]]=1}return N}function L(R){var D=[];return r.flattenEach(R,function(N){N.geometry.type==="Polygon"&&r.featureEach(m(N),function(k){D.push(e.polygon(k.geometry.coordinates,N.properties))})}),e.featureCollection(D)}return js$Q.exports=L,js$Q.exports.default=L,js$Q.exports}var js$P={exports:{}},hasRequiredJs$Q;function requireJs$Q(){if(hasRequiredJs$Q)return js$P.exports;hasRequiredJs$Q=1;var r=requireJs$1D(),e=Math.PI/180,t=180/Math.PI,i=function(_,l){this.lon=_,this.lat=l,this.x=e*_,this.y=e*l};i.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},i.prototype.antipode=function(){var _=-1*this.lat,l=this.lon<0?180+this.lon:(180-this.lon)*-1;return new i(l,_)};var s=function(){this.coords=[],this.length=0};s.prototype.move_to=function(_){this.length++,this.coords.push(_)};var n=function(_){this.properties=_||{},this.geometries=[]};n.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(this.geometries.length===1)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var _=[],l=0;l<this.geometries.length;l++)_.push(this.geometries[l].coords);return{geometry:{type:"MultiLineString",coordinates:_},type:"Feature",properties:this.properties}},n.prototype.wkt=function(){for(var _="",l="LINESTRING(",h=function(g){l+=g[0]+" "+g[1]+","},f=0;f<this.geometries.length;f++){if(this.geometries[f].coords.length===0)return"LINESTRING(empty)";var m=this.geometries[f].coords;m.forEach(h),_+=l.substring(0,l.length-1)+")"}return _};var o=function(_,l,h){if(!_||_.x===void 0||_.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!l||l.x===void 0||l.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new i(_.x,_.y),this.end=new i(l.x,l.y),this.properties=h||{};var f=this.start.x-this.end.x,m=this.start.y-this.end.y,g=Math.pow(Math.sin(m/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(f/2),2);if(this.g=2*Math.asin(Math.sqrt(g)),this.g===Math.PI)throw new Error("it appears "+_.view()+" and "+l.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+_+" and "+l)};o.prototype.interpolate=function(_){var l=Math.sin((1-_)*this.g)/Math.sin(this.g),h=Math.sin(_*this.g)/Math.sin(this.g),f=l*Math.cos(this.start.y)*Math.cos(this.start.x)+h*Math.cos(this.end.y)*Math.cos(this.end.x),m=l*Math.cos(this.start.y)*Math.sin(this.start.x)+h*Math.cos(this.end.y)*Math.sin(this.end.x),g=l*Math.sin(this.start.y)+h*Math.sin(this.end.y),C=t*Math.atan2(g,Math.sqrt(Math.pow(f,2)+Math.pow(m,2))),E=t*Math.atan2(m,f);return[E,C]},o.prototype.Arc=function(_,l){var h=[];if(!_||_<=2)h.push([this.start.lon,this.start.lat]),h.push([this.end.lon,this.end.lat]);else for(var f=1/(_-1),m=0;m<_;++m){var g=f*m,C=this.interpolate(g);h.push(C)}for(var E=!1,P=0,w=l&&l.offset?l.offset:10,M=180-w,T=-180+w,L=360-w,R=1;R<h.length;++R){var D=h[R-1][0],N=h[R][0],k=Math.abs(N-D);k>L&&(N>M&&D<T||D>M&&N<T)?E=!0:k>P&&(P=k)}var B=[];if(E&&P<w){var $=[];B.push($);for(var H=0;H<h.length;++H){var W=parseFloat(h[H][0]);if(H>0&&Math.abs(W-h[H-1][0])>L){var J=parseFloat(h[H-1][0]),z=parseFloat(h[H-1][1]),fe=parseFloat(h[H][0]),q=parseFloat(h[H][1]);if(J>-180&&J<T&&fe===180&&H+1<h.length&&h[H-1][0]>-180&&h[H-1][0]<T){$.push([-180,h[H][1]]),H++,$.push([h[H][0],h[H][1]]);continue}else if(J>M&&J<180&&fe===-180&&H+1<h.length&&h[H-1][0]>M&&h[H-1][0]<180){$.push([180,h[H][1]]),H++,$.push([h[H][0],h[H][1]]);continue}if(J<T&&fe>M){var te=J;J=fe,fe=te;var ie=z;z=q,q=ie}if(J>M&&fe<T&&(fe+=360),J<=180&&fe>=180&&J<fe){var xe=(180-J)/(fe-J),oe=xe*q+(1-xe)*z;$.push([h[H-1][0]>M?180:-180,oe]),$=[],$.push([h[H-1][0]>M?-180:180,oe]),B.push($)}else $=[],B.push($);$.push([W,h[H][1]])}else $.push([h[H][0],h[H][1]])}}else{var de=[];B.push(de);for(var X=0;X<h.length;++X)de.push([h[X][0],h[X][1]])}for(var he=new n(this.properties),Se=0;Se<B.length;++Se){var Te=new s;he.geometries.push(Te);for(var Re=B[Se],Be=0;Be<Re.length;++Be)Te.move_to(Re[Be])}return he};function c(_,l,h){if(h=h||{},typeof h!="object")throw new Error("options is invalid");var f=h.properties,m=h.npoints,g=h.offset;_=r.getCoord(_),l=r.getCoord(l),f=f||{},m=m||100,g=g||10;var C=new o({x:_[0],y:_[1]},{x:l[0],y:l[1]},f),E=C.Arc(m,{offset:g});return E.json()}return js$P.exports=c,js$P.exports.default=c,js$P.exports}var js$O={exports:{}},hasRequiredJs$P;function requireJs$P(){if(hasRequiredJs$P)return js$O.exports;hasRequiredJs$P=1;var r=requireGeojsonRbush(),e=requireJs$1l(),t=requireJs$1E(),i=requireJs$U(),s=requireJs$19(),n=requireJs$18(),o=requireJs$17(),c=requireJs$1D(),_=requireJs$1F(),l=requireJs$1G();function h(N){return N&&typeof N=="object"&&"default"in N?N:{default:N}}var f=h(r),m=h(e),g=h(t),C=h(i),E=h(s),P=h(n),w=h(o);function M(N,k){if(!N)throw new Error("line is required");if(!k)throw new Error("splitter is required");var B=c.getType(N),$=c.getType(k);if(B!=="LineString")throw new Error("line must be LineString");if($==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if($==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var H=C.default(k,{precision:7});switch($){case"Point":return L(N,H);case"MultiPoint":return T(N,H);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return T(N,P.default(N,H))}}function T(N,k){var B=[],$=f.default();return _.flattenEach(k,function(H){if(B.forEach(function(z,fe){z.id=fe}),!B.length)B=L(N,H).features,B.forEach(function(z){z.bbox||(z.bbox=m.default(g.default(z)))}),$.load(l.featureCollection(B));else{var W=$.search(H);if(W.features.length){var J=R(H,W);B=B.filter(function(z){return z.id!==J.id}),$.remove(J),_.featureEach(L(J,H),function(z){B.push(z),$.insert(z)})}}}),l.featureCollection(B)}function L(N,k){var B=[],$=c.getCoords(N)[0],H=c.getCoords(N)[N.geometry.coordinates.length-1];if(D($,c.getCoord(k))||D(H,c.getCoord(k)))return l.featureCollection([N]);var W=f.default(),J=E.default(N);W.load(J);var z=W.search(k);if(!z.features.length)return l.featureCollection([N]);var fe=R(k,z),q=[$],te=_.featureReduce(J,function(ie,xe,oe){var de=c.getCoords(xe)[1],X=c.getCoord(k);return oe===fe.id?(ie.push(X),B.push(l.lineString(ie)),D(X,de)?[X]:[X,de]):(ie.push(de),ie)},q);return te.length>1&&B.push(l.lineString(te)),l.featureCollection(B)}function R(N,k){if(!k.features.length)throw new Error("lines must contain features");if(k.features.length===1)return k.features[0];var B,$=1/0;return _.featureEach(k,function(H){var W=w.default(H,N),J=W.properties.dist;J<$&&(B=H,$=J)}),B}function D(N,k){return N[0]===k[0]&&N[1]===k[1]}return js$O.exports=M,js$O.exports.default=M,js$O.exports}var js$N={},hasRequiredJs$O;function requireJs$O(){if(hasRequiredJs$O)return js$N;hasRequiredJs$O=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(js$N,"__esModule",{value:!0});var e=r(requireJs$1j()),t=r(requireJs$1k()),i=requireJs$1G();function s(o,c,_,l,h){h===void 0&&(h={});var f=h.steps||64,m=n(_),g=n(l),C=!Array.isArray(o)&&o.type==="Feature"?o.properties:{};if(m===g)return i.lineString(e.default(o,c,h).geometry.coordinates[0],C);for(var E=m,P=m<g?g:g+360,w=E,M=[],T=0;w<P;)M.push(t.default(o,c,w,h).geometry.coordinates),T++,w=E+T*360/f;return w>P&&M.push(t.default(o,c,P,h).geometry.coordinates),i.lineString(M,C)}js$N.default=s;function n(o){var c=o%360;return c<0&&(c+=360),c}return js$N}var js$M={},hasRequiredJs$N;function requireJs$N(){if(hasRequiredJs$N)return js$M;hasRequiredJs$N=1,Object.defineProperty(js$M,"__esModule",{value:!0});var r=requireJs$1G(),e=requireJs$1D();function t(o,c){c===void 0&&(c={});var _=e.getGeom(o);switch(!c.properties&&o.type==="Feature"&&(c.properties=o.properties),_.type){case"Polygon":return i(_,c);case"MultiPolygon":return s(_,c);default:throw new Error("invalid poly")}}js$M.default=t;function i(o,c){c===void 0&&(c={});var _=e.getGeom(o),l=_.coordinates,h=c.properties?c.properties:o.type==="Feature"?o.properties:{};return n(l,h)}js$M.polygonToLine=i;function s(o,c){c===void 0&&(c={});var _=e.getGeom(o),l=_.coordinates,h=c.properties?c.properties:o.type==="Feature"?o.properties:{},f=[];return l.forEach(function(m){f.push(n(m,h))}),r.featureCollection(f)}js$M.multiPolygonToLine=s;function n(o,c){return o.length>1?r.multiLineString(o,c):r.lineString(o[0],c)}return js$M.coordsToLine=n,js$M}var js$L={},hasRequiredJs$M;function requireJs$M(){if(hasRequiredJs$M)return js$L;hasRequiredJs$M=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(js$L,"__esModule",{value:!0});var e=r(requireJs$1E()),t=requireJs$1D(),i=requireJs$1G(),s=r(requireJs$1w());function n(l,h){h===void 0&&(h={});var f,m,g,C=h.properties,E=(f=h.autoComplete)!==null&&f!==void 0?f:!0,P=(m=h.orderCoords)!==null&&m!==void 0?m:!0,w=(g=h.mutate)!==null&&g!==void 0?g:!1;switch(w||(l=s.default(l)),l.type){case"FeatureCollection":var M=[];return l.features.forEach(function(T){M.push(t.getCoords(o(T,{},E,P)))}),i.multiPolygon(M,C);default:return o(l,C,E,P)}}function o(l,h,f,m){h=h||(l.type==="Feature"?l.properties:{});var g=t.getGeom(l),C=g.coordinates,E=g.type;if(!C.length)throw new Error("line must contain coordinates");switch(E){case"LineString":return f&&(C=c(C)),i.polygon([C],h);case"MultiLineString":var P=[],w=0;return C.forEach(function(M){if(f&&(M=c(M)),m){var T=_(e.default(i.lineString(M)));T>w?(P.unshift(M),w=T):P.push(M)}else P.push(M)}),i.polygon(P,h);default:throw new Error("geometry type "+E+" is not supported")}}function c(l){var h=l[0],f=h[0],m=h[1],g=l[l.length-1],C=g[0],E=g[1];return(f!==C||m!==E)&&l.push(h),l}function _(l){var h=l[0],f=l[1],m=l[2],g=l[3];return Math.abs(h-m)*Math.abs(f-g)}return js$L.default=n,js$L}var js$K={},lineclip={},hasRequiredLineclip;function requireLineclip(){if(hasRequiredLineclip)return lineclip;hasRequiredLineclip=1,Object.defineProperty(lineclip,"__esModule",{value:!0});function r(s,n,o){var c=s.length,_=i(s[0],n),l=[],h,f,m,g,C;for(o||(o=[]),h=1;h<c;h++){for(g=s[h-1],C=s[h],f=m=i(C,n);;)if(_|f){if(_&f)break;_?(g=t(g,C,_,n),_=i(g,n)):(C=t(g,C,f,n),f=i(C,n))}else{l.push(g),f!==m?(l.push(C),h<c-1&&(o.push(l),l=[])):h===c-1&&l.push(C);break}_=m}return l.length&&o.push(l),o}lineclip.lineclip=r;function e(s,n){var o,c,_,l,h,f,m;for(c=1;c<=8;c*=2){for(o=[],_=s[s.length-1],l=!(i(_,n)&c),h=0;h<s.length;h++)f=s[h],m=!(i(f,n)&c),m!==l&&o.push(t(_,f,c,n)),m&&o.push(f),_=f,l=m;if(s=o,!s.length)break}return o}lineclip.polygonclip=e;function t(s,n,o,c){return o&8?[s[0]+(n[0]-s[0])*(c[3]-s[1])/(n[1]-s[1]),c[3]]:o&4?[s[0]+(n[0]-s[0])*(c[1]-s[1])/(n[1]-s[1]),c[1]]:o&2?[c[2],s[1]+(n[1]-s[1])*(c[2]-s[0])/(n[0]-s[0])]:o&1?[c[0],s[1]+(n[1]-s[1])*(c[0]-s[0])/(n[0]-s[0])]:null}function i(s,n){var o=0;return s[0]<n[0]?o|=1:s[0]>n[2]&&(o|=2),s[1]<n[1]?o|=4:s[1]>n[3]&&(o|=8),o}return lineclip}var hasRequiredJs$L;function requireJs$L(){if(hasRequiredJs$L)return js$K;hasRequiredJs$L=1,Object.defineProperty(js$K,"__esModule",{value:!0});var r=requireJs$1G(),e=requireJs$1D(),t=requireLineclip();function i(n,o){var c=e.getGeom(n),_=c.type,l=n.type==="Feature"?n.properties:{},h=c.coordinates;switch(_){case"LineString":case"MultiLineString":{var f=[];return _==="LineString"&&(h=[h]),h.forEach(function(m){t.lineclip(m,o,f)}),f.length===1?r.lineString(f[0],l):r.multiLineString(f,l)}case"Polygon":return r.polygon(s(h,o),l);case"MultiPolygon":return r.multiPolygon(h.map(function(m){return s(m,o)}),l);default:throw new Error("geometry "+_+" not supported")}}js$K.default=i;function s(n,o){for(var c=[],_=0,l=n;_<l.length;_++){var h=l[_],f=t.polygonclip(h,o);f.length>0&&((f[0][0]!==f[f.length-1][0]||f[0][1]!==f[f.length-1][1])&&f.push(f[0]),f.length>=4&&c.push(f))}return c}return js$K}var js$J={},isArguments$1,hasRequiredIsArguments$1;function requireIsArguments$1(){if(hasRequiredIsArguments$1)return isArguments$1;hasRequiredIsArguments$1=1;var r=Object.prototype.toString;return isArguments$1=function(t){var i=r.call(t),s=i==="[object Arguments]";return s||(s=i!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&r.call(t.callee)==="[object Function]"),s},isArguments$1}var implementation$3,hasRequiredImplementation$3;function requireImplementation$3(){if(hasRequiredImplementation$3)return implementation$3;hasRequiredImplementation$3=1;var r;if(!Object.keys){var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,i=requireIsArguments$1(),s=Object.prototype.propertyIsEnumerable,n=!s.call({toString:null},"toString"),o=s.call(function(){},"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],_=function(m){var g=m.constructor;return g&&g.prototype===m},l={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},h=function(){if(typeof window>"u")return!1;for(var m in window)try{if(!l["$"+m]&&e.call(window,m)&&window[m]!==null&&typeof window[m]=="object")try{_(window[m])}catch{return!0}}catch{return!0}return!1}(),f=function(m){if(typeof window>"u"||!h)return _(m);try{return _(m)}catch{return!1}};r=function(g){var C=g!==null&&typeof g=="object",E=t.call(g)==="[object Function]",P=i(g),w=C&&t.call(g)==="[object String]",M=[];if(!C&&!E&&!P)throw new TypeError("Object.keys called on a non-object");var T=o&&E;if(w&&g.length>0&&!e.call(g,0))for(var L=0;L<g.length;++L)M.push(String(L));if(P&&g.length>0)for(var R=0;R<g.length;++R)M.push(String(R));else for(var D in g)!(T&&D==="prototype")&&e.call(g,D)&&M.push(String(D));if(n)for(var N=f(g),k=0;k<c.length;++k)!(N&&c[k]==="constructor")&&e.call(g,c[k])&&M.push(c[k]);return M}}return implementation$3=r,implementation$3}var objectKeys,hasRequiredObjectKeys;function requireObjectKeys(){if(hasRequiredObjectKeys)return objectKeys;hasRequiredObjectKeys=1;var r=Array.prototype.slice,e=requireIsArguments$1(),t=Object.keys,i=t?function(o){return t(o)}:requireImplementation$3(),s=Object.keys;return i.shim=function(){if(Object.keys){var o=function(){var c=Object.keys(arguments);return c&&c.length===arguments.length}(1,2);o||(Object.keys=function(_){return e(_)?s(r.call(_)):s(_)})}else Object.keys=i;return Object.keys||i},objectKeys=i,objectKeys}var shams$1,hasRequiredShams$1;function requireShams$1(){return hasRequiredShams$1||(hasRequiredShams$1=1,shams$1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),i=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var s=42;e[t]=s;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var n=Object.getOwnPropertySymbols(e);if(n.length!==1||n[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==s||o.enumerable!==!0)return!1}return!0}),shams$1}var shams,hasRequiredShams;function requireShams(){if(hasRequiredShams)return shams;hasRequiredShams=1;var r=requireShams$1();return shams=function(){return r()&&!!Symbol.toStringTag},shams}var hasSymbols,hasRequiredHasSymbols;function requireHasSymbols(){if(hasRequiredHasSymbols)return hasSymbols;hasRequiredHasSymbols=1;var r=typeof Symbol<"u"&&Symbol,e=requireShams$1();return hasSymbols=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},hasSymbols}var implementation$2,hasRequiredImplementation$2;function requireImplementation$2(){if(hasRequiredImplementation$2)return implementation$2;hasRequiredImplementation$2=1;var r="Function.prototype.bind called on incompatible ",e=Array.prototype.slice,t=Object.prototype.toString,i="[object Function]";return implementation$2=function(n){var o=this;if(typeof o!="function"||t.call(o)!==i)throw new TypeError(r+o);for(var c=e.call(arguments,1),_,l=function(){if(this instanceof _){var C=o.apply(this,c.concat(e.call(arguments)));return Object(C)===C?C:this}else return o.apply(n,c.concat(e.call(arguments)))},h=Math.max(0,o.length-c.length),f=[],m=0;m<h;m++)f.push("$"+m);if(_=Function("binder","return function ("+f.join(",")+"){ return binder.apply(this,arguments); }")(l),o.prototype){var g=function(){};g.prototype=o.prototype,_.prototype=new g,g.prototype=null}return _},implementation$2}var functionBind,hasRequiredFunctionBind;function requireFunctionBind(){if(hasRequiredFunctionBind)return functionBind;hasRequiredFunctionBind=1;var r=requireImplementation$2();return functionBind=Function.prototype.bind||r,functionBind}var src,hasRequiredSrc;function requireSrc(){if(hasRequiredSrc)return src;hasRequiredSrc=1;var r=requireFunctionBind();return src=r.call(Function.call,Object.prototype.hasOwnProperty),src}var getIntrinsic,hasRequiredGetIntrinsic;function requireGetIntrinsic(){if(hasRequiredGetIntrinsic)return getIntrinsic;hasRequiredGetIntrinsic=1;var r,e=SyntaxError,t=Function,i=TypeError,s=function($){try{return t('"use strict"; return ('+$+").constructor;")()}catch{}},n=Object.getOwnPropertyDescriptor;if(n)try{n({},"")}catch{n=null}var o=function(){throw new i},c=n?function(){try{return arguments.callee,o}catch{try{return n(arguments,"callee").get}catch{return o}}}():o,_=requireHasSymbols()(),l=Object.getPrototypeOf||function($){return $.__proto__},h={},f=typeof Uint8Array>"u"?r:l(Uint8Array),m={"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":_?l([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":h,"%AsyncGenerator%":h,"%AsyncGeneratorFunction%":h,"%AsyncIteratorPrototype%":h,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":t,"%GeneratorFunction%":h,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":_?l(l([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!_?r:l(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!_?r:l(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":_?l(""[Symbol.iterator]()):r,"%Symbol%":_?Symbol:r,"%SyntaxError%":e,"%ThrowTypeError%":c,"%TypedArray%":f,"%TypeError%":i,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet},g=function $(H){var W;if(H==="%AsyncFunction%")W=s("async function () {}");else if(H==="%GeneratorFunction%")W=s("function* () {}");else if(H==="%AsyncGeneratorFunction%")W=s("async function* () {}");else if(H==="%AsyncGenerator%"){var J=$("%AsyncGeneratorFunction%");J&&(W=J.prototype)}else if(H==="%AsyncIteratorPrototype%"){var z=$("%AsyncGenerator%");z&&(W=l(z.prototype))}return m[H]=W,W},C={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},E=requireFunctionBind(),P=requireSrc(),w=E.call(Function.call,Array.prototype.concat),M=E.call(Function.apply,Array.prototype.splice),T=E.call(Function.call,String.prototype.replace),L=E.call(Function.call,String.prototype.slice),R=E.call(Function.call,RegExp.prototype.exec),D=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,N=/\\(\\)?/g,k=function(H){var W=L(H,0,1),J=L(H,-1);if(W==="%"&&J!=="%")throw new e("invalid intrinsic syntax, expected closing `%`");if(J==="%"&&W!=="%")throw new e("invalid intrinsic syntax, expected opening `%`");var z=[];return T(H,D,function(fe,q,te,ie){z[z.length]=te?T(ie,N,"$1"):q||fe}),z},B=function(H,W){var J=H,z;if(P(C,J)&&(z=C[J],J="%"+z[0]+"%"),P(m,J)){var fe=m[J];if(fe===h&&(fe=g(J)),typeof fe>"u"&&!W)throw new i("intrinsic "+H+" exists, but is not available. Please file an issue!");return{alias:z,name:J,value:fe}}throw new e("intrinsic "+H+" does not exist!")};return getIntrinsic=function(H,W){if(typeof H!="string"||H.length===0)throw new i("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof W!="boolean")throw new i('"allowMissing" argument must be a boolean');if(R(/^%?[^%]*%?$/,H)===null)throw new e("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var J=k(H),z=J.length>0?J[0]:"",fe=B("%"+z+"%",W),q=fe.name,te=fe.value,ie=!1,xe=fe.alias;xe&&(z=xe[0],M(J,w([0,1],xe)));for(var oe=1,de=!0;oe<J.length;oe+=1){var X=J[oe],he=L(X,0,1),Se=L(X,-1);if((he==='"'||he==="'"||he==="`"||Se==='"'||Se==="'"||Se==="`")&&he!==Se)throw new e("property names with quotes must have matching quotes");if((X==="constructor"||!de)&&(ie=!0),z+="."+X,q="%"+z+"%",P(m,q))te=m[q];else if(te!=null){if(!(X in te)){if(!W)throw new i("base intrinsic for "+H+" exists, but the property is not available.");return}if(n&&oe+1>=J.length){var Te=n(te,X);de=!!Te,de&&"get"in Te&&!("originalValue"in Te.get)?te=Te.get:te=te[X]}else de=P(te,X),te=te[X];de&&!ie&&(m[q]=te)}}return te},getIntrinsic}var callBind={exports:{}},hasRequiredCallBind;function requireCallBind(){return hasRequiredCallBind||(hasRequiredCallBind=1,function(r){var e=requireFunctionBind(),t=requireGetIntrinsic(),i=t("%Function.prototype.apply%"),s=t("%Function.prototype.call%"),n=t("%Reflect.apply%",!0)||e.call(s,i),o=t("%Object.getOwnPropertyDescriptor%",!0),c=t("%Object.defineProperty%",!0),_=t("%Math.max%");if(c)try{c({},"a",{value:1})}catch{c=null}r.exports=function(f){var m=n(e,s,arguments);if(o&&c){var g=o(m,"length");g.configurable&&c(m,"length",{value:1+_(0,f.length-(arguments.length-1))})}return m};var l=function(){return n(e,i,arguments)};c?c(r.exports,"apply",{value:l}):r.exports.apply=l}(callBind)),callBind.exports}var callBound,hasRequiredCallBound;function requireCallBound(){if(hasRequiredCallBound)return callBound;hasRequiredCallBound=1;var r=requireGetIntrinsic(),e=requireCallBind(),t=e(r("String.prototype.indexOf"));return callBound=function(s,n){var o=r(s,!!n);return typeof o=="function"&&t(s,".prototype.")>-1?e(o):o},callBound}var isArguments,hasRequiredIsArguments;function requireIsArguments(){if(hasRequiredIsArguments)return isArguments;hasRequiredIsArguments=1;var r=requireShams()(),e=requireCallBound(),t=e("Object.prototype.toString"),i=function(c){return r&&c&&typeof c=="object"&&Symbol.toStringTag in c?!1:t(c)==="[object Arguments]"},s=function(c){return i(c)?!0:c!==null&&typeof c=="object"&&typeof c.length=="number"&&c.length>=0&&t(c)!=="[object Array]"&&t(c.callee)==="[object Function]"},n=function(){return i(arguments)}();return i.isLegacyArguments=s,isArguments=n?i:s,isArguments}var hasPropertyDescriptors_1,hasRequiredHasPropertyDescriptors;function requireHasPropertyDescriptors(){if(hasRequiredHasPropertyDescriptors)return hasPropertyDescriptors_1;hasRequiredHasPropertyDescriptors=1;var r=requireGetIntrinsic(),e=r("%Object.defineProperty%",!0),t=function(){if(e)try{return e({},"a",{value:1}),!0}catch{return!1}return!1};return t.hasArrayLengthDefineBug=function(){if(!t())return null;try{return e([],"length",{value:1}).length!==1}catch{return!0}},hasPropertyDescriptors_1=t,hasPropertyDescriptors_1}var defineProperties_1,hasRequiredDefineProperties;function requireDefineProperties(){if(hasRequiredDefineProperties)return defineProperties_1;hasRequiredDefineProperties=1;var r=requireObjectKeys(),e=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",t=Object.prototype.toString,i=Array.prototype.concat,s=Object.defineProperty,n=function(h){return typeof h=="function"&&t.call(h)==="[object Function]"},o=requireHasPropertyDescriptors()(),c=s&&o,_=function(h,f,m,g){f in h&&(!n(g)||!g())||(c?s(h,f,{configurable:!0,enumerable:!1,value:m,writable:!0}):h[f]=m)},l=function(h,f){var m=arguments.length>2?arguments[2]:{},g=r(f);e&&(g=i.call(g,Object.getOwnPropertySymbols(f)));for(var C=0;C<g.length;C+=1)_(h,g[C],f[g[C]],m[g[C]])};return l.supportsDescriptors=!!c,defineProperties_1=l,defineProperties_1}var implementation$1,hasRequiredImplementation$1;function requireImplementation$1(){if(hasRequiredImplementation$1)return implementation$1;hasRequiredImplementation$1=1;var r=function(e){return e!==e};return implementation$1=function(t,i){return t===0&&i===0?1/t===1/i:!!(t===i||r(t)&&r(i))},implementation$1}var polyfill$1,hasRequiredPolyfill$1;function requirePolyfill$1(){if(hasRequiredPolyfill$1)return polyfill$1;hasRequiredPolyfill$1=1;var r=requireImplementation$1();return polyfill$1=function(){return typeof Object.is=="function"?Object.is:r},polyfill$1}var shim$1,hasRequiredShim$1;function requireShim$1(){if(hasRequiredShim$1)return shim$1;hasRequiredShim$1=1;var r=requirePolyfill$1(),e=requireDefineProperties();return shim$1=function(){var i=r();return e(Object,{is:i},{is:function(){return Object.is!==i}}),i},shim$1}var objectIs,hasRequiredObjectIs;function requireObjectIs(){if(hasRequiredObjectIs)return objectIs;hasRequiredObjectIs=1;var r=requireDefineProperties(),e=requireCallBind(),t=requireImplementation$1(),i=requirePolyfill$1(),s=requireShim$1(),n=e(i(),Object);return r(n,{getPolyfill:i,implementation:t,shim:s}),objectIs=n,objectIs}var isRegex,hasRequiredIsRegex;function requireIsRegex(){if(hasRequiredIsRegex)return isRegex;hasRequiredIsRegex=1;var r=requireCallBound(),e=requireShams()(),t,i,s,n;if(e){t=r("Object.prototype.hasOwnProperty"),i=r("RegExp.prototype.exec"),s={};var o=function(){throw s};n={toString:o,valueOf:o},typeof Symbol.toPrimitive=="symbol"&&(n[Symbol.toPrimitive]=o)}var c=r("Object.prototype.toString"),_=Object.getOwnPropertyDescriptor,l="[object RegExp]";return isRegex=e?function(f){if(!f||typeof f!="object")return!1;var m=_(f,"lastIndex"),g=m&&t(m,"value");if(!g)return!1;try{i(f,n)}catch(C){return C===s}}:function(f){return!f||typeof f!="object"&&typeof f!="function"?!1:c(f)===l},isRegex}var implementation={exports:{}},functionsHaveNames_1,hasRequiredFunctionsHaveNames;function requireFunctionsHaveNames(){if(hasRequiredFunctionsHaveNames)return functionsHaveNames_1;hasRequiredFunctionsHaveNames=1;var r=function(){return typeof function(){}.name=="string"},e=Object.getOwnPropertyDescriptor;if(e)try{e([],"length")}catch{e=null}r.functionsHaveConfigurableNames=function(){if(!r()||!e)return!1;var s=e(function(){},"name");return!!s&&!!s.configurable};var t=Function.prototype.bind;return r.boundFunctionsHaveNames=function(){return r()&&typeof t=="function"&&function(){}.bind().name!==""},functionsHaveNames_1=r,functionsHaveNames_1}var hasRequiredImplementation;function requireImplementation(){return hasRequiredImplementation||(hasRequiredImplementation=1,function(r){var e=requireFunctionsHaveNames().functionsHaveConfigurableNames(),t=Object,i=TypeError;r.exports=function(){if(this!=null&&this!==t(this))throw new i("RegExp.prototype.flags getter called on non-object");var n="";return this.hasIndices&&(n+="d"),this.global&&(n+="g"),this.ignoreCase&&(n+="i"),this.multiline&&(n+="m"),this.dotAll&&(n+="s"),this.unicode&&(n+="u"),this.sticky&&(n+="y"),n},e&&Object.defineProperty&&Object.defineProperty(r.exports,"name",{value:"get flags"})}(implementation)),implementation.exports}var polyfill,hasRequiredPolyfill;function requirePolyfill(){if(hasRequiredPolyfill)return polyfill;hasRequiredPolyfill=1;var r=requireImplementation(),e=requireDefineProperties().supportsDescriptors,t=Object.getOwnPropertyDescriptor;return polyfill=function(){if(e&&/a/mig.flags==="gim"){var s=t(RegExp.prototype,"flags");if(s&&typeof s.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var n="",o={};if(Object.defineProperty(o,"hasIndices",{get:function(){n+="d"}}),Object.defineProperty(o,"sticky",{get:function(){n+="y"}}),n==="dy")return s.get}}return r},polyfill}var shim,hasRequiredShim;function requireShim(){if(hasRequiredShim)return shim;hasRequiredShim=1;var r=requireDefineProperties().supportsDescriptors,e=requirePolyfill(),t=Object.getOwnPropertyDescriptor,i=Object.defineProperty,s=TypeError,n=Object.getPrototypeOf,o=/a/;return shim=function(){if(!r||!n)throw new s("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var _=e(),l=n(o),h=t(l,"flags");return(!h||h.get!==_)&&i(l,"flags",{configurable:!0,enumerable:!1,get:_}),_},shim}var regexp_prototype_flags,hasRequiredRegexp_prototype_flags;function requireRegexp_prototype_flags(){if(hasRequiredRegexp_prototype_flags)return regexp_prototype_flags;hasRequiredRegexp_prototype_flags=1;var r=requireDefineProperties(),e=requireCallBind(),t=requireImplementation(),i=requirePolyfill(),s=requireShim(),n=e(i());return r(n,{getPolyfill:i,implementation:t,shim:s}),regexp_prototype_flags=n,regexp_prototype_flags}var isDateObject,hasRequiredIsDateObject;function requireIsDateObject(){if(hasRequiredIsDateObject)return isDateObject;hasRequiredIsDateObject=1;var r=Date.prototype.getDay,e=function(o){try{return r.call(o),!0}catch{return!1}},t=Object.prototype.toString,i="[object Date]",s=requireShams()();return isDateObject=function(o){return typeof o!="object"||o===null?!1:s?e(o):t.call(o)===i},isDateObject}var deepEqual_1,hasRequiredDeepEqual;function requireDeepEqual(){if(hasRequiredDeepEqual)return deepEqual_1;hasRequiredDeepEqual=1;var r=requireObjectKeys(),e=requireIsArguments(),t=requireObjectIs(),i=requireIsRegex(),s=requireRegexp_prototype_flags(),n=requireIsDateObject(),o=Date.prototype.getTime;function c(f,m,g){var C=g||{};return(C.strict?t(f,m):f===m)?!0:!f||!m||typeof f!="object"&&typeof m!="object"?C.strict?t(f,m):f==m:h(f,m,C)}function _(f){return f==null}function l(f){return!(!f||typeof f!="object"||typeof f.length!="number"||typeof f.copy!="function"||typeof f.slice!="function"||f.length>0&&typeof f[0]!="number")}function h(f,m,g){var C,E;if(typeof f!=typeof m||_(f)||_(m)||f.prototype!==m.prototype||e(f)!==e(m))return!1;var P=i(f),w=i(m);if(P!==w)return!1;if(P||w)return f.source===m.source&&s(f)===s(m);if(n(f)&&n(m))return o.call(f)===o.call(m);var M=l(f),T=l(m);if(M!==T)return!1;if(M||T){if(f.length!==m.length)return!1;for(C=0;C<f.length;C++)if(f[C]!==m[C])return!1;return!0}if(typeof f!=typeof m)return!1;try{var L=r(f),R=r(m)}catch{return!1}if(L.length!==R.length)return!1;for(L.sort(),R.sort(),C=L.length-1;C>=0;C--)if(L[C]!=R[C])return!1;for(C=L.length-1;C>=0;C--)if(E=L[C],!c(f[E],m[E],g))return!1;return!0}return deepEqual_1=c,deepEqual_1}var hasRequiredJs$K;function requireJs$K(){if(hasRequiredJs$K)return js$J;hasRequiredJs$K=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(js$J,"__esModule",{value:!0});var e=r(requireGeojsonRbush()),t=r(requireJs$19()),i=r(requireJs$17()),s=r(requireJs$X()),n=requireJs$1D(),o=requireJs$1F(),c=requireJs$1G(),_=r(requireDeepEqual());function l(f,m,g){if(g===void 0&&(g={}),g=g||{},!c.isObject(g))throw new Error("options is invalid");var C=g.tolerance||0,E=[],P=e.default(),w=t.default(f);P.load(w);var M;return o.segmentEach(m,function(T){var L=!1;T&&(o.featureEach(P.search(T),function(R){if(L===!1){var D=n.getCoords(T).sort(),N=n.getCoords(R).sort();_.default(D,N)||(C===0?s.default(D[0],R)&&s.default(D[1],R):i.default(R,D[0]).properties.dist<=C&&i.default(R,D[1]).properties.dist<=C)?(L=!0,M?M=h(M,T):M=T):(C===0?s.default(N[0],T)&&s.default(N[1],T):i.default(T,N[0]).properties.dist<=C&&i.default(T,N[1]).properties.dist<=C)&&(M?M=h(M,R):M=R)}}),L===!1&&M&&(E.push(M),M=void 0))}),M&&E.push(M),c.featureCollection(E)}function h(f,m){var g=n.getCoords(m),C=n.getCoords(f),E=C[0],P=C[C.length-1],w=f.geometry.coordinates;return _.default(g[0],E)?w.unshift(g[1]):_.default(g[0],P)?w.push(g[1]):_.default(g[1],E)?w.unshift(g[0]):_.default(g[1],P)&&w.push(g[0]),f}return js$J.default=l,js$J}var js$I={exports:{}},hasRequiredJs$J;function requireJs$J(){if(hasRequiredJs$J)return js$I.exports;hasRequiredJs$J=1;var r=requireJs$1j(),e=requireJs$O(),t=requireJs$1F(),i=requireJs$1G(),s=requireJs$1D();function n(h){return h&&typeof h=="object"&&"default"in h?h:{default:h}}var o=n(r),c=n(e);function _(h,f,m,g,C){if(C=C||{},!i.isObject(C))throw new Error("options is invalid");var E=C.properties;if(!h)throw new Error("center is required");if(m==null)throw new Error("bearing1 is required");if(g==null)throw new Error("bearing2 is required");if(!f)throw new Error("radius is required");if(typeof C!="object")throw new Error("options must be an object");if(l(m)===l(g))return o.default(h,f,C);var P=s.getCoords(h),w=c.default(h,f,m,g,C),M=[[P]];return t.coordEach(w,function(T){M[0].push(T)}),M[0].push(P),i.polygon(M,E)}function l(h){var f=h%360;return f<0&&(f+=360),f}return js$I.exports=_,js$I.exports.default=_,js$I.exports}var js$H={},hasRequiredJs$I;function requireJs$I(){if(hasRequiredJs$I)return js$H;hasRequiredJs$I=1,Object.defineProperty(js$H,"__esModule",{value:!0});var r=requireJs$1G(),e=requireJs$1D();function t(s,n,o){o===void 0&&(o={});var c;o.final?c=i(e.getCoord(n),e.getCoord(s)):c=i(e.getCoord(s),e.getCoord(n));var _=c>180?-(360-c):c;return _}function i(s,n){var o=r.degreesToRadians(s[1]),c=r.degreesToRadians(n[1]),_=r.degreesToRadians(n[0]-s[0]);_>Math.PI&&(_-=2*Math.PI),_<-Math.PI&&(_+=2*Math.PI);var l=Math.log(Math.tan(c/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),h=Math.atan2(_,l);return(r.radiansToDegrees(h)+360)%360}return js$H.default=t,js$H}var js$G={},hasRequiredJs$H;function requireJs$H(){if(hasRequiredJs$H)return js$G;hasRequiredJs$H=1,Object.defineProperty(js$G,"__esModule",{value:!0});var r=requireJs$1G(),e=requireJs$1D();function t(s,n,o,c){c===void 0&&(c={});var _=n<0,l=r.convertLength(Math.abs(n),c.units,"meters");_&&(l=-Math.abs(l));var h=e.getCoord(s),f=i(h,l,o);return f[0]+=f[0]-h[0]>180?-360:h[0]-f[0]>180?360:0,r.point(f,c.properties)}function i(s,n,o,c){c=c===void 0?r.earthRadius:Number(c);var _=n/c,l=s[0]*Math.PI/180,h=r.degreesToRadians(s[1]),f=r.degreesToRadians(o),m=_*Math.cos(f),g=h+m;Math.abs(g)>Math.PI/2&&(g=g>0?Math.PI-g:-Math.PI-g);var C=Math.log(Math.tan(g/2+Math.PI/4)/Math.tan(h/2+Math.PI/4)),E=Math.abs(C)>1e-11?m/C:Math.cos(h),P=_*Math.sin(f)/E,w=l+P;return[(w*180/Math.PI+540)%360-180,g*180/Math.PI]}return js$G.default=t,js$G}var js$F={exports:{}},hasRequiredJs$G;function requireJs$G(){if(hasRequiredJs$G)return js$F.exports;hasRequiredJs$G=1;var r=requireJs$1D(),e=requireJs$1G(),t=requireJs$1E(),i=requireJs$1c(),s=requireJs$1a();function n(C){return C&&typeof C=="object"&&"default"in C?C:{default:C}}var o=n(t),c=n(i),_=n(s);function l(C,E){var P=r.getCoords(C),w=r.getCoords(E),M,T,L,R,D=o.default(E),N=0,k=null;P[0]>D[0]&&P[0]<D[2]&&P[1]>D[1]&&P[1]<D[3]&&(k=_.default(C,c.default(E)),N=k.properties.featureIndex);var B=r.getType(E);switch(B){case"Polygon":M=w[0][N],T=w[0][0],k!==null&&k.geometry.coordinates[1]<P[1]&&(T=w[0][N]),R=g(w[0][0],w[0][w[0].length-1],P);var $=h(w[0],P,R,L,M,T);M=$[0],T=$[1];break;case"MultiPolygon":for(var H=0,W=0,J=0,z=0;z<w[0].length;z++){H=z;for(var fe=!1,q=0;q<w[0][z].length;q++){if(W=q,J===N){fe=!0;break}J++}if(fe)break}M=w[0][H][W],T=w[0][H][W],R=g(w[0][0][0],w[0][0][w[0][0].length-1],P),w.forEach(function(te){var ie=h(te[0],P,R,L,M,T);M=ie[0],T=ie[1]});break}return e.featureCollection([e.point(M),e.point(T)])}function h(C,E,P,w,M,T){for(var L=0;L<C.length;L++){var R=C[L],D=C[L+1];L===C.length-1&&(D=C[0]),w=g(R,D,E),P<=0&&w>0?m(E,R,M)||(M=R):P>0&&w<=0&&(f(E,R,T)||(T=R)),P=w}return[M,T]}function f(C,E,P){return g(C,E,P)>0}function m(C,E,P){return g(C,E,P)<0}function g(C,E,P){return(E[0]-C[0])*(P[1]-C[1])-(P[0]-C[0])*(E[1]-C[1])}return js$F.exports=l,js$F.exports.default=l,js$F.exports}var js$E={exports:{}},js$D={},hasRequiredJs$F;function requireJs$F(){if(hasRequiredJs$F)return js$D;hasRequiredJs$F=1,Object.defineProperty(js$D,"__esModule",{value:!0});var r=requireJs$1D();function e(t){for(var i=r.getCoords(t),s=0,n=1,o,c;n<i.length;)o=c||i[0],c=i[n],s+=(c[0]-o[0])*(c[1]+o[1]),n++;return s>0}return js$D.default=e,js$D}var hasRequiredJs$E;function requireJs$E(){if(hasRequiredJs$E)return js$E.exports;hasRequiredJs$E=1;var r=requireJs$1w(),e=requireJs$F(),t=requireJs$1F(),i=requireJs$1D(),s=requireJs$1G();function n(m){return m&&typeof m=="object"&&"default"in m?m:{default:m}}var o=n(r),c=n(e);function _(m,g){if(g=g||{},!s.isObject(g))throw new Error("options is invalid");var C=g.reverse||!1,E=g.mutate||!1;if(!m)throw new Error("<geojson> is required");if(typeof C!="boolean")throw new Error("<reverse> must be a boolean");if(typeof E!="boolean")throw new Error("<mutate> must be a boolean");E===!1&&(m=o.default(m));var P=[];switch(m.type){case"GeometryCollection":return t.geomEach(m,function(w){l(w,C)}),m;case"FeatureCollection":return t.featureEach(m,function(w){t.featureEach(l(w,C),function(M){P.push(M)})}),s.featureCollection(P)}return l(m,C)}function l(m,g){var C=m.type==="Feature"?m.geometry.type:m.type;switch(C){case"GeometryCollection":return t.geomEach(m,function(E){l(E,g)}),m;case"LineString":return h(i.getCoords(m),g),m;case"Polygon":return f(i.getCoords(m),g),m;case"MultiLineString":return i.getCoords(m).forEach(function(E){h(E,g)}),m;case"MultiPolygon":return i.getCoords(m).forEach(function(E){f(E,g)}),m;case"Point":case"MultiPoint":return m}}function h(m,g){c.default(m)===g&&m.reverse()}function f(m,g){c.default(m[0])!==g&&m[0].reverse();for(var C=1;C<m.length;C++)c.default(m[C])===g&&m[C].reverse()}return js$E.exports=_,js$E.exports.default=_,js$E.exports}var js$C={exports:{}},hasRequiredJs$D;function requireJs$D(){if(hasRequiredJs$D)return js$C.exports;hasRequiredJs$D=1;var r=requireJs$1E(),e=requireJs$10(),t=requireJs$1A(),i=requireJs$1c(),s=requireJs$1D(),n=requireJs$1G(),o=requireObjectAssign(),c=requireJs$1F();function _(ae){return ae&&typeof ae=="object"&&"default"in ae?ae:{default:ae}}var l=_(r),h=_(e),f=_(t),m=_(i),g=_(o);function C(ae,_e){if(_e=_e||{},!n.isObject(_e))throw new Error("options is invalid");var je=_e.zProperty||"elevation",Ze=_e.flip,Qe=_e.flags;s.collectionOf(ae,"Point","input must contain Points");for(var Ye=E(ae,Ze),pe=[],at=0;at<Ye.length;at++){for(var He=Ye[at],ne=[],ve=0;ve<He.length;ve++){var ge=He[ve];ge.properties[je]?ne.push(ge.properties[je]):ne.push(0),Qe===!0&&(ge.properties.matrixPosition=[at,ve])}pe.push(ne)}return pe}function E(ae,_e){var je={};c.featureEach(ae,function(Ye){var pe=s.getCoords(Ye)[1];je[pe]||(je[pe]=[]),je[pe].push(Ye)});var Ze=Object.keys(je).map(function(Ye){var pe=je[Ye],at=pe.sort(function(He,ne){return s.getCoords(He)[0]-s.getCoords(ne)[0]});return at}),Qe=Ze.sort(function(Ye,pe){return _e?s.getCoords(Ye[0])[1]-s.getCoords(pe[0])[1]:s.getCoords(pe[0])[1]-s.getCoords(Ye[0])[1]});return Qe}/*!
 * @license GNU Affero General Public License.
 * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
 * v. 1.2.0
 * https://github.com/RaumZeit/MarchingSquares.js
 *
 * MarchingSquaresJS is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * MarchingSquaresJS is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * As additional permission under GNU Affero General Public License version 3
 * section 7, third-party projects (personal or commercial) may distribute,
 * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
 * requirement that said third-party project for that reason alone becomes
 * subject to any requirement of the GNU Affero General Public License version 3.
 * Any modifications to MarchingSquaresJS, however, must be shared with the public
 * and made available.
 *
 * In summary this:
 * - allows you to use MarchingSquaresJS at no cost
 * - allows you to use MarchingSquaresJS for both personal and commercial purposes
 * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
 *   license as long as this license notice is included
 * - enables you to keep the source code of your program that uses MarchingSquaresJS
 *   undisclosed
 * - forces you to share any modifications you have made to MarchingSquaresJS,
 *   e.g. bug-fixes
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
 */var P={successCallback:null,verbose:!1,polygons:!1},w={};function M(ae,_e,je,Ze){Ze=Ze||{};for(var Qe=Object.keys(P),Ye=0;Ye<Qe.length;Ye++){var pe=Qe[Ye],at=Ze[pe];at=typeof at<"u"&&at!==null?at:P[pe],w[pe]=at}w.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+_e+":"+(_e+je)+"]");var He=si(ae,_e,je),ne;return w.polygons?(w.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),ne=qt(He)):(w.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),ne=u0(He)),typeof w.successCallback=="function"&&w.successCallback(ne),ne}var T=64,L=16,R=4,D=1,N=[],k=[],B=[],$=[],H=[],W=[],J=[],z=[],fe=[],q=[],te=[],ie=[],xe=[],oe=[],de=[],X=[],he=[],Se=[],Te=[],Re=[],Be=[],ze=[],Ve=[],ye=[];J[85]=q[85]=-1,z[85]=te[85]=0,fe[85]=ie[85]=1,Te[85]=ze[85]=1,Re[85]=Ve[85]=0,Be[85]=ye[85]=1,N[85]=$[85]=0,k[85]=H[85]=-1,B[85]=de[85]=0,X[85]=xe[85]=0,he[85]=oe[85]=1,W[85]=Se[85]=1,ze[1]=ze[169]=0,Ve[1]=Ve[169]=-1,ye[1]=ye[169]=0,xe[1]=xe[169]=-1,oe[1]=oe[169]=0,de[1]=de[169]=0,q[4]=q[166]=0,te[4]=te[166]=-1,ie[4]=ie[166]=1,X[4]=X[166]=1,he[4]=he[166]=0,Se[4]=Se[166]=0,J[16]=J[154]=0,z[16]=z[154]=1,fe[16]=fe[154]=1,$[16]=$[154]=1,H[16]=H[154]=0,W[16]=W[154]=1,Te[64]=Te[106]=0,Re[64]=Re[106]=1,Be[64]=Be[106]=0,N[64]=N[106]=-1,k[64]=k[106]=0,B[64]=B[106]=1,Te[2]=Te[168]=0,Re[2]=Re[168]=-1,Be[2]=Be[168]=1,ze[2]=ze[168]=0,Ve[2]=Ve[168]=-1,ye[2]=ye[168]=0,xe[2]=xe[168]=-1,oe[2]=oe[168]=0,de[2]=de[168]=0,X[2]=X[168]=-1,he[2]=he[168]=0,Se[2]=Se[168]=1,J[8]=J[162]=0,z[8]=z[162]=-1,fe[8]=fe[162]=0,q[8]=q[162]=0,te[8]=te[162]=-1,ie[8]=ie[162]=1,xe[8]=xe[162]=1,oe[8]=oe[162]=0,de[8]=de[162]=1,X[8]=X[162]=1,he[8]=he[162]=0,Se[8]=Se[162]=0,J[32]=J[138]=0,z[32]=z[138]=1,fe[32]=fe[138]=1,q[32]=q[138]=0,te[32]=te[138]=1,ie[32]=ie[138]=0,N[32]=N[138]=1,k[32]=k[138]=0,B[32]=B[138]=0,$[32]=$[138]=1,H[32]=H[138]=0,W[32]=W[138]=1,ze[128]=ze[42]=0,Ve[128]=Ve[42]=1,ye[128]=ye[42]=1,Te[128]=Te[42]=0,Re[128]=Re[42]=1,Be[128]=Be[42]=0,N[128]=N[42]=-1,k[128]=k[42]=0,B[128]=B[42]=1,$[128]=$[42]=-1,H[128]=H[42]=0,W[128]=W[42]=0,q[5]=q[165]=-1,te[5]=te[165]=0,ie[5]=ie[165]=0,ze[5]=ze[165]=1,Ve[5]=Ve[165]=0,ye[5]=ye[165]=0,X[20]=X[150]=0,he[20]=he[150]=1,Se[20]=Se[150]=1,$[20]=$[150]=0,H[20]=H[150]=-1,W[20]=W[150]=1,J[80]=J[90]=-1,z[80]=z[90]=0,fe[80]=fe[90]=1,Te[80]=Te[90]=1,Re[80]=Re[90]=0,Be[80]=Be[90]=1,xe[65]=xe[105]=0,oe[65]=oe[105]=1,de[65]=de[105]=0,N[65]=N[105]=0,k[65]=k[105]=-1,B[65]=B[105]=0,J[160]=J[10]=-1,z[160]=z[10]=0,fe[160]=fe[10]=1,q[160]=q[10]=-1,te[160]=te[10]=0,ie[160]=ie[10]=0,ze[160]=ze[10]=1,Ve[160]=Ve[10]=0,ye[160]=ye[10]=0,Te[160]=Te[10]=1,Re[160]=Re[10]=0,Be[160]=Be[10]=1,X[130]=X[40]=0,he[130]=he[40]=1,Se[130]=Se[40]=1,xe[130]=xe[40]=0,oe[130]=oe[40]=1,de[130]=de[40]=0,N[130]=N[40]=0,k[130]=k[40]=-1,B[130]=B[40]=0,$[130]=$[40]=0,H[130]=H[40]=-1,W[130]=W[40]=1,q[37]=q[133]=0,te[37]=te[133]=1,ie[37]=ie[133]=1,ze[37]=ze[133]=0,Ve[37]=Ve[133]=1,ye[37]=ye[133]=0,N[37]=N[133]=-1,k[37]=k[133]=0,B[37]=B[133]=0,$[37]=$[133]=1,H[37]=H[133]=0,W[37]=W[133]=0,X[148]=X[22]=-1,he[148]=he[22]=0,Se[148]=Se[22]=0,ze[148]=ze[22]=0,Ve[148]=Ve[22]=-1,ye[148]=ye[22]=1,Te[148]=Te[22]=0,Re[148]=Re[22]=1,Be[148]=Be[22]=1,$[148]=$[22]=-1,H[148]=H[22]=0,W[148]=W[22]=1,J[82]=J[88]=0,z[82]=z[88]=-1,fe[82]=fe[88]=1,X[82]=X[88]=1,he[82]=he[88]=0,Se[82]=Se[88]=1,xe[82]=xe[88]=-1,oe[82]=oe[88]=0,de[82]=de[88]=1,Te[82]=Te[88]=0,Re[82]=Re[88]=-1,Be[82]=Be[88]=0,J[73]=J[97]=0,z[73]=z[97]=1,fe[73]=fe[97]=0,q[73]=q[97]=0,te[73]=te[97]=-1,ie[73]=ie[97]=0,xe[73]=xe[97]=1,oe[73]=oe[97]=0,de[73]=de[97]=0,N[73]=N[97]=1,k[73]=k[97]=0,B[73]=B[97]=1,J[145]=J[25]=0,z[145]=z[25]=-1,fe[145]=fe[25]=0,xe[145]=xe[25]=1,oe[145]=oe[25]=0,de[145]=de[25]=1,ze[145]=ze[25]=0,Ve[145]=Ve[25]=1,ye[145]=ye[25]=1,$[145]=$[25]=-1,H[145]=H[25]=0,W[145]=W[25]=0,q[70]=q[100]=0,te[70]=te[100]=1,ie[70]=ie[100]=0,X[70]=X[100]=-1,he[70]=he[100]=0,Se[70]=Se[100]=1,Te[70]=Te[100]=0,Re[70]=Re[100]=-1,Be[70]=Be[100]=1,N[70]=N[100]=1,k[70]=k[100]=0,B[70]=B[100]=0,q[101]=q[69]=0,te[101]=te[69]=1,ie[101]=ie[69]=0,N[101]=N[69]=1,k[101]=k[69]=0,B[101]=B[69]=0,ze[149]=ze[21]=0,Ve[149]=Ve[21]=1,ye[149]=ye[21]=1,$[149]=$[21]=-1,H[149]=H[21]=0,W[149]=W[21]=0,X[86]=X[84]=-1,he[86]=he[84]=0,Se[86]=Se[84]=1,Te[86]=Te[84]=0,Re[86]=Re[84]=-1,Be[86]=Be[84]=1,J[89]=J[81]=0,z[89]=z[81]=-1,fe[89]=fe[81]=0,xe[89]=xe[81]=1,oe[89]=oe[81]=0,de[89]=de[81]=1,J[96]=J[74]=0,z[96]=z[74]=1,fe[96]=fe[74]=0,q[96]=q[74]=-1,te[96]=te[74]=0,ie[96]=ie[74]=1,Te[96]=Te[74]=1,Re[96]=Re[74]=0,Be[96]=Be[74]=0,N[96]=N[74]=1,k[96]=k[74]=0,B[96]=B[74]=1,J[24]=J[146]=0,z[24]=z[146]=-1,fe[24]=fe[146]=1,X[24]=X[146]=1,he[24]=he[146]=0,Se[24]=Se[146]=1,xe[24]=xe[146]=0,oe[24]=oe[146]=1,de[24]=de[146]=1,$[24]=$[146]=0,H[24]=H[146]=-1,W[24]=W[146]=0,q[6]=q[164]=-1,te[6]=te[164]=0,ie[6]=ie[164]=1,X[6]=X[164]=-1,he[6]=he[164]=0,Se[6]=Se[164]=0,ze[6]=ze[164]=0,Ve[6]=Ve[164]=-1,ye[6]=ye[164]=1,Te[6]=Te[164]=1,Re[6]=Re[164]=0,Be[6]=Be[164]=0,xe[129]=xe[41]=0,oe[129]=oe[41]=1,de[129]=de[41]=1,ze[129]=ze[41]=0,Ve[129]=Ve[41]=1,ye[129]=ye[41]=0,N[129]=N[41]=-1,k[129]=k[41]=0,B[129]=B[41]=0,$[129]=$[41]=0,H[129]=H[41]=-1,W[129]=W[41]=0,X[66]=X[104]=0,he[66]=he[104]=1,Se[66]=Se[104]=0,xe[66]=xe[104]=-1,oe[66]=oe[104]=0,de[66]=de[104]=1,Te[66]=Te[104]=0,Re[66]=Re[104]=-1,Be[66]=Be[104]=0,N[66]=N[104]=0,k[66]=k[104]=-1,B[66]=B[104]=1,J[144]=J[26]=-1,z[144]=z[26]=0,fe[144]=fe[26]=0,ze[144]=ze[26]=1,Ve[144]=Ve[26]=0,ye[144]=ye[26]=1,Te[144]=Te[26]=0,Re[144]=Re[26]=1,Be[144]=Be[26]=1,$[144]=$[26]=-1,H[144]=H[26]=0,W[144]=W[26]=1,q[36]=q[134]=0,te[36]=te[134]=1,ie[36]=ie[134]=1,X[36]=X[134]=0,he[36]=he[134]=1,Se[36]=Se[134]=0,N[36]=N[134]=0,k[36]=k[134]=-1,B[36]=B[134]=1,$[36]=$[134]=1,H[36]=H[134]=0,W[36]=W[134]=0,J[9]=J[161]=-1,z[9]=z[161]=0,fe[9]=fe[161]=0,q[9]=q[161]=0,te[9]=te[161]=-1,ie[9]=ie[161]=0,xe[9]=xe[161]=1,oe[9]=oe[161]=0,de[9]=de[161]=0,ze[9]=ze[161]=1,Ve[9]=Ve[161]=0,ye[9]=ye[161]=1,J[136]=0,z[136]=1,fe[136]=1,q[136]=0,te[136]=1,ie[136]=0,X[136]=-1,he[136]=0,Se[136]=1,xe[136]=-1,oe[136]=0,de[136]=0,ze[136]=0,Ve[136]=-1,ye[136]=0,Te[136]=0,Re[136]=-1,Be[136]=1,N[136]=1,k[136]=0,B[136]=0,$[136]=1,H[136]=0,W[136]=1,J[34]=0,z[34]=-1,fe[34]=0,q[34]=0,te[34]=-1,ie[34]=1,X[34]=1,he[34]=0,Se[34]=0,xe[34]=1,oe[34]=0,de[34]=1,ze[34]=0,Ve[34]=1,ye[34]=1,Te[34]=0,Re[34]=1,Be[34]=0,N[34]=-1,k[34]=0,B[34]=1,$[34]=-1,H[34]=0,W[34]=0,J[35]=0,z[35]=1,fe[35]=1,q[35]=0,te[35]=-1,ie[35]=1,X[35]=1,he[35]=0,Se[35]=0,xe[35]=-1,oe[35]=0,de[35]=0,ze[35]=0,Ve[35]=-1,ye[35]=0,Te[35]=0,Re[35]=1,Be[35]=0,N[35]=-1,k[35]=0,B[35]=1,$[35]=1,H[35]=0,W[35]=1,J[153]=0,z[153]=1,fe[153]=1,xe[153]=-1,oe[153]=0,de[153]=0,ze[153]=0,Ve[153]=-1,ye[153]=0,$[153]=1,H[153]=0,W[153]=1,q[102]=0,te[102]=-1,ie[102]=1,X[102]=1,he[102]=0,Se[102]=0,Te[102]=0,Re[102]=1,Be[102]=0,N[102]=-1,k[102]=0,B[102]=1,J[155]=0,z[155]=-1,fe[155]=0,xe[155]=1,oe[155]=0,de[155]=1,ze[155]=0,Ve[155]=1,ye[155]=1,$[155]=-1,H[155]=0,W[155]=0,q[103]=0,te[103]=1,ie[103]=0,X[103]=-1,he[103]=0,Se[103]=1,Te[103]=0,Re[103]=-1,Be[103]=1,N[103]=1,k[103]=0,B[103]=0,J[152]=0,z[152]=1,fe[152]=1,X[152]=-1,he[152]=0,Se[152]=1,xe[152]=-1,oe[152]=0,de[152]=0,ze[152]=0,Ve[152]=-1,ye[152]=0,Te[152]=0,Re[152]=-1,Be[152]=1,$[152]=1,H[152]=0,W[152]=1,J[156]=0,z[156]=-1,fe[156]=1,X[156]=1,he[156]=0,Se[156]=1,xe[156]=-1,oe[156]=0,de[156]=0,ze[156]=0,Ve[156]=-1,ye[156]=0,Te[156]=0,Re[156]=1,Be[156]=1,$[156]=-1,H[156]=0,W[156]=1,J[137]=0,z[137]=1,fe[137]=1,q[137]=0,te[137]=1,ie[137]=0,xe[137]=-1,oe[137]=0,de[137]=0,ze[137]=0,Ve[137]=-1,ye[137]=0,N[137]=1,k[137]=0,B[137]=0,$[137]=1,H[137]=0,W[137]=1,J[139]=0,z[139]=1,fe[139]=1,q[139]=0,te[139]=-1,ie[139]=0,xe[139]=1,oe[139]=0,de[139]=0,ze[139]=0,Ve[139]=1,ye[139]=0,N[139]=-1,k[139]=0,B[139]=0,$[139]=1,H[139]=0,W[139]=1,J[98]=0,z[98]=-1,fe[98]=0,q[98]=0,te[98]=-1,ie[98]=1,X[98]=1,he[98]=0,Se[98]=0,xe[98]=1,oe[98]=0,de[98]=1,Te[98]=0,Re[98]=1,Be[98]=0,N[98]=-1,k[98]=0,B[98]=1,J[99]=0,z[99]=1,fe[99]=0,q[99]=0,te[99]=-1,ie[99]=1,X[99]=1,he[99]=0,Se[99]=0,xe[99]=-1,oe[99]=0,de[99]=1,Te[99]=0,Re[99]=-1,Be[99]=0,N[99]=1,k[99]=0,B[99]=1,q[38]=0,te[38]=-1,ie[38]=1,X[38]=1,he[38]=0,Se[38]=0,ze[38]=0,Ve[38]=1,ye[38]=1,Te[38]=0,Re[38]=1,Be[38]=0,N[38]=-1,k[38]=0,B[38]=1,$[38]=-1,H[38]=0,W[38]=0,q[39]=0,te[39]=1,ie[39]=1,X[39]=-1,he[39]=0,Se[39]=0,ze[39]=0,Ve[39]=-1,ye[39]=1,Te[39]=0,Re[39]=1,Be[39]=0,N[39]=-1,k[39]=0,B[39]=1,$[39]=1,H[39]=0,W[39]=0;var Fe=function(ae){return[[ae.bottomleft,0],[0,0],[0,ae.leftbottom]]},Ce=function(ae){return[[1,ae.rightbottom],[1,0],[ae.bottomright,0]]},Q=function(ae){return[[ae.topright,1],[1,1],[1,ae.righttop]]},me=function(ae){return[[0,ae.lefttop],[0,1],[ae.topleft,1]]},Ie=function(ae){return[[ae.bottomright,0],[ae.bottomleft,0],[0,ae.leftbottom],[0,ae.lefttop]]},De=function(ae){return[[ae.bottomright,0],[ae.bottomleft,0],[1,ae.righttop],[1,ae.rightbottom]]},Ee=function(ae){return[[1,ae.righttop],[1,ae.rightbottom],[ae.topleft,1],[ae.topright,1]]},Oe=function(ae){return[[0,ae.leftbottom],[0,ae.lefttop],[ae.topleft,1],[ae.topright,1]]},le=function(ae){return[[0,0],[0,ae.leftbottom],[1,ae.rightbottom],[1,0]]},Y=function(ae){return[[1,0],[ae.bottomright,0],[ae.topright,1],[1,1]]},j=function(ae){return[[1,1],[1,ae.righttop],[0,ae.lefttop],[0,1]]},U=function(ae){return[[ae.bottomleft,0],[0,0],[0,1],[ae.topleft,1]]},re=function(ae){return[[1,ae.righttop],[1,ae.rightbottom],[0,ae.leftbottom],[0,ae.lefttop]]},ce=function(ae){return[[ae.topleft,1],[ae.topright,1],[ae.bottomright,0],[ae.bottomleft,0]]},be=function(){return[[0,0],[0,1],[1,1],[1,0]]},Ae=function(ae){return[[1,ae.rightbottom],[1,0],[0,0],[0,1],[ae.topleft,1]]},Pe=function(ae){return[[ae.topright,1],[1,1],[1,0],[0,0],[0,ae.leftbottom]]},Je=function(ae){return[[1,0],[ae.bottomright,0],[0,ae.lefttop],[0,1],[1,1]]},Ue=function(ae){return[[1,1],[1,ae.righttop],[ae.bottomleft,0],[0,0],[0,1]]},qe=function(ae){return[[1,ae.righttop],[1,ae.rightbottom],[0,ae.lefttop],[0,1],[ae.topleft,1]]},ct=function(ae){return[[1,1],[1,ae.righttop],[ae.bottomright,0],[ae.bottomleft,0],[ae.topright,1]]},vt=function(ae){return[[1,ae.rightbottom],[1,0],[ae.bottomright,0],[0,ae.leftbottom],[0,ae.lefttop]]},Mt=function(ae){return[[ae.topright,1],[ae.bottomleft,0],[0,0],[0,ae.leftbottom],[ae.topleft,1]]},pt=function(ae){return[[ae.bottomright,0],[ae.bottomleft,0],[0,ae.lefttop],[0,1],[ae.topleft,1]]},Lt=function(ae){return[[1,1],[1,ae.righttop],[0,ae.leftbottom],[0,ae.lefttop],[ae.topright,1]]},At=function(ae){return[[1,ae.rightbottom],[1,0],[ae.bottomright,0],[ae.topleft,1],[ae.topright,1]]},It=function(ae){return[[1,ae.righttop],[1,ae.rightbottom],[ae.bottomleft,0],[0,0],[0,ae.leftbottom]]},Rt=function(ae){return[[1,ae.rightbottom],[1,0],[0,0],[0,ae.leftbottom],[ae.topleft,1],[ae.topright,1]]},Jt=function(ae){return[[1,1],[1,0],[ae.bottomright,0],[0,ae.leftbottom],[0,ae.lefttop],[ae.topright,1]]},kt=function(ae){return[[1,1],[1,ae.righttop],[ae.bottomright,0],[ae.bottomleft,0],[0,ae.lefttop],[0,1]]},Bi=function(ae){return[[1,ae.righttop],[1,ae.rightbottom],[ae.bottomleft,0],[0,0],[0,1],[ae.topleft,1]]},Zt=function(ae){return[[1,1],[1,ae.righttop],[ae.bottomleft,0],[0,0],[0,ae.leftbottom],[ae.topright,1]]},Xe=function(ae){return[[1,ae.rightbottom],[1,0],[ae.bottomright,0],[0,ae.lefttop],[0,1],[ae.topleft,1]]},Ri=function(ae){return[[1,ae.righttop],[1,ae.rightbottom],[ae.bottomright,0],[ae.bottomleft,0],[0,ae.leftbottom],[0,ae.lefttop],[ae.topleft,1],[ae.topright,1]]},Vi=function(ae){return[[1,1],[1,ae.righttop],[ae.bottomleft,0],[0,0],[0,ae.leftbottom],[ae.topright,1]]},Et=function(ae){return[[1,ae.rightbottom],[1,0],[ae.bottomright,0],[0,ae.lefttop],[0,1],[ae.topleft,1]]},l0=function(ae){return[[1,1],[1,ae.righttop],[ae.bottomright,0],[ae.bottomleft,0],[0,ae.leftbottom],[0,ae.lefttop],[ae.topright,1]]},Ji=function(ae){return[[1,ae.righttop],[1,ae.rightbottom],[ae.bottomleft,0],[0,0],[0,ae.leftbottom],[ae.topleft,1],[ae.topright,1]]},Hi=function(ae){return[[1,ae.righttop],[1,ae.rightbottom],[ae.bottomright,0],[ae.bottomleft,0],[0,ae.lefttop],[0,1],[ae.topleft,1]]},Ui=function(ae){return[[1,ae.rightbottom],[1,0],[ae.bottomright,0],[0,ae.leftbottom],[0,ae.lefttop],[ae.topleft,1],[ae.topright,1]]},xt=[],st=[],ht=[],rt=[],dt=[],ft=[],Ct=[],nt=[];rt[1]=dt[1]=18,rt[169]=dt[169]=18,ht[4]=st[4]=12,ht[166]=st[166]=12,xt[16]=nt[16]=4,xt[154]=nt[154]=4,ft[64]=Ct[64]=22,ft[106]=Ct[106]=22,ht[2]=ft[2]=17,rt[2]=dt[2]=18,ht[168]=ft[168]=17,rt[168]=dt[168]=18,xt[8]=rt[8]=9,st[8]=ht[8]=12,xt[162]=rt[162]=9,st[162]=ht[162]=12,xt[32]=nt[32]=4,st[32]=Ct[32]=1,xt[138]=nt[138]=4,st[138]=Ct[138]=1,dt[128]=nt[128]=21,ft[128]=Ct[128]=22,dt[42]=nt[42]=21,ft[42]=Ct[42]=22,st[5]=dt[5]=14,st[165]=dt[165]=14,ht[20]=nt[20]=6,ht[150]=nt[150]=6,xt[80]=ft[80]=11,xt[90]=ft[90]=11,rt[65]=Ct[65]=3,rt[105]=Ct[105]=3,xt[160]=ft[160]=11,st[160]=dt[160]=14,xt[10]=ft[10]=11,st[10]=dt[10]=14,ht[130]=nt[130]=6,rt[130]=Ct[130]=3,ht[40]=nt[40]=6,rt[40]=Ct[40]=3,st[101]=Ct[101]=1,st[69]=Ct[69]=1,dt[149]=nt[149]=21,dt[21]=nt[21]=21,ht[86]=ft[86]=17,ht[84]=ft[84]=17,xt[89]=rt[89]=9,xt[81]=rt[81]=9,xt[96]=Ct[96]=0,st[96]=ft[96]=15,xt[74]=Ct[74]=0,st[74]=ft[74]=15,xt[24]=ht[24]=8,rt[24]=nt[24]=7,xt[146]=ht[146]=8,rt[146]=nt[146]=7,st[6]=ft[6]=15,ht[6]=dt[6]=16,st[164]=ft[164]=15,ht[164]=dt[164]=16,rt[129]=nt[129]=7,dt[129]=Ct[129]=20,rt[41]=nt[41]=7,dt[41]=Ct[41]=20,ht[66]=Ct[66]=2,rt[66]=ft[66]=19,ht[104]=Ct[104]=2,rt[104]=ft[104]=19,xt[144]=dt[144]=10,ft[144]=nt[144]=23,xt[26]=dt[26]=10,ft[26]=nt[26]=23,st[36]=nt[36]=5,ht[36]=Ct[36]=2,st[134]=nt[134]=5,ht[134]=Ct[134]=2,xt[9]=dt[9]=10,st[9]=rt[9]=13,xt[161]=dt[161]=10,st[161]=rt[161]=13,st[37]=nt[37]=5,dt[37]=Ct[37]=20,st[133]=nt[133]=5,dt[133]=Ct[133]=20,ht[148]=dt[148]=16,ft[148]=nt[148]=23,ht[22]=dt[22]=16,ft[22]=nt[22]=23,xt[82]=ht[82]=8,rt[82]=ft[82]=19,xt[88]=ht[88]=8,rt[88]=ft[88]=19,xt[73]=Ct[73]=0,st[73]=rt[73]=13,xt[97]=Ct[97]=0,st[97]=rt[97]=13,xt[145]=rt[145]=9,dt[145]=nt[145]=21,xt[25]=rt[25]=9,dt[25]=nt[25]=21,st[70]=Ct[70]=1,ht[70]=ft[70]=17,st[100]=Ct[100]=1,ht[100]=ft[100]=17,xt[34]=rt[34]=9,st[34]=ht[34]=12,dt[34]=nt[34]=21,ft[34]=Ct[34]=22,xt[136]=nt[136]=4,st[136]=Ct[136]=1,ht[136]=ft[136]=17,rt[136]=dt[136]=18,xt[35]=nt[35]=4,st[35]=ht[35]=12,rt[35]=dt[35]=18,ft[35]=Ct[35]=22,xt[153]=nt[153]=4,rt[153]=dt[153]=18,st[102]=ht[102]=12,ft[102]=Ct[102]=22,xt[155]=rt[155]=9,dt[155]=nt[155]=23,st[103]=Ct[103]=1,ht[103]=ft[103]=17,xt[152]=nt[152]=4,ht[152]=ft[152]=17,rt[152]=dt[152]=18,xt[156]=ht[156]=8,rt[156]=dt[156]=18,ft[156]=nt[156]=23,xt[137]=nt[137]=4,st[137]=Ct[137]=1,rt[137]=dt[137]=18,xt[139]=nt[139]=4,st[139]=rt[139]=13,dt[139]=Ct[139]=20,xt[98]=rt[98]=9,st[98]=ht[98]=12,ft[98]=Ct[98]=22,xt[99]=Ct[99]=0,st[99]=ht[99]=12,rt[99]=ft[99]=19,st[38]=ht[38]=12,dt[38]=nt[38]=21,ft[38]=Ct[38]=22,st[39]=nt[39]=5,ht[39]=dt[39]=16,ft[39]=Ct[39]=22;var Ke=[];Ke[1]=Ke[169]=Fe,Ke[4]=Ke[166]=Ce,Ke[16]=Ke[154]=Q,Ke[64]=Ke[106]=me,Ke[168]=Ke[2]=Ie,Ke[162]=Ke[8]=De,Ke[138]=Ke[32]=Ee,Ke[42]=Ke[128]=Oe,Ke[5]=Ke[165]=le,Ke[20]=Ke[150]=Y,Ke[80]=Ke[90]=j,Ke[65]=Ke[105]=U,Ke[160]=Ke[10]=re,Ke[130]=Ke[40]=ce,Ke[85]=be,Ke[101]=Ke[69]=Ae,Ke[149]=Ke[21]=Pe,Ke[86]=Ke[84]=Je,Ke[89]=Ke[81]=Ue,Ke[96]=Ke[74]=qe,Ke[24]=Ke[146]=ct,Ke[6]=Ke[164]=vt,Ke[129]=Ke[41]=Mt,Ke[66]=Ke[104]=pt,Ke[144]=Ke[26]=Lt,Ke[36]=Ke[134]=At,Ke[9]=Ke[161]=It,Ke[37]=Ke[133]=Rt,Ke[148]=Ke[22]=Jt,Ke[82]=Ke[88]=kt,Ke[73]=Ke[97]=Bi,Ke[145]=Ke[25]=Zt,Ke[70]=Ke[100]=Xe,Ke[34]=function(ae){return[Oe(ae),De(ae)]},Ke[35]=Ri,Ke[136]=function(ae){return[Ee(ae),Ie(ae)]},Ke[153]=function(ae){return[Q(ae),Fe(ae)]},Ke[102]=function(ae){return[Ce(ae),me(ae)]},Ke[155]=Vi,Ke[103]=Et,Ke[152]=function(ae){return[Q(ae),Ie(ae)]},Ke[156]=l0,Ke[137]=function(ae){return[Ee(ae),Fe(ae)]},Ke[139]=Ji,Ke[98]=function(ae){return[De(ae),me(ae)]},Ke[99]=Hi,Ke[38]=function(ae){return[Ce(ae),Oe(ae)]},Ke[39]=Ui;function se(ae,_e,je){return(ae-_e)/(je-_e)}function gi(ae){return ae.constructor.toString().indexOf("Array")>-1}function si(ae,_e,je){for(var Ze=ae.length-1,Qe=ae[0].length-1,Ye={rows:Ze,cols:Qe,cells:[]},pe=_e+Math.abs(je),at=0;at<Ze;++at){Ye.cells[at]=[];for(var He=0;He<Qe;++He){var ne=0,ve=ae[at+1][He],ge=ae[at+1][He+1],Le=ae[at][He+1],Me=ae[at][He];if(!(isNaN(ve)||isNaN(ge)||isNaN(Le)||isNaN(Me))){ne|=ve<_e?0:ve>pe?128:64,ne|=ge<_e?0:ge>pe?32:16,ne|=Le<_e?0:Le>pe?8:4,ne|=Me<_e?0:Me>pe?2:1;var R0=+ne,et=0;if(ne===17||ne===18||ne===33||ne===34||ne===38||ne===68||ne===72||ne===98||ne===102||ne===132||ne===136||ne===137||ne===152||ne===153){var ua=(ve+ge+Le+Me)/4;et=ua>pe?2:ua<_e?0:1,ne===34?et===1?ne=35:et===0&&(ne=136):ne===136?et===1?(ne=35,et=4):et===0&&(ne=34):ne===17?et===1?(ne=155,et=4):et===0&&(ne=153):ne===68?et===1?(ne=103,et=4):et===0&&(ne=102):ne===153?et===1&&(ne=155):ne===102?et===1&&(ne=103):ne===152?et<2&&(ne=156,et=1):ne===137?et<2&&(ne=139,et=1):ne===98?et<2&&(ne=99,et=1):ne===38?et<2&&(ne=39,et=1):ne===18?et>0?(ne=156,et=4):ne=152:ne===33?et>0?(ne=139,et=4):ne=137:ne===72?et>0?(ne=99,et=4):ne=98:ne===132&&(et>0?(ne=39,et=4):ne=38)}if(ne!=0&&ne!=170){var Pt,mt,_t,lt,gt,wt,$e,yt;Pt=mt=_t=lt=gt=wt=$e=yt=.5;var Ne=[];ne===1?(_t=1-se(_e,Le,Me),yt=1-se(_e,ve,Me),Ne.push(rt[ne])):ne===169?(_t=se(pe,Me,Le),yt=se(pe,Me,ve),Ne.push(rt[ne])):ne===4?(wt=1-se(_e,ge,Le),lt=se(_e,Me,Le),Ne.push(st[ne])):ne===166?(wt=se(pe,Le,ge),lt=1-se(pe,Le,Me),Ne.push(st[ne])):ne===16?(gt=se(_e,Le,ge),mt=se(_e,ve,ge),Ne.push(xt[ne])):ne===154?(gt=1-se(pe,ge,Le),mt=1-se(pe,ge,ve),Ne.push(xt[ne])):ne===64?($e=se(_e,Me,ve),Pt=1-se(_e,ge,ve),Ne.push(ft[ne])):ne===106?($e=1-se(pe,ve,Me),Pt=se(pe,ve,ge),Ne.push(ft[ne])):ne===168?(lt=se(pe,Me,Le),_t=se(_e,Me,Le),yt=se(_e,Me,ve),$e=se(pe,Me,ve),Ne.push(ht[ne]),Ne.push(rt[ne])):ne===2?(lt=1-se(_e,Le,Me),_t=1-se(pe,Le,Me),yt=1-se(pe,ve,Me),$e=1-se(_e,ve,Me),Ne.push(ht[ne]),Ne.push(rt[ne])):ne===162?(gt=se(pe,Le,ge),wt=se(_e,Le,ge),lt=1-se(_e,Le,Me),_t=1-se(pe,Le,Me),Ne.push(ht[ne]),Ne.push(rt[ne])):ne===8?(gt=1-se(_e,ge,Le),wt=1-se(pe,ge,Le),lt=se(pe,Me,Le),_t=se(_e,Me,Le),Ne.push(xt[ne]),Ne.push(st[ne])):ne===138?(gt=1-se(_e,ge,Le),wt=1-se(pe,ge,Le),Pt=1-se(pe,ge,ve),mt=1-se(_e,ge,ve),Ne.push(xt[ne]),Ne.push(st[ne])):ne===32?(gt=se(pe,Le,ge),wt=se(_e,Le,ge),Pt=se(_e,ve,ge),mt=se(pe,ve,ge),Ne.push(xt[ne]),Ne.push(st[ne])):ne===42?(yt=1-se(pe,ve,Me),$e=1-se(_e,ve,Me),Pt=se(_e,ve,ge),mt=se(pe,ve,ge),Ne.push(dt[ne]),Ne.push(ft[ne])):ne===128&&(yt=se(_e,Me,ve),$e=se(pe,Me,ve),Pt=1-se(pe,ge,ve),mt=1-se(_e,ge,ve),Ne.push(dt[ne]),Ne.push(ft[ne])),ne===5?(wt=1-se(_e,ge,Le),yt=1-se(_e,ve,Me),Ne.push(st[ne])):ne===165?(wt=se(pe,Le,ge),yt=se(pe,Me,ve),Ne.push(st[ne])):ne===20?(lt=se(_e,Me,Le),mt=se(_e,ve,ge),Ne.push(ht[ne])):ne===150?(lt=1-se(pe,Le,Me),mt=1-se(pe,ge,ve),Ne.push(ht[ne])):ne===80?(gt=se(_e,Le,ge),$e=se(_e,Me,ve),Ne.push(xt[ne])):ne===90?(gt=1-se(pe,ge,Le),$e=1-se(pe,ve,Me),Ne.push(xt[ne])):ne===65?(_t=1-se(_e,Le,Me),Pt=1-se(_e,ge,ve),Ne.push(rt[ne])):ne===105?(_t=se(pe,Me,Le),Pt=se(pe,ve,ge),Ne.push(rt[ne])):ne===160?(gt=se(pe,Le,ge),wt=se(_e,Le,ge),yt=se(_e,Me,ve),$e=se(pe,Me,ve),Ne.push(xt[ne]),Ne.push(st[ne])):ne===10?(gt=1-se(_e,ge,Le),wt=1-se(pe,ge,Le),yt=1-se(pe,ve,Me),$e=1-se(_e,ve,Me),Ne.push(xt[ne]),Ne.push(st[ne])):ne===130?(lt=1-se(_e,Le,Me),_t=1-se(pe,Le,Me),Pt=1-se(pe,ge,ve),mt=1-se(_e,ge,ve),Ne.push(ht[ne]),Ne.push(rt[ne])):ne===40?(lt=se(pe,Me,Le),_t=se(_e,Me,Le),Pt=se(_e,ve,ge),mt=se(pe,ve,ge),Ne.push(ht[ne]),Ne.push(rt[ne])):ne===101?(wt=se(pe,Le,ge),Pt=se(pe,ve,ge),Ne.push(st[ne])):ne===69?(wt=1-se(_e,ge,Le),Pt=1-se(_e,ge,ve),Ne.push(st[ne])):ne===149?(yt=se(pe,Me,ve),mt=1-se(pe,ge,ve),Ne.push(dt[ne])):ne===21?(yt=1-se(_e,ve,Me),mt=se(_e,ve,ge),Ne.push(dt[ne])):ne===86?(lt=1-se(pe,Le,Me),$e=1-se(pe,ve,Me),Ne.push(ht[ne])):ne===84?(lt=se(_e,Me,Le),$e=se(_e,Me,ve),Ne.push(ht[ne])):ne===89?(gt=1-se(pe,ge,Le),_t=se(pe,Me,Le),Ne.push(rt[ne])):ne===81?(gt=se(_e,Le,ge),_t=1-se(_e,Le,Me),Ne.push(rt[ne])):ne===96?(gt=se(pe,Le,ge),wt=se(_e,Le,ge),$e=se(_e,Me,ve),Pt=se(pe,ve,ge),Ne.push(xt[ne]),Ne.push(st[ne])):ne===74?(gt=1-se(_e,ge,Le),wt=1-se(pe,ge,Le),$e=1-se(pe,ve,Me),Pt=1-se(_e,ge,ve),Ne.push(xt[ne]),Ne.push(st[ne])):ne===24?(gt=1-se(pe,ge,Le),lt=se(pe,Me,Le),_t=se(_e,Me,Le),mt=se(_e,ve,ge),Ne.push(xt[ne]),Ne.push(rt[ne])):ne===146?(gt=se(_e,Le,ge),lt=1-se(_e,Le,Me),_t=1-se(pe,Le,Me),mt=1-se(pe,ge,ve),Ne.push(xt[ne]),Ne.push(rt[ne])):ne===6?(wt=1-se(_e,ge,Le),lt=1-se(pe,Le,Me),yt=1-se(pe,ve,Me),$e=1-se(_e,ve,Me),Ne.push(st[ne]),Ne.push(ht[ne])):ne===164?(wt=se(pe,Le,ge),lt=se(_e,Me,Le),yt=se(_e,Me,ve),$e=se(pe,Me,ve),Ne.push(st[ne]),Ne.push(ht[ne])):ne===129?(_t=1-se(_e,Le,Me),yt=se(pe,Me,ve),Pt=1-se(pe,ge,ve),mt=1-se(_e,ge,ve),Ne.push(rt[ne]),Ne.push(dt[ne])):ne===41?(_t=se(pe,Me,Le),yt=1-se(_e,ve,Me),Pt=se(_e,ve,ge),mt=se(pe,ve,ge),Ne.push(rt[ne]),Ne.push(dt[ne])):ne===66?(lt=1-se(_e,Le,Me),_t=1-se(pe,Le,Me),$e=1-se(pe,ve,Me),Pt=1-se(_e,ge,ve),Ne.push(ht[ne]),Ne.push(rt[ne])):ne===104?(lt=se(pe,Me,Le),_t=se(_e,Me,Le),$e=se(_e,Me,ve),Pt=se(pe,ve,ge),Ne.push(rt[ne]),Ne.push(Ct[ne])):ne===144?(gt=se(_e,Le,ge),yt=se(_e,Me,ve),$e=se(pe,Me,ve),mt=1-se(pe,ge,ve),Ne.push(xt[ne]),Ne.push(ft[ne])):ne===26?(gt=1-se(pe,ge,Le),yt=1-se(pe,ve,Me),$e=1-se(_e,ve,Me),mt=se(_e,ve,ge),Ne.push(xt[ne]),Ne.push(ft[ne])):ne===36?(wt=se(pe,Le,ge),lt=se(_e,Me,Le),Pt=se(_e,ve,ge),mt=se(pe,ve,ge),Ne.push(st[ne]),Ne.push(ht[ne])):ne===134?(wt=1-se(_e,ge,Le),lt=1-se(pe,Le,Me),Pt=1-se(pe,ge,ve),mt=1-se(_e,ge,ve),Ne.push(st[ne]),Ne.push(ht[ne])):ne===9?(gt=1-se(_e,ge,Le),wt=1-se(pe,ge,Le),_t=se(pe,Me,Le),yt=1-se(_e,ve,Me),Ne.push(xt[ne]),Ne.push(st[ne])):ne===161?(gt=se(pe,Le,ge),wt=se(_e,Le,ge),_t=1-se(_e,Le,Me),yt=se(pe,Me,ve),Ne.push(xt[ne]),Ne.push(st[ne])):ne===37?(wt=se(pe,Le,ge),yt=1-se(_e,ve,Me),Pt=se(_e,ve,ge),mt=se(pe,ve,ge),Ne.push(st[ne]),Ne.push(dt[ne])):ne===133?(wt=1-se(_e,ge,Le),yt=se(pe,Me,ve),Pt=1-se(pe,ge,ve),mt=1-se(_e,ge,ve),Ne.push(st[ne]),Ne.push(dt[ne])):ne===148?(lt=se(_e,Me,Le),yt=se(_e,Me,ve),$e=se(pe,Me,ve),mt=1-se(pe,ge,ve),Ne.push(ht[ne]),Ne.push(ft[ne])):ne===22?(lt=1-se(pe,Le,Me),yt=1-se(pe,ve,Me),$e=1-se(_e,ve,Me),mt=se(_e,ve,ge),Ne.push(ht[ne]),Ne.push(ft[ne])):ne===82?(gt=se(_e,Le,ge),lt=1-se(_e,Le,Me),_t=1-se(pe,Le,Me),$e=1-se(pe,ve,Me),Ne.push(xt[ne]),Ne.push(rt[ne])):ne===88?(gt=1-se(pe,ge,Le),lt=se(pe,Me,Le),_t=se(_e,Me,Le),$e=se(_e,Me,ve),Ne.push(xt[ne]),Ne.push(rt[ne])):ne===73?(gt=1-se(_e,ge,Le),wt=1-se(pe,ge,Le),_t=se(pe,Me,Le),Pt=1-se(_e,ge,ve),Ne.push(xt[ne]),Ne.push(st[ne])):ne===97?(gt=se(pe,Le,ge),wt=se(_e,Le,ge),_t=1-se(_e,Le,Me),Pt=se(pe,ve,ge),Ne.push(xt[ne]),Ne.push(st[ne])):ne===145?(gt=se(_e,Le,ge),_t=1-se(_e,Le,Me),yt=se(pe,Me,ve),mt=1-se(pe,ge,ve),Ne.push(xt[ne]),Ne.push(dt[ne])):ne===25?(gt=1-se(pe,ge,Le),_t=se(pe,Me,Le),yt=1-se(_e,ve,Me),mt=se(_e,ve,ge),Ne.push(xt[ne]),Ne.push(dt[ne])):ne===70?(wt=1-se(_e,ge,Le),lt=1-se(pe,Le,Me),$e=1-se(pe,ve,Me),Pt=1-se(_e,ge,ve),Ne.push(st[ne]),Ne.push(ht[ne])):ne===100?(wt=se(pe,Le,ge),lt=se(_e,Me,Le),$e=se(_e,Me,ve),Pt=se(pe,ve,ge),Ne.push(st[ne]),Ne.push(ht[ne])):ne===34?(et===0?(gt=1-se(_e,ge,Le),wt=1-se(pe,ge,Le),lt=se(pe,Me,Le),_t=se(_e,Me,Le),yt=se(_e,Me,ve),$e=se(pe,Me,ve),Pt=1-se(pe,ge,ve),mt=1-se(_e,ge,ve)):(gt=se(pe,Le,ge),wt=se(_e,Le,ge),lt=1-se(_e,Le,Me),_t=1-se(pe,Le,Me),yt=1-se(pe,ve,Me),$e=1-se(_e,ve,Me),Pt=se(_e,ve,ge),mt=se(pe,ve,ge)),Ne.push(xt[ne]),Ne.push(st[ne]),Ne.push(dt[ne]),Ne.push(ft[ne])):ne===35?(et===4?(gt=1-se(_e,ge,Le),wt=1-se(pe,ge,Le),lt=se(pe,Me,Le),_t=se(_e,Me,Le),yt=se(_e,Me,ve),$e=se(pe,Me,ve),Pt=1-se(pe,ge,ve),mt=1-se(_e,ge,ve)):(gt=se(pe,Le,ge),wt=se(_e,Le,ge),lt=1-se(_e,Le,Me),_t=1-se(pe,Le,Me),yt=1-se(pe,ve,Me),$e=1-se(_e,ve,Me),Pt=se(_e,ve,ge),mt=se(pe,ve,ge)),Ne.push(xt[ne]),Ne.push(st[ne]),Ne.push(rt[ne]),Ne.push(ft[ne])):ne===136?(et===0?(gt=se(pe,Le,ge),wt=se(_e,Le,ge),lt=1-se(_e,Le,Me),_t=1-se(pe,Le,Me),yt=1-se(pe,ve,Me),$e=1-se(_e,ve,Me),Pt=se(_e,ve,ge),mt=se(pe,ve,ge)):(gt=1-se(_e,ge,Le),wt=1-se(pe,ge,Le),lt=se(pe,Me,Le),_t=se(_e,Me,Le),yt=se(_e,Me,ve),$e=se(pe,Me,ve),Pt=1-se(pe,ge,ve),mt=1-se(_e,ge,ve)),Ne.push(xt[ne]),Ne.push(st[ne]),Ne.push(dt[ne]),Ne.push(ft[ne])):ne===153?(et===0?(gt=se(_e,Le,ge),_t=1-se(_e,Le,Me),yt=1-se(_e,ve,Me),mt=se(_e,ve,ge)):(gt=1-se(pe,ge,Le),_t=se(pe,Me,Le),yt=se(pe,Me,ve),mt=1-se(pe,ge,ve)),Ne.push(xt[ne]),Ne.push(rt[ne])):ne===102?(et===0?(wt=1-se(_e,ge,Le),lt=se(_e,Me,Le),$e=se(_e,Me,ve),Pt=1-se(_e,ge,ve)):(wt=se(pe,Le,ge),lt=1-se(pe,Le,Me),$e=1-se(pe,ve,Me),Pt=se(pe,ve,ge)),Ne.push(st[ne]),Ne.push(ft[ne])):ne===155?(et===4?(gt=se(_e,Le,ge),_t=1-se(_e,Le,Me),yt=1-se(_e,ve,Me),mt=se(_e,ve,ge)):(gt=1-se(pe,ge,Le),_t=se(pe,Me,Le),yt=se(pe,Me,ve),mt=1-se(pe,ge,ve)),Ne.push(xt[ne]),Ne.push(dt[ne])):ne===103?(et===4?(wt=1-se(_e,ge,Le),lt=se(_e,Me,Le),$e=se(_e,Me,ve),Pt=1-se(_e,ge,ve)):(wt=se(pe,Le,ge),lt=1-se(pe,Le,Me),$e=1-se(pe,ve,Me),Pt=se(pe,ve,ge)),Ne.push(st[ne]),Ne.push(ht[ne])):ne===152?(et===0?(gt=se(_e,Le,ge),lt=1-se(_e,Le,Me),_t=1-se(pe,Le,Me),yt=1-se(pe,ve,Me),$e=1-se(_e,ve,Me),mt=se(_e,ve,ge)):(gt=1-se(pe,ge,Le),lt=se(pe,Me,Le),_t=se(_e,Me,Le),yt=se(_e,Me,ve),$e=se(pe,Me,ve),mt=1-se(pe,ge,ve)),Ne.push(xt[ne]),Ne.push(ht[ne]),Ne.push(rt[ne])):ne===156?(et===4?(gt=se(_e,Le,ge),lt=1-se(_e,Le,Me),_t=1-se(pe,Le,Me),yt=1-se(pe,ve,Me),$e=1-se(_e,ve,Me),mt=se(_e,ve,ge)):(gt=1-se(pe,ge,Le),lt=se(pe,Me,Le),_t=se(_e,Me,Le),yt=se(_e,Me,ve),$e=se(pe,Me,ve),mt=1-se(pe,ge,ve)),Ne.push(xt[ne]),Ne.push(rt[ne]),Ne.push(ft[ne])):ne===137?(et===0?(gt=se(pe,Le,ge),wt=se(_e,Le,ge),_t=1-se(_e,Le,Me),yt=1-se(_e,ve,Me),Pt=se(_e,ve,ge),mt=se(pe,ve,ge)):(gt=1-se(_e,ge,Le),wt=1-se(pe,ge,Le),_t=se(pe,Me,Le),yt=se(pe,Me,ve),Pt=1-se(pe,ge,ve),mt=1-se(_e,ge,ve)),Ne.push(xt[ne]),Ne.push(st[ne]),Ne.push(rt[ne])):ne===139?(et===4?(gt=se(pe,Le,ge),wt=se(_e,Le,ge),_t=1-se(_e,Le,Me),yt=1-se(_e,ve,Me),Pt=se(_e,ve,ge),mt=se(pe,ve,ge)):(gt=1-se(_e,ge,Le),wt=1-se(pe,ge,Le),_t=se(pe,Me,Le),yt=se(pe,Me,ve),Pt=1-se(pe,ge,ve),mt=1-se(_e,ge,ve)),Ne.push(xt[ne]),Ne.push(st[ne]),Ne.push(dt[ne])):ne===98?(et===0?(gt=1-se(_e,ge,Le),wt=1-se(pe,ge,Le),lt=se(pe,Me,Le),_t=se(_e,Me,Le),$e=se(_e,Me,ve),Pt=1-se(_e,ge,ve)):(gt=se(pe,Le,ge),wt=se(_e,Le,ge),lt=1-se(_e,Le,Me),_t=1-se(pe,Le,Me),$e=1-se(pe,ve,Me),Pt=se(pe,ve,ge)),Ne.push(xt[ne]),Ne.push(st[ne]),Ne.push(ft[ne])):ne===99?(et===4?(gt=1-se(_e,ge,Le),wt=1-se(pe,ge,Le),lt=se(pe,Me,Le),_t=se(_e,Me,Le),$e=se(_e,Me,ve),Pt=1-se(_e,ge,ve)):(gt=se(pe,Le,ge),wt=se(_e,Le,ge),lt=1-se(_e,Le,Me),_t=1-se(pe,Le,Me),$e=1-se(pe,ve,Me),Pt=se(pe,ve,ge)),Ne.push(xt[ne]),Ne.push(st[ne]),Ne.push(rt[ne])):ne===38?(et===0?(wt=1-se(_e,ge,Le),lt=se(_e,Me,Le),yt=se(_e,Me,ve),$e=se(pe,Me,ve),Pt=1-se(pe,ge,ve),mt=1-se(_e,ge,ve)):(wt=se(pe,Le,ge),lt=1-se(pe,Le,Me),yt=1-se(pe,ve,Me),$e=1-se(_e,ve,Me),Pt=se(_e,ve,ge),mt=se(pe,ve,ge)),Ne.push(st[ne]),Ne.push(dt[ne]),Ne.push(ft[ne])):ne===39?(et===4?(wt=1-se(_e,ge,Le),lt=se(_e,Me,Le),yt=se(_e,Me,ve),$e=se(pe,Me,ve),Pt=1-se(pe,ge,ve),mt=1-se(_e,ge,ve)):(wt=se(pe,Le,ge),lt=1-se(pe,Le,Me),yt=1-se(pe,ve,Me),$e=1-se(_e,ve,Me),Pt=se(_e,ve,ge),mt=se(pe,ve,ge)),Ne.push(st[ne]),Ne.push(ht[ne]),Ne.push(ft[ne])):ne===85&&(gt=1,wt=0,lt=1,_t=0,yt=0,$e=1,Pt=0,mt=1),(Pt<0||Pt>1||mt<0||mt>1||gt<0||gt>1||lt<0||lt>1||yt<0||yt>1||$e<0||$e>1)&&console.log("MarchingSquaresJS-isoBands: "+ne+" "+R0+" "+ve+","+ge+","+Le+","+Me+" "+et+" "+Pt+" "+mt+" "+gt+" "+wt+" "+lt+" "+_t+" "+yt+" "+$e),Ye.cells[at][He]={cval:ne,cval_real:R0,flipped:et,topleft:Pt,topright:mt,righttop:gt,rightbottom:wt,bottomright:lt,bottomleft:_t,leftbottom:yt,lefttop:$e,edges:Ne}}}}}return Ye}function u0(ae){for(var _e=[],je=ae.rows,Ze=ae.cols,Qe=[],Ye=0;Ye<je;Ye++)for(var pe=0;pe<Ze;pe++)if(typeof ae.cells[Ye][pe]<"u"&&ae.cells[Ye][pe].edges.length>0){var at=ae.cells[Ye][pe],He=Pi(at),ne=null,ve=pe,ge=Ye;He!==null&&Qe.push([He.p[0]+ve,He.p[1]+ge]);do{if(ne=la(ae.cells[ge][ve],He.x,He.y,He.o),ne!==null)Qe.push([ne.p[0]+ve,ne.p[1]+ge]),ve+=ne.x,ge+=ne.y,He=ne;else break;if(ge<0||ge>=je||ve<0||ve>=Ze||typeof ae.cells[ge][ve]>"u"){ve-=ne.x,ge-=ne.y;var Le=Ci(ae,ve,ge,ne.x,ne.y,ne.o);if(Le!==null)Le.path.forEach(function(Me){Qe.push(Me)}),ve=Le.i,ge=Le.j,He=Le;else break}}while(typeof ae.cells[ge][ve]<"u"&&ae.cells[ge][ve].edges.length>0);_e.push(Qe),Qe=[],ae.cells[Ye][pe].edges.length>0&&pe--}return _e}function Ci(ae,_e,je,Ze,Qe,Ye){for(var pe=ae.cells[je][_e],at=pe.cval_real,He=_e+Ze,ne=je+Qe,ve=[],ge=!1;!ge;){if(typeof ae.cells[ne]>"u"||typeof ae.cells[ne][He]>"u")if(ne-=Qe,He-=Ze,pe=ae.cells[ne][He],at=pe.cval_real,Qe===-1)if(Ye===0)if(at&D)ve.push([He,ne]),Ze=-1,Qe=0,Ye=0;else if(at&R)ve.push([He+1,ne]),Ze=1,Qe=0,Ye=0;else{ve.push([He+pe.bottomright,ne]),Ze=0,Qe=1,Ye=1,ge=!0;break}else if(at&D)ve.push([He,ne]),Ze=-1,Qe=0,Ye=0;else if(at&R){ve.push([He+pe.bottomright,ne]),Ze=0,Qe=1,Ye=1,ge=!0;break}else{ve.push([He+pe.bottomleft,ne]),Ze=0,Qe=1,Ye=0,ge=!0;break}else if(Qe===1)if(Ye===0)if(at&L)ve.push([He+1,ne+1]),Ze=1,Qe=0,Ye=1;else if(at&T){ve.push([He+pe.topleft,ne+1]),Ze=0,Qe=-1,Ye=0,ge=!0;break}else{ve.push([He+pe.topright,ne+1]),Ze=0,Qe=-1,Ye=1,ge=!0;break}else at&L?(ve.push([He+1,ne+1]),Ze=1,Qe=0,Ye=1):(ve.push([He+1,ne+1]),Ze=1,Qe=0,Ye=1);else if(Ze===-1)if(Ye===0)if(at&T)ve.push([He,ne+1]),Ze=0,Qe=1,Ye=0;else if(at&D){ve.push([He,ne+pe.leftbottom]),Ze=1,Qe=0,Ye=0,ge=!0;break}else{ve.push([He,ne+pe.lefttop]),Ze=1,Qe=0,Ye=1,ge=!0;break}else if(at&T)ve.push([He,ne+1]),Ze=0,Qe=1,Ye=0;else{console.log("MarchingSquaresJS-isoBands: wtf");break}else if(Ze===1)if(Ye===0)if(at&R)ve.push([He+1,ne]),Ze=0,Qe=-1,Ye=1;else{ve.push([He+1,ne+pe.rightbottom]),Ze=-1,Qe=0,Ye=0,ge=!0;break}else if(at&R)ve.push([He+1,ne]),Ze=0,Qe=-1,Ye=1;else if(at&L){ve.push([He+1,ne+pe.righttop]),Ze=-1,Qe=0,Ye=1;break}else{ve.push([He+1,ne+pe.rightbottom]),Ze=-1,Qe=0,Ye=0,ge=!0;break}else{console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}else if(pe=ae.cells[ne][He],at=pe.cval_real,Ze===-1)if(Ye===0)if(typeof ae.cells[ne-1]<"u"&&typeof ae.cells[ne-1][He]<"u")Ze=0,Qe=-1,Ye=1;else if(at&D)ve.push([He,ne]);else{ve.push([He+pe.bottomright,ne]),Ze=0,Qe=1,Ye=1,ge=!0;break}else if(at&T)console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!");else{console.log("MarchingSquaresJS-isoBands: found entry from top at "+He+","+ne);break}else if(Ze===1)if(Ye===0){console.log("MarchingSquaresJS-isoBands: wtf");break}else if(typeof ae.cells[ne+1]<"u"&&typeof ae.cells[ne+1][He]<"u")Ze=0,Qe=1,Ye=0;else if(at&L)ve.push([He+1,ne+1]),Ze=1,Qe=0,Ye=1;else{ve.push([He+pe.topleft,ne+1]),Ze=0,Qe=-1,Ye=0,ge=!0;break}else if(Qe===-1)if(Ye===1)if(typeof ae.cells[ne][He+1]<"u")Ze=1,Qe=0,Ye=1;else if(at&R)ve.push([He+1,ne]),Ze=0,Qe=-1,Ye=1;else{ve.push([He+1,ne+pe.righttop]),Ze=-1,Qe=0,Ye=1,ge=!0;break}else{console.log("MarchingSquaresJS-isoBands: wtf");break}else if(Qe===1)if(Ye===0)if(typeof ae.cells[ne][He-1]<"u")Ze=-1,Qe=0,Ye=0;else if(at&T)ve.push([He,ne+1]),Ze=0,Qe=1,Ye=0;else{ve.push([He,ne+pe.leftbottom]),Ze=1,Qe=0,Ye=0,ge=!0;break}else{console.log("MarchingSquaresJS-isoBands: wtf");break}else{console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(He+=Ze,ne+=Qe,He===_e&&ne===je)break}return{path:ve,i:He,j:ne,x:Ze,y:Qe,o:Ye}}function ta(ae,_e){delete ae.edges[_e];for(var je=_e+1;je<ae.edges.length;je++)ae.edges[je-1]=ae.edges[je];ae.edges.pop()}function Pi(ae){if(ae.edges.length>0){var _e=ae.edges[ae.edges.length-1],je=ae.cval_real;switch(_e){case 0:return je&L?{p:[1,ae.righttop],x:-1,y:0,o:1}:{p:[ae.topleft,1],x:0,y:-1,o:0};case 1:return je&R?{p:[ae.topleft,1],x:0,y:-1,o:0}:{p:[1,ae.rightbottom],x:-1,y:0,o:0};case 2:return je&R?{p:[ae.bottomright,0],x:0,y:1,o:1}:{p:[ae.topleft,1],x:0,y:-1,o:0};case 3:return je&D?{p:[ae.topleft,1],x:0,y:-1,o:0}:{p:[ae.bottomleft,0],x:0,y:1,o:0};case 4:return je&L?{p:[1,ae.righttop],x:-1,y:0,o:1}:{p:[ae.topright,1],x:0,y:-1,o:1};case 5:return je&R?{p:[ae.topright,1],x:0,y:-1,o:1}:{p:[1,ae.rightbottom],x:-1,y:0,o:0};case 6:return je&R?{p:[ae.bottomright,0],x:0,y:1,o:1}:{p:[ae.topright,1],x:0,y:-1,o:1};case 7:return je&D?{p:[ae.topright,1],x:0,y:-1,o:1}:{p:[ae.bottomleft,0],x:0,y:1,o:0};case 8:return je&R?{p:[ae.bottomright,0],x:0,y:1,o:1}:{p:[1,ae.righttop],x:-1,y:0,o:1};case 9:return je&D?{p:[1,ae.righttop],x:-1,y:0,o:1}:{p:[ae.bottomleft,0],x:0,y:1,o:0};case 10:return je&D?{p:[0,ae.leftbottom],x:1,y:0,o:0}:{p:[1,ae.righttop],x:-1,y:0,o:1};case 11:return je&T?{p:[1,ae.righttop],x:-1,y:0,o:1}:{p:[0,ae.lefttop],x:1,y:0,o:1};case 12:return je&R?{p:[ae.bottomright,0],x:0,y:1,o:1}:{p:[1,ae.rightbottom],x:-1,y:0,o:0};case 13:return je&D?{p:[1,ae.rightbottom],x:-1,y:0,o:0}:{p:[ae.bottomleft,0],x:0,y:1,o:0};case 14:return je&D?{p:[0,ae.leftbottom],x:1,y:0,o:0}:{p:[1,ae.rightbottom],x:-1,y:0,o:0};case 15:return je&T?{p:[1,ae.rightbottom],x:-1,y:0,o:0}:{p:[0,ae.lefttop],x:1,y:0,o:1};case 16:return je&R?{p:[ae.bottomright,0],x:0,y:1,o:1}:{p:[0,ae.leftbottom],x:1,y:0,o:0};case 17:return je&T?{p:[ae.bottomright,0],x:0,y:1,o:1}:{p:[0,ae.lefttop],x:1,y:0,o:1};case 18:return je&D?{p:[0,ae.leftbottom],x:1,y:0,o:0}:{p:[ae.bottomleft,0],x:0,y:1,o:0};case 19:return je&T?{p:[ae.bottomleft,0],x:0,y:1,o:0}:{p:[0,ae.lefttop],x:1,y:0,o:1};case 20:return je&T?{p:[ae.topleft,1],x:0,y:-1,o:0}:{p:[0,ae.leftbottom],x:1,y:0,o:0};case 21:return je&L?{p:[0,ae.leftbottom],x:1,y:0,o:0}:{p:[ae.topright,1],x:0,y:-1,o:1};case 22:return je&T?{p:[ae.topleft,1],x:0,y:-1,o:0}:{p:[0,ae.lefttop],x:1,y:0,o:1};case 23:return je&L?{p:[0,ae.lefttop],x:1,y:0,o:1}:{p:[ae.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(ae);break}}return null}function la(ae,_e,je,Ze){var Qe,Ye,pe,at,He=ae.cval,ne;switch(_e){case-1:switch(Ze){case 0:Qe=st[He],pe=q[He],at=te[He],ne=ie[He];break;default:Qe=xt[He],pe=J[He],at=z[He],ne=fe[He];break}break;case 1:switch(Ze){case 0:Qe=dt[He],pe=ze[He],at=Ve[He],ne=ye[He];break;default:Qe=ft[He],pe=Te[He],at=Re[He],ne=Be[He];break}break;default:switch(je){case-1:switch(Ze){case 0:Qe=Ct[He],pe=N[He],at=k[He],ne=B[He];break;default:Qe=nt[He],pe=$[He],at=H[He],ne=W[He];break}break;case 1:switch(Ze){case 0:Qe=rt[He],pe=xe[He],at=oe[He],ne=de[He];break;default:Qe=ht[He],pe=X[He],at=he[He],ne=Se[He];break}break}break}if(Ye=ae.edges.indexOf(Qe),typeof ae.edges[Ye]<"u")ta(ae,Ye);else return null;switch(He=ae.cval_real,Qe){case 0:He&L?(_e=ae.topleft,je=1):(_e=1,je=ae.righttop);break;case 1:He&R?(_e=1,je=ae.rightbottom):(_e=ae.topleft,je=1);break;case 2:He&R?(_e=ae.topleft,je=1):(_e=ae.bottomright,je=0);break;case 3:He&D?(_e=ae.bottomleft,je=0):(_e=ae.topleft,je=1);break;case 4:He&L?(_e=ae.topright,je=1):(_e=1,je=ae.righttop);break;case 5:He&R?(_e=1,je=ae.rightbottom):(_e=ae.topright,je=1);break;case 6:He&R?(_e=ae.topright,je=1):(_e=ae.bottomright,je=0);break;case 7:He&D?(_e=ae.bottomleft,je=0):(_e=ae.topright,je=1);break;case 8:He&R?(_e=1,je=ae.righttop):(_e=ae.bottomright,je=0);break;case 9:He&D?(_e=ae.bottomleft,je=0):(_e=1,je=ae.righttop);break;case 10:He&D?(_e=1,je=ae.righttop):(_e=0,je=ae.leftbottom);break;case 11:He&T?(_e=0,je=ae.lefttop):(_e=1,je=ae.righttop);break;case 12:He&R?(_e=1,je=ae.rightbottom):(_e=ae.bottomright,je=0);break;case 13:He&D?(_e=ae.bottomleft,je=0):(_e=1,je=ae.rightbottom);break;case 14:He&D?(_e=1,je=ae.rightbottom):(_e=0,je=ae.leftbottom);break;case 15:He&T?(_e=0,je=ae.lefttop):(_e=1,je=ae.rightbottom);break;case 16:He&R?(_e=0,je=ae.leftbottom):(_e=ae.bottomright,je=0);break;case 17:He&T?(_e=0,je=ae.lefttop):(_e=ae.bottomright,je=0);break;case 18:He&D?(_e=ae.bottomleft,je=0):(_e=0,je=ae.leftbottom);break;case 19:He&T?(_e=0,je=ae.lefttop):(_e=ae.bottomleft,je=0);break;case 20:He&T?(_e=0,je=ae.leftbottom):(_e=ae.topleft,je=1);break;case 21:He&L?(_e=ae.topright,je=1):(_e=0,je=ae.leftbottom);break;case 22:He&T?(_e=0,je=ae.lefttop):(_e=ae.topleft,je=1);break;case 23:He&L?(_e=ae.topright,je=1):(_e=0,je=ae.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(ae),null}return(typeof _e>"u"||typeof je>"u"||typeof pe>"u"||typeof at>"u"||typeof ne>"u")&&(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(ae),console.log(_e+" "+je+" "+pe+" "+at+" "+ne)),{p:[_e,je],x:pe,y:at,o:ne}}function qt(ae){var _e=[],je=0;return ae.cells.forEach(function(Ze,Qe){Ze.forEach(function(Ye,pe){if(typeof Ye<"u"){var at=Ke[Ye.cval](Ye);typeof at=="object"&&gi(at)?typeof at[0]=="object"&&gi(at[0])?typeof at[0][0]=="object"&&gi(at[0][0])?at.forEach(function(He){He.forEach(function(ne){ne[0]+=pe,ne[1]+=Qe}),_e[je++]=He}):(at.forEach(function(He){He[0]+=pe,He[1]+=Qe}),_e[je++]=at):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),_e}function Gt(ae,_e,je){if(je=je||{},!n.isObject(je))throw new Error("options is invalid");var Ze=je.zProperty||"elevation",Qe=je.commonProperties||{},Ye=je.breaksProperties||[];if(s.collectionOf(ae,"Point","Input must contain Points"),!_e)throw new Error("breaks is required");if(!Array.isArray(_e))throw new Error("breaks is not an Array");if(!n.isObject(Qe))throw new Error("commonProperties is not an Object");if(!Array.isArray(Ye))throw new Error("breaksProperties is not an Array");var pe=C(ae,{zProperty:Ze,flip:!0}),at=We(pe,_e,Ze);at=Kt(at,pe,ae);var He=at.map(function(ne,ve){if(Ye[ve]&&!n.isObject(Ye[ve]))throw new Error("Each mappedProperty is required to be an Object");var ge=g.default({},Qe,Ye[ve]);ge[Ze]=ne[Ze];var Le=n.multiPolygon(ne.groupedRings,ge);return Le});return n.featureCollection(He)}function We(ae,_e,je){for(var Ze=[],Qe=1;Qe<_e.length;Qe++){var Ye=+_e[Qe-1],pe=+_e[Qe],at=M(ae,Ye,pe-Ye),He=a0(at),ne=Ut(He),ve={};ve.groupedRings=ne,ve[je]=Ye+"-"+pe,Ze.push(ve)}return Ze}function Kt(ae,_e,je){var Ze=l.default(je),Qe=Ze[2]-Ze[0],Ye=Ze[3]-Ze[1],pe=Ze[0],at=Ze[1],He=_e[0].length-1,ne=_e.length-1,ve=Qe/He,ge=Ye/ne,Le=function(Me){Me[0]=Me[0]*ve+pe,Me[1]=Me[1]*ge+at};return ae.forEach(function(Me){Me.groupedRings.forEach(function(R0){R0.forEach(function(et){et.forEach(Le)})})}),ae}function a0(ae){var _e=[],je=[];ae.forEach(function(Qe){var Ye=h.default(n.polygon([Qe]));je.push(Ye),_e.push({ring:Qe,area:Ye})}),je.sort(function(Qe,Ye){return Ye-Qe});var Ze=[];return je.forEach(function(Qe){for(var Ye=0;Ye<_e.length;Ye++)if(_e[Ye].area===Qe){Ze.push(_e[Ye].ring),_e.splice(Ye,1);break}}),Ze}function Ut(ae){for(var _e=ae.map(function(He){return{lrCoordinates:He,grouped:!1}}),je=[];!Wi(_e);)for(var Ze=0;Ze<_e.length;Ze++)if(!_e[Ze].grouped){var Qe=[];Qe.push(_e[Ze].lrCoordinates),_e[Ze].grouped=!0;for(var Ye=n.polygon([_e[Ze].lrCoordinates]),pe=Ze+1;pe<_e.length;pe++)if(!_e[pe].grouped){var at=n.polygon([_e[pe].lrCoordinates]);C0(at,Ye)&&(Qe.push(_e[pe].lrCoordinates),_e[pe].grouped=!0)}je.push(Qe)}return je}function C0(ae,_e){for(var je=m.default(ae),Ze=0;Ze<je.features.length;Ze++)if(!f.default(je.features[Ze],_e))return!1;return!0}function Wi(ae){for(var _e=0;_e<ae.length;_e++)if(ae[_e].grouped===!1)return!1;return!0}return js$C.exports=Gt,js$C.exports.default=Gt,js$C.exports}var js$B={exports:{}},hasRequiredJs$C;function requireJs$C(){if(hasRequiredJs$C)return js$B.exports;hasRequiredJs$C=1;var r=requireJs$1f(),e=requireJs$I(),t=requireJs$16(),i=requireJs$H(),s=requireJs$1w(),n=requireJs$1F(),o=requireJs$1D(),c=requireJs$1G();function _(E){return E&&typeof E=="object"&&"default"in E?E:{default:E}}var l=_(r),h=_(e),f=_(t),m=_(i),g=_(s);function C(E,P,w){if(w=w||{},!c.isObject(w))throw new Error("options is invalid");var M=w.pivot,T=w.mutate;if(!E)throw new Error("geojson is required");if(P==null||isNaN(P))throw new Error("angle is required");return P===0||(M||(M=l.default(E)),(T===!1||T===void 0)&&(E=g.default(E)),n.coordEach(E,function(L){var R=h.default(M,L),D=R+P,N=f.default(M,L),k=o.getCoords(m.default(M,N,D));L[0]=k[0],L[1]=k[1]})),E}return js$B.exports=C,js$B.exports.default=C,js$B.exports}var js$A={exports:{}},hasRequiredJs$B;function requireJs$B(){if(hasRequiredJs$B)return js$A.exports;hasRequiredJs$B=1;var r=requireJs$1w(),e=requireJs$1g(),t=requireJs$1f(),i=requireJs$1E(),s=requireJs$I(),n=requireJs$16(),o=requireJs$H(),c=requireJs$1F(),_=requireJs$1G(),l=requireJs$1D();function h(R){return R&&typeof R=="object"&&"default"in R?R:{default:R}}var f=h(r),m=h(e),g=h(t),C=h(i),E=h(s),P=h(n),w=h(o);function M(R,D,N){if(N=N||{},!_.isObject(N))throw new Error("options is invalid");var k=N.origin,B=N.mutate;if(!R)throw new Error("geojson required");if(typeof D!="number"||D===0)throw new Error("invalid factor");var $=Array.isArray(k)||typeof k=="object";return B!==!0&&(R=f.default(R)),R.type==="FeatureCollection"&&!$?(c.featureEach(R,function(H,W){R.features[W]=T(H,D,k)}),R):T(R,D,k)}function T(R,D,N){var k=l.getType(R)==="Point";return N=L(R,N),D===1||k||c.coordEach(R,function(B){var $=P.default(N,B),H=E.default(N,B),W=$*D,J=l.getCoords(w.default(N,W,H));B[0]=J[0],B[1]=J[1],B.length===3&&(B[2]*=D)}),R}function L(R,D){if(D==null&&(D="centroid"),Array.isArray(D)||typeof D=="object")return l.getCoord(D);var N=R.bbox?R.bbox:C.default(R),k=N[0],B=N[1],$=N[2],H=N[3];switch(D){case"sw":case"southwest":case"westsouth":case"bottomleft":return _.point([k,B]);case"se":case"southeast":case"eastsouth":case"bottomright":return _.point([$,B]);case"nw":case"northwest":case"westnorth":case"topleft":return _.point([k,H]);case"ne":case"northeast":case"eastnorth":case"topright":return _.point([$,H]);case"center":return m.default(R);case void 0:case null:case"centroid":return g.default(R);default:throw new Error("invalid origin")}}return js$A.exports=M,js$A.exports.default=M,js$A.exports}var js$z={exports:{}},hasRequiredJs$A;function requireJs$A(){if(hasRequiredJs$A)return js$z.exports;hasRequiredJs$A=1;var r=requireJs$1F(),e=requireJs$1G(),t=requireJs$1D(),i=requireJs$1w(),s=requireJs$H();function n(l){return l&&typeof l=="object"&&"default"in l?l:{default:l}}var o=n(i),c=n(s);function _(l,h,f,m){if(m=m||{},!e.isObject(m))throw new Error("options is invalid");var g=m.units,C=m.zTranslation,E=m.mutate;if(!l)throw new Error("geojson is required");if(h==null||isNaN(h))throw new Error("distance is required");if(C&&typeof C!="number"&&isNaN(C))throw new Error("zTranslation is not a number");if(C=C!==void 0?C:0,h===0&&C===0)return l;if(f==null||isNaN(f))throw new Error("direction is required");return h<0&&(h=-h,f=f+180),(E===!1||E===void 0)&&(l=o.default(l)),r.coordEach(l,function(P){var w=t.getCoords(c.default(P,h,f,{units:g}));P[0]=w[0],P[1]=w[1],C&&P.length===3&&(P[2]+=C)}),l}return js$z.exports=_,js$z.exports.default=_,js$z.exports}var js$y={exports:{}},hasRequiredJs$z;function requireJs$z(){if(hasRequiredJs$z)return js$y.exports;hasRequiredJs$z=1;var r=requireJs$1F(),e=requireJs$1D(),t=requireJs$1G();function i(C){var E=C[0],P=C[1];return[P[0]-E[0],P[1]-E[1]]}function s(C,E){return C[0]*E[1]-E[0]*C[1]}function n(C,E){return[C[0]+E[0],C[1]+E[1]]}function o(C,E){return[C[0]-E[0],C[1]-E[1]]}function c(C,E){return[C*E[0],C*E[1]]}function _(C,E){var P=C[0],w=i(C),M=E[0],T=i(E),L=s(w,T),R=o(M,P),D=s(R,T),N=D/L,k=n(P,c(N,w));return k}function l(C,E){var P=i(C),w=i(E);return s(P,w)===0}function h(C,E){return l(C,E)?!1:_(C,E)}function f(C,E,P){if(P=P||{},!t.isObject(P))throw new Error("options is invalid");var w=P.units;if(!C)throw new Error("geojson is required");if(E==null||isNaN(E))throw new Error("distance is required");var M=e.getType(C),T=C.properties;switch(M){case"LineString":return m(C,E,w);case"MultiLineString":var L=[];return r.flattenEach(C,function(R){L.push(m(R,E,w).geometry.coordinates)}),t.multiLineString(L,T);default:throw new Error("geometry "+M+" is not supported")}}function m(C,E,P){var w=[],M=t.lengthToDegrees(E,P),T=e.getCoords(C),L=[];return T.forEach(function(R,D){if(D!==T.length-1){var N=g(R,T[D+1],M);if(w.push(N),D>0){var k=w[D-1],B=h(N,k);B!==!1&&(k[1]=B,N[0]=B),L.push(k[0]),D===T.length-2&&(L.push(N[0]),L.push(N[1]))}T.length===2&&(L.push(N[0]),L.push(N[1]))}}),t.lineString(L,C.properties)}function g(C,E,P){var w=Math.sqrt((C[0]-E[0])*(C[0]-E[0])+(C[1]-E[1])*(C[1]-E[1])),M=C[0]+P*(E[1]-C[1])/w,T=E[0]+P*(E[1]-C[1])/w,L=C[1]+P*(C[0]-E[0])/w,R=E[1]+P*(C[0]-E[0])/w;return[[M,L],[T,R]]}return js$y.exports=f,js$y.exports.default=f,js$y.exports}var js$x={},Graph={},Node={},util={},hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util;hasRequiredUtil=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(util,"__esModule",{value:!0});var e=r(requireJs$1A()),t=requireJs$1G();function i(_){return(_>0)-(_<0)||+_}function s(_,l,h){var f=l[0]-_[0],m=l[1]-_[1],g=h[0]-l[0],C=h[1]-l[1];return i(f*C-g*m)}util.orientationIndex=s;function n(_,l){var h=_.geometry.coordinates[0].map(function(C){return C[0]}),f=_.geometry.coordinates[0].map(function(C){return C[1]}),m=l.geometry.coordinates[0].map(function(C){return C[0]}),g=l.geometry.coordinates[0].map(function(C){return C[1]});return Math.max.apply(null,h)===Math.max.apply(null,m)&&Math.max.apply(null,f)===Math.max.apply(null,g)&&Math.min.apply(null,h)===Math.min.apply(null,m)&&Math.min.apply(null,f)===Math.min.apply(null,g)}util.envelopeIsEqual=n;function o(_,l){return l.geometry.coordinates[0].every(function(h){return e.default(t.point(h),_)})}util.envelopeContains=o;function c(_,l){return _[0]===l[0]&&_[1]===l[1]}return util.coordinatesEqual=c,util}var hasRequiredNode;function requireNode(){if(hasRequiredNode)return Node;hasRequiredNode=1,Object.defineProperty(Node,"__esModule",{value:!0});var r=requireUtil(),e=function(){function t(i){this.id=t.buildId(i),this.coordinates=i,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(i){return i.join(",")},t.prototype.removeInnerEdge=function(i){this.innerEdges=this.innerEdges.filter(function(s){return s.from.id!==i.from.id})},t.prototype.removeOuterEdge=function(i){this.outerEdges=this.outerEdges.filter(function(s){return s.to.id!==i.to.id})},t.prototype.addOuterEdge=function(i){this.outerEdges.push(i),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var i=this;this.outerEdgesSorted||(this.outerEdges.sort(function(s,n){var o=s.to,c=n.to;if(o.coordinates[0]-i.coordinates[0]>=0&&c.coordinates[0]-i.coordinates[0]<0)return 1;if(o.coordinates[0]-i.coordinates[0]<0&&c.coordinates[0]-i.coordinates[0]>=0)return-1;if(o.coordinates[0]-i.coordinates[0]===0&&c.coordinates[0]-i.coordinates[0]===0)return o.coordinates[1]-i.coordinates[1]>=0||c.coordinates[1]-i.coordinates[1]>=0?o.coordinates[1]-c.coordinates[1]:c.coordinates[1]-o.coordinates[1];var _=r.orientationIndex(i.coordinates,o.coordinates,c.coordinates);if(_<0)return 1;if(_>0)return-1;var l=Math.pow(o.coordinates[0]-i.coordinates[0],2)+Math.pow(o.coordinates[1]-i.coordinates[1],2),h=Math.pow(c.coordinates[0]-i.coordinates[0],2)+Math.pow(c.coordinates[1]-i.coordinates[1],2);return l-h}),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(i){return this.sortOuterEdges(),this.outerEdges[i]},t.prototype.addInnerEdge=function(i){this.innerEdges.push(i)},t}();return Node.default=e,Node}var Edge={},hasRequiredEdge;function requireEdge(){if(hasRequiredEdge)return Edge;hasRequiredEdge=1,Object.defineProperty(Edge,"__esModule",{value:!0});var r=requireJs$1G(),e=requireUtil(),t=function(){function i(s,n){this.from=s,this.to=n,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return i.prototype.getSymetric=function(){return this.symetric||(this.symetric=new i(this.to,this.from),this.symetric.symetric=this),this.symetric},i.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},i.prototype.isEqual=function(s){return this.from.id===s.from.id&&this.to.id===s.to.id},i.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},i.prototype.toLineString=function(){return r.lineString([this.from.coordinates,this.to.coordinates])},i.prototype.compareTo=function(s){return e.orientationIndex(s.from.coordinates,s.to.coordinates,this.to.coordinates)},i}();return Edge.default=t,Edge}var EdgeRing={},hasRequiredEdgeRing;function requireEdgeRing(){if(hasRequiredEdgeRing)return EdgeRing;hasRequiredEdgeRing=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(EdgeRing,"__esModule",{value:!0});var e=requireUtil(),t=requireJs$1G(),i=r(requireJs$1m()),s=r(requireJs$1A()),n=function(){function o(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return o.prototype.push=function(c){this.edges.push(c),this.polygon=this.envelope=void 0},o.prototype.get=function(c){return this.edges[c]},Object.defineProperty(o.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),o.prototype.forEach=function(c){this.edges.forEach(c)},o.prototype.map=function(c){return this.edges.map(c)},o.prototype.some=function(c){return this.edges.some(c)},o.prototype.isValid=function(){return!0},o.prototype.isHole=function(){var c=this,_=this.edges.reduce(function(m,g,C){return g.from.coordinates[1]>c.edges[m].from.coordinates[1]&&(m=C),m},0),l=(_===0?this.length:_)-1,h=(_+1)%this.length,f=e.orientationIndex(this.edges[l].from.coordinates,this.edges[_].from.coordinates,this.edges[h].from.coordinates);return f===0?this.edges[l].from.coordinates[0]>this.edges[h].from.coordinates[0]:f>0},o.prototype.toMultiPoint=function(){return t.multiPoint(this.edges.map(function(c){return c.from.coordinates}))},o.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var c=this.edges.map(function(_){return _.from.coordinates});return c.push(this.edges[0].from.coordinates),this.polygon=t.polygon([c])},o.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=i.default(this.toPolygon())},o.findEdgeRingContaining=function(c,_){var l=c.getEnvelope(),h,f;return _.forEach(function(m){var g=m.getEnvelope();if(f&&(h=f.getEnvelope()),!e.envelopeIsEqual(g,l)&&e.envelopeContains(g,l)){for(var C=c.map(function(L){return L.from.coordinates}),E=void 0,P=function(L){m.some(function(R){return e.coordinatesEqual(L,R.from.coordinates)})||(E=L)},w=0,M=C;w<M.length;w++){var T=M[w];P(T)}E&&m.inside(t.point(E))&&(!f||e.envelopeContains(h,g))&&(f=m)}}),f},o.prototype.inside=function(c){return s.default(c,this.toPolygon())},o}();return EdgeRing.default=n,EdgeRing}var hasRequiredGraph;function requireGraph(){if(hasRequiredGraph)return Graph;hasRequiredGraph=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(Graph,"__esModule",{value:!0});var e=r(requireNode()),t=r(requireEdge()),i=r(requireEdgeRing()),s=requireJs$1F(),n=requireJs$1D();function o(_){if(!_)throw new Error("No geojson passed");if(_.type!=="FeatureCollection"&&_.type!=="GeometryCollection"&&_.type!=="MultiLineString"&&_.type!=="LineString"&&_.type!=="Feature")throw new Error("Invalid input type '"+_.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}var c=function(){function _(){this.edges=[],this.nodes={}}return _.fromGeoJson=function(l){o(l);var h=new _;return s.flattenEach(l,function(f){n.featureOf(f,"LineString","Graph::fromGeoJson"),s.coordReduce(f,function(m,g){if(m){var C=h.getNode(m),E=h.getNode(g);h.addEdge(C,E)}return g})}),h},_.prototype.getNode=function(l){var h=e.default.buildId(l),f=this.nodes[h];return f||(f=this.nodes[h]=new e.default(l)),f},_.prototype.addEdge=function(l,h){var f=new t.default(l,h),m=f.getSymetric();this.edges.push(f),this.edges.push(m)},_.prototype.deleteDangles=function(){var l=this;Object.keys(this.nodes).map(function(h){return l.nodes[h]}).forEach(function(h){return l._removeIfDangle(h)})},_.prototype._removeIfDangle=function(l){var h=this;if(l.innerEdges.length<=1){var f=l.getOuterEdges().map(function(m){return m.to});this.removeNode(l),f.forEach(function(m){return h._removeIfDangle(m)})}},_.prototype.deleteCutEdges=function(){var l=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(h){h.label===h.symetric.label&&(l.removeEdge(h.symetric),l.removeEdge(h))})},_.prototype._computeNextCWEdges=function(l){var h=this;typeof l>"u"?Object.keys(this.nodes).forEach(function(f){return h._computeNextCWEdges(h.nodes[f])}):l.getOuterEdges().forEach(function(f,m){l.getOuterEdge((m===0?l.getOuterEdges().length:m)-1).symetric.next=f})},_.prototype._computeNextCCWEdges=function(l,h){for(var f=l.getOuterEdges(),m,g,C=f.length-1;C>=0;--C){var E=f[C],P=E.symetric,w=void 0,M=void 0;E.label===h&&(w=E),P.label===h&&(M=P),!(!w||!M)&&(M&&(g=M),w&&(g&&(g.next=w,g=void 0),m||(m=w)))}g&&(g.next=m)},_.prototype._findLabeledEdgeRings=function(){var l=[],h=0;return this.edges.forEach(function(f){if(!(f.label>=0)){l.push(f);var m=f;do m.label=h,m=m.next;while(!f.isEqual(m));h++}}),l},_.prototype.getEdgeRings=function(){var l=this;this._computeNextCWEdges(),this.edges.forEach(function(f){f.label=void 0}),this._findLabeledEdgeRings().forEach(function(f){l._findIntersectionNodes(f).forEach(function(m){l._computeNextCCWEdges(m,f.label)})});var h=[];return this.edges.forEach(function(f){f.ring||h.push(l._findEdgeRing(f))}),h},_.prototype._findIntersectionNodes=function(l){var h=[],f=l,m=function(){var g=0;f.from.getOuterEdges().forEach(function(C){C.label===l.label&&++g}),g>1&&h.push(f.from),f=f.next};do m();while(!l.isEqual(f));return h},_.prototype._findEdgeRing=function(l){var h=l,f=new i.default;do f.push(h),h.ring=f,h=h.next;while(!l.isEqual(h));return f},_.prototype.removeNode=function(l){var h=this;l.getOuterEdges().forEach(function(f){return h.removeEdge(f)}),l.innerEdges.forEach(function(f){return h.removeEdge(f)}),delete this.nodes[l.id]},_.prototype.removeEdge=function(l){this.edges=this.edges.filter(function(h){return!h.isEqual(l)}),l.deleteEdge()},_}();return Graph.default=c,Graph}var hasRequiredJs$y;function requireJs$y(){if(hasRequiredJs$y)return js$x;hasRequiredJs$y=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(js$x,"__esModule",{value:!0});var e=requireJs$1G(),t=r(requireGraph()),i=r(requireEdgeRing());function s(n){var o=t.default.fromGeoJson(n);o.deleteDangles(),o.deleteCutEdges();var c=[],_=[];return o.getEdgeRings().filter(function(l){return l.isValid()}).forEach(function(l){l.isHole()?c.push(l):_.push(l)}),c.forEach(function(l){i.default.findEdgeRingContaining(l,_)&&_.push(l)}),e.featureCollection(_.map(function(l){return l.toPolygon()}))}return js$x.default=s,js$x}var js$w={},hasRequiredJs$x;function requireJs$x(){if(hasRequiredJs$x)return js$w;hasRequiredJs$x=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(js$w,"__esModule",{value:!0});var e=r(requireJs$1A()),t=r(requireJs$18()),i=requireJs$1F(),s=r(requireJs$N());function n(g,C){var E=!0;return i.flattenEach(g,function(P){i.flattenEach(C,function(w){if(E===!1)return!1;E=o(P.geometry,w.geometry)})}),E}function o(g,C){switch(g.type){case"Point":switch(C.type){case"Point":return!m(g.coordinates,C.coordinates);case"LineString":return!c(C,g);case"Polygon":return!e.default(g,C)}break;case"LineString":switch(C.type){case"Point":return!c(g,C);case"LineString":return!_(g,C);case"Polygon":return!l(C,g)}break;case"Polygon":switch(C.type){case"Point":return!e.default(C,g);case"LineString":return!l(g,C);case"Polygon":return!h(C,g)}}return!1}function c(g,C){for(var E=0;E<g.coordinates.length-1;E++)if(f(g.coordinates[E],g.coordinates[E+1],C.coordinates))return!0;return!1}function _(g,C){var E=t.default(g,C);return E.features.length>0}function l(g,C){for(var E=0,P=C.coordinates;E<P.length;E++){var w=P[E];if(e.default(w,g))return!0}var M=t.default(C,s.default(g));return M.features.length>0}function h(g,C){for(var E=0,P=g.coordinates[0];E<P.length;E++){var w=P[E];if(e.default(w,C))return!0}for(var M=0,T=C.coordinates[0];M<T.length;M++){var L=T[M];if(e.default(L,g))return!0}var R=t.default(s.default(g),s.default(C));return R.features.length>0}function f(g,C,E){var P=E[0]-g[0],w=E[1]-g[1],M=C[0]-g[0],T=C[1]-g[1],L=P*T-w*M;return L!==0?!1:Math.abs(M)>=Math.abs(T)?M>0?g[0]<=E[0]&&E[0]<=C[0]:C[0]<=E[0]&&E[0]<=g[0]:T>0?g[1]<=E[1]&&E[1]<=C[1]:C[1]<=E[1]&&E[1]<=g[1]}function m(g,C){return g[0]===C[0]&&g[1]===C[1]}return js$w.default=n,js$w}var js$v={},hasRequiredJs$w;function requireJs$w(){if(hasRequiredJs$w)return js$v;hasRequiredJs$w=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(js$v,"__esModule",{value:!0});var e=r(requireJs$1E()),t=r(requireJs$1A()),i=r(requireJs$X()),s=requireJs$1D();function n(P,w){var M=s.getGeom(P),T=s.getGeom(w),L=M.type,R=T.type,D=M.coordinates,N=T.coordinates;switch(L){case"Point":switch(R){case"Point":return C(D,N);default:throw new Error("feature2 "+R+" geometry not supported")}case"MultiPoint":switch(R){case"Point":return o(M,T);case"MultiPoint":return c(M,T);default:throw new Error("feature2 "+R+" geometry not supported")}case"LineString":switch(R){case"Point":return i.default(T,M,{ignoreEndVertices:!0});case"LineString":return h(M,T);case"MultiPoint":return _(M,T);default:throw new Error("feature2 "+R+" geometry not supported")}case"Polygon":switch(R){case"Point":return t.default(T,M,{ignoreBoundary:!0});case"LineString":return f(M,T);case"Polygon":return m(M,T);case"MultiPoint":return l(M,T);default:throw new Error("feature2 "+R+" geometry not supported")}default:throw new Error("feature1 "+L+" geometry not supported")}}js$v.default=n;function o(P,w){var M,T=!1;for(M=0;M<P.coordinates.length;M++)if(C(P.coordinates[M],w.coordinates)){T=!0;break}return T}js$v.isPointInMultiPoint=o;function c(P,w){for(var M=0,T=w.coordinates;M<T.length;M++){for(var L=T[M],R=!1,D=0,N=P.coordinates;D<N.length;D++){var k=N[D];if(C(L,k)){R=!0;break}}if(!R)return!1}return!0}js$v.isMultiPointInMultiPoint=c;function _(P,w){for(var M=!1,T=0,L=w.coordinates;T<L.length;T++){var R=L[T];if(i.default(R,P,{ignoreEndVertices:!0})&&(M=!0),!i.default(R,P))return!1}return!!M}js$v.isMultiPointOnLine=_;function l(P,w){for(var M=0,T=w.coordinates;M<T.length;M++){var L=T[M];if(!t.default(L,P,{ignoreBoundary:!0}))return!1}return!0}js$v.isMultiPointInPoly=l;function h(P,w){for(var M=!1,T=0,L=w.coordinates;T<L.length;T++){var R=L[T];if(i.default({type:"Point",coordinates:R},P,{ignoreEndVertices:!0})&&(M=!0),!i.default({type:"Point",coordinates:R},P,{ignoreEndVertices:!1}))return!1}return M}js$v.isLineOnLine=h;function f(P,w){var M=!1,T=0,L=e.default(P),R=e.default(w);if(!g(L,R))return!1;for(T;T<w.coordinates.length-1;T++){var D=E(w.coordinates[T],w.coordinates[T+1]);if(t.default({type:"Point",coordinates:D},P,{ignoreBoundary:!0})){M=!0;break}}return M}js$v.isLineInPoly=f;function m(P,w){if(P.type==="Feature"&&P.geometry===null||w.type==="Feature"&&w.geometry===null)return!1;var M=e.default(P),T=e.default(w);if(!g(M,T))return!1;for(var L=s.getGeom(w).coordinates,R=0,D=L;R<D.length;R++)for(var N=D[R],k=0,B=N;k<B.length;k++){var $=B[k];if(!t.default($,P))return!1}return!0}js$v.isPolyInPoly=m;function g(P,w){return!(P[0]>w[0]||P[2]<w[2]||P[1]>w[1]||P[3]<w[3])}js$v.doBBoxOverlap=g;function C(P,w){return P[0]===w[0]&&P[1]===w[1]}js$v.compareCoords=C;function E(P,w){return[(P[0]+w[0])/2,(P[1]+w[1])/2]}return js$v.getMidpoint=E,js$v}var js$u={},hasRequiredJs$v;function requireJs$v(){if(hasRequiredJs$v)return js$u;hasRequiredJs$v=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(js$u,"__esModule",{value:!0});var e=r(requireJs$18()),t=requireJs$N(),i=r(requireJs$1A()),s=requireJs$1D(),n=requireJs$1G();function o(m,g){var C=s.getGeom(m),E=s.getGeom(g),P=C.type,w=E.type;switch(P){case"MultiPoint":switch(w){case"LineString":return c(C,E);case"Polygon":return h(C,E);default:throw new Error("feature2 "+w+" geometry not supported")}case"LineString":switch(w){case"MultiPoint":return c(E,C);case"LineString":return _(C,E);case"Polygon":return l(C,E);default:throw new Error("feature2 "+w+" geometry not supported")}case"Polygon":switch(w){case"MultiPoint":return h(E,C);case"LineString":return l(E,C);default:throw new Error("feature2 "+w+" geometry not supported")}default:throw new Error("feature1 "+P+" geometry not supported")}}function c(m,g){for(var C=!1,E=!1,P=m.coordinates.length,w=0;w<P&&!C&&!E;){for(var M=0;M<g.coordinates.length-1;M++){var T=!0;(M===0||M===g.coordinates.length-2)&&(T=!1),f(g.coordinates[M],g.coordinates[M+1],m.coordinates[w],T)?C=!0:E=!0}w++}return C&&E}function _(m,g){var C=e.default(m,g);if(C.features.length>0)for(var E=0;E<m.coordinates.length-1;E++)for(var P=0;P<g.coordinates.length-1;P++){var w=!0;if((P===0||P===g.coordinates.length-2)&&(w=!1),f(m.coordinates[E],m.coordinates[E+1],g.coordinates[P],w))return!0}return!1}function l(m,g){var C=t.polygonToLine(g),E=e.default(m,C);return E.features.length>0}function h(m,g){for(var C=!1,E=!1,P=m.coordinates.length,w=0;w<P&&(!C||!E);w++)i.default(n.point(m.coordinates[w]),g)?C=!0:E=!0;return E&&C}function f(m,g,C,E){var P=C[0]-m[0],w=C[1]-m[1],M=g[0]-m[0],T=g[1]-m[1],L=P*T-w*M;return L!==0?!1:E?Math.abs(M)>=Math.abs(T)?M>0?m[0]<=C[0]&&C[0]<=g[0]:g[0]<=C[0]&&C[0]<=m[0]:T>0?m[1]<=C[1]&&C[1]<=g[1]:g[1]<=C[1]&&C[1]<=m[1]:Math.abs(M)>=Math.abs(T)?M>0?m[0]<C[0]&&C[0]<g[0]:g[0]<C[0]&&C[0]<m[0]:T>0?m[1]<C[1]&&C[1]<g[1]:g[1]<C[1]&&C[1]<m[1]}return js$u.default=o,js$u}var js$t={},geojsonEquality,hasRequiredGeojsonEquality;function requireGeojsonEquality(){if(hasRequiredGeojsonEquality)return geojsonEquality;hasRequiredGeojsonEquality=1;var r=requireDeepEqual(),e=function(n){this.precision=n&&n.precision?n.precision:17,this.direction=n&&n.direction?n.direction:!1,this.pseudoNode=n&&n.pseudoNode?n.pseudoNode:!1,this.objectComparator=n&&n.objectComparator?n.objectComparator:s};e.prototype.compare=function(n,o){if(n.type!==o.type||!i(n,o))return!1;switch(n.type){case"Point":return this.compareCoord(n.coordinates,o.coordinates);case"LineString":return this.compareLine(n.coordinates,o.coordinates,0,!1);case"Polygon":return this.comparePolygon(n,o);case"Feature":return this.compareFeature(n,o);default:if(n.type.indexOf("Multi")===0){var c=this,_=t(n),l=t(o);return _.every(function(h){return this.some(function(f){return c.compare(h,f)})},l)}}return!1};function t(n){return n.coordinates.map(function(o){return{type:n.type.replace("Multi",""),coordinates:o}})}function i(n,o){return n.hasOwnProperty("coordinates")?n.coordinates.length===o.coordinates.length:n.length===o.length}e.prototype.compareCoord=function(n,o){if(n.length!==o.length)return!1;for(var c=0;c<n.length;c++)if(n[c].toFixed(this.precision)!==o[c].toFixed(this.precision))return!1;return!0},e.prototype.compareLine=function(n,o,c,_){if(!i(n,o))return!1;var l=this.pseudoNode?n:this.removePseudo(n),h=this.pseudoNode?o:this.removePseudo(o);if(!(_&&!this.compareCoord(l[0],h[0])&&(h=this.fixStartIndex(h,l),!h))){var f=this.compareCoord(l[c],h[c]);return this.direction||f?this.comparePath(l,h):this.compareCoord(l[c],h[h.length-(1+c)])?this.comparePath(l.slice().reverse(),h):!1}},e.prototype.fixStartIndex=function(n,o){for(var c,_=-1,l=0;l<n.length;l++)if(this.compareCoord(n[l],o[0])){_=l;break}return _>=0&&(c=[].concat(n.slice(_,n.length),n.slice(1,_+1))),c},e.prototype.comparePath=function(n,o){var c=this;return n.every(function(_,l){return c.compareCoord(_,this[l])},o)},e.prototype.comparePolygon=function(n,o){if(this.compareLine(n.coordinates[0],o.coordinates[0],1,!0)){var c=n.coordinates.slice(1,n.coordinates.length),_=o.coordinates.slice(1,o.coordinates.length),l=this;return c.every(function(h){return this.some(function(f){return l.compareLine(h,f,1,!0)})},_)}else return!1},e.prototype.compareFeature=function(n,o){return n.id!==o.id||!this.objectComparator(n.properties,o.properties)||!this.compareBBox(n,o)?!1:this.compare(n.geometry,o.geometry)},e.prototype.compareBBox=function(n,o){return!!(!n.bbox&&!o.bbox||n.bbox&&o.bbox&&this.compareCoord(n.bbox,o.bbox))},e.prototype.removePseudo=function(n){return n};function s(n,o){return r(n,o,{strict:!0})}return geojsonEquality=e,geojsonEquality}var hasRequiredJs$u;function requireJs$u(){if(hasRequiredJs$u)return js$t;hasRequiredJs$u=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(js$t,"__esModule",{value:!0});var e=requireJs$1F(),t=requireJs$1D(),i=r(requireJs$K()),s=r(requireJs$18()),n=r(requireGeojsonEquality());function o(c,_){var l=t.getGeom(c),h=t.getGeom(_),f=l.type,m=h.type;if(f==="MultiPoint"&&m!=="MultiPoint"||(f==="LineString"||f==="MultiLineString")&&m!=="LineString"&&m!=="MultiLineString"||(f==="Polygon"||f==="MultiPolygon")&&m!=="Polygon"&&m!=="MultiPolygon")throw new Error("features must be of the same type");if(f==="Point")throw new Error("Point geometry not supported");var g=new n.default({precision:6});if(g.compare(c,_))return!1;var C=0;switch(f){case"MultiPoint":for(var E=0;E<l.coordinates.length;E++)for(var P=0;P<h.coordinates.length;P++){var w=l.coordinates[E],M=h.coordinates[P];if(w[0]===M[0]&&w[1]===M[1])return!0}return!1;case"LineString":case"MultiLineString":e.segmentEach(c,function(T){e.segmentEach(_,function(L){i.default(T,L).features.length&&C++})});break;case"Polygon":case"MultiPolygon":e.segmentEach(c,function(T){e.segmentEach(_,function(L){s.default(T,L).features.length&&C++})});break}return C>0}return js$t.default=o,js$t}var js$s={},hasRequiredJs$t;function requireJs$t(){if(hasRequiredJs$t)return js$s;hasRequiredJs$t=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(js$s,"__esModule",{value:!0});var e=r(requireGeojsonEquality()),t=r(requireJs$1s()),i=requireJs$1D();function s(n,o){var c=i.getGeom(n).type,_=i.getGeom(o).type;if(c!==_)return!1;var l=new e.default({precision:6});return l.compare(t.default(n),t.default(o))}return js$s.default=s,js$s}var js$r={},hasRequiredJs$s;function requireJs$s(){if(hasRequiredJs$s)return js$r;hasRequiredJs$s=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(js$r,"__esModule",{value:!0});var e=r(requireJs$x()),t=requireJs$1F();function i(s,n){var o=!1;return t.flattenEach(s,function(c){t.flattenEach(n,function(_){if(o===!0)return!0;o=!e.default(c.geometry,_.geometry)})}),o}return js$r.default=i,js$r}var js$q={},lib={exports:{}},DBSCAN={exports:{}},hasRequiredDBSCAN;function requireDBSCAN(){return hasRequiredDBSCAN||(hasRequiredDBSCAN=1,function(r){function e(t,i,s,n){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,i,s,n)}e.prototype.run=function(t,i,s,n){this._init(t,i,s,n);for(var o=0;o<this._datasetLength;o++)if(this._visited[o]!==1){this._visited[o]=1;var c=this._regionQuery(o);if(c.length<this.minPts)this.noise.push(o);else{var _=this.clusters.length;this.clusters.push([]),this._addToCluster(o,_),this._expandCluster(_,c)}}return this.clusters},e.prototype._init=function(t,i,s,n){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}i&&(this.epsilon=i),s&&(this.minPts=s),n&&(this.distance=n)},e.prototype._expandCluster=function(t,i){for(var s=0;s<i.length;s++){var n=i[s];if(this._visited[n]!==1){this._visited[n]=1;var o=this._regionQuery(n);o.length>=this.minPts&&(i=this._mergeArrays(i,o))}this._assigned[n]!==1&&this._addToCluster(n,t)}},e.prototype._addToCluster=function(t,i){this.clusters[i].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var i=[],s=0;s<this._datasetLength;s++){var n=this.distance(this.dataset[t],this.dataset[s]);n<this.epsilon&&i.push(s)}return i},e.prototype._mergeArrays=function(t,i){for(var s=i.length,n=0;n<s;n++){var o=i[n];t.indexOf(o)<0&&t.push(o)}return t},e.prototype._euclideanDistance=function(t,i){for(var s=0,n=Math.min(t.length,i.length);n--;)s+=(t[n]-i[n])*(t[n]-i[n]);return Math.sqrt(s)},r.exports&&(r.exports=e)}(DBSCAN)),DBSCAN.exports}var KMEANS={exports:{}},hasRequiredKMEANS;function requireKMEANS(){return hasRequiredKMEANS||(hasRequiredKMEANS=1,function(r){function e(t,i,s){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,i,s)}e.prototype.init=function(t,i,s){this.assignments=[],this.centroids=[],typeof t<"u"&&(this.dataset=t),typeof i<"u"&&(this.k=i),typeof s<"u"&&(this.distance=s)},e.prototype.run=function(t,i){this.init(t,i);for(var s=this.dataset.length,n=0;n<this.k;n++)this.centroids[n]=this.randomCentroid();for(var o=!0;o;){o=this.assign();for(var c=0;c<this.k;c++){for(var _=new Array(m),l=0,h=0;h<m;h++)_[h]=0;for(var f=0;f<s;f++){var m=this.dataset[f].length;if(c===this.assignments[f]){for(var h=0;h<m;h++)_[h]+=this.dataset[f][h];l++}}if(l>0){for(var h=0;h<m;h++)_[h]/=l;this.centroids[c]=_}else this.centroids[c]=this.randomCentroid(),o=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t=this.dataset.length-1,i,s;do s=Math.round(Math.random()*t),i=this.dataset[s];while(this.centroids.indexOf(i)>=0);return i},e.prototype.assign=function(){for(var t=!1,i=this.dataset.length,s,n=0;n<i;n++)s=this.argmin(this.dataset[n],this.centroids,this.distance),s!=this.assignments[n]&&(this.assignments[n]=s,t=!0);return t},e.prototype.getClusters=function(){for(var t=new Array(this.k),i,s=0;s<this.assignments.length;s++)i=this.assignments[s],typeof t[i]>"u"&&(t[i]=[]),t[i].push(s);return t},e.prototype.argmin=function(t,i,s){for(var n=Number.MAX_VALUE,o=0,c=i.length,_,l=0;l<c;l++)_=s(t,i[l]),_<n&&(n=_,o=l);return o},e.prototype.distance=function(t,i){for(var s=0,n=Math.min(t.length,i.length);n--;){var o=t[n]-i[n];s+=o*o}return Math.sqrt(s)},r.exports&&(r.exports=e)}(KMEANS)),KMEANS.exports}var OPTICS={exports:{}},PriorityQueue={exports:{}},hasRequiredPriorityQueue;function requirePriorityQueue(){return hasRequiredPriorityQueue||(hasRequiredPriorityQueue=1,function(r){function e(t,i,s){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,i,s)}e.prototype.insert=function(t,i){for(var s=this._queue.length,n=s;n--;){var o=this._priorities[n];this._sorting==="desc"?i>o&&(s=n):i<o&&(s=n)}this._insertAt(t,i,s)},e.prototype.remove=function(t){for(var i=this._queue.length;i--;){var s=this._queue[i];if(t===s){this._queue.splice(i,1),this._priorities.splice(i,1);break}}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],i=0,s=this._queue.length;i<s;i++)t.push([this._queue[i],this._priorities[i]]);return t},e.prototype._init=function(t,i,s){if(t&&i){if(this._queue=[],this._priorities=[],t.length!==i.length)throw new Error("Arrays must have the same length");for(var n=0;n<t.length;n++)this.insert(t[n],i[n])}s&&(this._sorting=s)},e.prototype._insertAt=function(t,i,s){this._queue.length===s?(this._queue.push(t),this._priorities.push(i)):(this._queue.splice(s,0,t),this._priorities.splice(s,0,i))},r.exports&&(r.exports=e)}(PriorityQueue)),PriorityQueue.exports}var hasRequiredOPTICS;function requireOPTICS(){return hasRequiredOPTICS||(hasRequiredOPTICS=1,function(r){if(r.exports)var e=requirePriorityQueue();function t(i,s,n,o){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(i,s,n,o)}t.prototype.run=function(i,s,n,o){this._init(i,s,n,o);for(var c=0,_=this.dataset.length;c<_;c++)if(this._processed[c]!==1){this._processed[c]=1,this.clusters.push([c]);var l=this.clusters.length-1;this._orderedList.push(c);var h=new e(null,null,"asc"),f=this._regionQuery(c);this._distanceToCore(c)!==void 0&&(this._updateQueue(c,f,h),this._expandCluster(l,h))}return this.clusters},t.prototype.getReachabilityPlot=function(){for(var i=[],s=0,n=this._orderedList.length;s<n;s++){var o=this._orderedList[s],c=this._reachability[o];i.push([o,c])}return i},t.prototype._init=function(i,s,n,o){if(i){if(!(i instanceof Array))throw Error("Dataset must be of type array, "+typeof i+" given");this.dataset=i,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}s&&(this.epsilon=s),n&&(this.minPts=n),o&&(this.distance=o)},t.prototype._updateQueue=function(i,s,n){var o=this;this._coreDistance=this._distanceToCore(i),s.forEach(function(c){if(o._processed[c]===void 0){var _=o.distance(o.dataset[i],o.dataset[c]),l=Math.max(o._coreDistance,_);o._reachability[c]===void 0?(o._reachability[c]=l,n.insert(c,l)):l<o._reachability[c]&&(o._reachability[c]=l,n.remove(c),n.insert(c,l))}})},t.prototype._expandCluster=function(i,s){for(var n=s.getElements(),o=0,c=n.length;o<c;o++){var _=n[o];if(this._processed[_]===void 0){var l=this._regionQuery(_);this._processed[_]=1,this.clusters[i].push(_),this._orderedList.push(_),this._distanceToCore(_)!==void 0&&(this._updateQueue(_,l,s),this._expandCluster(i,s))}}},t.prototype._distanceToCore=function(i){for(var s=this.epsilon,n=0;n<s;n++){var o=this._regionQuery(i,n);if(o.length>=this.minPts)return n}},t.prototype._regionQuery=function(i,s){s=s||this.epsilon;for(var n=[],o=0,c=this.dataset.length;o<c;o++)this.distance(this.dataset[i],this.dataset[o])<s&&n.push(o);return n},t.prototype._euclideanDistance=function(i,s){for(var n=0,o=Math.min(i.length,s.length);o--;)n+=(i[o]-s[o])*(i[o]-s[o]);return Math.sqrt(n)},r.exports&&(r.exports=t)}(OPTICS)),OPTICS.exports}var hasRequiredLib;function requireLib(){return hasRequiredLib||(hasRequiredLib=1,function(r){r.exports&&(r.exports={DBSCAN:requireDBSCAN(),KMEANS:requireKMEANS(),OPTICS:requireOPTICS(),PriorityQueue:requirePriorityQueue()})}(lib)),lib.exports}var hasRequiredJs$r;function requireJs$r(){if(hasRequiredJs$r)return js$q;hasRequiredJs$r=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(js$q,"__esModule",{value:!0});var e=r(requireJs$1w()),t=r(requireJs$1y()),i=requireJs$1F(),s=requireJs$1G(),n=r(requireLib());function o(c,_,l){l===void 0&&(l={}),l.mutate!==!0&&(c=e.default(c)),l.minPoints=l.minPoints||3;var h=new n.default.DBSCAN,f=h.run(i.coordAll(c),s.convertLength(_,l.units),l.minPoints,t.default),m=-1;return f.forEach(function(g){m++,g.forEach(function(C){var E=c.features[C];E.properties||(E.properties={}),E.properties.cluster=m,E.properties.dbscan="core"})}),h.noise.forEach(function(g){var C=c.features[g];C.properties||(C.properties={}),C.properties.cluster?C.properties.dbscan="edge":C.properties.dbscan="noise"}),c}return js$q.default=o,js$q}var js$p={},distance$1,hasRequiredDistance;function requireDistance(){return hasRequiredDistance||(hasRequiredDistance=1,distance$1={eudist:function(e,t,i){for(var s=e.length,n=0,o=0;o<s;o++){var c=(e[o]||0)-(t[o]||0);n+=c*c}return i?Math.sqrt(n):n},mandist:function(e,t,i){for(var s=e.length,n=0,o=0;o<s;o++)n+=Math.abs((e[o]||0)-(t[o]||0));return i?Math.sqrt(n):n},dist:function(e,t,i){var s=Math.abs(e-t);return i?s:s*s}}),distance$1}var kinit,hasRequiredKinit;function requireKinit(){if(hasRequiredKinit)return kinit;hasRequiredKinit=1;var r=requireDistance(),e=r.eudist,t=r.dist;return kinit={kmrand:function(s,n){for(var o={},c=[],_=n<<2,l=s.length,h=s[0].length>0;c.length<n&&_-- >0;){var f=s[Math.floor(Math.random()*l)],m=h?f.join("_"):""+f;o[m]||(o[m]=!0,c.push(f))}if(c.length<n)throw new Error("Error initializating clusters");return c},kmpp:function(s,n){var o=s[0].length?e:t,c=[],_=s.length,l=s[0].length>0,h=s[Math.floor(Math.random()*_)];for(l?h.join("_"):""+h,c.push(h);c.length<n;){for(var f=[],m=c.length,g=0,C=[],E=0;E<_;E++){for(var P=1/0,w=0;w<m;w++){var M=o(s[E],c[w]);M<=P&&(P=M)}f[E]=P}for(var T=0;T<_;T++)g+=f[T];for(var L=0;L<_;L++)C[L]={i:L,v:s[L],pr:f[L]/g,cs:0};C.sort(function(k,B){return k.pr-B.pr}),C[0].cs=C[0].pr;for(var R=1;R<_;R++)C[R].cs=C[R-1].cs+C[R].pr;for(var D=Math.random(),N=0;N<_-1&&C[N++].cs<D;);c.push(C[N-1].v)}return c}},kinit}var main,hasRequiredMain;function requireMain(){if(hasRequiredMain)return main;hasRequiredMain=1;var r=requireDistance(),e=requireKinit(),t=r.eudist;r.mandist,r.dist;var i=e.kmrand,s=e.kmpp,n=1e4;function o(_,l,h){h=h||[];for(var f=0;f<_;f++)h[f]=l;return h}function c(_,l,h,f){var m=[],g=[],C=[],E=[],P=!1,w=f||n,M=_.length,T=_[0].length,L=T>0,R=[];if(h)h=="kmrand"?m=i(_,l):h=="kmpp"?m=s(_,l):m=h;else for(var D={};m.length<l;){var N=Math.floor(Math.random()*M);D[N]||(D[N]=!0,m.push(_[N]))}do{o(l,0,R);for(var k=0;k<M;k++){for(var B=1/0,$=0,H=0;H<l;H++){var E=L?t(_[k],m[H]):Math.abs(_[k]-m[H]);E<=B&&(B=E,$=H)}C[k]=$,R[$]++}for(var W=[],g=[],J=0;J<l;J++)W[J]=L?o(T,0,W[J]):0,g[J]=m[J];if(L){for(var z=0;z<l;z++)m[z]=[];for(var fe=0;fe<M;fe++)for(var q=C[fe],te=W[q],ie=_[fe],xe=0;xe<T;xe++)te[xe]+=ie[xe];P=!0;for(var oe=0;oe<l;oe++){for(var de=m[oe],X=W[oe],he=g[oe],Se=R[oe],Te=0;Te<T;Te++)de[Te]=X[Te]/Se||0;if(P){for(var Re=0;Re<T;Re++)if(he[Re]!=de[Re]){P=!1;break}}}}else{for(var Be=0;Be<M;Be++){var ze=C[Be];W[ze]+=_[Be]}for(var Ve=0;Ve<l;Ve++)m[Ve]=W[Ve]/R[Ve]||0;P=!0;for(var ye=0;ye<l;ye++)if(g[ye]!=m[ye]){P=!1;break}}P=P||--w<=0}while(!P);return{it:n-w,k:l,idxs:C,centroids:m}}return main=c,main}var hasRequiredJs$q;function requireJs$q(){if(hasRequiredJs$q)return js$p;hasRequiredJs$q=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(js$p,"__esModule",{value:!0});var e=r(requireJs$1w()),t=requireJs$1F(),i=r(requireMain());function s(n,o){o===void 0&&(o={});var c=n.features.length;o.numberOfClusters=o.numberOfClusters||Math.round(Math.sqrt(c/2)),o.numberOfClusters>c&&(o.numberOfClusters=c),o.mutate!==!0&&(n=e.default(n));var _=t.coordAll(n),l=_.slice(0,o.numberOfClusters),h=i.default(_,o.numberOfClusters,l),f={};return h.centroids.forEach(function(m,g){f[g]=m}),t.featureEach(n,function(m,g){var C=h.idxs[g];m.properties.cluster=C,m.properties.centroid=f[C]}),n}return js$p.default=s,js$p}var js$o={},hasRequiredJs$p;function requireJs$p(){if(hasRequiredJs$p)return js$o;hasRequiredJs$p=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(js$o,"__esModule",{value:!0});var e=r(requireJs$1s()),t=r(requireJs$19()),i=r(requireJs$I()),s=requireJs$1G();function n(_,l){if(!_)throw new Error("line1 is required");if(!l)throw new Error("line2 is required");var h=c(_,"line1");if(h!=="LineString")throw new Error("line1 must be a LineString");var f=c(l,"line2");if(f!=="LineString")throw new Error("line2 must be a LineString");for(var m=t.default(e.default(_)).features,g=t.default(e.default(l)).features,C=0;C<m.length;C++){var E=m[C].geometry.coordinates;if(!g[C])break;var P=g[C].geometry.coordinates;if(!o(E,P))return!1}return!0}function o(_,l){var h=s.bearingToAzimuth(i.default(_[0],_[1])),f=s.bearingToAzimuth(i.default(l[0],l[1]));return h===f}function c(_,l){if(_.geometry&&_.geometry.type)return _.geometry.type;if(_.type)return _.type;throw new Error("Invalid GeoJSON object for "+l)}return js$o.default=n,js$o}var js$n={exports:{}},hasRequiredJs$o;function requireJs$o(){if(hasRequiredJs$o)return js$n.exports;hasRequiredJs$o=1;var r=requireJs$1E(),e=requireJs$1A(),t=requireJs$1y(),i=requireJs$B(),s=requireJs$1s(),n=requireJs$1n(),o=requireJs$1D(),c=requireJs$1G();function _(N){return N&&typeof N=="object"&&"default"in N?N:{default:N}}var l=_(r),h=_(e),f=_(t),m=_(i),g=_(s),C=_(n);function E(N){for(var k=N,B=[];k.parent;)B.unshift(k),k=k.parent;return B}function P(){return new L(function(N){return N.f})}var w={search:function(N,k,B,$){N.cleanDirty(),$=$||{};var H=$.heuristic||w.heuristics.manhattan,W=$.closest||!1,J=P(),z=k;for(k.h=H(k,B),J.push(k);J.size()>0;){var fe=J.pop();if(fe===B)return E(fe);fe.closed=!0;for(var q=N.neighbors(fe),te=0,ie=q.length;te<ie;++te){var xe=q[te];if(!(xe.closed||xe.isWall())){var oe=fe.g+xe.getCost(fe),de=xe.visited;(!de||oe<xe.g)&&(xe.visited=!0,xe.parent=fe,xe.h=xe.h||H(xe,B),xe.g=oe,xe.f=xe.g+xe.h,N.markDirty(xe),W&&(xe.h<z.h||xe.h===z.h&&xe.g<z.g)&&(z=xe),de?J.rescoreElement(xe):J.push(xe))}}}return W?E(z):[]},heuristics:{manhattan:function(N,k){var B=Math.abs(k.x-N.x),$=Math.abs(k.y-N.y);return B+$},diagonal:function(N,k){var B=1,$=Math.sqrt(2),H=Math.abs(k.x-N.x),W=Math.abs(k.y-N.y);return B*(H+W)+($-2*B)*Math.min(H,W)}},cleanNode:function(N){N.f=0,N.g=0,N.h=0,N.visited=!1,N.closed=!1,N.parent=null}};function M(N,k){k=k||{},this.nodes=[],this.diagonal=!!k.diagonal,this.grid=[];for(var B=0;B<N.length;B++){this.grid[B]=[];for(var $=0,H=N[B];$<H.length;$++){var W=new T(B,$,H[$]);this.grid[B][$]=W,this.nodes.push(W)}}this.init()}M.prototype.init=function(){this.dirtyNodes=[];for(var N=0;N<this.nodes.length;N++)w.cleanNode(this.nodes[N])},M.prototype.cleanDirty=function(){for(var N=0;N<this.dirtyNodes.length;N++)w.cleanNode(this.dirtyNodes[N]);this.dirtyNodes=[]},M.prototype.markDirty=function(N){this.dirtyNodes.push(N)},M.prototype.neighbors=function(N){var k=[],B=N.x,$=N.y,H=this.grid;return H[B-1]&&H[B-1][$]&&k.push(H[B-1][$]),H[B+1]&&H[B+1][$]&&k.push(H[B+1][$]),H[B]&&H[B][$-1]&&k.push(H[B][$-1]),H[B]&&H[B][$+1]&&k.push(H[B][$+1]),this.diagonal&&(H[B-1]&&H[B-1][$-1]&&k.push(H[B-1][$-1]),H[B+1]&&H[B+1][$-1]&&k.push(H[B+1][$-1]),H[B-1]&&H[B-1][$+1]&&k.push(H[B-1][$+1]),H[B+1]&&H[B+1][$+1]&&k.push(H[B+1][$+1])),k},M.prototype.toString=function(){for(var N=[],k=this.grid,B,$,H,W,J=0,z=k.length;J<z;J++){for(B=[],$=k[J],H=0,W=$.length;H<W;H++)B.push($[H].weight);N.push(B.join(" "))}return N.join(`
`)};function T(N,k,B){this.x=N,this.y=k,this.weight=B}T.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},T.prototype.getCost=function(N){return N&&N.x!==this.x&&N.y!==this.y?this.weight*1.41421:this.weight},T.prototype.isWall=function(){return this.weight===0};function L(N){this.content=[],this.scoreFunction=N}L.prototype={push:function(N){this.content.push(N),this.sinkDown(this.content.length-1)},pop:function(){var N=this.content[0],k=this.content.pop();return this.content.length>0&&(this.content[0]=k,this.bubbleUp(0)),N},remove:function(N){var k=this.content.indexOf(N),B=this.content.pop();k!==this.content.length-1&&(this.content[k]=B,this.scoreFunction(B)<this.scoreFunction(N)?this.sinkDown(k):this.bubbleUp(k))},size:function(){return this.content.length},rescoreElement:function(N){this.sinkDown(this.content.indexOf(N))},sinkDown:function(N){for(var k=this.content[N];N>0;){var B=(N+1>>1)-1,$=this.content[B];if(this.scoreFunction(k)<this.scoreFunction($))this.content[B]=k,this.content[N]=$,N=B;else break}},bubbleUp:function(N){for(var k=this.content.length,B=this.content[N],$=this.scoreFunction(B);;){var H=N+1<<1,W=H-1,J=null,z;if(W<k){var fe=this.content[W];z=this.scoreFunction(fe),z<$&&(J=W)}if(H<k){var q=this.content[H],te=this.scoreFunction(q);te<(J===null?$:z)&&(J=H)}if(J!==null)this.content[N]=this.content[J],this.content[J]=B,N=J;else break}}};function R(N,k,B){if(B=B||{},!c.isObject(B))throw new Error("options is invalid");var $=B.resolution,H=B.minDistance,W=B.obstacles||c.featureCollection([]);if(!N)throw new Error("start is required");if(!k)throw new Error("end is required");if($&&!c.isNumber($)||$<=0)throw new Error("options.resolution must be a number, greater than 0");if(H)throw new Error("options.minDistance is not yet implemented");var J=o.getCoord(N),z=o.getCoord(k);switch(N=c.point(J),k=c.point(z),o.getType(W)){case"FeatureCollection":if(W.features.length===0)return c.lineString([J,z]);break;case"Polygon":W=c.featureCollection([c.feature(o.getGeom(W))]);break;default:throw new Error("invalid obstacles")}var fe=W;fe.features.push(N),fe.features.push(k);var q=l.default(m.default(C.default(l.default(fe)),1.15));if(!$){var te=f.default([q[0],q[1]],[q[2],q[1]],B);$=te/100}fe.features.pop(),fe.features.pop();for(var ie=q[0],xe=q[1],oe=q[2],de=q[3],X=$/f.default([ie,xe],[oe,xe],B),he=X*(oe-ie),Se=$/f.default([ie,xe],[ie,de],B),Te=Se*(de-xe),Re=oe-ie,Be=de-xe,ze=Math.floor(Re/he),Ve=Math.floor(Be/Te),ye=(Re-ze*he)/2,Fe=(Be-Ve*Te)/2,Ce=[],Q=[],me=[],Ie=[],De=1/0,Ee=1/0,Oe=de-Fe,le=0;Oe>=xe;){for(var Y=[],j=[],U=ie+ye,re=0;U<=oe;){var ce=c.point([U,Oe]),be=D(ce,W);Y.push(be?0:1),j.push(U+"|"+Oe);var Ae=f.default(ce,N);!be&&Ae<De&&(De=Ae,me={x:re,y:le});var Pe=f.default(ce,k);!be&&Pe<Ee&&(Ee=Pe,Ie={x:re,y:le}),U+=he,re++}Q.push(Y),Ce.push(j),Oe-=Te,le++}var Je=new M(Q,{diagonal:!0}),Ue=Je.grid[me.y][me.x],qe=Je.grid[Ie.y][Ie.x],ct=w.search(Je,Ue,qe),vt=[J];return ct.forEach(function(Mt){var pt=Ce[Mt.x][Mt.y].split("|");vt.push([+pt[0],+pt[1]])}),vt.push(z),g.default(c.lineString(vt))}function D(N,k){for(var B=0;B<k.features.length;B++)if(h.default(N,k.features[B]))return!0;return!1}return js$n.exports=R,js$n.exports.default=R,js$n.exports}var js$m={exports:{}};function constant$1(r){return function(){return r}}function x(r){return r[0]}function y(r){return r[1]}function RedBlackTree(){this._=null}function RedBlackNode(r){r.U=r.C=r.L=r.R=r.P=r.N=null}RedBlackTree.prototype={constructor:RedBlackTree,insert:function(r,e){var t,i,s;if(r){if(e.P=r,e.N=r.N,r.N&&(r.N.P=e),r.N=e,r.R){for(r=r.R;r.L;)r=r.L;r.L=e}else r.R=e;t=r}else this._?(r=RedBlackFirst(this._),e.P=null,e.N=r,r.P=r.L=e,t=r):(e.P=e.N=null,this._=e,t=null);for(e.L=e.R=null,e.U=t,e.C=!0,r=e;t&&t.C;)i=t.U,t===i.L?(s=i.R,s&&s.C?(t.C=s.C=!1,i.C=!0,r=i):(r===t.R&&(RedBlackRotateLeft(this,t),r=t,t=r.U),t.C=!1,i.C=!0,RedBlackRotateRight(this,i))):(s=i.L,s&&s.C?(t.C=s.C=!1,i.C=!0,r=i):(r===t.L&&(RedBlackRotateRight(this,t),r=t,t=r.U),t.C=!1,i.C=!0,RedBlackRotateLeft(this,i))),t=r.U;this._.C=!1},remove:function(r){r.N&&(r.N.P=r.P),r.P&&(r.P.N=r.N),r.N=r.P=null;var e=r.U,t,i=r.L,s=r.R,n,o;if(i?s?n=RedBlackFirst(s):n=i:n=s,e?e.L===r?e.L=n:e.R=n:this._=n,i&&s?(o=n.C,n.C=r.C,n.L=i,i.U=n,n!==s?(e=n.U,n.U=r.U,r=n.R,e.L=r,n.R=s,s.U=n):(n.U=e,e=n,r=n.R)):(o=r.C,r=n),r&&(r.U=e),!o){if(r&&r.C){r.C=!1;return}do{if(r===this._)break;if(r===e.L){if(t=e.R,t.C&&(t.C=!1,e.C=!0,RedBlackRotateLeft(this,e),t=e.R),t.L&&t.L.C||t.R&&t.R.C){(!t.R||!t.R.C)&&(t.L.C=!1,t.C=!0,RedBlackRotateRight(this,t),t=e.R),t.C=e.C,e.C=t.R.C=!1,RedBlackRotateLeft(this,e),r=this._;break}}else if(t=e.L,t.C&&(t.C=!1,e.C=!0,RedBlackRotateRight(this,e),t=e.L),t.L&&t.L.C||t.R&&t.R.C){(!t.L||!t.L.C)&&(t.R.C=!1,t.C=!0,RedBlackRotateLeft(this,t),t=e.L),t.C=e.C,e.C=t.L.C=!1,RedBlackRotateRight(this,e),r=this._;break}t.C=!0,r=e,e=e.U}while(!r.C);r&&(r.C=!1)}}};function RedBlackRotateLeft(r,e){var t=e,i=e.R,s=t.U;s?s.L===t?s.L=i:s.R=i:r._=i,i.U=s,t.U=i,t.R=i.L,t.R&&(t.R.U=t),i.L=t}function RedBlackRotateRight(r,e){var t=e,i=e.L,s=t.U;s?s.L===t?s.L=i:s.R=i:r._=i,i.U=s,t.U=i,t.L=i.R,t.L&&(t.L.U=t),i.R=t}function RedBlackFirst(r){for(;r.L;)r=r.L;return r}function createEdge(r,e,t,i){var s=[null,null],n=edges.push(s)-1;return s.left=r,s.right=e,t&&setEdgeEnd(s,r,e,t),i&&setEdgeEnd(s,e,r,i),cells[r.index].halfedges.push(n),cells[e.index].halfedges.push(n),s}function createBorderEdge(r,e,t){var i=[e,t];return i.left=r,i}function setEdgeEnd(r,e,t,i){!r[0]&&!r[1]?(r[0]=i,r.left=e,r.right=t):r.left===t?r[1]=i:r[0]=i}function clipEdge(r,e,t,i,s){var n=r[0],o=r[1],c=n[0],_=n[1],l=o[0],h=o[1],f=0,m=1,g=l-c,C=h-_,E;if(E=e-c,!(!g&&E>0)){if(E/=g,g<0){if(E<f)return;E<m&&(m=E)}else if(g>0){if(E>m)return;E>f&&(f=E)}if(E=i-c,!(!g&&E<0)){if(E/=g,g<0){if(E>m)return;E>f&&(f=E)}else if(g>0){if(E<f)return;E<m&&(m=E)}if(E=t-_,!(!C&&E>0)){if(E/=C,C<0){if(E<f)return;E<m&&(m=E)}else if(C>0){if(E>m)return;E>f&&(f=E)}if(E=s-_,!(!C&&E<0)){if(E/=C,C<0){if(E>m)return;E>f&&(f=E)}else if(C>0){if(E<f)return;E<m&&(m=E)}return!(f>0)&&!(m<1)||(f>0&&(r[0]=[c+f*g,_+f*C]),m<1&&(r[1]=[c+m*g,_+m*C])),!0}}}}}function connectEdge(r,e,t,i,s){var n=r[1];if(n)return!0;var o=r[0],c=r.left,_=r.right,l=c[0],h=c[1],f=_[0],m=_[1],g=(l+f)/2,C=(h+m)/2,E,P;if(m===h){if(g<e||g>=i)return;if(l>f){if(!o)o=[g,t];else if(o[1]>=s)return;n=[g,s]}else{if(!o)o=[g,s];else if(o[1]<t)return;n=[g,t]}}else if(E=(l-f)/(m-h),P=C-E*g,E<-1||E>1)if(l>f){if(!o)o=[(t-P)/E,t];else if(o[1]>=s)return;n=[(s-P)/E,s]}else{if(!o)o=[(s-P)/E,s];else if(o[1]<t)return;n=[(t-P)/E,t]}else if(h<m){if(!o)o=[e,E*e+P];else if(o[0]>=i)return;n=[i,E*i+P]}else{if(!o)o=[i,E*i+P];else if(o[0]<e)return;n=[e,E*e+P]}return r[0]=o,r[1]=n,!0}function clipEdges(r,e,t,i){for(var s=edges.length,n;s--;)(!connectEdge(n=edges[s],r,e,t,i)||!clipEdge(n,r,e,t,i)||!(Math.abs(n[0][0]-n[1][0])>epsilon$1||Math.abs(n[0][1]-n[1][1])>epsilon$1))&&delete edges[s]}function createCell(r){return cells[r.index]={site:r,halfedges:[]}}function cellHalfedgeAngle(r,e){var t=r.site,i=e.left,s=e.right;return t===s&&(s=i,i=t),s?Math.atan2(s[1]-i[1],s[0]-i[0]):(t===i?(i=e[1],s=e[0]):(i=e[0],s=e[1]),Math.atan2(i[0]-s[0],s[1]-i[1]))}function cellHalfedgeStart(r,e){return e[+(e.left!==r.site)]}function cellHalfedgeEnd(r,e){return e[+(e.left===r.site)]}function sortCellHalfedges(){for(var r=0,e=cells.length,t,i,s,n;r<e;++r)if((t=cells[r])&&(n=(i=t.halfedges).length)){var o=new Array(n),c=new Array(n);for(s=0;s<n;++s)o[s]=s,c[s]=cellHalfedgeAngle(t,edges[i[s]]);for(o.sort(function(_,l){return c[l]-c[_]}),s=0;s<n;++s)c[s]=i[o[s]];for(s=0;s<n;++s)i[s]=c[s]}}function clipCells(r,e,t,i){var s=cells.length,n,o,c,_,l,h,f,m,g,C,E,P,w=!0;for(n=0;n<s;++n)if(o=cells[n]){for(c=o.site,l=o.halfedges,_=l.length;_--;)edges[l[_]]||l.splice(_,1);for(_=0,h=l.length;_<h;)C=cellHalfedgeEnd(o,edges[l[_]]),E=C[0],P=C[1],f=cellHalfedgeStart(o,edges[l[++_%h]]),m=f[0],g=f[1],(Math.abs(E-m)>epsilon$1||Math.abs(P-g)>epsilon$1)&&(l.splice(_,0,edges.push(createBorderEdge(c,C,Math.abs(E-r)<epsilon$1&&i-P>epsilon$1?[r,Math.abs(m-r)<epsilon$1?g:i]:Math.abs(P-i)<epsilon$1&&t-E>epsilon$1?[Math.abs(g-i)<epsilon$1?m:t,i]:Math.abs(E-t)<epsilon$1&&P-e>epsilon$1?[t,Math.abs(m-t)<epsilon$1?g:e]:Math.abs(P-e)<epsilon$1&&E-r>epsilon$1?[Math.abs(g-e)<epsilon$1?m:r,e]:null))-1),++h);h&&(w=!1)}if(w){var M,T,L,R=1/0;for(n=0,w=null;n<s;++n)(o=cells[n])&&(c=o.site,M=c[0]-r,T=c[1]-e,L=M*M+T*T,L<R&&(R=L,w=o));if(w){var D=[r,e],N=[r,i],k=[t,i],B=[t,e];w.halfedges.push(edges.push(createBorderEdge(c=w.site,D,N))-1,edges.push(createBorderEdge(c,N,k))-1,edges.push(createBorderEdge(c,k,B))-1,edges.push(createBorderEdge(c,B,D))-1)}}for(n=0;n<s;++n)(o=cells[n])&&(o.halfedges.length||delete cells[n])}var circlePool=[],firstCircle;function Circle(){RedBlackNode(this),this.x=this.y=this.arc=this.site=this.cy=null}function attachCircle(r){var e=r.P,t=r.N;if(!(!e||!t)){var i=e.site,s=r.site,n=t.site;if(i!==n){var o=s[0],c=s[1],_=i[0]-o,l=i[1]-c,h=n[0]-o,f=n[1]-c,m=2*(_*f-l*h);if(!(m>=-epsilon2$1)){var g=_*_+l*l,C=h*h+f*f,E=(f*g-l*C)/m,P=(_*C-h*g)/m,w=circlePool.pop()||new Circle;w.arc=r,w.site=s,w.x=E+o,w.y=(w.cy=P+c)+Math.sqrt(E*E+P*P),r.circle=w;for(var M=null,T=circles._;T;)if(w.y<T.y||w.y===T.y&&w.x<=T.x)if(T.L)T=T.L;else{M=T.P;break}else if(T.R)T=T.R;else{M=T;break}circles.insert(M,w),M||(firstCircle=w)}}}}function detachCircle(r){var e=r.circle;e&&(e.P||(firstCircle=e.N),circles.remove(e),circlePool.push(e),RedBlackNode(e),r.circle=null)}var beachPool=[];function Beach(){RedBlackNode(this),this.edge=this.site=this.circle=null}function createBeach(r){var e=beachPool.pop()||new Beach;return e.site=r,e}function detachBeach(r){detachCircle(r),beaches.remove(r),beachPool.push(r),RedBlackNode(r)}function removeBeach(r){var e=r.circle,t=e.x,i=e.cy,s=[t,i],n=r.P,o=r.N,c=[r];detachBeach(r);for(var _=n;_.circle&&Math.abs(t-_.circle.x)<epsilon$1&&Math.abs(i-_.circle.cy)<epsilon$1;)n=_.P,c.unshift(_),detachBeach(_),_=n;c.unshift(_),detachCircle(_);for(var l=o;l.circle&&Math.abs(t-l.circle.x)<epsilon$1&&Math.abs(i-l.circle.cy)<epsilon$1;)o=l.N,c.push(l),detachBeach(l),l=o;c.push(l),detachCircle(l);var h=c.length,f;for(f=1;f<h;++f)l=c[f],_=c[f-1],setEdgeEnd(l.edge,_.site,l.site,s);_=c[0],l=c[h-1],l.edge=createEdge(_.site,l.site,null,s),attachCircle(_),attachCircle(l)}function addBeach(r){for(var e=r[0],t=r[1],i,s,n,o,c=beaches._;c;)if(n=leftBreakPoint(c,t)-e,n>epsilon$1)c=c.L;else if(o=e-rightBreakPoint(c,t),o>epsilon$1){if(!c.R){i=c;break}c=c.R}else{n>-epsilon$1?(i=c.P,s=c):o>-epsilon$1?(i=c,s=c.N):i=s=c;break}createCell(r);var _=createBeach(r);if(beaches.insert(i,_),!(!i&&!s)){if(i===s){detachCircle(i),s=createBeach(i.site),beaches.insert(_,s),_.edge=s.edge=createEdge(i.site,_.site),attachCircle(i),attachCircle(s);return}if(!s){_.edge=createEdge(i.site,_.site);return}detachCircle(i),detachCircle(s);var l=i.site,h=l[0],f=l[1],m=r[0]-h,g=r[1]-f,C=s.site,E=C[0]-h,P=C[1]-f,w=2*(m*P-g*E),M=m*m+g*g,T=E*E+P*P,L=[(P*M-g*T)/w+h,(m*T-E*M)/w+f];setEdgeEnd(s.edge,l,C,L),_.edge=createEdge(l,r,null,L),s.edge=createEdge(r,C,null,L),attachCircle(i),attachCircle(s)}}function leftBreakPoint(r,e){var t=r.site,i=t[0],s=t[1],n=s-e;if(!n)return i;var o=r.P;if(!o)return-1/0;t=o.site;var c=t[0],_=t[1],l=_-e;if(!l)return c;var h=c-i,f=1/n-1/l,m=h/l;return f?(-m+Math.sqrt(m*m-2*f*(h*h/(-2*l)-_+l/2+s-n/2)))/f+i:(i+c)/2}function rightBreakPoint(r,e){var t=r.N;if(t)return leftBreakPoint(t,e);var i=r.site;return i[1]===e?i[0]:1/0}var epsilon$1=1e-6,epsilon2$1=1e-12,beaches,cells,circles,edges;function triangleArea(r,e,t){return(r[0]-t[0])*(e[1]-r[1])-(r[0]-e[0])*(t[1]-r[1])}function lexicographic(r,e){return e[1]-r[1]||e[0]-r[0]}function Diagram(r,e){var t=r.sort(lexicographic).pop(),i,s,n;for(edges=[],cells=new Array(r.length),beaches=new RedBlackTree,circles=new RedBlackTree;;)if(n=firstCircle,t&&(!n||t[1]<n.y||t[1]===n.y&&t[0]<n.x))(t[0]!==i||t[1]!==s)&&(addBeach(t),i=t[0],s=t[1]),t=r.pop();else if(n)removeBeach(n.arc);else break;if(sortCellHalfedges(),e){var o=+e[0][0],c=+e[0][1],_=+e[1][0],l=+e[1][1];clipEdges(o,c,_,l),clipCells(o,c,_,l)}this.edges=edges,this.cells=cells,beaches=circles=edges=cells=null}Diagram.prototype={constructor:Diagram,polygons:function(){var r=this.edges;return this.cells.map(function(e){var t=e.halfedges.map(function(i){return cellHalfedgeStart(e,r[i])});return t.data=e.site.data,t})},triangles:function(){var r=[],e=this.edges;return this.cells.forEach(function(t,i){if(c=(n=t.halfedges).length)for(var s=t.site,n,o=-1,c,_,l=e[n[c-1]],h=l.left===s?l.right:l.left;++o<c;)_=h,l=e[n[o]],h=l.left===s?l.right:l.left,_&&h&&i<_.index&&i<h.index&&triangleArea(s,_,h)<0&&r.push([s.data,_.data,h.data])}),r},links:function(){return this.edges.filter(function(r){return r.right}).map(function(r){return{source:r.left.data,target:r.right.data}})},find:function(r,e,t){for(var i=this,s,n=i._found||0,o=i.cells.length,c;!(c=i.cells[n]);)if(++n>=o)return null;var _=r-c.site[0],l=e-c.site[1],h=_*_+l*l;do c=i.cells[s=n],n=null,c.halfedges.forEach(function(f){var m=i.edges[f],g=m.left;if(!((g===c.site||!g)&&!(g=m.right))){var C=r-g[0],E=e-g[1],P=C*C+E*E;P<h&&(h=P,n=g.index)}});while(n!==null);return i._found=s,t==null||h<=t*t?c.site:null}};function voronoi(){var r=x,e=y,t=null;function i(s){return new Diagram(s.map(function(n,o){var c=[Math.round(r(n,o,s)/epsilon$1)*epsilon$1,Math.round(e(n,o,s)/epsilon$1)*epsilon$1];return c.index=o,c.data=n,c}),t)}return i.polygons=function(s){return i(s).polygons()},i.links=function(s){return i(s).links()},i.triangles=function(s){return i(s).triangles()},i.x=function(s){return arguments.length?(r=typeof s=="function"?s:constant$1(+s),i):r},i.y=function(s){return arguments.length?(e=typeof s=="function"?s:constant$1(+s),i):e},i.extent=function(s){return arguments.length?(t=s==null?null:[[+s[0][0],+s[0][1]],[+s[1][0],+s[1][1]]],i):t&&[[t[0][0],t[0][1]],[t[1][0],t[1][1]]]},i.size=function(s){return arguments.length?(t=s==null?null:[[0,0],[+s[0],+s[1]]],i):t&&[t[1][0]-t[0][0],t[1][1]-t[0][1]]},i}const d3Voronoi=Object.freeze(Object.defineProperty({__proto__:null,voronoi},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(d3Voronoi);var hasRequiredJs$n;function requireJs$n(){if(hasRequiredJs$n)return js$m.exports;hasRequiredJs$n=1;var r=requireJs$1G(),e=requireJs$1D(),t=require$$2;function i(n){return n=n.slice(),n.push(n[0]),r.polygon([n])}function s(n,o){if(o=o||{},!r.isObject(o))throw new Error("options is invalid");var c=o.bbox||[-180,-85,180,85];if(!n)throw new Error("points is required");if(!Array.isArray(c))throw new Error("bbox is invalid");return e.collectionOf(n,"Point","points"),r.featureCollection(t.voronoi().x(function(_){return _.geometry.coordinates[0]}).y(function(_){return _.geometry.coordinates[1]}).extent([[c[0],c[1]],[c[2],c[3]]]).polygons(n.features).map(i))}return js$m.exports=s,js$m.exports.default=s,js$m.exports}var js$l={exports:{}},hasRequiredJs$m;function requireJs$m(){if(hasRequiredJs$m)return js$l.exports;hasRequiredJs$m=1;var r=requireJs$1G(),e=requireJs$H(),t=requireJs$C(),i=requireJs$1D();function s(l){return l&&typeof l=="object"&&"default"in l?l:{default:l}}var n=s(e),o=s(t);function c(l,h,f,m){m=m||{};var g=m.steps||64,C=m.units||"kilometers",E=m.angle||0,P=m.pivot||l,w=m.properties||l.properties||{};if(!l)throw new Error("center is required");if(!h)throw new Error("xSemiAxis is required");if(!f)throw new Error("ySemiAxis is required");if(!r.isObject(m))throw new Error("options must be an object");if(!r.isNumber(g))throw new Error("steps must be a number");if(!r.isNumber(E))throw new Error("angle must be a number");var M=i.getCoord(l);if(C==="degrees")var T=r.degreesToRadians(E);else h=n.default(l,h,90,{units:C}),f=n.default(l,f,0,{units:C}),h=i.getCoord(h)[0]-M[0],f=i.getCoord(f)[1]-M[1];for(var L=[],R=0;R<g;R+=1){var D=R*-360/g,N=h*f/Math.sqrt(Math.pow(f,2)+Math.pow(h,2)*Math.pow(_(D),2)),k=h*f/Math.sqrt(Math.pow(h,2)+Math.pow(f,2)/Math.pow(_(D),2));if(D<-90&&D>=-270&&(N=-N),D<-180&&D>=-360&&(k=-k),C==="degrees"){var B=N*Math.cos(T)+k*Math.sin(T),$=k*Math.cos(T)-N*Math.sin(T);N=B,k=$}L.push([N+M[0],k+M[1]])}return L.push(L[0]),C==="degrees"?r.polygon([L],w):o.default(r.polygon([L],w),E,{pivot:P})}function _(l){var h=l*Math.PI/180;return Math.tan(h)}return js$l.exports=c,js$l.exports.default=c,js$l.exports}var js$k={},hasRequiredJs$l;function requireJs$l(){if(hasRequiredJs$l)return js$k;hasRequiredJs$l=1,Object.defineProperty(js$k,"__esModule",{value:!0});var r=requireJs$1F(),e=requireJs$1G();function t(i,s){s===void 0&&(s={});var n=0,o=0,c=0;return r.geomEach(i,function(_,l,h){var f=s.weight?h==null?void 0:h[s.weight]:void 0;if(f=f??1,!e.isNumber(f))throw new Error("weight value must be a number for feature index "+l);f=Number(f),f>0&&r.coordEach(_,function(m){n+=m[0]*f,o+=m[1]*f,c+=f})}),e.point([n/c,o/c],s.properties,s)}return js$k.default=t,js$k}var js$j={},hasRequiredJs$k;function requireJs$k(){if(hasRequiredJs$k)return js$j;hasRequiredJs$k=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(js$j,"__esModule",{value:!0});var e=r(requireJs$l()),t=r(requireJs$1y()),i=r(requireJs$1f()),s=requireJs$1G(),n=requireJs$1F();function o(_,l){if(l===void 0&&(l={}),l=l||{},!s.isObject(l))throw new Error("options is invalid");var h=l.counter||10;if(!s.isNumber(h))throw new Error("counter must be a number");var f=l.weight,m=e.default(_,{weight:l.weight}),g=s.featureCollection([]);n.featureEach(_,function(E){var P;g.features.push(i.default(E,{properties:{weight:(P=E.properties)===null||P===void 0?void 0:P[f]}}))});var C={tolerance:l.tolerance,medianCandidates:[]};return c(m.geometry.coordinates,[0,0],g,C,h)}function c(_,l,h,f,m){var g=f.tolerance||.001,C=0,E=0,P=0,w=0;if(n.featureEach(h,function(L){var R,D=(R=L.properties)===null||R===void 0?void 0:R.weight,N=D??1;if(N=Number(N),!s.isNumber(N))throw new Error("weight value must be a number");if(N>0){w+=1;var k=N*t.default(L,_);k===0&&(k=1);var B=N/k;C+=L.geometry.coordinates[0]*B,E+=L.geometry.coordinates[1]*B,P+=B}}),w<1)throw new Error("no features to measure");var M=C/P,T=E/P;return w===1||m===0||Math.abs(M-l[0])<g&&Math.abs(T-l[1])<g?s.point([M,T],{medianCandidates:f.medianCandidates}):(f.medianCandidates.push([M,T]),c([M,T],_,h,f,m-1))}return js$j.default=o,js$j}var js$i={exports:{}},hasRequiredJs$j;function requireJs$j(){if(hasRequiredJs$j)return js$i.exports;hasRequiredJs$j=1;var r=requireJs$1F(),e=requireJs$1D(),t=requireJs$1G(),i=requireJs$l(),s=requireJs$1z(),n=requireJs$m();function o(m){return m&&typeof m=="object"&&"default"in m?m:{default:m}}var c=o(i),_=o(s),l=o(n);function h(m,g){if(g=g||{},!t.isObject(g))throw new Error("options is invalid");var C=g.steps||64,E=g.weight,P=g.properties||{};if(!t.isNumber(C))throw new Error("steps must be a number");if(!t.isObject(P))throw new Error("properties must be a number");var w=r.coordAll(m).length,M=c.default(m,{weight:E}),T=0,L=0,R=0;r.featureEach(m,function(xe){var oe=xe.properties[E]||1,de=f(e.getCoords(xe),e.getCoords(M));T+=Math.pow(de.x,2)*oe,L+=Math.pow(de.y,2)*oe,R+=de.x*de.y*oe});var D=T-L,N=Math.sqrt(Math.pow(D,2)+4*Math.pow(R,2)),k=2*R,B=Math.atan((D+N)/k),$=B*180/Math.PI,H=0,W=0,J=0;r.featureEach(m,function(xe){var oe=xe.properties[E]||1,de=f(e.getCoords(xe),e.getCoords(M));H+=Math.pow(de.x*Math.cos(B)-de.y*Math.sin(B),2)*oe,W+=Math.pow(de.x*Math.sin(B)+de.y*Math.cos(B),2)*oe,J+=oe});var z=Math.sqrt(2*H/J),fe=Math.sqrt(2*W/J),q=l.default(M,z,fe,{units:"degrees",angle:$,steps:C,properties:P}),te=_.default(m,t.featureCollection([q])),ie={meanCenterCoordinates:e.getCoords(M),semiMajorAxis:z,semiMinorAxis:fe,numberOfFeatures:w,angle:$,percentageWithinEllipse:100*r.coordAll(te).length/w};return q.properties.standardDeviationalEllipse=ie,q}function f(m,g){return{x:m[0]-g[0],y:m[1]-g[1]}}return js$i.exports=h,js$i.exports.default=h,js$i.exports}var js$h={},hasRequiredJs$i;function requireJs$i(){if(hasRequiredJs$i)return js$h;hasRequiredJs$i=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(js$h,"__esModule",{value:!0});var e=r(requireJs$1i()),t=requireJs$1G(),i=r(requireJs$I());function s(n,o,c,_){if(_===void 0&&(_={}),!t.isObject(_))throw new Error("options is invalid");if(!n)throw new Error("startPoint is required");if(!o)throw new Error("midPoint is required");if(!c)throw new Error("endPoint is required");var l=n,h=o,f=c,m=t.bearingToAzimuth(_.mercator!==!0?e.default(l,h):i.default(l,h)),g=t.bearingToAzimuth(_.mercator!==!0?e.default(f,h):i.default(f,h)),C=Math.abs(m-g);return _.explementary===!0?360-C:C}return js$h.default=s,js$h}var js$g={exports:{}},hasRequiredJs$h;function requireJs$h(){if(hasRequiredJs$h)return js$g.exports;hasRequiredJs$h=1;var r=requireJs$1F(),e=requireJs$1G();function t(n,o){var c=[],_=o.iterations||1;if(!n)throw new Error("inputPolys is required");return r.geomEach(n,function(l,h,f){var m,g,C;switch(l.type){case"Polygon":m=[[]];for(var E=0;E<_;E++)C=[[]],g=l,E>0&&(g=e.polygon(m).geometry),i(g,C),m=C.slice(0);c.push(e.polygon(m,f));break;case"MultiPolygon":m=[[[]]];for(var P=0;P<_;P++)C=[[[]]],g=l,P>0&&(g=e.multiPolygon(m).geometry),s(g,C),m=C.slice(0);c.push(e.multiPolygon(m,f));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}}),e.featureCollection(c)}function i(n,o){var c=0,_=0;r.coordEach(n,function(l,h,f,m,g){g>c&&(c=g,_=h,o.push([]));var C=h-_,E=n.coordinates[g][C+1],P=l[0],w=l[1],M=E[0],T=E[1];o[g].push([.75*P+.25*M,.75*w+.25*T]),o[g].push([.25*P+.75*M,.25*w+.75*T])},!0),o.forEach(function(l){l.push(l[0])})}function s(n,o){var c=0,_=0,l=0;r.coordEach(n,function(h,f,m,g,C){g>l&&(l=g,_=f,o.push([[]])),C>c&&(c=C,_=f,o[g].push([]));var E=f-_,P=n.coordinates[g][C][E+1],w=h[0],M=h[1],T=P[0],L=P[1];o[g][C].push([.75*w+.25*T,.75*M+.25*L]),o[g][C].push([.25*w+.75*T,.25*M+.75*L])},!0),o.forEach(function(h){h.forEach(function(f){f.push(f[0])})})}return js$g.exports=t,js$g.exports.default=t,js$g.exports}var js$f={},js$e={},hasRequiredJs$g;function requireJs$g(){if(hasRequiredJs$g)return js$e;hasRequiredJs$g=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(js$e,"__esModule",{value:!0});var e=r(requireJs$1f()),t=requireJs$1D(),i=requireJs$1F();function s(o,c,_){_===void 0&&(_=2);var l=t.getCoord(o),h=t.getCoord(c),f=l[0]-h[0],m=l[1]-h[1];return _===1?Math.abs(f)+Math.abs(m):Math.pow(Math.pow(f,_)+Math.pow(m,_),1/_)}js$e.pNormDistance=s;function n(o,c){c=c||{};var _=c.threshold||1e4,l=c.p||2,h=c.binary||!1,f=c.alpha||-1,m=c.standardization||!1,g=[];i.featureEach(o,function(T){g.push(e.default(T))});for(var C=[],E=0;E<g.length;E++)C[E]=[];for(var E=0;E<g.length;E++)for(var P=E;P<g.length;P++){E===P&&(C[E][P]=0);var w=s(g[E],g[P],l);C[E][P]=w,C[P][E]=w}for(var E=0;E<g.length;E++)for(var P=0;P<g.length;P++){var w=C[E][P];w!==0&&(h?w<=_?C[E][P]=1:C[E][P]=0:w<=_?C[E][P]=Math.pow(w,f):C[E][P]=0)}if(m)for(var E=0;E<g.length;E++)for(var M=C[E].reduce(function(L,R){return L+R},0),P=0;P<g.length;P++)C[E][P]=C[E][P]/M;return C}return js$e.default=n,js$e}var hasRequiredJs$f;function requireJs$f(){if(hasRequiredJs$f)return js$f;hasRequiredJs$f=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(js$f,"__esModule",{value:!0});var e=r(requireJs$g()),t=requireJs$1F();function i(o,c){var _=c.inputField,l=c.threshold||1e5,h=c.p||2,f=c.binary||!1,m=c.alpha||-1,g=c.standardization||!0,C=e.default(o,{alpha:m,binary:f,p:h,standardization:g,threshold:l}),E=[];t.featureEach(o,function(te){var ie=te.properties||{};E.push(ie[_])});for(var P=s(E),w=n(E),M=0,T=0,L=0,R=0,D=C.length,N=0;N<D;N++){for(var k=0,B=0;B<D;B++)M+=C[N][B]*(E[N]-P)*(E[B]-P),T+=C[N][B],L+=Math.pow(C[N][B]+C[B][N],2),k+=C[N][B]+C[B][N];R+=Math.pow(k,2)}L=.5*L;var $=M/T/w,H=-1/(D-1),W=D*D*L-D*R+3*(T*T),J=(D-1)*(D+1)*(T*T),z=W/J-H*H,fe=Math.sqrt(z),q=($-H)/fe;return{expectedMoranIndex:H,moranIndex:$,stdNorm:fe,zNorm:q}}js$f.default=i;function s(o){for(var c=0,_=0,l=o;_<l.length;_++){var h=l[_];c+=h}return c/o.length}function n(o){for(var c=s(o),_=0,l=0,h=o;l<h.length;l++){var f=h[l];_+=Math.pow(f-c,2)}return _/o.length}return js$f}var js$d={},hasRequiredJs$e;function requireJs$e(){if(hasRequiredJs$e)return js$d;hasRequiredJs$e=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(js$d,"__esModule",{value:!0});var e=requireJs$1F(),t=requireJs$1G(),i=r(requireJs$1w());function s(h,f){return f===void 0&&(f={}),o(h,"mercator",f)}js$d.toMercator=s;function n(h,f){return f===void 0&&(f={}),o(h,"wgs84",f)}js$d.toWgs84=n;function o(h,f,m){m===void 0&&(m={}),m=m||{};var g=m.mutate;if(!h)throw new Error("geojson is required");return Array.isArray(h)&&t.isNumber(h[0])?h=f==="mercator"?c(h):_(h):(g!==!0&&(h=i.default(h)),e.coordEach(h,function(C){var E=f==="mercator"?c(C):_(C);C[0]=E[0],C[1]=E[1]})),h}function c(h){var f=Math.PI/180,m=6378137,g=20037508342789244e-9,C=Math.abs(h[0])<=180?h[0]:h[0]-l(h[0])*360,E=[m*C*f,m*Math.log(Math.tan(Math.PI*.25+.5*h[1]*f))];return E[0]>g&&(E[0]=g),E[0]<-g&&(E[0]=-g),E[1]>g&&(E[1]=g),E[1]<-g&&(E[1]=-g),E}function _(h){var f=180/Math.PI,m=6378137;return[h[0]*f/m,(Math.PI*.5-2*Math.atan(Math.exp(-h[1]/m)))*f]}function l(h){return h<0?-1:h>0?1:0}return js$d}var js$c={},hasRequiredJs$d;function requireJs$d(){if(hasRequiredJs$d)return js$c;hasRequiredJs$d=1;var r=commonjsGlobal&&commonjsGlobal.__spreadArrays||function(){for(var f=0,m=0,g=arguments.length;m<g;m++)f+=arguments[m].length;for(var C=Array(f),E=0,m=0;m<g;m++)for(var P=arguments[m],w=0,M=P.length;w<M;w++,E++)C[E]=P[w];return C};Object.defineProperty(js$c,"__esModule",{value:!0});var e=requireJs$1G();function t(f){return Array.isArray(f)?h(f):f&&f.bbox?h(f.bbox):[_(),l()]}js$c.randomPosition=t;function i(f,m){m===void 0&&(m={}),f==null&&(f=1);for(var g=[],C=0;C<f;C++)g.push(e.point(t(m.bbox)));return e.featureCollection(g)}js$c.randomPoint=i;function s(f,m){m===void 0&&(m={}),f==null&&(f=1),(!e.isNumber(m.num_vertices)||m.num_vertices===void 0)&&(m.num_vertices=10),(!e.isNumber(m.max_radial_length)||m.max_radial_length===void 0)&&(m.max_radial_length=10);for(var g=[],C=function(P){var w=[],M=r(Array(m.num_vertices+1)).map(Math.random);M.forEach(function(T,L,R){R[L]=L>0?T+R[L-1]:T}),M.forEach(function(T){T=T*2*Math.PI/M[M.length-1];var L=Math.random();w.push([L*(m.max_radial_length||10)*Math.sin(T),L*(m.max_radial_length||10)*Math.cos(T)])}),w[w.length-1]=w[0],w=w.map(o(t(m.bbox))),g.push(e.polygon([w]))},E=0;E<f;E++)C();return e.featureCollection(g)}js$c.randomPolygon=s;function n(f,m){if(m===void 0&&(m={}),m=m||{},!e.isObject(m))throw new Error("options is invalid");var g=m.bbox,C=m.num_vertices,E=m.max_length,P=m.max_rotation;f==null&&(f=1),(!e.isNumber(C)||C===void 0||C<2)&&(C=10),(!e.isNumber(E)||E===void 0)&&(E=1e-4),(!e.isNumber(P)||P===void 0)&&(P=Math.PI/8);for(var w=[],M=0;M<f;M++){for(var T=t(g),L=[T],R=0;R<C-1;R++){var D=R===0?Math.random()*2*Math.PI:Math.tan((L[R][1]-L[R-1][1])/(L[R][0]-L[R-1][0])),N=D+(Math.random()-.5)*P*2,k=Math.random()*E;L.push([L[R][0]+k*Math.cos(N),L[R][1]+k*Math.sin(N)])}w.push(e.lineString(L))}return e.featureCollection(w)}js$c.randomLineString=n;function o(f){return function(m){return[m[0]+f[0],m[1]+f[1]]}}function c(){return Math.random()-.5}function _(){return c()*360}function l(){return c()*180}function h(f){return[Math.random()*(f[2]-f[0])+f[0],Math.random()*(f[3]-f[1])+f[1]]}return js$c}var js$b={},hasRequiredJs$c;function requireJs$c(){if(hasRequiredJs$c)return js$b;hasRequiredJs$c=1,Object.defineProperty(js$b,"__esModule",{value:!0});var r=requireJs$1F(),e=requireJs$1G();function t(l,h){if(!l)throw new Error("geojson is required");if(l.type!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(h==null)throw new Error("filter is required");var f=[];return r.featureEach(l,function(m){o(m.properties,h)&&f.push(m)}),e.featureCollection(f)}js$b.getCluster=t;function i(l,h,f){if(!l)throw new Error("geojson is required");if(l.type!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(h==null)throw new Error("property is required");for(var m=n(l,h),g=Object.keys(m),C=0;C<g.length;C++){for(var E=g[C],P=m[E],w=[],M=0;M<P.length;M++)w.push(l.features[P[M]]);f(e.featureCollection(w),E,C)}}js$b.clusterEach=i;function s(l,h,f,m){var g=m;return i(l,h,function(C,E,P){P===0&&m===void 0?g=C:g=f(g,C,E,P)}),g}js$b.clusterReduce=s;function n(l,h){var f={};return r.featureEach(l,function(m,g){var C=m.properties||{};if(Object.prototype.hasOwnProperty.call(C,String(h))){var E=C[h];Object.prototype.hasOwnProperty.call(f,E)?f[E].push(g):f[E]=[g]}}),f}js$b.createBins=n;function o(l,h){if(l===void 0)return!1;var f=typeof h;if(f==="number"||f==="string")return Object.prototype.hasOwnProperty.call(l,h);if(Array.isArray(h)){for(var m=0;m<h.length;m++)if(!o(l,h[m]))return!1;return!0}else return c(l,h)}js$b.applyFilter=o;function c(l,h){for(var f=Object.keys(h),m=0;m<f.length;m++){var g=f[m];if(l[g]!==h[g])return!1}return!0}js$b.propertiesContainsFilter=c;function _(l,h){if(!h)return{};if(!h.length)return{};for(var f={},m=0;m<h.length;m++){var g=h[m];Object.prototype.hasOwnProperty.call(l,g)&&(f[g]=l[g])}return f}return js$b.filterProperties=_,js$b}var js$a={exports:{}},polygonClipping_umd={exports:{}},hasRequiredPolygonClipping_umd;function requirePolygonClipping_umd(){return hasRequiredPolygonClipping_umd||(hasRequiredPolygonClipping_umd=1,function(r,e){(function(t,i){r.exports=i()})(commonjsGlobal,function(){function t(le,Y){if(!(le instanceof Y))throw new TypeError("Cannot call a class as a function")}function i(le,Y){for(var j=0;j<Y.length;j++){var U=Y[j];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(le,U.key,U)}}function s(le,Y,j){return Y&&i(le.prototype,Y),j&&i(le,j),le}/**
 * splaytree v3.1.0
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 */var n=function(){function le(Y,j){this.next=null,this.key=Y,this.data=j,this.left=null,this.right=null}return le}();function o(le,Y){return le>Y?1:le<Y?-1:0}function c(le,Y,j){for(var U=new n(null,null),re=U,ce=U;;){var be=j(le,Y.key);if(be<0){if(Y.left===null)break;if(j(le,Y.left.key)<0){var Ae=Y.left;if(Y.left=Ae.right,Ae.right=Y,Y=Ae,Y.left===null)break}ce.left=Y,ce=Y,Y=Y.left}else if(be>0){if(Y.right===null)break;if(j(le,Y.right.key)>0){var Ae=Y.right;if(Y.right=Ae.left,Ae.left=Y,Y=Ae,Y.right===null)break}re.right=Y,re=Y,Y=Y.right}else break}return re.right=Y.left,ce.left=Y.right,Y.left=U.right,Y.right=U.left,Y}function _(le,Y,j,U){var re=new n(le,Y);if(j===null)return re.left=re.right=null,re;j=c(le,j,U);var ce=U(le,j.key);return ce<0?(re.left=j.left,re.right=j,j.left=null):ce>=0&&(re.right=j.right,re.left=j,j.right=null),re}function l(le,Y,j){var U=null,re=null;if(Y){Y=c(le,Y,j);var ce=j(Y.key,le);ce===0?(U=Y.left,re=Y.right):ce<0?(re=Y.right,Y.right=null,U=Y):(U=Y.left,Y.left=null,re=Y)}return{left:U,right:re}}function h(le,Y,j){return Y===null?le:(le===null||(Y=c(le.key,Y,j),Y.left=le),Y)}function f(le,Y,j,U,re){if(le){U(""+Y+(j?"└── ":"├── ")+re(le)+`
`);var ce=Y+(j?"    ":"│   ");le.left&&f(le.left,ce,!1,U,re),le.right&&f(le.right,ce,!0,U,re)}}var m=function(){function le(Y){Y===void 0&&(Y=o),this._root=null,this._size=0,this._comparator=Y}return le.prototype.insert=function(Y,j){return this._size++,this._root=_(Y,j,this._root,this._comparator)},le.prototype.add=function(Y,j){var U=new n(Y,j);this._root===null&&(U.left=U.right=null,this._size++,this._root=U);var re=this._comparator,ce=c(Y,this._root,re),be=re(Y,ce.key);return be===0?this._root=ce:(be<0?(U.left=ce.left,U.right=ce,ce.left=null):be>0&&(U.right=ce.right,U.left=ce,ce.right=null),this._size++,this._root=U),this._root},le.prototype.remove=function(Y){this._root=this._remove(Y,this._root,this._comparator)},le.prototype._remove=function(Y,j,U){var re;if(j===null)return null;j=c(Y,j,U);var ce=U(Y,j.key);return ce===0?(j.left===null?re=j.right:(re=c(Y,j.left,U),re.right=j.right),this._size--,re):j},le.prototype.pop=function(){var Y=this._root;if(Y){for(;Y.left;)Y=Y.left;return this._root=c(Y.key,this._root,this._comparator),this._root=this._remove(Y.key,this._root,this._comparator),{key:Y.key,data:Y.data}}return null},le.prototype.findStatic=function(Y){for(var j=this._root,U=this._comparator;j;){var re=U(Y,j.key);if(re===0)return j;re<0?j=j.left:j=j.right}return null},le.prototype.find=function(Y){return this._root&&(this._root=c(Y,this._root,this._comparator),this._comparator(Y,this._root.key)!==0)?null:this._root},le.prototype.contains=function(Y){for(var j=this._root,U=this._comparator;j;){var re=U(Y,j.key);if(re===0)return!0;re<0?j=j.left:j=j.right}return!1},le.prototype.forEach=function(Y,j){for(var U=this._root,re=[],ce=!1;!ce;)U!==null?(re.push(U),U=U.left):re.length!==0?(U=re.pop(),Y.call(j,U),U=U.right):ce=!0;return this},le.prototype.range=function(Y,j,U,re){for(var ce=[],be=this._comparator,Ae=this._root,Pe;ce.length!==0||Ae;)if(Ae)ce.push(Ae),Ae=Ae.left;else{if(Ae=ce.pop(),Pe=be(Ae.key,j),Pe>0)break;if(be(Ae.key,Y)>=0&&U.call(re,Ae))return this;Ae=Ae.right}return this},le.prototype.keys=function(){var Y=[];return this.forEach(function(j){var U=j.key;return Y.push(U)}),Y},le.prototype.values=function(){var Y=[];return this.forEach(function(j){var U=j.data;return Y.push(U)}),Y},le.prototype.min=function(){return this._root?this.minNode(this._root).key:null},le.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},le.prototype.minNode=function(Y){if(Y===void 0&&(Y=this._root),Y)for(;Y.left;)Y=Y.left;return Y},le.prototype.maxNode=function(Y){if(Y===void 0&&(Y=this._root),Y)for(;Y.right;)Y=Y.right;return Y},le.prototype.at=function(Y){for(var j=this._root,U=!1,re=0,ce=[];!U;)if(j)ce.push(j),j=j.left;else if(ce.length>0){if(j=ce.pop(),re===Y)return j;re++,j=j.right}else U=!0;return null},le.prototype.next=function(Y){var j=this._root,U=null;if(Y.right){for(U=Y.right;U.left;)U=U.left;return U}for(var re=this._comparator;j;){var ce=re(Y.key,j.key);if(ce===0)break;ce<0?(U=j,j=j.left):j=j.right}return U},le.prototype.prev=function(Y){var j=this._root,U=null;if(Y.left!==null){for(U=Y.left;U.right;)U=U.right;return U}for(var re=this._comparator;j;){var ce=re(Y.key,j.key);if(ce===0)break;ce<0?j=j.left:(U=j,j=j.right)}return U},le.prototype.clear=function(){return this._root=null,this._size=0,this},le.prototype.toList=function(){return E(this._root)},le.prototype.load=function(Y,j,U){j===void 0&&(j=[]),U===void 0&&(U=!1);var re=Y.length,ce=this._comparator;if(U&&M(Y,j,0,re-1,ce),this._root===null)this._root=g(Y,j,0,re),this._size=re;else{var be=w(this.toList(),C(Y,j),ce);re=this._size+re,this._root=P({head:be},0,re)}return this},le.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(le.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(le.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),le.prototype.toString=function(Y){Y===void 0&&(Y=function(re){return String(re.key)});var j=[];return f(this._root,"",!0,function(U){return j.push(U)},Y),j.join("")},le.prototype.update=function(Y,j,U){var re=this._comparator,ce=l(Y,this._root,re),be=ce.left,Ae=ce.right;re(Y,j)<0?Ae=_(j,U,Ae,re):be=_(j,U,be,re),this._root=h(be,Ae,re)},le.prototype.split=function(Y){return l(Y,this._root,this._comparator)},le}();function g(le,Y,j,U){var re=U-j;if(re>0){var ce=j+Math.floor(re/2),be=le[ce],Ae=Y[ce],Pe=new n(be,Ae);return Pe.left=g(le,Y,j,ce),Pe.right=g(le,Y,ce+1,U),Pe}return null}function C(le,Y){for(var j=new n(null,null),U=j,re=0;re<le.length;re++)U=U.next=new n(le[re],Y[re]);return U.next=null,j.next}function E(le){for(var Y=le,j=[],U=!1,re=new n(null,null),ce=re;!U;)Y?(j.push(Y),Y=Y.left):j.length>0?(Y=ce=ce.next=j.pop(),Y=Y.right):U=!0;return ce.next=null,re.next}function P(le,Y,j){var U=j-Y;if(U>0){var re=Y+Math.floor(U/2),ce=P(le,Y,re),be=le.head;return be.left=ce,le.head=le.head.next,be.right=P(le,re+1,j),be}return null}function w(le,Y,j){for(var U=new n(null,null),re=U,ce=le,be=Y;ce!==null&&be!==null;)j(ce.key,be.key)<0?(re.next=ce,ce=ce.next):(re.next=be,be=be.next),re=re.next;return ce!==null?re.next=ce:be!==null&&(re.next=be),U.next}function M(le,Y,j,U,re){if(!(j>=U)){for(var ce=le[j+U>>1],be=j-1,Ae=U+1;;){do be++;while(re(le[be],ce)<0);do Ae--;while(re(le[Ae],ce)>0);if(be>=Ae)break;var Pe=le[be];le[be]=le[Ae],le[Ae]=Pe,Pe=Y[be],Y[be]=Y[Ae],Y[Ae]=Pe}M(le,Y,j,Ae,re),M(le,Y,Ae+1,U,re)}}var T=function(Y,j){return Y.ll.x<=j.x&&j.x<=Y.ur.x&&Y.ll.y<=j.y&&j.y<=Y.ur.y},L=function(Y,j){if(j.ur.x<Y.ll.x||Y.ur.x<j.ll.x||j.ur.y<Y.ll.y||Y.ur.y<j.ll.y)return null;var U=Y.ll.x<j.ll.x?j.ll.x:Y.ll.x,re=Y.ur.x<j.ur.x?Y.ur.x:j.ur.x,ce=Y.ll.y<j.ll.y?j.ll.y:Y.ll.y,be=Y.ur.y<j.ur.y?Y.ur.y:j.ur.y;return{ll:{x:U,y:ce},ur:{x:re,y:be}}},R=Number.EPSILON;R===void 0&&(R=Math.pow(2,-52));var D=R*R,N=function(Y,j){if(-R<Y&&Y<R&&-R<j&&j<R)return 0;var U=Y-j;return U*U<D*Y*j?0:Y<j?-1:1},k=function(){function le(){t(this,le),this.reset()}return s(le,[{key:"reset",value:function(){this.xRounder=new B,this.yRounder=new B}},{key:"round",value:function(j,U){return{x:this.xRounder.round(j),y:this.yRounder.round(U)}}}]),le}(),B=function(){function le(){t(this,le),this.tree=new m,this.round(0)}return s(le,[{key:"round",value:function(j){var U=this.tree.add(j),re=this.tree.prev(U);if(re!==null&&N(U.key,re.key)===0)return this.tree.remove(j),re.key;var ce=this.tree.next(U);return ce!==null&&N(U.key,ce.key)===0?(this.tree.remove(j),ce.key):j}}]),le}(),$=new k,H=function(Y,j){return Y.x*j.y-Y.y*j.x},W=function(Y,j){return Y.x*j.x+Y.y*j.y},J=function(Y,j,U){var re={x:j.x-Y.x,y:j.y-Y.y},ce={x:U.x-Y.x,y:U.y-Y.y},be=H(re,ce);return N(be,0)},z=function(Y){return Math.sqrt(W(Y,Y))},fe=function(Y,j,U){var re={x:j.x-Y.x,y:j.y-Y.y},ce={x:U.x-Y.x,y:U.y-Y.y};return H(ce,re)/z(ce)/z(re)},q=function(Y,j,U){var re={x:j.x-Y.x,y:j.y-Y.y},ce={x:U.x-Y.x,y:U.y-Y.y};return W(ce,re)/z(ce)/z(re)},te=function(Y,j,U){return j.y===0?null:{x:Y.x+j.x/j.y*(U-Y.y),y:U}},ie=function(Y,j,U){return j.x===0?null:{x:U,y:Y.y+j.y/j.x*(U-Y.x)}},xe=function(Y,j,U,re){if(j.x===0)return ie(U,re,Y.x);if(re.x===0)return ie(Y,j,U.x);if(j.y===0)return te(U,re,Y.y);if(re.y===0)return te(Y,j,U.y);var ce=H(j,re);if(ce==0)return null;var be={x:U.x-Y.x,y:U.y-Y.y},Ae=H(be,j)/ce,Pe=H(be,re)/ce,Je=Y.x+Pe*j.x,Ue=U.x+Ae*re.x,qe=Y.y+Pe*j.y,ct=U.y+Ae*re.y,vt=(Je+Ue)/2,Mt=(qe+ct)/2;return{x:vt,y:Mt}},oe=function(){s(le,null,[{key:"compare",value:function(j,U){var re=le.comparePoints(j.point,U.point);return re!==0?re:(j.point!==U.point&&j.link(U),j.isLeft!==U.isLeft?j.isLeft?1:-1:X.compare(j.segment,U.segment))}},{key:"comparePoints",value:function(j,U){return j.x<U.x?-1:j.x>U.x?1:j.y<U.y?-1:j.y>U.y?1:0}}]);function le(Y,j){t(this,le),Y.events===void 0?Y.events=[this]:Y.events.push(this),this.point=Y,this.isLeft=j}return s(le,[{key:"link",value:function(j){if(j.point===this.point)throw new Error("Tried to link already linked events");for(var U=j.point.events,re=0,ce=U.length;re<ce;re++){var be=U[re];this.point.events.push(be),be.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var j=this.point.events.length,U=0;U<j;U++){var re=this.point.events[U];if(re.segment.consumedBy===void 0)for(var ce=U+1;ce<j;ce++){var be=this.point.events[ce];be.consumedBy===void 0&&re.otherSE.point.events===be.otherSE.point.events&&re.segment.consume(be.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var j=[],U=0,re=this.point.events.length;U<re;U++){var ce=this.point.events[U];ce!==this&&!ce.segment.ringOut&&ce.segment.isInResult()&&j.push(ce)}return j}},{key:"getLeftmostComparator",value:function(j){var U=this,re=new Map,ce=function(Ae){var Pe=Ae.otherSE;re.set(Ae,{sine:fe(U.point,j.point,Pe.point),cosine:q(U.point,j.point,Pe.point)})};return function(be,Ae){re.has(be)||ce(be),re.has(Ae)||ce(Ae);var Pe=re.get(be),Je=Pe.sine,Ue=Pe.cosine,qe=re.get(Ae),ct=qe.sine,vt=qe.cosine;return Je>=0&&ct>=0?Ue<vt?1:Ue>vt?-1:0:Je<0&&ct<0?Ue<vt?-1:Ue>vt?1:0:ct<Je?-1:ct>Je?1:0}}}]),le}(),de=0,X=function(){s(le,null,[{key:"compare",value:function(j,U){var re=j.leftSE.point.x,ce=U.leftSE.point.x,be=j.rightSE.point.x,Ae=U.rightSE.point.x;if(Ae<re)return 1;if(be<ce)return-1;var Pe=j.leftSE.point.y,Je=U.leftSE.point.y,Ue=j.rightSE.point.y,qe=U.rightSE.point.y;if(re<ce){if(Je<Pe&&Je<Ue)return 1;if(Je>Pe&&Je>Ue)return-1;var ct=j.comparePoint(U.leftSE.point);if(ct<0)return 1;if(ct>0)return-1;var vt=U.comparePoint(j.rightSE.point);return vt!==0?vt:-1}if(re>ce){if(Pe<Je&&Pe<qe)return-1;if(Pe>Je&&Pe>qe)return 1;var Mt=U.comparePoint(j.leftSE.point);if(Mt!==0)return Mt;var pt=j.comparePoint(U.rightSE.point);return pt<0?1:pt>0?-1:1}if(Pe<Je)return-1;if(Pe>Je)return 1;if(be<Ae){var Lt=U.comparePoint(j.rightSE.point);if(Lt!==0)return Lt}if(be>Ae){var At=j.comparePoint(U.rightSE.point);if(At<0)return 1;if(At>0)return-1}if(be!==Ae){var It=Ue-Pe,Rt=be-re,Jt=qe-Je,kt=Ae-ce;if(It>Rt&&Jt<kt)return 1;if(It<Rt&&Jt>kt)return-1}return be>Ae?1:be<Ae||Ue<qe?-1:Ue>qe?1:j.id<U.id?-1:j.id>U.id?1:0}}]);function le(Y,j,U,re){t(this,le),this.id=++de,this.leftSE=Y,Y.segment=this,Y.otherSE=j,this.rightSE=j,j.segment=this,j.otherSE=Y,this.rings=U,this.windings=re}return s(le,[{key:"replaceRightSE",value:function(j){this.rightSE=j,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var j=this.leftSE.point.y,U=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:j<U?j:U},ur:{x:this.rightSE.point.x,y:j>U?j:U}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(j){return j.x===this.leftSE.point.x&&j.y===this.leftSE.point.y||j.x===this.rightSE.point.x&&j.y===this.rightSE.point.y}},{key:"comparePoint",value:function(j){if(this.isAnEndpoint(j))return 0;var U=this.leftSE.point,re=this.rightSE.point,ce=this.vector();if(U.x===re.x)return j.x===U.x?0:j.x<U.x?1:-1;var be=(j.y-U.y)/ce.y,Ae=U.x+be*ce.x;if(j.x===Ae)return 0;var Pe=(j.x-U.x)/ce.x,Je=U.y+Pe*ce.y;return j.y===Je?0:j.y<Je?-1:1}},{key:"getIntersection",value:function(j){var U=this.bbox(),re=j.bbox(),ce=L(U,re);if(ce===null)return null;var be=this.leftSE.point,Ae=this.rightSE.point,Pe=j.leftSE.point,Je=j.rightSE.point,Ue=T(U,Pe)&&this.comparePoint(Pe)===0,qe=T(re,be)&&j.comparePoint(be)===0,ct=T(U,Je)&&this.comparePoint(Je)===0,vt=T(re,Ae)&&j.comparePoint(Ae)===0;if(qe&&Ue)return vt&&!ct?Ae:!vt&&ct?Je:null;if(qe)return ct&&be.x===Je.x&&be.y===Je.y?null:be;if(Ue)return vt&&Ae.x===Pe.x&&Ae.y===Pe.y?null:Pe;if(vt&&ct)return null;if(vt)return Ae;if(ct)return Je;var Mt=xe(be,this.vector(),Pe,j.vector());return Mt===null||!T(ce,Mt)?null:$.round(Mt.x,Mt.y)}},{key:"split",value:function(j){var U=[],re=j.events!==void 0,ce=new oe(j,!0),be=new oe(j,!1),Ae=this.rightSE;this.replaceRightSE(be),U.push(be),U.push(ce);var Pe=new le(ce,Ae,this.rings.slice(),this.windings.slice());return oe.comparePoints(Pe.leftSE.point,Pe.rightSE.point)>0&&Pe.swapEvents(),oe.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),re&&(ce.checkForConsuming(),be.checkForConsuming()),U}},{key:"swapEvents",value:function(){var j=this.rightSE;this.rightSE=this.leftSE,this.leftSE=j,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var U=0,re=this.windings.length;U<re;U++)this.windings[U]*=-1}},{key:"consume",value:function(j){for(var U=this,re=j;U.consumedBy;)U=U.consumedBy;for(;re.consumedBy;)re=re.consumedBy;var ce=le.compare(U,re);if(ce!==0){if(ce>0){var be=U;U=re,re=be}if(U.prev===re){var Ae=U;U=re,re=Ae}for(var Pe=0,Je=re.rings.length;Pe<Je;Pe++){var Ue=re.rings[Pe],qe=re.windings[Pe],ct=U.rings.indexOf(Ue);ct===-1?(U.rings.push(Ue),U.windings.push(qe)):U.windings[ct]+=qe}re.rings=null,re.windings=null,re.consumedBy=U,re.leftSE.consumedBy=U.leftSE,re.rightSE.consumedBy=U.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var j=this.prev.consumedBy||this.prev;this._beforeState=j.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var j=this.beforeState();this._afterState={rings:j.rings.slice(0),windings:j.windings.slice(0),multiPolys:[]};for(var U=this._afterState.rings,re=this._afterState.windings,ce=this._afterState.multiPolys,be=0,Ae=this.rings.length;be<Ae;be++){var Pe=this.rings[be],Je=this.windings[be],Ue=U.indexOf(Pe);Ue===-1?(U.push(Pe),re.push(Je)):re[Ue]+=Je}for(var qe=[],ct=[],vt=0,Mt=U.length;vt<Mt;vt++)if(re[vt]!==0){var pt=U[vt],Lt=pt.poly;if(ct.indexOf(Lt)===-1)if(pt.isExterior)qe.push(Lt);else{ct.indexOf(Lt)===-1&&ct.push(Lt);var At=qe.indexOf(pt.poly);At!==-1&&qe.splice(At,1)}}for(var It=0,Rt=qe.length;It<Rt;It++){var Jt=qe[It].multiPoly;ce.indexOf(Jt)===-1&&ce.push(Jt)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var j=this.beforeState().multiPolys,U=this.afterState().multiPolys;switch(Q.type){case"union":{var re=j.length===0,ce=U.length===0;this._isInResult=re!==ce;break}case"intersection":{var be,Ae;j.length<U.length?(be=j.length,Ae=U.length):(be=U.length,Ae=j.length),this._isInResult=Ae===Q.numMultiPolys&&be<Ae;break}case"xor":{var Pe=Math.abs(j.length-U.length);this._isInResult=Pe%2===1;break}case"difference":{var Je=function(qe){return qe.length===1&&qe[0].isSubject};this._isInResult=Je(j)!==Je(U);break}default:throw new Error("Unrecognized operation type found ".concat(Q.type))}return this._isInResult}}],[{key:"fromRing",value:function(j,U,re){var ce,be,Ae,Pe=oe.comparePoints(j,U);if(Pe<0)ce=j,be=U,Ae=1;else if(Pe>0)ce=U,be=j,Ae=-1;else throw new Error("Tried to create degenerate segment at [".concat(j.x,", ").concat(j.y,"]"));var Je=new oe(ce,!0),Ue=new oe(be,!1);return new le(Je,Ue,[re],[Ae])}}]),le}(),he=function(){function le(Y,j,U){if(t(this,le),!Array.isArray(Y)||Y.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=j,this.isExterior=U,this.segments=[],typeof Y[0][0]!="number"||typeof Y[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var re=$.round(Y[0][0],Y[0][1]);this.bbox={ll:{x:re.x,y:re.y},ur:{x:re.x,y:re.y}};for(var ce=re,be=1,Ae=Y.length;be<Ae;be++){if(typeof Y[be][0]!="number"||typeof Y[be][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Pe=$.round(Y[be][0],Y[be][1]);Pe.x===ce.x&&Pe.y===ce.y||(this.segments.push(X.fromRing(ce,Pe,this)),Pe.x<this.bbox.ll.x&&(this.bbox.ll.x=Pe.x),Pe.y<this.bbox.ll.y&&(this.bbox.ll.y=Pe.y),Pe.x>this.bbox.ur.x&&(this.bbox.ur.x=Pe.x),Pe.y>this.bbox.ur.y&&(this.bbox.ur.y=Pe.y),ce=Pe)}(re.x!==ce.x||re.y!==ce.y)&&this.segments.push(X.fromRing(ce,re,this))}return s(le,[{key:"getSweepEvents",value:function(){for(var j=[],U=0,re=this.segments.length;U<re;U++){var ce=this.segments[U];j.push(ce.leftSE),j.push(ce.rightSE)}return j}}]),le}(),Se=function(){function le(Y,j){if(t(this,le),!Array.isArray(Y))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new he(Y[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var U=1,re=Y.length;U<re;U++){var ce=new he(Y[U],this,!1);ce.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=ce.bbox.ll.x),ce.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=ce.bbox.ll.y),ce.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=ce.bbox.ur.x),ce.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=ce.bbox.ur.y),this.interiorRings.push(ce)}this.multiPoly=j}return s(le,[{key:"getSweepEvents",value:function(){for(var j=this.exteriorRing.getSweepEvents(),U=0,re=this.interiorRings.length;U<re;U++)for(var ce=this.interiorRings[U].getSweepEvents(),be=0,Ae=ce.length;be<Ae;be++)j.push(ce[be]);return j}}]),le}(),Te=function(){function le(Y,j){if(t(this,le),!Array.isArray(Y))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof Y[0][0][0]=="number"&&(Y=[Y])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var U=0,re=Y.length;U<re;U++){var ce=new Se(Y[U],this);ce.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=ce.bbox.ll.x),ce.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=ce.bbox.ll.y),ce.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=ce.bbox.ur.x),ce.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=ce.bbox.ur.y),this.polys.push(ce)}this.isSubject=j}return s(le,[{key:"getSweepEvents",value:function(){for(var j=[],U=0,re=this.polys.length;U<re;U++)for(var ce=this.polys[U].getSweepEvents(),be=0,Ae=ce.length;be<Ae;be++)j.push(ce[be]);return j}}]),le}(),Re=function(){s(le,null,[{key:"factory",value:function(j){for(var U=[],re=0,ce=j.length;re<ce;re++){var be=j[re];if(!(!be.isInResult()||be.ringOut)){for(var Ae=null,Pe=be.leftSE,Je=be.rightSE,Ue=[Pe],qe=Pe.point,ct=[];Ae=Pe,Pe=Je,Ue.push(Pe),Pe.point!==qe;)for(;;){var vt=Pe.getAvailableLinkedEvents();if(vt.length===0){var Mt=Ue[0].point,pt=Ue[Ue.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(Mt.x,",")+" ".concat(Mt.y,"]. Last matching segment found ends at")+" [".concat(pt.x,", ").concat(pt.y,"]."))}if(vt.length===1){Je=vt[0].otherSE;break}for(var Lt=null,At=0,It=ct.length;At<It;At++)if(ct[At].point===Pe.point){Lt=At;break}if(Lt!==null){var Rt=ct.splice(Lt)[0],Jt=Ue.splice(Rt.index);Jt.unshift(Jt[0].otherSE),U.push(new le(Jt.reverse()));continue}ct.push({index:Ue.length,point:Pe.point});var kt=Pe.getLeftmostComparator(Ae);Je=vt.sort(kt)[0].otherSE;break}U.push(new le(Ue))}}return U}}]);function le(Y){t(this,le),this.events=Y;for(var j=0,U=Y.length;j<U;j++)Y[j].segment.ringOut=this;this.poly=null}return s(le,[{key:"getGeom",value:function(){for(var j=this.events[0].point,U=[j],re=1,ce=this.events.length-1;re<ce;re++){var be=this.events[re].point,Ae=this.events[re+1].point;J(be,j,Ae)!==0&&(U.push(be),j=be)}if(U.length===1)return null;var Pe=U[0],Je=U[1];J(Pe,j,Je)===0&&U.shift(),U.push(U[0]);for(var Ue=this.isExteriorRing()?1:-1,qe=this.isExteriorRing()?0:U.length-1,ct=this.isExteriorRing()?U.length:-1,vt=[],Mt=qe;Mt!=ct;Mt+=Ue)vt.push([U[Mt].x,U[Mt].y]);return vt}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var j=this.enclosingRing();this._isExteriorRing=j?!j.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var j=this.events[0],U=1,re=this.events.length;U<re;U++){var ce=this.events[U];oe.compare(j,ce)>0&&(j=ce)}for(var be=j.segment.prevInResult(),Ae=be?be.prevInResult():null;;){if(!be)return null;if(!Ae)return be.ringOut;if(Ae.ringOut!==be.ringOut)return Ae.ringOut.enclosingRing()!==be.ringOut?be.ringOut:be.ringOut.enclosingRing();be=Ae.prevInResult(),Ae=be?be.prevInResult():null}}}]),le}(),Be=function(){function le(Y){t(this,le),this.exteriorRing=Y,Y.poly=this,this.interiorRings=[]}return s(le,[{key:"addInterior",value:function(j){this.interiorRings.push(j),j.poly=this}},{key:"getGeom",value:function(){var j=[this.exteriorRing.getGeom()];if(j[0]===null)return null;for(var U=0,re=this.interiorRings.length;U<re;U++){var ce=this.interiorRings[U].getGeom();ce!==null&&j.push(ce)}return j}}]),le}(),ze=function(){function le(Y){t(this,le),this.rings=Y,this.polys=this._composePolys(Y)}return s(le,[{key:"getGeom",value:function(){for(var j=[],U=0,re=this.polys.length;U<re;U++){var ce=this.polys[U].getGeom();ce!==null&&j.push(ce)}return j}},{key:"_composePolys",value:function(j){for(var U=[],re=0,ce=j.length;re<ce;re++){var be=j[re];if(!be.poly)if(be.isExteriorRing())U.push(new Be(be));else{var Ae=be.enclosingRing();Ae.poly||U.push(new Be(Ae)),Ae.poly.addInterior(be)}}return U}}]),le}(),Ve=function(){function le(Y){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:X.compare;t(this,le),this.queue=Y,this.tree=new m(j),this.segments=[]}return s(le,[{key:"process",value:function(j){var U=j.segment,re=[];if(j.consumedBy)return j.isLeft?this.queue.remove(j.otherSE):this.tree.remove(U),re;var ce=j.isLeft?this.tree.insert(U):this.tree.find(U);if(!ce)throw new Error("Unable to find segment #".concat(U.id," ")+"[".concat(U.leftSE.point.x,", ").concat(U.leftSE.point.y,"] -> ")+"[".concat(U.rightSE.point.x,", ").concat(U.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var be=ce,Ae=ce,Pe=void 0,Je=void 0;Pe===void 0;)be=this.tree.prev(be),be===null?Pe=null:be.key.consumedBy===void 0&&(Pe=be.key);for(;Je===void 0;)Ae=this.tree.next(Ae),Ae===null?Je=null:Ae.key.consumedBy===void 0&&(Je=Ae.key);if(j.isLeft){var Ue=null;if(Pe){var qe=Pe.getIntersection(U);if(qe!==null&&(U.isAnEndpoint(qe)||(Ue=qe),!Pe.isAnEndpoint(qe)))for(var ct=this._splitSafely(Pe,qe),vt=0,Mt=ct.length;vt<Mt;vt++)re.push(ct[vt])}var pt=null;if(Je){var Lt=Je.getIntersection(U);if(Lt!==null&&(U.isAnEndpoint(Lt)||(pt=Lt),!Je.isAnEndpoint(Lt)))for(var At=this._splitSafely(Je,Lt),It=0,Rt=At.length;It<Rt;It++)re.push(At[It])}if(Ue!==null||pt!==null){var Jt=null;if(Ue===null)Jt=pt;else if(pt===null)Jt=Ue;else{var kt=oe.comparePoints(Ue,pt);Jt=kt<=0?Ue:pt}this.queue.remove(U.rightSE),re.push(U.rightSE);for(var Bi=U.split(Jt),Zt=0,Xe=Bi.length;Zt<Xe;Zt++)re.push(Bi[Zt])}re.length>0?(this.tree.remove(U),re.push(j)):(this.segments.push(U),U.prev=Pe)}else{if(Pe&&Je){var Ri=Pe.getIntersection(Je);if(Ri!==null){if(!Pe.isAnEndpoint(Ri))for(var Vi=this._splitSafely(Pe,Ri),Et=0,l0=Vi.length;Et<l0;Et++)re.push(Vi[Et]);if(!Je.isAnEndpoint(Ri))for(var Ji=this._splitSafely(Je,Ri),Hi=0,Ui=Ji.length;Hi<Ui;Hi++)re.push(Ji[Hi])}}this.tree.remove(U)}return re}},{key:"_splitSafely",value:function(j,U){this.tree.remove(j);var re=j.rightSE;this.queue.remove(re);var ce=j.split(U);return ce.push(re),j.consumedBy===void 0&&this.tree.insert(j),ce}}]),le}(),ye=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Fe=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Ce=function(){function le(){t(this,le)}return s(le,[{key:"run",value:function(j,U,re){Q.type=j,$.reset();for(var ce=[new Te(U,!0)],be=0,Ae=re.length;be<Ae;be++)ce.push(new Te(re[be],!1));if(Q.numMultiPolys=ce.length,Q.type==="difference")for(var Pe=ce[0],Je=1;Je<ce.length;)L(ce[Je].bbox,Pe.bbox)!==null?Je++:ce.splice(Je,1);if(Q.type==="intersection"){for(var Ue=0,qe=ce.length;Ue<qe;Ue++)for(var ct=ce[Ue],vt=Ue+1,Mt=ce.length;vt<Mt;vt++)if(L(ct.bbox,ce[vt].bbox)===null)return[]}for(var pt=new m(oe.compare),Lt=0,At=ce.length;Lt<At;Lt++)for(var It=ce[Lt].getSweepEvents(),Rt=0,Jt=It.length;Rt<Jt;Rt++)if(pt.insert(It[Rt]),pt.size>ye)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var kt=new Ve(pt),Bi=pt.size,Zt=pt.pop();Zt;){var Xe=Zt.key;if(pt.size===Bi){var Ri=Xe.segment;throw new Error("Unable to pop() ".concat(Xe.isLeft?"left":"right"," SweepEvent ")+"[".concat(Xe.point.x,", ").concat(Xe.point.y,"] from segment #").concat(Ri.id," ")+"[".concat(Ri.leftSE.point.x,", ").concat(Ri.leftSE.point.y,"] -> ")+"[".concat(Ri.rightSE.point.x,", ").concat(Ri.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(pt.size>ye)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(kt.segments.length>Fe)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var Vi=kt.process(Xe),Et=0,l0=Vi.length;Et<l0;Et++){var Ji=Vi[Et];Ji.consumedBy===void 0&&pt.insert(Ji)}Bi=pt.size,Zt=pt.pop()}$.reset();var Hi=Re.factory(kt.segments),Ui=new ze(Hi);return Ui.getGeom()}}]),le}(),Q=new Ce,me=function(Y){for(var j=arguments.length,U=new Array(j>1?j-1:0),re=1;re<j;re++)U[re-1]=arguments[re];return Q.run("union",Y,U)},Ie=function(Y){for(var j=arguments.length,U=new Array(j>1?j-1:0),re=1;re<j;re++)U[re-1]=arguments[re];return Q.run("intersection",Y,U)},De=function(Y){for(var j=arguments.length,U=new Array(j>1?j-1:0),re=1;re<j;re++)U[re-1]=arguments[re];return Q.run("xor",Y,U)},Ee=function(Y){for(var j=arguments.length,U=new Array(j>1?j-1:0),re=1;re<j;re++)U[re-1]=arguments[re];return Q.run("difference",Y,U)},Oe={union:me,intersection:Ie,xor:De,difference:Ee};return Oe})}(polygonClipping_umd)),polygonClipping_umd.exports}var hasRequiredJs$b;function requireJs$b(){if(hasRequiredJs$b)return js$a.exports;hasRequiredJs$b=1;var r=requirePolygonClipping_umd(),e=requireJs$1G(),t=requireJs$1D();function i(o){return o&&typeof o=="object"&&"default"in o?o:{default:o}}var s=i(r);function n(o,c){var _=t.getGeom(o),l=t.getGeom(c),h=o.properties||{},f=s.default.difference(_.coordinates,l.coordinates);return f.length===0?null:f.length===1?e.polygon(f[0],h):e.multiPolygon(f,h)}return js$a.exports=n,js$a.exports.default=n,js$a.exports}var js$9={exports:{}},jsts_min={exports:{}},hasRequiredJsts_min;function requireJsts_min(){return hasRequiredJsts_min||(hasRequiredJsts_min=1,function(r,e){(function(t,i){i(e)})(commonjsGlobal,function(t){function i(){}function s(u){this.message=u||""}function n(u){this.message=u||""}function o(u){this.message=u||""}function c(){}function _(u){return u===null?rt:u.color}function l(u){return u===null?null:u.parent}function h(u,d){u!==null&&(u.color=d)}function f(u){return u===null?null:u.left}function m(u){return u===null?null:u.right}function g(){this.root_=null,this.size_=0}function C(){}function E(){this.array_=[],arguments[0]instanceof kt&&this.addAll(arguments[0])}function P(){}function w(u){this.message=u||""}function M(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(u){if(this===void 0||this===null)throw new TypeError(this+" is not an object");var d=Object(this),b=Math.max(Math.min(d.length,9007199254740991),0)||0,v=1 in arguments&&parseInt(Number(arguments[1]),10)||0;v=v<0?Math.max(b+v,0):Math.min(v,b);var S=2 in arguments&&arguments[2]!==void 0?parseInt(Number(arguments[2]),10)||0:b;for(S=S<0?Math.max(b+arguments[2],0):Math.min(S,b);v<S;)d[v]=u,++v;return d},writable:!0}),Number.isFinite=Number.isFinite||function(u){return typeof u=="number"&&isFinite(u)},Number.isInteger=Number.isInteger||function(u){return typeof u=="number"&&isFinite(u)&&Math.floor(u)===u},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(u){return u!=u},Math.trunc=Math.trunc||function(u){return u<0?Math.ceil(u):Math.floor(u)};var T=function(){};T.prototype.interfaces_=function(){return[]},T.prototype.getClass=function(){return T},T.prototype.equalsWithTolerance=function(u,d,b){return Math.abs(u-d)<=b};var L=function(u){function d(b){u.call(this,b),this.name="IllegalArgumentException",this.message=b,this.stack=new u().stack}return u&&(d.__proto__=u),d.prototype=Object.create(u&&u.prototype),d.prototype.constructor=d,d}(Error),R=function(){},D={MAX_VALUE:{configurable:!0}};R.isNaN=function(u){return Number.isNaN(u)},R.doubleToLongBits=function(u){return u},R.longBitsToDouble=function(u){return u},R.isInfinite=function(u){return!Number.isFinite(u)},D.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(R,D);var N=function(){},k=function(){},B=function(){},$=function u(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)this.x=0,this.y=0,this.z=u.NULL_ORDINATE;else if(arguments.length===1){var d=arguments[0];this.x=d.x,this.y=d.y,this.z=d.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=u.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},H={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};$.prototype.setOrdinate=function(u,d){switch(u){case $.X:this.x=d;break;case $.Y:this.y=d;break;case $.Z:this.z=d;break;default:throw new L("Invalid ordinate index: "+u)}},$.prototype.equals2D=function(){if(arguments.length===1){var u=arguments[0];return this.x===u.x&&this.y===u.y}if(arguments.length===2){var d=arguments[0],b=arguments[1];return!!T.equalsWithTolerance(this.x,d.x,b)&&!!T.equalsWithTolerance(this.y,d.y,b)}},$.prototype.getOrdinate=function(u){switch(u){case $.X:return this.x;case $.Y:return this.y;case $.Z:return this.z}throw new L("Invalid ordinate index: "+u)},$.prototype.equals3D=function(u){return this.x===u.x&&this.y===u.y&&(this.z===u.z||R.isNaN(this.z))&&R.isNaN(u.z)},$.prototype.equals=function(u){return u instanceof $&&this.equals2D(u)},$.prototype.equalInZ=function(u,d){return T.equalsWithTolerance(this.z,u.z,d)},$.prototype.compareTo=function(u){var d=u;return this.x<d.x?-1:this.x>d.x?1:this.y<d.y?-1:this.y>d.y?1:0},$.prototype.clone=function(){},$.prototype.copy=function(){return new $(this)},$.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},$.prototype.distance3D=function(u){var d=this.x-u.x,b=this.y-u.y,v=this.z-u.z;return Math.sqrt(d*d+b*b+v*v)},$.prototype.distance=function(u){var d=this.x-u.x,b=this.y-u.y;return Math.sqrt(d*d+b*b)},$.prototype.hashCode=function(){var u=17;return u=37*u+$.hashCode(this.x),u=37*u+$.hashCode(this.y)},$.prototype.setCoordinate=function(u){this.x=u.x,this.y=u.y,this.z=u.z},$.prototype.interfaces_=function(){return[N,k,i]},$.prototype.getClass=function(){return $},$.hashCode=function(){if(arguments.length===1){var u=arguments[0],d=R.doubleToLongBits(u);return Math.trunc((d^d)>>>32)}},H.DimensionalComparator.get=function(){return W},H.serialVersionUID.get=function(){return 6683108902428367e3},H.NULL_ORDINATE.get=function(){return R.NaN},H.X.get=function(){return 0},H.Y.get=function(){return 1},H.Z.get=function(){return 2},Object.defineProperties($,H);var W=function(u){if(this._dimensionsToTest=2,arguments.length!==0){if(arguments.length===1){var d=arguments[0];if(d!==2&&d!==3)throw new L("only 2 or 3 dimensions may be specified");this._dimensionsToTest=d}}};W.prototype.compare=function(u,d){var b=u,v=d,S=W.compare(b.x,v.x);if(S!==0)return S;var F=W.compare(b.y,v.y);return F!==0?F:this._dimensionsToTest<=2?0:W.compare(b.z,v.z)},W.prototype.interfaces_=function(){return[B]},W.prototype.getClass=function(){return W},W.compare=function(u,d){return u<d?-1:u>d?1:R.isNaN(u)?R.isNaN(d)?0:-1:R.isNaN(d)?1:0};var J=function(){};J.prototype.create=function(){},J.prototype.interfaces_=function(){return[]},J.prototype.getClass=function(){return J};var z=function(){},fe={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};z.prototype.interfaces_=function(){return[]},z.prototype.getClass=function(){return z},z.toLocationSymbol=function(u){switch(u){case z.EXTERIOR:return"e";case z.BOUNDARY:return"b";case z.INTERIOR:return"i";case z.NONE:return"-"}throw new L("Unknown location value: "+u)},fe.INTERIOR.get=function(){return 0},fe.BOUNDARY.get=function(){return 1},fe.EXTERIOR.get=function(){return 2},fe.NONE.get=function(){return-1},Object.defineProperties(z,fe);var q=function(u,d){return u.interfaces_&&u.interfaces_().indexOf(d)>-1},te=function(){},ie={LOG_10:{configurable:!0}};te.prototype.interfaces_=function(){return[]},te.prototype.getClass=function(){return te},te.log10=function(u){var d=Math.log(u);return R.isInfinite(d)||R.isNaN(d)?d:d/te.LOG_10},te.min=function(u,d,b,v){var S=u;return d<S&&(S=d),b<S&&(S=b),v<S&&(S=v),S},te.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],d=arguments[1],b=arguments[2];return u<d?d:u>b?b:u}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var v=arguments[0],S=arguments[1],F=arguments[2];return v<S?S:v>F?F:v}},te.wrap=function(u,d){return u<0?d- -u%d:u%d},te.max=function(){if(arguments.length===3){var u=arguments[0],d=arguments[1],b=arguments[2],v=u;return d>v&&(v=d),b>v&&(v=b),v}if(arguments.length===4){var S=arguments[0],F=arguments[1],G=arguments[2],K=arguments[3],ue=S;return F>ue&&(ue=F),G>ue&&(ue=G),K>ue&&(ue=K),ue}},te.average=function(u,d){return(u+d)/2},ie.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(te,ie);var xe=function(u){this.str=u};xe.prototype.append=function(u){this.str+=u},xe.prototype.setCharAt=function(u,d){this.str=this.str.substr(0,u)+d+this.str.substr(u+1)},xe.prototype.toString=function(u){return this.str};var oe=function(u){this.value=u};oe.prototype.intValue=function(){return this.value},oe.prototype.compareTo=function(u){return this.value<u?-1:this.value>u?1:0},oe.isNaN=function(u){return Number.isNaN(u)};var de=function(){};de.isWhitespace=function(u){return u<=32&&u>=0||u===127},de.toUpperCase=function(u){return u.toUpperCase()};var X=function u(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var d=arguments[0];this.init(d)}else if(arguments[0]instanceof u){var b=arguments[0];this.init(b)}else if(typeof arguments[0]=="string"){var v=arguments[0];u.call(this,u.parse(v))}}else if(arguments.length===2){var S=arguments[0],F=arguments[1];this.init(S,F)}},he={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};X.prototype.le=function(u){return(this._hi<u._hi||this._hi===u._hi)&&this._lo<=u._lo},X.prototype.extractSignificantDigits=function(u,d){var b=this.abs(),v=X.magnitude(b._hi),S=X.TEN.pow(v);(b=b.divide(S)).gt(X.TEN)?(b=b.divide(X.TEN),v+=1):b.lt(X.ONE)&&(b=b.multiply(X.TEN),v-=1);for(var F=v+1,G=new xe,K=X.MAX_PRINT_DIGITS-1,ue=0;ue<=K;ue++){u&&ue===F&&G.append(".");var we=Math.trunc(b._hi);if(we<0)break;var ke=!1,Ge=0;we>9?(ke=!0,Ge="9"):Ge="0"+we,G.append(Ge),b=b.subtract(X.valueOf(we)).multiply(X.TEN),ke&&b.selfAdd(X.TEN);var tt=!0,it=X.magnitude(b._hi);if(it<0&&Math.abs(it)>=K-ue&&(tt=!1),!tt)break}return d[0]=v,G.toString()},X.prototype.sqr=function(){return this.multiply(this)},X.prototype.doubleValue=function(){return this._hi+this._lo},X.prototype.subtract=function(){if(arguments[0]instanceof X){var u=arguments[0];return this.add(u.negate())}if(typeof arguments[0]=="number"){var d=arguments[0];return this.add(-d)}},X.prototype.equals=function(){if(arguments.length===1){var u=arguments[0];return this._hi===u._hi&&this._lo===u._lo}},X.prototype.isZero=function(){return this._hi===0&&this._lo===0},X.prototype.selfSubtract=function(){if(arguments[0]instanceof X){var u=arguments[0];return this.isNaN()?this:this.selfAdd(-u._hi,-u._lo)}if(typeof arguments[0]=="number"){var d=arguments[0];return this.isNaN()?this:this.selfAdd(-d,0)}},X.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},X.prototype.min=function(u){return this.le(u)?this:u},X.prototype.selfDivide=function(){if(arguments.length===1){if(arguments[0]instanceof X){var u=arguments[0];return this.selfDivide(u._hi,u._lo)}if(typeof arguments[0]=="number"){var d=arguments[0];return this.selfDivide(d,0)}}else if(arguments.length===2){var b=arguments[0],v=arguments[1],S=null,F=null,G=null,K=null,ue=null,we=null,ke=null,Ge=null;return ue=this._hi/b,we=X.SPLIT*ue,S=we-ue,Ge=X.SPLIT*b,S=we-S,F=ue-S,G=Ge-b,ke=ue*b,G=Ge-G,K=b-G,Ge=S*G-ke+S*K+F*G+F*K,we=(this._hi-ke-Ge+this._lo-ue*v)/b,Ge=ue+we,this._hi=Ge,this._lo=ue-Ge+we,this}},X.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},X.prototype.divide=function(){if(arguments[0]instanceof X){var u=arguments[0],d=null,b=null,v=null,S=null,F=null,G=null,K=null,ue=null;return b=(F=this._hi/u._hi)-(d=(G=X.SPLIT*F)-(d=G-F)),ue=d*(v=(ue=X.SPLIT*u._hi)-(v=ue-u._hi))-(K=F*u._hi)+d*(S=u._hi-v)+b*v+b*S,G=(this._hi-K-ue+this._lo-F*u._lo)/u._hi,new X(ue=F+G,F-ue+G)}if(typeof arguments[0]=="number"){var we=arguments[0];return R.isNaN(we)?X.createNaN():X.copy(this).selfDivide(we,0)}},X.prototype.ge=function(u){return(this._hi>u._hi||this._hi===u._hi)&&this._lo>=u._lo},X.prototype.pow=function(u){if(u===0)return X.valueOf(1);var d=new X(this),b=X.valueOf(1),v=Math.abs(u);if(v>1)for(;v>0;)v%2==1&&b.selfMultiply(d),(v/=2)>0&&(d=d.sqr());else b=d;return u<0?b.reciprocal():b},X.prototype.ceil=function(){if(this.isNaN())return X.NaN;var u=Math.ceil(this._hi),d=0;return u===this._hi&&(d=Math.ceil(this._lo)),new X(u,d)},X.prototype.compareTo=function(u){var d=u;return this._hi<d._hi?-1:this._hi>d._hi?1:this._lo<d._lo?-1:this._lo>d._lo?1:0},X.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},X.prototype.setValue=function(){if(arguments[0]instanceof X){var u=arguments[0];return this.init(u),this}if(typeof arguments[0]=="number"){var d=arguments[0];return this.init(d),this}},X.prototype.max=function(u){return this.ge(u)?this:u},X.prototype.sqrt=function(){if(this.isZero())return X.valueOf(0);if(this.isNegative())return X.NaN;var u=1/Math.sqrt(this._hi),d=this._hi*u,b=X.valueOf(d),v=this.subtract(b.sqr())._hi*(.5*u);return b.add(v)},X.prototype.selfAdd=function(){if(arguments.length===1){if(arguments[0]instanceof X){var u=arguments[0];return this.selfAdd(u._hi,u._lo)}if(typeof arguments[0]=="number"){var d=arguments[0],b=null,v=null,S=null,F=null,G=null,K=null;return S=this._hi+d,G=S-this._hi,F=S-G,F=d-G+(this._hi-F),K=F+this._lo,b=S+K,v=K+(S-b),this._hi=b+v,this._lo=v+(b-this._hi),this}}else if(arguments.length===2){var ue=arguments[0],we=arguments[1],ke=null,Ge=null,tt=null,it=null,ot=null,bt=null,Bt=null;it=this._hi+ue,Ge=this._lo+we,ot=it-(bt=it-this._hi),tt=Ge-(Bt=Ge-this._lo);var ii=(ke=it+(bt=(ot=ue-bt+(this._hi-ot))+Ge))+(bt=(tt=we-Bt+(this._lo-tt))+(bt+(it-ke))),Ii=bt+(ke-ii);return this._hi=ii,this._lo=Ii,this}},X.prototype.selfMultiply=function(){if(arguments.length===1){if(arguments[0]instanceof X){var u=arguments[0];return this.selfMultiply(u._hi,u._lo)}if(typeof arguments[0]=="number"){var d=arguments[0];return this.selfMultiply(d,0)}}else if(arguments.length===2){var b=arguments[0],v=arguments[1],S=null,F=null,G=null,K=null,ue=null,we=null;S=(ue=X.SPLIT*this._hi)-this._hi,we=X.SPLIT*b,S=ue-S,F=this._hi-S,G=we-b;var ke=(ue=this._hi*b)+(we=S*(G=we-G)-ue+S*(K=b-G)+F*G+F*K+(this._hi*v+this._lo*b)),Ge=we+(S=ue-ke);return this._hi=ke,this._lo=Ge,this}},X.prototype.selfSqr=function(){return this.selfMultiply(this)},X.prototype.floor=function(){if(this.isNaN())return X.NaN;var u=Math.floor(this._hi),d=0;return u===this._hi&&(d=Math.floor(this._lo)),new X(u,d)},X.prototype.negate=function(){return this.isNaN()?this:new X(-this._hi,-this._lo)},X.prototype.clone=function(){},X.prototype.multiply=function(){if(arguments[0]instanceof X){var u=arguments[0];return u.isNaN()?X.createNaN():X.copy(this).selfMultiply(u)}if(typeof arguments[0]=="number"){var d=arguments[0];return R.isNaN(d)?X.createNaN():X.copy(this).selfMultiply(d,0)}},X.prototype.isNaN=function(){return R.isNaN(this._hi)},X.prototype.intValue=function(){return Math.trunc(this._hi)},X.prototype.toString=function(){var u=X.magnitude(this._hi);return u>=-3&&u<=20?this.toStandardNotation():this.toSciNotation()},X.prototype.toStandardNotation=function(){var u=this.getSpecialNumberString();if(u!==null)return u;var d=new Array(1).fill(null),b=this.extractSignificantDigits(!0,d),v=d[0]+1,S=b;if(b.charAt(0)===".")S="0"+b;else if(v<0)S="0."+X.stringOfChar("0",-v)+b;else if(b.indexOf(".")===-1){var F=v-b.length;S=b+X.stringOfChar("0",F)+".0"}return this.isNegative()?"-"+S:S},X.prototype.reciprocal=function(){var u=null,d=null,b=null,v=null,S=null,F=null,G=null,K=null;d=(S=1/this._hi)-(u=(F=X.SPLIT*S)-(u=F-S)),b=(K=X.SPLIT*this._hi)-this._hi;var ue=S+(F=(1-(G=S*this._hi)-(K=u*(b=K-b)-G+u*(v=this._hi-b)+d*b+d*v)-S*this._lo)/this._hi);return new X(ue,S-ue+F)},X.prototype.toSciNotation=function(){if(this.isZero())return X.SCI_NOT_ZERO;var u=this.getSpecialNumberString();if(u!==null)return u;var d=new Array(1).fill(null),b=this.extractSignificantDigits(!1,d),v=X.SCI_NOT_EXPONENT_CHAR+d[0];if(b.charAt(0)==="0")throw new Error("Found leading zero: "+b);var S="";b.length>1&&(S=b.substring(1));var F=b.charAt(0)+"."+S;return this.isNegative()?"-"+F+v:F+v},X.prototype.abs=function(){return this.isNaN()?X.NaN:this.isNegative()?this.negate():new X(this)},X.prototype.isPositive=function(){return(this._hi>0||this._hi===0)&&this._lo>0},X.prototype.lt=function(u){return(this._hi<u._hi||this._hi===u._hi)&&this._lo<u._lo},X.prototype.add=function(){if(arguments[0]instanceof X){var u=arguments[0];return X.copy(this).selfAdd(u)}if(typeof arguments[0]=="number"){var d=arguments[0];return X.copy(this).selfAdd(d)}},X.prototype.init=function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var u=arguments[0];this._hi=u,this._lo=0}else if(arguments[0]instanceof X){var d=arguments[0];this._hi=d._hi,this._lo=d._lo}}else if(arguments.length===2){var b=arguments[0],v=arguments[1];this._hi=b,this._lo=v}},X.prototype.gt=function(u){return(this._hi>u._hi||this._hi===u._hi)&&this._lo>u._lo},X.prototype.isNegative=function(){return(this._hi<0||this._hi===0)&&this._lo<0},X.prototype.trunc=function(){return this.isNaN()?X.NaN:this.isPositive()?this.floor():this.ceil()},X.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},X.prototype.interfaces_=function(){return[i,N,k]},X.prototype.getClass=function(){return X},X.sqr=function(u){return X.valueOf(u).selfMultiply(u)},X.valueOf=function(){if(typeof arguments[0]=="string"){var u=arguments[0];return X.parse(u)}if(typeof arguments[0]=="number"){var d=arguments[0];return new X(d)}},X.sqrt=function(u){return X.valueOf(u).sqrt()},X.parse=function(u){for(var d=0,b=u.length;de.isWhitespace(u.charAt(d));)d++;var v=!1;if(d<b){var S=u.charAt(d);S!=="-"&&S!=="+"||(d++,S==="-"&&(v=!0))}for(var F=new X,G=0,K=0,ue=0;!(d>=b);){var we=u.charAt(d);if(d++,de.isDigit(we)){var ke=we-"0";F.selfMultiply(X.TEN),F.selfAdd(ke),G++}else{if(we!=="."){if(we==="e"||we==="E"){var Ge=u.substring(d);try{ue=oe.parseInt(Ge)}catch(Bt){throw Bt instanceof Error?new Error("Invalid exponent "+Ge+" in string "+u):Bt}break}throw new Error("Unexpected character '"+we+"' at position "+d+" in string "+u)}K=G}}var tt=F,it=G-K-ue;if(it===0)tt=F;else if(it>0){var ot=X.TEN.pow(it);tt=F.divide(ot)}else if(it<0){var bt=X.TEN.pow(-it);tt=F.multiply(bt)}return v?tt.negate():tt},X.createNaN=function(){return new X(R.NaN,R.NaN)},X.copy=function(u){return new X(u)},X.magnitude=function(u){var d=Math.abs(u),b=Math.log(d)/Math.log(10),v=Math.trunc(Math.floor(b));return 10*Math.pow(10,v)<=d&&(v+=1),v},X.stringOfChar=function(u,d){for(var b=new xe,v=0;v<d;v++)b.append(u);return b.toString()},he.PI.get=function(){return new X(3.141592653589793,12246467991473532e-32)},he.TWO_PI.get=function(){return new X(6.283185307179586,24492935982947064e-32)},he.PI_2.get=function(){return new X(1.5707963267948966,6123233995736766e-32)},he.E.get=function(){return new X(2.718281828459045,14456468917292502e-32)},he.NaN.get=function(){return new X(R.NaN,R.NaN)},he.EPS.get=function(){return 123259516440783e-46},he.SPLIT.get=function(){return 134217729},he.MAX_PRINT_DIGITS.get=function(){return 32},he.TEN.get=function(){return X.valueOf(10)},he.ONE.get=function(){return X.valueOf(1)},he.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},he.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(X,he);var Se=function(){},Te={DP_SAFE_EPSILON:{configurable:!0}};Se.prototype.interfaces_=function(){return[]},Se.prototype.getClass=function(){return Se},Se.orientationIndex=function(u,d,b){var v=Se.orientationIndexFilter(u,d,b);if(v<=1)return v;var S=X.valueOf(d.x).selfAdd(-u.x),F=X.valueOf(d.y).selfAdd(-u.y),G=X.valueOf(b.x).selfAdd(-d.x),K=X.valueOf(b.y).selfAdd(-d.y);return S.selfMultiply(K).selfSubtract(F.selfMultiply(G)).signum()},Se.signOfDet2x2=function(u,d,b,v){return u.multiply(v).selfSubtract(d.multiply(b)).signum()},Se.intersection=function(u,d,b,v){var S=X.valueOf(v.y).selfSubtract(b.y).selfMultiply(X.valueOf(d.x).selfSubtract(u.x)),F=X.valueOf(v.x).selfSubtract(b.x).selfMultiply(X.valueOf(d.y).selfSubtract(u.y)),G=S.subtract(F),K=X.valueOf(v.x).selfSubtract(b.x).selfMultiply(X.valueOf(u.y).selfSubtract(b.y)),ue=X.valueOf(v.y).selfSubtract(b.y).selfMultiply(X.valueOf(u.x).selfSubtract(b.x)),we=K.subtract(ue).selfDivide(G).doubleValue(),ke=X.valueOf(u.x).selfAdd(X.valueOf(d.x).selfSubtract(u.x).selfMultiply(we)).doubleValue(),Ge=X.valueOf(d.x).selfSubtract(u.x).selfMultiply(X.valueOf(u.y).selfSubtract(b.y)),tt=X.valueOf(d.y).selfSubtract(u.y).selfMultiply(X.valueOf(u.x).selfSubtract(b.x)),it=Ge.subtract(tt).selfDivide(G).doubleValue(),ot=X.valueOf(b.y).selfAdd(X.valueOf(v.y).selfSubtract(b.y).selfMultiply(it)).doubleValue();return new $(ke,ot)},Se.orientationIndexFilter=function(u,d,b){var v=null,S=(u.x-b.x)*(d.y-b.y),F=(u.y-b.y)*(d.x-b.x),G=S-F;if(S>0){if(F<=0)return Se.signum(G);v=S+F}else{if(!(S<0)||F>=0)return Se.signum(G);v=-S-F}var K=Se.DP_SAFE_EPSILON*v;return G>=K||-G>=K?Se.signum(G):2},Se.signum=function(u){return u>0?1:u<0?-1:0},Te.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(Se,Te);var Re=function(){},Be={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Be.X.get=function(){return 0},Be.Y.get=function(){return 1},Be.Z.get=function(){return 2},Be.M.get=function(){return 3},Re.prototype.setOrdinate=function(u,d,b){},Re.prototype.size=function(){},Re.prototype.getOrdinate=function(u,d){},Re.prototype.getCoordinate=function(){},Re.prototype.getCoordinateCopy=function(u){},Re.prototype.getDimension=function(){},Re.prototype.getX=function(u){},Re.prototype.clone=function(){},Re.prototype.expandEnvelope=function(u){},Re.prototype.copy=function(){},Re.prototype.getY=function(u){},Re.prototype.toCoordinateArray=function(){},Re.prototype.interfaces_=function(){return[k]},Re.prototype.getClass=function(){return Re},Object.defineProperties(Re,Be);var ze=function(){},Ve=function(u){function d(){u.call(this,"Projective point not representable on the Cartesian plane.")}return u&&(d.__proto__=u),d.prototype=Object.create(u&&u.prototype),d.prototype.constructor=d,d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(ze),ye=function(){};ye.arraycopy=function(u,d,b,v,S){for(var F=0,G=d;G<d+S;G++)b[v+F]=u[G],F++},ye.getProperty=function(u){return{"line.separator":`
`}[u]};var Fe=function u(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var d=arguments[0];this.x=d.x,this.y=d.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var b=arguments[0],v=arguments[1];this.x=b,this.y=v,this.w=1}else if(arguments[0]instanceof u&&arguments[1]instanceof u){var S=arguments[0],F=arguments[1];this.x=S.y*F.w-F.y*S.w,this.y=F.x*S.w-S.x*F.w,this.w=S.x*F.y-F.x*S.y}else if(arguments[0]instanceof $&&arguments[1]instanceof $){var G=arguments[0],K=arguments[1];this.x=G.y-K.y,this.y=K.x-G.x,this.w=G.x*K.y-K.x*G.y}}else if(arguments.length===3){var ue=arguments[0],we=arguments[1],ke=arguments[2];this.x=ue,this.y=we,this.w=ke}else if(arguments.length===4){var Ge=arguments[0],tt=arguments[1],it=arguments[2],ot=arguments[3],bt=Ge.y-tt.y,Bt=tt.x-Ge.x,ii=Ge.x*tt.y-tt.x*Ge.y,Ii=it.y-ot.y,I0=ot.x-it.x,ea=it.x*ot.y-ot.x*it.y;this.x=Bt*ea-I0*ii,this.y=Ii*ii-bt*ea,this.w=bt*I0-Ii*Bt}};Fe.prototype.getY=function(){var u=this.y/this.w;if(R.isNaN(u)||R.isInfinite(u))throw new Ve;return u},Fe.prototype.getX=function(){var u=this.x/this.w;if(R.isNaN(u)||R.isInfinite(u))throw new Ve;return u},Fe.prototype.getCoordinate=function(){var u=new $;return u.x=this.getX(),u.y=this.getY(),u},Fe.prototype.interfaces_=function(){return[]},Fe.prototype.getClass=function(){return Fe},Fe.intersection=function(u,d,b,v){var S=u.y-d.y,F=d.x-u.x,G=u.x*d.y-d.x*u.y,K=b.y-v.y,ue=v.x-b.x,we=b.x*v.y-v.x*b.y,ke=S*ue-K*F,Ge=(F*we-ue*G)/ke,tt=(K*G-S*we)/ke;if(R.isNaN(Ge)||R.isInfinite(Ge)||R.isNaN(tt)||R.isInfinite(tt))throw new Ve;return new $(Ge,tt)};var Ce=function u(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof $){var d=arguments[0];this.init(d.x,d.x,d.y,d.y)}else if(arguments[0]instanceof u){var b=arguments[0];this.init(b)}}else if(arguments.length===2){var v=arguments[0],S=arguments[1];this.init(v.x,S.x,v.y,S.y)}else if(arguments.length===4){var F=arguments[0],G=arguments[1],K=arguments[2],ue=arguments[3];this.init(F,G,K,ue)}},Q={serialVersionUID:{configurable:!0}};Ce.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Ce.prototype.equals=function(u){if(!(u instanceof Ce))return!1;var d=u;return this.isNull()?d.isNull():this._maxx===d.getMaxX()&&this._maxy===d.getMaxY()&&this._minx===d.getMinX()&&this._miny===d.getMinY()},Ce.prototype.intersection=function(u){if(this.isNull()||u.isNull()||!this.intersects(u))return new Ce;var d=this._minx>u._minx?this._minx:u._minx,b=this._miny>u._miny?this._miny:u._miny,v=this._maxx<u._maxx?this._maxx:u._maxx,S=this._maxy<u._maxy?this._maxy:u._maxy;return new Ce(d,v,b,S)},Ce.prototype.isNull=function(){return this._maxx<this._minx},Ce.prototype.getMaxX=function(){return this._maxx},Ce.prototype.covers=function(){if(arguments.length===1){if(arguments[0]instanceof $){var u=arguments[0];return this.covers(u.x,u.y)}if(arguments[0]instanceof Ce){var d=arguments[0];return!this.isNull()&&!d.isNull()&&d.getMinX()>=this._minx&&d.getMaxX()<=this._maxx&&d.getMinY()>=this._miny&&d.getMaxY()<=this._maxy}}else if(arguments.length===2){var b=arguments[0],v=arguments[1];return!this.isNull()&&b>=this._minx&&b<=this._maxx&&v>=this._miny&&v<=this._maxy}},Ce.prototype.intersects=function(){if(arguments.length===1){if(arguments[0]instanceof Ce){var u=arguments[0];return!this.isNull()&&!u.isNull()&&!(u._minx>this._maxx||u._maxx<this._minx||u._miny>this._maxy||u._maxy<this._miny)}if(arguments[0]instanceof $){var d=arguments[0];return this.intersects(d.x,d.y)}}else if(arguments.length===2){var b=arguments[0],v=arguments[1];return!this.isNull()&&!(b>this._maxx||b<this._minx||v>this._maxy||v<this._miny)}},Ce.prototype.getMinY=function(){return this._miny},Ce.prototype.getMinX=function(){return this._minx},Ce.prototype.expandToInclude=function(){if(arguments.length===1){if(arguments[0]instanceof $){var u=arguments[0];this.expandToInclude(u.x,u.y)}else if(arguments[0]instanceof Ce){var d=arguments[0];if(d.isNull())return null;this.isNull()?(this._minx=d.getMinX(),this._maxx=d.getMaxX(),this._miny=d.getMinY(),this._maxy=d.getMaxY()):(d._minx<this._minx&&(this._minx=d._minx),d._maxx>this._maxx&&(this._maxx=d._maxx),d._miny<this._miny&&(this._miny=d._miny),d._maxy>this._maxy&&(this._maxy=d._maxy))}}else if(arguments.length===2){var b=arguments[0],v=arguments[1];this.isNull()?(this._minx=b,this._maxx=b,this._miny=v,this._maxy=v):(b<this._minx&&(this._minx=b),b>this._maxx&&(this._maxx=b),v<this._miny&&(this._miny=v),v>this._maxy&&(this._maxy=v))}},Ce.prototype.minExtent=function(){if(this.isNull())return 0;var u=this.getWidth(),d=this.getHeight();return u<d?u:d},Ce.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Ce.prototype.compareTo=function(u){var d=u;return this.isNull()?d.isNull()?0:-1:d.isNull()?1:this._minx<d._minx?-1:this._minx>d._minx?1:this._miny<d._miny?-1:this._miny>d._miny?1:this._maxx<d._maxx?-1:this._maxx>d._maxx?1:this._maxy<d._maxy?-1:this._maxy>d._maxy?1:0},Ce.prototype.translate=function(u,d){if(this.isNull())return null;this.init(this.getMinX()+u,this.getMaxX()+u,this.getMinY()+d,this.getMaxY()+d)},Ce.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Ce.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Ce.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Ce.prototype.maxExtent=function(){if(this.isNull())return 0;var u=this.getWidth(),d=this.getHeight();return u>d?u:d},Ce.prototype.expandBy=function(){if(arguments.length===1){var u=arguments[0];this.expandBy(u,u)}else if(arguments.length===2){var d=arguments[0],b=arguments[1];if(this.isNull())return null;this._minx-=d,this._maxx+=d,this._miny-=b,this._maxy+=b,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Ce.prototype.contains=function(){if(arguments.length===1){if(arguments[0]instanceof Ce){var u=arguments[0];return this.covers(u)}if(arguments[0]instanceof $){var d=arguments[0];return this.covers(d)}}else if(arguments.length===2){var b=arguments[0],v=arguments[1];return this.covers(b,v)}},Ce.prototype.centre=function(){return this.isNull()?null:new $((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Ce.prototype.init=function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof $){var u=arguments[0];this.init(u.x,u.x,u.y,u.y)}else if(arguments[0]instanceof Ce){var d=arguments[0];this._minx=d._minx,this._maxx=d._maxx,this._miny=d._miny,this._maxy=d._maxy}}else if(arguments.length===2){var b=arguments[0],v=arguments[1];this.init(b.x,v.x,b.y,v.y)}else if(arguments.length===4){var S=arguments[0],F=arguments[1],G=arguments[2],K=arguments[3];S<F?(this._minx=S,this._maxx=F):(this._minx=F,this._maxx=S),G<K?(this._miny=G,this._maxy=K):(this._miny=K,this._maxy=G)}},Ce.prototype.getMaxY=function(){return this._maxy},Ce.prototype.distance=function(u){if(this.intersects(u))return 0;var d=0;this._maxx<u._minx?d=u._minx-this._maxx:this._minx>u._maxx&&(d=this._minx-u._maxx);var b=0;return this._maxy<u._miny?b=u._miny-this._maxy:this._miny>u._maxy&&(b=this._miny-u._maxy),d===0?b:b===0?d:Math.sqrt(d*d+b*b)},Ce.prototype.hashCode=function(){var u=17;return u=37*u+$.hashCode(this._minx),u=37*u+$.hashCode(this._maxx),u=37*u+$.hashCode(this._miny),u=37*u+$.hashCode(this._maxy)},Ce.prototype.interfaces_=function(){return[N,i]},Ce.prototype.getClass=function(){return Ce},Ce.intersects=function(){if(arguments.length===3){var u=arguments[0],d=arguments[1],b=arguments[2];return b.x>=(u.x<d.x?u.x:d.x)&&b.x<=(u.x>d.x?u.x:d.x)&&b.y>=(u.y<d.y?u.y:d.y)&&b.y<=(u.y>d.y?u.y:d.y)}if(arguments.length===4){var v=arguments[0],S=arguments[1],F=arguments[2],G=arguments[3],K=Math.min(F.x,G.x),ue=Math.max(F.x,G.x),we=Math.min(v.x,S.x),ke=Math.max(v.x,S.x);return!(we>ue)&&!(ke<K)&&(K=Math.min(F.y,G.y),ue=Math.max(F.y,G.y),we=Math.min(v.y,S.y),ke=Math.max(v.y,S.y),!(we>ue)&&!(ke<K))}},Q.serialVersionUID.get=function(){return 5873921885273102e3},Object.defineProperties(Ce,Q);var me={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Ie=function(u){this.geometryFactory=u||new et};Ie.prototype.read=function(u){var d,b,v;u=u.replace(/[\n\r]/g," ");var S=me.typeStr.exec(u);if(u.search("EMPTY")!==-1&&((S=me.emptyTypeStr.exec(u))[2]=void 0),S&&(b=S[1].toLowerCase(),v=S[2],Ee[b]&&(d=Ee[b].apply(this,[v]))),d===void 0)throw new Error("Could not parse WKT "+u);return d},Ie.prototype.write=function(u){return this.extractGeometry(u)},Ie.prototype.extractGeometry=function(u){var d=u.getGeometryType().toLowerCase();if(!De[d])return null;var b=d.toUpperCase();return u.isEmpty()?b+" EMPTY":b+"("+De[d].apply(this,[u])+")"};var De={coordinate:function(u){return u.x+" "+u.y},point:function(u){return De.coordinate.call(this,u._coordinates._coordinates[0])},multipoint:function(u){for(var d=[],b=0,v=u._geometries.length;b<v;++b)d.push("("+De.point.apply(this,[u._geometries[b]])+")");return d.join(",")},linestring:function(u){for(var d=[],b=0,v=u._points._coordinates.length;b<v;++b)d.push(De.coordinate.apply(this,[u._points._coordinates[b]]));return d.join(",")},linearring:function(u){for(var d=[],b=0,v=u._points._coordinates.length;b<v;++b)d.push(De.coordinate.apply(this,[u._points._coordinates[b]]));return d.join(",")},multilinestring:function(u){for(var d=[],b=0,v=u._geometries.length;b<v;++b)d.push("("+De.linestring.apply(this,[u._geometries[b]])+")");return d.join(",")},polygon:function(u){var d=[];d.push("("+De.linestring.apply(this,[u._shell])+")");for(var b=0,v=u._holes.length;b<v;++b)d.push("("+De.linestring.apply(this,[u._holes[b]])+")");return d.join(",")},multipolygon:function(u){for(var d=[],b=0,v=u._geometries.length;b<v;++b)d.push("("+De.polygon.apply(this,[u._geometries[b]])+")");return d.join(",")},geometrycollection:function(u){for(var d=[],b=0,v=u._geometries.length;b<v;++b)d.push(this.extractGeometry(u._geometries[b]));return d.join(",")}},Ee={point:function(u){if(u===void 0)return this.geometryFactory.createPoint();var d=u.trim().split(me.spaces);return this.geometryFactory.createPoint(new $(Number.parseFloat(d[0]),Number.parseFloat(d[1])))},multipoint:function(u){if(u===void 0)return this.geometryFactory.createMultiPoint();for(var d,b=u.trim().split(","),v=[],S=0,F=b.length;S<F;++S)d=b[S].replace(me.trimParens,"$1"),v.push(Ee.point.apply(this,[d]));return this.geometryFactory.createMultiPoint(v)},linestring:function(u){if(u===void 0)return this.geometryFactory.createLineString();for(var d,b=u.trim().split(","),v=[],S=0,F=b.length;S<F;++S)d=b[S].trim().split(me.spaces),v.push(new $(Number.parseFloat(d[0]),Number.parseFloat(d[1])));return this.geometryFactory.createLineString(v)},linearring:function(u){if(u===void 0)return this.geometryFactory.createLinearRing();for(var d,b=u.trim().split(","),v=[],S=0,F=b.length;S<F;++S)d=b[S].trim().split(me.spaces),v.push(new $(Number.parseFloat(d[0]),Number.parseFloat(d[1])));return this.geometryFactory.createLinearRing(v)},multilinestring:function(u){if(u===void 0)return this.geometryFactory.createMultiLineString();for(var d,b=u.trim().split(me.parenComma),v=[],S=0,F=b.length;S<F;++S)d=b[S].replace(me.trimParens,"$1"),v.push(Ee.linestring.apply(this,[d]));return this.geometryFactory.createMultiLineString(v)},polygon:function(u){if(u===void 0)return this.geometryFactory.createPolygon();for(var d,b,v,S,F=u.trim().split(me.parenComma),G=[],K=0,ue=F.length;K<ue;++K)d=F[K].replace(me.trimParens,"$1"),b=Ee.linestring.apply(this,[d]),v=this.geometryFactory.createLinearRing(b._points),K===0?S=v:G.push(v);return this.geometryFactory.createPolygon(S,G)},multipolygon:function(u){if(u===void 0)return this.geometryFactory.createMultiPolygon();for(var d,b=u.trim().split(me.doubleParenComma),v=[],S=0,F=b.length;S<F;++S)d=b[S].replace(me.trimParens,"$1"),v.push(Ee.polygon.apply(this,[d]));return this.geometryFactory.createMultiPolygon(v)},geometrycollection:function(u){if(u===void 0)return this.geometryFactory.createGeometryCollection();for(var d=(u=u.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),b=[],v=0,S=d.length;v<S;++v)b.push(this.read(d[v]));return this.geometryFactory.createGeometryCollection(b)}},Oe=function(u){this.parser=new Ie(u)};Oe.prototype.write=function(u){return this.parser.write(u)},Oe.toLineString=function(u,d){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+u.x+" "+u.y+", "+d.x+" "+d.y+" )"};var le=function(u){function d(b){u.call(this,b),this.name="RuntimeException",this.message=b,this.stack=new u().stack}return u&&(d.__proto__=u),d.prototype=Object.create(u&&u.prototype),d.prototype.constructor=d,d}(Error),Y=function(u){function d(){if(u.call(this),arguments.length===0)u.call(this);else if(arguments.length===1){var b=arguments[0];u.call(this,b)}}return u&&(d.__proto__=u),d.prototype=Object.create(u&&u.prototype),d.prototype.constructor=d,d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(le),j=function(){};j.prototype.interfaces_=function(){return[]},j.prototype.getClass=function(){return j},j.shouldNeverReachHere=function(){if(arguments.length===0)j.shouldNeverReachHere(null);else if(arguments.length===1){var u=arguments[0];throw new Y("Should never reach here"+(u!==null?": "+u:""))}},j.isTrue=function(){var u,d;if(arguments.length===1)u=arguments[0],j.isTrue(u,null);else if(arguments.length===2&&(u=arguments[0],d=arguments[1],!u))throw d===null?new Y:new Y(d)},j.equals=function(){var u,d,b;if(arguments.length===2)u=arguments[0],d=arguments[1],j.equals(u,d,null);else if(arguments.length===3&&(u=arguments[0],d=arguments[1],b=arguments[2],!d.equals(u)))throw new Y("Expected "+u+" but encountered "+d+(b!==null?": "+b:""))};var U=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new $,this._intPt[1]=new $,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},re={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};U.prototype.getIndexAlongSegment=function(u,d){return this.computeIntLineIndex(),this._intLineIndex[u][d]},U.prototype.getTopologySummary=function(){var u=new xe;return this.isEndPoint()&&u.append(" endpoint"),this._isProper&&u.append(" proper"),this.isCollinear()&&u.append(" collinear"),u.toString()},U.prototype.computeIntersection=function(u,d,b,v){this._inputLines[0][0]=u,this._inputLines[0][1]=d,this._inputLines[1][0]=b,this._inputLines[1][1]=v,this._result=this.computeIntersect(u,d,b,v)},U.prototype.getIntersectionNum=function(){return this._result},U.prototype.computeIntLineIndex=function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var u=arguments[0];this.getEdgeDistance(u,0)>this.getEdgeDistance(u,1)?(this._intLineIndex[u][0]=0,this._intLineIndex[u][1]=1):(this._intLineIndex[u][0]=1,this._intLineIndex[u][1]=0)}},U.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},U.prototype.setPrecisionModel=function(u){this._precisionModel=u},U.prototype.isInteriorIntersection=function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var u=arguments[0],d=0;d<this._result;d++)if(!this._intPt[d].equals2D(this._inputLines[u][0])&&!this._intPt[d].equals2D(this._inputLines[u][1]))return!0;return!1}},U.prototype.getIntersection=function(u){return this._intPt[u]},U.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},U.prototype.hasIntersection=function(){return this._result!==U.NO_INTERSECTION},U.prototype.getEdgeDistance=function(u,d){return U.computeEdgeDistance(this._intPt[d],this._inputLines[u][0],this._inputLines[u][1])},U.prototype.isCollinear=function(){return this._result===U.COLLINEAR_INTERSECTION},U.prototype.toString=function(){return Oe.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Oe.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},U.prototype.getEndpoint=function(u,d){return this._inputLines[u][d]},U.prototype.isIntersection=function(u){for(var d=0;d<this._result;d++)if(this._intPt[d].equals2D(u))return!0;return!1},U.prototype.getIntersectionAlongSegment=function(u,d){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[u][d]]},U.prototype.interfaces_=function(){return[]},U.prototype.getClass=function(){return U},U.computeEdgeDistance=function(u,d,b){var v=Math.abs(b.x-d.x),S=Math.abs(b.y-d.y),F=-1;if(u.equals(d))F=0;else if(u.equals(b))F=v>S?v:S;else{var G=Math.abs(u.x-d.x),K=Math.abs(u.y-d.y);(F=v>S?G:K)!==0||u.equals(d)||(F=Math.max(G,K))}return j.isTrue(!(F===0&&!u.equals(d)),"Bad distance calculation"),F},U.nonRobustComputeEdgeDistance=function(u,d,b){var v=u.x-d.x,S=u.y-d.y,F=Math.sqrt(v*v+S*S);return j.isTrue(!(F===0&&!u.equals(d)),"Invalid distance calculation"),F},re.DONT_INTERSECT.get=function(){return 0},re.DO_INTERSECT.get=function(){return 1},re.COLLINEAR.get=function(){return 2},re.NO_INTERSECTION.get=function(){return 0},re.POINT_INTERSECTION.get=function(){return 1},re.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(U,re);var ce=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),d.prototype=Object.create(u&&u.prototype),d.prototype.constructor=d,d.prototype.isInSegmentEnvelopes=function(b){var v=new Ce(this._inputLines[0][0],this._inputLines[0][1]),S=new Ce(this._inputLines[1][0],this._inputLines[1][1]);return v.contains(b)&&S.contains(b)},d.prototype.computeIntersection=function(){if(arguments.length!==3)return u.prototype.computeIntersection.apply(this,arguments);var b=arguments[0],v=arguments[1],S=arguments[2];if(this._isProper=!1,Ce.intersects(v,S,b)&&Pe.orientationIndex(v,S,b)===0&&Pe.orientationIndex(S,v,b)===0)return this._isProper=!0,(b.equals(v)||b.equals(S))&&(this._isProper=!1),this._result=u.POINT_INTERSECTION,null;this._result=u.NO_INTERSECTION},d.prototype.normalizeToMinimum=function(b,v,S,F,G){G.x=this.smallestInAbsValue(b.x,v.x,S.x,F.x),G.y=this.smallestInAbsValue(b.y,v.y,S.y,F.y),b.x-=G.x,b.y-=G.y,v.x-=G.x,v.y-=G.y,S.x-=G.x,S.y-=G.y,F.x-=G.x,F.y-=G.y},d.prototype.safeHCoordinateIntersection=function(b,v,S,F){var G=null;try{G=Fe.intersection(b,v,S,F)}catch(K){if(!(K instanceof Ve))throw K;G=d.nearestEndpoint(b,v,S,F)}return G},d.prototype.intersection=function(b,v,S,F){var G=this.intersectionWithNormalization(b,v,S,F);return this.isInSegmentEnvelopes(G)||(G=new $(d.nearestEndpoint(b,v,S,F))),this._precisionModel!==null&&this._precisionModel.makePrecise(G),G},d.prototype.smallestInAbsValue=function(b,v,S,F){var G=b,K=Math.abs(G);return Math.abs(v)<K&&(G=v,K=Math.abs(v)),Math.abs(S)<K&&(G=S,K=Math.abs(S)),Math.abs(F)<K&&(G=F),G},d.prototype.checkDD=function(b,v,S,F,G){var K=Se.intersection(b,v,S,F),ue=this.isInSegmentEnvelopes(K);ye.out.println("DD in env = "+ue+"  --------------------- "+K),G.distance(K)>1e-4&&ye.out.println("Distance = "+G.distance(K))},d.prototype.intersectionWithNormalization=function(b,v,S,F){var G=new $(b),K=new $(v),ue=new $(S),we=new $(F),ke=new $;this.normalizeToEnvCentre(G,K,ue,we,ke);var Ge=this.safeHCoordinateIntersection(G,K,ue,we);return Ge.x+=ke.x,Ge.y+=ke.y,Ge},d.prototype.computeCollinearIntersection=function(b,v,S,F){var G=Ce.intersects(b,v,S),K=Ce.intersects(b,v,F),ue=Ce.intersects(S,F,b),we=Ce.intersects(S,F,v);return G&&K?(this._intPt[0]=S,this._intPt[1]=F,u.COLLINEAR_INTERSECTION):ue&&we?(this._intPt[0]=b,this._intPt[1]=v,u.COLLINEAR_INTERSECTION):G&&ue?(this._intPt[0]=S,this._intPt[1]=b,!S.equals(b)||K||we?u.COLLINEAR_INTERSECTION:u.POINT_INTERSECTION):G&&we?(this._intPt[0]=S,this._intPt[1]=v,!S.equals(v)||K||ue?u.COLLINEAR_INTERSECTION:u.POINT_INTERSECTION):K&&ue?(this._intPt[0]=F,this._intPt[1]=b,!F.equals(b)||G||we?u.COLLINEAR_INTERSECTION:u.POINT_INTERSECTION):K&&we?(this._intPt[0]=F,this._intPt[1]=v,!F.equals(v)||G||ue?u.COLLINEAR_INTERSECTION:u.POINT_INTERSECTION):u.NO_INTERSECTION},d.prototype.normalizeToEnvCentre=function(b,v,S,F,G){var K=b.x<v.x?b.x:v.x,ue=b.y<v.y?b.y:v.y,we=b.x>v.x?b.x:v.x,ke=b.y>v.y?b.y:v.y,Ge=S.x<F.x?S.x:F.x,tt=S.y<F.y?S.y:F.y,it=S.x>F.x?S.x:F.x,ot=S.y>F.y?S.y:F.y,bt=((K>Ge?K:Ge)+(we<it?we:it))/2,Bt=((ue>tt?ue:tt)+(ke<ot?ke:ot))/2;G.x=bt,G.y=Bt,b.x-=G.x,b.y-=G.y,v.x-=G.x,v.y-=G.y,S.x-=G.x,S.y-=G.y,F.x-=G.x,F.y-=G.y},d.prototype.computeIntersect=function(b,v,S,F){if(this._isProper=!1,!Ce.intersects(b,v,S,F))return u.NO_INTERSECTION;var G=Pe.orientationIndex(b,v,S),K=Pe.orientationIndex(b,v,F);if(G>0&&K>0||G<0&&K<0)return u.NO_INTERSECTION;var ue=Pe.orientationIndex(S,F,b),we=Pe.orientationIndex(S,F,v);return ue>0&&we>0||ue<0&&we<0?u.NO_INTERSECTION:G===0&&K===0&&ue===0&&we===0?this.computeCollinearIntersection(b,v,S,F):(G===0||K===0||ue===0||we===0?(this._isProper=!1,b.equals2D(S)||b.equals2D(F)?this._intPt[0]=b:v.equals2D(S)||v.equals2D(F)?this._intPt[0]=v:G===0?this._intPt[0]=new $(S):K===0?this._intPt[0]=new $(F):ue===0?this._intPt[0]=new $(b):we===0&&(this._intPt[0]=new $(v))):(this._isProper=!0,this._intPt[0]=this.intersection(b,v,S,F)),u.POINT_INTERSECTION)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d.nearestEndpoint=function(b,v,S,F){var G=b,K=Pe.distancePointLine(b,S,F),ue=Pe.distancePointLine(v,S,F);return ue<K&&(K=ue,G=v),(ue=Pe.distancePointLine(S,b,v))<K&&(K=ue,G=S),(ue=Pe.distancePointLine(F,b,v))<K&&(K=ue,G=F),G},d}(U),be=function(){};be.prototype.interfaces_=function(){return[]},be.prototype.getClass=function(){return be},be.orientationIndex=function(u,d,b){var v=d.x-u.x,S=d.y-u.y,F=b.x-d.x,G=b.y-d.y;return be.signOfDet2x2(v,S,F,G)},be.signOfDet2x2=function(u,d,b,v){var S=null,F=null,G=null;if(S=1,u===0||v===0)return d===0||b===0?0:d>0?b>0?-S:S:b>0?S:-S;if(d===0||b===0)return v>0?u>0?S:-S:u>0?-S:S;if(d>0?v>0?d<=v||(S=-S,F=u,u=b,b=F,F=d,d=v,v=F):d<=-v?(S=-S,b=-b,v=-v):(F=u,u=-b,b=F,F=d,d=-v,v=F):v>0?-d<=v?(S=-S,u=-u,d=-d):(F=-u,u=b,b=F,F=-d,d=v,v=F):d>=v?(u=-u,d=-d,b=-b,v=-v):(S=-S,F=-u,u=-b,b=F,F=-d,d=-v,v=F),u>0){if(!(b>0)||!(u<=b))return S}else{if(b>0||!(u>=b))return-S;S=-S,u=-u,b=-b}for(;;){if(G=Math.floor(b/u),b-=G*u,(v-=G*d)<0)return-S;if(v>d)return S;if(u>b+b){if(d<v+v)return S}else{if(d>v+v)return-S;b=u-b,v=d-v,S=-S}if(v===0)return b===0?0:-S;if(b===0||(G=Math.floor(u/b),u-=G*b,(d-=G*v)<0))return S;if(d>v)return-S;if(b>u+u){if(v<d+d)return-S}else{if(v>d+d)return S;u=b-u,d=v-d,S=-S}if(d===0)return u===0?0:S;if(u===0)return-S}};var Ae=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var u=arguments[0];this._p=u};Ae.prototype.countSegment=function(u,d){if(u.x<this._p.x&&d.x<this._p.x)return null;if(this._p.x===d.x&&this._p.y===d.y)return this._isPointOnSegment=!0,null;if(u.y===this._p.y&&d.y===this._p.y){var b=u.x,v=d.x;return b>v&&(b=d.x,v=u.x),this._p.x>=b&&this._p.x<=v&&(this._isPointOnSegment=!0),null}if(u.y>this._p.y&&d.y<=this._p.y||d.y>this._p.y&&u.y<=this._p.y){var S=u.x-this._p.x,F=u.y-this._p.y,G=d.x-this._p.x,K=d.y-this._p.y,ue=be.signOfDet2x2(S,F,G,K);if(ue===0)return this._isPointOnSegment=!0,null;K<F&&(ue=-ue),ue>0&&this._crossingCount++}},Ae.prototype.isPointInPolygon=function(){return this.getLocation()!==z.EXTERIOR},Ae.prototype.getLocation=function(){return this._isPointOnSegment?z.BOUNDARY:this._crossingCount%2==1?z.INTERIOR:z.EXTERIOR},Ae.prototype.isOnSegment=function(){return this._isPointOnSegment},Ae.prototype.interfaces_=function(){return[]},Ae.prototype.getClass=function(){return Ae},Ae.locatePointInRing=function(){if(arguments[0]instanceof $&&q(arguments[1],Re)){for(var u=arguments[0],d=arguments[1],b=new Ae(u),v=new $,S=new $,F=1;F<d.size();F++)if(d.getCoordinate(F,v),d.getCoordinate(F-1,S),b.countSegment(v,S),b.isOnSegment())return b.getLocation();return b.getLocation()}if(arguments[0]instanceof $&&arguments[1]instanceof Array){for(var G=arguments[0],K=arguments[1],ue=new Ae(G),we=1;we<K.length;we++){var ke=K[we],Ge=K[we-1];if(ue.countSegment(ke,Ge),ue.isOnSegment())return ue.getLocation()}return ue.getLocation()}};var Pe=function(){},Je={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Pe.prototype.interfaces_=function(){return[]},Pe.prototype.getClass=function(){return Pe},Pe.orientationIndex=function(u,d,b){return Se.orientationIndex(u,d,b)},Pe.signedArea=function(){if(arguments[0]instanceof Array){var u=arguments[0];if(u.length<3)return 0;for(var d=0,b=u[0].x,v=1;v<u.length-1;v++){var S=u[v].x-b,F=u[v+1].y;d+=S*(u[v-1].y-F)}return d/2}if(q(arguments[0],Re)){var G=arguments[0],K=G.size();if(K<3)return 0;var ue=new $,we=new $,ke=new $;G.getCoordinate(0,we),G.getCoordinate(1,ke);var Ge=we.x;ke.x-=Ge;for(var tt=0,it=1;it<K-1;it++)ue.y=we.y,we.x=ke.x,we.y=ke.y,G.getCoordinate(it+1,ke),ke.x-=Ge,tt+=we.x*(ue.y-ke.y);return tt/2}},Pe.distanceLineLine=function(u,d,b,v){if(u.equals(d))return Pe.distancePointLine(u,b,v);if(b.equals(v))return Pe.distancePointLine(v,u,d);var S=!1;if(Ce.intersects(u,d,b,v)){var F=(d.x-u.x)*(v.y-b.y)-(d.y-u.y)*(v.x-b.x);if(F===0)S=!0;else{var G=(u.y-b.y)*(v.x-b.x)-(u.x-b.x)*(v.y-b.y),K=((u.y-b.y)*(d.x-u.x)-(u.x-b.x)*(d.y-u.y))/F,ue=G/F;(ue<0||ue>1||K<0||K>1)&&(S=!0)}}else S=!0;return S?te.min(Pe.distancePointLine(u,b,v),Pe.distancePointLine(d,b,v),Pe.distancePointLine(b,u,d),Pe.distancePointLine(v,u,d)):0},Pe.isPointInRing=function(u,d){return Pe.locatePointInRing(u,d)!==z.EXTERIOR},Pe.computeLength=function(u){var d=u.size();if(d<=1)return 0;var b=0,v=new $;u.getCoordinate(0,v);for(var S=v.x,F=v.y,G=1;G<d;G++){u.getCoordinate(G,v);var K=v.x,ue=v.y,we=K-S,ke=ue-F;b+=Math.sqrt(we*we+ke*ke),S=K,F=ue}return b},Pe.isCCW=function(u){var d=u.length-1;if(d<3)throw new L("Ring has fewer than 4 points, so orientation cannot be determined");for(var b=u[0],v=0,S=1;S<=d;S++){var F=u[S];F.y>b.y&&(b=F,v=S)}var G=v;do(G-=1)<0&&(G=d);while(u[G].equals2D(b)&&G!==v);var K=v;do K=(K+1)%d;while(u[K].equals2D(b)&&K!==v);var ue=u[G],we=u[K];if(ue.equals2D(b)||we.equals2D(b)||ue.equals2D(we))return!1;var ke=Pe.computeOrientation(ue,b,we),Ge=!1;return Ge=ke===0?ue.x>we.x:ke>0,Ge},Pe.locatePointInRing=function(u,d){return Ae.locatePointInRing(u,d)},Pe.distancePointLinePerpendicular=function(u,d,b){var v=(b.x-d.x)*(b.x-d.x)+(b.y-d.y)*(b.y-d.y),S=((d.y-u.y)*(b.x-d.x)-(d.x-u.x)*(b.y-d.y))/v;return Math.abs(S)*Math.sqrt(v)},Pe.computeOrientation=function(u,d,b){return Pe.orientationIndex(u,d,b)},Pe.distancePointLine=function(){if(arguments.length===2){var u=arguments[0],d=arguments[1];if(d.length===0)throw new L("Line array must contain at least one vertex");for(var b=u.distance(d[0]),v=0;v<d.length-1;v++){var S=Pe.distancePointLine(u,d[v],d[v+1]);S<b&&(b=S)}return b}if(arguments.length===3){var F=arguments[0],G=arguments[1],K=arguments[2];if(G.x===K.x&&G.y===K.y)return F.distance(G);var ue=(K.x-G.x)*(K.x-G.x)+(K.y-G.y)*(K.y-G.y),we=((F.x-G.x)*(K.x-G.x)+(F.y-G.y)*(K.y-G.y))/ue;if(we<=0)return F.distance(G);if(we>=1)return F.distance(K);var ke=((G.y-F.y)*(K.x-G.x)-(G.x-F.x)*(K.y-G.y))/ue;return Math.abs(ke)*Math.sqrt(ue)}},Pe.isOnLine=function(u,d){for(var b=new ce,v=1;v<d.length;v++){var S=d[v-1],F=d[v];if(b.computeIntersection(u,S,F),b.hasIntersection())return!0}return!1},Je.CLOCKWISE.get=function(){return-1},Je.RIGHT.get=function(){return Pe.CLOCKWISE},Je.COUNTERCLOCKWISE.get=function(){return 1},Je.LEFT.get=function(){return Pe.COUNTERCLOCKWISE},Je.COLLINEAR.get=function(){return 0},Je.STRAIGHT.get=function(){return Pe.COLLINEAR},Object.defineProperties(Pe,Je);var Ue=function(){};Ue.prototype.filter=function(u){},Ue.prototype.interfaces_=function(){return[]},Ue.prototype.getClass=function(){return Ue};var qe=function(){var u=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=u,this._SRID=u.getSRID()},ct={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};qe.prototype.isGeometryCollection=function(){return this.getSortIndex()===qe.SORTINDEX_GEOMETRYCOLLECTION},qe.prototype.getFactory=function(){return this._factory},qe.prototype.getGeometryN=function(u){return this},qe.prototype.getArea=function(){return 0},qe.prototype.isRectangle=function(){return!1},qe.prototype.equals=function(){if(arguments[0]instanceof qe){var u=arguments[0];return u!==null&&this.equalsTopo(u)}if(arguments[0]instanceof Object){var d=arguments[0];if(!(d instanceof qe))return!1;var b=d;return this.equalsExact(b)}},qe.prototype.equalsExact=function(u){return this===u||this.equalsExact(u,0)},qe.prototype.geometryChanged=function(){this.apply(qe.geometryChangedFilter)},qe.prototype.geometryChangedAction=function(){this._envelope=null},qe.prototype.equalsNorm=function(u){return u!==null&&this.norm().equalsExact(u.norm())},qe.prototype.getLength=function(){return 0},qe.prototype.getNumGeometries=function(){return 1},qe.prototype.compareTo=function(){if(arguments.length===1){var u=arguments[0],d=u;return this.getSortIndex()!==d.getSortIndex()?this.getSortIndex()-d.getSortIndex():this.isEmpty()&&d.isEmpty()?0:this.isEmpty()?-1:d.isEmpty()?1:this.compareToSameClass(u)}if(arguments.length===2){var b=arguments[0],v=arguments[1];return this.getSortIndex()!==b.getSortIndex()?this.getSortIndex()-b.getSortIndex():this.isEmpty()&&b.isEmpty()?0:this.isEmpty()?-1:b.isEmpty()?1:this.compareToSameClass(b,v)}},qe.prototype.getUserData=function(){return this._userData},qe.prototype.getSRID=function(){return this._SRID},qe.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},qe.prototype.checkNotGeometryCollection=function(u){if(u.getSortIndex()===qe.SORTINDEX_GEOMETRYCOLLECTION)throw new L("This method does not support GeometryCollection arguments")},qe.prototype.equal=function(u,d,b){return b===0?u.equals(d):u.distance(d)<=b},qe.prototype.norm=function(){var u=this.copy();return u.normalize(),u},qe.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},qe.prototype.getEnvelopeInternal=function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new Ce(this._envelope)},qe.prototype.setSRID=function(u){this._SRID=u},qe.prototype.setUserData=function(u){this._userData=u},qe.prototype.compare=function(u,d){for(var b=u.iterator(),v=d.iterator();b.hasNext()&&v.hasNext();){var S=b.next(),F=v.next(),G=S.compareTo(F);if(G!==0)return G}return b.hasNext()?1:v.hasNext()?-1:0},qe.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},qe.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===qe.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===qe.SORTINDEX_MULTIPOINT||this.getSortIndex()===qe.SORTINDEX_MULTILINESTRING||this.getSortIndex()===qe.SORTINDEX_MULTIPOLYGON},qe.prototype.interfaces_=function(){return[k,N,i]},qe.prototype.getClass=function(){return qe},qe.hasNonEmptyElements=function(u){for(var d=0;d<u.length;d++)if(!u[d].isEmpty())return!0;return!1},qe.hasNullElements=function(u){for(var d=0;d<u.length;d++)if(u[d]===null)return!0;return!1},ct.serialVersionUID.get=function(){return 8763622679187377e3},ct.SORTINDEX_POINT.get=function(){return 0},ct.SORTINDEX_MULTIPOINT.get=function(){return 1},ct.SORTINDEX_LINESTRING.get=function(){return 2},ct.SORTINDEX_LINEARRING.get=function(){return 3},ct.SORTINDEX_MULTILINESTRING.get=function(){return 4},ct.SORTINDEX_POLYGON.get=function(){return 5},ct.SORTINDEX_MULTIPOLYGON.get=function(){return 6},ct.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},ct.geometryChangedFilter.get=function(){return vt},Object.defineProperties(qe,ct);var vt=function(){};vt.interfaces_=function(){return[Ue]},vt.filter=function(u){u.geometryChangedAction()};var Mt=function(){};Mt.prototype.filter=function(u){},Mt.prototype.interfaces_=function(){return[]},Mt.prototype.getClass=function(){return Mt};var pt=function(){},Lt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};pt.prototype.isInBoundary=function(u){},pt.prototype.interfaces_=function(){return[]},pt.prototype.getClass=function(){return pt},Lt.Mod2BoundaryNodeRule.get=function(){return At},Lt.EndPointBoundaryNodeRule.get=function(){return It},Lt.MultiValentEndPointBoundaryNodeRule.get=function(){return Rt},Lt.MonoValentEndPointBoundaryNodeRule.get=function(){return Jt},Lt.MOD2_BOUNDARY_RULE.get=function(){return new At},Lt.ENDPOINT_BOUNDARY_RULE.get=function(){return new It},Lt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Rt},Lt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Jt},Lt.OGC_SFS_BOUNDARY_RULE.get=function(){return pt.MOD2_BOUNDARY_RULE},Object.defineProperties(pt,Lt);var At=function(){};At.prototype.isInBoundary=function(u){return u%2==1},At.prototype.interfaces_=function(){return[pt]},At.prototype.getClass=function(){return At};var It=function(){};It.prototype.isInBoundary=function(u){return u>0},It.prototype.interfaces_=function(){return[pt]},It.prototype.getClass=function(){return It};var Rt=function(){};Rt.prototype.isInBoundary=function(u){return u>1},Rt.prototype.interfaces_=function(){return[pt]},Rt.prototype.getClass=function(){return Rt};var Jt=function(){};Jt.prototype.isInBoundary=function(u){return u===1},Jt.prototype.interfaces_=function(){return[pt]},Jt.prototype.getClass=function(){return Jt};var kt=function(){};kt.prototype.add=function(){},kt.prototype.addAll=function(){},kt.prototype.isEmpty=function(){},kt.prototype.iterator=function(){},kt.prototype.size=function(){},kt.prototype.toArray=function(){},kt.prototype.remove=function(){},(s.prototype=new Error).name="IndexOutOfBoundsException";var Bi=function(){};Bi.prototype.hasNext=function(){},Bi.prototype.next=function(){},Bi.prototype.remove=function(){};var Zt=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),d.prototype=Object.create(u&&u.prototype),d.prototype.constructor=d,d.prototype.get=function(){},d.prototype.set=function(){},d.prototype.isEmpty=function(){},d}(kt);(n.prototype=new Error).name="NoSuchElementException";var Xe=function(u){function d(){u.call(this),this.array_=[],arguments[0]instanceof kt&&this.addAll(arguments[0])}return u&&(d.__proto__=u),d.prototype=Object.create(u&&u.prototype),d.prototype.constructor=d,d.prototype.ensureCapacity=function(){},d.prototype.interfaces_=function(){return[u,kt]},d.prototype.add=function(b){return arguments.length===1?this.array_.push(b):this.array_.splice(arguments[0],arguments[1]),!0},d.prototype.clear=function(){this.array_=[]},d.prototype.addAll=function(b){for(var v=b.iterator();v.hasNext();)this.add(v.next());return!0},d.prototype.set=function(b,v){var S=this.array_[b];return this.array_[b]=v,S},d.prototype.iterator=function(){return new Ri(this)},d.prototype.get=function(b){if(b<0||b>=this.size())throw new s;return this.array_[b]},d.prototype.isEmpty=function(){return this.array_.length===0},d.prototype.size=function(){return this.array_.length},d.prototype.toArray=function(){for(var b=[],v=0,S=this.array_.length;v<S;v++)b.push(this.array_[v]);return b},d.prototype.remove=function(b){for(var v=!1,S=0,F=this.array_.length;S<F;S++)if(this.array_[S]===b){this.array_.splice(S,1),v=!0;break}return v},d}(Zt),Ri=function(u){function d(b){u.call(this),this.arrayList_=b,this.position_=0}return u&&(d.__proto__=u),d.prototype=Object.create(u&&u.prototype),d.prototype.constructor=d,d.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new n;return this.arrayList_.get(this.position_++)},d.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},d.prototype.set=function(b){return this.arrayList_.set(this.position_-1,b)},d.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},d}(Bi),Vi=function(u){function d(){if(u.call(this),arguments.length!==0){if(arguments.length===1){var v=arguments[0];this.ensureCapacity(v.length),this.add(v,!0)}else if(arguments.length===2){var S=arguments[0],F=arguments[1];this.ensureCapacity(S.length),this.add(S,F)}}}u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d;var b={coordArrayType:{configurable:!0}};return b.coordArrayType.get=function(){return new Array(0).fill(null)},d.prototype.getCoordinate=function(v){return this.get(v)},d.prototype.addAll=function(){if(arguments.length===2){for(var v=arguments[0],S=arguments[1],F=!1,G=v.iterator();G.hasNext();)this.add(G.next(),S),F=!0;return F}return u.prototype.addAll.apply(this,arguments)},d.prototype.clone=function(){for(var v=u.prototype.clone.call(this),S=0;S<this.size();S++)v.add(S,this.get(S).copy());return v},d.prototype.toCoordinateArray=function(){return this.toArray(d.coordArrayType)},d.prototype.add=function(){if(arguments.length===1){var v=arguments[0];u.prototype.add.call(this,v)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var S=arguments[0],F=arguments[1];return this.add(S,F,!0),!0}if(arguments[0]instanceof $&&typeof arguments[1]=="boolean"){var G=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(G))return null;u.prototype.add.call(this,G)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var K=arguments[0],ue=arguments[1];return this.add(K,ue),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var we=arguments[0],ke=arguments[1];if(arguments[2])for(var Ge=0;Ge<we.length;Ge++)this.add(we[Ge],ke);else for(var tt=we.length-1;tt>=0;tt--)this.add(we[tt],ke);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof $){var it=arguments[0],ot=arguments[1];if(!arguments[2]){var bt=this.size();if(bt>0&&(it>0&&this.get(it-1).equals2D(ot)||it<bt&&this.get(it).equals2D(ot)))return null}u.prototype.add.call(this,it,ot)}}else if(arguments.length===4){var Bt=arguments[0],ii=arguments[1],Ii=arguments[2],I0=arguments[3],ea=1;Ii>I0&&(ea=-1);for(var _s=Ii;_s!==I0;_s+=ea)this.add(Bt[_s],ii);return!0}},d.prototype.closeRing=function(){this.size()>0&&this.add(new $(this.get(0)),!1)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},Object.defineProperties(d,b),d}(Xe),Et=function(){},l0={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};l0.ForwardComparator.get=function(){return Ji},l0.BidirectionalComparator.get=function(){return Hi},l0.coordArrayType.get=function(){return new Array(0).fill(null)},Et.prototype.interfaces_=function(){return[]},Et.prototype.getClass=function(){return Et},Et.isRing=function(u){return!(u.length<4)&&!!u[0].equals2D(u[u.length-1])},Et.ptNotInList=function(u,d){for(var b=0;b<u.length;b++){var v=u[b];if(Et.indexOf(v,d)<0)return v}return null},Et.scroll=function(u,d){var b=Et.indexOf(d,u);if(b<0)return null;var v=new Array(u.length).fill(null);ye.arraycopy(u,b,v,0,u.length-b),ye.arraycopy(u,0,v,u.length-b,b),ye.arraycopy(v,0,u,0,u.length)},Et.equals=function(){if(arguments.length===2){var u=arguments[0],d=arguments[1];if(u===d)return!0;if(u===null||d===null||u.length!==d.length)return!1;for(var b=0;b<u.length;b++)if(!u[b].equals(d[b]))return!1;return!0}if(arguments.length===3){var v=arguments[0],S=arguments[1],F=arguments[2];if(v===S)return!0;if(v===null||S===null||v.length!==S.length)return!1;for(var G=0;G<v.length;G++)if(F.compare(v[G],S[G])!==0)return!1;return!0}},Et.intersection=function(u,d){for(var b=new Vi,v=0;v<u.length;v++)d.intersects(u[v])&&b.add(u[v],!0);return b.toCoordinateArray()},Et.hasRepeatedPoints=function(u){for(var d=1;d<u.length;d++)if(u[d-1].equals(u[d]))return!0;return!1},Et.removeRepeatedPoints=function(u){return Et.hasRepeatedPoints(u)?new Vi(u,!1).toCoordinateArray():u},Et.reverse=function(u){for(var d=u.length-1,b=Math.trunc(d/2),v=0;v<=b;v++){var S=u[v];u[v]=u[d-v],u[d-v]=S}},Et.removeNull=function(u){for(var d=0,b=0;b<u.length;b++)u[b]!==null&&d++;var v=new Array(d).fill(null);if(d===0)return v;for(var S=0,F=0;F<u.length;F++)u[F]!==null&&(v[S++]=u[F]);return v},Et.copyDeep=function(){if(arguments.length===1){for(var u=arguments[0],d=new Array(u.length).fill(null),b=0;b<u.length;b++)d[b]=new $(u[b]);return d}if(arguments.length===5)for(var v=arguments[0],S=arguments[1],F=arguments[2],G=arguments[3],K=arguments[4],ue=0;ue<K;ue++)F[G+ue]=new $(v[S+ue])},Et.isEqualReversed=function(u,d){for(var b=0;b<u.length;b++){var v=u[b],S=d[u.length-b-1];if(v.compareTo(S)!==0)return!1}return!0},Et.envelope=function(u){for(var d=new Ce,b=0;b<u.length;b++)d.expandToInclude(u[b]);return d},Et.toCoordinateArray=function(u){return u.toArray(Et.coordArrayType)},Et.atLeastNCoordinatesOrNothing=function(u,d){return d.length>=u?d:[]},Et.indexOf=function(u,d){for(var b=0;b<d.length;b++)if(u.equals(d[b]))return b;return-1},Et.increasingDirection=function(u){for(var d=0;d<Math.trunc(u.length/2);d++){var b=u.length-1-d,v=u[d].compareTo(u[b]);if(v!==0)return v}return 1},Et.compare=function(u,d){for(var b=0;b<u.length&&b<d.length;){var v=u[b].compareTo(d[b]);if(v!==0)return v;b++}return b<d.length?-1:b<u.length?1:0},Et.minCoordinate=function(u){for(var d=null,b=0;b<u.length;b++)(d===null||d.compareTo(u[b])>0)&&(d=u[b]);return d},Et.extract=function(u,d,b){d=te.clamp(d,0,u.length);var v=(b=te.clamp(b,-1,u.length))-d+1;b<0&&(v=0),d>=u.length&&(v=0),b<d&&(v=0);var S=new Array(v).fill(null);if(v===0)return S;for(var F=0,G=d;G<=b;G++)S[F++]=u[G];return S},Object.defineProperties(Et,l0);var Ji=function(){};Ji.prototype.compare=function(u,d){return Et.compare(u,d)},Ji.prototype.interfaces_=function(){return[B]},Ji.prototype.getClass=function(){return Ji};var Hi=function(){};Hi.prototype.compare=function(u,d){var b=u,v=d;if(b.length<v.length)return-1;if(b.length>v.length)return 1;if(b.length===0)return 0;var S=Et.compare(b,v);return Et.isEqualReversed(b,v)?0:S},Hi.prototype.OLDcompare=function(u,d){var b=u,v=d;if(b.length<v.length)return-1;if(b.length>v.length)return 1;if(b.length===0)return 0;for(var S=Et.increasingDirection(b),F=Et.increasingDirection(v),G=S>0?0:b.length-1,K=F>0?0:b.length-1,ue=0;ue<b.length;ue++){var we=b[G].compareTo(v[K]);if(we!==0)return we;G+=S,K+=F}return 0},Hi.prototype.interfaces_=function(){return[B]},Hi.prototype.getClass=function(){return Hi};var Ui=function(){};Ui.prototype.get=function(){},Ui.prototype.put=function(){},Ui.prototype.size=function(){},Ui.prototype.values=function(){},Ui.prototype.entrySet=function(){};var xt=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),d.prototype=Object.create(u&&u.prototype),d.prototype.constructor=d,d}(Ui);(o.prototype=new Error).name="OperationNotSupported",(c.prototype=new kt).contains=function(){};var st=function(u){function d(){u.call(this),this.array_=[],arguments[0]instanceof kt&&this.addAll(arguments[0])}return u&&(d.__proto__=u),d.prototype=Object.create(u&&u.prototype),d.prototype.constructor=d,d.prototype.contains=function(b){for(var v=0,S=this.array_.length;v<S;v++)if(this.array_[v]===b)return!0;return!1},d.prototype.add=function(b){return!this.contains(b)&&(this.array_.push(b),!0)},d.prototype.addAll=function(b){for(var v=b.iterator();v.hasNext();)this.add(v.next());return!0},d.prototype.remove=function(b){throw new Error},d.prototype.size=function(){return this.array_.length},d.prototype.isEmpty=function(){return this.array_.length===0},d.prototype.toArray=function(){for(var b=[],v=0,S=this.array_.length;v<S;v++)b.push(this.array_[v]);return b},d.prototype.iterator=function(){return new ht(this)},d}(c),ht=function(u){function d(b){u.call(this),this.hashSet_=b,this.position_=0}return u&&(d.__proto__=u),d.prototype=Object.create(u&&u.prototype),d.prototype.constructor=d,d.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new n;return this.hashSet_.array_[this.position_++]},d.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},d.prototype.remove=function(){throw new o},d}(Bi),rt=0;(g.prototype=new xt).get=function(u){for(var d=this.root_;d!==null;){var b=u.compareTo(d.key);if(b<0)d=d.left;else{if(!(b>0))return d.value;d=d.right}}return null},g.prototype.put=function(u,d){if(this.root_===null)return this.root_={key:u,value:d,left:null,right:null,parent:null,color:rt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var b,v,S=this.root_;do if(b=S,(v=u.compareTo(S.key))<0)S=S.left;else{if(!(v>0)){var F=S.value;return S.value=d,F}S=S.right}while(S!==null);var G={key:u,left:null,right:null,value:d,parent:b,color:rt,getValue:function(){return this.value},getKey:function(){return this.key}};return v<0?b.left=G:b.right=G,this.fixAfterInsertion(G),this.size_++,null},g.prototype.fixAfterInsertion=function(u){for(u.color=1;u!=null&&u!==this.root_&&u.parent.color===1;)if(l(u)===f(l(l(u)))){var d=m(l(l(u)));_(d)===1?(h(l(u),rt),h(d,rt),h(l(l(u)),1),u=l(l(u))):(u===m(l(u))&&(u=l(u),this.rotateLeft(u)),h(l(u),rt),h(l(l(u)),1),this.rotateRight(l(l(u))))}else{var b=f(l(l(u)));_(b)===1?(h(l(u),rt),h(b,rt),h(l(l(u)),1),u=l(l(u))):(u===f(l(u))&&(u=l(u),this.rotateRight(u)),h(l(u),rt),h(l(l(u)),1),this.rotateLeft(l(l(u))))}this.root_.color=rt},g.prototype.values=function(){var u=new Xe,d=this.getFirstEntry();if(d!==null)for(u.add(d.value);(d=g.successor(d))!==null;)u.add(d.value);return u},g.prototype.entrySet=function(){var u=new st,d=this.getFirstEntry();if(d!==null)for(u.add(d);(d=g.successor(d))!==null;)u.add(d);return u},g.prototype.rotateLeft=function(u){if(u!=null){var d=u.right;u.right=d.left,d.left!=null&&(d.left.parent=u),d.parent=u.parent,u.parent===null?this.root_=d:u.parent.left===u?u.parent.left=d:u.parent.right=d,d.left=u,u.parent=d}},g.prototype.rotateRight=function(u){if(u!=null){var d=u.left;u.left=d.right,d.right!=null&&(d.right.parent=u),d.parent=u.parent,u.parent===null?this.root_=d:u.parent.right===u?u.parent.right=d:u.parent.left=d,d.right=u,u.parent=d}},g.prototype.getFirstEntry=function(){var u=this.root_;if(u!=null)for(;u.left!=null;)u=u.left;return u},g.successor=function(u){if(u===null)return null;if(u.right!==null){for(var d=u.right;d.left!==null;)d=d.left;return d}for(var b=u.parent,v=u;b!==null&&v===b.right;)v=b,b=b.parent;return b},g.prototype.size=function(){return this.size_};var dt=function(){};dt.prototype.interfaces_=function(){return[]},dt.prototype.getClass=function(){return dt},C.prototype=new c,(E.prototype=new C).contains=function(u){for(var d=0,b=this.array_.length;d<b;d++)if(this.array_[d].compareTo(u)===0)return!0;return!1},E.prototype.add=function(u){if(this.contains(u))return!1;for(var d=0,b=this.array_.length;d<b;d++)if(this.array_[d].compareTo(u)===1)return this.array_.splice(d,0,u),!0;return this.array_.push(u),!0},E.prototype.addAll=function(u){for(var d=u.iterator();d.hasNext();)this.add(d.next());return!0},E.prototype.remove=function(u){throw new o},E.prototype.size=function(){return this.array_.length},E.prototype.isEmpty=function(){return this.array_.length===0},E.prototype.toArray=function(){for(var u=[],d=0,b=this.array_.length;d<b;d++)u.push(this.array_[d]);return u},E.prototype.iterator=function(){return new ft(this)};var ft=function(u){this.treeSet_=u,this.position_=0};ft.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new n;return this.treeSet_.array_[this.position_++]},ft.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},ft.prototype.remove=function(){throw new o};var Ct=function(){};Ct.sort=function(){var u,d,b,v,S=arguments[0];if(arguments.length===1)v=function(G,K){return G.compareTo(K)},S.sort(v);else if(arguments.length===2)b=arguments[1],v=function(G,K){return b.compare(G,K)},S.sort(v);else if(arguments.length===3){(d=S.slice(arguments[1],arguments[2])).sort();var F=S.slice(0,arguments[1]).concat(d,S.slice(arguments[2],S.length));for(S.splice(0,S.length),u=0;u<F.length;u++)S.push(F[u])}else if(arguments.length===4)for(d=S.slice(arguments[1],arguments[2]),b=arguments[3],v=function(G,K){return b.compare(G,K)},d.sort(v),F=S.slice(0,arguments[1]).concat(d,S.slice(arguments[2],S.length)),S.splice(0,S.length),u=0;u<F.length;u++)S.push(F[u])},Ct.asList=function(u){for(var d=new Xe,b=0,v=u.length;b<v;b++)d.add(u[b]);return d};var nt=function(){},Ke={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Ke.P.get=function(){return 0},Ke.L.get=function(){return 1},Ke.A.get=function(){return 2},Ke.FALSE.get=function(){return-1},Ke.TRUE.get=function(){return-2},Ke.DONTCARE.get=function(){return-3},Ke.SYM_FALSE.get=function(){return"F"},Ke.SYM_TRUE.get=function(){return"T"},Ke.SYM_DONTCARE.get=function(){return"*"},Ke.SYM_P.get=function(){return"0"},Ke.SYM_L.get=function(){return"1"},Ke.SYM_A.get=function(){return"2"},nt.prototype.interfaces_=function(){return[]},nt.prototype.getClass=function(){return nt},nt.toDimensionSymbol=function(u){switch(u){case nt.FALSE:return nt.SYM_FALSE;case nt.TRUE:return nt.SYM_TRUE;case nt.DONTCARE:return nt.SYM_DONTCARE;case nt.P:return nt.SYM_P;case nt.L:return nt.SYM_L;case nt.A:return nt.SYM_A}throw new L("Unknown dimension value: "+u)},nt.toDimensionValue=function(u){switch(de.toUpperCase(u)){case nt.SYM_FALSE:return nt.FALSE;case nt.SYM_TRUE:return nt.TRUE;case nt.SYM_DONTCARE:return nt.DONTCARE;case nt.SYM_P:return nt.P;case nt.SYM_L:return nt.L;case nt.SYM_A:return nt.A}throw new L("Unknown dimension symbol: "+u)},Object.defineProperties(nt,Ke);var se=function(){};se.prototype.filter=function(u){},se.prototype.interfaces_=function(){return[]},se.prototype.getClass=function(){return se};var gi=function(){};gi.prototype.filter=function(u,d){},gi.prototype.isDone=function(){},gi.prototype.isGeometryChanged=function(){},gi.prototype.interfaces_=function(){return[]},gi.prototype.getClass=function(){return gi};var si=function(u){function d(v,S){if(u.call(this,S),this._geometries=v||[],u.hasNullElements(this._geometries))throw new L("geometries must not contain null elements")}u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d;var b={serialVersionUID:{configurable:!0}};return d.prototype.computeEnvelopeInternal=function(){for(var v=new Ce,S=0;S<this._geometries.length;S++)v.expandToInclude(this._geometries[S].getEnvelopeInternal());return v},d.prototype.getGeometryN=function(v){return this._geometries[v]},d.prototype.getSortIndex=function(){return u.SORTINDEX_GEOMETRYCOLLECTION},d.prototype.getCoordinates=function(){for(var v=new Array(this.getNumPoints()).fill(null),S=-1,F=0;F<this._geometries.length;F++)for(var G=this._geometries[F].getCoordinates(),K=0;K<G.length;K++)v[++S]=G[K];return v},d.prototype.getArea=function(){for(var v=0,S=0;S<this._geometries.length;S++)v+=this._geometries[S].getArea();return v},d.prototype.equalsExact=function(){if(arguments.length===2){var v=arguments[0],S=arguments[1];if(!this.isEquivalentClass(v))return!1;var F=v;if(this._geometries.length!==F._geometries.length)return!1;for(var G=0;G<this._geometries.length;G++)if(!this._geometries[G].equalsExact(F._geometries[G],S))return!1;return!0}return u.prototype.equalsExact.apply(this,arguments)},d.prototype.normalize=function(){for(var v=0;v<this._geometries.length;v++)this._geometries[v].normalize();Ct.sort(this._geometries)},d.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},d.prototype.getBoundaryDimension=function(){for(var v=nt.FALSE,S=0;S<this._geometries.length;S++)v=Math.max(v,this._geometries[S].getBoundaryDimension());return v},d.prototype.getDimension=function(){for(var v=nt.FALSE,S=0;S<this._geometries.length;S++)v=Math.max(v,this._geometries[S].getDimension());return v},d.prototype.getLength=function(){for(var v=0,S=0;S<this._geometries.length;S++)v+=this._geometries[S].getLength();return v},d.prototype.getNumPoints=function(){for(var v=0,S=0;S<this._geometries.length;S++)v+=this._geometries[S].getNumPoints();return v},d.prototype.getNumGeometries=function(){return this._geometries.length},d.prototype.reverse=function(){for(var v=this._geometries.length,S=new Array(v).fill(null),F=0;F<this._geometries.length;F++)S[F]=this._geometries[F].reverse();return this.getFactory().createGeometryCollection(S)},d.prototype.compareToSameClass=function(){if(arguments.length===1){var v=arguments[0],S=new E(Ct.asList(this._geometries)),F=new E(Ct.asList(v._geometries));return this.compare(S,F)}if(arguments.length===2){for(var G=arguments[0],K=arguments[1],ue=G,we=this.getNumGeometries(),ke=ue.getNumGeometries(),Ge=0;Ge<we&&Ge<ke;){var tt=this.getGeometryN(Ge),it=ue.getGeometryN(Ge),ot=tt.compareToSameClass(it,K);if(ot!==0)return ot;Ge++}return Ge<we?1:Ge<ke?-1:0}},d.prototype.apply=function(){if(q(arguments[0],Mt))for(var v=arguments[0],S=0;S<this._geometries.length;S++)this._geometries[S].apply(v);else if(q(arguments[0],gi)){var F=arguments[0];if(this._geometries.length===0)return null;for(var G=0;G<this._geometries.length&&(this._geometries[G].apply(F),!F.isDone());G++);F.isGeometryChanged()&&this.geometryChanged()}else if(q(arguments[0],se)){var K=arguments[0];K.filter(this);for(var ue=0;ue<this._geometries.length;ue++)this._geometries[ue].apply(K)}else if(q(arguments[0],Ue)){var we=arguments[0];we.filter(this);for(var ke=0;ke<this._geometries.length;ke++)this._geometries[ke].apply(we)}},d.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),j.shouldNeverReachHere(),null},d.prototype.clone=function(){var v=u.prototype.clone.call(this);v._geometries=new Array(this._geometries.length).fill(null);for(var S=0;S<this._geometries.length;S++)v._geometries[S]=this._geometries[S].clone();return v},d.prototype.getGeometryType=function(){return"GeometryCollection"},d.prototype.copy=function(){for(var v=new Array(this._geometries.length).fill(null),S=0;S<v.length;S++)v[S]=this._geometries[S].copy();return new d(v,this._factory)},d.prototype.isEmpty=function(){for(var v=0;v<this._geometries.length;v++)if(!this._geometries[v].isEmpty())return!1;return!0},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},b.serialVersionUID.get=function(){return-5694727726395021e3},Object.defineProperties(d,b),d}(qe),u0=function(u){function d(){u.apply(this,arguments)}u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d;var b={serialVersionUID:{configurable:!0}};return d.prototype.getSortIndex=function(){return qe.SORTINDEX_MULTILINESTRING},d.prototype.equalsExact=function(){if(arguments.length===2){var v=arguments[0],S=arguments[1];return!!this.isEquivalentClass(v)&&u.prototype.equalsExact.call(this,v,S)}return u.prototype.equalsExact.apply(this,arguments)},d.prototype.getBoundaryDimension=function(){return this.isClosed()?nt.FALSE:0},d.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var v=0;v<this._geometries.length;v++)if(!this._geometries[v].isClosed())return!1;return!0},d.prototype.getDimension=function(){return 1},d.prototype.reverse=function(){for(var v=this._geometries.length,S=new Array(v).fill(null),F=0;F<this._geometries.length;F++)S[v-1-F]=this._geometries[F].reverse();return this.getFactory().createMultiLineString(S)},d.prototype.getBoundary=function(){return new Ci(this).getBoundary()},d.prototype.getGeometryType=function(){return"MultiLineString"},d.prototype.copy=function(){for(var v=new Array(this._geometries.length).fill(null),S=0;S<v.length;S++)v[S]=this._geometries[S].copy();return new d(v,this._factory)},d.prototype.interfaces_=function(){return[dt]},d.prototype.getClass=function(){return d},b.serialVersionUID.get=function(){return 8166665132445434e3},Object.defineProperties(d,b),d}(si),Ci=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,arguments.length===1){var u=arguments[0],d=pt.MOD2_BOUNDARY_RULE;this._geom=u,this._geomFact=u.getFactory(),this._bnRule=d}else if(arguments.length===2){var b=arguments[0],v=arguments[1];this._geom=b,this._geomFact=b.getFactory(),this._bnRule=v}};Ci.prototype.boundaryMultiLineString=function(u){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var d=this.computeBoundaryCoordinates(u);return d.length===1?this._geomFact.createPoint(d[0]):this._geomFact.createMultiPointFromCoords(d)},Ci.prototype.getBoundary=function(){return this._geom instanceof Gt?this.boundaryLineString(this._geom):this._geom instanceof u0?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Ci.prototype.boundaryLineString=function(u){return this._geom.isEmpty()?this.getEmptyMultiPoint():u.isClosed()?this._bnRule.isInBoundary(2)?u.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([u.getStartPoint(),u.getEndPoint()])},Ci.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Ci.prototype.computeBoundaryCoordinates=function(u){var d=new Xe;this._endpointMap=new g;for(var b=0;b<u.getNumGeometries();b++){var v=u.getGeometryN(b);v.getNumPoints()!==0&&(this.addEndpoint(v.getCoordinateN(0)),this.addEndpoint(v.getCoordinateN(v.getNumPoints()-1)))}for(var S=this._endpointMap.entrySet().iterator();S.hasNext();){var F=S.next(),G=F.getValue().count;this._bnRule.isInBoundary(G)&&d.add(F.getKey())}return Et.toCoordinateArray(d)},Ci.prototype.addEndpoint=function(u){var d=this._endpointMap.get(u);d===null&&(d=new ta,this._endpointMap.put(u,d)),d.count++},Ci.prototype.interfaces_=function(){return[]},Ci.prototype.getClass=function(){return Ci},Ci.getBoundary=function(){if(arguments.length===1){var u=arguments[0];return new Ci(u).getBoundary()}if(arguments.length===2){var d=arguments[0],b=arguments[1];return new Ci(d,b).getBoundary()}};var ta=function(){this.count=null};ta.prototype.interfaces_=function(){return[]},ta.prototype.getClass=function(){return ta};var Pi=function(){},la={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Pi.prototype.interfaces_=function(){return[]},Pi.prototype.getClass=function(){return Pi},Pi.chars=function(u,d){for(var b=new Array(d).fill(null),v=0;v<d;v++)b[v]=u;return String(b)},Pi.getStackTrace=function(){if(arguments.length===1){var u=arguments[0],d=new function(){},b=new function(){};return u.printStackTrace(b),d.toString()}if(arguments.length===2){for(var v=arguments[0],S=arguments[1],F="",G=new function(){}(new function(){}(Pi.getStackTrace(v))),K=0;K<S;K++)try{F+=G.readLine()+Pi.NEWLINE}catch(ue){if(!(ue instanceof P))throw ue;j.shouldNeverReachHere()}return F}},Pi.split=function(u,d){for(var b=d.length,v=new Xe,S=""+u,F=S.indexOf(d);F>=0;){var G=S.substring(0,F);v.add(G),F=(S=S.substring(F+b)).indexOf(d)}S.length>0&&v.add(S);for(var K=new Array(v.size()).fill(null),ue=0;ue<K.length;ue++)K[ue]=v.get(ue);return K},Pi.toString=function(){if(arguments.length===1){var u=arguments[0];return Pi.SIMPLE_ORDINATE_FORMAT.format(u)}},Pi.spaces=function(u){return Pi.chars(" ",u)},la.NEWLINE.get=function(){return ye.getProperty("line.separator")},la.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}},Object.defineProperties(Pi,la);var qt=function(){};qt.prototype.interfaces_=function(){return[]},qt.prototype.getClass=function(){return qt},qt.copyCoord=function(u,d,b,v){for(var S=Math.min(u.getDimension(),b.getDimension()),F=0;F<S;F++)b.setOrdinate(v,F,u.getOrdinate(d,F))},qt.isRing=function(u){var d=u.size();return d===0||!(d<=3)&&u.getOrdinate(0,Re.X)===u.getOrdinate(d-1,Re.X)&&u.getOrdinate(0,Re.Y)===u.getOrdinate(d-1,Re.Y)},qt.isEqual=function(u,d){var b=u.size();if(b!==d.size())return!1;for(var v=Math.min(u.getDimension(),d.getDimension()),S=0;S<b;S++)for(var F=0;F<v;F++){var G=u.getOrdinate(S,F),K=d.getOrdinate(S,F);if(u.getOrdinate(S,F)!==d.getOrdinate(S,F)&&(!R.isNaN(G)||!R.isNaN(K)))return!1}return!0},qt.extend=function(u,d,b){var v=u.create(b,d.getDimension()),S=d.size();if(qt.copy(d,0,v,0,S),S>0)for(var F=S;F<b;F++)qt.copy(d,S-1,v,F,1);return v},qt.reverse=function(u){for(var d=u.size()-1,b=Math.trunc(d/2),v=0;v<=b;v++)qt.swap(u,v,d-v)},qt.swap=function(u,d,b){if(d===b)return null;for(var v=0;v<u.getDimension();v++){var S=u.getOrdinate(d,v);u.setOrdinate(d,v,u.getOrdinate(b,v)),u.setOrdinate(b,v,S)}},qt.copy=function(u,d,b,v,S){for(var F=0;F<S;F++)qt.copyCoord(u,d+F,b,v+F)},qt.toString=function(){if(arguments.length===1){var u=arguments[0],d=u.size();if(d===0)return"()";var b=u.getDimension(),v=new xe;v.append("(");for(var S=0;S<d;S++){S>0&&v.append(" ");for(var F=0;F<b;F++)F>0&&v.append(","),v.append(Pi.toString(u.getOrdinate(S,F)))}return v.append(")"),v.toString()}},qt.ensureValidRing=function(u,d){var b=d.size();return b===0?d:b<=3?qt.createClosedRing(u,d,4):d.getOrdinate(0,Re.X)===d.getOrdinate(b-1,Re.X)&&d.getOrdinate(0,Re.Y)===d.getOrdinate(b-1,Re.Y)?d:qt.createClosedRing(u,d,b+1)},qt.createClosedRing=function(u,d,b){var v=u.create(b,d.getDimension()),S=d.size();qt.copy(d,0,v,0,S);for(var F=S;F<b;F++)qt.copy(d,0,v,F,1);return v};var Gt=function(u){function d(v,S){u.call(this,S),this._points=null,this.init(v)}u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d;var b={serialVersionUID:{configurable:!0}};return d.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Ce:this._points.expandEnvelope(new Ce)},d.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},d.prototype.getSortIndex=function(){return u.SORTINDEX_LINESTRING},d.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},d.prototype.equalsExact=function(){if(arguments.length===2){var v=arguments[0],S=arguments[1];if(!this.isEquivalentClass(v))return!1;var F=v;if(this._points.size()!==F._points.size())return!1;for(var G=0;G<this._points.size();G++)if(!this.equal(this._points.getCoordinate(G),F._points.getCoordinate(G),S))return!1;return!0}return u.prototype.equalsExact.apply(this,arguments)},d.prototype.normalize=function(){for(var v=0;v<Math.trunc(this._points.size()/2);v++){var S=this._points.size()-1-v;if(!this._points.getCoordinate(v).equals(this._points.getCoordinate(S)))return this._points.getCoordinate(v).compareTo(this._points.getCoordinate(S))>0&&qt.reverse(this._points),null}},d.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},d.prototype.getBoundaryDimension=function(){return this.isClosed()?nt.FALSE:0},d.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},d.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},d.prototype.getDimension=function(){return 1},d.prototype.getLength=function(){return Pe.computeLength(this._points)},d.prototype.getNumPoints=function(){return this._points.size()},d.prototype.reverse=function(){var v=this._points.copy();return qt.reverse(v),this.getFactory().createLineString(v)},d.prototype.compareToSameClass=function(){if(arguments.length===1){for(var v=arguments[0],S=0,F=0;S<this._points.size()&&F<v._points.size();){var G=this._points.getCoordinate(S).compareTo(v._points.getCoordinate(F));if(G!==0)return G;S++,F++}return S<this._points.size()?1:F<v._points.size()?-1:0}if(arguments.length===2){var K=arguments[0];return arguments[1].compare(this._points,K._points)}},d.prototype.apply=function(){if(q(arguments[0],Mt))for(var v=arguments[0],S=0;S<this._points.size();S++)v.filter(this._points.getCoordinate(S));else if(q(arguments[0],gi)){var F=arguments[0];if(this._points.size()===0)return null;for(var G=0;G<this._points.size()&&(F.filter(this._points,G),!F.isDone());G++);F.isGeometryChanged()&&this.geometryChanged()}else q(arguments[0],se)?arguments[0].filter(this):q(arguments[0],Ue)&&arguments[0].filter(this)},d.prototype.getBoundary=function(){return new Ci(this).getBoundary()},d.prototype.isEquivalentClass=function(v){return v instanceof d},d.prototype.clone=function(){var v=u.prototype.clone.call(this);return v._points=this._points.clone(),v},d.prototype.getCoordinateN=function(v){return this._points.getCoordinate(v)},d.prototype.getGeometryType=function(){return"LineString"},d.prototype.copy=function(){return new d(this._points.copy(),this._factory)},d.prototype.getCoordinateSequence=function(){return this._points},d.prototype.isEmpty=function(){return this._points.size()===0},d.prototype.init=function(v){if(v===null&&(v=this.getFactory().getCoordinateSequenceFactory().create([])),v.size()===1)throw new L("Invalid number of points in LineString (found "+v.size()+" - must be 0 or >= 2)");this._points=v},d.prototype.isCoordinate=function(v){for(var S=0;S<this._points.size();S++)if(this._points.getCoordinate(S).equals(v))return!0;return!1},d.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},d.prototype.getPointN=function(v){return this.getFactory().createPoint(this._points.getCoordinate(v))},d.prototype.interfaces_=function(){return[dt]},d.prototype.getClass=function(){return d},b.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(d,b),d}(qe),We=function(){};We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We};var Kt=function(u){function d(v,S){u.call(this,S),this._coordinates=v||null,this.init(this._coordinates)}u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d;var b={serialVersionUID:{configurable:!0}};return d.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Ce;var v=new Ce;return v.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),v},d.prototype.getSortIndex=function(){return u.SORTINDEX_POINT},d.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},d.prototype.equalsExact=function(){if(arguments.length===2){var v=arguments[0],S=arguments[1];return!!this.isEquivalentClass(v)&&(!(!this.isEmpty()||!v.isEmpty())||this.isEmpty()===v.isEmpty()&&this.equal(v.getCoordinate(),this.getCoordinate(),S))}return u.prototype.equalsExact.apply(this,arguments)},d.prototype.normalize=function(){},d.prototype.getCoordinate=function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},d.prototype.getBoundaryDimension=function(){return nt.FALSE},d.prototype.getDimension=function(){return 0},d.prototype.getNumPoints=function(){return this.isEmpty()?0:1},d.prototype.reverse=function(){return this.copy()},d.prototype.getX=function(){if(this.getCoordinate()===null)throw new Error("getX called on empty Point");return this.getCoordinate().x},d.prototype.compareToSameClass=function(){if(arguments.length===1){var v=arguments[0];return this.getCoordinate().compareTo(v.getCoordinate())}if(arguments.length===2){var S=arguments[0];return arguments[1].compare(this._coordinates,S._coordinates)}},d.prototype.apply=function(){if(q(arguments[0],Mt)){var v=arguments[0];if(this.isEmpty())return null;v.filter(this.getCoordinate())}else if(q(arguments[0],gi)){var S=arguments[0];if(this.isEmpty())return null;S.filter(this._coordinates,0),S.isGeometryChanged()&&this.geometryChanged()}else q(arguments[0],se)?arguments[0].filter(this):q(arguments[0],Ue)&&arguments[0].filter(this)},d.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},d.prototype.clone=function(){var v=u.prototype.clone.call(this);return v._coordinates=this._coordinates.clone(),v},d.prototype.getGeometryType=function(){return"Point"},d.prototype.copy=function(){return new d(this._coordinates.copy(),this._factory)},d.prototype.getCoordinateSequence=function(){return this._coordinates},d.prototype.getY=function(){if(this.getCoordinate()===null)throw new Error("getY called on empty Point");return this.getCoordinate().y},d.prototype.isEmpty=function(){return this._coordinates.size()===0},d.prototype.init=function(v){v===null&&(v=this.getFactory().getCoordinateSequenceFactory().create([])),j.isTrue(v.size()<=1),this._coordinates=v},d.prototype.isSimple=function(){return!0},d.prototype.interfaces_=function(){return[We]},d.prototype.getClass=function(){return d},b.serialVersionUID.get=function(){return 4902022702746615e3},Object.defineProperties(d,b),d}(qe),a0=function(){};a0.prototype.interfaces_=function(){return[]},a0.prototype.getClass=function(){return a0};var Ut=function(u){function d(v,S,F){if(u.call(this,F),this._shell=null,this._holes=null,v===null&&(v=this.getFactory().createLinearRing()),S===null&&(S=[]),u.hasNullElements(S))throw new L("holes must not contain null elements");if(v.isEmpty()&&u.hasNonEmptyElements(S))throw new L("shell is empty but holes are not");this._shell=v,this._holes=S}u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d;var b={serialVersionUID:{configurable:!0}};return d.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},d.prototype.getSortIndex=function(){return u.SORTINDEX_POLYGON},d.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var v=new Array(this.getNumPoints()).fill(null),S=-1,F=this._shell.getCoordinates(),G=0;G<F.length;G++)v[++S]=F[G];for(var K=0;K<this._holes.length;K++)for(var ue=this._holes[K].getCoordinates(),we=0;we<ue.length;we++)v[++S]=ue[we];return v},d.prototype.getArea=function(){var v=0;v+=Math.abs(Pe.signedArea(this._shell.getCoordinateSequence()));for(var S=0;S<this._holes.length;S++)v-=Math.abs(Pe.signedArea(this._holes[S].getCoordinateSequence()));return v},d.prototype.isRectangle=function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var v=this._shell.getCoordinateSequence(),S=this.getEnvelopeInternal(),F=0;F<5;F++){var G=v.getX(F);if(G!==S.getMinX()&&G!==S.getMaxX())return!1;var K=v.getY(F);if(K!==S.getMinY()&&K!==S.getMaxY())return!1}for(var ue=v.getX(0),we=v.getY(0),ke=1;ke<=4;ke++){var Ge=v.getX(ke),tt=v.getY(ke);if(Ge!==ue==(tt!==we))return!1;ue=Ge,we=tt}return!0},d.prototype.equalsExact=function(){if(arguments.length===2){var v=arguments[0],S=arguments[1];if(!this.isEquivalentClass(v))return!1;var F=v,G=this._shell,K=F._shell;if(!G.equalsExact(K,S)||this._holes.length!==F._holes.length)return!1;for(var ue=0;ue<this._holes.length;ue++)if(!this._holes[ue].equalsExact(F._holes[ue],S))return!1;return!0}return u.prototype.equalsExact.apply(this,arguments)},d.prototype.normalize=function(){if(arguments.length===0){this.normalize(this._shell,!0);for(var v=0;v<this._holes.length;v++)this.normalize(this._holes[v],!1);Ct.sort(this._holes)}else if(arguments.length===2){var S=arguments[0],F=arguments[1];if(S.isEmpty())return null;var G=new Array(S.getCoordinates().length-1).fill(null);ye.arraycopy(S.getCoordinates(),0,G,0,G.length);var K=Et.minCoordinate(S.getCoordinates());Et.scroll(G,K),ye.arraycopy(G,0,S.getCoordinates(),0,G.length),S.getCoordinates()[G.length]=G[0],Pe.isCCW(S.getCoordinates())===F&&Et.reverse(S.getCoordinates())}},d.prototype.getCoordinate=function(){return this._shell.getCoordinate()},d.prototype.getNumInteriorRing=function(){return this._holes.length},d.prototype.getBoundaryDimension=function(){return 1},d.prototype.getDimension=function(){return 2},d.prototype.getLength=function(){var v=0;v+=this._shell.getLength();for(var S=0;S<this._holes.length;S++)v+=this._holes[S].getLength();return v},d.prototype.getNumPoints=function(){for(var v=this._shell.getNumPoints(),S=0;S<this._holes.length;S++)v+=this._holes[S].getNumPoints();return v},d.prototype.reverse=function(){var v=this.copy();v._shell=this._shell.copy().reverse(),v._holes=new Array(this._holes.length).fill(null);for(var S=0;S<this._holes.length;S++)v._holes[S]=this._holes[S].copy().reverse();return v},d.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},d.prototype.compareToSameClass=function(){if(arguments.length===1){var v=arguments[0],S=this._shell,F=v._shell;return S.compareToSameClass(F)}if(arguments.length===2){var G=arguments[0],K=arguments[1],ue=G,we=this._shell,ke=ue._shell,Ge=we.compareToSameClass(ke,K);if(Ge!==0)return Ge;for(var tt=this.getNumInteriorRing(),it=ue.getNumInteriorRing(),ot=0;ot<tt&&ot<it;){var bt=this.getInteriorRingN(ot),Bt=ue.getInteriorRingN(ot),ii=bt.compareToSameClass(Bt,K);if(ii!==0)return ii;ot++}return ot<tt?1:ot<it?-1:0}},d.prototype.apply=function(v){if(q(v,Mt)){this._shell.apply(v);for(var S=0;S<this._holes.length;S++)this._holes[S].apply(v)}else if(q(v,gi)){if(this._shell.apply(v),!v.isDone())for(var F=0;F<this._holes.length&&(this._holes[F].apply(v),!v.isDone());F++);v.isGeometryChanged()&&this.geometryChanged()}else if(q(v,se))v.filter(this);else if(q(v,Ue)){v.filter(this),this._shell.apply(v);for(var G=0;G<this._holes.length;G++)this._holes[G].apply(v)}},d.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var v=new Array(this._holes.length+1).fill(null);v[0]=this._shell;for(var S=0;S<this._holes.length;S++)v[S+1]=this._holes[S];return v.length<=1?this.getFactory().createLinearRing(v[0].getCoordinateSequence()):this.getFactory().createMultiLineString(v)},d.prototype.clone=function(){var v=u.prototype.clone.call(this);v._shell=this._shell.clone(),v._holes=new Array(this._holes.length).fill(null);for(var S=0;S<this._holes.length;S++)v._holes[S]=this._holes[S].clone();return v},d.prototype.getGeometryType=function(){return"Polygon"},d.prototype.copy=function(){for(var v=this._shell.copy(),S=new Array(this._holes.length).fill(null),F=0;F<S.length;F++)S[F]=this._holes[F].copy();return new d(v,S,this._factory)},d.prototype.getExteriorRing=function(){return this._shell},d.prototype.isEmpty=function(){return this._shell.isEmpty()},d.prototype.getInteriorRingN=function(v){return this._holes[v]},d.prototype.interfaces_=function(){return[a0]},d.prototype.getClass=function(){return d},b.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(d,b),d}(qe),C0=function(u){function d(){u.apply(this,arguments)}u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d;var b={serialVersionUID:{configurable:!0}};return d.prototype.getSortIndex=function(){return qe.SORTINDEX_MULTIPOINT},d.prototype.isValid=function(){return!0},d.prototype.equalsExact=function(){if(arguments.length===2){var v=arguments[0],S=arguments[1];return!!this.isEquivalentClass(v)&&u.prototype.equalsExact.call(this,v,S)}return u.prototype.equalsExact.apply(this,arguments)},d.prototype.getCoordinate=function(){if(arguments.length===1){var v=arguments[0];return this._geometries[v].getCoordinate()}return u.prototype.getCoordinate.apply(this,arguments)},d.prototype.getBoundaryDimension=function(){return nt.FALSE},d.prototype.getDimension=function(){return 0},d.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},d.prototype.getGeometryType=function(){return"MultiPoint"},d.prototype.copy=function(){for(var v=new Array(this._geometries.length).fill(null),S=0;S<v.length;S++)v[S]=this._geometries[S].copy();return new d(v,this._factory)},d.prototype.interfaces_=function(){return[We]},d.prototype.getClass=function(){return d},b.serialVersionUID.get=function(){return-8048474874175356e3},Object.defineProperties(d,b),d}(si),Wi=function(u){function d(v,S){v instanceof $&&S instanceof et&&(v=S.getCoordinateSequenceFactory().create(v)),u.call(this,v,S),this.validateConstruction()}u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d;var b={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return d.prototype.getSortIndex=function(){return qe.SORTINDEX_LINEARRING},d.prototype.getBoundaryDimension=function(){return nt.FALSE},d.prototype.isClosed=function(){return!!this.isEmpty()||u.prototype.isClosed.call(this)},d.prototype.reverse=function(){var v=this._points.copy();return qt.reverse(v),this.getFactory().createLinearRing(v)},d.prototype.validateConstruction=function(){if(!this.isEmpty()&&!u.prototype.isClosed.call(this))throw new L("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<d.MINIMUM_VALID_SIZE)throw new L("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},d.prototype.getGeometryType=function(){return"LinearRing"},d.prototype.copy=function(){return new d(this._points.copy(),this._factory)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},b.MINIMUM_VALID_SIZE.get=function(){return 4},b.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(d,b),d}(Gt),ae=function(u){function d(){u.apply(this,arguments)}u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d;var b={serialVersionUID:{configurable:!0}};return d.prototype.getSortIndex=function(){return qe.SORTINDEX_MULTIPOLYGON},d.prototype.equalsExact=function(){if(arguments.length===2){var v=arguments[0],S=arguments[1];return!!this.isEquivalentClass(v)&&u.prototype.equalsExact.call(this,v,S)}return u.prototype.equalsExact.apply(this,arguments)},d.prototype.getBoundaryDimension=function(){return 1},d.prototype.getDimension=function(){return 2},d.prototype.reverse=function(){for(var v=this._geometries.length,S=new Array(v).fill(null),F=0;F<this._geometries.length;F++)S[F]=this._geometries[F].reverse();return this.getFactory().createMultiPolygon(S)},d.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var v=new Xe,S=0;S<this._geometries.length;S++)for(var F=this._geometries[S].getBoundary(),G=0;G<F.getNumGeometries();G++)v.add(F.getGeometryN(G));var K=new Array(v.size()).fill(null);return this.getFactory().createMultiLineString(v.toArray(K))},d.prototype.getGeometryType=function(){return"MultiPolygon"},d.prototype.copy=function(){for(var v=new Array(this._geometries.length).fill(null),S=0;S<v.length;S++)v[S]=this._geometries[S].copy();return new d(v,this._factory)},d.prototype.interfaces_=function(){return[a0]},d.prototype.getClass=function(){return d},b.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(d,b),d}(si),_e=function(u){this._factory=u||null,this._isUserDataCopied=!1},je={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};_e.prototype.setCopyUserData=function(u){this._isUserDataCopied=u},_e.prototype.edit=function(u,d){if(u===null)return null;var b=this.editInternal(u,d);return this._isUserDataCopied&&b.setUserData(u.getUserData()),b},_e.prototype.editInternal=function(u,d){return this._factory===null&&(this._factory=u.getFactory()),u instanceof si?this.editGeometryCollection(u,d):u instanceof Ut?this.editPolygon(u,d):u instanceof Kt?d.edit(u,this._factory):u instanceof Gt?d.edit(u,this._factory):(j.shouldNeverReachHere("Unsupported Geometry class: "+u.getClass().getName()),null)},_e.prototype.editGeometryCollection=function(u,d){for(var b=d.edit(u,this._factory),v=new Xe,S=0;S<b.getNumGeometries();S++){var F=this.edit(b.getGeometryN(S),d);F===null||F.isEmpty()||v.add(F)}return b.getClass()===C0?this._factory.createMultiPoint(v.toArray([])):b.getClass()===u0?this._factory.createMultiLineString(v.toArray([])):b.getClass()===ae?this._factory.createMultiPolygon(v.toArray([])):this._factory.createGeometryCollection(v.toArray([]))},_e.prototype.editPolygon=function(u,d){var b=d.edit(u,this._factory);if(b===null&&(b=this._factory.createPolygon(null)),b.isEmpty())return b;var v=this.edit(b.getExteriorRing(),d);if(v===null||v.isEmpty())return this._factory.createPolygon();for(var S=new Xe,F=0;F<b.getNumInteriorRing();F++){var G=this.edit(b.getInteriorRingN(F),d);G===null||G.isEmpty()||S.add(G)}return this._factory.createPolygon(v,S.toArray([]))},_e.prototype.interfaces_=function(){return[]},_e.prototype.getClass=function(){return _e},_e.GeometryEditorOperation=function(){},je.NoOpGeometryOperation.get=function(){return Ze},je.CoordinateOperation.get=function(){return Qe},je.CoordinateSequenceOperation.get=function(){return Ye},Object.defineProperties(_e,je);var Ze=function(){};Ze.prototype.edit=function(u,d){return u},Ze.prototype.interfaces_=function(){return[_e.GeometryEditorOperation]},Ze.prototype.getClass=function(){return Ze};var Qe=function(){};Qe.prototype.edit=function(u,d){var b=this.editCoordinates(u.getCoordinates(),u);return b===null?u:u instanceof Wi?d.createLinearRing(b):u instanceof Gt?d.createLineString(b):u instanceof Kt?b.length>0?d.createPoint(b[0]):d.createPoint():u},Qe.prototype.interfaces_=function(){return[_e.GeometryEditorOperation]},Qe.prototype.getClass=function(){return Qe};var Ye=function(){};Ye.prototype.edit=function(u,d){return u instanceof Wi?d.createLinearRing(this.edit(u.getCoordinateSequence(),u)):u instanceof Gt?d.createLineString(this.edit(u.getCoordinateSequence(),u)):u instanceof Kt?d.createPoint(this.edit(u.getCoordinateSequence(),u)):u},Ye.prototype.interfaces_=function(){return[_e.GeometryEditorOperation]},Ye.prototype.getClass=function(){return Ye};var pe=function(){if(this._dimension=3,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var u=arguments[0];this._coordinates=new Array(u).fill(null);for(var d=0;d<u;d++)this._coordinates[d]=new $}else if(q(arguments[0],Re)){var b=arguments[0];if(b===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=b.getDimension(),this._coordinates=new Array(b.size()).fill(null);for(var v=0;v<this._coordinates.length;v++)this._coordinates[v]=b.getCoordinateCopy(v)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var S=arguments[0],F=arguments[1];this._coordinates=S,this._dimension=F,S===null&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var G=arguments[0],K=arguments[1];this._coordinates=new Array(G).fill(null),this._dimension=K;for(var ue=0;ue<G;ue++)this._coordinates[ue]=new $}}},at={serialVersionUID:{configurable:!0}};pe.prototype.setOrdinate=function(u,d,b){switch(d){case Re.X:this._coordinates[u].x=b;break;case Re.Y:this._coordinates[u].y=b;break;case Re.Z:this._coordinates[u].z=b;break;default:throw new L("invalid ordinateIndex")}},pe.prototype.size=function(){return this._coordinates.length},pe.prototype.getOrdinate=function(u,d){switch(d){case Re.X:return this._coordinates[u].x;case Re.Y:return this._coordinates[u].y;case Re.Z:return this._coordinates[u].z}return R.NaN},pe.prototype.getCoordinate=function(){if(arguments.length===1){var u=arguments[0];return this._coordinates[u]}if(arguments.length===2){var d=arguments[0],b=arguments[1];b.x=this._coordinates[d].x,b.y=this._coordinates[d].y,b.z=this._coordinates[d].z}},pe.prototype.getCoordinateCopy=function(u){return new $(this._coordinates[u])},pe.prototype.getDimension=function(){return this._dimension},pe.prototype.getX=function(u){return this._coordinates[u].x},pe.prototype.clone=function(){for(var u=new Array(this.size()).fill(null),d=0;d<this._coordinates.length;d++)u[d]=this._coordinates[d].clone();return new pe(u,this._dimension)},pe.prototype.expandEnvelope=function(u){for(var d=0;d<this._coordinates.length;d++)u.expandToInclude(this._coordinates[d]);return u},pe.prototype.copy=function(){for(var u=new Array(this.size()).fill(null),d=0;d<this._coordinates.length;d++)u[d]=this._coordinates[d].copy();return new pe(u,this._dimension)},pe.prototype.toString=function(){if(this._coordinates.length>0){var u=new xe(17*this._coordinates.length);u.append("("),u.append(this._coordinates[0]);for(var d=1;d<this._coordinates.length;d++)u.append(", "),u.append(this._coordinates[d]);return u.append(")"),u.toString()}return"()"},pe.prototype.getY=function(u){return this._coordinates[u].y},pe.prototype.toCoordinateArray=function(){return this._coordinates},pe.prototype.interfaces_=function(){return[Re,i]},pe.prototype.getClass=function(){return pe},at.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(pe,at);var He=function(){},ne={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};He.prototype.readResolve=function(){return He.instance()},He.prototype.create=function(){if(arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];return new pe(u)}if(q(arguments[0],Re)){var d=arguments[0];return new pe(d)}}else if(arguments.length===2){var b=arguments[0],v=arguments[1];return v>3&&(v=3),v<2?new pe(b):new pe(b,v)}},He.prototype.interfaces_=function(){return[J,i]},He.prototype.getClass=function(){return He},He.instance=function(){return He.instanceObject},ne.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},ne.instanceObject.get=function(){return new He},Object.defineProperties(He,ne);var ve=function(u){function d(){u.call(this),this.map_=new Map}return u&&(d.__proto__=u),d.prototype=Object.create(u&&u.prototype),d.prototype.constructor=d,d.prototype.get=function(b){return this.map_.get(b)||null},d.prototype.put=function(b,v){return this.map_.set(b,v),v},d.prototype.values=function(){for(var b=new Xe,v=this.map_.values(),S=v.next();!S.done;)b.add(S.value),S=v.next();return b},d.prototype.entrySet=function(){var b=new st;return this.map_.entries().forEach(function(v){return b.add(v)}),b},d.prototype.size=function(){return this.map_.size()},d}(Ui),ge=function u(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=u.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof Me){var d=arguments[0];this._modelType=d,d===u.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var b=arguments[0];this._modelType=u.FIXED,this.setScale(b)}else if(arguments[0]instanceof u){var v=arguments[0];this._modelType=v._modelType,this._scale=v._scale}}},Le={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};ge.prototype.equals=function(u){if(!(u instanceof ge))return!1;var d=u;return this._modelType===d._modelType&&this._scale===d._scale},ge.prototype.compareTo=function(u){var d=u,b=this.getMaximumSignificantDigits(),v=d.getMaximumSignificantDigits();return new oe(b).compareTo(new oe(v))},ge.prototype.getScale=function(){return this._scale},ge.prototype.isFloating=function(){return this._modelType===ge.FLOATING||this._modelType===ge.FLOATING_SINGLE},ge.prototype.getType=function(){return this._modelType},ge.prototype.toString=function(){var u="UNKNOWN";return this._modelType===ge.FLOATING?u="Floating":this._modelType===ge.FLOATING_SINGLE?u="Floating-Single":this._modelType===ge.FIXED&&(u="Fixed (Scale="+this.getScale()+")"),u},ge.prototype.makePrecise=function(){if(typeof arguments[0]=="number"){var u=arguments[0];return R.isNaN(u)||this._modelType===ge.FLOATING_SINGLE?u:this._modelType===ge.FIXED?Math.round(u*this._scale)/this._scale:u}if(arguments[0]instanceof $){var d=arguments[0];if(this._modelType===ge.FLOATING)return null;d.x=this.makePrecise(d.x),d.y=this.makePrecise(d.y)}},ge.prototype.getMaximumSignificantDigits=function(){var u=16;return this._modelType===ge.FLOATING?u=16:this._modelType===ge.FLOATING_SINGLE?u=6:this._modelType===ge.FIXED&&(u=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),u},ge.prototype.setScale=function(u){this._scale=Math.abs(u)},ge.prototype.interfaces_=function(){return[i,N]},ge.prototype.getClass=function(){return ge},ge.mostPrecise=function(u,d){return u.compareTo(d)>=0?u:d},Le.serialVersionUID.get=function(){return 7777263578777804e3},Le.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(ge,Le);var Me=function u(d){this._name=d||null,u.nameToTypeMap.put(d,this)},R0={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Me.prototype.readResolve=function(){return Me.nameToTypeMap.get(this._name)},Me.prototype.toString=function(){return this._name},Me.prototype.interfaces_=function(){return[i]},Me.prototype.getClass=function(){return Me},R0.serialVersionUID.get=function(){return-552860263173159e4},R0.nameToTypeMap.get=function(){return new ve},Object.defineProperties(Me,R0),ge.Type=Me,ge.FIXED=new Me("FIXED"),ge.FLOATING=new Me("FLOATING"),ge.FLOATING_SINGLE=new Me("FLOATING SINGLE");var et=function u(){this._precisionModel=new ge,this._SRID=0,this._coordinateSequenceFactory=u.getDefaultCoordinateSequenceFactory(),arguments.length===0||(arguments.length===1?q(arguments[0],J)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof ge&&(this._precisionModel=arguments[0]):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},ua={serialVersionUID:{configurable:!0}};et.prototype.toGeometry=function(u){return u.isNull()?this.createPoint(null):u.getMinX()===u.getMaxX()&&u.getMinY()===u.getMaxY()?this.createPoint(new $(u.getMinX(),u.getMinY())):u.getMinX()===u.getMaxX()||u.getMinY()===u.getMaxY()?this.createLineString([new $(u.getMinX(),u.getMinY()),new $(u.getMaxX(),u.getMaxY())]):this.createPolygon(this.createLinearRing([new $(u.getMinX(),u.getMinY()),new $(u.getMinX(),u.getMaxY()),new $(u.getMaxX(),u.getMaxY()),new $(u.getMaxX(),u.getMinY()),new $(u.getMinX(),u.getMinY())]),null)},et.prototype.createLineString=function(u){return u?u instanceof Array?new Gt(this.getCoordinateSequenceFactory().create(u),this):q(u,Re)?new Gt(u,this):void 0:new Gt(this.getCoordinateSequenceFactory().create([]),this)},et.prototype.createMultiLineString=function(){if(arguments.length===0)return new u0(null,this);if(arguments.length===1){var u=arguments[0];return new u0(u,this)}},et.prototype.buildGeometry=function(u){for(var d=null,b=!1,v=!1,S=u.iterator();S.hasNext();){var F=S.next(),G=F.getClass();d===null&&(d=G),G!==d&&(b=!0),F.isGeometryCollectionOrDerived()&&(v=!0)}if(d===null)return this.createGeometryCollection();if(b||v)return this.createGeometryCollection(et.toGeometryArray(u));var K=u.iterator().next();if(u.size()>1){if(K instanceof Ut)return this.createMultiPolygon(et.toPolygonArray(u));if(K instanceof Gt)return this.createMultiLineString(et.toLineStringArray(u));if(K instanceof Kt)return this.createMultiPoint(et.toPointArray(u));j.shouldNeverReachHere("Unhandled class: "+K.getClass().getName())}return K},et.prototype.createMultiPointFromCoords=function(u){return this.createMultiPoint(u!==null?this.getCoordinateSequenceFactory().create(u):null)},et.prototype.createPoint=function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof $){var u=arguments[0];return this.createPoint(u!==null?this.getCoordinateSequenceFactory().create([u]):null)}if(q(arguments[0],Re)){var d=arguments[0];return new Kt(d,this)}}},et.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},et.prototype.createPolygon=function(){if(arguments.length===0)return new Ut(null,null,this);if(arguments.length===1){if(q(arguments[0],Re)){var u=arguments[0];return this.createPolygon(this.createLinearRing(u))}if(arguments[0]instanceof Array){var d=arguments[0];return this.createPolygon(this.createLinearRing(d))}if(arguments[0]instanceof Wi){var b=arguments[0];return this.createPolygon(b,null)}}else if(arguments.length===2){var v=arguments[0],S=arguments[1];return new Ut(v,S,this)}},et.prototype.getSRID=function(){return this._SRID},et.prototype.createGeometryCollection=function(){if(arguments.length===0)return new si(null,this);if(arguments.length===1){var u=arguments[0];return new si(u,this)}},et.prototype.createGeometry=function(u){return new _e(this).edit(u,{edit:function(){if(arguments.length===2){var d=arguments[0];return this._coordinateSequenceFactory.create(d)}}})},et.prototype.getPrecisionModel=function(){return this._precisionModel},et.prototype.createLinearRing=function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];return this.createLinearRing(u!==null?this.getCoordinateSequenceFactory().create(u):null)}if(q(arguments[0],Re)){var d=arguments[0];return new Wi(d,this)}}},et.prototype.createMultiPolygon=function(){if(arguments.length===0)return new ae(null,this);if(arguments.length===1){var u=arguments[0];return new ae(u,this)}},et.prototype.createMultiPoint=function(){if(arguments.length===0)return new C0(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];return new C0(u,this)}if(arguments[0]instanceof Array){var d=arguments[0];return this.createMultiPoint(d!==null?this.getCoordinateSequenceFactory().create(d):null)}if(q(arguments[0],Re)){var b=arguments[0];if(b===null)return this.createMultiPoint(new Array(0).fill(null));for(var v=new Array(b.size()).fill(null),S=0;S<b.size();S++){var F=this.getCoordinateSequenceFactory().create(1,b.getDimension());qt.copy(b,S,F,0,1),v[S]=this.createPoint(F)}return this.createMultiPoint(v)}}},et.prototype.interfaces_=function(){return[i]},et.prototype.getClass=function(){return et},et.toMultiPolygonArray=function(u){var d=new Array(u.size()).fill(null);return u.toArray(d)},et.toGeometryArray=function(u){if(u===null)return null;var d=new Array(u.size()).fill(null);return u.toArray(d)},et.getDefaultCoordinateSequenceFactory=function(){return He.instance()},et.toMultiLineStringArray=function(u){var d=new Array(u.size()).fill(null);return u.toArray(d)},et.toLineStringArray=function(u){var d=new Array(u.size()).fill(null);return u.toArray(d)},et.toMultiPointArray=function(u){var d=new Array(u.size()).fill(null);return u.toArray(d)},et.toLinearRingArray=function(u){var d=new Array(u.size()).fill(null);return u.toArray(d)},et.toPointArray=function(u){var d=new Array(u.size()).fill(null);return u.toArray(d)},et.toPolygonArray=function(u){var d=new Array(u.size()).fill(null);return u.toArray(d)},et.createPointFromInternalCoord=function(u,d){return d.getPrecisionModel().makePrecise(u),d.getFactory().createPoint(u)},ua.serialVersionUID.get=function(){return-6820524753094096e3},Object.defineProperties(et,ua);var Pt=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],mt=function(u){this.geometryFactory=u||new et};mt.prototype.read=function(u){var d,b=(d=typeof u=="string"?JSON.parse(u):u).type;if(!_t[b])throw new Error("Unknown GeoJSON type: "+d.type);return Pt.indexOf(b)!==-1?_t[b].apply(this,[d.coordinates]):b==="GeometryCollection"?_t[b].apply(this,[d.geometries]):_t[b].apply(this,[d])},mt.prototype.write=function(u){var d=u.getGeometryType();if(!lt[d])throw new Error("Geometry is not supported");return lt[d].apply(this,[u])};var _t={Feature:function(u){var d={};for(var b in u)d[b]=u[b];if(u.geometry){var v=u.geometry.type;if(!_t[v])throw new Error("Unknown GeoJSON type: "+u.type);d.geometry=this.read(u.geometry)}return u.bbox&&(d.bbox=_t.bbox.apply(this,[u.bbox])),d},FeatureCollection:function(u){var d={};if(u.features){d.features=[];for(var b=0;b<u.features.length;++b)d.features.push(this.read(u.features[b]))}return u.bbox&&(d.bbox=this.parse.bbox.apply(this,[u.bbox])),d},coordinates:function(u){for(var d=[],b=0;b<u.length;++b){var v=u[b];d.push(new $(v[0],v[1]))}return d},bbox:function(u){return this.geometryFactory.createLinearRing([new $(u[0],u[1]),new $(u[2],u[1]),new $(u[2],u[3]),new $(u[0],u[3]),new $(u[0],u[1])])},Point:function(u){var d=new $(u[0],u[1]);return this.geometryFactory.createPoint(d)},MultiPoint:function(u){for(var d=[],b=0;b<u.length;++b)d.push(_t.Point.apply(this,[u[b]]));return this.geometryFactory.createMultiPoint(d)},LineString:function(u){var d=_t.coordinates.apply(this,[u]);return this.geometryFactory.createLineString(d)},MultiLineString:function(u){for(var d=[],b=0;b<u.length;++b)d.push(_t.LineString.apply(this,[u[b]]));return this.geometryFactory.createMultiLineString(d)},Polygon:function(u){for(var d=_t.coordinates.apply(this,[u[0]]),b=this.geometryFactory.createLinearRing(d),v=[],S=1;S<u.length;++S){var F=u[S],G=_t.coordinates.apply(this,[F]),K=this.geometryFactory.createLinearRing(G);v.push(K)}return this.geometryFactory.createPolygon(b,v)},MultiPolygon:function(u){for(var d=[],b=0;b<u.length;++b){var v=u[b];d.push(_t.Polygon.apply(this,[v]))}return this.geometryFactory.createMultiPolygon(d)},GeometryCollection:function(u){for(var d=[],b=0;b<u.length;++b){var v=u[b];d.push(this.read(v))}return this.geometryFactory.createGeometryCollection(d)}},lt={coordinate:function(u){return[u.x,u.y]},Point:function(u){return{type:"Point",coordinates:lt.coordinate.apply(this,[u.getCoordinate()])}},MultiPoint:function(u){for(var d=[],b=0;b<u._geometries.length;++b){var v=u._geometries[b],S=lt.Point.apply(this,[v]);d.push(S.coordinates)}return{type:"MultiPoint",coordinates:d}},LineString:function(u){for(var d=[],b=u.getCoordinates(),v=0;v<b.length;++v){var S=b[v];d.push(lt.coordinate.apply(this,[S]))}return{type:"LineString",coordinates:d}},MultiLineString:function(u){for(var d=[],b=0;b<u._geometries.length;++b){var v=u._geometries[b],S=lt.LineString.apply(this,[v]);d.push(S.coordinates)}return{type:"MultiLineString",coordinates:d}},Polygon:function(u){var d=[],b=lt.LineString.apply(this,[u._shell]);d.push(b.coordinates);for(var v=0;v<u._holes.length;++v){var S=u._holes[v],F=lt.LineString.apply(this,[S]);d.push(F.coordinates)}return{type:"Polygon",coordinates:d}},MultiPolygon:function(u){for(var d=[],b=0;b<u._geometries.length;++b){var v=u._geometries[b],S=lt.Polygon.apply(this,[v]);d.push(S.coordinates)}return{type:"MultiPolygon",coordinates:d}},GeometryCollection:function(u){for(var d=[],b=0;b<u._geometries.length;++b){var v=u._geometries[b],S=v.getGeometryType();d.push(lt[S].apply(this,[v]))}return{type:"GeometryCollection",geometries:d}}},gt=function(u){this.geometryFactory=u||new et,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new mt(this.geometryFactory)};gt.prototype.read=function(u){var d=this.parser.read(u);return this.precisionModel.getType()===ge.FIXED&&this.reducePrecision(d),d},gt.prototype.reducePrecision=function(u){var d,b;if(u.coordinate)this.precisionModel.makePrecise(u.coordinate);else if(u.points)for(d=0,b=u.points.length;d<b;d++)this.precisionModel.makePrecise(u.points[d]);else if(u.geometries)for(d=0,b=u.geometries.length;d<b;d++)this.reducePrecision(u.geometries[d])};var wt=function(){this.parser=new mt(this.geometryFactory)};wt.prototype.write=function(u){return this.parser.write(u)};var $e=function(){},yt={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};$e.prototype.interfaces_=function(){return[]},$e.prototype.getClass=function(){return $e},$e.opposite=function(u){return u===$e.LEFT?$e.RIGHT:u===$e.RIGHT?$e.LEFT:u},yt.ON.get=function(){return 0},yt.LEFT.get=function(){return 1},yt.RIGHT.get=function(){return 2},Object.defineProperties($e,yt),(w.prototype=new Error).name="EmptyStackException",(M.prototype=new Zt).add=function(u){return this.array_.push(u),!0},M.prototype.get=function(u){if(u<0||u>=this.size())throw new Error;return this.array_[u]},M.prototype.push=function(u){return this.array_.push(u),u},M.prototype.pop=function(u){if(this.array_.length===0)throw new w;return this.array_.pop()},M.prototype.peek=function(){if(this.array_.length===0)throw new w;return this.array_[this.array_.length-1]},M.prototype.empty=function(){return this.array_.length===0},M.prototype.isEmpty=function(){return this.empty()},M.prototype.search=function(u){return this.array_.indexOf(u)},M.prototype.size=function(){return this.array_.length},M.prototype.toArray=function(){for(var u=[],d=0,b=this.array_.length;d<b;d++)u.push(this.array_[d]);return u};var Ne=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Ne.prototype.getCoordinate=function(){return this._minCoord},Ne.prototype.getRightmostSide=function(u,d){var b=this.getRightmostSideOfSegment(u,d);return b<0&&(b=this.getRightmostSideOfSegment(u,d-1)),b<0&&(this._minCoord=null,this.checkForRightmostCoordinate(u)),b},Ne.prototype.findRightmostEdgeAtVertex=function(){var u=this._minDe.getEdge().getCoordinates();j.isTrue(this._minIndex>0&&this._minIndex<u.length,"rightmost point expected to be interior vertex of edge");var d=u[this._minIndex-1],b=u[this._minIndex+1],v=Pe.computeOrientation(this._minCoord,b,d),S=!1;(d.y<this._minCoord.y&&b.y<this._minCoord.y&&v===Pe.COUNTERCLOCKWISE||d.y>this._minCoord.y&&b.y>this._minCoord.y&&v===Pe.CLOCKWISE)&&(S=!0),S&&(this._minIndex=this._minIndex-1)},Ne.prototype.getRightmostSideOfSegment=function(u,d){var b=u.getEdge().getCoordinates();if(d<0||d+1>=b.length||b[d].y===b[d+1].y)return-1;var v=$e.LEFT;return b[d].y<b[d+1].y&&(v=$e.RIGHT),v},Ne.prototype.getEdge=function(){return this._orientedDe},Ne.prototype.checkForRightmostCoordinate=function(u){for(var d=u.getEdge().getCoordinates(),b=0;b<d.length-1;b++)(this._minCoord===null||d[b].x>this._minCoord.x)&&(this._minDe=u,this._minIndex=b,this._minCoord=d[b])},Ne.prototype.findRightmostEdgeAtNode=function(){var u=this._minDe.getNode().getEdges();this._minDe=u.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Ne.prototype.findEdge=function(u){for(var d=u.iterator();d.hasNext();){var b=d.next();b.isForward()&&this.checkForRightmostCoordinate(b)}j.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===$e.LEFT&&(this._orientedDe=this._minDe.getSym())},Ne.prototype.interfaces_=function(){return[]},Ne.prototype.getClass=function(){return Ne};var h0=function(u){function d(b,v){u.call(this,d.msgWithCoord(b,v)),this.pt=v?new $(v):null,this.name="TopologyException"}return u&&(d.__proto__=u),d.prototype=Object.create(u&&u.prototype),d.prototype.constructor=d,d.prototype.getCoordinate=function(){return this.pt},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d.msgWithCoord=function(b,v){return v?b:b+" [ "+v+" ]"},d}(le),Ma=function(){this.array_=[]};Ma.prototype.addLast=function(u){this.array_.push(u)},Ma.prototype.removeFirst=function(){return this.array_.shift()},Ma.prototype.isEmpty=function(){return this.array_.length===0};var ni=function(){this._finder=null,this._dirEdgeList=new Xe,this._nodes=new Xe,this._rightMostCoord=null,this._env=null,this._finder=new Ne};ni.prototype.clearVisitedEdges=function(){for(var u=this._dirEdgeList.iterator();u.hasNext();)u.next().setVisited(!1)},ni.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},ni.prototype.computeNodeDepth=function(u){for(var d=null,b=u.getEdges().iterator();b.hasNext();){var v=b.next();if(v.isVisited()||v.getSym().isVisited()){d=v;break}}if(d===null)throw new h0("unable to find edge to compute depths at "+u.getCoordinate());u.getEdges().computeDepths(d);for(var S=u.getEdges().iterator();S.hasNext();){var F=S.next();F.setVisited(!0),this.copySymDepths(F)}},ni.prototype.computeDepth=function(u){this.clearVisitedEdges();var d=this._finder.getEdge();d.setEdgeDepths($e.RIGHT,u),this.copySymDepths(d),this.computeDepths(d)},ni.prototype.create=function(u){this.addReachable(u),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},ni.prototype.findResultEdges=function(){for(var u=this._dirEdgeList.iterator();u.hasNext();){var d=u.next();d.getDepth($e.RIGHT)>=1&&d.getDepth($e.LEFT)<=0&&!d.isInteriorAreaEdge()&&d.setInResult(!0)}},ni.prototype.computeDepths=function(u){var d=new st,b=new Ma,v=u.getNode();for(b.addLast(v),d.add(v),u.setVisited(!0);!b.isEmpty();){var S=b.removeFirst();d.add(S),this.computeNodeDepth(S);for(var F=S.getEdges().iterator();F.hasNext();){var G=F.next().getSym();if(!G.isVisited()){var K=G.getNode();d.contains(K)||(b.addLast(K),d.add(K))}}}},ni.prototype.compareTo=function(u){var d=u;return this._rightMostCoord.x<d._rightMostCoord.x?-1:this._rightMostCoord.x>d._rightMostCoord.x?1:0},ni.prototype.getEnvelope=function(){if(this._env===null){for(var u=new Ce,d=this._dirEdgeList.iterator();d.hasNext();)for(var b=d.next().getEdge().getCoordinates(),v=0;v<b.length-1;v++)u.expandToInclude(b[v]);this._env=u}return this._env},ni.prototype.addReachable=function(u){var d=new M;for(d.add(u);!d.empty();){var b=d.pop();this.add(b,d)}},ni.prototype.copySymDepths=function(u){var d=u.getSym();d.setDepth($e.LEFT,u.getDepth($e.RIGHT)),d.setDepth($e.RIGHT,u.getDepth($e.LEFT))},ni.prototype.add=function(u,d){u.setVisited(!0),this._nodes.add(u);for(var b=u.getEdges().iterator();b.hasNext();){var v=b.next();this._dirEdgeList.add(v);var S=v.getSym().getNode();S.isVisited()||d.push(S)}},ni.prototype.getNodes=function(){return this._nodes},ni.prototype.getDirectedEdges=function(){return this._dirEdgeList},ni.prototype.interfaces_=function(){return[N]},ni.prototype.getClass=function(){return ni};var Ht=function u(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var d=arguments[0];this.init(d.length)}else if(Number.isInteger(arguments[0])){var b=arguments[0];this.init(1),this.location[$e.ON]=b}else if(arguments[0]instanceof u){var v=arguments[0];if(this.init(v.location.length),v!==null)for(var S=0;S<this.location.length;S++)this.location[S]=v.location[S]}}else if(arguments.length===3){var F=arguments[0],G=arguments[1],K=arguments[2];this.init(3),this.location[$e.ON]=F,this.location[$e.LEFT]=G,this.location[$e.RIGHT]=K}};Ht.prototype.setAllLocations=function(u){for(var d=0;d<this.location.length;d++)this.location[d]=u},Ht.prototype.isNull=function(){for(var u=0;u<this.location.length;u++)if(this.location[u]!==z.NONE)return!1;return!0},Ht.prototype.setAllLocationsIfNull=function(u){for(var d=0;d<this.location.length;d++)this.location[d]===z.NONE&&(this.location[d]=u)},Ht.prototype.isLine=function(){return this.location.length===1},Ht.prototype.merge=function(u){if(u.location.length>this.location.length){var d=new Array(3).fill(null);d[$e.ON]=this.location[$e.ON],d[$e.LEFT]=z.NONE,d[$e.RIGHT]=z.NONE,this.location=d}for(var b=0;b<this.location.length;b++)this.location[b]===z.NONE&&b<u.location.length&&(this.location[b]=u.location[b])},Ht.prototype.getLocations=function(){return this.location},Ht.prototype.flip=function(){if(this.location.length<=1)return null;var u=this.location[$e.LEFT];this.location[$e.LEFT]=this.location[$e.RIGHT],this.location[$e.RIGHT]=u},Ht.prototype.toString=function(){var u=new xe;return this.location.length>1&&u.append(z.toLocationSymbol(this.location[$e.LEFT])),u.append(z.toLocationSymbol(this.location[$e.ON])),this.location.length>1&&u.append(z.toLocationSymbol(this.location[$e.RIGHT])),u.toString()},Ht.prototype.setLocations=function(u,d,b){this.location[$e.ON]=u,this.location[$e.LEFT]=d,this.location[$e.RIGHT]=b},Ht.prototype.get=function(u){return u<this.location.length?this.location[u]:z.NONE},Ht.prototype.isArea=function(){return this.location.length>1},Ht.prototype.isAnyNull=function(){for(var u=0;u<this.location.length;u++)if(this.location[u]===z.NONE)return!0;return!1},Ht.prototype.setLocation=function(){if(arguments.length===1){var u=arguments[0];this.setLocation($e.ON,u)}else if(arguments.length===2){var d=arguments[0],b=arguments[1];this.location[d]=b}},Ht.prototype.init=function(u){this.location=new Array(u).fill(null),this.setAllLocations(z.NONE)},Ht.prototype.isEqualOnSide=function(u,d){return this.location[d]===u.location[d]},Ht.prototype.allPositionsEqual=function(u){for(var d=0;d<this.location.length;d++)if(this.location[d]!==u)return!1;return!0},Ht.prototype.interfaces_=function(){return[]},Ht.prototype.getClass=function(){return Ht};var $t=function u(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var d=arguments[0];this.elt[0]=new Ht(d),this.elt[1]=new Ht(d)}else if(arguments[0]instanceof u){var b=arguments[0];this.elt[0]=new Ht(b.elt[0]),this.elt[1]=new Ht(b.elt[1])}}else if(arguments.length===2){var v=arguments[0],S=arguments[1];this.elt[0]=new Ht(z.NONE),this.elt[1]=new Ht(z.NONE),this.elt[v].setLocation(S)}else if(arguments.length===3){var F=arguments[0],G=arguments[1],K=arguments[2];this.elt[0]=new Ht(F,G,K),this.elt[1]=new Ht(F,G,K)}else if(arguments.length===4){var ue=arguments[0],we=arguments[1],ke=arguments[2],Ge=arguments[3];this.elt[0]=new Ht(z.NONE,z.NONE,z.NONE),this.elt[1]=new Ht(z.NONE,z.NONE,z.NONE),this.elt[ue].setLocations(we,ke,Ge)}};$t.prototype.getGeometryCount=function(){var u=0;return this.elt[0].isNull()||u++,this.elt[1].isNull()||u++,u},$t.prototype.setAllLocations=function(u,d){this.elt[u].setAllLocations(d)},$t.prototype.isNull=function(u){return this.elt[u].isNull()},$t.prototype.setAllLocationsIfNull=function(){if(arguments.length===1){var u=arguments[0];this.setAllLocationsIfNull(0,u),this.setAllLocationsIfNull(1,u)}else if(arguments.length===2){var d=arguments[0],b=arguments[1];this.elt[d].setAllLocationsIfNull(b)}},$t.prototype.isLine=function(u){return this.elt[u].isLine()},$t.prototype.merge=function(u){for(var d=0;d<2;d++)this.elt[d]===null&&u.elt[d]!==null?this.elt[d]=new Ht(u.elt[d]):this.elt[d].merge(u.elt[d])},$t.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},$t.prototype.getLocation=function(){if(arguments.length===1){var u=arguments[0];return this.elt[u].get($e.ON)}if(arguments.length===2){var d=arguments[0],b=arguments[1];return this.elt[d].get(b)}},$t.prototype.toString=function(){var u=new xe;return this.elt[0]!==null&&(u.append("A:"),u.append(this.elt[0].toString())),this.elt[1]!==null&&(u.append(" B:"),u.append(this.elt[1].toString())),u.toString()},$t.prototype.isArea=function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var u=arguments[0];return this.elt[u].isArea()}},$t.prototype.isAnyNull=function(u){return this.elt[u].isAnyNull()},$t.prototype.setLocation=function(){if(arguments.length===2){var u=arguments[0],d=arguments[1];this.elt[u].setLocation($e.ON,d)}else if(arguments.length===3){var b=arguments[0],v=arguments[1],S=arguments[2];this.elt[b].setLocation(v,S)}},$t.prototype.isEqualOnSide=function(u,d){return this.elt[0].isEqualOnSide(u.elt[0],d)&&this.elt[1].isEqualOnSide(u.elt[1],d)},$t.prototype.allPositionsEqual=function(u,d){return this.elt[u].allPositionsEqual(d)},$t.prototype.toLine=function(u){this.elt[u].isArea()&&(this.elt[u]=new Ht(this.elt[u].location[0]))},$t.prototype.interfaces_=function(){return[]},$t.prototype.getClass=function(){return $t},$t.toLineLabel=function(u){for(var d=new $t(z.NONE),b=0;b<2;b++)d.setLocation(b,u.getLocation(b));return d};var Wt=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Xe,this._pts=new Xe,this._label=new $t(z.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Xe,this._geometryFactory=null;var u=arguments[0],d=arguments[1];this._geometryFactory=d,this.computePoints(u),this.computeRing()};Wt.prototype.computeRing=function(){if(this._ring!==null)return null;for(var u=new Array(this._pts.size()).fill(null),d=0;d<this._pts.size();d++)u[d]=this._pts.get(d);this._ring=this._geometryFactory.createLinearRing(u),this._isHole=Pe.isCCW(this._ring.getCoordinates())},Wt.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},Wt.prototype.computePoints=function(u){this._startDe=u;var d=u,b=!0;do{if(d===null)throw new h0("Found null DirectedEdge");if(d.getEdgeRing()===this)throw new h0("Directed Edge visited twice during ring-building at "+d.getCoordinate());this._edges.add(d);var v=d.getLabel();j.isTrue(v.isArea()),this.mergeLabel(v),this.addPoints(d.getEdge(),d.isForward(),b),b=!1,this.setEdgeRing(d,this),d=this.getNext(d)}while(d!==this._startDe)},Wt.prototype.getLinearRing=function(){return this._ring},Wt.prototype.getCoordinate=function(u){return this._pts.get(u)},Wt.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var u=this._startDe;do{var d=u.getNode().getEdges().getOutgoingDegree(this);d>this._maxNodeDegree&&(this._maxNodeDegree=d),u=this.getNext(u)}while(u!==this._startDe);this._maxNodeDegree*=2},Wt.prototype.addPoints=function(u,d,b){var v=u.getCoordinates();if(d){var S=1;b&&(S=0);for(var F=S;F<v.length;F++)this._pts.add(v[F])}else{var G=v.length-2;b&&(G=v.length-1);for(var K=G;K>=0;K--)this._pts.add(v[K])}},Wt.prototype.isHole=function(){return this._isHole},Wt.prototype.setInResult=function(){var u=this._startDe;do u.getEdge().setInResult(!0),u=u.getNext();while(u!==this._startDe)},Wt.prototype.containsPoint=function(u){var d=this.getLinearRing();if(!d.getEnvelopeInternal().contains(u)||!Pe.isPointInRing(u,d.getCoordinates()))return!1;for(var b=this._holes.iterator();b.hasNext();)if(b.next().containsPoint(u))return!1;return!0},Wt.prototype.addHole=function(u){this._holes.add(u)},Wt.prototype.isShell=function(){return this._shell===null},Wt.prototype.getLabel=function(){return this._label},Wt.prototype.getEdges=function(){return this._edges},Wt.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Wt.prototype.getShell=function(){return this._shell},Wt.prototype.mergeLabel=function(){if(arguments.length===1){var u=arguments[0];this.mergeLabel(u,0),this.mergeLabel(u,1)}else if(arguments.length===2){var d=arguments[0],b=arguments[1],v=d.getLocation(b,$e.RIGHT);if(v===z.NONE)return null;if(this._label.getLocation(b)===z.NONE)return this._label.setLocation(b,v),null}},Wt.prototype.setShell=function(u){this._shell=u,u!==null&&u.addHole(this)},Wt.prototype.toPolygon=function(u){for(var d=new Array(this._holes.size()).fill(null),b=0;b<this._holes.size();b++)d[b]=this._holes.get(b).getLinearRing();return u.createPolygon(this.getLinearRing(),d)},Wt.prototype.interfaces_=function(){return[]},Wt.prototype.getClass=function(){return Wt};var Qa=function(u){function d(){var b=arguments[0],v=arguments[1];u.call(this,b,v)}return u&&(d.__proto__=u),d.prototype=Object.create(u&&u.prototype),d.prototype.constructor=d,d.prototype.setEdgeRing=function(b,v){b.setMinEdgeRing(v)},d.prototype.getNext=function(b){return b.getNextMin()},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Wt),es=function(u){function d(){var b=arguments[0],v=arguments[1];u.call(this,b,v)}return u&&(d.__proto__=u),d.prototype=Object.create(u&&u.prototype),d.prototype.constructor=d,d.prototype.buildMinimalRings=function(){var b=new Xe,v=this._startDe;do{if(v.getMinEdgeRing()===null){var S=new Qa(v,this._geometryFactory);b.add(S)}v=v.getNext()}while(v!==this._startDe);return b},d.prototype.setEdgeRing=function(b,v){b.setEdgeRing(v)},d.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var b=this._startDe;do b.getNode().getEdges().linkMinimalDirectedEdges(this),b=b.getNext();while(b!==this._startDe)},d.prototype.getNext=function(b){return b.getNext()},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Wt),Di=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var u=arguments[0];this._label=u}}};Di.prototype.setVisited=function(u){this._isVisited=u},Di.prototype.setInResult=function(u){this._isInResult=u},Di.prototype.isCovered=function(){return this._isCovered},Di.prototype.isCoveredSet=function(){return this._isCoveredSet},Di.prototype.setLabel=function(u){this._label=u},Di.prototype.getLabel=function(){return this._label},Di.prototype.setCovered=function(u){this._isCovered=u,this._isCoveredSet=!0},Di.prototype.updateIM=function(u){j.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(u)},Di.prototype.isInResult=function(){return this._isInResult},Di.prototype.isVisited=function(){return this._isVisited},Di.prototype.interfaces_=function(){return[]},Di.prototype.getClass=function(){return Di};var Sa=function(u){function d(){u.call(this),this._coord=null,this._edges=null;var b=arguments[0],v=arguments[1];this._coord=b,this._edges=v,this._label=new $t(0,z.NONE)}return u&&(d.__proto__=u),d.prototype=Object.create(u&&u.prototype),d.prototype.constructor=d,d.prototype.isIncidentEdgeInResult=function(){for(var b=this.getEdges().getEdges().iterator();b.hasNext();)if(b.next().getEdge().isInResult())return!0;return!1},d.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},d.prototype.getCoordinate=function(){return this._coord},d.prototype.print=function(b){b.println("node "+this._coord+" lbl: "+this._label)},d.prototype.computeIM=function(b){},d.prototype.computeMergedLocation=function(b,v){var S=z.NONE;if(S=this._label.getLocation(v),!b.isNull(v)){var F=b.getLocation(v);S!==z.BOUNDARY&&(S=F)}return S},d.prototype.setLabel=function(){if(arguments.length!==2)return u.prototype.setLabel.apply(this,arguments);var b=arguments[0],v=arguments[1];this._label===null?this._label=new $t(b,v):this._label.setLocation(b,v)},d.prototype.getEdges=function(){return this._edges},d.prototype.mergeLabel=function(){if(arguments[0]instanceof d){var b=arguments[0];this.mergeLabel(b._label)}else if(arguments[0]instanceof $t)for(var v=arguments[0],S=0;S<2;S++){var F=this.computeMergedLocation(v,S);this._label.getLocation(S)===z.NONE&&this._label.setLocation(S,F)}},d.prototype.add=function(b){this._edges.insert(b),b.setNode(this)},d.prototype.setLabelBoundary=function(b){if(this._label===null)return null;var v=z.NONE;this._label!==null&&(v=this._label.getLocation(b));var S=null;switch(v){case z.BOUNDARY:S=z.INTERIOR;break;case z.INTERIOR:default:S=z.BOUNDARY}this._label.setLocation(b,S)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Di),e0=function(){this.nodeMap=new g,this.nodeFact=null;var u=arguments[0];this.nodeFact=u};e0.prototype.find=function(u){return this.nodeMap.get(u)},e0.prototype.addNode=function(){if(arguments[0]instanceof $){var u=arguments[0],d=this.nodeMap.get(u);return d===null&&(d=this.nodeFact.createNode(u),this.nodeMap.put(u,d)),d}if(arguments[0]instanceof Sa){var b=arguments[0],v=this.nodeMap.get(b.getCoordinate());return v===null?(this.nodeMap.put(b.getCoordinate(),b),b):(v.mergeLabel(b),v)}},e0.prototype.print=function(u){for(var d=this.iterator();d.hasNext();)d.next().print(u)},e0.prototype.iterator=function(){return this.nodeMap.values().iterator()},e0.prototype.values=function(){return this.nodeMap.values()},e0.prototype.getBoundaryNodes=function(u){for(var d=new Xe,b=this.iterator();b.hasNext();){var v=b.next();v.getLabel().getLocation(u)===z.BOUNDARY&&d.add(v)}return d},e0.prototype.add=function(u){var d=u.getCoordinate();this.addNode(d).add(u)},e0.prototype.interfaces_=function(){return[]},e0.prototype.getClass=function(){return e0};var Ft=function(){},ha={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Ft.prototype.interfaces_=function(){return[]},Ft.prototype.getClass=function(){return Ft},Ft.isNorthern=function(u){return u===Ft.NE||u===Ft.NW},Ft.isOpposite=function(u,d){return u===d?!1:(u-d+4)%4===2},Ft.commonHalfPlane=function(u,d){if(u===d)return u;if((u-d+4)%4===2)return-1;var b=u<d?u:d;return b===0&&(u>d?u:d)===3?3:b},Ft.isInHalfPlane=function(u,d){return d===Ft.SE?u===Ft.SE||u===Ft.SW:u===d||u===d+1},Ft.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],d=arguments[1];if(u===0&&d===0)throw new L("Cannot compute the quadrant for point ( "+u+", "+d+" )");return u>=0?d>=0?Ft.NE:Ft.SE:d>=0?Ft.NW:Ft.SW}if(arguments[0]instanceof $&&arguments[1]instanceof $){var b=arguments[0],v=arguments[1];if(v.x===b.x&&v.y===b.y)throw new L("Cannot compute the quadrant for two identical points "+b);return v.x>=b.x?v.y>=b.y?Ft.NE:Ft.SE:v.y>=b.y?Ft.NW:Ft.SW}},ha.NE.get=function(){return 0},ha.NW.get=function(){return 1},ha.SW.get=function(){return 2},ha.SE.get=function(){return 3},Object.defineProperties(Ft,ha);var ri=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var u=arguments[0];this._edge=u}else if(arguments.length===3){var d=arguments[0],b=arguments[1],v=arguments[2];this._edge=d,this.init(b,v),this._label=null}else if(arguments.length===4){var S=arguments[0],F=arguments[1],G=arguments[2],K=arguments[3];this._edge=S,this.init(F,G),this._label=K}};ri.prototype.compareDirection=function(u){return this._dx===u._dx&&this._dy===u._dy?0:this._quadrant>u._quadrant?1:this._quadrant<u._quadrant?-1:Pe.computeOrientation(u._p0,u._p1,this._p1)},ri.prototype.getDy=function(){return this._dy},ri.prototype.getCoordinate=function(){return this._p0},ri.prototype.setNode=function(u){this._node=u},ri.prototype.print=function(u){var d=Math.atan2(this._dy,this._dx),b=this.getClass().getName(),v=b.lastIndexOf("."),S=b.substring(v+1);u.print("  "+S+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+d+"   "+this._label)},ri.prototype.compareTo=function(u){var d=u;return this.compareDirection(d)},ri.prototype.getDirectedCoordinate=function(){return this._p1},ri.prototype.getDx=function(){return this._dx},ri.prototype.getLabel=function(){return this._label},ri.prototype.getEdge=function(){return this._edge},ri.prototype.getQuadrant=function(){return this._quadrant},ri.prototype.getNode=function(){return this._node},ri.prototype.toString=function(){var u=Math.atan2(this._dy,this._dx),d=this.getClass().getName(),b=d.lastIndexOf(".");return"  "+d.substring(b+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+u+"   "+this._label},ri.prototype.computeLabel=function(u){},ri.prototype.init=function(u,d){this._p0=u,this._p1=d,this._dx=d.x-u.x,this._dy=d.y-u.y,this._quadrant=Ft.quadrant(this._dx,this._dy),j.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")},ri.prototype.interfaces_=function(){return[N]},ri.prototype.getClass=function(){return ri};var ka=function(u){function d(){var b=arguments[0],v=arguments[1];if(u.call(this,b),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=v,v)this.init(b.getCoordinate(0),b.getCoordinate(1));else{var S=b.getNumPoints()-1;this.init(b.getCoordinate(S),b.getCoordinate(S-1))}this.computeDirectedLabel()}return u&&(d.__proto__=u),d.prototype=Object.create(u&&u.prototype),d.prototype.constructor=d,d.prototype.getNextMin=function(){return this._nextMin},d.prototype.getDepth=function(b){return this._depth[b]},d.prototype.setVisited=function(b){this._isVisited=b},d.prototype.computeDirectedLabel=function(){this._label=new $t(this._edge.getLabel()),this._isForward||this._label.flip()},d.prototype.getNext=function(){return this._next},d.prototype.setDepth=function(b,v){if(this._depth[b]!==-999&&this._depth[b]!==v)throw new h0("assigned depths do not match",this.getCoordinate());this._depth[b]=v},d.prototype.isInteriorAreaEdge=function(){for(var b=!0,v=0;v<2;v++)this._label.isArea(v)&&this._label.getLocation(v,$e.LEFT)===z.INTERIOR&&this._label.getLocation(v,$e.RIGHT)===z.INTERIOR||(b=!1);return b},d.prototype.setNextMin=function(b){this._nextMin=b},d.prototype.print=function(b){u.prototype.print.call(this,b),b.print(" "+this._depth[$e.LEFT]+"/"+this._depth[$e.RIGHT]),b.print(" ("+this.getDepthDelta()+")"),this._isInResult&&b.print(" inResult")},d.prototype.setMinEdgeRing=function(b){this._minEdgeRing=b},d.prototype.isLineEdge=function(){var b=this._label.isLine(0)||this._label.isLine(1),v=!this._label.isArea(0)||this._label.allPositionsEqual(0,z.EXTERIOR),S=!this._label.isArea(1)||this._label.allPositionsEqual(1,z.EXTERIOR);return b&&v&&S},d.prototype.setEdgeRing=function(b){this._edgeRing=b},d.prototype.getMinEdgeRing=function(){return this._minEdgeRing},d.prototype.getDepthDelta=function(){var b=this._edge.getDepthDelta();return this._isForward||(b=-b),b},d.prototype.setInResult=function(b){this._isInResult=b},d.prototype.getSym=function(){return this._sym},d.prototype.isForward=function(){return this._isForward},d.prototype.getEdge=function(){return this._edge},d.prototype.printEdge=function(b){this.print(b),b.print(" "),this._isForward?this._edge.print(b):this._edge.printReverse(b)},d.prototype.setSym=function(b){this._sym=b},d.prototype.setVisitedEdge=function(b){this.setVisited(b),this._sym.setVisited(b)},d.prototype.setEdgeDepths=function(b,v){var S=this.getEdge().getDepthDelta();this._isForward||(S=-S);var F=1;b===$e.LEFT&&(F=-1);var G=$e.opposite(b),K=v+S*F;this.setDepth(b,v),this.setDepth(G,K)},d.prototype.getEdgeRing=function(){return this._edgeRing},d.prototype.isInResult=function(){return this._isInResult},d.prototype.setNext=function(b){this._next=b},d.prototype.isVisited=function(){return this._isVisited},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d.depthFactor=function(b,v){return b===z.EXTERIOR&&v===z.INTERIOR?1:b===z.INTERIOR&&v===z.EXTERIOR?-1:0},d}(ri),ia=function(){};ia.prototype.createNode=function(u){return new Sa(u,null)},ia.prototype.interfaces_=function(){return[]},ia.prototype.getClass=function(){return ia};var jt=function(){if(this._edges=new Xe,this._nodes=null,this._edgeEndList=new Xe,arguments.length===0)this._nodes=new e0(new ia);else if(arguments.length===1){var u=arguments[0];this._nodes=new e0(u)}};jt.prototype.printEdges=function(u){u.println("Edges:");for(var d=0;d<this._edges.size();d++){u.println("edge "+d+":");var b=this._edges.get(d);b.print(u),b.eiList.print(u)}},jt.prototype.find=function(u){return this._nodes.find(u)},jt.prototype.addNode=function(){if(arguments[0]instanceof Sa){var u=arguments[0];return this._nodes.addNode(u)}if(arguments[0]instanceof $){var d=arguments[0];return this._nodes.addNode(d)}},jt.prototype.getNodeIterator=function(){return this._nodes.iterator()},jt.prototype.linkResultDirectedEdges=function(){for(var u=this._nodes.iterator();u.hasNext();)u.next().getEdges().linkResultDirectedEdges()},jt.prototype.debugPrintln=function(u){ye.out.println(u)},jt.prototype.isBoundaryNode=function(u,d){var b=this._nodes.find(d);if(b===null)return!1;var v=b.getLabel();return v!==null&&v.getLocation(u)===z.BOUNDARY},jt.prototype.linkAllDirectedEdges=function(){for(var u=this._nodes.iterator();u.hasNext();)u.next().getEdges().linkAllDirectedEdges()},jt.prototype.matchInSameDirection=function(u,d,b,v){return!!u.equals(b)&&Pe.computeOrientation(u,d,v)===Pe.COLLINEAR&&Ft.quadrant(u,d)===Ft.quadrant(b,v)},jt.prototype.getEdgeEnds=function(){return this._edgeEndList},jt.prototype.debugPrint=function(u){ye.out.print(u)},jt.prototype.getEdgeIterator=function(){return this._edges.iterator()},jt.prototype.findEdgeInSameDirection=function(u,d){for(var b=0;b<this._edges.size();b++){var v=this._edges.get(b),S=v.getCoordinates();if(this.matchInSameDirection(u,d,S[0],S[1])||this.matchInSameDirection(u,d,S[S.length-1],S[S.length-2]))return v}return null},jt.prototype.insertEdge=function(u){this._edges.add(u)},jt.prototype.findEdgeEnd=function(u){for(var d=this.getEdgeEnds().iterator();d.hasNext();){var b=d.next();if(b.getEdge()===u)return b}return null},jt.prototype.addEdges=function(u){for(var d=u.iterator();d.hasNext();){var b=d.next();this._edges.add(b);var v=new ka(b,!0),S=new ka(b,!1);v.setSym(S),S.setSym(v),this.add(v),this.add(S)}},jt.prototype.add=function(u){this._nodes.add(u),this._edgeEndList.add(u)},jt.prototype.getNodes=function(){return this._nodes.values()},jt.prototype.findEdge=function(u,d){for(var b=0;b<this._edges.size();b++){var v=this._edges.get(b),S=v.getCoordinates();if(u.equals(S[0])&&d.equals(S[1]))return v}return null},jt.prototype.interfaces_=function(){return[]},jt.prototype.getClass=function(){return jt},jt.linkResultDirectedEdges=function(u){for(var d=u.iterator();d.hasNext();)d.next().getEdges().linkResultDirectedEdges()};var wi=function(){this._geometryFactory=null,this._shellList=new Xe;var u=arguments[0];this._geometryFactory=u};wi.prototype.sortShellsAndHoles=function(u,d,b){for(var v=u.iterator();v.hasNext();){var S=v.next();S.isHole()?b.add(S):d.add(S)}},wi.prototype.computePolygons=function(u){for(var d=new Xe,b=u.iterator();b.hasNext();){var v=b.next().toPolygon(this._geometryFactory);d.add(v)}return d},wi.prototype.placeFreeHoles=function(u,d){for(var b=d.iterator();b.hasNext();){var v=b.next();if(v.getShell()===null){var S=this.findEdgeRingContaining(v,u);if(S===null)throw new h0("unable to assign hole to a shell",v.getCoordinate(0));v.setShell(S)}}},wi.prototype.buildMinimalEdgeRings=function(u,d,b){for(var v=new Xe,S=u.iterator();S.hasNext();){var F=S.next();if(F.getMaxNodeDegree()>2){F.linkDirectedEdgesForMinimalEdgeRings();var G=F.buildMinimalRings(),K=this.findShell(G);K!==null?(this.placePolygonHoles(K,G),d.add(K)):b.addAll(G)}else v.add(F)}return v},wi.prototype.containsPoint=function(u){for(var d=this._shellList.iterator();d.hasNext();)if(d.next().containsPoint(u))return!0;return!1},wi.prototype.buildMaximalEdgeRings=function(u){for(var d=new Xe,b=u.iterator();b.hasNext();){var v=b.next();if(v.isInResult()&&v.getLabel().isArea()&&v.getEdgeRing()===null){var S=new es(v,this._geometryFactory);d.add(S),S.setInResult()}}return d},wi.prototype.placePolygonHoles=function(u,d){for(var b=d.iterator();b.hasNext();){var v=b.next();v.isHole()&&v.setShell(u)}},wi.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},wi.prototype.findEdgeRingContaining=function(u,d){for(var b=u.getLinearRing(),v=b.getEnvelopeInternal(),S=b.getCoordinateN(0),F=null,G=null,K=d.iterator();K.hasNext();){var ue=K.next(),we=ue.getLinearRing(),ke=we.getEnvelopeInternal();F!==null&&(G=F.getLinearRing().getEnvelopeInternal());var Ge=!1;ke.contains(v)&&Pe.isPointInRing(S,we.getCoordinates())&&(Ge=!0),Ge&&(F===null||G.contains(ke))&&(F=ue)}return F},wi.prototype.findShell=function(u){for(var d=0,b=null,v=u.iterator();v.hasNext();){var S=v.next();S.isHole()||(b=S,d++)}return j.isTrue(d<=1,"found two shells in MinimalEdgeRing list"),b},wi.prototype.add=function(){if(arguments.length===1){var u=arguments[0];this.add(u.getEdgeEnds(),u.getNodes())}else if(arguments.length===2){var d=arguments[0],b=arguments[1];jt.linkResultDirectedEdges(b);var v=this.buildMaximalEdgeRings(d),S=new Xe,F=this.buildMinimalEdgeRings(v,this._shellList,S);this.sortShellsAndHoles(F,this._shellList,S),this.placeFreeHoles(this._shellList,S)}},wi.prototype.interfaces_=function(){return[]},wi.prototype.getClass=function(){return wi};var $0=function(){};$0.prototype.getBounds=function(){},$0.prototype.interfaces_=function(){return[]},$0.prototype.getClass=function(){return $0};var Gi=function(){this._bounds=null,this._item=null;var u=arguments[0],d=arguments[1];this._bounds=u,this._item=d};Gi.prototype.getItem=function(){return this._item},Gi.prototype.getBounds=function(){return this._bounds},Gi.prototype.interfaces_=function(){return[$0,i]},Gi.prototype.getClass=function(){return Gi};var d0=function(){this._size=null,this._items=null,this._size=0,this._items=new Xe,this._items.add(null)};d0.prototype.poll=function(){if(this.isEmpty())return null;var u=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),u},d0.prototype.size=function(){return this._size},d0.prototype.reorder=function(u){for(var d=null,b=this._items.get(u);2*u<=this._size&&((d=2*u)!==this._size&&this._items.get(d+1).compareTo(this._items.get(d))<0&&d++,this._items.get(d).compareTo(b)<0);u=d)this._items.set(u,this._items.get(d));this._items.set(u,b)},d0.prototype.clear=function(){this._size=0,this._items.clear()},d0.prototype.isEmpty=function(){return this._size===0},d0.prototype.add=function(u){this._items.add(null),this._size+=1;var d=this._size;for(this._items.set(0,u);u.compareTo(this._items.get(Math.trunc(d/2)))<0;d/=2)this._items.set(d,this._items.get(Math.trunc(d/2)));this._items.set(d,u)},d0.prototype.interfaces_=function(){return[]},d0.prototype.getClass=function(){return d0};var P0=function(){};P0.prototype.visitItem=function(u){},P0.prototype.interfaces_=function(){return[]},P0.prototype.getClass=function(){return P0};var F0=function(){};F0.prototype.insert=function(u,d){},F0.prototype.remove=function(u,d){},F0.prototype.query=function(){},F0.prototype.interfaces_=function(){return[]},F0.prototype.getClass=function(){return F0};var Qt=function(){if(this._childBoundables=new Xe,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var u=arguments[0];this._level=u}}},qa={serialVersionUID:{configurable:!0}};Qt.prototype.getLevel=function(){return this._level},Qt.prototype.size=function(){return this._childBoundables.size()},Qt.prototype.getChildBoundables=function(){return this._childBoundables},Qt.prototype.addChildBoundable=function(u){j.isTrue(this._bounds===null),this._childBoundables.add(u)},Qt.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Qt.prototype.getBounds=function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds},Qt.prototype.interfaces_=function(){return[$0,i]},Qt.prototype.getClass=function(){return Qt},qa.serialVersionUID.get=function(){return 6493722185909574e3},Object.defineProperties(Qt,qa);var Yi=function(){};Yi.reverseOrder=function(){return{compare:function(u,d){return d.compareTo(u)}}},Yi.min=function(u){return Yi.sort(u),u.get(0)},Yi.sort=function(u,d){var b=u.toArray();d?Ct.sort(b,d):Ct.sort(b);for(var v=u.iterator(),S=0,F=b.length;S<F;S++)v.next(),v.set(b[S])},Yi.singletonList=function(u){var d=new Xe;return d.add(u),d};var Xt=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var u=arguments[0],d=arguments[1],b=arguments[2];this._boundable1=u,this._boundable2=d,this._itemDistance=b,this._distance=this.distance()};Xt.prototype.expandToQueue=function(u,d){var b=Xt.isComposite(this._boundable1),v=Xt.isComposite(this._boundable2);if(b&&v)return Xt.area(this._boundable1)>Xt.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,u,d),null):(this.expand(this._boundable2,this._boundable1,u,d),null);if(b)return this.expand(this._boundable1,this._boundable2,u,d),null;if(v)return this.expand(this._boundable2,this._boundable1,u,d),null;throw new L("neither boundable is composite")},Xt.prototype.isLeaves=function(){return!(Xt.isComposite(this._boundable1)||Xt.isComposite(this._boundable2))},Xt.prototype.compareTo=function(u){var d=u;return this._distance<d._distance?-1:this._distance>d._distance?1:0},Xt.prototype.expand=function(u,d,b,v){for(var S=u.getChildBoundables().iterator();S.hasNext();){var F=S.next(),G=new Xt(F,d,this._itemDistance);G.getDistance()<v&&b.add(G)}},Xt.prototype.getBoundable=function(u){return u===0?this._boundable1:this._boundable2},Xt.prototype.getDistance=function(){return this._distance},Xt.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},Xt.prototype.interfaces_=function(){return[N]},Xt.prototype.getClass=function(){return Xt},Xt.area=function(u){return u.getBounds().getArea()},Xt.isComposite=function(u){return u instanceof Qt};var ai=function u(){if(this._root=null,this._built=!1,this._itemBoundables=new Xe,this._nodeCapacity=null,arguments.length===0){var d=u.DEFAULT_NODE_CAPACITY;this._nodeCapacity=d}else if(arguments.length===1){var b=arguments[0];j.isTrue(b>1,"Node capacity must be greater than 1"),this._nodeCapacity=b}},Ta={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};ai.prototype.getNodeCapacity=function(){return this._nodeCapacity},ai.prototype.lastNode=function(u){return u.get(u.size()-1)},ai.prototype.size=function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var u=0,d=arguments[0].getChildBoundables().iterator();d.hasNext();){var b=d.next();b instanceof Qt?u+=this.size(b):b instanceof Gi&&(u+=1)}return u}},ai.prototype.removeItem=function(u,d){for(var b=null,v=u.getChildBoundables().iterator();v.hasNext();){var S=v.next();S instanceof Gi&&S.getItem()===d&&(b=S)}return b!==null&&(u.getChildBoundables().remove(b),!0)},ai.prototype.itemsTree=function(){if(arguments.length===0){this.build();var u=this.itemsTree(this._root);return u===null?new Xe:u}if(arguments.length===1){for(var d=arguments[0],b=new Xe,v=d.getChildBoundables().iterator();v.hasNext();){var S=v.next();if(S instanceof Qt){var F=this.itemsTree(S);F!==null&&b.add(F)}else S instanceof Gi?b.add(S.getItem()):j.shouldNeverReachHere()}return b.size()<=0?null:b}},ai.prototype.insert=function(u,d){j.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Gi(u,d))},ai.prototype.boundablesAtLevel=function(){if(arguments.length===1){var u=arguments[0],d=new Xe;return this.boundablesAtLevel(u,this._root,d),d}if(arguments.length===3){var b=arguments[0],v=arguments[1],S=arguments[2];if(j.isTrue(b>-2),v.getLevel()===b)return S.add(v),null;for(var F=v.getChildBoundables().iterator();F.hasNext();){var G=F.next();G instanceof Qt?this.boundablesAtLevel(b,G,S):(j.isTrue(G instanceof Gi),b===-1&&S.add(G))}return null}},ai.prototype.query=function(){if(arguments.length===1){var u=arguments[0];this.build();var d=new Xe;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),u)&&this.query(u,this._root,d),d}if(arguments.length===2){var b=arguments[0],v=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),b)&&this.query(b,this._root,v)}else if(arguments.length===3){if(q(arguments[2],P0)&&arguments[0]instanceof Object&&arguments[1]instanceof Qt)for(var S=arguments[0],F=arguments[1],G=arguments[2],K=F.getChildBoundables(),ue=0;ue<K.size();ue++){var we=K.get(ue);this.getIntersectsOp().intersects(we.getBounds(),S)&&(we instanceof Qt?this.query(S,we,G):we instanceof Gi?G.visitItem(we.getItem()):j.shouldNeverReachHere())}else if(q(arguments[2],Zt)&&arguments[0]instanceof Object&&arguments[1]instanceof Qt)for(var ke=arguments[0],Ge=arguments[1],tt=arguments[2],it=Ge.getChildBoundables(),ot=0;ot<it.size();ot++){var bt=it.get(ot);this.getIntersectsOp().intersects(bt.getBounds(),ke)&&(bt instanceof Qt?this.query(ke,bt,tt):bt instanceof Gi?tt.add(bt.getItem()):j.shouldNeverReachHere())}}},ai.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},ai.prototype.getRoot=function(){return this.build(),this._root},ai.prototype.remove=function(){if(arguments.length===2){var u=arguments[0],d=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),u)&&this.remove(u,this._root,d)}if(arguments.length===3){var b=arguments[0],v=arguments[1],S=arguments[2],F=this.removeItem(v,S);if(F)return!0;for(var G=null,K=v.getChildBoundables().iterator();K.hasNext();){var ue=K.next();if(this.getIntersectsOp().intersects(ue.getBounds(),b)&&ue instanceof Qt&&(F=this.remove(b,ue,S))){G=ue;break}}return G!==null&&G.getChildBoundables().isEmpty()&&v.getChildBoundables().remove(G),F}},ai.prototype.createHigherLevels=function(u,d){j.isTrue(!u.isEmpty());var b=this.createParentBoundables(u,d+1);return b.size()===1?b.get(0):this.createHigherLevels(b,d+1)},ai.prototype.depth=function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var u=0,d=arguments[0].getChildBoundables().iterator();d.hasNext();){var b=d.next();if(b instanceof Qt){var v=this.depth(b);v>u&&(u=v)}}return u+1}},ai.prototype.createParentBoundables=function(u,d){j.isTrue(!u.isEmpty());var b=new Xe;b.add(this.createNode(d));var v=new Xe(u);Yi.sort(v,this.getComparator());for(var S=v.iterator();S.hasNext();){var F=S.next();this.lastNode(b).getChildBoundables().size()===this.getNodeCapacity()&&b.add(this.createNode(d)),this.lastNode(b).addChildBoundable(F)}return b},ai.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},ai.prototype.interfaces_=function(){return[i]},ai.prototype.getClass=function(){return ai},ai.compareDoubles=function(u,d){return u>d?1:u<d?-1:0},Ta.IntersectsOp.get=function(){return ts},Ta.serialVersionUID.get=function(){return-3886435814360241e3},Ta.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(ai,Ta);var ts=function(){},aa=function(){};aa.prototype.distance=function(u,d){},aa.prototype.interfaces_=function(){return[]},aa.prototype.getClass=function(){return aa};var ja=function(u){function d(v){v=v||d.DEFAULT_NODE_CAPACITY,u.call(this,v)}u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d;var b={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return d.prototype.createParentBoundablesFromVerticalSlices=function(v,S){j.isTrue(v.length>0);for(var F=new Xe,G=0;G<v.length;G++)F.addAll(this.createParentBoundablesFromVerticalSlice(v[G],S));return F},d.prototype.createNode=function(v){return new Va(v)},d.prototype.size=function(){return arguments.length===0?u.prototype.size.call(this):u.prototype.size.apply(this,arguments)},d.prototype.insert=function(){if(arguments.length!==2)return u.prototype.insert.apply(this,arguments);var v=arguments[0],S=arguments[1];if(v.isNull())return null;u.prototype.insert.call(this,v,S)},d.prototype.getIntersectsOp=function(){return d.intersectsOp},d.prototype.verticalSlices=function(v,S){for(var F=Math.trunc(Math.ceil(v.size()/S)),G=new Array(S).fill(null),K=v.iterator(),ue=0;ue<S;ue++){G[ue]=new Xe;for(var we=0;K.hasNext()&&we<F;){var ke=K.next();G[ue].add(ke),we++}}return G},d.prototype.query=function(){if(arguments.length===1){var v=arguments[0];return u.prototype.query.call(this,v)}if(arguments.length===2){var S=arguments[0],F=arguments[1];u.prototype.query.call(this,S,F)}else if(arguments.length===3){if(q(arguments[2],P0)&&arguments[0]instanceof Object&&arguments[1]instanceof Qt){var G=arguments[0],K=arguments[1],ue=arguments[2];u.prototype.query.call(this,G,K,ue)}else if(q(arguments[2],Zt)&&arguments[0]instanceof Object&&arguments[1]instanceof Qt){var we=arguments[0],ke=arguments[1],Ge=arguments[2];u.prototype.query.call(this,we,ke,Ge)}}},d.prototype.getComparator=function(){return d.yComparator},d.prototype.createParentBoundablesFromVerticalSlice=function(v,S){return u.prototype.createParentBoundables.call(this,v,S)},d.prototype.remove=function(){if(arguments.length===2){var v=arguments[0],S=arguments[1];return u.prototype.remove.call(this,v,S)}return u.prototype.remove.apply(this,arguments)},d.prototype.depth=function(){return arguments.length===0?u.prototype.depth.call(this):u.prototype.depth.apply(this,arguments)},d.prototype.createParentBoundables=function(v,S){j.isTrue(!v.isEmpty());var F=Math.trunc(Math.ceil(v.size()/this.getNodeCapacity())),G=new Xe(v);Yi.sort(G,d.xComparator);var K=this.verticalSlices(G,Math.trunc(Math.ceil(Math.sqrt(F))));return this.createParentBoundablesFromVerticalSlices(K,S)},d.prototype.nearestNeighbour=function(){if(arguments.length===1){if(q(arguments[0],aa)){var v=arguments[0],S=new Xt(this.getRoot(),this.getRoot(),v);return this.nearestNeighbour(S)}if(arguments[0]instanceof Xt){var F=arguments[0];return this.nearestNeighbour(F,R.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof d&&q(arguments[1],aa)){var G=arguments[0],K=arguments[1],ue=new Xt(this.getRoot(),G.getRoot(),K);return this.nearestNeighbour(ue)}if(arguments[0]instanceof Xt&&typeof arguments[1]=="number"){var we=arguments[0],ke=arguments[1],Ge=null,tt=new d0;for(tt.add(we);!tt.isEmpty()&&ke>0;){var it=tt.poll(),ot=it.getDistance();if(ot>=ke)break;it.isLeaves()?(ke=ot,Ge=it):it.expandToQueue(tt,ke)}return[Ge.getBoundable(0).getItem(),Ge.getBoundable(1).getItem()]}}else if(arguments.length===3){var bt=arguments[0],Bt=arguments[1],ii=arguments[2],Ii=new Gi(bt,Bt),I0=new Xt(this.getRoot(),Ii,ii);return this.nearestNeighbour(I0)[0]}},d.prototype.interfaces_=function(){return[F0,i]},d.prototype.getClass=function(){return d},d.centreX=function(v){return d.avg(v.getMinX(),v.getMaxX())},d.avg=function(v,S){return(v+S)/2},d.centreY=function(v){return d.avg(v.getMinY(),v.getMaxY())},b.STRtreeNode.get=function(){return Va},b.serialVersionUID.get=function(){return 0x39920f7d5f261e0},b.xComparator.get=function(){return{interfaces_:function(){return[B]},compare:function(v,S){return u.compareDoubles(d.centreX(v.getBounds()),d.centreX(S.getBounds()))}}},b.yComparator.get=function(){return{interfaces_:function(){return[B]},compare:function(v,S){return u.compareDoubles(d.centreY(v.getBounds()),d.centreY(S.getBounds()))}}},b.intersectsOp.get=function(){return{interfaces_:function(){return[u.IntersectsOp]},intersects:function(v,S){return v.intersects(S)}}},b.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(d,b),d}(ai),Va=function(u){function d(){var b=arguments[0];u.call(this,b)}return u&&(d.__proto__=u),d.prototype=Object.create(u&&u.prototype),d.prototype.constructor=d,d.prototype.computeBounds=function(){for(var b=null,v=this.getChildBoundables().iterator();v.hasNext();){var S=v.next();b===null?b=new Ce(S.getBounds()):b.expandToInclude(S.getBounds())}return b},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Qt),yi=function(){};yi.prototype.interfaces_=function(){return[]},yi.prototype.getClass=function(){return yi},yi.relativeSign=function(u,d){return u<d?-1:u>d?1:0},yi.compare=function(u,d,b){if(d.equals2D(b))return 0;var v=yi.relativeSign(d.x,b.x),S=yi.relativeSign(d.y,b.y);switch(u){case 0:return yi.compareValue(v,S);case 1:return yi.compareValue(S,v);case 2:return yi.compareValue(S,-v);case 3:return yi.compareValue(-v,S);case 4:return yi.compareValue(-v,-S);case 5:return yi.compareValue(-S,-v);case 6:return yi.compareValue(-S,v);case 7:return yi.compareValue(v,-S)}return j.shouldNeverReachHere("invalid octant value"),0},yi.compareValue=function(u,d){return u<0?-1:u>0?1:d<0?-1:d>0?1:0};var w0=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var u=arguments[0],d=arguments[1],b=arguments[2],v=arguments[3];this._segString=u,this.coord=new $(d),this.segmentIndex=b,this._segmentOctant=v,this._isInterior=!d.equals2D(u.getCoordinate(b))};w0.prototype.getCoordinate=function(){return this.coord},w0.prototype.print=function(u){u.print(this.coord),u.print(" seg # = "+this.segmentIndex)},w0.prototype.compareTo=function(u){var d=u;return this.segmentIndex<d.segmentIndex?-1:this.segmentIndex>d.segmentIndex?1:this.coord.equals2D(d.coord)?0:yi.compare(this._segmentOctant,this.coord,d.coord)},w0.prototype.isEndPoint=function(u){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===u},w0.prototype.isInterior=function(){return this._isInterior},w0.prototype.interfaces_=function(){return[N]},w0.prototype.getClass=function(){return w0};var _i=function(){this._nodeMap=new g,this._edge=null;var u=arguments[0];this._edge=u};_i.prototype.getSplitCoordinates=function(){var u=new Vi;this.addEndpoints();for(var d=this.iterator(),b=d.next();d.hasNext();){var v=d.next();this.addEdgeCoordinates(b,v,u),b=v}return u.toCoordinateArray()},_i.prototype.addCollapsedNodes=function(){var u=new Xe;this.findCollapsesFromInsertedNodes(u),this.findCollapsesFromExistingVertices(u);for(var d=u.iterator();d.hasNext();){var b=d.next().intValue();this.add(this._edge.getCoordinate(b),b)}},_i.prototype.print=function(u){u.println("Intersections:");for(var d=this.iterator();d.hasNext();)d.next().print(u)},_i.prototype.findCollapsesFromExistingVertices=function(u){for(var d=0;d<this._edge.size()-2;d++){var b=this._edge.getCoordinate(d),v=this._edge.getCoordinate(d+2);b.equals2D(v)&&u.add(new oe(d+1))}},_i.prototype.addEdgeCoordinates=function(u,d,b){var v=this._edge.getCoordinate(d.segmentIndex),S=d.isInterior()||!d.coord.equals2D(v);b.add(new $(u.coord),!1);for(var F=u.segmentIndex+1;F<=d.segmentIndex;F++)b.add(this._edge.getCoordinate(F));S&&b.add(new $(d.coord))},_i.prototype.iterator=function(){return this._nodeMap.values().iterator()},_i.prototype.addSplitEdges=function(u){this.addEndpoints(),this.addCollapsedNodes();for(var d=this.iterator(),b=d.next();d.hasNext();){var v=d.next(),S=this.createSplitEdge(b,v);u.add(S),b=v}},_i.prototype.findCollapseIndex=function(u,d,b){if(!u.coord.equals2D(d.coord))return!1;var v=d.segmentIndex-u.segmentIndex;return d.isInterior()||v--,v===1&&(b[0]=u.segmentIndex+1,!0)},_i.prototype.findCollapsesFromInsertedNodes=function(u){for(var d=new Array(1).fill(null),b=this.iterator(),v=b.next();b.hasNext();){var S=b.next();this.findCollapseIndex(v,S,d)&&u.add(new oe(d[0])),v=S}},_i.prototype.getEdge=function(){return this._edge},_i.prototype.addEndpoints=function(){var u=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(u),u)},_i.prototype.createSplitEdge=function(u,d){var b=d.segmentIndex-u.segmentIndex+2,v=this._edge.getCoordinate(d.segmentIndex),S=d.isInterior()||!d.coord.equals2D(v);S||b--;var F=new Array(b).fill(null),G=0;F[G++]=new $(u.coord);for(var K=u.segmentIndex+1;K<=d.segmentIndex;K++)F[G++]=this._edge.getCoordinate(K);return S&&(F[G]=new $(d.coord)),new Yt(F,this._edge.getData())},_i.prototype.add=function(u,d){var b=new w0(this._edge,u,d,this._edge.getSegmentOctant(d)),v=this._nodeMap.get(b);return v!==null?(j.isTrue(v.coord.equals2D(u),"Found equal nodes with different coordinates"),v):(this._nodeMap.put(b,b),b)},_i.prototype.checkSplitEdgesCorrectness=function(u){var d=this._edge.getCoordinates(),b=u.get(0).getCoordinate(0);if(!b.equals2D(d[0]))throw new le("bad split edge start point at "+b);var v=u.get(u.size()-1).getCoordinates(),S=v[v.length-1];if(!S.equals2D(d[d.length-1]))throw new le("bad split edge end point at "+S)},_i.prototype.interfaces_=function(){return[]},_i.prototype.getClass=function(){return _i};var B0=function(){};B0.prototype.interfaces_=function(){return[]},B0.prototype.getClass=function(){return B0},B0.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],d=arguments[1];if(u===0&&d===0)throw new L("Cannot compute the octant for point ( "+u+", "+d+" )");var b=Math.abs(u),v=Math.abs(d);return u>=0?d>=0?b>=v?0:1:b>=v?7:6:d>=0?b>=v?3:2:b>=v?4:5}if(arguments[0]instanceof $&&arguments[1]instanceof $){var S=arguments[0],F=arguments[1],G=F.x-S.x,K=F.y-S.y;if(G===0&&K===0)throw new L("Cannot compute the octant for two identical points "+S);return B0.octant(G,K)}};var s0=function(){};s0.prototype.getCoordinates=function(){},s0.prototype.size=function(){},s0.prototype.getCoordinate=function(u){},s0.prototype.isClosed=function(){},s0.prototype.setData=function(u){},s0.prototype.getData=function(){},s0.prototype.interfaces_=function(){return[]},s0.prototype.getClass=function(){return s0};var da=function(){};da.prototype.addIntersection=function(u,d){},da.prototype.interfaces_=function(){return[s0]},da.prototype.getClass=function(){return da};var Yt=function(){this._nodeList=new _i(this),this._pts=null,this._data=null;var u=arguments[0],d=arguments[1];this._pts=u,this._data=d};Yt.prototype.getCoordinates=function(){return this._pts},Yt.prototype.size=function(){return this._pts.length},Yt.prototype.getCoordinate=function(u){return this._pts[u]},Yt.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Yt.prototype.getSegmentOctant=function(u){return u===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(u),this.getCoordinate(u+1))},Yt.prototype.setData=function(u){this._data=u},Yt.prototype.safeOctant=function(u,d){return u.equals2D(d)?0:B0.octant(u,d)},Yt.prototype.getData=function(){return this._data},Yt.prototype.addIntersection=function(){if(arguments.length===2){var u=arguments[0],d=arguments[1];this.addIntersectionNode(u,d)}else if(arguments.length===4){var b=arguments[0],v=arguments[1],S=arguments[3],F=new $(b.getIntersection(S));this.addIntersection(F,v)}},Yt.prototype.toString=function(){return Oe.toLineString(new pe(this._pts))},Yt.prototype.getNodeList=function(){return this._nodeList},Yt.prototype.addIntersectionNode=function(u,d){var b=d,v=b+1;if(v<this._pts.length){var S=this._pts[v];u.equals2D(S)&&(b=v)}return this._nodeList.add(u,b)},Yt.prototype.addIntersections=function(u,d,b){for(var v=0;v<u.getIntersectionNum();v++)this.addIntersection(u,d,b,v)},Yt.prototype.interfaces_=function(){return[da]},Yt.prototype.getClass=function(){return Yt},Yt.getNodedSubstrings=function(){if(arguments.length===1){var u=arguments[0],d=new Xe;return Yt.getNodedSubstrings(u,d),d}if(arguments.length===2)for(var b=arguments[0],v=arguments[1],S=b.iterator();S.hasNext();)S.next().getNodeList().addSplitEdges(v)};var ut=function(){if(this.p0=null,this.p1=null,arguments.length===0)this.p0=new $,this.p1=new $;else if(arguments.length===1){var u=arguments[0];this.p0=new $(u.p0),this.p1=new $(u.p1)}else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var d=arguments[0],b=arguments[1],v=arguments[2],S=arguments[3];this.p0=new $(d,b),this.p1=new $(v,S)}},Ja={serialVersionUID:{configurable:!0}};ut.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},ut.prototype.orientationIndex=function(){if(arguments[0]instanceof ut){var u=arguments[0],d=Pe.orientationIndex(this.p0,this.p1,u.p0),b=Pe.orientationIndex(this.p0,this.p1,u.p1);return d>=0&&b>=0||d<=0&&b<=0?Math.max(d,b):0}if(arguments[0]instanceof $){var v=arguments[0];return Pe.orientationIndex(this.p0,this.p1,v)}},ut.prototype.toGeometry=function(u){return u.createLineString([this.p0,this.p1])},ut.prototype.isVertical=function(){return this.p0.x===this.p1.x},ut.prototype.equals=function(u){if(!(u instanceof ut))return!1;var d=u;return this.p0.equals(d.p0)&&this.p1.equals(d.p1)},ut.prototype.intersection=function(u){var d=new ce;return d.computeIntersection(this.p0,this.p1,u.p0,u.p1),d.hasIntersection()?d.getIntersection(0):null},ut.prototype.project=function(){if(arguments[0]instanceof $){var u=arguments[0];if(u.equals(this.p0)||u.equals(this.p1))return new $(u);var d=this.projectionFactor(u),b=new $;return b.x=this.p0.x+d*(this.p1.x-this.p0.x),b.y=this.p0.y+d*(this.p1.y-this.p0.y),b}if(arguments[0]instanceof ut){var v=arguments[0],S=this.projectionFactor(v.p0),F=this.projectionFactor(v.p1);if(S>=1&&F>=1||S<=0&&F<=0)return null;var G=this.project(v.p0);S<0&&(G=this.p0),S>1&&(G=this.p1);var K=this.project(v.p1);return F<0&&(K=this.p0),F>1&&(K=this.p1),new ut(G,K)}},ut.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},ut.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},ut.prototype.getCoordinate=function(u){return u===0?this.p0:this.p1},ut.prototype.distancePerpendicular=function(u){return Pe.distancePointLinePerpendicular(u,this.p0,this.p1)},ut.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},ut.prototype.midPoint=function(){return ut.midPoint(this.p0,this.p1)},ut.prototype.projectionFactor=function(u){if(u.equals(this.p0))return 0;if(u.equals(this.p1))return 1;var d=this.p1.x-this.p0.x,b=this.p1.y-this.p0.y,v=d*d+b*b;return v<=0?R.NaN:((u.x-this.p0.x)*d+(u.y-this.p0.y)*b)/v},ut.prototype.closestPoints=function(u){var d=this.intersection(u);if(d!==null)return[d,d];var b=new Array(2).fill(null),v=R.MAX_VALUE,S=null,F=this.closestPoint(u.p0);v=F.distance(u.p0),b[0]=F,b[1]=u.p0;var G=this.closestPoint(u.p1);(S=G.distance(u.p1))<v&&(v=S,b[0]=G,b[1]=u.p1);var K=u.closestPoint(this.p0);(S=K.distance(this.p0))<v&&(v=S,b[0]=this.p0,b[1]=K);var ue=u.closestPoint(this.p1);return(S=ue.distance(this.p1))<v&&(v=S,b[0]=this.p1,b[1]=ue),b},ut.prototype.closestPoint=function(u){var d=this.projectionFactor(u);return d>0&&d<1?this.project(u):this.p0.distance(u)<this.p1.distance(u)?this.p0:this.p1},ut.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},ut.prototype.getLength=function(){return this.p0.distance(this.p1)},ut.prototype.compareTo=function(u){var d=u,b=this.p0.compareTo(d.p0);return b!==0?b:this.p1.compareTo(d.p1)},ut.prototype.reverse=function(){var u=this.p0;this.p0=this.p1,this.p1=u},ut.prototype.equalsTopo=function(u){return this.p0.equals(u.p0)&&(this.p1.equals(u.p1)||this.p0.equals(u.p1))&&this.p1.equals(u.p0)},ut.prototype.lineIntersection=function(u){try{return Fe.intersection(this.p0,this.p1,u.p0,u.p1)}catch(d){if(!(d instanceof Ve))throw d}return null},ut.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},ut.prototype.pointAlongOffset=function(u,d){var b=this.p0.x+u*(this.p1.x-this.p0.x),v=this.p0.y+u*(this.p1.y-this.p0.y),S=this.p1.x-this.p0.x,F=this.p1.y-this.p0.y,G=Math.sqrt(S*S+F*F),K=0,ue=0;if(d!==0){if(G<=0)throw new Error("Cannot compute offset from zero-length line segment");K=d*S/G,ue=d*F/G}return new $(b-ue,v+K)},ut.prototype.setCoordinates=function(){if(arguments.length===1){var u=arguments[0];this.setCoordinates(u.p0,u.p1)}else if(arguments.length===2){var d=arguments[0],b=arguments[1];this.p0.x=d.x,this.p0.y=d.y,this.p1.x=b.x,this.p1.y=b.y}},ut.prototype.segmentFraction=function(u){var d=this.projectionFactor(u);return d<0?d=0:(d>1||R.isNaN(d))&&(d=1),d},ut.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},ut.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},ut.prototype.distance=function(){if(arguments[0]instanceof ut){var u=arguments[0];return Pe.distanceLineLine(this.p0,this.p1,u.p0,u.p1)}if(arguments[0]instanceof $){var d=arguments[0];return Pe.distancePointLine(d,this.p0,this.p1)}},ut.prototype.pointAlong=function(u){var d=new $;return d.x=this.p0.x+u*(this.p1.x-this.p0.x),d.y=this.p0.y+u*(this.p1.y-this.p0.y),d},ut.prototype.hashCode=function(){var u=R.doubleToLongBits(this.p0.x);u^=31*R.doubleToLongBits(this.p0.y);var d=Math.trunc(u)^Math.trunc(u>>32),b=R.doubleToLongBits(this.p1.x);return b^=31*R.doubleToLongBits(this.p1.y),d^(Math.trunc(b)^Math.trunc(b>>32))},ut.prototype.interfaces_=function(){return[N,i]},ut.prototype.getClass=function(){return ut},ut.midPoint=function(u,d){return new $((u.x+d.x)/2,(u.y+d.y)/2)},Ja.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(ut,Ja);var fa=function(){this.tempEnv1=new Ce,this.tempEnv2=new Ce,this._overlapSeg1=new ut,this._overlapSeg2=new ut};fa.prototype.overlap=function(){if(arguments.length!==2){if(arguments.length===4){var u=arguments[0],d=arguments[1],b=arguments[2],v=arguments[3];u.getLineSegment(d,this._overlapSeg1),b.getLineSegment(v,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}},fa.prototype.interfaces_=function(){return[]},fa.prototype.getClass=function(){return fa};var Ei=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var u=arguments[0],d=arguments[1],b=arguments[2],v=arguments[3];this._pts=u,this._start=d,this._end=b,this._context=v};Ei.prototype.getLineSegment=function(u,d){d.p0=this._pts[u],d.p1=this._pts[u+1]},Ei.prototype.computeSelect=function(u,d,b,v){var S=this._pts[d],F=this._pts[b];if(v.tempEnv1.init(S,F),b-d==1)return v.select(this,d),null;if(!u.intersects(v.tempEnv1))return null;var G=Math.trunc((d+b)/2);d<G&&this.computeSelect(u,d,G,v),G<b&&this.computeSelect(u,G,b,v)},Ei.prototype.getCoordinates=function(){for(var u=new Array(this._end-this._start+1).fill(null),d=0,b=this._start;b<=this._end;b++)u[d++]=this._pts[b];return u},Ei.prototype.computeOverlaps=function(u,d){this.computeOverlapsInternal(this._start,this._end,u,u._start,u._end,d)},Ei.prototype.setId=function(u){this._id=u},Ei.prototype.select=function(u,d){this.computeSelect(u,this._start,this._end,d)},Ei.prototype.getEnvelope=function(){if(this._env===null){var u=this._pts[this._start],d=this._pts[this._end];this._env=new Ce(u,d)}return this._env},Ei.prototype.getEndIndex=function(){return this._end},Ei.prototype.getStartIndex=function(){return this._start},Ei.prototype.getContext=function(){return this._context},Ei.prototype.getId=function(){return this._id},Ei.prototype.computeOverlapsInternal=function(u,d,b,v,S,F){var G=this._pts[u],K=this._pts[d],ue=b._pts[v],we=b._pts[S];if(d-u==1&&S-v==1)return F.overlap(this,u,b,v),null;if(F.tempEnv1.init(G,K),F.tempEnv2.init(ue,we),!F.tempEnv1.intersects(F.tempEnv2))return null;var ke=Math.trunc((u+d)/2),Ge=Math.trunc((v+S)/2);u<ke&&(v<Ge&&this.computeOverlapsInternal(u,ke,b,v,Ge,F),Ge<S&&this.computeOverlapsInternal(u,ke,b,Ge,S,F)),ke<d&&(v<Ge&&this.computeOverlapsInternal(ke,d,b,v,Ge,F),Ge<S&&this.computeOverlapsInternal(ke,d,b,Ge,S,F))},Ei.prototype.interfaces_=function(){return[]},Ei.prototype.getClass=function(){return Ei};var t0=function(){};t0.prototype.interfaces_=function(){return[]},t0.prototype.getClass=function(){return t0},t0.getChainStartIndices=function(u){var d=0,b=new Xe;b.add(new oe(d));do{var v=t0.findChainEnd(u,d);b.add(new oe(v)),d=v}while(d<u.length-1);return t0.toIntArray(b)},t0.findChainEnd=function(u,d){for(var b=d;b<u.length-1&&u[b].equals2D(u[b+1]);)b++;if(b>=u.length-1)return u.length-1;for(var v=Ft.quadrant(u[b],u[b+1]),S=d+1;S<u.length&&!(!u[S-1].equals2D(u[S])&&Ft.quadrant(u[S-1],u[S])!==v);)S++;return S-1},t0.getChains=function(){if(arguments.length===1){var u=arguments[0];return t0.getChains(u,null)}if(arguments.length===2){for(var d=arguments[0],b=arguments[1],v=new Xe,S=t0.getChainStartIndices(d),F=0;F<S.length-1;F++){var G=new Ei(d,S[F],S[F+1],b);v.add(G)}return v}},t0.toIntArray=function(u){for(var d=new Array(u.size()).fill(null),b=0;b<d.length;b++)d[b]=u.get(b).intValue();return d};var D0=function(){};D0.prototype.computeNodes=function(u){},D0.prototype.getNodedSubstrings=function(){},D0.prototype.interfaces_=function(){return[]},D0.prototype.getClass=function(){return D0};var pa=function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var u=arguments[0];this.setSegmentIntersector(u)}}};pa.prototype.setSegmentIntersector=function(u){this._segInt=u},pa.prototype.interfaces_=function(){return[D0]},pa.prototype.getClass=function(){return pa};var $a=function(u){function d(v){v?u.call(this,v):u.call(this),this._monoChains=new Xe,this._index=new ja,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}u&&(d.__proto__=u),(d.prototype=Object.create(u&&u.prototype)).constructor=d;var b={SegmentOverlapAction:{configurable:!0}};return d.prototype.getMonotoneChains=function(){return this._monoChains},d.prototype.getNodedSubstrings=function(){return Yt.getNodedSubstrings(this._nodedSegStrings)},d.prototype.getIndex=function(){return this._index},d.prototype.add=function(v){for(var S=t0.getChains(v.getCoordinates(),v).iterator();S.hasNext();){var F=S.next();F.setId(this._idCounter++),this._index.insert(F.getEnvelope(),F),this._monoChains.add(F)}},d.prototype.computeNodes=function(v){this._nodedSegStrings=v;for(var S=v.iterator();S.hasNext();)this.add(S.next());this.intersectChains()},d.prototype.intersectChains=function(){for(var v=new Ua(this._segInt),S=this._monoChains.iterator();S.hasNext();)for(var F=S.next(),G=this._index.query(F.getEnvelope()).iterator();G.hasNext();){var K=G.next();if(K.getId()>F.getId()&&(F.computeOverlaps(K,v),this._nOverlaps++),this._segInt.isDone())return null}},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},b.SegmentOverlapAction.get=function(){return Ua},Object.defineProperties(d,b),d}(pa),Ua=function(u){function d(){u.call(this),this._si=null;var b=arguments[0];this._si=b}return u&&(d.__proto__=u),d.prototype=Object.create(u&&u.prototype),d.prototype.constructor=d,d.prototype.overlap=function(){if(arguments.length!==4)return u.prototype.overlap.apply(this,arguments);var b=arguments[0],v=arguments[1],S=arguments[2],F=arguments[3],G=b.getContext(),K=S.getContext();this._si.processIntersections(G,v,K,F)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(fa),Ot=function u(){if(this._quadrantSegments=u.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=u.CAP_ROUND,this._joinStyle=u.JOIN_ROUND,this._mitreLimit=u.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=u.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var d=arguments[0];this.setQuadrantSegments(d)}else if(arguments.length===2){var b=arguments[0],v=arguments[1];this.setQuadrantSegments(b),this.setEndCapStyle(v)}else if(arguments.length===4){var S=arguments[0],F=arguments[1],G=arguments[2],K=arguments[3];this.setQuadrantSegments(S),this.setEndCapStyle(F),this.setJoinStyle(G),this.setMitreLimit(K)}}},f0={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Ot.prototype.getEndCapStyle=function(){return this._endCapStyle},Ot.prototype.isSingleSided=function(){return this._isSingleSided},Ot.prototype.setQuadrantSegments=function(u){this._quadrantSegments=u,this._quadrantSegments===0&&(this._joinStyle=Ot.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Ot.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),u<=0&&(this._quadrantSegments=1),this._joinStyle!==Ot.JOIN_ROUND&&(this._quadrantSegments=Ot.DEFAULT_QUADRANT_SEGMENTS)},Ot.prototype.getJoinStyle=function(){return this._joinStyle},Ot.prototype.setJoinStyle=function(u){this._joinStyle=u},Ot.prototype.setSimplifyFactor=function(u){this._simplifyFactor=u<0?0:u},Ot.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Ot.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Ot.prototype.setEndCapStyle=function(u){this._endCapStyle=u},Ot.prototype.getMitreLimit=function(){return this._mitreLimit},Ot.prototype.setMitreLimit=function(u){this._mitreLimit=u},Ot.prototype.setSingleSided=function(u){this._isSingleSided=u},Ot.prototype.interfaces_=function(){return[]},Ot.prototype.getClass=function(){return Ot},Ot.bufferDistanceError=function(u){var d=Math.PI/2/u;return 1-Math.cos(d/2)},f0.CAP_ROUND.get=function(){return 1},f0.CAP_FLAT.get=function(){return 2},f0.CAP_SQUARE.get=function(){return 3},f0.JOIN_ROUND.get=function(){return 1},f0.JOIN_MITRE.get=function(){return 2},f0.JOIN_BEVEL.get=function(){return 3},f0.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},f0.DEFAULT_MITRE_LIMIT.get=function(){return 5},f0.DEFAULT_SIMPLIFY_FACTOR.get=function(){return .01},Object.defineProperties(Ot,f0);var Vt=function(u){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Pe.COUNTERCLOCKWISE,this._inputLine=u||null},ma={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Vt.prototype.isDeletable=function(u,d,b,v){var S=this._inputLine[u],F=this._inputLine[d],G=this._inputLine[b];return!!this.isConcave(S,F,G)&&!!this.isShallow(S,F,G,v)&&this.isShallowSampled(S,F,u,b,v)},Vt.prototype.deleteShallowConcavities=function(){for(var u=1,d=this.findNextNonDeletedIndex(u),b=this.findNextNonDeletedIndex(d),v=!1;b<this._inputLine.length;){var S=!1;this.isDeletable(u,d,b,this._distanceTol)&&(this._isDeleted[d]=Vt.DELETE,S=!0,v=!0),u=S?b:d,d=this.findNextNonDeletedIndex(u),b=this.findNextNonDeletedIndex(d)}return v},Vt.prototype.isShallowConcavity=function(u,d,b,v){return Pe.computeOrientation(u,d,b)!==this._angleOrientation?!1:Pe.distancePointLine(d,u,b)<v},Vt.prototype.isShallowSampled=function(u,d,b,v,S){var F=Math.trunc((v-b)/Vt.NUM_PTS_TO_CHECK);F<=0&&(F=1);for(var G=b;G<v;G+=F)if(!this.isShallow(u,d,this._inputLine[G],S))return!1;return!0},Vt.prototype.isConcave=function(u,d,b){var v=Pe.computeOrientation(u,d,b)===this._angleOrientation;return v},Vt.prototype.simplify=function(u){this._distanceTol=Math.abs(u),u<0&&(this._angleOrientation=Pe.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var d=!1;do d=this.deleteShallowConcavities();while(d);return this.collapseLine()},Vt.prototype.findNextNonDeletedIndex=function(u){for(var d=u+1;d<this._inputLine.length&&this._isDeleted[d]===Vt.DELETE;)d++;return d},Vt.prototype.isShallow=function(u,d,b,v){return Pe.distancePointLine(d,u,b)<v},Vt.prototype.collapseLine=function(){for(var u=new Vi,d=0;d<this._inputLine.length;d++)this._isDeleted[d]!==Vt.DELETE&&u.add(this._inputLine[d]);return u.toCoordinateArray()},Vt.prototype.interfaces_=function(){return[]},Vt.prototype.getClass=function(){return Vt},Vt.simplify=function(u,d){return new Vt(u).simplify(d)},ma.INIT.get=function(){return 0},ma.DELETE.get=function(){return 1},ma.KEEP.get=function(){return 1},ma.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Vt,ma);var Oi=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Xe},Wa={COORDINATE_ARRAY_TYPE:{configurable:!0}};Oi.prototype.getCoordinates=function(){return this._ptList.toArray(Oi.COORDINATE_ARRAY_TYPE)},Oi.prototype.setPrecisionModel=function(u){this._precisionModel=u},Oi.prototype.addPt=function(u){var d=new $(u);if(this._precisionModel.makePrecise(d),this.isRedundant(d))return null;this._ptList.add(d)},Oi.prototype.revere=function(){},Oi.prototype.addPts=function(u,d){if(d)for(var b=0;b<u.length;b++)this.addPt(u[b]);else for(var v=u.length-1;v>=0;v--)this.addPt(u[v])},Oi.prototype.isRedundant=function(u){if(this._ptList.size()<1)return!1;var d=this._ptList.get(this._ptList.size()-1);return u.distance(d)<this._minimimVertexDistance},Oi.prototype.toString=function(){return new et().createLineString(this.getCoordinates()).toString()},Oi.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var u=new $(this._ptList.get(0)),d=this._ptList.get(this._ptList.size()-1);if(u.equals(d))return null;this._ptList.add(u)},Oi.prototype.setMinimumVertexDistance=function(u){this._minimimVertexDistance=u},Oi.prototype.interfaces_=function(){return[]},Oi.prototype.getClass=function(){return Oi},Wa.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Oi,Wa);var Dt=function(){},H0={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Dt.prototype.interfaces_=function(){return[]},Dt.prototype.getClass=function(){return Dt},Dt.toDegrees=function(u){return 180*u/Math.PI},Dt.normalize=function(u){for(;u>Math.PI;)u-=Dt.PI_TIMES_2;for(;u<=-Math.PI;)u+=Dt.PI_TIMES_2;return u},Dt.angle=function(){if(arguments.length===1){var u=arguments[0];return Math.atan2(u.y,u.x)}if(arguments.length===2){var d=arguments[0],b=arguments[1],v=b.x-d.x,S=b.y-d.y;return Math.atan2(S,v)}},Dt.isAcute=function(u,d,b){var v=u.x-d.x,S=u.y-d.y;return v*(b.x-d.x)+S*(b.y-d.y)>0},Dt.isObtuse=function(u,d,b){var v=u.x-d.x,S=u.y-d.y;return v*(b.x-d.x)+S*(b.y-d.y)<0},Dt.interiorAngle=function(u,d,b){var v=Dt.angle(d,u),S=Dt.angle(d,b);return Math.abs(S-v)},Dt.normalizePositive=function(u){if(u<0){for(;u<0;)u+=Dt.PI_TIMES_2;u>=Dt.PI_TIMES_2&&(u=0)}else{for(;u>=Dt.PI_TIMES_2;)u-=Dt.PI_TIMES_2;u<0&&(u=0)}return u},Dt.angleBetween=function(u,d,b){var v=Dt.angle(d,u),S=Dt.angle(d,b);return Dt.diff(v,S)},Dt.diff=function(u,d){var b=null;return(b=u<d?d-u:u-d)>Math.PI&&(b=2*Math.PI-b),b},Dt.toRadians=function(u){return u*Math.PI/180},Dt.getTurn=function(u,d){var b=Math.sin(d-u);return b>0?Dt.COUNTERCLOCKWISE:b<0?Dt.CLOCKWISE:Dt.NONE},Dt.angleBetweenOriented=function(u,d,b){var v=Dt.angle(d,u),S=Dt.angle(d,b)-v;return S<=-Math.PI?S+Dt.PI_TIMES_2:S>Math.PI?S-Dt.PI_TIMES_2:S},H0.PI_TIMES_2.get=function(){return 2*Math.PI},H0.PI_OVER_2.get=function(){return Math.PI/2},H0.PI_OVER_4.get=function(){return Math.PI/4},H0.COUNTERCLOCKWISE.get=function(){return Pe.COUNTERCLOCKWISE},H0.CLOCKWISE.get=function(){return Pe.CLOCKWISE},H0.NONE.get=function(){return Pe.COLLINEAR},Object.defineProperties(Dt,H0);var zt=function u(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new ut,this._seg1=new ut,this._offset0=new ut,this._offset1=new ut,this._side=0,this._hasNarrowConcaveAngle=!1;var d=arguments[0],b=arguments[1],v=arguments[2];this._precisionModel=d,this._bufParams=b,this._li=new ce,this._filletAngleQuantum=Math.PI/2/b.getQuadrantSegments(),b.getQuadrantSegments()>=8&&b.getJoinStyle()===Ot.JOIN_ROUND&&(this._closingSegLengthFactor=u.MAX_CLOSING_SEG_LEN_FACTOR),this.init(v)},ga={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};zt.prototype.addNextSegment=function(u,d){if(this._s0=this._s1,this._s1=this._s2,this._s2=u,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var b=Pe.computeOrientation(this._s0,this._s1,this._s2),v=b===Pe.CLOCKWISE&&this._side===$e.LEFT||b===Pe.COUNTERCLOCKWISE&&this._side===$e.RIGHT;b===0?this.addCollinear(d):v?this.addOutsideTurn(b,d):this.addInsideTurn(b,d)},zt.prototype.addLineEndCap=function(u,d){var b=new ut(u,d),v=new ut;this.computeOffsetSegment(b,$e.LEFT,this._distance,v);var S=new ut;this.computeOffsetSegment(b,$e.RIGHT,this._distance,S);var F=d.x-u.x,G=d.y-u.y,K=Math.atan2(G,F);switch(this._bufParams.getEndCapStyle()){case Ot.CAP_ROUND:this._segList.addPt(v.p1),this.addFilletArc(d,K+Math.PI/2,K-Math.PI/2,Pe.CLOCKWISE,this._distance),this._segList.addPt(S.p1);break;case Ot.CAP_FLAT:this._segList.addPt(v.p1),this._segList.addPt(S.p1);break;case Ot.CAP_SQUARE:var ue=new $;ue.x=Math.abs(this._distance)*Math.cos(K),ue.y=Math.abs(this._distance)*Math.sin(K);var we=new $(v.p1.x+ue.x,v.p1.y+ue.y),ke=new $(S.p1.x+ue.x,S.p1.y+ue.y);this._segList.addPt(we),this._segList.addPt(ke)}},zt.prototype.getCoordinates=function(){return this._segList.getCoordinates()},zt.prototype.addMitreJoin=function(u,d,b,v){var S=!0,F=null;try{F=Fe.intersection(d.p0,d.p1,b.p0,b.p1),(v<=0?1:F.distance(u)/Math.abs(v))>this._bufParams.getMitreLimit()&&(S=!1)}catch(G){if(!(G instanceof Ve))throw G;F=new $(0,0),S=!1}S?this._segList.addPt(F):this.addLimitedMitreJoin(d,b,v,this._bufParams.getMitreLimit())},zt.prototype.addFilletCorner=function(u,d,b,v,S){var F=d.x-u.x,G=d.y-u.y,K=Math.atan2(G,F),ue=b.x-u.x,we=b.y-u.y,ke=Math.atan2(we,ue);v===Pe.CLOCKWISE?K<=ke&&(K+=2*Math.PI):K>=ke&&(K-=2*Math.PI),this._segList.addPt(d),this.addFilletArc(u,K,ke,v,S),this._segList.addPt(b)},zt.prototype.addOutsideTurn=function(u,d){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*zt.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Ot.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Ot.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(d&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,u,this._distance),this._segList.addPt(this._offset1.p0))},zt.prototype.createSquare=function(u){this._segList.addPt(new $(u.x+this._distance,u.y+this._distance)),this._segList.addPt(new $(u.x+this._distance,u.y-this._distance)),this._segList.addPt(new $(u.x-this._distance,u.y-this._distance)),this._segList.addPt(new $(u.x-this._distance,u.y+this._distance)),this._segList.closeRing()},zt.prototype.addSegments=function(u,d){this._segList.addPts(u,d)},zt.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},zt.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},zt.prototype.initSideSegments=function(u,d,b){this._s1=u,this._s2=d,this._side=b,this._seg1.setCoordinates(u,d),this.computeOffsetSegment(this._seg1,b,this._distance,this._offset1)},zt.prototype.addLimitedMitreJoin=function(u,d,b,v){var S=this._seg0.p1,F=Dt.angle(S,this._seg0.p0),G=Dt.angleBetweenOriented(this._seg0.p0,S,this._seg1.p1)/2,K=Dt.normalize(F+G),ue=Dt.normalize(K+Math.PI),we=v*b,ke=b-we*Math.abs(Math.sin(G)),Ge=S.x+we*Math.cos(ue),tt=S.y+we*Math.sin(ue),it=new $(Ge,tt),ot=new ut(S,it),bt=ot.pointAlongOffset(1,ke),Bt=ot.pointAlongOffset(1,-ke);this._side===$e.LEFT?(this._segList.addPt(bt),this._segList.addPt(Bt)):(this._segList.addPt(Bt),this._segList.addPt(bt))},zt.prototype.computeOffsetSegment=function(u,d,b,v){var S=d===$e.LEFT?1:-1,F=u.p1.x-u.p0.x,G=u.p1.y-u.p0.y,K=Math.sqrt(F*F+G*G),ue=S*b*F/K,we=S*b*G/K;v.p0.x=u.p0.x-we,v.p0.y=u.p0.y+ue,v.p1.x=u.p1.x-we,v.p1.y=u.p1.y+ue},zt.prototype.addFilletArc=function(u,d,b,v,S){var F=v===Pe.CLOCKWISE?-1:1,G=Math.abs(d-b),K=Math.trunc(G/this._filletAngleQuantum+.5);if(K<1)return null;for(var ue=G/K,we=0,ke=new $;we<G;){var Ge=d+F*we;ke.x=u.x+S*Math.cos(Ge),ke.y=u.y+S*Math.sin(Ge),this._segList.addPt(ke),we+=ue}},zt.prototype.addInsideTurn=function(u,d){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*zt.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var b=new $((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(b);var v=new $((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(v)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},zt.prototype.createCircle=function(u){var d=new $(u.x+this._distance,u.y);this._segList.addPt(d),this.addFilletArc(u,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},zt.prototype.addBevelJoin=function(u,d){this._segList.addPt(u.p1),this._segList.addPt(d.p0)},zt.prototype.init=function(u){this._distance=u,this._maxCurveSegmentError=u*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Oi,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(u*zt.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},zt.prototype.addCollinear=function(u){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Ot.JOIN_BEVEL||this._bufParams.getJoinStyle()===Ot.JOIN_MITRE?(u&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Pe.CLOCKWISE,this._distance))},zt.prototype.closeRing=function(){this._segList.closeRing()},zt.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},zt.prototype.interfaces_=function(){return[]},zt.prototype.getClass=function(){return zt},ga.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return .001},ga.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return .001},ga.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},ga.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(zt,ga);var bi=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var u=arguments[0],d=arguments[1];this._precisionModel=u,this._bufParams=d};bi.prototype.getOffsetCurve=function(u,d){if(this._distance=d,d===0)return null;var b=d<0,v=Math.abs(d),S=this.getSegGen(v);u.length<=1?this.computePointCurve(u[0],S):this.computeOffsetCurve(u,b,S);var F=S.getCoordinates();return b&&Et.reverse(F),F},bi.prototype.computeSingleSidedBufferCurve=function(u,d,b){var v=this.simplifyTolerance(this._distance);if(d){b.addSegments(u,!0);var S=Vt.simplify(u,-v),F=S.length-1;b.initSideSegments(S[F],S[F-1],$e.LEFT),b.addFirstSegment();for(var G=F-2;G>=0;G--)b.addNextSegment(S[G],!0)}else{b.addSegments(u,!1);var K=Vt.simplify(u,v),ue=K.length-1;b.initSideSegments(K[0],K[1],$e.LEFT),b.addFirstSegment();for(var we=2;we<=ue;we++)b.addNextSegment(K[we],!0)}b.addLastSegment(),b.closeRing()},bi.prototype.computeRingBufferCurve=function(u,d,b){var v=this.simplifyTolerance(this._distance);d===$e.RIGHT&&(v=-v);var S=Vt.simplify(u,v),F=S.length-1;b.initSideSegments(S[F-1],S[0],d);for(var G=1;G<=F;G++){var K=G!==1;b.addNextSegment(S[G],K)}b.closeRing()},bi.prototype.computeLineBufferCurve=function(u,d){var b=this.simplifyTolerance(this._distance),v=Vt.simplify(u,b),S=v.length-1;d.initSideSegments(v[0],v[1],$e.LEFT);for(var F=2;F<=S;F++)d.addNextSegment(v[F],!0);d.addLastSegment(),d.addLineEndCap(v[S-1],v[S]);var G=Vt.simplify(u,-b),K=G.length-1;d.initSideSegments(G[K],G[K-1],$e.LEFT);for(var ue=K-2;ue>=0;ue--)d.addNextSegment(G[ue],!0);d.addLastSegment(),d.addLineEndCap(G[1],G[0]),d.closeRing()},bi.prototype.computePointCurve=function(u,d){switch(this._bufParams.getEndCapStyle()){case Ot.CAP_ROUND:d.createCircle(u);break;case Ot.CAP_SQUARE:d.createSquare(u)}},bi.prototype.getLineCurve=function(u,d){if(this._distance=d,d<0&&!this._bufParams.isSingleSided()||d===0)return null;var b=Math.abs(d),v=this.getSegGen(b);if(u.length<=1)this.computePointCurve(u[0],v);else if(this._bufParams.isSingleSided()){var S=d<0;this.computeSingleSidedBufferCurve(u,S,v)}else this.computeLineBufferCurve(u,v);return v.getCoordinates()},bi.prototype.getBufferParameters=function(){return this._bufParams},bi.prototype.simplifyTolerance=function(u){return u*this._bufParams.getSimplifyFactor()},bi.prototype.getRingCurve=function(u,d,b){if(this._distance=b,u.length<=2)return this.getLineCurve(u,b);if(b===0)return bi.copyCoordinates(u);var v=this.getSegGen(b);return this.computeRingBufferCurve(u,d,v),v.getCoordinates()},bi.prototype.computeOffsetCurve=function(u,d,b){var v=this.simplifyTolerance(this._distance);if(d){var S=Vt.simplify(u,-v),F=S.length-1;b.initSideSegments(S[F],S[F-1],$e.LEFT),b.addFirstSegment();for(var G=F-2;G>=0;G--)b.addNextSegment(S[G],!0)}else{var K=Vt.simplify(u,v),ue=K.length-1;b.initSideSegments(K[0],K[1],$e.LEFT),b.addFirstSegment();for(var we=2;we<=ue;we++)b.addNextSegment(K[we],!0)}b.addLastSegment()},bi.prototype.getSegGen=function(u){return new zt(this._precisionModel,this._bufParams,u)},bi.prototype.interfaces_=function(){return[]},bi.prototype.getClass=function(){return bi},bi.copyCoordinates=function(u){for(var d=new Array(u.length).fill(null),b=0;b<d.length;b++)d[b]=new $(u[b]);return d};var G0=function(){this._subgraphs=null,this._seg=new ut,this._cga=new Pe;var u=arguments[0];this._subgraphs=u},Ya={DepthSegment:{configurable:!0}};G0.prototype.findStabbedSegments=function(){if(arguments.length===1){for(var u=arguments[0],d=new Xe,b=this._subgraphs.iterator();b.hasNext();){var v=b.next(),S=v.getEnvelope();u.y<S.getMinY()||u.y>S.getMaxY()||this.findStabbedSegments(u,v.getDirectedEdges(),d)}return d}if(arguments.length===3){if(q(arguments[2],Zt)&&arguments[0]instanceof $&&arguments[1]instanceof ka){for(var F=arguments[0],G=arguments[1],K=arguments[2],ue=G.getEdge().getCoordinates(),we=0;we<ue.length-1;we++)if(this._seg.p0=ue[we],this._seg.p1=ue[we+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<F.x)&&!(this._seg.isHorizontal()||F.y<this._seg.p0.y||F.y>this._seg.p1.y||Pe.computeOrientation(this._seg.p0,this._seg.p1,F)===Pe.RIGHT)){var ke=G.getDepth($e.LEFT);this._seg.p0.equals(ue[we])||(ke=G.getDepth($e.RIGHT));var Ge=new O0(this._seg,ke);K.add(Ge)}}else if(q(arguments[2],Zt)&&arguments[0]instanceof $&&q(arguments[1],Zt))for(var tt=arguments[0],it=arguments[1],ot=arguments[2],bt=it.iterator();bt.hasNext();){var Bt=bt.next();Bt.isForward()&&this.findStabbedSegments(tt,Bt,ot)}}},G0.prototype.getDepth=function(u){var d=this.findStabbedSegments(u);return d.size()===0?0:Yi.min(d)._leftDepth},G0.prototype.interfaces_=function(){return[]},G0.prototype.getClass=function(){return G0},Ya.DepthSegment.get=function(){return O0},Object.defineProperties(G0,Ya);var O0=function(){this._upwardSeg=null,this._leftDepth=null;var u=arguments[0],d=arguments[1];this._upwardSeg=new ut(u),this._leftDepth=d};O0.prototype.compareTo=function(u){var d=u;if(this._upwardSeg.minX()>=d._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=d._upwardSeg.minX())return-1;var b=this._upwardSeg.orientationIndex(d._upwardSeg);return b!==0||(b=-1*d._upwardSeg.orientationIndex(this._upwardSeg))!=0?b:this._upwardSeg.compareTo(d._upwardSeg)},O0.prototype.compareX=function(u,d){var b=u.p0.compareTo(d.p0);return b!==0?b:u.p1.compareTo(d.p1)},O0.prototype.toString=function(){return this._upwardSeg.toString()},O0.prototype.interfaces_=function(){return[N]},O0.prototype.getClass=function(){return O0};var Nt=function(u,d,b){this.p0=u||null,this.p1=d||null,this.p2=b||null};Nt.prototype.area=function(){return Nt.area(this.p0,this.p1,this.p2)},Nt.prototype.signedArea=function(){return Nt.signedArea(this.p0,this.p1,this.p2)},Nt.prototype.interpolateZ=function(u){if(u===null)throw new L("Supplied point is null.");return Nt.interpolateZ(u,this.p0,this.p1,this.p2)},Nt.prototype.longestSideLength=function(){return Nt.longestSideLength(this.p0,this.p1,this.p2)},Nt.prototype.isAcute=function(){return Nt.isAcute(this.p0,this.p1,this.p2)},Nt.prototype.circumcentre=function(){return Nt.circumcentre(this.p0,this.p1,this.p2)},Nt.prototype.area3D=function(){return Nt.area3D(this.p0,this.p1,this.p2)},Nt.prototype.centroid=function(){return Nt.centroid(this.p0,this.p1,this.p2)},Nt.prototype.inCentre=function(){return Nt.inCentre(this.p0,this.p1,this.p2)},Nt.prototype.interfaces_=function(){return[]},Nt.prototype.getClass=function(){return Nt},Nt.area=function(u,d,b){return Math.abs(((b.x-u.x)*(d.y-u.y)-(d.x-u.x)*(b.y-u.y))/2)},Nt.signedArea=function(u,d,b){return((b.x-u.x)*(d.y-u.y)-(d.x-u.x)*(b.y-u.y))/2},Nt.det=function(u,d,b,v){return u*v-d*b},Nt.interpolateZ=function(u,d,b,v){var S=d.x,F=d.y,G=b.x-S,K=v.x-S,ue=b.y-F,we=v.y-F,ke=G*we-K*ue,Ge=u.x-S,tt=u.y-F,it=(we*Ge-K*tt)/ke,ot=(-ue*Ge+G*tt)/ke;return d.z+it*(b.z-d.z)+ot*(v.z-d.z)},Nt.longestSideLength=function(u,d,b){var v=u.distance(d),S=d.distance(b),F=b.distance(u),G=v;return S>G&&(G=S),F>G&&(G=F),G},Nt.isAcute=function(u,d,b){return!!Dt.isAcute(u,d,b)&&!!Dt.isAcute(d,b,u)&&!!Dt.isAcute(b,u,d)},Nt.circumcentre=function(u,d,b){var v=b.x,S=b.y,F=u.x-v,G=u.y-S,K=d.x-v,ue=d.y-S,we=2*Nt.det(F,G,K,ue),ke=Nt.det(G,F*F+G*G,ue,K*K+ue*ue),Ge=Nt.det(F,F*F+G*G,K,K*K+ue*ue);return new $(v-ke/we,S+Ge/we)},Nt.perpendicularBisector=function(u,d){var b=d.x-u.x,v=d.y-u.y,S=new Fe(u.x+b/2,u.y+v/2,1),F=new Fe(u.x-v+b/2,u.y+b+v/2,1);return new Fe(S,F)},Nt.angleBisector=function(u,d,b){var v=d.distance(u),S=v/(v+d.distance(b)),F=b.x-u.x,G=b.y-u.y;return new $(u.x+S*F,u.y+S*G)},Nt.area3D=function(u,d,b){var v=d.x-u.x,S=d.y-u.y,F=d.z-u.z,G=b.x-u.x,K=b.y-u.y,ue=b.z-u.z,we=S*ue-F*K,ke=F*G-v*ue,Ge=v*K-S*G,tt=we*we+ke*ke+Ge*Ge,it=Math.sqrt(tt)/2;return it},Nt.centroid=function(u,d,b){var v=(u.x+d.x+b.x)/3,S=(u.y+d.y+b.y)/3;return new $(v,S)},Nt.inCentre=function(u,d,b){var v=d.distance(b),S=u.distance(b),F=u.distance(d),G=v+S+F,K=(v*u.x+S*d.x+F*b.x)/G,ue=(v*u.y+S*d.y+F*b.y)/G;return new $(K,ue)};var zi=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Xe;var u=arguments[0],d=arguments[1],b=arguments[2];this._inputGeom=u,this._distance=d,this._curveBuilder=b};zi.prototype.addPoint=function(u){if(this._distance<=0)return null;var d=u.getCoordinates(),b=this._curveBuilder.getLineCurve(d,this._distance);this.addCurve(b,z.EXTERIOR,z.INTERIOR)},zi.prototype.addPolygon=function(u){var d=this._distance,b=$e.LEFT;this._distance<0&&(d=-this._distance,b=$e.RIGHT);var v=u.getExteriorRing(),S=Et.removeRepeatedPoints(v.getCoordinates());if(this._distance<0&&this.isErodedCompletely(v,this._distance)||this._distance<=0&&S.length<3)return null;this.addPolygonRing(S,d,b,z.EXTERIOR,z.INTERIOR);for(var F=0;F<u.getNumInteriorRing();F++){var G=u.getInteriorRingN(F),K=Et.removeRepeatedPoints(G.getCoordinates());this._distance>0&&this.isErodedCompletely(G,-this._distance)||this.addPolygonRing(K,d,$e.opposite(b),z.INTERIOR,z.EXTERIOR)}},zi.prototype.isTriangleErodedCompletely=function(u,d){var b=new Nt(u[0],u[1],u[2]),v=b.inCentre();return Pe.distancePointLine(v,b.p0,b.p1)<Math.abs(d)},zi.prototype.addLineString=function(u){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var d=Et.removeRepeatedPoints(u.getCoordinates()),b=this._curveBuilder.getLineCurve(d,this._distance);this.addCurve(b,z.EXTERIOR,z.INTERIOR)},zi.prototype.addCurve=function(u,d,b){if(u===null||u.length<2)return null;var v=new Yt(u,new $t(0,z.BOUNDARY,d,b));this._curveList.add(v)},zi.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},zi.prototype.addPolygonRing=function(u,d,b,v,S){if(d===0&&u.length<Wi.MINIMUM_VALID_SIZE)return null;var F=v,G=S;u.length>=Wi.MINIMUM_VALID_SIZE&&Pe.isCCW(u)&&(F=S,G=v,b=$e.opposite(b));var K=this._curveBuilder.getRingCurve(u,b,d);this.addCurve(K,F,G)},zi.prototype.add=function(u){if(u.isEmpty())return null;u instanceof Ut?this.addPolygon(u):u instanceof Gt?this.addLineString(u):u instanceof Kt?this.addPoint(u):u instanceof C0?this.addCollection(u):u instanceof u0?this.addCollection(u):u instanceof ae?this.addCollection(u):u instanceof si&&this.addCollection(u)},zi.prototype.isErodedCompletely=function(u,d){var b=u.getCoordinates();if(b.length<4)return d<0;if(b.length===4)return this.isTriangleErodedCompletely(b,d);var v=u.getEnvelopeInternal(),S=Math.min(v.getHeight(),v.getWidth());return d<0&&2*Math.abs(d)>S},zi.prototype.addCollection=function(u){for(var d=0;d<u.getNumGeometries();d++){var b=u.getGeometryN(d);this.add(b)}},zi.prototype.interfaces_=function(){return[]},zi.prototype.getClass=function(){return zi};var sa=function(){};sa.prototype.locate=function(u){},sa.prototype.interfaces_=function(){return[]},sa.prototype.getClass=function(){return sa};var n0=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var u=arguments[0];this._parent=u,this._atStart=!0,this._index=0,this._max=u.getNumGeometries()};n0.prototype.next=function(){if(this._atStart)return this._atStart=!1,n0.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new n;var u=this._parent.getGeometryN(this._index++);return u instanceof si?(this._subcollectionIterator=new n0(u),this._subcollectionIterator.next()):u},n0.prototype.remove=function(){throw new Error(this.getClass().getName())},n0.prototype.hasNext=function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},n0.prototype.interfaces_=function(){return[Bi]},n0.prototype.getClass=function(){return n0},n0.isAtomic=function(u){return!(u instanceof si)};var Ni=function(){this._geom=null;var u=arguments[0];this._geom=u};Ni.prototype.locate=function(u){return Ni.locate(u,this._geom)},Ni.prototype.interfaces_=function(){return[sa]},Ni.prototype.getClass=function(){return Ni},Ni.isPointInRing=function(u,d){return!!d.getEnvelopeInternal().intersects(u)&&Pe.isPointInRing(u,d.getCoordinates())},Ni.containsPointInPolygon=function(u,d){if(d.isEmpty())return!1;var b=d.getExteriorRing();if(!Ni.isPointInRing(u,b))return!1;for(var v=0;v<d.getNumInteriorRing();v++){var S=d.getInteriorRingN(v);if(Ni.isPointInRing(u,S))return!1}return!0},Ni.containsPoint=function(u,d){if(d instanceof Ut)return Ni.containsPointInPolygon(u,d);if(d instanceof si)for(var b=new n0(d);b.hasNext();){var v=b.next();if(v!==d&&Ni.containsPoint(u,v))return!0}return!1},Ni.locate=function(u,d){return d.isEmpty()?z.EXTERIOR:Ni.containsPoint(u,d)?z.INTERIOR:z.EXTERIOR};var xi=function(){this._edgeMap=new g,this._edgeList=null,this._ptInAreaLocation=[z.NONE,z.NONE]};xi.prototype.getNextCW=function(u){this.getEdges();var d=this._edgeList.indexOf(u),b=d-1;return d===0&&(b=this._edgeList.size()-1),this._edgeList.get(b)},xi.prototype.propagateSideLabels=function(u){for(var d=z.NONE,b=this.iterator();b.hasNext();){var v=b.next().getLabel();v.isArea(u)&&v.getLocation(u,$e.LEFT)!==z.NONE&&(d=v.getLocation(u,$e.LEFT))}if(d===z.NONE)return null;for(var S=d,F=this.iterator();F.hasNext();){var G=F.next(),K=G.getLabel();if(K.getLocation(u,$e.ON)===z.NONE&&K.setLocation(u,$e.ON,S),K.isArea(u)){var ue=K.getLocation(u,$e.LEFT),we=K.getLocation(u,$e.RIGHT);if(we!==z.NONE){if(we!==S)throw new h0("side location conflict",G.getCoordinate());ue===z.NONE&&j.shouldNeverReachHere("found single null side (at "+G.getCoordinate()+")"),S=ue}else j.isTrue(K.getLocation(u,$e.LEFT)===z.NONE,"found single null side"),K.setLocation(u,$e.RIGHT,S),K.setLocation(u,$e.LEFT,S)}}},xi.prototype.getCoordinate=function(){var u=this.iterator();return u.hasNext()?u.next().getCoordinate():null},xi.prototype.print=function(u){ye.out.println("EdgeEndStar:   "+this.getCoordinate());for(var d=this.iterator();d.hasNext();)d.next().print(u)},xi.prototype.isAreaLabelsConsistent=function(u){return this.computeEdgeEndLabels(u.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},xi.prototype.checkAreaLabelsConsistent=function(u){var d=this.getEdges();if(d.size()<=0)return!0;var b=d.size()-1,v=d.get(b).getLabel().getLocation(u,$e.LEFT);j.isTrue(v!==z.NONE,"Found unlabelled area edge");for(var S=v,F=this.iterator();F.hasNext();){var G=F.next().getLabel();j.isTrue(G.isArea(u),"Found non-area edge");var K=G.getLocation(u,$e.LEFT),ue=G.getLocation(u,$e.RIGHT);if(K===ue||ue!==S)return!1;S=K}return!0},xi.prototype.findIndex=function(u){this.iterator();for(var d=0;d<this._edgeList.size();d++)if(this._edgeList.get(d)===u)return d;return-1},xi.prototype.iterator=function(){return this.getEdges().iterator()},xi.prototype.getEdges=function(){return this._edgeList===null&&(this._edgeList=new Xe(this._edgeMap.values())),this._edgeList},xi.prototype.getLocation=function(u,d,b){return this._ptInAreaLocation[u]===z.NONE&&(this._ptInAreaLocation[u]=Ni.locate(d,b[u].getGeometry())),this._ptInAreaLocation[u]},xi.prototype.toString=function(){var u=new xe;u.append("EdgeEndStar:   "+this.getCoordinate()),u.append(`
`);for(var d=this.iterator();d.hasNext();){var b=d.next();u.append(b),u.append(`
`)}return u.toString()},xi.prototype.computeEdgeEndLabels=function(u){for(var d=this.iterator();d.hasNext();)d.next().computeLabel(u)},xi.prototype.computeLabelling=function(u){this.computeEdgeEndLabels(u[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var d=[!1,!1],b=this.iterator();b.hasNext();)for(var v=b.next().getLabel(),S=0;S<2;S++)v.isLine(S)&&v.getLocation(S)===z.BOUNDARY&&(d[S]=!0);for(var F=this.iterator();F.hasNext();)for(var G=F.next(),K=G.getLabel(),ue=0;ue<2;ue++)if(K.isAnyNull(ue)){var we=z.NONE;if(d[ue])we=z.EXTERIOR;else{var ke=G.getCoordinate();we=this.getLocation(ue,ke,u)}K.setAllLocationsIfNull(ue,we)}},xi.prototype.getDegree=function(){return this._edgeMap.size()},xi.prototype.insertEdgeEnd=function(u,d){this._edgeMap.put(u,d),this._edgeList=null},xi.prototype.interfaces_=function(){return[]},xi.prototype.getClass=function(){return xi};var is=function(u){function d(){u.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return u&&(d.__proto__=u),d.prototype=Object.create(u&&u.prototype),d.prototype.constructor=d,d.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var b=null,v=null,S=this._SCANNING_FOR_INCOMING,F=0;F<this._resultAreaEdgeList.size();F++){var G=this._resultAreaEdgeList.get(F),K=G.getSym();if(G.getLabel().isArea())switch(b===null&&G.isInResult()&&(b=G),S){case this._SCANNING_FOR_INCOMING:if(!K.isInResult())continue;v=K,S=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!G.isInResult())continue;v.setNext(G),S=this._SCANNING_FOR_INCOMING}}if(S===this._LINKING_TO_OUTGOING){if(b===null)throw new h0("no outgoing dirEdge found",this.getCoordinate());j.isTrue(b.isInResult(),"unable to link last incoming dirEdge"),v.setNext(b)}},d.prototype.insert=function(b){var v=b;this.insertEdgeEnd(v,v)},d.prototype.getRightmostEdge=function(){var b=this.getEdges(),v=b.size();if(v<1)return null;var S=b.get(0);if(v===1)return S;var F=b.get(v-1),G=S.getQuadrant(),K=F.getQuadrant();return Ft.isNorthern(G)&&Ft.isNorthern(K)?S:Ft.isNorthern(G)||Ft.isNorthern(K)?S.getDy()!==0?S:F.getDy()!==0?F:(j.shouldNeverReachHere("found two horizontal edges incident on node"),null):F},d.prototype.print=function(b){ye.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var v=this.iterator();v.hasNext();){var S=v.next();b.print("out "),S.print(b),b.println(),b.print("in "),S.getSym().print(b),b.println()}},d.prototype.getResultAreaEdges=function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Xe;for(var b=this.iterator();b.hasNext();){var v=b.next();(v.isInResult()||v.getSym().isInResult())&&this._resultAreaEdgeList.add(v)}return this._resultAreaEdgeList},d.prototype.updateLabelling=function(b){for(var v=this.iterator();v.hasNext();){var S=v.next().getLabel();S.setAllLocationsIfNull(0,b.getLocation(0)),S.setAllLocationsIfNull(1,b.getLocation(1))}},d.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var b=null,v=null,S=this._edgeList.size()-1;S>=0;S--){var F=this._edgeList.get(S),G=F.getSym();v===null&&(v=G),b!==null&&G.setNext(b),b=F}v.setNext(b)},d.prototype.computeDepths=function(){if(arguments.length===1){var b=arguments[0],v=this.findIndex(b),S=b.getDepth($e.LEFT),F=b.getDepth($e.RIGHT),G=this.computeDepths(v+1,this._edgeList.size(),S);if(this.computeDepths(0,v,G)!==F)throw new h0("depth mismatch at "+b.getCoordinate())}else if(arguments.length===3){for(var K=arguments[0],ue=arguments[1],we=arguments[2],ke=K;ke<ue;ke++){var Ge=this._edgeList.get(ke);Ge.setEdgeDepths($e.RIGHT,we),we=Ge.getDepth($e.LEFT)}return we}},d.prototype.mergeSymLabels=function(){for(var b=this.iterator();b.hasNext();){var v=b.next();v.getLabel().merge(v.getSym().getLabel())}},d.prototype.linkMinimalDirectedEdges=function(b){for(var v=null,S=null,F=this._SCANNING_FOR_INCOMING,G=this._resultAreaEdgeList.size()-1;G>=0;G--){var K=this._resultAreaEdgeList.get(G),ue=K.getSym();switch(v===null&&K.getEdgeRing()===b&&(v=K),F){case this._SCANNING_FOR_INCOMING:if(ue.getEdgeRing()!==b)continue;S=ue,F=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(K.getEdgeRing()!==b)continue;S.setNextMin(K),F=this._SCANNING_FOR_INCOMING}}F===this._LINKING_TO_OUTGOING&&(j.isTrue(v!==null,"found null for first outgoing dirEdge"),j.isTrue(v.getEdgeRing()===b,"unable to link last incoming dirEdge"),S.setNextMin(v))},d.prototype.getOutgoingDegree=function(){if(arguments.length===0){for(var b=0,v=this.iterator();v.hasNext();)v.next().isInResult()&&b++;return b}if(arguments.length===1){for(var S=arguments[0],F=0,G=this.iterator();G.hasNext();)G.next().getEdgeRing()===S&&F++;return F}},d.prototype.getLabel=function(){return this._label},d.prototype.findCoveredLineEdges=function(){for(var b=z.NONE,v=this.iterator();v.hasNext();){var S=v.next(),F=S.getSym();if(!S.isLineEdge()){if(S.isInResult()){b=z.INTERIOR;break}if(F.isInResult()){b=z.EXTERIOR;break}}}if(b===z.NONE)return null;for(var G=b,K=this.iterator();K.hasNext();){var ue=K.next(),we=ue.getSym();ue.isLineEdge()?ue.getEdge().setCovered(G===z.INTERIOR):(ue.isInResult()&&(G=z.EXTERIOR),we.isInResult()&&(G=z.INTERIOR))}},d.prototype.computeLabelling=function(b){u.prototype.computeLabelling.call(this,b),this._label=new $t(z.NONE);for(var v=this.iterator();v.hasNext();)for(var S=v.next().getEdge().getLabel(),F=0;F<2;F++){var G=S.getLocation(F);G!==z.INTERIOR&&G!==z.BOUNDARY||this._label.setLocation(F,z.INTERIOR)}},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(xi),Xa=function(u){function d(){u.apply(this,arguments)}return u&&(d.__proto__=u),d.prototype=Object.create(u&&u.prototype),d.prototype.constructor=d,d.prototype.createNode=function(b){return new Sa(b,new is)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(ia),E0=function u(){this._pts=null,this._orientation=null;var d=arguments[0];this._pts=d,this._orientation=u.orientation(d)};E0.prototype.compareTo=function(u){var d=u;return E0.compareOriented(this._pts,this._orientation,d._pts,d._orientation)},E0.prototype.interfaces_=function(){return[N]},E0.prototype.getClass=function(){return E0},E0.orientation=function(u){return Et.increasingDirection(u)===1},E0.compareOriented=function(u,d,b,v){for(var S=d?1:-1,F=v?1:-1,G=d?u.length:-1,K=v?b.length:-1,ue=d?0:u.length-1,we=v?0:b.length-1;;){var ke=u[ue].compareTo(b[we]);if(ke!==0)return ke;var Ge=(ue+=S)===G,tt=(we+=F)===K;if(Ge&&!tt)return-1;if(!Ge&&tt)return 1;if(Ge&&tt)return 0}};var Xi=function(){this._edges=new Xe,this._ocaMap=new g};Xi.prototype.print=function(u){u.print("MULTILINESTRING ( ");for(var d=0;d<this._edges.size();d++){var b=this._edges.get(d);d>0&&u.print(","),u.print("(");for(var v=b.getCoordinates(),S=0;S<v.length;S++)S>0&&u.print(","),u.print(v[S].x+" "+v[S].y);u.println(")")}u.print(")  ")},Xi.prototype.addAll=function(u){for(var d=u.iterator();d.hasNext();)this.add(d.next())},Xi.prototype.findEdgeIndex=function(u){for(var d=0;d<this._edges.size();d++)if(this._edges.get(d).equals(u))return d;return-1},Xi.prototype.iterator=function(){return this._edges.iterator()},Xi.prototype.getEdges=function(){return this._edges},Xi.prototype.get=function(u){return this._edges.get(u)},Xi.prototype.findEqualEdge=function(u){var d=new E0(u.getCoordinates());return this._ocaMap.get(d)},Xi.prototype.add=function(u){this._edges.add(u);var d=new E0(u.getCoordinates());this._ocaMap.put(d,u)},Xi.prototype.interfaces_=function(){return[]},Xi.prototype.getClass=function(){return Xi};var N0=function(){};N0.prototype.processIntersections=function(u,d,b,v){},N0.prototype.isDone=function(){},N0.prototype.interfaces_=function(){return[]},N0.prototype.getClass=function(){return N0};var ki=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var u=arguments[0];this._li=u};ki.prototype.isTrivialIntersection=function(u,d,b,v){if(u===b&&this._li.getIntersectionNum()===1){if(ki.isAdjacentSegments(d,v))return!0;if(u.isClosed()){var S=u.size()-1;if(d===0&&v===S||v===0&&d===S)return!0}}return!1},ki.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ki.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ki.prototype.getLineIntersector=function(){return this._li},ki.prototype.hasProperIntersection=function(){return this._hasProper},ki.prototype.processIntersections=function(u,d,b,v){if(u===b&&d===v)return null;this.numTests++;var S=u.getCoordinates()[d],F=u.getCoordinates()[d+1],G=b.getCoordinates()[v],K=b.getCoordinates()[v+1];this._li.computeIntersection(S,F,G,K),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(u,d,b,v)||(this._hasIntersection=!0,u.addIntersections(this._li,d,0),b.addIntersections(this._li,v,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},ki.prototype.hasIntersection=function(){return this._hasIntersection},ki.prototype.isDone=function(){return!1},ki.prototype.hasInteriorIntersection=function(){return this._hasInterior},ki.prototype.interfaces_=function(){return[N0]},ki.prototype.getClass=function(){return ki},ki.isAdjacentSegments=function(u,d){return Math.abs(u-d)===1};var St=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var u=arguments[0],d=arguments[1],b=arguments[2];this.coord=new $(u),this.segmentIndex=d,this.dist=b};St.prototype.getSegmentIndex=function(){return this.segmentIndex},St.prototype.getCoordinate=function(){return this.coord},St.prototype.print=function(u){u.print(this.coord),u.print(" seg # = "+this.segmentIndex),u.println(" dist = "+this.dist)},St.prototype.compareTo=function(u){var d=u;return this.compare(d.segmentIndex,d.dist)},St.prototype.isEndPoint=function(u){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===u},St.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},St.prototype.getDistance=function(){return this.dist},St.prototype.compare=function(u,d){return this.segmentIndex<u?-1:this.segmentIndex>u?1:this.dist<d?-1:this.dist>d?1:0},St.prototype.interfaces_=function(){return[N]},St.prototype.getClass=function(){return St};var Zi=function(){this._nodeMap=new g,this.edge=null;var u=arguments[0];this.edge=u};Zi.prototype.print=function(u){u.println("Intersections:");for(var d=this.iterator();d.hasNext();)d.next().print(u)},Zi.prototype.iterator=function(){return this._nodeMap.values().iterator()},Zi.prototype.addSplitEdges=function(u){this.addEndpoints();for(var d=this.iterator(),b=d.next();d.hasNext();){var v=d.next(),S=this.createSplitEdge(b,v);u.add(S),b=v}},Zi.prototype.addEndpoints=function(){var u=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[u],u,0)},Zi.prototype.createSplitEdge=function(u,d){var b=d.segmentIndex-u.segmentIndex+2,v=this.edge.pts[d.segmentIndex],S=d.dist>0||!d.coord.equals2D(v);S||b--;var F=new Array(b).fill(null),G=0;F[G++]=new $(u.coord);for(var K=u.segmentIndex+1;K<=d.segmentIndex;K++)F[G++]=this.edge.pts[K];return S&&(F[G]=d.coord),new Za(F,new $t(this.edge._label))},Zi.prototype.add=function(u,d,b){var v=new St(u,d,b),S=this._nodeMap.get(v);return S!==null?S:(this._nodeMap.put(v,v),v)},Zi.prototype.isIntersection=function(u){for(var d=this.iterator();d.hasNext();)if(d.next().coord.equals(u))return!0;return!1},Zi.prototype.interfaces_=function(){return[]},Zi.prototype.getClass=function(){return Zi};var r0=function(){};r0.prototype.getChainStartIndices=function(u){var d=0,b=new Xe;b.add(new oe(d));do{var v=this.findChainEnd(u,d);b.add(new oe(v)),d=v}while(d<u.length-1);return r0.toIntArray(b)},r0.prototype.findChainEnd=function(u,d){for(var b=Ft.quadrant(u[d],u[d+1]),v=d+1;v<u.length&&Ft.quadrant(u[v-1],u[v])===b;)v++;return v-1},r0.prototype.interfaces_=function(){return[]},r0.prototype.getClass=function(){return r0},r0.toIntArray=function(u){for(var d=new Array(u.size()).fill(null),b=0;b<d.length;b++)d[b]=u.get(b).intValue();return d};var o0=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Ce,this.env2=new Ce;var u=arguments[0];this.e=u,this.pts=u.getCoordinates();var d=new r0;this.startIndex=d.getChainStartIndices(this.pts)};o0.prototype.getCoordinates=function(){return this.pts},o0.prototype.getMaxX=function(u){var d=this.pts[this.startIndex[u]].x,b=this.pts[this.startIndex[u+1]].x;return d>b?d:b},o0.prototype.getMinX=function(u){var d=this.pts[this.startIndex[u]].x,b=this.pts[this.startIndex[u+1]].x;return d<b?d:b},o0.prototype.computeIntersectsForChain=function(){if(arguments.length===4){var u=arguments[0],d=arguments[1],b=arguments[2],v=arguments[3];this.computeIntersectsForChain(this.startIndex[u],this.startIndex[u+1],d,d.startIndex[b],d.startIndex[b+1],v)}else if(arguments.length===6){var S=arguments[0],F=arguments[1],G=arguments[2],K=arguments[3],ue=arguments[4],we=arguments[5],ke=this.pts[S],Ge=this.pts[F],tt=G.pts[K],it=G.pts[ue];if(F-S==1&&ue-K==1)return we.addIntersections(this.e,S,G.e,K),null;if(this.env1.init(ke,Ge),this.env2.init(tt,it),!this.env1.intersects(this.env2))return null;var ot=Math.trunc((S+F)/2),bt=Math.trunc((K+ue)/2);S<ot&&(K<bt&&this.computeIntersectsForChain(S,ot,G,K,bt,we),bt<ue&&this.computeIntersectsForChain(S,ot,G,bt,ue,we)),ot<F&&(K<bt&&this.computeIntersectsForChain(ot,F,G,K,bt,we),bt<ue&&this.computeIntersectsForChain(ot,F,G,bt,ue,we))}},o0.prototype.getStartIndexes=function(){return this.startIndex},o0.prototype.computeIntersects=function(u,d){for(var b=0;b<this.startIndex.length-1;b++)for(var v=0;v<u.startIndex.length-1;v++)this.computeIntersectsForChain(b,u,v,d)},o0.prototype.interfaces_=function(){return[]},o0.prototype.getClass=function(){return o0};var li=function u(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var d=0;d<2;d++)for(var b=0;b<3;b++)this._depth[d][b]=u.NULL_VALUE},ls={NULL_VALUE:{configurable:!0}};li.prototype.getDepth=function(u,d){return this._depth[u][d]},li.prototype.setDepth=function(u,d,b){this._depth[u][d]=b},li.prototype.isNull=function(){if(arguments.length===0){for(var u=0;u<2;u++)for(var d=0;d<3;d++)if(this._depth[u][d]!==li.NULL_VALUE)return!1;return!0}if(arguments.length===1){var b=arguments[0];return this._depth[b][1]===li.NULL_VALUE}if(arguments.length===2){var v=arguments[0],S=arguments[1];return this._depth[v][S]===li.NULL_VALUE}},li.prototype.normalize=function(){for(var u=0;u<2;u++)if(!this.isNull(u)){var d=this._depth[u][1];this._depth[u][2]<d&&(d=this._depth[u][2]),d<0&&(d=0);for(var b=1;b<3;b++){var v=0;this._depth[u][b]>d&&(v=1),this._depth[u][b]=v}}},li.prototype.getDelta=function(u){return this._depth[u][$e.RIGHT]-this._depth[u][$e.LEFT]},li.prototype.getLocation=function(u,d){return this._depth[u][d]<=0?z.EXTERIOR:z.INTERIOR},li.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},li.prototype.add=function(){if(arguments.length===1)for(var u=arguments[0],d=0;d<2;d++)for(var b=1;b<3;b++){var v=u.getLocation(d,b);v!==z.EXTERIOR&&v!==z.INTERIOR||(this.isNull(d,b)?this._depth[d][b]=li.depthAtLocation(v):this._depth[d][b]+=li.depthAtLocation(v))}else if(arguments.length===3){var S=arguments[0],F=arguments[1];arguments[2]===z.INTERIOR&&this._depth[S][F]++}},li.prototype.interfaces_=function(){return[]},li.prototype.getClass=function(){return li},li.depthAtLocation=function(u){return u===z.EXTERIOR?0:u===z.INTERIOR?1:li.NULL_VALUE},ls.NULL_VALUE.get=function(){return-1},Object.defineProperties(li,ls);var Za=function(u){function d(){if(u.call(this),this.pts=null,this._env=null,this.eiList=new Zi(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new li,this._depthDelta=0,arguments.length===1){var b=arguments[0];d.call(this,b,null)}else if(arguments.length===2){var v=arguments[0],S=arguments[1];this.pts=v,this._label=S}}return u&&(d.__proto__=u),d.prototype=Object.create(u&&u.prototype),d.prototype.constructor=d,d.prototype.getDepth=function(){return this._depth},d.prototype.getCollapsedEdge=function(){var b=new Array(2).fill(null);return b[0]=this.pts[0],b[1]=this.pts[1],new d(b,$t.toLineLabel(this._label))},d.prototype.isIsolated=function(){return this._isIsolated},d.prototype.getCoordinates=function(){return this.pts},d.prototype.setIsolated=function(b){this._isIsolated=b},d.prototype.setName=function(b){this._name=b},d.prototype.equals=function(b){if(!(b instanceof d))return!1;var v=b;if(this.pts.length!==v.pts.length)return!1;for(var S=!0,F=!0,G=this.pts.length,K=0;K<this.pts.length;K++)if(this.pts[K].equals2D(v.pts[K])||(S=!1),this.pts[K].equals2D(v.pts[--G])||(F=!1),!S&&!F)return!1;return!0},d.prototype.getCoordinate=function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var b=arguments[0];return this.pts[b]}},d.prototype.print=function(b){b.print("edge "+this._name+": "),b.print("LINESTRING (");for(var v=0;v<this.pts.length;v++)v>0&&b.print(","),b.print(this.pts[v].x+" "+this.pts[v].y);b.print(")  "+this._label+" "+this._depthDelta)},d.prototype.computeIM=function(b){d.updateIM(this._label,b)},d.prototype.isCollapsed=function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])},d.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},d.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},d.prototype.getDepthDelta=function(){return this._depthDelta},d.prototype.getNumPoints=function(){return this.pts.length},d.prototype.printReverse=function(b){b.print("edge "+this._name+": ");for(var v=this.pts.length-1;v>=0;v--)b.print(this.pts[v]+" ");b.println("")},d.prototype.getMonotoneChainEdge=function(){return this._mce===null&&(this._mce=new o0(this)),this._mce},d.prototype.getEnvelope=function(){if(this._env===null){this._env=new Ce;for(var b=0;b<this.pts.length;b++)this._env.expandToInclude(this.pts[b])}return this._env},d.prototype.addIntersection=function(b,v,S,F){var G=new $(b.getIntersection(F)),K=v,ue=b.getEdgeDistance(S,F),we=K+1;if(we<this.pts.length){var ke=this.pts[we];G.equals2D(ke)&&(K=we,ue=0)}this.eiList.add(G,K,ue)},d.prototype.toString=function(){var b=new xe;b.append("edge "+this._name+": "),b.append("LINESTRING (");for(var v=0;v<this.pts.length;v++)v>0&&b.append(","),b.append(this.pts[v].x+" "+this.pts[v].y);return b.append(")  "+this._label+" "+this._depthDelta),b.toString()},d.prototype.isPointwiseEqual=function(b){if(this.pts.length!==b.pts.length)return!1;for(var v=0;v<this.pts.length;v++)if(!this.pts[v].equals2D(b.pts[v]))return!1;return!0},d.prototype.setDepthDelta=function(b){this._depthDelta=b},d.prototype.getEdgeIntersectionList=function(){return this.eiList},d.prototype.addIntersections=function(b,v,S){for(var F=0;F<b.getIntersectionNum();F++)this.addIntersection(b,v,S,F)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d.updateIM=function(){if(arguments.length!==2)return u.prototype.updateIM.apply(this,arguments);var b=arguments[0],v=arguments[1];v.setAtLeastIfValid(b.getLocation(0,$e.ON),b.getLocation(1,$e.ON),1),b.isArea()&&(v.setAtLeastIfValid(b.getLocation(0,$e.LEFT),b.getLocation(1,$e.LEFT),2),v.setAtLeastIfValid(b.getLocation(0,$e.RIGHT),b.getLocation(1,$e.RIGHT),2))},d}(Di),Mi=function(u){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Xi,this._bufParams=u||null};Mi.prototype.setWorkingPrecisionModel=function(u){this._workingPrecisionModel=u},Mi.prototype.insertUniqueEdge=function(u){var d=this._edgeList.findEqualEdge(u);if(d!==null){var b=d.getLabel(),v=u.getLabel();d.isPointwiseEqual(u)||(v=new $t(u.getLabel())).flip(),b.merge(v);var S=Mi.depthDelta(v),F=d.getDepthDelta()+S;d.setDepthDelta(F)}else this._edgeList.add(u),u.setDepthDelta(Mi.depthDelta(u.getLabel()))},Mi.prototype.buildSubgraphs=function(u,d){for(var b=new Xe,v=u.iterator();v.hasNext();){var S=v.next(),F=S.getRightmostCoordinate(),G=new G0(b).getDepth(F);S.computeDepth(G),S.findResultEdges(),b.add(S),d.add(S.getDirectedEdges(),S.getNodes())}},Mi.prototype.createSubgraphs=function(u){for(var d=new Xe,b=u.getNodes().iterator();b.hasNext();){var v=b.next();if(!v.isVisited()){var S=new ni;S.create(v),d.add(S)}}return Yi.sort(d,Yi.reverseOrder()),d},Mi.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},Mi.prototype.getNoder=function(u){if(this._workingNoder!==null)return this._workingNoder;var d=new $a,b=new ce;return b.setPrecisionModel(u),d.setSegmentIntersector(new ki(b)),d},Mi.prototype.buffer=function(u,d){var b=this._workingPrecisionModel;b===null&&(b=u.getPrecisionModel()),this._geomFact=u.getFactory();var v=new bi(b,this._bufParams),S=new zi(u,d,v).getCurves();if(S.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(S,b),this._graph=new jt(new Xa),this._graph.addEdges(this._edgeList.getEdges());var F=this.createSubgraphs(this._graph),G=new wi(this._geomFact);this.buildSubgraphs(F,G);var K=G.getPolygons();return K.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(K)},Mi.prototype.computeNodedEdges=function(u,d){var b=this.getNoder(d);b.computeNodes(u);for(var v=b.getNodedSubstrings().iterator();v.hasNext();){var S=v.next(),F=S.getCoordinates();if(F.length!==2||!F[0].equals2D(F[1])){var G=S.getData(),K=new Za(S.getCoordinates(),new $t(G));this.insertUniqueEdge(K)}}},Mi.prototype.setNoder=function(u){this._workingNoder=u},Mi.prototype.interfaces_=function(){return[]},Mi.prototype.getClass=function(){return Mi},Mi.depthDelta=function(u){var d=u.getLocation(0,$e.LEFT),b=u.getLocation(0,$e.RIGHT);return d===z.INTERIOR&&b===z.EXTERIOR?1:d===z.EXTERIOR&&b===z.INTERIOR?-1:0},Mi.convertSegStrings=function(u){for(var d=new et,b=new Xe;u.hasNext();){var v=u.next(),S=d.createLineString(v.getCoordinates());b.add(S)}return d.buildGeometry(b)};var q0=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var u=arguments[0],d=arguments[1];this._noder=u,this._scaleFactor=d,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(arguments.length===4){var b=arguments[0],v=arguments[1],S=arguments[2],F=arguments[3];this._noder=b,this._scaleFactor=v,this._offsetX=S,this._offsetY=F,this._isScaled=!this.isIntegerPrecision()}};q0.prototype.rescale=function(){if(q(arguments[0],kt))for(var u=arguments[0].iterator();u.hasNext();){var d=u.next();this.rescale(d.getCoordinates())}else if(arguments[0]instanceof Array){for(var b=arguments[0],v=0;v<b.length;v++)b[v].x=b[v].x/this._scaleFactor+this._offsetX,b[v].y=b[v].y/this._scaleFactor+this._offsetY;b.length===2&&b[0].equals2D(b[1])&&ye.out.println(b)}},q0.prototype.scale=function(){if(q(arguments[0],kt)){for(var u=arguments[0],d=new Xe,b=u.iterator();b.hasNext();){var v=b.next();d.add(new Yt(this.scale(v.getCoordinates()),v.getData()))}return d}if(arguments[0]instanceof Array){for(var S=arguments[0],F=new Array(S.length).fill(null),G=0;G<S.length;G++)F[G]=new $(Math.round((S[G].x-this._offsetX)*this._scaleFactor),Math.round((S[G].y-this._offsetY)*this._scaleFactor),S[G].z);return Et.removeRepeatedPoints(F)}},q0.prototype.isIntegerPrecision=function(){return this._scaleFactor===1},q0.prototype.getNodedSubstrings=function(){var u=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(u),u},q0.prototype.computeNodes=function(u){var d=u;this._isScaled&&(d=this.scale(u)),this._noder.computeNodes(d)},q0.prototype.interfaces_=function(){return[D0]},q0.prototype.getClass=function(){return q0};var m0=function(){this._li=new ce,this._segStrings=null;var u=arguments[0];this._segStrings=u},us={fact:{configurable:!0}};m0.prototype.checkEndPtVertexIntersections=function(){if(arguments.length===0)for(var u=this._segStrings.iterator();u.hasNext();){var d=u.next().getCoordinates();this.checkEndPtVertexIntersections(d[0],this._segStrings),this.checkEndPtVertexIntersections(d[d.length-1],this._segStrings)}else if(arguments.length===2){for(var b=arguments[0],v=arguments[1].iterator();v.hasNext();)for(var S=v.next().getCoordinates(),F=1;F<S.length-1;F++)if(S[F].equals(b))throw new le("found endpt/interior pt intersection at index "+F+" :pt "+b)}},m0.prototype.checkInteriorIntersections=function(){if(arguments.length===0)for(var u=this._segStrings.iterator();u.hasNext();)for(var d=u.next(),b=this._segStrings.iterator();b.hasNext();){var v=b.next();this.checkInteriorIntersections(d,v)}else if(arguments.length===2)for(var S=arguments[0],F=arguments[1],G=S.getCoordinates(),K=F.getCoordinates(),ue=0;ue<G.length-1;ue++)for(var we=0;we<K.length-1;we++)this.checkInteriorIntersections(S,ue,F,we);else if(arguments.length===4){var ke=arguments[0],Ge=arguments[1],tt=arguments[2],it=arguments[3];if(ke===tt&&Ge===it)return null;var ot=ke.getCoordinates()[Ge],bt=ke.getCoordinates()[Ge+1],Bt=tt.getCoordinates()[it],ii=tt.getCoordinates()[it+1];if(this._li.computeIntersection(ot,bt,Bt,ii),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,ot,bt)||this.hasInteriorIntersection(this._li,Bt,ii)))throw new le("found non-noded intersection at "+ot+"-"+bt+" and "+Bt+"-"+ii)}},m0.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},m0.prototype.checkCollapses=function(){if(arguments.length===0)for(var u=this._segStrings.iterator();u.hasNext();){var d=u.next();this.checkCollapses(d)}else if(arguments.length===1)for(var b=arguments[0].getCoordinates(),v=0;v<b.length-2;v++)this.checkCollapse(b[v],b[v+1],b[v+2])},m0.prototype.hasInteriorIntersection=function(u,d,b){for(var v=0;v<u.getIntersectionNum();v++){var S=u.getIntersection(v);if(!S.equals(d)&&!S.equals(b))return!0}return!1},m0.prototype.checkCollapse=function(u,d,b){if(u.equals(b))throw new le("found non-noded collapse at "+m0.fact.createLineString([u,d,b]))},m0.prototype.interfaces_=function(){return[]},m0.prototype.getClass=function(){return m0},us.fact.get=function(){return new et},Object.defineProperties(m0,us);var $i=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var u=arguments[0],d=arguments[1],b=arguments[2];if(this._originalPt=u,this._pt=u,this._scaleFactor=d,this._li=b,d<=0)throw new L("Scale factor must be non-zero");d!==1&&(this._pt=new $(this.scale(u.x),this.scale(u.y)),this._p0Scaled=new $,this._p1Scaled=new $),this.initCorners(this._pt)},hs={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};$i.prototype.intersectsScaled=function(u,d){var b=Math.min(u.x,d.x),v=Math.max(u.x,d.x),S=Math.min(u.y,d.y),F=Math.max(u.y,d.y),G=this._maxx<b||this._minx>v||this._maxy<S||this._miny>F;if(G)return!1;var K=this.intersectsToleranceSquare(u,d);return j.isTrue(!(G&&K),"Found bad envelope test"),K},$i.prototype.initCorners=function(u){this._minx=u.x-.5,this._maxx=u.x+.5,this._miny=u.y-.5,this._maxy=u.y+.5,this._corner[0]=new $(this._maxx,this._maxy),this._corner[1]=new $(this._minx,this._maxy),this._corner[2]=new $(this._minx,this._miny),this._corner[3]=new $(this._maxx,this._miny)},$i.prototype.intersects=function(u,d){return this._scaleFactor===1?this.intersectsScaled(u,d):(this.copyScaled(u,this._p0Scaled),this.copyScaled(d,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},$i.prototype.scale=function(u){return Math.round(u*this._scaleFactor)},$i.prototype.getCoordinate=function(){return this._originalPt},$i.prototype.copyScaled=function(u,d){d.x=this.scale(u.x),d.y=this.scale(u.y)},$i.prototype.getSafeEnvelope=function(){if(this._safeEnv===null){var u=$i.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Ce(this._originalPt.x-u,this._originalPt.x+u,this._originalPt.y-u,this._originalPt.y+u)}return this._safeEnv},$i.prototype.intersectsPixelClosure=function(u,d){return this._li.computeIntersection(u,d,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(u,d,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(u,d,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(u,d,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},$i.prototype.intersectsToleranceSquare=function(u,d){var b=!1,v=!1;return this._li.computeIntersection(u,d,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(u,d,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(b=!0),this._li.computeIntersection(u,d,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(v=!0),this._li.computeIntersection(u,d,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!b||!v)||!!u.equals(this._pt)||!!d.equals(this._pt))))},$i.prototype.addSnappedNode=function(u,d){var b=u.getCoordinate(d),v=u.getCoordinate(d+1);return!!this.intersects(b,v)&&(u.addIntersection(this.getCoordinate(),d),!0)},$i.prototype.interfaces_=function(){return[]},$i.prototype.getClass=function(){return $i},hs.SAFE_ENV_EXPANSION_FACTOR.get=function(){return .75},Object.defineProperties($i,hs);var Fa=function(){this.tempEnv1=new Ce,this.selectedSegment=new ut};Fa.prototype.select=function(){if(arguments.length!==1){if(arguments.length===2){var u=arguments[0],d=arguments[1];u.getLineSegment(d,this.selectedSegment),this.select(this.selectedSegment)}}},Fa.prototype.interfaces_=function(){return[]},Fa.prototype.getClass=function(){return Fa};var La=function(){this._index=null;var u=arguments[0];this._index=u},ds={HotPixelSnapAction:{configurable:!0}};La.prototype.snap=function(){if(arguments.length===1){var u=arguments[0];return this.snap(u,null,-1)}if(arguments.length===3){var d=arguments[0],b=arguments[1],v=arguments[2],S=d.getSafeEnvelope(),F=new fs(d,b,v);return this._index.query(S,{interfaces_:function(){return[P0]},visitItem:function(G){G.select(S,F)}}),F.isNodeAdded()}},La.prototype.interfaces_=function(){return[]},La.prototype.getClass=function(){return La},ds.HotPixelSnapAction.get=function(){return fs},Object.defineProperties(La,ds);var fs=function(u){function d(){u.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var b=arguments[0],v=arguments[1],S=arguments[2];this._hotPixel=b,this._parentEdge=v,this._hotPixelVertexIndex=S}return u&&(d.__proto__=u),d.prototype=Object.create(u&&u.prototype),d.prototype.constructor=d,d.prototype.isNodeAdded=function(){return this._isNodeAdded},d.prototype.select=function(){if(arguments.length!==2)return u.prototype.select.apply(this,arguments);var b=arguments[0],v=arguments[1],S=b.getContext();if(this._parentEdge!==null&&S===this._parentEdge&&v===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(S,v)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Fa),ya=function(){this._li=null,this._interiorIntersections=null;var u=arguments[0];this._li=u,this._interiorIntersections=new Xe};ya.prototype.processIntersections=function(u,d,b,v){if(u===b&&d===v)return null;var S=u.getCoordinates()[d],F=u.getCoordinates()[d+1],G=b.getCoordinates()[v],K=b.getCoordinates()[v+1];if(this._li.computeIntersection(S,F,G,K),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var ue=0;ue<this._li.getIntersectionNum();ue++)this._interiorIntersections.add(this._li.getIntersection(ue));u.addIntersections(this._li,d,0),b.addIntersections(this._li,v,1)}},ya.prototype.isDone=function(){return!1},ya.prototype.getInteriorIntersections=function(){return this._interiorIntersections},ya.prototype.interfaces_=function(){return[N0]},ya.prototype.getClass=function(){return ya};var M0=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var u=arguments[0];this._pm=u,this._li=new ce,this._li.setPrecisionModel(u),this._scaleFactor=u.getScale()};M0.prototype.checkCorrectness=function(u){var d=Yt.getNodedSubstrings(u),b=new m0(d);try{b.checkValid()}catch(v){if(!(v instanceof ze))throw v;v.printStackTrace()}},M0.prototype.getNodedSubstrings=function(){return Yt.getNodedSubstrings(this._nodedSegStrings)},M0.prototype.snapRound=function(u,d){var b=this.findInteriorIntersections(u,d);this.computeIntersectionSnaps(b),this.computeVertexSnaps(u)},M0.prototype.findInteriorIntersections=function(u,d){var b=new ya(d);return this._noder.setSegmentIntersector(b),this._noder.computeNodes(u),b.getInteriorIntersections()},M0.prototype.computeVertexSnaps=function(){if(q(arguments[0],kt))for(var u=arguments[0].iterator();u.hasNext();){var d=u.next();this.computeVertexSnaps(d)}else if(arguments[0]instanceof Yt)for(var b=arguments[0],v=b.getCoordinates(),S=0;S<v.length;S++){var F=new $i(v[S],this._scaleFactor,this._li);this._pointSnapper.snap(F,b,S)&&b.addIntersection(v[S],S)}},M0.prototype.computeNodes=function(u){this._nodedSegStrings=u,this._noder=new $a,this._pointSnapper=new La(this._noder.getIndex()),this.snapRound(u,this._li)},M0.prototype.computeIntersectionSnaps=function(u){for(var d=u.iterator();d.hasNext();){var b=d.next(),v=new $i(b,this._scaleFactor,this._li);this._pointSnapper.snap(v)}},M0.prototype.interfaces_=function(){return[D0]},M0.prototype.getClass=function(){return M0};var ui=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Ot,this._resultGeometry=null,this._saveException=null,arguments.length===1){var u=arguments[0];this._argGeom=u}else if(arguments.length===2){var d=arguments[0],b=arguments[1];this._argGeom=d,this._bufParams=b}},Aa={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};ui.prototype.bufferFixedPrecision=function(u){var d=new q0(new M0(new ge(1)),u.getScale()),b=new Mi(this._bufParams);b.setWorkingPrecisionModel(u),b.setNoder(d),this._resultGeometry=b.buffer(this._argGeom,this._distance)},ui.prototype.bufferReducedPrecision=function(){var u=this;if(arguments.length===0){for(var d=ui.MAX_PRECISION_DIGITS;d>=0;d--){try{u.bufferReducedPrecision(d)}catch(F){if(!(F instanceof h0))throw F;u._saveException=F}if(u._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var b=arguments[0],v=ui.precisionScaleFactor(this._argGeom,this._distance,b),S=new ge(v);this.bufferFixedPrecision(S)}},ui.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var u=this._argGeom.getFactory().getPrecisionModel();u.getType()===ge.FIXED?this.bufferFixedPrecision(u):this.bufferReducedPrecision()},ui.prototype.setQuadrantSegments=function(u){this._bufParams.setQuadrantSegments(u)},ui.prototype.bufferOriginalPrecision=function(){try{var u=new Mi(this._bufParams);this._resultGeometry=u.buffer(this._argGeom,this._distance)}catch(d){if(!(d instanceof le))throw d;this._saveException=d}},ui.prototype.getResultGeometry=function(u){return this._distance=u,this.computeGeometry(),this._resultGeometry},ui.prototype.setEndCapStyle=function(u){this._bufParams.setEndCapStyle(u)},ui.prototype.interfaces_=function(){return[]},ui.prototype.getClass=function(){return ui},ui.bufferOp=function(){if(arguments.length===2){var u=arguments[0],d=arguments[1];return new ui(u).getResultGeometry(d)}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof qe&&typeof arguments[1]=="number"){var b=arguments[0],v=arguments[1],S=arguments[2],F=new ui(b);return F.setQuadrantSegments(S),F.getResultGeometry(v)}if(arguments[2]instanceof Ot&&arguments[0]instanceof qe&&typeof arguments[1]=="number"){var G=arguments[0],K=arguments[1],ue=arguments[2];return new ui(G,ue).getResultGeometry(K)}}else if(arguments.length===4){var we=arguments[0],ke=arguments[1],Ge=arguments[2],tt=arguments[3],it=new ui(we);return it.setQuadrantSegments(Ge),it.setEndCapStyle(tt),it.getResultGeometry(ke)}},ui.precisionScaleFactor=function(u,d,b){var v=u.getEnvelopeInternal(),S=te.max(Math.abs(v.getMaxX()),Math.abs(v.getMaxY()),Math.abs(v.getMinX()),Math.abs(v.getMinY()))+2*(d>0?d:0),F=b-Math.trunc(Math.log(S)/Math.log(10)+1);return Math.pow(10,F)},Aa.CAP_ROUND.get=function(){return Ot.CAP_ROUND},Aa.CAP_BUTT.get=function(){return Ot.CAP_FLAT},Aa.CAP_FLAT.get=function(){return Ot.CAP_FLAT},Aa.CAP_SQUARE.get=function(){return Ot.CAP_SQUARE},Aa.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(ui,Aa);var Si=function(){this._pt=[new $,new $],this._distance=R.NaN,this._isNull=!0};Si.prototype.getCoordinates=function(){return this._pt},Si.prototype.getCoordinate=function(u){return this._pt[u]},Si.prototype.setMinimum=function(){if(arguments.length===1){var u=arguments[0];this.setMinimum(u._pt[0],u._pt[1])}else if(arguments.length===2){var d=arguments[0],b=arguments[1];if(this._isNull)return this.initialize(d,b),null;var v=d.distance(b);v<this._distance&&this.initialize(d,b,v)}},Si.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var u=arguments[0],d=arguments[1];this._pt[0].setCoordinate(u),this._pt[1].setCoordinate(d),this._distance=u.distance(d),this._isNull=!1}else if(arguments.length===3){var b=arguments[0],v=arguments[1],S=arguments[2];this._pt[0].setCoordinate(b),this._pt[1].setCoordinate(v),this._distance=S,this._isNull=!1}},Si.prototype.getDistance=function(){return this._distance},Si.prototype.setMaximum=function(){if(arguments.length===1){var u=arguments[0];this.setMaximum(u._pt[0],u._pt[1])}else if(arguments.length===2){var d=arguments[0],b=arguments[1];if(this._isNull)return this.initialize(d,b),null;var v=d.distance(b);v>this._distance&&this.initialize(d,b,v)}},Si.prototype.interfaces_=function(){return[]},Si.prototype.getClass=function(){return Si};var S0=function(){};S0.prototype.interfaces_=function(){return[]},S0.prototype.getClass=function(){return S0},S0.computeDistance=function(){if(arguments[2]instanceof Si&&arguments[0]instanceof Gt&&arguments[1]instanceof $)for(var u=arguments[0],d=arguments[1],b=arguments[2],v=u.getCoordinates(),S=new ut,F=0;F<v.length-1;F++){S.setCoordinates(v[F],v[F+1]);var G=S.closestPoint(d);b.setMinimum(G,d)}else if(arguments[2]instanceof Si&&arguments[0]instanceof Ut&&arguments[1]instanceof $){var K=arguments[0],ue=arguments[1],we=arguments[2];S0.computeDistance(K.getExteriorRing(),ue,we);for(var ke=0;ke<K.getNumInteriorRing();ke++)S0.computeDistance(K.getInteriorRingN(ke),ue,we)}else if(arguments[2]instanceof Si&&arguments[0]instanceof qe&&arguments[1]instanceof $){var Ge=arguments[0],tt=arguments[1],it=arguments[2];if(Ge instanceof Gt)S0.computeDistance(Ge,tt,it);else if(Ge instanceof Ut)S0.computeDistance(Ge,tt,it);else if(Ge instanceof si)for(var ot=Ge,bt=0;bt<ot.getNumGeometries();bt++){var Bt=ot.getGeometryN(bt);S0.computeDistance(Bt,tt,it)}else it.setMinimum(Ge.getCoordinate(),tt)}else if(arguments[2]instanceof Si&&arguments[0]instanceof ut&&arguments[1]instanceof $){var ii=arguments[0],Ii=arguments[1],I0=arguments[2],ea=ii.closestPoint(Ii);I0.setMinimum(ea,Ii)}};var na=function(u){this._maxPtDist=new Si,this._inputGeom=u||null},as={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};na.prototype.computeMaxMidpointDistance=function(u){var d=new j0(this._inputGeom);u.apply(d),this._maxPtDist.setMaximum(d.getMaxPointDistance())},na.prototype.computeMaxVertexDistance=function(u){var d=new ba(this._inputGeom);u.apply(d),this._maxPtDist.setMaximum(d.getMaxPointDistance())},na.prototype.findDistance=function(u){return this.computeMaxVertexDistance(u),this.computeMaxMidpointDistance(u),this._maxPtDist.getDistance()},na.prototype.getDistancePoints=function(){return this._maxPtDist},na.prototype.interfaces_=function(){return[]},na.prototype.getClass=function(){return na},as.MaxPointDistanceFilter.get=function(){return ba},as.MaxMidpointDistanceFilter.get=function(){return j0},Object.defineProperties(na,as);var ba=function(u){this._maxPtDist=new Si,this._minPtDist=new Si,this._geom=u||null};ba.prototype.filter=function(u){this._minPtDist.initialize(),S0.computeDistance(this._geom,u,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},ba.prototype.getMaxPointDistance=function(){return this._maxPtDist},ba.prototype.interfaces_=function(){return[Mt]},ba.prototype.getClass=function(){return ba};var j0=function(u){this._maxPtDist=new Si,this._minPtDist=new Si,this._geom=u||null};j0.prototype.filter=function(u,d){if(d===0)return null;var b=u.getCoordinate(d-1),v=u.getCoordinate(d),S=new $((b.x+v.x)/2,(b.y+v.y)/2);this._minPtDist.initialize(),S0.computeDistance(this._geom,S,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},j0.prototype.isDone=function(){return!1},j0.prototype.isGeometryChanged=function(){return!1},j0.prototype.getMaxPointDistance=function(){return this._maxPtDist},j0.prototype.interfaces_=function(){return[gi]},j0.prototype.getClass=function(){return j0};var k0=function(u){this._comps=u||null};k0.prototype.filter=function(u){u instanceof Ut&&this._comps.add(u)},k0.prototype.interfaces_=function(){return[se]},k0.prototype.getClass=function(){return k0},k0.getPolygons=function(){if(arguments.length===1){var u=arguments[0];return k0.getPolygons(u,new Xe)}if(arguments.length===2){var d=arguments[0],b=arguments[1];return d instanceof Ut?b.add(d):d instanceof si&&d.apply(new k0(b)),b}};var hi=function(){if(this._lines=null,this._isForcedToLineString=!1,arguments.length===1){var u=arguments[0];this._lines=u}else if(arguments.length===2){var d=arguments[0],b=arguments[1];this._lines=d,this._isForcedToLineString=b}};hi.prototype.filter=function(u){if(this._isForcedToLineString&&u instanceof Wi){var d=u.getFactory().createLineString(u.getCoordinateSequence());return this._lines.add(d),null}u instanceof Gt&&this._lines.add(u)},hi.prototype.setForceToLineString=function(u){this._isForcedToLineString=u},hi.prototype.interfaces_=function(){return[Ue]},hi.prototype.getClass=function(){return hi},hi.getGeometry=function(){if(arguments.length===1){var u=arguments[0];return u.getFactory().buildGeometry(hi.getLines(u))}if(arguments.length===2){var d=arguments[0],b=arguments[1];return d.getFactory().buildGeometry(hi.getLines(d,b))}},hi.getLines=function(){if(arguments.length===1){var u=arguments[0];return hi.getLines(u,!1)}if(arguments.length===2){if(q(arguments[0],kt)&&q(arguments[1],kt)){for(var d=arguments[0],b=arguments[1],v=d.iterator();v.hasNext();){var S=v.next();hi.getLines(S,b)}return b}if(arguments[0]instanceof qe&&typeof arguments[1]=="boolean"){var F=arguments[0],G=arguments[1],K=new Xe;return F.apply(new hi(K,G)),K}if(arguments[0]instanceof qe&&q(arguments[1],kt)){var ue=arguments[0],we=arguments[1];return ue instanceof Gt?we.add(ue):ue.apply(new hi(we)),we}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&q(arguments[0],kt)&&q(arguments[1],kt)){for(var ke=arguments[0],Ge=arguments[1],tt=arguments[2],it=ke.iterator();it.hasNext();){var ot=it.next();hi.getLines(ot,Ge,tt)}return Ge}if(typeof arguments[2]=="boolean"&&arguments[0]instanceof qe&&q(arguments[1],kt)){var bt=arguments[0],Bt=arguments[1],ii=arguments[2];return bt.apply(new hi(Bt,ii)),Bt}}};var c0=function(){if(this._boundaryRule=pt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,arguments.length!==0){if(arguments.length===1){var u=arguments[0];if(u===null)throw new L("Rule must be non-null");this._boundaryRule=u}}};c0.prototype.locateInternal=function(){if(arguments[0]instanceof $&&arguments[1]instanceof Ut){var u=arguments[0],d=arguments[1];if(d.isEmpty())return z.EXTERIOR;var b=d.getExteriorRing(),v=this.locateInPolygonRing(u,b);if(v===z.EXTERIOR)return z.EXTERIOR;if(v===z.BOUNDARY)return z.BOUNDARY;for(var S=0;S<d.getNumInteriorRing();S++){var F=d.getInteriorRingN(S),G=this.locateInPolygonRing(u,F);if(G===z.INTERIOR)return z.EXTERIOR;if(G===z.BOUNDARY)return z.BOUNDARY}return z.INTERIOR}if(arguments[0]instanceof $&&arguments[1]instanceof Gt){var K=arguments[0],ue=arguments[1];if(!ue.getEnvelopeInternal().intersects(K))return z.EXTERIOR;var we=ue.getCoordinates();return ue.isClosed()||!K.equals(we[0])&&!K.equals(we[we.length-1])?Pe.isOnLine(K,we)?z.INTERIOR:z.EXTERIOR:z.BOUNDARY}if(arguments[0]instanceof $&&arguments[1]instanceof Kt){var ke=arguments[0];return arguments[1].getCoordinate().equals2D(ke)?z.INTERIOR:z.EXTERIOR}},c0.prototype.locateInPolygonRing=function(u,d){return d.getEnvelopeInternal().intersects(u)?Pe.locatePointInRing(u,d.getCoordinates()):z.EXTERIOR},c0.prototype.intersects=function(u,d){return this.locate(u,d)!==z.EXTERIOR},c0.prototype.updateLocationInfo=function(u){u===z.INTERIOR&&(this._isIn=!0),u===z.BOUNDARY&&this._numBoundaries++},c0.prototype.computeLocation=function(u,d){if(d instanceof Kt&&this.updateLocationInfo(this.locateInternal(u,d)),d instanceof Gt)this.updateLocationInfo(this.locateInternal(u,d));else if(d instanceof Ut)this.updateLocationInfo(this.locateInternal(u,d));else if(d instanceof u0)for(var b=d,v=0;v<b.getNumGeometries();v++){var S=b.getGeometryN(v);this.updateLocationInfo(this.locateInternal(u,S))}else if(d instanceof ae)for(var F=d,G=0;G<F.getNumGeometries();G++){var K=F.getGeometryN(G);this.updateLocationInfo(this.locateInternal(u,K))}else if(d instanceof si)for(var ue=new n0(d);ue.hasNext();){var we=ue.next();we!==d&&this.computeLocation(u,we)}},c0.prototype.locate=function(u,d){return d.isEmpty()?z.EXTERIOR:d instanceof Gt?this.locateInternal(u,d):d instanceof Ut?this.locateInternal(u,d):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(u,d),this._boundaryRule.isInBoundary(this._numBoundaries)?z.BOUNDARY:this._numBoundaries>0||this._isIn?z.INTERIOR:z.EXTERIOR)},c0.prototype.interfaces_=function(){return[]},c0.prototype.getClass=function(){return c0};var Ti=function u(){if(this._component=null,this._segIndex=null,this._pt=null,arguments.length===2){var d=arguments[0],b=arguments[1];u.call(this,d,u.INSIDE_AREA,b)}else if(arguments.length===3){var v=arguments[0],S=arguments[1],F=arguments[2];this._component=v,this._segIndex=S,this._pt=F}},ps={INSIDE_AREA:{configurable:!0}};Ti.prototype.isInsideArea=function(){return this._segIndex===Ti.INSIDE_AREA},Ti.prototype.getCoordinate=function(){return this._pt},Ti.prototype.getGeometryComponent=function(){return this._component},Ti.prototype.getSegmentIndex=function(){return this._segIndex},Ti.prototype.interfaces_=function(){return[]},Ti.prototype.getClass=function(){return Ti},ps.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Ti,ps);var V0=function(u){this._pts=u||null};V0.prototype.filter=function(u){u instanceof Kt&&this._pts.add(u)},V0.prototype.interfaces_=function(){return[se]},V0.prototype.getClass=function(){return V0},V0.getPoints=function(){if(arguments.length===1){var u=arguments[0];return u instanceof Kt?Yi.singletonList(u):V0.getPoints(u,new Xe)}if(arguments.length===2){var d=arguments[0],b=arguments[1];return d instanceof Kt?b.add(d):d instanceof si&&d.apply(new V0(b)),b}};var va=function(){this._locations=null;var u=arguments[0];this._locations=u};va.prototype.filter=function(u){(u instanceof Kt||u instanceof Gt||u instanceof Ut)&&this._locations.add(new Ti(u,0,u.getCoordinate()))},va.prototype.interfaces_=function(){return[se]},va.prototype.getClass=function(){return va},va.getLocations=function(u){var d=new Xe;return u.apply(new va(d)),d};var di=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new c0,this._minDistanceLocation=null,this._minDistance=R.MAX_VALUE,arguments.length===2){var u=arguments[0],d=arguments[1];this._geom=[u,d],this._terminateDistance=0}else if(arguments.length===3){var b=arguments[0],v=arguments[1],S=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=b,this._geom[1]=v,this._terminateDistance=S}};di.prototype.computeContainmentDistance=function(){if(arguments.length===0){var u=new Array(2).fill(null);if(this.computeContainmentDistance(0,u),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,u)}else if(arguments.length===2){var d=arguments[0],b=arguments[1],v=1-d,S=k0.getPolygons(this._geom[d]);if(S.size()>0){var F=va.getLocations(this._geom[v]);if(this.computeContainmentDistance(F,S,b),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[v]=b[0],this._minDistanceLocation[d]=b[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&q(arguments[0],Zt)&&q(arguments[1],Zt)){for(var G=arguments[0],K=arguments[1],ue=arguments[2],we=0;we<G.size();we++)for(var ke=G.get(we),Ge=0;Ge<K.size();Ge++)if(this.computeContainmentDistance(ke,K.get(Ge),ue),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ti&&arguments[1]instanceof Ut){var tt=arguments[0],it=arguments[1],ot=arguments[2],bt=tt.getCoordinate();if(z.EXTERIOR!==this._ptLocator.locate(bt,it))return this._minDistance=0,ot[0]=tt,ot[1]=new Ti(it,bt),null}}},di.prototype.computeMinDistanceLinesPoints=function(u,d,b){for(var v=0;v<u.size();v++)for(var S=u.get(v),F=0;F<d.size();F++){var G=d.get(F);if(this.computeMinDistance(S,G,b),this._minDistance<=this._terminateDistance)return null}},di.prototype.computeFacetDistance=function(){var u=new Array(2).fill(null),d=hi.getLines(this._geom[0]),b=hi.getLines(this._geom[1]),v=V0.getPoints(this._geom[0]),S=V0.getPoints(this._geom[1]);return this.computeMinDistanceLines(d,b,u),this.updateMinDistance(u,!1),this._minDistance<=this._terminateDistance?null:(u[0]=null,u[1]=null,this.computeMinDistanceLinesPoints(d,S,u),this.updateMinDistance(u,!1),this._minDistance<=this._terminateDistance?null:(u[0]=null,u[1]=null,this.computeMinDistanceLinesPoints(b,v,u),this.updateMinDistance(u,!0),this._minDistance<=this._terminateDistance?null:(u[0]=null,u[1]=null,this.computeMinDistancePoints(v,S,u),void this.updateMinDistance(u,!1))))},di.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},di.prototype.updateMinDistance=function(u,d){if(u[0]===null)return null;d?(this._minDistanceLocation[0]=u[1],this._minDistanceLocation[1]=u[0]):(this._minDistanceLocation[0]=u[0],this._minDistanceLocation[1]=u[1])},di.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},di.prototype.computeMinDistance=function(){if(arguments.length===0){if(this._minDistanceLocation!==null||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof Gt&&arguments[1]instanceof Kt){var u=arguments[0],d=arguments[1],b=arguments[2];if(u.getEnvelopeInternal().distance(d.getEnvelopeInternal())>this._minDistance)return null;for(var v=u.getCoordinates(),S=d.getCoordinate(),F=0;F<v.length-1;F++){var G=Pe.distancePointLine(S,v[F],v[F+1]);if(G<this._minDistance){this._minDistance=G;var K=new ut(v[F],v[F+1]).closestPoint(S);b[0]=new Ti(u,F,K),b[1]=new Ti(d,0,S)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Gt&&arguments[1]instanceof Gt){var ue=arguments[0],we=arguments[1],ke=arguments[2];if(ue.getEnvelopeInternal().distance(we.getEnvelopeInternal())>this._minDistance)return null;for(var Ge=ue.getCoordinates(),tt=we.getCoordinates(),it=0;it<Ge.length-1;it++)for(var ot=0;ot<tt.length-1;ot++){var bt=Pe.distanceLineLine(Ge[it],Ge[it+1],tt[ot],tt[ot+1]);if(bt<this._minDistance){this._minDistance=bt;var Bt=new ut(Ge[it],Ge[it+1]),ii=new ut(tt[ot],tt[ot+1]),Ii=Bt.closestPoints(ii);ke[0]=new Ti(ue,it,Ii[0]),ke[1]=new Ti(we,ot,Ii[1])}if(this._minDistance<=this._terminateDistance)return null}}}},di.prototype.computeMinDistancePoints=function(u,d,b){for(var v=0;v<u.size();v++)for(var S=u.get(v),F=0;F<d.size();F++){var G=d.get(F),K=S.getCoordinate().distance(G.getCoordinate());if(K<this._minDistance&&(this._minDistance=K,b[0]=new Ti(S,0,S.getCoordinate()),b[1]=new Ti(G,0,G.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},di.prototype.distance=function(){if(this._geom[0]===null||this._geom[1]===null)throw new L("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},di.prototype.computeMinDistanceLines=function(u,d,b){for(var v=0;v<u.size();v++)for(var S=u.get(v),F=0;F<d.size();F++){var G=d.get(F);if(this.computeMinDistance(S,G,b),this._minDistance<=this._terminateDistance)return null}},di.prototype.interfaces_=function(){return[]},di.prototype.getClass=function(){return di},di.distance=function(u,d){return new di(u,d).distance()},di.isWithinDistance=function(u,d,b){return new di(u,d,b).distance()<=b},di.nearestPoints=function(u,d){return new di(u,d).nearestPoints()};var vi=function(){this._pt=[new $,new $],this._distance=R.NaN,this._isNull=!0};vi.prototype.getCoordinates=function(){return this._pt},vi.prototype.getCoordinate=function(u){return this._pt[u]},vi.prototype.setMinimum=function(){if(arguments.length===1){var u=arguments[0];this.setMinimum(u._pt[0],u._pt[1])}else if(arguments.length===2){var d=arguments[0],b=arguments[1];if(this._isNull)return this.initialize(d,b),null;var v=d.distance(b);v<this._distance&&this.initialize(d,b,v)}},vi.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var u=arguments[0],d=arguments[1];this._pt[0].setCoordinate(u),this._pt[1].setCoordinate(d),this._distance=u.distance(d),this._isNull=!1}else if(arguments.length===3){var b=arguments[0],v=arguments[1],S=arguments[2];this._pt[0].setCoordinate(b),this._pt[1].setCoordinate(v),this._distance=S,this._isNull=!1}},vi.prototype.toString=function(){return Oe.toLineString(this._pt[0],this._pt[1])},vi.prototype.getDistance=function(){return this._distance},vi.prototype.setMaximum=function(){if(arguments.length===1){var u=arguments[0];this.setMaximum(u._pt[0],u._pt[1])}else if(arguments.length===2){var d=arguments[0],b=arguments[1];if(this._isNull)return this.initialize(d,b),null;var v=d.distance(b);v>this._distance&&this.initialize(d,b,v)}},vi.prototype.interfaces_=function(){return[]},vi.prototype.getClass=function(){return vi};var g0=function(){};g0.prototype.interfaces_=function(){return[]},g0.prototype.getClass=function(){return g0},g0.computeDistance=function(){if(arguments[2]instanceof vi&&arguments[0]instanceof Gt&&arguments[1]instanceof $)for(var u=arguments[0],d=arguments[1],b=arguments[2],v=new ut,S=u.getCoordinates(),F=0;F<S.length-1;F++){v.setCoordinates(S[F],S[F+1]);var G=v.closestPoint(d);b.setMinimum(G,d)}else if(arguments[2]instanceof vi&&arguments[0]instanceof Ut&&arguments[1]instanceof $){var K=arguments[0],ue=arguments[1],we=arguments[2];g0.computeDistance(K.getExteriorRing(),ue,we);for(var ke=0;ke<K.getNumInteriorRing();ke++)g0.computeDistance(K.getInteriorRingN(ke),ue,we)}else if(arguments[2]instanceof vi&&arguments[0]instanceof qe&&arguments[1]instanceof $){var Ge=arguments[0],tt=arguments[1],it=arguments[2];if(Ge instanceof Gt)g0.computeDistance(Ge,tt,it);else if(Ge instanceof Ut)g0.computeDistance(Ge,tt,it);else if(Ge instanceof si)for(var ot=Ge,bt=0;bt<ot.getNumGeometries();bt++){var Bt=ot.getGeometryN(bt);g0.computeDistance(Bt,tt,it)}else it.setMinimum(Ge.getCoordinate(),tt)}else if(arguments[2]instanceof vi&&arguments[0]instanceof ut&&arguments[1]instanceof $){var ii=arguments[0],Ii=arguments[1],I0=arguments[2],ea=ii.closestPoint(Ii);I0.setMinimum(ea,Ii)}};var i0=function(){this._g0=null,this._g1=null,this._ptDist=new vi,this._densifyFrac=0;var u=arguments[0],d=arguments[1];this._g0=u,this._g1=d},ss={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};i0.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},i0.prototype.setDensifyFraction=function(u){if(u>1||u<=0)throw new L("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=u},i0.prototype.compute=function(u,d){this.computeOrientedDistance(u,d,this._ptDist),this.computeOrientedDistance(d,u,this._ptDist)},i0.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},i0.prototype.computeOrientedDistance=function(u,d,b){var v=new Ca(d);if(u.apply(v),b.setMaximum(v.getMaxPointDistance()),this._densifyFrac>0){var S=new J0(d,this._densifyFrac);u.apply(S),b.setMaximum(S.getMaxPointDistance())}},i0.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},i0.prototype.interfaces_=function(){return[]},i0.prototype.getClass=function(){return i0},i0.distance=function(){if(arguments.length===2){var u=arguments[0],d=arguments[1];return new i0(u,d).distance()}if(arguments.length===3){var b=arguments[0],v=arguments[1],S=arguments[2],F=new i0(b,v);return F.setDensifyFraction(S),F.distance()}},ss.MaxPointDistanceFilter.get=function(){return Ca},ss.MaxDensifiedByFractionDistanceFilter.get=function(){return J0},Object.defineProperties(i0,ss);var Ca=function(){this._maxPtDist=new vi,this._minPtDist=new vi,this._euclideanDist=new g0,this._geom=null;var u=arguments[0];this._geom=u};Ca.prototype.filter=function(u){this._minPtDist.initialize(),g0.computeDistance(this._geom,u,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ca.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ca.prototype.interfaces_=function(){return[Mt]},Ca.prototype.getClass=function(){return Ca};var J0=function(){this._maxPtDist=new vi,this._minPtDist=new vi,this._geom=null,this._numSubSegs=0;var u=arguments[0],d=arguments[1];this._geom=u,this._numSubSegs=Math.trunc(Math.round(1/d))};J0.prototype.filter=function(u,d){if(d===0)return null;for(var b=u.getCoordinate(d-1),v=u.getCoordinate(d),S=(v.x-b.x)/this._numSubSegs,F=(v.y-b.y)/this._numSubSegs,G=0;G<this._numSubSegs;G++){var K=b.x+G*S,ue=b.y+G*F,we=new $(K,ue);this._minPtDist.initialize(),g0.computeDistance(this._geom,we,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},J0.prototype.isDone=function(){return!1},J0.prototype.isGeometryChanged=function(){return!1},J0.prototype.getMaxPointDistance=function(){return this._maxPtDist},J0.prototype.interfaces_=function(){return[gi]},J0.prototype.getClass=function(){return J0};var qi=function(u,d,b){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=u||null,this._bufDistance=d||null,this._result=b||null},ns={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};qi.prototype.checkMaximumDistance=function(u,d,b){var v=new i0(d,u);if(v.setDensifyFraction(.25),this._maxDistanceFound=v.orientedDistance(),this._maxDistanceFound>b){this._isValid=!1;var S=v.getCoordinates();this._errorLocation=S[1],this._errorIndicator=u.getFactory().createLineString(S),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Oe.toLineString(S[0],S[1])+")"}},qi.prototype.isValid=function(){var u=Math.abs(this._bufDistance),d=qi.MAX_DISTANCE_DIFF_FRAC*u;return this._minValidDistance=u-d,this._maxValidDistance=u+d,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),qi.VERBOSE&&ye.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},qi.prototype.checkNegativeValid=function(){if(!(this._input instanceof Ut||this._input instanceof ae||this._input instanceof si))return null;var u=this.getPolygonLines(this._input);if(this.checkMinimumDistance(u,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(u,this._result,this._maxValidDistance)},qi.prototype.getErrorIndicator=function(){return this._errorIndicator},qi.prototype.checkMinimumDistance=function(u,d,b){var v=new di(u,d,b);if(this._minDistanceFound=v.distance(),this._minDistanceFound<b){this._isValid=!1;var S=v.nearestPoints();this._errorLocation=v.nearestPoints()[1],this._errorIndicator=u.getFactory().createLineString(S),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Oe.toLineString(S[0],S[1])+" )"}},qi.prototype.checkPositiveValid=function(){var u=this._result.getBoundary();if(this.checkMinimumDistance(this._input,u,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,u,this._maxValidDistance)},qi.prototype.getErrorLocation=function(){return this._errorLocation},qi.prototype.getPolygonLines=function(u){for(var d=new Xe,b=new hi(d),v=k0.getPolygons(u).iterator();v.hasNext();)v.next().apply(b);return u.getFactory().buildGeometry(d)},qi.prototype.getErrorMessage=function(){return this._errMsg},qi.prototype.interfaces_=function(){return[]},qi.prototype.getClass=function(){return qi},ns.VERBOSE.get=function(){return!1},ns.MAX_DISTANCE_DIFF_FRAC.get=function(){return .012},Object.defineProperties(qi,ns);var fi=function(u,d,b){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=u||null,this._distance=d||null,this._result=b||null},rs={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};fi.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},fi.prototype.checkEnvelope=function(){if(this._distance<0)return null;var u=this._distance*fi.MAX_ENV_DIFF_FRAC;u===0&&(u=.001);var d=new Ce(this._input.getEnvelopeInternal());d.expandBy(this._distance);var b=new Ce(this._result.getEnvelopeInternal());b.expandBy(u),b.contains(d)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(b)),this.report("Envelope")},fi.prototype.checkDistance=function(){var u=new qi(this._input,this._distance,this._result);u.isValid()||(this._isValid=!1,this._errorMsg=u.getErrorMessage(),this._errorLocation=u.getErrorLocation(),this._errorIndicator=u.getErrorIndicator()),this.report("Distance")},fi.prototype.checkArea=function(){var u=this._input.getArea(),d=this._result.getArea();this._distance>0&&u>d&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&u<d&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},fi.prototype.checkPolygonal=function(){this._result instanceof Ut||this._result instanceof ae||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},fi.prototype.getErrorIndicator=function(){return this._errorIndicator},fi.prototype.getErrorLocation=function(){return this._errorLocation},fi.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},fi.prototype.report=function(u){if(!fi.VERBOSE)return null;ye.out.println("Check "+u+": "+(this._isValid?"passed":"FAILED"))},fi.prototype.getErrorMessage=function(){return this._errorMsg},fi.prototype.interfaces_=function(){return[]},fi.prototype.getClass=function(){return fi},fi.isValidMsg=function(u,d,b){var v=new fi(u,d,b);return v.isValid()?null:v.getErrorMessage()},fi.isValid=function(u,d,b){return!!new fi(u,d,b).isValid()},rs.VERBOSE.get=function(){return!1},rs.MAX_ENV_DIFF_FRAC.get=function(){return .012},Object.defineProperties(fi,rs);var b0=function(){this._pts=null,this._data=null;var u=arguments[0],d=arguments[1];this._pts=u,this._data=d};b0.prototype.getCoordinates=function(){return this._pts},b0.prototype.size=function(){return this._pts.length},b0.prototype.getCoordinate=function(u){return this._pts[u]},b0.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},b0.prototype.getSegmentOctant=function(u){return u===this._pts.length-1?-1:B0.octant(this.getCoordinate(u),this.getCoordinate(u+1))},b0.prototype.setData=function(u){this._data=u},b0.prototype.getData=function(){return this._data},b0.prototype.toString=function(){return Oe.toLineString(new pe(this._pts))},b0.prototype.interfaces_=function(){return[s0]},b0.prototype.getClass=function(){return b0};var oi=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Xe,this._intersectionCount=0,this._keepIntersections=!0;var u=arguments[0];this._li=u,this._interiorIntersection=null};oi.prototype.getInteriorIntersection=function(){return this._interiorIntersection},oi.prototype.setCheckEndSegmentsOnly=function(u){this._isCheckEndSegmentsOnly=u},oi.prototype.getIntersectionSegments=function(){return this._intSegments},oi.prototype.count=function(){return this._intersectionCount},oi.prototype.getIntersections=function(){return this._intersections},oi.prototype.setFindAllIntersections=function(u){this._findAllIntersections=u},oi.prototype.setKeepIntersections=function(u){this._keepIntersections=u},oi.prototype.processIntersections=function(u,d,b,v){if(!this._findAllIntersections&&this.hasIntersection()||u===b&&d===v||this._isCheckEndSegmentsOnly&&!(this.isEndSegment(u,d)||this.isEndSegment(b,v)))return null;var S=u.getCoordinates()[d],F=u.getCoordinates()[d+1],G=b.getCoordinates()[v],K=b.getCoordinates()[v+1];this._li.computeIntersection(S,F,G,K),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=S,this._intSegments[1]=F,this._intSegments[2]=G,this._intSegments[3]=K,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},oi.prototype.isEndSegment=function(u,d){return d===0||d>=u.size()-2},oi.prototype.hasIntersection=function(){return this._interiorIntersection!==null},oi.prototype.isDone=function(){return!this._findAllIntersections&&this._interiorIntersection!==null},oi.prototype.interfaces_=function(){return[N0]},oi.prototype.getClass=function(){return oi},oi.createAllIntersectionsFinder=function(u){var d=new oi(u);return d.setFindAllIntersections(!0),d},oi.createAnyIntersectionFinder=function(u){return new oi(u)},oi.createIntersectionCounter=function(u){var d=new oi(u);return d.setFindAllIntersections(!0),d.setKeepIntersections(!1),d};var _0=function(){this._li=new ce,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var u=arguments[0];this._segStrings=u};_0.prototype.execute=function(){if(this._segInt!==null)return null;this.checkInteriorIntersections()},_0.prototype.getIntersections=function(){return this._segInt.getIntersections()},_0.prototype.isValid=function(){return this.execute(),this._isValid},_0.prototype.setFindAllIntersections=function(u){this._findAllIntersections=u},_0.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new oi(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var u=new $a;if(u.setSegmentIntersector(this._segInt),u.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},_0.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new h0(this.getErrorMessage(),this._segInt.getInteriorIntersection())},_0.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var u=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Oe.toLineString(u[0],u[1])+" and "+Oe.toLineString(u[2],u[3])},_0.prototype.interfaces_=function(){return[]},_0.prototype.getClass=function(){return _0},_0.computeIntersections=function(u){var d=new _0(u);return d.setFindAllIntersections(!0),d.isValid(),d.getIntersections()};var ra=function u(){this._nv=null;var d=arguments[0];this._nv=new _0(u.toSegmentStrings(d))};ra.prototype.checkValid=function(){this._nv.checkValid()},ra.prototype.interfaces_=function(){return[]},ra.prototype.getClass=function(){return ra},ra.toSegmentStrings=function(u){for(var d=new Xe,b=u.iterator();b.hasNext();){var v=b.next();d.add(new b0(v.getCoordinates(),v))}return d},ra.checkValid=function(u){new ra(u).checkValid()};var Pa=function(u){this._mapOp=u};Pa.prototype.map=function(u){for(var d=new Xe,b=0;b<u.getNumGeometries();b++){var v=this._mapOp.map(u.getGeometryN(b));v.isEmpty()||d.add(v)}return u.getFactory().createGeometryCollection(et.toGeometryArray(d))},Pa.prototype.interfaces_=function(){return[]},Pa.prototype.getClass=function(){return Pa},Pa.map=function(u,d){return new Pa(d).map(u)};var v0=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Xe,this._resultLineList=new Xe;var u=arguments[0],d=arguments[1],b=arguments[2];this._op=u,this._geometryFactory=d,this._ptLocator=b};v0.prototype.collectLines=function(u){for(var d=this._op.getGraph().getEdgeEnds().iterator();d.hasNext();){var b=d.next();this.collectLineEdge(b,u,this._lineEdgesList),this.collectBoundaryTouchEdge(b,u,this._lineEdgesList)}},v0.prototype.labelIsolatedLine=function(u,d){var b=this._ptLocator.locate(u.getCoordinate(),this._op.getArgGeometry(d));u.getLabel().setLocation(d,b)},v0.prototype.build=function(u){return this.findCoveredLineEdges(),this.collectLines(u),this.buildLines(u),this._resultLineList},v0.prototype.collectLineEdge=function(u,d,b){var v=u.getLabel(),S=u.getEdge();u.isLineEdge()&&(u.isVisited()||!Tt.isResultOfOp(v,d)||S.isCovered()||(b.add(S),u.setVisitedEdge(!0)))},v0.prototype.findCoveredLineEdges=function(){for(var u=this._op.getGraph().getNodes().iterator();u.hasNext();)u.next().getEdges().findCoveredLineEdges();for(var d=this._op.getGraph().getEdgeEnds().iterator();d.hasNext();){var b=d.next(),v=b.getEdge();if(b.isLineEdge()&&!v.isCoveredSet()){var S=this._op.isCoveredByA(b.getCoordinate());v.setCovered(S)}}},v0.prototype.labelIsolatedLines=function(u){for(var d=u.iterator();d.hasNext();){var b=d.next(),v=b.getLabel();b.isIsolated()&&(v.isNull(0)?this.labelIsolatedLine(b,0):this.labelIsolatedLine(b,1))}},v0.prototype.buildLines=function(u){for(var d=this._lineEdgesList.iterator();d.hasNext();){var b=d.next(),v=this._geometryFactory.createLineString(b.getCoordinates());this._resultLineList.add(v),b.setInResult(!0)}},v0.prototype.collectBoundaryTouchEdge=function(u,d,b){var v=u.getLabel();return u.isLineEdge()||u.isVisited()||u.isInteriorAreaEdge()||u.getEdge().isInResult()?null:(j.isTrue(!(u.isInResult()||u.getSym().isInResult())||!u.getEdge().isInResult()),void(Tt.isResultOfOp(v,d)&&d===Tt.INTERSECTION&&(b.add(u.getEdge()),u.setVisitedEdge(!0))))},v0.prototype.interfaces_=function(){return[]},v0.prototype.getClass=function(){return v0};var wa=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Xe;var u=arguments[0],d=arguments[1];this._op=u,this._geometryFactory=d};wa.prototype.filterCoveredNodeToPoint=function(u){var d=u.getCoordinate();if(!this._op.isCoveredByLA(d)){var b=this._geometryFactory.createPoint(d);this._resultPointList.add(b)}},wa.prototype.extractNonCoveredResultNodes=function(u){for(var d=this._op.getGraph().getNodes().iterator();d.hasNext();){var b=d.next();if(!b.isInResult()&&!b.isIncidentEdgeInResult()&&(b.getEdges().getDegree()===0||u===Tt.INTERSECTION)){var v=b.getLabel();Tt.isResultOfOp(v,u)&&this.filterCoveredNodeToPoint(b)}}},wa.prototype.build=function(u){return this.extractNonCoveredResultNodes(u),this._resultPointList},wa.prototype.interfaces_=function(){return[]},wa.prototype.getClass=function(){return wa};var Fi=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Fi.prototype.transformPoint=function(u,d){return this._factory.createPoint(this.transformCoordinates(u.getCoordinateSequence(),u))},Fi.prototype.transformPolygon=function(u,d){var b=!0,v=this.transformLinearRing(u.getExteriorRing(),u);v!==null&&v instanceof Wi&&!v.isEmpty()||(b=!1);for(var S=new Xe,F=0;F<u.getNumInteriorRing();F++){var G=this.transformLinearRing(u.getInteriorRingN(F),u);G===null||G.isEmpty()||(G instanceof Wi||(b=!1),S.add(G))}if(b)return this._factory.createPolygon(v,S.toArray([]));var K=new Xe;return v!==null&&K.add(v),K.addAll(S),this._factory.buildGeometry(K)},Fi.prototype.createCoordinateSequence=function(u){return this._factory.getCoordinateSequenceFactory().create(u)},Fi.prototype.getInputGeometry=function(){return this._inputGeom},Fi.prototype.transformMultiLineString=function(u,d){for(var b=new Xe,v=0;v<u.getNumGeometries();v++){var S=this.transformLineString(u.getGeometryN(v),u);S!==null&&(S.isEmpty()||b.add(S))}return this._factory.buildGeometry(b)},Fi.prototype.transformCoordinates=function(u,d){return this.copy(u)},Fi.prototype.transformLineString=function(u,d){return this._factory.createLineString(this.transformCoordinates(u.getCoordinateSequence(),u))},Fi.prototype.transformMultiPoint=function(u,d){for(var b=new Xe,v=0;v<u.getNumGeometries();v++){var S=this.transformPoint(u.getGeometryN(v),u);S!==null&&(S.isEmpty()||b.add(S))}return this._factory.buildGeometry(b)},Fi.prototype.transformMultiPolygon=function(u,d){for(var b=new Xe,v=0;v<u.getNumGeometries();v++){var S=this.transformPolygon(u.getGeometryN(v),u);S!==null&&(S.isEmpty()||b.add(S))}return this._factory.buildGeometry(b)},Fi.prototype.copy=function(u){return u.copy()},Fi.prototype.transformGeometryCollection=function(u,d){for(var b=new Xe,v=0;v<u.getNumGeometries();v++){var S=this.transform(u.getGeometryN(v));S!==null&&(this._pruneEmptyGeometry&&S.isEmpty()||b.add(S))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(et.toGeometryArray(b)):this._factory.buildGeometry(b)},Fi.prototype.transform=function(u){if(this._inputGeom=u,this._factory=u.getFactory(),u instanceof Kt)return this.transformPoint(u,null);if(u instanceof C0)return this.transformMultiPoint(u,null);if(u instanceof Wi)return this.transformLinearRing(u,null);if(u instanceof Gt)return this.transformLineString(u,null);if(u instanceof u0)return this.transformMultiLineString(u,null);if(u instanceof Ut)return this.transformPolygon(u,null);if(u instanceof ae)return this.transformMultiPolygon(u,null);if(u instanceof si)return this.transformGeometryCollection(u,null);throw new L("Unknown Geometry subtype: "+u.getClass().getName())},Fi.prototype.transformLinearRing=function(u,d){var b=this.transformCoordinates(u.getCoordinateSequence(),u);if(b===null)return this._factory.createLinearRing(null);var v=b.size();return v>0&&v<4&&!this._preserveType?this._factory.createLineString(b):this._factory.createLinearRing(b)},Fi.prototype.interfaces_=function(){return[]},Fi.prototype.getClass=function(){return Fi};var T0=function u(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new ut,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Gt&&typeof arguments[1]=="number"){var d=arguments[0],b=arguments[1];u.call(this,d.getCoordinates(),b)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var v=arguments[0],S=arguments[1];this._srcPts=v,this._isClosed=u.isClosed(v),this._snapTolerance=S}};T0.prototype.snapVertices=function(u,d){for(var b=this._isClosed?u.size()-1:u.size(),v=0;v<b;v++){var S=u.get(v),F=this.findSnapForVertex(S,d);F!==null&&(u.set(v,new $(F)),v===0&&this._isClosed&&u.set(u.size()-1,new $(F)))}},T0.prototype.findSnapForVertex=function(u,d){for(var b=0;b<d.length;b++){if(u.equals2D(d[b]))return null;if(u.distance(d[b])<this._snapTolerance)return d[b]}return null},T0.prototype.snapTo=function(u){var d=new Vi(this._srcPts);return this.snapVertices(d,u),this.snapSegments(d,u),d.toCoordinateArray()},T0.prototype.snapSegments=function(u,d){if(d.length===0)return null;var b=d.length;d[0].equals2D(d[d.length-1])&&(b=d.length-1);for(var v=0;v<b;v++){var S=d[v],F=this.findSegmentIndexToSnap(S,u);F>=0&&u.add(F+1,new $(S),!1)}},T0.prototype.findSegmentIndexToSnap=function(u,d){for(var b=R.MAX_VALUE,v=-1,S=0;S<d.size()-1;S++){if(this._seg.p0=d.get(S),this._seg.p1=d.get(S+1),this._seg.p0.equals2D(u)||this._seg.p1.equals2D(u)){if(this._allowSnappingToSourceVertices)continue;return-1}var F=this._seg.distance(u);F<this._snapTolerance&&F<b&&(b=F,v=S)}return v},T0.prototype.setAllowSnappingToSourceVertices=function(u){this._allowSnappingToSourceVertices=u},T0.prototype.interfaces_=function(){return[]},T0.prototype.getClass=function(){return T0},T0.isClosed=function(u){return!(u.length<=1)&&u[0].equals2D(u[u.length-1])};var ei=function(u){this._srcGeom=u||null},ms={SNAP_PRECISION_FACTOR:{configurable:!0}};ei.prototype.snapTo=function(u,d){var b=this.extractTargetCoordinates(u);return new gs(d,b).transform(this._srcGeom)},ei.prototype.snapToSelf=function(u,d){var b=this.extractTargetCoordinates(this._srcGeom),v=new gs(u,b,!0).transform(this._srcGeom),S=v;return d&&q(S,a0)&&(S=v.buffer(0)),S},ei.prototype.computeSnapTolerance=function(u){return this.computeMinimumSegmentLength(u)/10},ei.prototype.extractTargetCoordinates=function(u){for(var d=new E,b=u.getCoordinates(),v=0;v<b.length;v++)d.add(b[v]);return d.toArray(new Array(0).fill(null))},ei.prototype.computeMinimumSegmentLength=function(u){for(var d=R.MAX_VALUE,b=0;b<u.length-1;b++){var v=u[b].distance(u[b+1]);v<d&&(d=v)}return d},ei.prototype.interfaces_=function(){return[]},ei.prototype.getClass=function(){return ei},ei.snap=function(u,d,b){var v=new Array(2).fill(null),S=new ei(u);v[0]=S.snapTo(d,b);var F=new ei(d);return v[1]=F.snapTo(v[0],b),v},ei.computeOverlaySnapTolerance=function(){if(arguments.length===1){var u=arguments[0],d=ei.computeSizeBasedSnapTolerance(u),b=u.getPrecisionModel();if(b.getType()===ge.FIXED){var v=1/b.getScale()*2/1.415;v>d&&(d=v)}return d}if(arguments.length===2){var S=arguments[0],F=arguments[1];return Math.min(ei.computeOverlaySnapTolerance(S),ei.computeOverlaySnapTolerance(F))}},ei.computeSizeBasedSnapTolerance=function(u){var d=u.getEnvelopeInternal();return Math.min(d.getHeight(),d.getWidth())*ei.SNAP_PRECISION_FACTOR},ei.snapToSelf=function(u,d,b){return new ei(u).snapToSelf(d,b)},ms.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(ei,ms);var gs=function(u){function d(b,v,S){u.call(this),this._snapTolerance=b||null,this._snapPts=v||null,this._isSelfSnap=S!==void 0&&S}return u&&(d.__proto__=u),d.prototype=Object.create(u&&u.prototype),d.prototype.constructor=d,d.prototype.snapLine=function(b,v){var S=new T0(b,this._snapTolerance);return S.setAllowSnappingToSourceVertices(this._isSelfSnap),S.snapTo(v)},d.prototype.transformCoordinates=function(b,v){var S=b.toCoordinateArray(),F=this.snapLine(S,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(F)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Fi),Li=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Li.prototype.getCommon=function(){return R.longBitsToDouble(this._commonBits)},Li.prototype.add=function(u){var d=R.doubleToLongBits(u);if(this._isFirst)return this._commonBits=d,this._commonSignExp=Li.signExpBits(this._commonBits),this._isFirst=!1,null;if(Li.signExpBits(d)!==this._commonSignExp)return this._commonBits=0,null;this._commonMantissaBitsCount=Li.numCommonMostSigMantissaBits(this._commonBits,d),this._commonBits=Li.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))},Li.prototype.toString=function(){if(arguments.length===1){var u=arguments[0],d=R.longBitsToDouble(u),b="0000000000000000000000000000000000000000000000000000000000000000"+R.toBinaryString(u),v=b.substring(b.length-64);return v.substring(0,1)+"  "+v.substring(1,12)+"(exp) "+v.substring(12)+" [ "+d+" ]"}},Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li},Li.getBit=function(u,d){return u&1<<d?1:0},Li.signExpBits=function(u){return u>>52},Li.zeroLowerBits=function(u,d){return u&~((1<<d)-1)},Li.numCommonMostSigMantissaBits=function(u,d){for(var b=0,v=52;v>=0;v--){if(Li.getBit(u,v)!==Li.getBit(d,v))return b;b++}return 52};var U0=function(){this._commonCoord=null,this._ccFilter=new Ea},xs={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};U0.prototype.addCommonBits=function(u){var d=new K0(this._commonCoord);u.apply(d),u.geometryChanged()},U0.prototype.removeCommonBits=function(u){if(this._commonCoord.x===0&&this._commonCoord.y===0)return u;var d=new $(this._commonCoord);d.x=-d.x,d.y=-d.y;var b=new K0(d);return u.apply(b),u.geometryChanged(),u},U0.prototype.getCommonCoordinate=function(){return this._commonCoord},U0.prototype.add=function(u){u.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},U0.prototype.interfaces_=function(){return[]},U0.prototype.getClass=function(){return U0},xs.CommonCoordinateFilter.get=function(){return Ea},xs.Translater.get=function(){return K0},Object.defineProperties(U0,xs);var Ea=function(){this._commonBitsX=new Li,this._commonBitsY=new Li};Ea.prototype.filter=function(u){this._commonBitsX.add(u.x),this._commonBitsY.add(u.y)},Ea.prototype.getCommonCoordinate=function(){return new $(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},Ea.prototype.interfaces_=function(){return[Mt]},Ea.prototype.getClass=function(){return Ea};var K0=function(){this.trans=null;var u=arguments[0];this.trans=u};K0.prototype.filter=function(u,d){var b=u.getOrdinate(d,0)+this.trans.x,v=u.getOrdinate(d,1)+this.trans.y;u.setOrdinate(d,0,b),u.setOrdinate(d,1,v)},K0.prototype.isDone=function(){return!1},K0.prototype.isGeometryChanged=function(){return!0},K0.prototype.interfaces_=function(){return[gi]},K0.prototype.getClass=function(){return K0};var ci=function(u,d){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=u,this._geom[1]=d,this.computeSnapTolerance()};ci.prototype.selfSnap=function(u){return new ei(u).snapTo(u,this._snapTolerance)},ci.prototype.removeCommonBits=function(u){this._cbr=new U0,this._cbr.add(u[0]),this._cbr.add(u[1]);var d=new Array(2).fill(null);return d[0]=this._cbr.removeCommonBits(u[0].copy()),d[1]=this._cbr.removeCommonBits(u[1].copy()),d},ci.prototype.prepareResult=function(u){return this._cbr.addCommonBits(u),u},ci.prototype.getResultGeometry=function(u){var d=this.snap(this._geom),b=Tt.overlayOp(d[0],d[1],u);return this.prepareResult(b)},ci.prototype.checkValid=function(u){u.isValid()||ye.out.println("Snapped geometry is invalid")},ci.prototype.computeSnapTolerance=function(){this._snapTolerance=ei.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ci.prototype.snap=function(u){var d=this.removeCommonBits(u);return ei.snap(d[0],d[1],this._snapTolerance)},ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci},ci.overlayOp=function(u,d,b){return new ci(u,d).getResultGeometry(b)},ci.union=function(u,d){return ci.overlayOp(u,d,Tt.UNION)},ci.intersection=function(u,d){return ci.overlayOp(u,d,Tt.INTERSECTION)},ci.symDifference=function(u,d){return ci.overlayOp(u,d,Tt.SYMDIFFERENCE)},ci.difference=function(u,d){return ci.overlayOp(u,d,Tt.DIFFERENCE)};var Ai=function(u,d){this._geom=new Array(2).fill(null),this._geom[0]=u,this._geom[1]=d};Ai.prototype.getResultGeometry=function(u){var d=null,b=!1,v=null;try{d=Tt.overlayOp(this._geom[0],this._geom[1],u),b=!0}catch(S){if(!(S instanceof le))throw S;v=S}if(!b)try{d=ci.overlayOp(this._geom[0],this._geom[1],u)}catch(S){throw S instanceof le?v:S}return d},Ai.prototype.interfaces_=function(){return[]},Ai.prototype.getClass=function(){return Ai},Ai.overlayOp=function(u,d,b){return new Ai(u,d).getResultGeometry(b)},Ai.union=function(u,d){return Ai.overlayOp(u,d,Tt.UNION)},Ai.intersection=function(u,d){return Ai.overlayOp(u,d,Tt.INTERSECTION)},Ai.symDifference=function(u,d){return Ai.overlayOp(u,d,Tt.SYMDIFFERENCE)},Ai.difference=function(u,d){return Ai.overlayOp(u,d,Tt.DIFFERENCE)};var Ba=function(){this.mce=null,this.chainIndex=null;var u=arguments[0],d=arguments[1];this.mce=u,this.chainIndex=d};Ba.prototype.computeIntersections=function(u,d){this.mce.computeIntersectsForChain(this.chainIndex,u.mce,u.chainIndex,d)},Ba.prototype.interfaces_=function(){return[]},Ba.prototype.getClass=function(){return Ba};var ji=function u(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,arguments.length===2){var d=arguments[0],b=arguments[1];this._eventType=u.DELETE,this._xValue=d,this._insertEvent=b}else if(arguments.length===3){var v=arguments[0],S=arguments[1],F=arguments[2];this._eventType=u.INSERT,this._label=v,this._xValue=S,this._obj=F}},os={INSERT:{configurable:!0},DELETE:{configurable:!0}};ji.prototype.isDelete=function(){return this._eventType===ji.DELETE},ji.prototype.setDeleteEventIndex=function(u){this._deleteEventIndex=u},ji.prototype.getObject=function(){return this._obj},ji.prototype.compareTo=function(u){var d=u;return this._xValue<d._xValue?-1:this._xValue>d._xValue?1:this._eventType<d._eventType?-1:this._eventType>d._eventType?1:0},ji.prototype.getInsertEvent=function(){return this._insertEvent},ji.prototype.isInsert=function(){return this._eventType===ji.INSERT},ji.prototype.isSameLabel=function(u){return this._label!==null&&this._label===u._label},ji.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},ji.prototype.interfaces_=function(){return[N]},ji.prototype.getClass=function(){return ji},os.INSERT.get=function(){return 1},os.DELETE.get=function(){return 2},Object.defineProperties(ji,os);var Ka=function(){};Ka.prototype.interfaces_=function(){return[]},Ka.prototype.getClass=function(){return Ka};var mi=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var u=arguments[0],d=arguments[1],b=arguments[2];this._li=u,this._includeProper=d,this._recordIsolated=b};mi.prototype.isTrivialIntersection=function(u,d,b,v){if(u===b&&this._li.getIntersectionNum()===1){if(mi.isAdjacentSegments(d,v))return!0;if(u.isClosed()){var S=u.getNumPoints()-1;if(d===0&&v===S||v===0&&d===S)return!0}}return!1},mi.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},mi.prototype.setIsDoneIfProperInt=function(u){this._isDoneWhenProperInt=u},mi.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},mi.prototype.isBoundaryPointInternal=function(u,d){for(var b=d.iterator();b.hasNext();){var v=b.next().getCoordinate();if(u.isIntersection(v))return!0}return!1},mi.prototype.hasProperIntersection=function(){return this._hasProper},mi.prototype.hasIntersection=function(){return this._hasIntersection},mi.prototype.isDone=function(){return this._isDone},mi.prototype.isBoundaryPoint=function(u,d){return d!==null&&(!!this.isBoundaryPointInternal(u,d[0])||!!this.isBoundaryPointInternal(u,d[1]))},mi.prototype.setBoundaryNodes=function(u,d){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=u,this._bdyNodes[1]=d},mi.prototype.addIntersections=function(u,d,b,v){if(u===b&&d===v)return null;this.numTests++;var S=u.getCoordinates()[d],F=u.getCoordinates()[d+1],G=b.getCoordinates()[v],K=b.getCoordinates()[v+1];this._li.computeIntersection(S,F,G,K),this._li.hasIntersection()&&(this._recordIsolated&&(u.setIsolated(!1),b.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(u,d,b,v)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(u.addIntersections(this._li,d,0),b.addIntersections(this._li,v,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},mi.prototype.interfaces_=function(){return[]},mi.prototype.getClass=function(){return mi},mi.isAdjacentSegments=function(u,d){return Math.abs(u-d)===1};var Cs=function(u){function d(){u.call(this),this.events=new Xe,this.nOverlaps=null}return u&&(d.__proto__=u),d.prototype=Object.create(u&&u.prototype),d.prototype.constructor=d,d.prototype.prepareEvents=function(){Yi.sort(this.events);for(var b=0;b<this.events.size();b++){var v=this.events.get(b);v.isDelete()&&v.getInsertEvent().setDeleteEventIndex(b)}},d.prototype.computeIntersections=function(){if(arguments.length===1){var b=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var v=0;v<this.events.size();v++){var S=this.events.get(v);if(S.isInsert()&&this.processOverlaps(v,S.getDeleteEventIndex(),S,b),b.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof mi&&q(arguments[0],Zt)&&q(arguments[1],Zt)){var F=arguments[0],G=arguments[1],K=arguments[2];this.addEdges(F,F),this.addEdges(G,G),this.computeIntersections(K)}else if(typeof arguments[2]=="boolean"&&q(arguments[0],Zt)&&arguments[1]instanceof mi){var ue=arguments[0],we=arguments[1];arguments[2]?this.addEdges(ue,null):this.addEdges(ue),this.computeIntersections(we)}}},d.prototype.addEdge=function(b,v){for(var S=b.getMonotoneChainEdge(),F=S.getStartIndexes(),G=0;G<F.length-1;G++){var K=new Ba(S,G),ue=new ji(v,S.getMinX(G),K);this.events.add(ue),this.events.add(new ji(S.getMaxX(G),ue))}},d.prototype.processOverlaps=function(b,v,S,F){for(var G=S.getObject(),K=b;K<v;K++){var ue=this.events.get(K);if(ue.isInsert()){var we=ue.getObject();S.isSameLabel(ue)||(G.computeIntersections(we,F),this.nOverlaps++)}}},d.prototype.addEdges=function(){if(arguments.length===1)for(var b=arguments[0].iterator();b.hasNext();){var v=b.next();this.addEdge(v,v)}else if(arguments.length===2)for(var S=arguments[0],F=arguments[1],G=S.iterator();G.hasNext();){var K=G.next();this.addEdge(K,F)}},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Ka),L0=function(){this._min=R.POSITIVE_INFINITY,this._max=R.NEGATIVE_INFINITY},ys={NodeComparator:{configurable:!0}};L0.prototype.getMin=function(){return this._min},L0.prototype.intersects=function(u,d){return!(this._min>d||this._max<u)},L0.prototype.getMax=function(){return this._max},L0.prototype.toString=function(){return Oe.toLineString(new $(this._min,0),new $(this._max,0))},L0.prototype.interfaces_=function(){return[]},L0.prototype.getClass=function(){return L0},ys.NodeComparator.get=function(){return Ha},Object.defineProperties(L0,ys);var Ha=function(){};Ha.prototype.compare=function(u,d){var b=u,v=d,S=(b._min+b._max)/2,F=(v._min+v._max)/2;return S<F?-1:S>F?1:0},Ha.prototype.interfaces_=function(){return[B]},Ha.prototype.getClass=function(){return Ha};var Ps=function(u){function d(){u.call(this),this._item=null;var b=arguments[0],v=arguments[1],S=arguments[2];this._min=b,this._max=v,this._item=S}return u&&(d.__proto__=u),d.prototype=Object.create(u&&u.prototype),d.prototype.constructor=d,d.prototype.query=function(b,v,S){if(!this.intersects(b,v))return null;S.visitItem(this._item)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(L0),ws=function(u){function d(){u.call(this),this._node1=null,this._node2=null;var b=arguments[0],v=arguments[1];this._node1=b,this._node2=v,this.buildExtent(this._node1,this._node2)}return u&&(d.__proto__=u),d.prototype=Object.create(u&&u.prototype),d.prototype.constructor=d,d.prototype.buildExtent=function(b,v){this._min=Math.min(b._min,v._min),this._max=Math.max(b._max,v._max)},d.prototype.query=function(b,v,S){if(!this.intersects(b,v))return null;this._node1!==null&&this._node1.query(b,v,S),this._node2!==null&&this._node2.query(b,v,S)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(L0),A0=function(){this._leaves=new Xe,this._root=null,this._level=0};A0.prototype.buildTree=function(){Yi.sort(this._leaves,new L0.NodeComparator);for(var u=this._leaves,d=null,b=new Xe;;){if(this.buildLevel(u,b),b.size()===1)return b.get(0);d=u,u=b,b=d}},A0.prototype.insert=function(u,d,b){if(this._root!==null)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new Ps(u,d,b))},A0.prototype.query=function(u,d,b){this.init(),this._root.query(u,d,b)},A0.prototype.buildRoot=function(){if(this._root!==null)return null;this._root=this.buildTree()},A0.prototype.printNode=function(u){ye.out.println(Oe.toLineString(new $(u._min,this._level),new $(u._max,this._level)))},A0.prototype.init=function(){if(this._root!==null)return null;this.buildRoot()},A0.prototype.buildLevel=function(u,d){this._level++,d.clear();for(var b=0;b<u.size();b+=2){var v=u.get(b);if((b+1<u.size()?u.get(b):null)===null)d.add(v);else{var S=new ws(u.get(b),u.get(b+1));d.add(S)}}},A0.prototype.interfaces_=function(){return[]},A0.prototype.getClass=function(){return A0};var Ia=function(){this._items=new Xe};Ia.prototype.visitItem=function(u){this._items.add(u)},Ia.prototype.getItems=function(){return this._items},Ia.prototype.interfaces_=function(){return[P0]},Ia.prototype.getClass=function(){return Ia};var Ra=function(){this._index=null;var u=arguments[0];if(!q(u,a0))throw new L("Argument must be Polygonal");this._index=new xa(u)},cs={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Ra.prototype.locate=function(u){var d=new Ae(u),b=new Da(d);return this._index.query(u.y,u.y,b),d.getLocation()},Ra.prototype.interfaces_=function(){return[sa]},Ra.prototype.getClass=function(){return Ra},cs.SegmentVisitor.get=function(){return Da},cs.IntervalIndexedGeometry.get=function(){return xa},Object.defineProperties(Ra,cs);var Da=function(){this._counter=null;var u=arguments[0];this._counter=u};Da.prototype.visitItem=function(u){var d=u;this._counter.countSegment(d.getCoordinate(0),d.getCoordinate(1))},Da.prototype.interfaces_=function(){return[P0]},Da.prototype.getClass=function(){return Da};var xa=function(){this._index=new A0;var u=arguments[0];this.init(u)};xa.prototype.init=function(u){for(var d=hi.getLines(u).iterator();d.hasNext();){var b=d.next().getCoordinates();this.addLine(b)}},xa.prototype.addLine=function(u){for(var d=1;d<u.length;d++){var b=new ut(u[d-1],u[d]),v=Math.min(b.p0.y,b.p1.y),S=Math.max(b.p0.y,b.p1.y);this._index.insert(v,S,b)}},xa.prototype.query=function(){if(arguments.length===2){var u=arguments[0],d=arguments[1],b=new Ia;return this._index.query(u,d,b),b.getItems()}if(arguments.length===3){var v=arguments[0],S=arguments[1],F=arguments[2];this._index.query(v,S,F)}},xa.prototype.interfaces_=function(){return[]},xa.prototype.getClass=function(){return xa};var Ga=function(u){function d(){if(u.call(this),this._parentGeom=null,this._lineEdgeMap=new ve,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new c0,arguments.length===2){var b=arguments[0],v=arguments[1],S=pt.OGC_SFS_BOUNDARY_RULE;this._argIndex=b,this._parentGeom=v,this._boundaryNodeRule=S,v!==null&&this.add(v)}else if(arguments.length===3){var F=arguments[0],G=arguments[1],K=arguments[2];this._argIndex=F,this._parentGeom=G,this._boundaryNodeRule=K,G!==null&&this.add(G)}}return u&&(d.__proto__=u),d.prototype=Object.create(u&&u.prototype),d.prototype.constructor=d,d.prototype.insertBoundaryPoint=function(b,v){var S=this._nodes.addNode(v).getLabel(),F=1;z.NONE,S.getLocation(b,$e.ON)===z.BOUNDARY&&F++;var G=d.determineBoundary(this._boundaryNodeRule,F);S.setLocation(b,G)},d.prototype.computeSelfNodes=function(){if(arguments.length===2){var b=arguments[0],v=arguments[1];return this.computeSelfNodes(b,v,!1)}if(arguments.length===3){var S=arguments[0],F=arguments[1],G=arguments[2],K=new mi(S,!0,!1);K.setIsDoneIfProperInt(G);var ue=this.createEdgeSetIntersector(),we=this._parentGeom instanceof Wi||this._parentGeom instanceof Ut||this._parentGeom instanceof ae,ke=F||!we;return ue.computeIntersections(this._edges,K,ke),this.addSelfIntersectionNodes(this._argIndex),K}},d.prototype.computeSplitEdges=function(b){for(var v=this._edges.iterator();v.hasNext();)v.next().eiList.addSplitEdges(b)},d.prototype.computeEdgeIntersections=function(b,v,S){var F=new mi(v,S,!0);return F.setBoundaryNodes(this.getBoundaryNodes(),b.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,b._edges,F),F},d.prototype.getGeometry=function(){return this._parentGeom},d.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},d.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},d.prototype.addPoint=function(){if(arguments[0]instanceof Kt){var b=arguments[0].getCoordinate();this.insertPoint(this._argIndex,b,z.INTERIOR)}else if(arguments[0]instanceof $){var v=arguments[0];this.insertPoint(this._argIndex,v,z.INTERIOR)}},d.prototype.addPolygon=function(b){this.addPolygonRing(b.getExteriorRing(),z.EXTERIOR,z.INTERIOR);for(var v=0;v<b.getNumInteriorRing();v++){var S=b.getInteriorRingN(v);this.addPolygonRing(S,z.INTERIOR,z.EXTERIOR)}},d.prototype.addEdge=function(b){this.insertEdge(b);var v=b.getCoordinates();this.insertPoint(this._argIndex,v[0],z.BOUNDARY),this.insertPoint(this._argIndex,v[v.length-1],z.BOUNDARY)},d.prototype.addLineString=function(b){var v=Et.removeRepeatedPoints(b.getCoordinates());if(v.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=v[0],null;var S=new Za(v,new $t(this._argIndex,z.INTERIOR));this._lineEdgeMap.put(b,S),this.insertEdge(S),j.isTrue(v.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,v[0]),this.insertBoundaryPoint(this._argIndex,v[v.length-1])},d.prototype.getInvalidPoint=function(){return this._invalidPoint},d.prototype.getBoundaryPoints=function(){for(var b=this.getBoundaryNodes(),v=new Array(b.size()).fill(null),S=0,F=b.iterator();F.hasNext();){var G=F.next();v[S++]=G.getCoordinate().copy()}return v},d.prototype.getBoundaryNodes=function(){return this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},d.prototype.addSelfIntersectionNode=function(b,v,S){if(this.isBoundaryNode(b,v))return null;S===z.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(b,v):this.insertPoint(b,v,S)},d.prototype.addPolygonRing=function(b,v,S){if(b.isEmpty())return null;var F=Et.removeRepeatedPoints(b.getCoordinates());if(F.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=F[0],null;var G=v,K=S;Pe.isCCW(F)&&(G=S,K=v);var ue=new Za(F,new $t(this._argIndex,z.BOUNDARY,G,K));this._lineEdgeMap.put(b,ue),this.insertEdge(ue),this.insertPoint(this._argIndex,F[0],z.BOUNDARY)},d.prototype.insertPoint=function(b,v,S){var F=this._nodes.addNode(v),G=F.getLabel();G===null?F._label=new $t(b,S):G.setLocation(b,S)},d.prototype.createEdgeSetIntersector=function(){return new Cs},d.prototype.addSelfIntersectionNodes=function(b){for(var v=this._edges.iterator();v.hasNext();)for(var S=v.next(),F=S.getLabel().getLocation(b),G=S.eiList.iterator();G.hasNext();){var K=G.next();this.addSelfIntersectionNode(b,K.coord,F)}},d.prototype.add=function(){if(arguments.length!==1)return u.prototype.add.apply(this,arguments);var b=arguments[0];if(b.isEmpty())return null;if(b instanceof ae&&(this._useBoundaryDeterminationRule=!1),b instanceof Ut)this.addPolygon(b);else if(b instanceof Gt)this.addLineString(b);else if(b instanceof Kt)this.addPoint(b);else if(b instanceof C0)this.addCollection(b);else if(b instanceof u0)this.addCollection(b);else if(b instanceof ae)this.addCollection(b);else{if(!(b instanceof si))throw new Error(b.getClass().getName());this.addCollection(b)}},d.prototype.addCollection=function(b){for(var v=0;v<b.getNumGeometries();v++){var S=b.getGeometryN(v);this.add(S)}},d.prototype.locate=function(b){return q(this._parentGeom,a0)&&this._parentGeom.getNumGeometries()>50?(this._areaPtLocator===null&&(this._areaPtLocator=new Ra(this._parentGeom)),this._areaPtLocator.locate(b)):this._ptLocator.locate(b,this._parentGeom)},d.prototype.findEdge=function(){if(arguments.length===1){var b=arguments[0];return this._lineEdgeMap.get(b)}return u.prototype.findEdge.apply(this,arguments)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d.determineBoundary=function(b,v){return b.isInBoundary(v)?z.BOUNDARY:z.INTERIOR},d}(jt),Oa=function(){if(this._li=new ce,this._resultPrecisionModel=null,this._arg=null,arguments.length===1){var u=arguments[0];this.setComputationPrecision(u.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Ga(0,u)}else if(arguments.length===2){var d=arguments[0],b=arguments[1],v=pt.OGC_SFS_BOUNDARY_RULE;d.getPrecisionModel().compareTo(b.getPrecisionModel())>=0?this.setComputationPrecision(d.getPrecisionModel()):this.setComputationPrecision(b.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ga(0,d,v),this._arg[1]=new Ga(1,b,v)}else if(arguments.length===3){var S=arguments[0],F=arguments[1],G=arguments[2];S.getPrecisionModel().compareTo(F.getPrecisionModel())>=0?this.setComputationPrecision(S.getPrecisionModel()):this.setComputationPrecision(F.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ga(0,S,G),this._arg[1]=new Ga(1,F,G)}};Oa.prototype.getArgGeometry=function(u){return this._arg[u].getGeometry()},Oa.prototype.setComputationPrecision=function(u){this._resultPrecisionModel=u,this._li.setPrecisionModel(this._resultPrecisionModel)},Oa.prototype.interfaces_=function(){return[]},Oa.prototype.getClass=function(){return Oa};var oa=function(){};oa.prototype.interfaces_=function(){return[]},oa.prototype.getClass=function(){return oa},oa.map=function(){if(arguments[0]instanceof qe&&q(arguments[1],oa.MapOp)){for(var u=arguments[0],d=arguments[1],b=new Xe,v=0;v<u.getNumGeometries();v++){var S=d.map(u.getGeometryN(v));S!==null&&b.add(S)}return u.getFactory().buildGeometry(b)}if(q(arguments[0],kt)&&q(arguments[1],oa.MapOp)){for(var F=arguments[0],G=arguments[1],K=new Xe,ue=F.iterator();ue.hasNext();){var we=ue.next(),ke=G.map(we);ke!==null&&K.add(ke)}return K}},oa.MapOp=function(){};var Tt=function(u){function d(){var b=arguments[0],v=arguments[1];u.call(this,b,v),this._ptLocator=new c0,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Xi,this._resultPolyList=new Xe,this._resultLineList=new Xe,this._resultPointList=new Xe,this._graph=new jt(new Xa),this._geomFact=b.getFactory()}return u&&(d.__proto__=u),d.prototype=Object.create(u&&u.prototype),d.prototype.constructor=d,d.prototype.insertUniqueEdge=function(b){var v=this._edgeList.findEqualEdge(b);if(v!==null){var S=v.getLabel(),F=b.getLabel();v.isPointwiseEqual(b)||(F=new $t(b.getLabel())).flip();var G=v.getDepth();G.isNull()&&G.add(S),G.add(F),S.merge(F)}else this._edgeList.add(b)},d.prototype.getGraph=function(){return this._graph},d.prototype.cancelDuplicateResultEdges=function(){for(var b=this._graph.getEdgeEnds().iterator();b.hasNext();){var v=b.next(),S=v.getSym();v.isInResult()&&S.isInResult()&&(v.setInResult(!1),S.setInResult(!1))}},d.prototype.isCoveredByLA=function(b){return!!this.isCovered(b,this._resultLineList)||!!this.isCovered(b,this._resultPolyList)},d.prototype.computeGeometry=function(b,v,S,F){var G=new Xe;return G.addAll(b),G.addAll(v),G.addAll(S),G.isEmpty()?d.createEmptyResult(F,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(G)},d.prototype.mergeSymLabels=function(){for(var b=this._graph.getNodes().iterator();b.hasNext();)b.next().getEdges().mergeSymLabels()},d.prototype.isCovered=function(b,v){for(var S=v.iterator();S.hasNext();){var F=S.next();if(this._ptLocator.locate(b,F)!==z.EXTERIOR)return!0}return!1},d.prototype.replaceCollapsedEdges=function(){for(var b=new Xe,v=this._edgeList.iterator();v.hasNext();){var S=v.next();S.isCollapsed()&&(v.remove(),b.add(S.getCollapsedEdge()))}this._edgeList.addAll(b)},d.prototype.updateNodeLabelling=function(){for(var b=this._graph.getNodes().iterator();b.hasNext();){var v=b.next(),S=v.getEdges().getLabel();v.getLabel().merge(S)}},d.prototype.getResultGeometry=function(b){return this.computeOverlay(b),this._resultGeom},d.prototype.insertUniqueEdges=function(b){for(var v=b.iterator();v.hasNext();){var S=v.next();this.insertUniqueEdge(S)}},d.prototype.computeOverlay=function(b){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var v=new Xe;this._arg[0].computeSplitEdges(v),this._arg[1].computeSplitEdges(v),this.insertUniqueEdges(v),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),ra.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(b),this.cancelDuplicateResultEdges();var S=new wi(this._geomFact);S.add(this._graph),this._resultPolyList=S.getPolygons();var F=new v0(this,this._geomFact,this._ptLocator);this._resultLineList=F.build(b);var G=new wa(this,this._geomFact,this._ptLocator);this._resultPointList=G.build(b),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,b)},d.prototype.labelIncompleteNode=function(b,v){var S=this._ptLocator.locate(b.getCoordinate(),this._arg[v].getGeometry());b.getLabel().setLocation(v,S)},d.prototype.copyPoints=function(b){for(var v=this._arg[b].getNodeIterator();v.hasNext();){var S=v.next();this._graph.addNode(S.getCoordinate()).setLabel(b,S.getLabel().getLocation(b))}},d.prototype.findResultAreaEdges=function(b){for(var v=this._graph.getEdgeEnds().iterator();v.hasNext();){var S=v.next(),F=S.getLabel();F.isArea()&&!S.isInteriorAreaEdge()&&d.isResultOfOp(F.getLocation(0,$e.RIGHT),F.getLocation(1,$e.RIGHT),b)&&S.setInResult(!0)}},d.prototype.computeLabelsFromDepths=function(){for(var b=this._edgeList.iterator();b.hasNext();){var v=b.next(),S=v.getLabel(),F=v.getDepth();if(!F.isNull()){F.normalize();for(var G=0;G<2;G++)S.isNull(G)||!S.isArea()||F.isNull(G)||(F.getDelta(G)===0?S.toLine(G):(j.isTrue(!F.isNull(G,$e.LEFT),"depth of LEFT side has not been initialized"),S.setLocation(G,$e.LEFT,F.getLocation(G,$e.LEFT)),j.isTrue(!F.isNull(G,$e.RIGHT),"depth of RIGHT side has not been initialized"),S.setLocation(G,$e.RIGHT,F.getLocation(G,$e.RIGHT))))}}},d.prototype.computeLabelling=function(){for(var b=this._graph.getNodes().iterator();b.hasNext();)b.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},d.prototype.labelIncompleteNodes=function(){for(var b=this._graph.getNodes().iterator();b.hasNext();){var v=b.next(),S=v.getLabel();v.isIsolated()&&(S.isNull(0)?this.labelIncompleteNode(v,0):this.labelIncompleteNode(v,1)),v.getEdges().updateLabelling(S)}},d.prototype.isCoveredByA=function(b){return!!this.isCovered(b,this._resultPolyList)},d.prototype.interfaces_=function(){return[]},d.prototype.getClass=function(){return d},d}(Oa);Tt.overlayOp=function(u,d,b){return new Tt(u,d).getResultGeometry(b)},Tt.intersection=function(u,d){if(u.isEmpty()||d.isEmpty())return Tt.createEmptyResult(Tt.INTERSECTION,u,d,u.getFactory());if(u.isGeometryCollection()){var b=d;return Pa.map(u,{interfaces_:function(){return[oa.MapOp]},map:function(v){return v.intersection(b)}})}return u.checkNotGeometryCollection(u),u.checkNotGeometryCollection(d),Ai.overlayOp(u,d,Tt.INTERSECTION)},Tt.symDifference=function(u,d){if(u.isEmpty()||d.isEmpty()){if(u.isEmpty()&&d.isEmpty())return Tt.createEmptyResult(Tt.SYMDIFFERENCE,u,d,u.getFactory());if(u.isEmpty())return d.copy();if(d.isEmpty())return u.copy()}return u.checkNotGeometryCollection(u),u.checkNotGeometryCollection(d),Ai.overlayOp(u,d,Tt.SYMDIFFERENCE)},Tt.resultDimension=function(u,d,b){var v=d.getDimension(),S=b.getDimension(),F=-1;switch(u){case Tt.INTERSECTION:F=Math.min(v,S);break;case Tt.UNION:F=Math.max(v,S);break;case Tt.DIFFERENCE:F=v;break;case Tt.SYMDIFFERENCE:F=Math.max(v,S)}return F},Tt.createEmptyResult=function(u,d,b,v){var S=null;switch(Tt.resultDimension(u,d,b)){case-1:S=v.createGeometryCollection(new Array(0).fill(null));break;case 0:S=v.createPoint();break;case 1:S=v.createLineString();break;case 2:S=v.createPolygon()}return S},Tt.difference=function(u,d){return u.isEmpty()?Tt.createEmptyResult(Tt.DIFFERENCE,u,d,u.getFactory()):d.isEmpty()?u.copy():(u.checkNotGeometryCollection(u),u.checkNotGeometryCollection(d),Ai.overlayOp(u,d,Tt.DIFFERENCE))},Tt.isResultOfOp=function(){if(arguments.length===2){var u=arguments[0],d=arguments[1],b=u.getLocation(0),v=u.getLocation(1);return Tt.isResultOfOp(b,v,d)}if(arguments.length===3){var S=arguments[0],F=arguments[1],G=arguments[2];switch(S===z.BOUNDARY&&(S=z.INTERIOR),F===z.BOUNDARY&&(F=z.INTERIOR),G){case Tt.INTERSECTION:return S===z.INTERIOR&&F===z.INTERIOR;case Tt.UNION:return S===z.INTERIOR||F===z.INTERIOR;case Tt.DIFFERENCE:return S===z.INTERIOR&&F!==z.INTERIOR;case Tt.SYMDIFFERENCE:return S===z.INTERIOR&&F!==z.INTERIOR||S!==z.INTERIOR&&F===z.INTERIOR}return!1}},Tt.INTERSECTION=1,Tt.UNION=2,Tt.DIFFERENCE=3,Tt.SYMDIFFERENCE=4;var Q0=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new c0,this._seg=new ut;var u=arguments[0],d=arguments[1];this._g=u,this._boundaryDistanceTolerance=d,this._linework=this.extractLinework(u)};Q0.prototype.isWithinToleranceOfBoundary=function(u){for(var d=0;d<this._linework.getNumGeometries();d++)for(var b=this._linework.getGeometryN(d).getCoordinateSequence(),v=0;v<b.size()-1;v++)if(b.getCoordinate(v,this._seg.p0),b.getCoordinate(v+1,this._seg.p1),this._seg.distance(u)<=this._boundaryDistanceTolerance)return!0;return!1},Q0.prototype.getLocation=function(u){return this.isWithinToleranceOfBoundary(u)?z.BOUNDARY:this._ptLocator.locate(u,this._g)},Q0.prototype.extractLinework=function(u){var d=new Na;u.apply(d);var b=d.getLinework(),v=et.toLineStringArray(b);return u.getFactory().createMultiLineString(v)},Q0.prototype.interfaces_=function(){return[]},Q0.prototype.getClass=function(){return Q0};var Na=function(){this._linework=null,this._linework=new Xe};Na.prototype.getLinework=function(){return this._linework},Na.prototype.filter=function(u){if(u instanceof Ut){var d=u;this._linework.add(d.getExteriorRing());for(var b=0;b<d.getNumInteriorRing();b++)this._linework.add(d.getInteriorRingN(b))}},Na.prototype.interfaces_=function(){return[se]},Na.prototype.getClass=function(){return Na};var ca=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var u=arguments[0];this._g=u};ca.prototype.extractPoints=function(u,d,b){for(var v=u.getCoordinates(),S=0;S<v.length-1;S++)this.computeOffsetPoints(v[S],v[S+1],d,b)},ca.prototype.setSidesToGenerate=function(u,d){this._doLeft=u,this._doRight=d},ca.prototype.getPoints=function(u){for(var d=new Xe,b=hi.getLines(this._g).iterator();b.hasNext();){var v=b.next();this.extractPoints(v,u,d)}return d},ca.prototype.computeOffsetPoints=function(u,d,b,v){var S=d.x-u.x,F=d.y-u.y,G=Math.sqrt(S*S+F*F),K=b*S/G,ue=b*F/G,we=(d.x+u.x)/2,ke=(d.y+u.y)/2;if(this._doLeft){var Ge=new $(we-ue,ke+K);v.add(Ge)}if(this._doRight){var tt=new $(we+ue,ke-K);v.add(tt)}},ca.prototype.interfaces_=function(){return[]},ca.prototype.getClass=function(){return ca};var Ki=function u(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=u.TOLERANCE,this._testCoords=new Xe;var d=arguments[0],b=arguments[1],v=arguments[2];this._boundaryDistanceTolerance=u.computeBoundaryDistanceTolerance(d,b),this._geom=[d,b,v],this._locFinder=[new Q0(this._geom[0],this._boundaryDistanceTolerance),new Q0(this._geom[1],this._boundaryDistanceTolerance),new Q0(this._geom[2],this._boundaryDistanceTolerance)]},bs={TOLERANCE:{configurable:!0}};Ki.prototype.reportResult=function(u,d,b){ye.out.println("Overlay result invalid - A:"+z.toLocationSymbol(d[0])+" B:"+z.toLocationSymbol(d[1])+" expected:"+(b?"i":"e")+" actual:"+z.toLocationSymbol(d[2]))},Ki.prototype.isValid=function(u){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var d=this.checkValid(u);return d},Ki.prototype.checkValid=function(){if(arguments.length===1){for(var u=arguments[0],d=0;d<this._testCoords.size();d++){var b=this._testCoords.get(d);if(!this.checkValid(u,b))return this._invalidLocation=b,!1}return!0}if(arguments.length===2){var v=arguments[0],S=arguments[1];return this._location[0]=this._locFinder[0].getLocation(S),this._location[1]=this._locFinder[1].getLocation(S),this._location[2]=this._locFinder[2].getLocation(S),!!Ki.hasLocation(this._location,z.BOUNDARY)||this.isValidResult(v,this._location)}},Ki.prototype.addTestPts=function(u){var d=new ca(u);this._testCoords.addAll(d.getPoints(5*this._boundaryDistanceTolerance))},Ki.prototype.isValidResult=function(u,d){var b=Tt.isResultOfOp(d[0],d[1],u),v=!(b^d[2]===z.INTERIOR);return v||this.reportResult(u,d,b),v},Ki.prototype.getInvalidLocation=function(){return this._invalidLocation},Ki.prototype.interfaces_=function(){return[]},Ki.prototype.getClass=function(){return Ki},Ki.hasLocation=function(u,d){for(var b=0;b<3;b++)if(u[b]===d)return!0;return!1},Ki.computeBoundaryDistanceTolerance=function(u,d){return Math.min(ei.computeSizeBasedSnapTolerance(u),ei.computeSizeBasedSnapTolerance(d))},Ki.isValid=function(u,d,b,v){return new Ki(u,d,v).isValid(b)},bs.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Ki,bs);var Qi=function u(d){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=u.extractFactory(d),this._inputGeoms=d};Qi.prototype.extractElements=function(u,d){if(u===null)return null;for(var b=0;b<u.getNumGeometries();b++){var v=u.getGeometryN(b);this._skipEmpty&&v.isEmpty()||d.add(v)}},Qi.prototype.combine=function(){for(var u=new Xe,d=this._inputGeoms.iterator();d.hasNext();){var b=d.next();this.extractElements(b,u)}return u.size()===0?this._geomFactory!==null?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(u)},Qi.prototype.interfaces_=function(){return[]},Qi.prototype.getClass=function(){return Qi},Qi.combine=function(){if(arguments.length===1){var u=arguments[0];return new Qi(u).combine()}if(arguments.length===2){var d=arguments[0],b=arguments[1];return new Qi(Qi.createList(d,b)).combine()}if(arguments.length===3){var v=arguments[0],S=arguments[1],F=arguments[2];return new Qi(Qi.createList(v,S,F)).combine()}},Qi.extractFactory=function(u){return u.isEmpty()?null:u.iterator().next().getFactory()},Qi.createList=function(){if(arguments.length===2){var u=arguments[0],d=arguments[1],b=new Xe;return b.add(u),b.add(d),b}if(arguments.length===3){var v=arguments[0],S=arguments[1],F=arguments[2],G=new Xe;return G.add(v),G.add(S),G.add(F),G}};var ti=function(){this._inputPolys=null,this._geomFactory=null;var u=arguments[0];this._inputPolys=u,this._inputPolys===null&&(this._inputPolys=new Xe)},vs={STRTREE_NODE_CAPACITY:{configurable:!0}};ti.prototype.reduceToGeometries=function(u){for(var d=new Xe,b=u.iterator();b.hasNext();){var v=b.next(),S=null;q(v,Zt)?S=this.unionTree(v):v instanceof qe&&(S=v),d.add(S)}return d},ti.prototype.extractByEnvelope=function(u,d,b){for(var v=new Xe,S=0;S<d.getNumGeometries();S++){var F=d.getGeometryN(S);F.getEnvelopeInternal().intersects(u)?v.add(F):b.add(F)}return this._geomFactory.buildGeometry(v)},ti.prototype.unionOptimized=function(u,d){var b=u.getEnvelopeInternal(),v=d.getEnvelopeInternal();if(!b.intersects(v))return Qi.combine(u,d);if(u.getNumGeometries()<=1&&d.getNumGeometries()<=1)return this.unionActual(u,d);var S=b.intersection(v);return this.unionUsingEnvelopeIntersection(u,d,S)},ti.prototype.union=function(){if(this._inputPolys===null)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var u=new ja(ti.STRTREE_NODE_CAPACITY),d=this._inputPolys.iterator();d.hasNext();){var b=d.next();u.insert(b.getEnvelopeInternal(),b)}this._inputPolys=null;var v=u.itemsTree();return this.unionTree(v)},ti.prototype.binaryUnion=function(){if(arguments.length===1){var u=arguments[0];return this.binaryUnion(u,0,u.size())}if(arguments.length===3){var d=arguments[0],b=arguments[1],v=arguments[2];if(v-b<=1){var S=ti.getGeometry(d,b);return this.unionSafe(S,null)}if(v-b==2)return this.unionSafe(ti.getGeometry(d,b),ti.getGeometry(d,b+1));var F=Math.trunc((v+b)/2),G=this.binaryUnion(d,b,F),K=this.binaryUnion(d,F,v);return this.unionSafe(G,K)}},ti.prototype.repeatedUnion=function(u){for(var d=null,b=u.iterator();b.hasNext();){var v=b.next();d=d===null?v.copy():d.union(v)}return d},ti.prototype.unionSafe=function(u,d){return u===null&&d===null?null:u===null?d.copy():d===null?u.copy():this.unionOptimized(u,d)},ti.prototype.unionActual=function(u,d){return ti.restrictToPolygons(u.union(d))},ti.prototype.unionTree=function(u){var d=this.reduceToGeometries(u);return this.binaryUnion(d)},ti.prototype.unionUsingEnvelopeIntersection=function(u,d,b){var v=new Xe,S=this.extractByEnvelope(b,u,v),F=this.extractByEnvelope(b,d,v),G=this.unionActual(S,F);return v.add(G),Qi.combine(v)},ti.prototype.bufferUnion=function(){if(arguments.length===1){var u=arguments[0];return u.get(0).getFactory().buildGeometry(u).buffer(0)}if(arguments.length===2){var d=arguments[0],b=arguments[1];return d.getFactory().createGeometryCollection([d,b]).buffer(0)}},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ti.restrictToPolygons=function(u){if(q(u,a0))return u;var d=k0.getPolygons(u);return d.size()===1?d.get(0):u.getFactory().createMultiPolygon(et.toPolygonArray(d))},ti.getGeometry=function(u,d){return d>=u.size()?null:u.get(d)},ti.union=function(u){return new ti(u).union()},vs.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(ti,vs);var za=function(){};za.prototype.interfaces_=function(){return[]},za.prototype.getClass=function(){return za},za.union=function(u,d){if(u.isEmpty()||d.isEmpty()){if(u.isEmpty()&&d.isEmpty())return Tt.createEmptyResult(Tt.UNION,u,d,u.getFactory());if(u.isEmpty())return d.copy();if(d.isEmpty())return u.copy()}return u.checkNotGeometryCollection(u),u.checkNotGeometryCollection(d),Ai.overlayOp(u,d,Tt.UNION)},t.GeoJSONReader=gt,t.GeoJSONWriter=wt,t.OverlayOp=Tt,t.UnionOp=za,t.BufferOp=ui,Object.defineProperty(t,"__esModule",{value:!0})})}(jsts_min,jsts_min.exports)),jsts_min.exports}function adder(){return new Adder}function Adder(){this.reset()}Adder.prototype={constructor:Adder,reset:function(){this.s=this.t=0},add:function(r){add(temp,r,this.t),add(this,temp.s,this.s),this.s?this.t+=temp.t:this.s=temp.t},valueOf:function(){return this.s}};var temp=new Adder;function add(r,e,t){var i=r.s=e+t,s=i-e,n=i-s;r.t=e-n+(t-s)}var epsilon=1e-6,epsilon2=1e-12,pi=Math.PI,halfPi=pi/2,quarterPi=pi/4,tau=pi*2,degrees=180/pi,radians=pi/180,abs=Math.abs,atan=Math.atan,atan2=Math.atan2,cos=Math.cos,ceil=Math.ceil,exp=Math.exp,log=Math.log,pow=Math.pow,sin=Math.sin,sign=Math.sign||function(r){return r>0?1:r<0?-1:0},sqrt=Math.sqrt,tan=Math.tan;function acos(r){return r>1?0:r<-1?pi:Math.acos(r)}function asin(r){return r>1?halfPi:r<-1?-halfPi:Math.asin(r)}function haversin(r){return(r=sin(r/2))*r}function noop(){}function streamGeometry(r,e){r&&streamGeometryType.hasOwnProperty(r.type)&&streamGeometryType[r.type](r,e)}var streamObjectType={Feature:function(r,e){streamGeometry(r.geometry,e)},FeatureCollection:function(r,e){for(var t=r.features,i=-1,s=t.length;++i<s;)streamGeometry(t[i].geometry,e)}},streamGeometryType={Sphere:function(r,e){e.sphere()},Point:function(r,e){r=r.coordinates,e.point(r[0],r[1],r[2])},MultiPoint:function(r,e){for(var t=r.coordinates,i=-1,s=t.length;++i<s;)r=t[i],e.point(r[0],r[1],r[2])},LineString:function(r,e){streamLine(r.coordinates,e,0)},MultiLineString:function(r,e){for(var t=r.coordinates,i=-1,s=t.length;++i<s;)streamLine(t[i],e,0)},Polygon:function(r,e){streamPolygon(r.coordinates,e)},MultiPolygon:function(r,e){for(var t=r.coordinates,i=-1,s=t.length;++i<s;)streamPolygon(t[i],e)},GeometryCollection:function(r,e){for(var t=r.geometries,i=-1,s=t.length;++i<s;)streamGeometry(t[i],e)}};function streamLine(r,e,t){var i=-1,s=r.length-t,n;for(e.lineStart();++i<s;)n=r[i],e.point(n[0],n[1],n[2]);e.lineEnd()}function streamPolygon(r,e){var t=-1,i=r.length;for(e.polygonStart();++t<i;)streamLine(r[t],e,1);e.polygonEnd()}function geoStream(r,e){r&&streamObjectType.hasOwnProperty(r.type)?streamObjectType[r.type](r,e):streamGeometry(r,e)}var areaRingSum$1=adder(),areaSum$1=adder(),lambda00$2,phi00$2,lambda0$2,cosPhi0$1,sinPhi0$1,areaStream$1={point:noop,lineStart:noop,lineEnd:noop,polygonStart:function(){areaRingSum$1.reset(),areaStream$1.lineStart=areaRingStart$1,areaStream$1.lineEnd=areaRingEnd$1},polygonEnd:function(){var r=+areaRingSum$1;areaSum$1.add(r<0?tau+r:r),this.lineStart=this.lineEnd=this.point=noop},sphere:function(){areaSum$1.add(tau)}};function areaRingStart$1(){areaStream$1.point=areaPointFirst$1}function areaRingEnd$1(){areaPoint$1(lambda00$2,phi00$2)}function areaPointFirst$1(r,e){areaStream$1.point=areaPoint$1,lambda00$2=r,phi00$2=e,r*=radians,e*=radians,lambda0$2=r,cosPhi0$1=cos(e=e/2+quarterPi),sinPhi0$1=sin(e)}function areaPoint$1(r,e){r*=radians,e*=radians,e=e/2+quarterPi;var t=r-lambda0$2,i=t>=0?1:-1,s=i*t,n=cos(e),o=sin(e),c=sinPhi0$1*o,_=cosPhi0$1*n+c*cos(s),l=c*i*sin(s);areaRingSum$1.add(atan2(l,_)),lambda0$2=r,cosPhi0$1=n,sinPhi0$1=o}function area(r){return areaSum$1.reset(),geoStream(r,areaStream$1),areaSum$1*2}function spherical(r){return[atan2(r[1],r[0]),asin(r[2])]}function cartesian(r){var e=r[0],t=r[1],i=cos(t);return[i*cos(e),i*sin(e),sin(t)]}function cartesianDot(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}function cartesianCross(r,e){return[r[1]*e[2]-r[2]*e[1],r[2]*e[0]-r[0]*e[2],r[0]*e[1]-r[1]*e[0]]}function cartesianAddInPlace(r,e){r[0]+=e[0],r[1]+=e[1],r[2]+=e[2]}function cartesianScale(r,e){return[r[0]*e,r[1]*e,r[2]*e]}function cartesianNormalizeInPlace(r){var e=sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);r[0]/=e,r[1]/=e,r[2]/=e}var lambda0$1,phi0,lambda1,phi1,lambda2,lambda00$1,phi00$1,p0,deltaSum=adder(),ranges,range$1,boundsStream$1={point:boundsPoint$1,lineStart:boundsLineStart,lineEnd:boundsLineEnd,polygonStart:function(){boundsStream$1.point=boundsRingPoint,boundsStream$1.lineStart=boundsRingStart,boundsStream$1.lineEnd=boundsRingEnd,deltaSum.reset(),areaStream$1.polygonStart()},polygonEnd:function(){areaStream$1.polygonEnd(),boundsStream$1.point=boundsPoint$1,boundsStream$1.lineStart=boundsLineStart,boundsStream$1.lineEnd=boundsLineEnd,areaRingSum$1<0?(lambda0$1=-(lambda1=180),phi0=-(phi1=90)):deltaSum>epsilon?phi1=90:deltaSum<-epsilon&&(phi0=-90),range$1[0]=lambda0$1,range$1[1]=lambda1}};function boundsPoint$1(r,e){ranges.push(range$1=[lambda0$1=r,lambda1=r]),e<phi0&&(phi0=e),e>phi1&&(phi1=e)}function linePoint(r,e){var t=cartesian([r*radians,e*radians]);if(p0){var i=cartesianCross(p0,t),s=[i[1],-i[0],0],n=cartesianCross(s,i);cartesianNormalizeInPlace(n),n=spherical(n);var o=r-lambda2,c=o>0?1:-1,_=n[0]*degrees*c,l,h=abs(o)>180;h^(c*lambda2<_&&_<c*r)?(l=n[1]*degrees,l>phi1&&(phi1=l)):(_=(_+360)%360-180,h^(c*lambda2<_&&_<c*r)?(l=-n[1]*degrees,l<phi0&&(phi0=l)):(e<phi0&&(phi0=e),e>phi1&&(phi1=e))),h?r<lambda2?angle(lambda0$1,r)>angle(lambda0$1,lambda1)&&(lambda1=r):angle(r,lambda1)>angle(lambda0$1,lambda1)&&(lambda0$1=r):lambda1>=lambda0$1?(r<lambda0$1&&(lambda0$1=r),r>lambda1&&(lambda1=r)):r>lambda2?angle(lambda0$1,r)>angle(lambda0$1,lambda1)&&(lambda1=r):angle(r,lambda1)>angle(lambda0$1,lambda1)&&(lambda0$1=r)}else ranges.push(range$1=[lambda0$1=r,lambda1=r]);e<phi0&&(phi0=e),e>phi1&&(phi1=e),p0=t,lambda2=r}function boundsLineStart(){boundsStream$1.point=linePoint}function boundsLineEnd(){range$1[0]=lambda0$1,range$1[1]=lambda1,boundsStream$1.point=boundsPoint$1,p0=null}function boundsRingPoint(r,e){if(p0){var t=r-lambda2;deltaSum.add(abs(t)>180?t+(t>0?360:-360):t)}else lambda00$1=r,phi00$1=e;areaStream$1.point(r,e),linePoint(r,e)}function boundsRingStart(){areaStream$1.lineStart()}function boundsRingEnd(){boundsRingPoint(lambda00$1,phi00$1),areaStream$1.lineEnd(),abs(deltaSum)>epsilon&&(lambda0$1=-(lambda1=180)),range$1[0]=lambda0$1,range$1[1]=lambda1,p0=null}function angle(r,e){return(e-=r)<0?e+360:e}function rangeCompare(r,e){return r[0]-e[0]}function rangeContains(r,e){return r[0]<=r[1]?r[0]<=e&&e<=r[1]:e<r[0]||r[1]<e}function bounds(r){var e,t,i,s,n,o,c;if(phi1=lambda1=-(lambda0$1=phi0=1/0),ranges=[],geoStream(r,boundsStream$1),t=ranges.length){for(ranges.sort(rangeCompare),e=1,i=ranges[0],n=[i];e<t;++e)s=ranges[e],rangeContains(i,s[0])||rangeContains(i,s[1])?(angle(i[0],s[1])>angle(i[0],i[1])&&(i[1]=s[1]),angle(s[0],i[1])>angle(i[0],i[1])&&(i[0]=s[0])):n.push(i=s);for(o=-1/0,t=n.length-1,e=0,i=n[t];e<=t;i=s,++e)s=n[e],(c=angle(i[1],s[0]))>o&&(o=c,lambda0$1=s[0],lambda1=i[1])}return ranges=range$1=null,lambda0$1===1/0||phi0===1/0?[[NaN,NaN],[NaN,NaN]]:[[lambda0$1,phi0],[lambda1,phi1]]}var W0,W1,X0$1,Y0$1,Z0$1,X1$1,Y1$1,Z1$1,X2$1,Y2$1,Z2$1,lambda00,phi00,x0$4,y0$4,z0,centroidStream$1={sphere:noop,point:centroidPoint$1,lineStart:centroidLineStart$1,lineEnd:centroidLineEnd$1,polygonStart:function(){centroidStream$1.lineStart=centroidRingStart$1,centroidStream$1.lineEnd=centroidRingEnd$1},polygonEnd:function(){centroidStream$1.lineStart=centroidLineStart$1,centroidStream$1.lineEnd=centroidLineEnd$1}};function centroidPoint$1(r,e){r*=radians,e*=radians;var t=cos(e);centroidPointCartesian(t*cos(r),t*sin(r),sin(e))}function centroidPointCartesian(r,e,t){++W0,X0$1+=(r-X0$1)/W0,Y0$1+=(e-Y0$1)/W0,Z0$1+=(t-Z0$1)/W0}function centroidLineStart$1(){centroidStream$1.point=centroidLinePointFirst}function centroidLinePointFirst(r,e){r*=radians,e*=radians;var t=cos(e);x0$4=t*cos(r),y0$4=t*sin(r),z0=sin(e),centroidStream$1.point=centroidLinePoint,centroidPointCartesian(x0$4,y0$4,z0)}function centroidLinePoint(r,e){r*=radians,e*=radians;var t=cos(e),i=t*cos(r),s=t*sin(r),n=sin(e),o=atan2(sqrt((o=y0$4*n-z0*s)*o+(o=z0*i-x0$4*n)*o+(o=x0$4*s-y0$4*i)*o),x0$4*i+y0$4*s+z0*n);W1+=o,X1$1+=o*(x0$4+(x0$4=i)),Y1$1+=o*(y0$4+(y0$4=s)),Z1$1+=o*(z0+(z0=n)),centroidPointCartesian(x0$4,y0$4,z0)}function centroidLineEnd$1(){centroidStream$1.point=centroidPoint$1}function centroidRingStart$1(){centroidStream$1.point=centroidRingPointFirst}function centroidRingEnd$1(){centroidRingPoint(lambda00,phi00),centroidStream$1.point=centroidPoint$1}function centroidRingPointFirst(r,e){lambda00=r,phi00=e,r*=radians,e*=radians,centroidStream$1.point=centroidRingPoint;var t=cos(e);x0$4=t*cos(r),y0$4=t*sin(r),z0=sin(e),centroidPointCartesian(x0$4,y0$4,z0)}function centroidRingPoint(r,e){r*=radians,e*=radians;var t=cos(e),i=t*cos(r),s=t*sin(r),n=sin(e),o=y0$4*n-z0*s,c=z0*i-x0$4*n,_=x0$4*s-y0$4*i,l=sqrt(o*o+c*c+_*_),h=asin(l),f=l&&-h/l;X2$1+=f*o,Y2$1+=f*c,Z2$1+=f*_,W1+=h,X1$1+=h*(x0$4+(x0$4=i)),Y1$1+=h*(y0$4+(y0$4=s)),Z1$1+=h*(z0+(z0=n)),centroidPointCartesian(x0$4,y0$4,z0)}function centroid(r){W0=W1=X0$1=Y0$1=Z0$1=X1$1=Y1$1=Z1$1=X2$1=Y2$1=Z2$1=0,geoStream(r,centroidStream$1);var e=X2$1,t=Y2$1,i=Z2$1,s=e*e+t*t+i*i;return s<epsilon2&&(e=X1$1,t=Y1$1,i=Z1$1,W1<epsilon&&(e=X0$1,t=Y0$1,i=Z0$1),s=e*e+t*t+i*i,s<epsilon2)?[NaN,NaN]:[atan2(t,e)*degrees,asin(i/sqrt(s))*degrees]}function constant(r){return function(){return r}}function compose(r,e){function t(i,s){return i=r(i,s),e(i[0],i[1])}return r.invert&&e.invert&&(t.invert=function(i,s){return i=e.invert(i,s),i&&r.invert(i[0],i[1])}),t}function rotationIdentity(r,e){return[r>pi?r-tau:r<-pi?r+tau:r,e]}rotationIdentity.invert=rotationIdentity;function rotateRadians(r,e,t){return(r%=tau)?e||t?compose(rotationLambda(r),rotationPhiGamma(e,t)):rotationLambda(r):e||t?rotationPhiGamma(e,t):rotationIdentity}function forwardRotationLambda(r){return function(e,t){return e+=r,[e>pi?e-tau:e<-pi?e+tau:e,t]}}function rotationLambda(r){var e=forwardRotationLambda(r);return e.invert=forwardRotationLambda(-r),e}function rotationPhiGamma(r,e){var t=cos(r),i=sin(r),s=cos(e),n=sin(e);function o(c,_){var l=cos(_),h=cos(c)*l,f=sin(c)*l,m=sin(_),g=m*t+h*i;return[atan2(f*s-g*n,h*t-m*i),asin(g*s+f*n)]}return o.invert=function(c,_){var l=cos(_),h=cos(c)*l,f=sin(c)*l,m=sin(_),g=m*s-f*n;return[atan2(f*s+m*n,h*t+g*i),asin(g*t-h*i)]},o}function rotation(r){r=rotateRadians(r[0]*radians,r[1]*radians,r.length>2?r[2]*radians:0);function e(t){return t=r(t[0]*radians,t[1]*radians),t[0]*=degrees,t[1]*=degrees,t}return e.invert=function(t){return t=r.invert(t[0]*radians,t[1]*radians),t[0]*=degrees,t[1]*=degrees,t},e}function circleStream(r,e,t,i,s,n){if(t){var o=cos(e),c=sin(e),_=i*t;s==null?(s=e+i*tau,n=e-_/2):(s=circleRadius(o,s),n=circleRadius(o,n),(i>0?s<n:s>n)&&(s+=i*tau));for(var l,h=s;i>0?h>n:h<n;h-=_)l=spherical([o,-c*cos(h),-c*sin(h)]),r.point(l[0],l[1])}}function circleRadius(r,e){e=cartesian(e),e[0]-=r,cartesianNormalizeInPlace(e);var t=acos(-e[1]);return((-e[2]<0?-t:t)+tau-epsilon)%tau}function circle$1(){var r=constant([0,0]),e=constant(90),t=constant(6),i,s,n={point:o};function o(_,l){i.push(_=s(_,l)),_[0]*=degrees,_[1]*=degrees}function c(){var _=r.apply(this,arguments),l=e.apply(this,arguments)*radians,h=t.apply(this,arguments)*radians;return i=[],s=rotateRadians(-_[0]*radians,-_[1]*radians,0).invert,circleStream(n,l,h,1),_={type:"Polygon",coordinates:[i]},i=s=null,_}return c.center=function(_){return arguments.length?(r=typeof _=="function"?_:constant([+_[0],+_[1]]),c):r},c.radius=function(_){return arguments.length?(e=typeof _=="function"?_:constant(+_),c):e},c.precision=function(_){return arguments.length?(t=typeof _=="function"?_:constant(+_),c):t},c}function clipBuffer(){var r=[],e;return{point:function(t,i){e.push([t,i])},lineStart:function(){r.push(e=[])},lineEnd:noop,rejoin:function(){r.length>1&&r.push(r.pop().concat(r.shift()))},result:function(){var t=r;return r=[],e=null,t}}}function clipLine(r,e,t,i,s,n){var o=r[0],c=r[1],_=e[0],l=e[1],h=0,f=1,m=_-o,g=l-c,C;if(C=t-o,!(!m&&C>0)){if(C/=m,m<0){if(C<h)return;C<f&&(f=C)}else if(m>0){if(C>f)return;C>h&&(h=C)}if(C=s-o,!(!m&&C<0)){if(C/=m,m<0){if(C>f)return;C>h&&(h=C)}else if(m>0){if(C<h)return;C<f&&(f=C)}if(C=i-c,!(!g&&C>0)){if(C/=g,g<0){if(C<h)return;C<f&&(f=C)}else if(g>0){if(C>f)return;C>h&&(h=C)}if(C=n-c,!(!g&&C<0)){if(C/=g,g<0){if(C>f)return;C>h&&(h=C)}else if(g>0){if(C<h)return;C<f&&(f=C)}return h>0&&(r[0]=o+h*m,r[1]=c+h*g),f<1&&(e[0]=o+f*m,e[1]=c+f*g),!0}}}}}function pointEqual(r,e){return abs(r[0]-e[0])<epsilon&&abs(r[1]-e[1])<epsilon}function Intersection(r,e,t,i){this.x=r,this.z=e,this.o=t,this.e=i,this.v=!1,this.n=this.p=null}function clipPolygon(r,e,t,i,s){var n=[],o=[],c,_;if(r.forEach(function(C){if(!((E=C.length-1)<=0)){var E,P=C[0],w=C[E],M;if(pointEqual(P,w)){for(s.lineStart(),c=0;c<E;++c)s.point((P=C[c])[0],P[1]);s.lineEnd();return}n.push(M=new Intersection(P,C,null,!0)),o.push(M.o=new Intersection(P,null,M,!1)),n.push(M=new Intersection(w,C,null,!1)),o.push(M.o=new Intersection(w,null,M,!0))}}),!!n.length){for(o.sort(e),link(n),link(o),c=0,_=o.length;c<_;++c)o[c].e=t=!t;for(var l=n[0],h,f;;){for(var m=l,g=!0;m.v;)if((m=m.n)===l)return;h=m.z,s.lineStart();do{if(m.v=m.o.v=!0,m.e){if(g)for(c=0,_=h.length;c<_;++c)s.point((f=h[c])[0],f[1]);else i(m.x,m.n.x,1,s);m=m.n}else{if(g)for(h=m.p.z,c=h.length-1;c>=0;--c)s.point((f=h[c])[0],f[1]);else i(m.x,m.p.x,-1,s);m=m.p}m=m.o,h=m.z,g=!g}while(!m.v);s.lineEnd()}}}function link(r){if(e=r.length){for(var e,t=0,i=r[0],s;++t<e;)i.n=s=r[t],s.p=i,i=s;i.n=s=r[0],s.p=i}}function ascending(r,e){return r<e?-1:r>e?1:r>=e?0:NaN}function bisector(r){return r.length===1&&(r=ascendingComparator(r)),{left:function(e,t,i,s){for(i==null&&(i=0),s==null&&(s=e.length);i<s;){var n=i+s>>>1;r(e[n],t)<0?i=n+1:s=n}return i},right:function(e,t,i,s){for(i==null&&(i=0),s==null&&(s=e.length);i<s;){var n=i+s>>>1;r(e[n],t)>0?s=n:i=n+1}return i}}}function ascendingComparator(r){return function(e,t){return ascending(r(e),t)}}bisector(ascending);function range(r,e,t){r=+r,e=+e,t=(s=arguments.length)<2?(e=r,r=0,1):s<3?1:+t;for(var i=-1,s=Math.max(0,Math.ceil((e-r)/t))|0,n=new Array(s);++i<s;)n[i]=r+i*t;return n}function merge(r){for(var e=r.length,t,i=-1,s=0,n,o;++i<e;)s+=r[i].length;for(n=new Array(s);--e>=0;)for(o=r[e],t=o.length;--t>=0;)n[--s]=o[t];return n}var clipMax=1e9,clipMin=-clipMax;function clipExtent(r,e,t,i){function s(l,h){return r<=l&&l<=t&&e<=h&&h<=i}function n(l,h,f,m){var g=0,C=0;if(l==null||(g=o(l,f))!==(C=o(h,f))||_(l,h)<0^f>0)do m.point(g===0||g===3?r:t,g>1?i:e);while((g=(g+f+4)%4)!==C);else m.point(h[0],h[1])}function o(l,h){return abs(l[0]-r)<epsilon?h>0?0:3:abs(l[0]-t)<epsilon?h>0?2:1:abs(l[1]-e)<epsilon?h>0?1:0:h>0?3:2}function c(l,h){return _(l.x,h.x)}function _(l,h){var f=o(l,1),m=o(h,1);return f!==m?f-m:f===0?h[1]-l[1]:f===1?l[0]-h[0]:f===2?l[1]-h[1]:h[0]-l[0]}return function(l){var h=l,f=clipBuffer(),m,g,C,E,P,w,M,T,L,R,D,N={point:k,lineStart:W,lineEnd:J,polygonStart:$,polygonEnd:H};function k(fe,q){s(fe,q)&&h.point(fe,q)}function B(){for(var fe=0,q=0,te=g.length;q<te;++q)for(var ie=g[q],xe=1,oe=ie.length,de=ie[0],X,he,Se=de[0],Te=de[1];xe<oe;++xe)X=Se,he=Te,de=ie[xe],Se=de[0],Te=de[1],he<=i?Te>i&&(Se-X)*(i-he)>(Te-he)*(r-X)&&++fe:Te<=i&&(Se-X)*(i-he)<(Te-he)*(r-X)&&--fe;return fe}function $(){h=f,m=[],g=[],D=!0}function H(){var fe=B(),q=D&&fe,te=(m=merge(m)).length;(q||te)&&(l.polygonStart(),q&&(l.lineStart(),n(null,null,1,l),l.lineEnd()),te&&clipPolygon(m,c,fe,n,l),l.polygonEnd()),h=l,m=g=C=null}function W(){N.point=z,g&&g.push(C=[]),R=!0,L=!1,M=T=NaN}function J(){m&&(z(E,P),w&&L&&f.rejoin(),m.push(f.result())),N.point=k,L&&h.lineEnd()}function z(fe,q){var te=s(fe,q);if(g&&C.push([fe,q]),R)E=fe,P=q,w=te,R=!1,te&&(h.lineStart(),h.point(fe,q));else if(te&&L)h.point(fe,q);else{var ie=[M=Math.max(clipMin,Math.min(clipMax,M)),T=Math.max(clipMin,Math.min(clipMax,T))],xe=[fe=Math.max(clipMin,Math.min(clipMax,fe)),q=Math.max(clipMin,Math.min(clipMax,q))];clipLine(ie,xe,r,e,t,i)?(L||(h.lineStart(),h.point(ie[0],ie[1])),h.point(xe[0],xe[1]),te||h.lineEnd(),D=!1):te&&(h.lineStart(),h.point(fe,q),D=!1)}M=fe,T=q,L=te}return N}}function extent(){var r=0,e=0,t=960,i=500,s,n,o;return o={stream:function(c){return s&&n===c?s:s=clipExtent(r,e,t,i)(n=c)},extent:function(c){return arguments.length?(r=+c[0][0],e=+c[0][1],t=+c[1][0],i=+c[1][1],s=n=null,o):[[r,e],[t,i]]}}}var sum=adder();function polygonContains(r,e){var t=e[0],i=e[1],s=[sin(t),-cos(t),0],n=0,o=0;sum.reset();for(var c=0,_=r.length;c<_;++c)if(h=(l=r[c]).length)for(var l,h,f=l[h-1],m=f[0],g=f[1]/2+quarterPi,C=sin(g),E=cos(g),P=0;P<h;++P,m=M,C=L,E=R,f=w){var w=l[P],M=w[0],T=w[1]/2+quarterPi,L=sin(T),R=cos(T),D=M-m,N=D>=0?1:-1,k=N*D,B=k>pi,$=C*L;if(sum.add(atan2($*N*sin(k),E*R+$*cos(k))),n+=B?D+N*tau:D,B^m>=t^M>=t){var H=cartesianCross(cartesian(f),cartesian(w));cartesianNormalizeInPlace(H);var W=cartesianCross(s,H);cartesianNormalizeInPlace(W);var J=(B^D>=0?-1:1)*asin(W[2]);(i>J||i===J&&(H[0]||H[1]))&&(o+=B^D>=0?1:-1)}}return(n<-epsilon||n<epsilon&&sum<-epsilon)^o&1}var lengthSum$1=adder(),lambda0,sinPhi0,cosPhi0,lengthStream$1={sphere:noop,point:noop,lineStart:lengthLineStart,lineEnd:noop,polygonStart:noop,polygonEnd:noop};function lengthLineStart(){lengthStream$1.point=lengthPointFirst$1,lengthStream$1.lineEnd=lengthLineEnd}function lengthLineEnd(){lengthStream$1.point=lengthStream$1.lineEnd=noop}function lengthPointFirst$1(r,e){r*=radians,e*=radians,lambda0=r,sinPhi0=sin(e),cosPhi0=cos(e),lengthStream$1.point=lengthPoint$1}function lengthPoint$1(r,e){r*=radians,e*=radians;var t=sin(e),i=cos(e),s=abs(r-lambda0),n=cos(s),o=sin(s),c=i*o,_=cosPhi0*t-sinPhi0*i*n,l=sinPhi0*t+cosPhi0*i*n;lengthSum$1.add(atan2(sqrt(c*c+_*_),l)),lambda0=r,sinPhi0=t,cosPhi0=i}function length(r){return lengthSum$1.reset(),geoStream(r,lengthStream$1),+lengthSum$1}var coordinates=[null,null],object={type:"LineString",coordinates};function distance(r,e){return coordinates[0]=r,coordinates[1]=e,length(object)}var containsObjectType={Feature:function(r,e){return containsGeometry(r.geometry,e)},FeatureCollection:function(r,e){for(var t=r.features,i=-1,s=t.length;++i<s;)if(containsGeometry(t[i].geometry,e))return!0;return!1}},containsGeometryType={Sphere:function(){return!0},Point:function(r,e){return containsPoint(r.coordinates,e)},MultiPoint:function(r,e){for(var t=r.coordinates,i=-1,s=t.length;++i<s;)if(containsPoint(t[i],e))return!0;return!1},LineString:function(r,e){return containsLine(r.coordinates,e)},MultiLineString:function(r,e){for(var t=r.coordinates,i=-1,s=t.length;++i<s;)if(containsLine(t[i],e))return!0;return!1},Polygon:function(r,e){return containsPolygon(r.coordinates,e)},MultiPolygon:function(r,e){for(var t=r.coordinates,i=-1,s=t.length;++i<s;)if(containsPolygon(t[i],e))return!0;return!1},GeometryCollection:function(r,e){for(var t=r.geometries,i=-1,s=t.length;++i<s;)if(containsGeometry(t[i],e))return!0;return!1}};function containsGeometry(r,e){return r&&containsGeometryType.hasOwnProperty(r.type)?containsGeometryType[r.type](r,e):!1}function containsPoint(r,e){return distance(r,e)===0}function containsLine(r,e){var t=distance(r[0],r[1]),i=distance(r[0],e),s=distance(e,r[1]);return i+s<=t+epsilon}function containsPolygon(r,e){return!!polygonContains(r.map(ringRadians),pointRadians(e))}function ringRadians(r){return r=r.map(pointRadians),r.pop(),r}function pointRadians(r){return[r[0]*radians,r[1]*radians]}function contains(r,e){return(r&&containsObjectType.hasOwnProperty(r.type)?containsObjectType[r.type]:containsGeometry)(r,e)}function graticuleX(r,e,t){var i=range(r,e-epsilon,t).concat(e);return function(s){return i.map(function(n){return[s,n]})}}function graticuleY(r,e,t){var i=range(r,e-epsilon,t).concat(e);return function(s){return i.map(function(n){return[n,s]})}}function graticule(){var r,e,t,i,s,n,o,c,_=10,l=_,h=90,f=360,m,g,C,E,P=2.5;function w(){return{type:"MultiLineString",coordinates:M()}}function M(){return range(ceil(i/h)*h,t,h).map(C).concat(range(ceil(c/f)*f,o,f).map(E)).concat(range(ceil(e/_)*_,r,_).filter(function(T){return abs(T%h)>epsilon}).map(m)).concat(range(ceil(n/l)*l,s,l).filter(function(T){return abs(T%f)>epsilon}).map(g))}return w.lines=function(){return M().map(function(T){return{type:"LineString",coordinates:T}})},w.outline=function(){return{type:"Polygon",coordinates:[C(i).concat(E(o).slice(1),C(t).reverse().slice(1),E(c).reverse().slice(1))]}},w.extent=function(T){return arguments.length?w.extentMajor(T).extentMinor(T):w.extentMinor()},w.extentMajor=function(T){return arguments.length?(i=+T[0][0],t=+T[1][0],c=+T[0][1],o=+T[1][1],i>t&&(T=i,i=t,t=T),c>o&&(T=c,c=o,o=T),w.precision(P)):[[i,c],[t,o]]},w.extentMinor=function(T){return arguments.length?(e=+T[0][0],r=+T[1][0],n=+T[0][1],s=+T[1][1],e>r&&(T=e,e=r,r=T),n>s&&(T=n,n=s,s=T),w.precision(P)):[[e,n],[r,s]]},w.step=function(T){return arguments.length?w.stepMajor(T).stepMinor(T):w.stepMinor()},w.stepMajor=function(T){return arguments.length?(h=+T[0],f=+T[1],w):[h,f]},w.stepMinor=function(T){return arguments.length?(_=+T[0],l=+T[1],w):[_,l]},w.precision=function(T){return arguments.length?(P=+T,m=graticuleX(n,s,90),g=graticuleY(e,r,P),C=graticuleX(c,o,90),E=graticuleY(i,t,P),w):P},w.extentMajor([[-180,-90+epsilon],[180,90-epsilon]]).extentMinor([[-180,-80-epsilon],[180,80+epsilon]])}function graticule10(){return graticule()()}function interpolate(r,e){var t=r[0]*radians,i=r[1]*radians,s=e[0]*radians,n=e[1]*radians,o=cos(i),c=sin(i),_=cos(n),l=sin(n),h=o*cos(t),f=o*sin(t),m=_*cos(s),g=_*sin(s),C=2*asin(sqrt(haversin(n-i)+o*_*haversin(s-t))),E=sin(C),P=C?function(w){var M=sin(w*=C)/E,T=sin(C-w)/E,L=T*h+M*m,R=T*f+M*g,D=T*c+M*l;return[atan2(R,L)*degrees,atan2(D,sqrt(L*L+R*R))*degrees]}:function(){return[t*degrees,i*degrees]};return P.distance=C,P}function identity$1(r){return r}var areaSum=adder(),areaRingSum=adder(),x00$2,y00$2,x0$3,y0$3,areaStream={point:noop,lineStart:noop,lineEnd:noop,polygonStart:function(){areaStream.lineStart=areaRingStart,areaStream.lineEnd=areaRingEnd},polygonEnd:function(){areaStream.lineStart=areaStream.lineEnd=areaStream.point=noop,areaSum.add(abs(areaRingSum)),areaRingSum.reset()},result:function(){var r=areaSum/2;return areaSum.reset(),r}};function areaRingStart(){areaStream.point=areaPointFirst}function areaPointFirst(r,e){areaStream.point=areaPoint,x00$2=x0$3=r,y00$2=y0$3=e}function areaPoint(r,e){areaRingSum.add(y0$3*r-x0$3*e),x0$3=r,y0$3=e}function areaRingEnd(){areaPoint(x00$2,y00$2)}var x0$2=1/0,y0$2=x0$2,x1=-x0$2,y1=x1,boundsStream={point:boundsPoint,lineStart:noop,lineEnd:noop,polygonStart:noop,polygonEnd:noop,result:function(){var r=[[x0$2,y0$2],[x1,y1]];return x1=y1=-(y0$2=x0$2=1/0),r}};function boundsPoint(r,e){r<x0$2&&(x0$2=r),r>x1&&(x1=r),e<y0$2&&(y0$2=e),e>y1&&(y1=e)}var X0=0,Y0=0,Z0=0,X1=0,Y1=0,Z1=0,X2=0,Y2=0,Z2=0,x00$1,y00$1,x0$1,y0$1,centroidStream={point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){centroidStream.lineStart=centroidRingStart,centroidStream.lineEnd=centroidRingEnd},polygonEnd:function(){centroidStream.point=centroidPoint,centroidStream.lineStart=centroidLineStart,centroidStream.lineEnd=centroidLineEnd},result:function(){var r=Z2?[X2/Z2,Y2/Z2]:Z1?[X1/Z1,Y1/Z1]:Z0?[X0/Z0,Y0/Z0]:[NaN,NaN];return X0=Y0=Z0=X1=Y1=Z1=X2=Y2=Z2=0,r}};function centroidPoint(r,e){X0+=r,Y0+=e,++Z0}function centroidLineStart(){centroidStream.point=centroidPointFirstLine}function centroidPointFirstLine(r,e){centroidStream.point=centroidPointLine,centroidPoint(x0$1=r,y0$1=e)}function centroidPointLine(r,e){var t=r-x0$1,i=e-y0$1,s=sqrt(t*t+i*i);X1+=s*(x0$1+r)/2,Y1+=s*(y0$1+e)/2,Z1+=s,centroidPoint(x0$1=r,y0$1=e)}function centroidLineEnd(){centroidStream.point=centroidPoint}function centroidRingStart(){centroidStream.point=centroidPointFirstRing}function centroidRingEnd(){centroidPointRing(x00$1,y00$1)}function centroidPointFirstRing(r,e){centroidStream.point=centroidPointRing,centroidPoint(x00$1=x0$1=r,y00$1=y0$1=e)}function centroidPointRing(r,e){var t=r-x0$1,i=e-y0$1,s=sqrt(t*t+i*i);X1+=s*(x0$1+r)/2,Y1+=s*(y0$1+e)/2,Z1+=s,s=y0$1*r-x0$1*e,X2+=s*(x0$1+r),Y2+=s*(y0$1+e),Z2+=s*3,centroidPoint(x0$1=r,y0$1=e)}function PathContext(r){this._context=r}PathContext.prototype={_radius:4.5,pointRadius:function(r){return this._radius=r,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(r,e){switch(this._point){case 0:{this._context.moveTo(r,e),this._point=1;break}case 1:{this._context.lineTo(r,e);break}default:{this._context.moveTo(r+this._radius,e),this._context.arc(r,e,this._radius,0,tau);break}}},result:noop};var lengthSum=adder(),lengthRing,x00,y00,x0,y0,lengthStream={point:noop,lineStart:function(){lengthStream.point=lengthPointFirst},lineEnd:function(){lengthRing&&lengthPoint(x00,y00),lengthStream.point=noop},polygonStart:function(){lengthRing=!0},polygonEnd:function(){lengthRing=null},result:function(){var r=+lengthSum;return lengthSum.reset(),r}};function lengthPointFirst(r,e){lengthStream.point=lengthPoint,x00=x0=r,y00=y0=e}function lengthPoint(r,e){x0-=r,y0-=e,lengthSum.add(sqrt(x0*x0+y0*y0)),x0=r,y0=e}function PathString(){this._string=[]}PathString.prototype={_radius:4.5,_circle:circle(4.5),pointRadius:function(r){return(r=+r)!==this._radius&&(this._radius=r,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(r,e){switch(this._point){case 0:{this._string.push("M",r,",",e),this._point=1;break}case 1:{this._string.push("L",r,",",e);break}default:{this._circle==null&&(this._circle=circle(this._radius)),this._string.push("M",r,",",e,this._circle);break}}},result:function(){if(this._string.length){var r=this._string.join("");return this._string=[],r}else return null}};function circle(r){return"m0,"+r+"a"+r+","+r+" 0 1,1 0,"+-2*r+"a"+r+","+r+" 0 1,1 0,"+2*r+"z"}function index(r,e){var t=4.5,i,s;function n(o){return o&&(typeof t=="function"&&s.pointRadius(+t.apply(this,arguments)),geoStream(o,i(s))),s.result()}return n.area=function(o){return geoStream(o,i(areaStream)),areaStream.result()},n.measure=function(o){return geoStream(o,i(lengthStream)),lengthStream.result()},n.bounds=function(o){return geoStream(o,i(boundsStream)),boundsStream.result()},n.centroid=function(o){return geoStream(o,i(centroidStream)),centroidStream.result()},n.projection=function(o){return arguments.length?(i=o==null?(r=null,identity$1):(r=o).stream,n):r},n.context=function(o){return arguments.length?(s=o==null?(e=null,new PathString):new PathContext(e=o),typeof t!="function"&&s.pointRadius(t),n):e},n.pointRadius=function(o){return arguments.length?(t=typeof o=="function"?o:(s.pointRadius(+o),+o),n):t},n.projection(r).context(e)}function clip(r,e,t,i){return function(s,n){var o=e(n),c=s.invert(i[0],i[1]),_=clipBuffer(),l=e(_),h=!1,f,m,g,C={point:E,lineStart:w,lineEnd:M,polygonStart:function(){C.point=T,C.lineStart=L,C.lineEnd=R,m=[],f=[]},polygonEnd:function(){C.point=E,C.lineStart=w,C.lineEnd=M,m=merge(m);var D=polygonContains(f,c);m.length?(h||(n.polygonStart(),h=!0),clipPolygon(m,compareIntersection,D,t,n)):D&&(h||(n.polygonStart(),h=!0),n.lineStart(),t(null,null,1,n),n.lineEnd()),h&&(n.polygonEnd(),h=!1),m=f=null},sphere:function(){n.polygonStart(),n.lineStart(),t(null,null,1,n),n.lineEnd(),n.polygonEnd()}};function E(D,N){var k=s(D,N);r(D=k[0],N=k[1])&&n.point(D,N)}function P(D,N){var k=s(D,N);o.point(k[0],k[1])}function w(){C.point=P,o.lineStart()}function M(){C.point=E,o.lineEnd()}function T(D,N){g.push([D,N]);var k=s(D,N);l.point(k[0],k[1])}function L(){l.lineStart(),g=[]}function R(){T(g[0][0],g[0][1]),l.lineEnd();var D=l.clean(),N=_.result(),k,B=N.length,$,H,W;if(g.pop(),f.push(g),g=null,!!B){if(D&1){if(H=N[0],($=H.length-1)>0){for(h||(n.polygonStart(),h=!0),n.lineStart(),k=0;k<$;++k)n.point((W=H[k])[0],W[1]);n.lineEnd()}return}B>1&&D&2&&N.push(N.pop().concat(N.shift())),m.push(N.filter(validSegment))}}return C}}function validSegment(r){return r.length>1}function compareIntersection(r,e){return((r=r.x)[0]<0?r[1]-halfPi-epsilon:halfPi-r[1])-((e=e.x)[0]<0?e[1]-halfPi-epsilon:halfPi-e[1])}const clipAntimeridian=clip(function(){return!0},clipAntimeridianLine,clipAntimeridianInterpolate,[-pi,-halfPi]);function clipAntimeridianLine(r){var e=NaN,t=NaN,i=NaN,s;return{lineStart:function(){r.lineStart(),s=1},point:function(n,o){var c=n>0?pi:-pi,_=abs(n-e);abs(_-pi)<epsilon?(r.point(e,t=(t+o)/2>0?halfPi:-halfPi),r.point(i,t),r.lineEnd(),r.lineStart(),r.point(c,t),r.point(n,t),s=0):i!==c&&_>=pi&&(abs(e-i)<epsilon&&(e-=i*epsilon),abs(n-c)<epsilon&&(n-=c*epsilon),t=clipAntimeridianIntersect(e,t,n,o),r.point(i,t),r.lineEnd(),r.lineStart(),r.point(c,t),s=0),r.point(e=n,t=o),i=c},lineEnd:function(){r.lineEnd(),e=t=NaN},clean:function(){return 2-s}}}function clipAntimeridianIntersect(r,e,t,i){var s,n,o=sin(r-t);return abs(o)>epsilon?atan((sin(e)*(n=cos(i))*sin(t)-sin(i)*(s=cos(e))*sin(r))/(s*n*o)):(e+i)/2}function clipAntimeridianInterpolate(r,e,t,i){var s;if(r==null)s=t*halfPi,i.point(-pi,s),i.point(0,s),i.point(pi,s),i.point(pi,0),i.point(pi,-s),i.point(0,-s),i.point(-pi,-s),i.point(-pi,0),i.point(-pi,s);else if(abs(r[0]-e[0])>epsilon){var n=r[0]<e[0]?pi:-pi;s=t*n/2,i.point(-n,s),i.point(0,s),i.point(n,s)}else i.point(e[0],e[1])}function clipCircle(r,e){var t=cos(r),i=t>0,s=abs(t)>epsilon;function n(h,f,m,g){circleStream(g,r,e,m,h,f)}function o(h,f){return cos(h)*cos(f)>t}function c(h){var f,m,g,C,E;return{lineStart:function(){C=g=!1,E=1},point:function(P,w){var M=[P,w],T,L=o(P,w),R=i?L?0:l(P,w):L?l(P+(P<0?pi:-pi),w):0;if(!f&&(C=g=L)&&h.lineStart(),L!==g&&(T=_(f,M),(!T||pointEqual(f,T)||pointEqual(M,T))&&(M[0]+=epsilon,M[1]+=epsilon,L=o(M[0],M[1]))),L!==g)E=0,L?(h.lineStart(),T=_(M,f),h.point(T[0],T[1])):(T=_(f,M),h.point(T[0],T[1]),h.lineEnd()),f=T;else if(s&&f&&i^L){var D;!(R&m)&&(D=_(M,f,!0))&&(E=0,i?(h.lineStart(),h.point(D[0][0],D[0][1]),h.point(D[1][0],D[1][1]),h.lineEnd()):(h.point(D[1][0],D[1][1]),h.lineEnd(),h.lineStart(),h.point(D[0][0],D[0][1])))}L&&(!f||!pointEqual(f,M))&&h.point(M[0],M[1]),f=M,g=L,m=R},lineEnd:function(){g&&h.lineEnd(),f=null},clean:function(){return E|(C&&g)<<1}}}function _(h,f,m){var g=cartesian(h),C=cartesian(f),E=[1,0,0],P=cartesianCross(g,C),w=cartesianDot(P,P),M=P[0],T=w-M*M;if(!T)return!m&&h;var L=t*w/T,R=-t*M/T,D=cartesianCross(E,P),N=cartesianScale(E,L),k=cartesianScale(P,R);cartesianAddInPlace(N,k);var B=D,$=cartesianDot(N,B),H=cartesianDot(B,B),W=$*$-H*(cartesianDot(N,N)-1);if(!(W<0)){var J=sqrt(W),z=cartesianScale(B,(-$-J)/H);if(cartesianAddInPlace(z,N),z=spherical(z),!m)return z;var fe=h[0],q=f[0],te=h[1],ie=f[1],xe;q<fe&&(xe=fe,fe=q,q=xe);var oe=q-fe,de=abs(oe-pi)<epsilon,X=de||oe<epsilon;if(!de&&ie<te&&(xe=te,te=ie,ie=xe),X?de?te+ie>0^z[1]<(abs(z[0]-fe)<epsilon?te:ie):te<=z[1]&&z[1]<=ie:oe>pi^(fe<=z[0]&&z[0]<=q)){var he=cartesianScale(B,(-$+J)/H);return cartesianAddInPlace(he,N),[z,spherical(he)]}}}function l(h,f){var m=i?r:pi-r,g=0;return h<-m?g|=1:h>m&&(g|=2),f<-m?g|=4:f>m&&(g|=8),g}return clip(o,c,n,i?[0,-r]:[-pi,r-pi])}function transform(r){return{stream:transformer(r)}}function transformer(r){return function(e){var t=new TransformStream;for(var i in r)t[i]=r[i];return t.stream=e,t}}function TransformStream(){}TransformStream.prototype={constructor:TransformStream,point:function(r,e){this.stream.point(r,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function fitExtent(r,e,t){var i=e[1][0]-e[0][0],s=e[1][1]-e[0][1],n=r.clipExtent&&r.clipExtent();r.scale(150).translate([0,0]),n!=null&&r.clipExtent(null),geoStream(t,r.stream(boundsStream));var o=boundsStream.result(),c=Math.min(i/(o[1][0]-o[0][0]),s/(o[1][1]-o[0][1])),_=+e[0][0]+(i-c*(o[1][0]+o[0][0]))/2,l=+e[0][1]+(s-c*(o[1][1]+o[0][1]))/2;return n!=null&&r.clipExtent(n),r.scale(c*150).translate([_,l])}function fitSize(r,e,t){return fitExtent(r,[[0,0],e],t)}var maxDepth=16,cosMinDistance=cos(30*radians);function resample(r,e){return+e?resample$1(r,e):resampleNone(r)}function resampleNone(r){return transformer({point:function(e,t){e=r(e,t),this.stream.point(e[0],e[1])}})}function resample$1(r,e){function t(i,s,n,o,c,_,l,h,f,m,g,C,E,P){var w=l-i,M=h-s,T=w*w+M*M;if(T>4*e&&E--){var L=o+m,R=c+g,D=_+C,N=sqrt(L*L+R*R+D*D),k=asin(D/=N),B=abs(abs(D)-1)<epsilon||abs(n-f)<epsilon?(n+f)/2:atan2(R,L),$=r(B,k),H=$[0],W=$[1],J=H-i,z=W-s,fe=M*J-w*z;(fe*fe/T>e||abs((w*J+M*z)/T-.5)>.3||o*m+c*g+_*C<cosMinDistance)&&(t(i,s,n,o,c,_,H,W,B,L/=N,R/=N,D,E,P),P.point(H,W),t(H,W,B,L,R,D,l,h,f,m,g,C,E,P))}}return function(i){var s,n,o,c,_,l,h,f,m,g,C,E,P={point:w,lineStart:M,lineEnd:L,polygonStart:function(){i.polygonStart(),P.lineStart=R},polygonEnd:function(){i.polygonEnd(),P.lineStart=M}};function w(k,B){k=r(k,B),i.point(k[0],k[1])}function M(){f=NaN,P.point=T,i.lineStart()}function T(k,B){var $=cartesian([k,B]),H=r(k,B);t(f,m,h,g,C,E,f=H[0],m=H[1],h=k,g=$[0],C=$[1],E=$[2],maxDepth,i),i.point(f,m)}function L(){P.point=w,i.lineEnd()}function R(){M(),P.point=D,P.lineEnd=N}function D(k,B){T(s=k,B),n=f,o=m,c=g,_=C,l=E,P.point=T}function N(){t(f,m,h,g,C,E,n,o,s,c,_,l,maxDepth,i),P.lineEnd=L,L()}return P}}var transformRadians=transformer({point:function(r,e){this.stream.point(r*radians,e*radians)}});function projection(r){return projectionMutator(function(){return r})()}function projectionMutator(r){var e,t=150,i=480,s=250,n,o,c=0,_=0,l=0,h=0,f=0,m,g,C=null,E=clipAntimeridian,P=null,w,M,T,L=identity$1,R=.5,D=resample(H,R),N,k;function B(z){return z=g(z[0]*radians,z[1]*radians),[z[0]*t+n,o-z[1]*t]}function $(z){return z=g.invert((z[0]-n)/t,(o-z[1])/t),z&&[z[0]*degrees,z[1]*degrees]}function H(z,fe){return z=e(z,fe),[z[0]*t+n,o-z[1]*t]}B.stream=function(z){return N&&k===z?N:N=transformRadians(E(m,D(L(k=z))))},B.clipAngle=function(z){return arguments.length?(E=+z?clipCircle(C=z*radians,6*radians):(C=null,clipAntimeridian),J()):C*degrees},B.clipExtent=function(z){return arguments.length?(L=z==null?(P=w=M=T=null,identity$1):clipExtent(P=+z[0][0],w=+z[0][1],M=+z[1][0],T=+z[1][1]),J()):P==null?null:[[P,w],[M,T]]},B.scale=function(z){return arguments.length?(t=+z,W()):t},B.translate=function(z){return arguments.length?(i=+z[0],s=+z[1],W()):[i,s]},B.center=function(z){return arguments.length?(c=z[0]%360*radians,_=z[1]%360*radians,W()):[c*degrees,_*degrees]},B.rotate=function(z){return arguments.length?(l=z[0]%360*radians,h=z[1]%360*radians,f=z.length>2?z[2]%360*radians:0,W()):[l*degrees,h*degrees,f*degrees]},B.precision=function(z){return arguments.length?(D=resample(H,R=z*z),J()):sqrt(R)},B.fitExtent=function(z,fe){return fitExtent(B,z,fe)},B.fitSize=function(z,fe){return fitSize(B,z,fe)};function W(){g=compose(m=rotateRadians(l,h,f),e);var z=e(c,_);return n=i-z[0]*t,o=s+z[1]*t,J()}function J(){return N=k=null,B}return function(){return e=r.apply(this,arguments),B.invert=e.invert&&$,W()}}function conicProjection(r){var e=0,t=pi/3,i=projectionMutator(r),s=i(e,t);return s.parallels=function(n){return arguments.length?i(e=n[0]*radians,t=n[1]*radians):[e*degrees,t*degrees]},s}function cylindricalEqualAreaRaw(r){var e=cos(r);function t(i,s){return[i*e,sin(s)/e]}return t.invert=function(i,s){return[i/e,asin(s*e)]},t}function conicEqualAreaRaw(r,e){var t=sin(r),i=(t+sin(e))/2;if(abs(i)<epsilon)return cylindricalEqualAreaRaw(r);var s=1+t*(2*i-t),n=sqrt(s)/i;function o(c,_){var l=sqrt(s-2*i*sin(_))/i;return[l*sin(c*=i),n-l*cos(c)]}return o.invert=function(c,_){var l=n-_;return[atan2(c,abs(l))/i*sign(l),asin((s-(c*c+l*l)*i*i)/(2*i))]},o}function conicEqualArea(){return conicProjection(conicEqualAreaRaw).scale(155.424).center([0,33.6442])}function albers(){return conicEqualArea().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function multiplex(r){var e=r.length;return{point:function(t,i){for(var s=-1;++s<e;)r[s].point(t,i)},sphere:function(){for(var t=-1;++t<e;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<e;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<e;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<e;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<e;)r[t].polygonEnd()}}}function albersUsa(){var r,e,t=albers(),i,s=conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),n,o=conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c,_,l={point:function(m,g){_=[m,g]}};function h(m){var g=m[0],C=m[1];return _=null,i.point(g,C),_||(n.point(g,C),_)||(c.point(g,C),_)}h.invert=function(m){var g=t.scale(),C=t.translate(),E=(m[0]-C[0])/g,P=(m[1]-C[1])/g;return(P>=.12&&P<.234&&E>=-.425&&E<-.214?s:P>=.166&&P<.234&&E>=-.214&&E<-.115?o:t).invert(m)},h.stream=function(m){return r&&e===m?r:r=multiplex([t.stream(e=m),s.stream(m),o.stream(m)])},h.precision=function(m){return arguments.length?(t.precision(m),s.precision(m),o.precision(m),f()):t.precision()},h.scale=function(m){return arguments.length?(t.scale(m),s.scale(m*.35),o.scale(m),h.translate(t.translate())):t.scale()},h.translate=function(m){if(!arguments.length)return t.translate();var g=t.scale(),C=+m[0],E=+m[1];return i=t.translate(m).clipExtent([[C-.455*g,E-.238*g],[C+.455*g,E+.238*g]]).stream(l),n=s.translate([C-.307*g,E+.201*g]).clipExtent([[C-.425*g+epsilon,E+.12*g+epsilon],[C-.214*g-epsilon,E+.234*g-epsilon]]).stream(l),c=o.translate([C-.205*g,E+.212*g]).clipExtent([[C-.214*g+epsilon,E+.166*g+epsilon],[C-.115*g-epsilon,E+.234*g-epsilon]]).stream(l),f()},h.fitExtent=function(m,g){return fitExtent(h,m,g)},h.fitSize=function(m,g){return fitSize(h,m,g)};function f(){return r=e=null,h}return h.scale(1070)}function azimuthalRaw(r){return function(e,t){var i=cos(e),s=cos(t),n=r(i*s);return[n*s*sin(e),n*sin(t)]}}function azimuthalInvert(r){return function(e,t){var i=sqrt(e*e+t*t),s=r(i),n=sin(s),o=cos(s);return[atan2(e*n,i*o),asin(i&&t*n/i)]}}var azimuthalEqualAreaRaw=azimuthalRaw(function(r){return sqrt(2/(1+r))});azimuthalEqualAreaRaw.invert=azimuthalInvert(function(r){return 2*asin(r/2)});function azimuthalEqualArea(){return projection(azimuthalEqualAreaRaw).scale(124.75).clipAngle(180-.001)}var azimuthalEquidistantRaw=azimuthalRaw(function(r){return(r=acos(r))&&r/sin(r)});azimuthalEquidistantRaw.invert=azimuthalInvert(function(r){return r});function azimuthalEquidistant(){return projection(azimuthalEquidistantRaw).scale(79.4188).clipAngle(180-.001)}function mercatorRaw(r,e){return[r,log(tan((halfPi+e)/2))]}mercatorRaw.invert=function(r,e){return[r,2*atan(exp(e))-halfPi]};function mercator(){return mercatorProjection(mercatorRaw).scale(961/tau)}function mercatorProjection(r){var e=projection(r),t=e.center,i=e.scale,s=e.translate,n=e.clipExtent,o=null,c,_,l;e.scale=function(f){return arguments.length?(i(f),h()):i()},e.translate=function(f){return arguments.length?(s(f),h()):s()},e.center=function(f){return arguments.length?(t(f),h()):t()},e.clipExtent=function(f){return arguments.length?(f==null?o=c=_=l=null:(o=+f[0][0],c=+f[0][1],_=+f[1][0],l=+f[1][1]),h()):o==null?null:[[o,c],[_,l]]};function h(){var f=pi*i(),m=e(rotation(e.rotate()).invert([0,0]));return n(o==null?[[m[0]-f,m[1]-f],[m[0]+f,m[1]+f]]:r===mercatorRaw?[[Math.max(m[0]-f,o),c],[Math.min(m[0]+f,_),l]]:[[o,Math.max(m[1]-f,c)],[_,Math.min(m[1]+f,l)]])}return h()}function tany(r){return tan((halfPi+r)/2)}function conicConformalRaw(r,e){var t=cos(r),i=r===e?sin(r):log(t/cos(e))/log(tany(e)/tany(r)),s=t*pow(tany(r),i)/i;if(!i)return mercatorRaw;function n(o,c){s>0?c<-halfPi+epsilon&&(c=-halfPi+epsilon):c>halfPi-epsilon&&(c=halfPi-epsilon);var _=s/pow(tany(c),i);return[_*sin(i*o),s-_*cos(i*o)]}return n.invert=function(o,c){var _=s-c,l=sign(i)*sqrt(o*o+_*_);return[atan2(o,abs(_))/i*sign(_),2*atan(pow(s/l,1/i))-halfPi]},n}function conicConformal(){return conicProjection(conicConformalRaw).scale(109.5).parallels([30,30])}function equirectangularRaw(r,e){return[r,e]}equirectangularRaw.invert=equirectangularRaw;function equirectangular(){return projection(equirectangularRaw).scale(152.63)}function conicEquidistantRaw(r,e){var t=cos(r),i=r===e?sin(r):(t-cos(e))/(e-r),s=t/i+r;if(abs(i)<epsilon)return equirectangularRaw;function n(o,c){var _=s-c,l=i*o;return[_*sin(l),s-_*cos(l)]}return n.invert=function(o,c){var _=s-c;return[atan2(o,abs(_))/i*sign(_),s-sign(i)*sqrt(o*o+_*_)]},n}function conicEquidistant(){return conicProjection(conicEquidistantRaw).scale(131.154).center([0,13.9389])}function gnomonicRaw(r,e){var t=cos(e),i=cos(r)*t;return[t*sin(r)/i,sin(e)/i]}gnomonicRaw.invert=azimuthalInvert(atan);function gnomonic(){return projection(gnomonicRaw).scale(144.049).clipAngle(60)}function scaleTranslate(r,e,t,i){return r===1&&e===1&&t===0&&i===0?identity$1:transformer({point:function(s,n){this.stream.point(s*r+t,n*e+i)}})}function identity(){var r=1,e=0,t=0,i=1,s=1,n=identity$1,o=null,c,_,l,h=identity$1,f,m,g;function C(){return f=m=null,g}return g={stream:function(E){return f&&m===E?f:f=n(h(m=E))},clipExtent:function(E){return arguments.length?(h=E==null?(o=c=_=l=null,identity$1):clipExtent(o=+E[0][0],c=+E[0][1],_=+E[1][0],l=+E[1][1]),C()):o==null?null:[[o,c],[_,l]]},scale:function(E){return arguments.length?(n=scaleTranslate((r=+E)*i,r*s,e,t),C()):r},translate:function(E){return arguments.length?(n=scaleTranslate(r*i,r*s,e=+E[0],t=+E[1]),C()):[e,t]},reflectX:function(E){return arguments.length?(n=scaleTranslate(r*(i=E?-1:1),r*s,e,t),C()):i<0},reflectY:function(E){return arguments.length?(n=scaleTranslate(r*i,r*(s=E?-1:1),e,t),C()):s<0},fitExtent:function(E,P){return fitExtent(g,E,P)},fitSize:function(E,P){return fitSize(g,E,P)}}}function naturalEarth1Raw(r,e){var t=e*e,i=t*t;return[r*(.8707-.131979*t+i*(-.013791+i*(.003971*t-.001529*i))),e*(1.007226+t*(.015085+i*(-.044475+.028874*t-.005916*i)))]}naturalEarth1Raw.invert=function(r,e){var t=e,i=25,s;do{var n=t*t,o=n*n;t-=s=(t*(1.007226+n*(.015085+o*(-.044475+.028874*n-.005916*o)))-e)/(1.007226+n*(.015085*3+o*(-.044475*7+.028874*9*n-.005916*11*o)))}while(abs(s)>epsilon&&--i>0);return[r/(.8707+(n=t*t)*(-.131979+n*(-.013791+n*n*n*(.003971-.001529*n)))),t]};function naturalEarth1(){return projection(naturalEarth1Raw).scale(175.295)}function orthographicRaw(r,e){return[cos(e)*sin(r),sin(e)]}orthographicRaw.invert=azimuthalInvert(asin);function orthographic(){return projection(orthographicRaw).scale(249.5).clipAngle(90+epsilon)}function stereographicRaw(r,e){var t=cos(e),i=1+cos(r)*t;return[t*sin(r)/i,sin(e)/i]}stereographicRaw.invert=azimuthalInvert(function(r){return 2*atan(r)});function stereographic(){return projection(stereographicRaw).scale(250).clipAngle(142)}function transverseMercatorRaw(r,e){return[log(tan((halfPi+e)/2)),-r]}transverseMercatorRaw.invert=function(r,e){return[-e,2*atan(exp(r))-halfPi]};function transverseMercator(){var r=mercatorProjection(transverseMercatorRaw),e=r.center,t=r.rotate;return r.center=function(i){return arguments.length?e([-i[1],i[0]]):(i=e(),[i[1],-i[0]])},r.rotate=function(i){return arguments.length?t([i[0],i[1],i.length>2?i[2]+90:90]):(i=t(),[i[0],i[1],i[2]-90])},t([0,0,90]).scale(159.155)}const d3Geo=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:albers,geoAlbersUsa:albersUsa,geoArea:area,geoAzimuthalEqualArea:azimuthalEqualArea,geoAzimuthalEqualAreaRaw:azimuthalEqualAreaRaw,geoAzimuthalEquidistant:azimuthalEquidistant,geoAzimuthalEquidistantRaw:azimuthalEquidistantRaw,geoBounds:bounds,geoCentroid:centroid,geoCircle:circle$1,geoClipExtent:extent,geoConicConformal:conicConformal,geoConicConformalRaw:conicConformalRaw,geoConicEqualArea:conicEqualArea,geoConicEqualAreaRaw:conicEqualAreaRaw,geoConicEquidistant:conicEquidistant,geoConicEquidistantRaw:conicEquidistantRaw,geoContains:contains,geoDistance:distance,geoEquirectangular:equirectangular,geoEquirectangularRaw:equirectangularRaw,geoGnomonic:gnomonic,geoGnomonicRaw:gnomonicRaw,geoGraticule:graticule,geoGraticule10:graticule10,geoIdentity:identity,geoInterpolate:interpolate,geoLength:length,geoMercator:mercator,geoMercatorRaw:mercatorRaw,geoNaturalEarth1:naturalEarth1,geoNaturalEarth1Raw:naturalEarth1Raw,geoOrthographic:orthographic,geoOrthographicRaw:orthographicRaw,geoPath:index,geoProjection:projection,geoProjectionMutator:projectionMutator,geoRotation:rotation,geoStereographic:stereographic,geoStereographicRaw:stereographicRaw,geoStream,geoTransform:transform,geoTransverseMercator:transverseMercator,geoTransverseMercatorRaw:transverseMercatorRaw},Symbol.toStringTag,{value:"Module"})),require$$3=getAugmentedNamespace(d3Geo);var hasRequiredJs$a;function requireJs$a(){if(hasRequiredJs$a)return js$9.exports;hasRequiredJs$a=1;var r=requireJs$1g(),e=requireJsts_min(),t=requireJs$1F(),i=require$$3,s=requireJs$1G();function n(g){return g&&typeof g=="object"&&"default"in g?g:{default:g}}var o=n(r);function c(g,C,E){E=E||{};var P=E.units||"kilometers",w=E.steps||8;if(!g)throw new Error("geojson is required");if(typeof E!="object")throw new Error("options must be an object");if(typeof w!="number")throw new Error("steps must be an number");if(C===void 0)throw new Error("radius is required");if(w<=0)throw new Error("steps must be greater than 0");var M=[];switch(g.type){case"GeometryCollection":return t.geomEach(g,function(T){var L=_(T,C,P,w);L&&M.push(L)}),s.featureCollection(M);case"FeatureCollection":return t.featureEach(g,function(T){var L=_(T,C,P,w);L&&t.featureEach(L,function(R){R&&M.push(R)})}),s.featureCollection(M)}return _(g,C,P,w)}function _(g,C,E,P){var w=g.properties||{},M=g.type==="Feature"?g.geometry:g;if(M.type==="GeometryCollection"){var T=[];return t.geomEach(g,function(W){var J=_(W,C,E,P);J&&T.push(J)}),s.featureCollection(T)}var L=m(M),R={type:M.type,coordinates:h(M.coordinates,L)},D=new e.GeoJSONReader,N=D.read(R),k=s.radiansToLength(s.lengthToRadians(C,E),"meters"),B=e.BufferOp.bufferOp(N,k,P),$=new e.GeoJSONWriter;if(B=$.write(B),!l(B.coordinates)){var H={type:B.type,coordinates:f(B.coordinates,L)};return s.feature(H,w)}}function l(g){return Array.isArray(g[0])?l(g[0]):isNaN(g[0])}function h(g,C){return typeof g[0]!="object"?C(g):g.map(function(E){return h(E,C)})}function f(g,C){return typeof g[0]!="object"?C.invert(g):g.map(function(E){return f(E,C)})}function m(g){var C=o.default(g).geometry.coordinates,E=[-C[0],-C[1]];return i.geoAzimuthalEquidistant().rotate(E).scale(s.earthRadius)}return js$9.exports=c,js$9.exports.default=c,js$9.exports}var js$8={},hasRequiredJs$9;function requireJs$9(){if(hasRequiredJs$9)return js$8;hasRequiredJs$9=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(js$8,"__esModule",{value:!0});var e=r(requirePolygonClipping_umd()),t=requireJs$1D(),i=requireJs$1G();function s(n,o,c){c===void 0&&(c={});var _=t.getGeom(n),l=t.getGeom(o),h=e.default.union(_.coordinates,l.coordinates);return h.length===0?null:h.length===1?i.polygon(h[0],c.properties):i.multiPolygon(h,c.properties)}return js$8.default=s,js$8}var js$7={},hasRequiredJs$8;function requireJs$8(){if(hasRequiredJs$8)return js$7;hasRequiredJs$8=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(js$7,"__esModule",{value:!0});var e=requireJs$1G(),t=requireJs$1D(),i=r(requirePolygonClipping_umd());function s(n,o,c){c===void 0&&(c={});var _=t.getGeom(n),l=t.getGeom(o),h=i.default.intersection(_.coordinates,l.coordinates);return h.length===0?null:h.length===1?e.polygon(h[0],c.properties):e.multiPolygon(h,c.properties)}return js$7.default=s,js$7}var js$6={exports:{}},hasRequiredJs$7;function requireJs$7(){if(hasRequiredJs$7)return js$6.exports;hasRequiredJs$7=1;var r=requireJs$1G(),e=requireJs$1D(),t=requireJs$1F(),i=requireJs$T(),s=requirePolygonClipping_umd();function n(l){return l&&typeof l=="object"&&"default"in l?l:{default:l}}var o=n(i),c=n(s);function _(l,h){if(h=h||{},!r.isObject(h))throw new Error("options is invalid");var f=h.propertyName;e.collectionOf(l,"Polygon","dissolve");var m=[];if(h.propertyName){var g={};t.featureEach(l,function(w){Object.prototype.hasOwnProperty.call(g,w.properties[f])||(g[w.properties[f]]=[]),g[w.properties[f]].push(w)});for(var C=Object.keys(g),E=0;E<C.length;E++){var P=r.multiPolygon(c.default.union.apply(null,g[C[E]].map(function(w){return w.geometry.coordinates})));P.properties[f]=C[E],m.push(P)}}else return o.default(r.multiPolygon(c.default.union.apply(null,l.features.map(function(w){return w.geometry.coordinates}))));return o.default(r.featureCollection(m))}return js$6.exports=_,js$6.exports.default=_,js$6.exports}var js$5={},hasRequiredJs$6;function requireJs$6(){if(hasRequiredJs$6)return js$5;hasRequiredJs$6=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(js$5,"__esModule",{value:!0});var e=r(requireJs$1y()),t=r(requireJs$8()),i=requireJs$1G();function s(c,_,l){l===void 0&&(l={});var h=JSON.stringify(l.properties||{}),f=c[0],m=c[1],g=c[2],C=c[3],E=(m+C)/2,P=(f+g)/2,w=_*2/e.default([f,E],[g,E],l),M=w*(g-f),T=_*2/e.default([P,m],[P,C],l),L=T*(C-m),R=M/2,D=R*2,N=Math.sqrt(3)/2*L,k=g-f,B=C-m,$=3/4*D,H=N,W=(k-D)/(D-R/2),J=Math.floor(W),z=(J*$-R/2-k)/2-R/2+$/2,fe=Math.floor((B-N)/N),q=(B-fe*N)/2,te=fe*N-B>N/2;te&&(q-=N/4);for(var ie=[],xe=[],oe=0;oe<6;oe++){var de=2*Math.PI/6*oe;ie.push(Math.cos(de)),xe.push(Math.sin(de))}for(var X=[],he=0;he<=J;he++)for(var Se=0;Se<=fe;Se++){var Te=he%2===1;if(!(Se===0&&Te)&&!(Se===0&&te)){var Re=he*$+f-z,Be=Se*H+m+q;if(Te&&(Be-=N/2),l.triangles===!0)o([Re,Be],M/2,L/2,JSON.parse(h),ie,xe).forEach(function(Ve){l.mask?t.default(l.mask,Ve)&&X.push(Ve):X.push(Ve)});else{var ze=n([Re,Be],M/2,L/2,JSON.parse(h),ie,xe);l.mask?t.default(l.mask,ze)&&X.push(ze):X.push(ze)}}}return i.featureCollection(X)}function n(c,_,l,h,f,m){for(var g=[],C=0;C<6;C++){var E=c[0]+_*f[C],P=c[1]+l*m[C];g.push([E,P])}return g.push(g[0].slice()),i.polygon([g],h)}function o(c,_,l,h,f,m){for(var g=[],C=0;C<6;C++){var E=[];E.push(c),E.push([c[0]+_*f[C],c[1]+l*m[C]]),E.push([c[0]+_*f[(C+1)%6],c[1]+l*m[(C+1)%6]]),E.push(c),g.push(i.polygon([E],h))}return g}return js$5.default=s,js$5}var js$4={exports:{}},hasRequiredJs$5;function requireJs$5(){if(hasRequiredJs$5)return js$4.exports;hasRequiredJs$5=1;var r=requireJs$1G(),e=requirePolygonClipping_umd();function t(_){return _&&typeof _=="object"&&"default"in _?_:{default:_}}var i=t(e);function s(_,l){var h=c(l),f=null;return _.type==="FeatureCollection"?f=n(_):f=o(i.default.union(_.geometry.coordinates)),f.geometry.coordinates.forEach(function(m){h.geometry.coordinates.push(m[0])}),h}function n(_){var l=_.features.length===2?i.default.union(_.features[0].geometry.coordinates,_.features[1].geometry.coordinates):i.default.union.apply(i.default,_.features.map(function(h){return h.geometry.coordinates}));return o(l)}function o(_){return r.multiPolygon(_)}function c(_){var l=[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]],h=_&&_.geometry.coordinates||l;return r.polygon(h)}return js$4.exports=s,js$4.exports.default=s,js$4.exports}var js$3={},js$2={},hasRequiredJs$4;function requireJs$4(){if(hasRequiredJs$4)return js$2;hasRequiredJs$4=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(js$2,"__esModule",{value:!0});var e=r(requireJs$s()),t=r(requireJs$1y()),i=requireJs$1G();function s(n,o,c,_){_===void 0&&(_={});for(var l=[],h=n[0],f=n[1],m=n[2],g=n[3],C=o/t.default([h,f],[m,f],_),E=C*(m-h),P=c/t.default([h,f],[h,g],_),w=P*(g-f),M=m-h,T=g-f,L=Math.floor(M/E),R=Math.floor(T/w),D=(M-L*E)/2,N=(T-R*w)/2,k=h+D,B=0;B<L;B++){for(var $=f+N,H=0;H<R;H++){var W=i.polygon([[[k,$],[k,$+w],[k+E,$+w],[k+E,$],[k,$]]],_.properties);_.mask?e.default(_.mask,W)&&l.push(W):l.push(W),$+=w}k+=E}return i.featureCollection(l)}return js$2.default=s,js$2}var hasRequiredJs$3;function requireJs$3(){if(hasRequiredJs$3)return js$3;hasRequiredJs$3=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(js$3,"__esModule",{value:!0});var e=r(requireJs$4());function t(i,s,n){return n===void 0&&(n={}),e.default(i,s,s,n)}return js$3.default=t,js$3}var js$1={},hasRequiredJs$2;function requireJs$2(){if(hasRequiredJs$2)return js$1;hasRequiredJs$2=1;var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(js$1,"__esModule",{value:!0});var e=r(requireJs$1y()),t=r(requireJs$8()),i=requireJs$1G();function s(n,o,c){c===void 0&&(c={});for(var _=[],l=o/e.default([n[0],n[1]],[n[2],n[1]],c),h=l*(n[2]-n[0]),f=o/e.default([n[0],n[1]],[n[0],n[3]],c),m=f*(n[3]-n[1]),g=0,C=n[0];C<=n[2];){for(var E=0,P=n[1];P<=n[3];){var w=null,M=null;g%2===0&&E%2===0?(w=i.polygon([[[C,P],[C,P+m],[C+h,P],[C,P]]],c.properties),M=i.polygon([[[C,P+m],[C+h,P+m],[C+h,P],[C,P+m]]],c.properties)):g%2===0&&E%2===1?(w=i.polygon([[[C,P],[C+h,P+m],[C+h,P],[C,P]]],c.properties),M=i.polygon([[[C,P],[C,P+m],[C+h,P+m],[C,P]]],c.properties)):E%2===0&&g%2===1?(w=i.polygon([[[C,P],[C,P+m],[C+h,P+m],[C,P]]],c.properties),M=i.polygon([[[C,P],[C+h,P+m],[C+h,P],[C,P]]],c.properties)):E%2===1&&g%2===1&&(w=i.polygon([[[C,P],[C,P+m],[C+h,P],[C,P]]],c.properties),M=i.polygon([[[C,P+m],[C+h,P+m],[C+h,P],[C,P+m]]],c.properties)),c.mask?(t.default(c.mask,w)&&_.push(w),t.default(c.mask,M)&&_.push(M)):(_.push(w),_.push(M)),P+=m,E++}g++,C+=h}return i.featureCollection(_)}return js$1.default=s,js$1}var js={exports:{}},hasRequiredJs$1;function requireJs$1(){if(hasRequiredJs$1)return js.exports;hasRequiredJs$1=1;var r=requireJs$1E(),e=requireJs$6(),t=requireJs$V(),i=requireJs$1y(),s=requireJs$1f(),n=requireJs$3(),o=requireJs$2(),c=requireJs$1w(),_=requireJs$1G(),l=requireJs$1F(),h=requireJs$1D();function f(R){return R&&typeof R=="object"&&"default"in R?R:{default:R}}var m=f(r),g=f(e),C=f(t),E=f(i),P=f(s),w=f(n),M=f(o),T=f(c);function L(R,D,N){if(N=N||{},typeof N!="object")throw new Error("options is invalid");var k=N.gridType,B=N.property,$=N.weight;if(!R)throw new Error("points is required");if(h.collectionOf(R,"Point","input must contain Points"),!D)throw new Error("cellSize is required");if($!==void 0&&typeof $!="number")throw new Error("weight must be a number");B=B||"elevation",k=k||"square",$=$||1;var H=m.default(R),W;switch(k){case"point":case"points":W=C.default(H,D,N);break;case"square":case"squares":W=w.default(H,D,N);break;case"hex":case"hexes":W=g.default(H,D,N);break;case"triangle":case"triangles":W=M.default(H,D,N);break;default:throw new Error("invalid gridType")}var J=[];return l.featureEach(W,function(z){var fe=0,q=0;l.featureEach(R,function(ie){var xe=k==="point"?z:P.default(z),oe=E.default(xe,ie,N),de;if(B!==void 0&&(de=ie.properties[B]),de===void 0&&(de=ie.geometry.coordinates[2]),de===void 0)throw new Error("zValue is missing");oe===0&&(fe=de);var X=1/Math.pow(oe,$);q+=X,fe+=X*de});var te=T.default(z);te.properties[B]=fe/q,J.push(te)}),_.featureCollection(J)}return js.exports=L,js.exports.default=L,js.exports}var hasRequiredJs;function requireJs(){return hasRequiredJs||(hasRequiredJs=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=requireJs$1C(),t=requireJs$1B(),i=requireJs$1z(),s=requireJs$1v(),n=requireJs$1u(),o=requireJs$1t(),c=requireJs$1r(),_=requireJs$1q(),l=requireJs$1p(),h=requireJs$1o(),f=requireJs$1m(),m=requireJs$1l(),g=requireJs$1j(),C=requireJs$1h(),E=requireJs$1g(),P=requireJs$1e(),w=requireJs$1f(),M=requireJs$1d(),T=requireJs$1y(),L=requireJs$1c(),R=requireJs$1E(),D=requireJs$1b(),N=requireJs$1n(),k=requireJs$1A(),B=requireJs$1a(),$=requireJs$17(),H=requireJs$14(),W=requireJs$13(),J=requireJs$1x(),z=requireJs$1i(),fe=requireJs$1k(),q=requireJs$12(),te=requireJs$11(),ie=requireJs$10(),xe=requireJs$$(),oe=requireJs$_(),de=requireJs$Z(),X=requireJs$Y(),he=requireJs$V(),Se=requireJs$U(),Te=requireJs$T(),Re=requireJs$18(),Be=requireJs$S(),ze=requireJs$R(),Ve=requireJs$Q(),ye=requireJs$19(),Fe=requireJs$P(),Ce=requireJs$O(),Q=requireJs$N(),me=requireJs$M(),Ie=requireJs$L(),De=requireJs$K(),Ee=requireJs$J(),Oe=requireJs$I(),le=requireJs$16(),Y=requireJs$H(),j=requireJs$G(),U=requireJs$E(),re=requireJs$D(),ce=requireJs$C(),be=requireJs$B(),Ae=requireJs$A(),Pe=requireJs$z(),Je=requireJs$y(),Ue=requireJs$x(),qe=requireJs$w(),ct=requireJs$v(),vt=requireJs$F(),Mt=requireJs$u(),pt=requireJs$X(),Lt=requireJs$t(),At=requireJs$W(),It=requireJs$s(),Rt=requireJs$1w(),Jt=requireJs$1s(),kt=requireJs$r(),Bi=requireJs$q(),Zt=requireJs$15(),Xe=requireJs$p(),Ri=requireJs$o(),Vi=requireJs$n(),Et=requireJs$m(),l0=requireJs$l(),Ji=requireJs$k(),Hi=requireJs$j(),Ui=requireJs$i(),xt=requireJs$h(),st=requireJs$f(),ht=requireJs$g(),rt=requireJs$e(),dt=requireJs$d(),ft=requireJs$c(),Ct=requireJs$1G(),nt=requireJs$1D(),Ke=requireJs$1F(),se=requireJs$b(),gi=requireJs$a(),si=requireJs$9(),u0=requireJs$8(),Ci=requireJs$7(),ta=requireJs$6(),Pi=requireJs$5(),la=requireJs$3(),qt=requireJs$2(),Gt=requireJs$1();function We(St){return St&&typeof St=="object"&&"default"in St?St:{default:St}}function Kt(St){if(St&&St.__esModule)return St;var Zi=Object.create(null);return St&&Object.keys(St).forEach(function(r0){if(r0!=="default"){var o0=Object.getOwnPropertyDescriptor(St,r0);Object.defineProperty(Zi,r0,o0.get?o0:{enumerable:!0,get:function(){return St[r0]}})}}),Zi.default=St,Object.freeze(Zi)}var a0=We(e),Ut=We(t),C0=We(i),Wi=We(s),ae=We(n),_e=We(o),je=We(c),Ze=We(_),Qe=We(l),Ye=We(h),pe=We(f),at=We(m),He=We(g),ne=We(C),ve=We(E),ge=We(P),Le=We(w),Me=We(M),R0=We(T),et=We(L),ua=We(R),Pt=We(D),mt=We(N),_t=We(k),lt=We(B),gt=We($),wt=We(H),$e=We(W),yt=We(J),Ne=We(z),h0=We(fe),Ma=We(q),ni=We(te),Ht=We(ie),$t=We(xe),Wt=We(oe),Qa=We(de),es=We(X),Di=We(he),Sa=We(Se),e0=We(Te),Ft=We(Re),ha=We(Be),ri=We(ze),ka=We(Ve),ia=We(ye),jt=We(Fe),wi=We(Ce),$0=We(Q),Gi=We(me),d0=We(Ie),P0=We(De),F0=We(Ee),Qt=We(Oe),qa=We(le),Yi=We(Y),Xt=We(j),ai=We(U),Ta=We(re),ts=We(ce),aa=We(be),ja=We(Ae),Va=We(Pe),yi=We(Je),w0=We(Ue),_i=We(qe),B0=We(ct),s0=We(vt),da=We(Mt),Yt=We(pt),ut=We(Lt),Ja=We(At),fa=We(It),Ei=We(Rt),t0=We(Jt),D0=We(kt),pa=We(Bi),$a=We(Zt),Ua=We(Xe),Ot=We(Ri),f0=We(Vi),Vt=We(Et),ma=We(l0),Oi=We(Ji),Wa=We(Hi),Dt=We(Ui),H0=We(xt),zt=We(st),ga=We(ht),bi=Kt(rt),G0=Kt(dt),Ya=Kt(ft),O0=Kt(Ct),Nt=Kt(nt),zi=Kt(Ke),sa=We(se),n0=We(gi),Ni=We(si),xi=We(u0),is=We(Ci),Xa=We(ta),E0=We(Pi),Xi=We(la),N0=We(qt),ki=We(Gt);Object.keys(rt).forEach(function(St){St!=="default"&&Object.defineProperty(r,St,{enumerable:!0,get:function(){return rt[St]}})}),Object.keys(dt).forEach(function(St){St!=="default"&&Object.defineProperty(r,St,{enumerable:!0,get:function(){return dt[St]}})}),Object.keys(ft).forEach(function(St){St!=="default"&&Object.defineProperty(r,St,{enumerable:!0,get:function(){return ft[St]}})}),Object.keys(Ct).forEach(function(St){St!=="default"&&Object.defineProperty(r,St,{enumerable:!0,get:function(){return Ct[St]}})}),Object.keys(nt).forEach(function(St){St!=="default"&&Object.defineProperty(r,St,{enumerable:!0,get:function(){return nt[St]}})}),Object.keys(Ke).forEach(function(St){St!=="default"&&Object.defineProperty(r,St,{enumerable:!0,get:function(){return Ke[St]}})}),Object.defineProperty(r,"isolines",{enumerable:!0,get:function(){return a0.default}}),Object.defineProperty(r,"convex",{enumerable:!0,get:function(){return Ut.default}}),Object.defineProperty(r,"pointsWithinPolygon",{enumerable:!0,get:function(){return C0.default}}),Object.defineProperty(r,"within",{enumerable:!0,get:function(){return C0.default}}),Object.defineProperty(r,"concave",{enumerable:!0,get:function(){return Wi.default}}),Object.defineProperty(r,"collect",{enumerable:!0,get:function(){return ae.default}}),Object.defineProperty(r,"flip",{enumerable:!0,get:function(){return _e.default}}),Object.defineProperty(r,"simplify",{enumerable:!0,get:function(){return je.default}}),Object.defineProperty(r,"bezier",{enumerable:!0,get:function(){return Ze.default}}),Object.defineProperty(r,"bezierSpline",{enumerable:!0,get:function(){return Ze.default}}),Object.defineProperty(r,"tag",{enumerable:!0,get:function(){return Qe.default}}),Object.defineProperty(r,"sample",{enumerable:!0,get:function(){return Ye.default}}),Object.defineProperty(r,"envelope",{enumerable:!0,get:function(){return pe.default}}),Object.defineProperty(r,"square",{enumerable:!0,get:function(){return at.default}}),Object.defineProperty(r,"circle",{enumerable:!0,get:function(){return He.default}}),Object.defineProperty(r,"midpoint",{enumerable:!0,get:function(){return ne.default}}),Object.defineProperty(r,"center",{enumerable:!0,get:function(){return ve.default}}),Object.defineProperty(r,"centerOfMass",{enumerable:!0,get:function(){return ge.default}}),Object.defineProperty(r,"centroid",{enumerable:!0,get:function(){return Le.default}}),Object.defineProperty(r,"combine",{enumerable:!0,get:function(){return Me.default}}),Object.defineProperty(r,"distance",{enumerable:!0,get:function(){return R0.default}}),Object.defineProperty(r,"explode",{enumerable:!0,get:function(){return et.default}}),Object.defineProperty(r,"bbox",{enumerable:!0,get:function(){return ua.default}}),Object.defineProperty(r,"tesselate",{enumerable:!0,get:function(){return Pt.default}}),Object.defineProperty(r,"bboxPolygon",{enumerable:!0,get:function(){return mt.default}}),Object.defineProperty(r,"booleanPointInPolygon",{enumerable:!0,get:function(){return _t.default}}),Object.defineProperty(r,"inside",{enumerable:!0,get:function(){return _t.default}}),Object.defineProperty(r,"nearest",{enumerable:!0,get:function(){return lt.default}}),Object.defineProperty(r,"nearestPoint",{enumerable:!0,get:function(){return lt.default}}),Object.defineProperty(r,"nearestPointOnLine",{enumerable:!0,get:function(){return gt.default}}),Object.defineProperty(r,"pointOnLine",{enumerable:!0,get:function(){return gt.default}}),Object.defineProperty(r,"nearestPointToLine",{enumerable:!0,get:function(){return wt.default}}),Object.defineProperty(r,"planepoint",{enumerable:!0,get:function(){return $e.default}}),Object.defineProperty(r,"tin",{enumerable:!0,get:function(){return yt.default}}),Object.defineProperty(r,"bearing",{enumerable:!0,get:function(){return Ne.default}}),Object.defineProperty(r,"destination",{enumerable:!0,get:function(){return h0.default}}),Object.defineProperty(r,"kinks",{enumerable:!0,get:function(){return Ma.default}}),Object.defineProperty(r,"pointOnFeature",{enumerable:!0,get:function(){return ni.default}}),Object.defineProperty(r,"pointOnSurface",{enumerable:!0,get:function(){return ni.default}}),Object.defineProperty(r,"area",{enumerable:!0,get:function(){return Ht.default}}),Object.defineProperty(r,"along",{enumerable:!0,get:function(){return $t.default}}),Object.defineProperty(r,"length",{enumerable:!0,get:function(){return Wt.default}}),Object.defineProperty(r,"lineDistance",{enumerable:!0,get:function(){return Wt.default}}),Object.defineProperty(r,"lineSlice",{enumerable:!0,get:function(){return Qa.default}}),Object.defineProperty(r,"lineSliceAlong",{enumerable:!0,get:function(){return es.default}}),Object.defineProperty(r,"pointGrid",{enumerable:!0,get:function(){return Di.default}}),Object.defineProperty(r,"truncate",{enumerable:!0,get:function(){return Sa.default}}),Object.defineProperty(r,"flatten",{enumerable:!0,get:function(){return e0.default}}),Object.defineProperty(r,"lineIntersect",{enumerable:!0,get:function(){return Ft.default}}),Object.defineProperty(r,"lineChunk",{enumerable:!0,get:function(){return ha.default}}),Object.defineProperty(r,"unkinkPolygon",{enumerable:!0,get:function(){return ri.default}}),Object.defineProperty(r,"greatCircle",{enumerable:!0,get:function(){return ka.default}}),Object.defineProperty(r,"lineSegment",{enumerable:!0,get:function(){return ia.default}}),Object.defineProperty(r,"lineSplit",{enumerable:!0,get:function(){return jt.default}}),Object.defineProperty(r,"lineArc",{enumerable:!0,get:function(){return wi.default}}),Object.defineProperty(r,"polygonToLine",{enumerable:!0,get:function(){return $0.default}}),Object.defineProperty(r,"polygonToLineString",{enumerable:!0,get:function(){return $0.default}}),Object.defineProperty(r,"lineStringToPolygon",{enumerable:!0,get:function(){return Gi.default}}),Object.defineProperty(r,"lineToPolygon",{enumerable:!0,get:function(){return Gi.default}}),Object.defineProperty(r,"bboxClip",{enumerable:!0,get:function(){return d0.default}}),Object.defineProperty(r,"lineOverlap",{enumerable:!0,get:function(){return P0.default}}),Object.defineProperty(r,"sector",{enumerable:!0,get:function(){return F0.default}}),Object.defineProperty(r,"rhumbBearing",{enumerable:!0,get:function(){return Qt.default}}),Object.defineProperty(r,"rhumbDistance",{enumerable:!0,get:function(){return qa.default}}),Object.defineProperty(r,"rhumbDestination",{enumerable:!0,get:function(){return Yi.default}}),Object.defineProperty(r,"polygonTangents",{enumerable:!0,get:function(){return Xt.default}}),Object.defineProperty(r,"rewind",{enumerable:!0,get:function(){return ai.default}}),Object.defineProperty(r,"isobands",{enumerable:!0,get:function(){return Ta.default}}),Object.defineProperty(r,"transformRotate",{enumerable:!0,get:function(){return ts.default}}),Object.defineProperty(r,"transformScale",{enumerable:!0,get:function(){return aa.default}}),Object.defineProperty(r,"transformTranslate",{enumerable:!0,get:function(){return ja.default}}),Object.defineProperty(r,"lineOffset",{enumerable:!0,get:function(){return Va.default}}),Object.defineProperty(r,"polygonize",{enumerable:!0,get:function(){return yi.default}}),Object.defineProperty(r,"booleanDisjoint",{enumerable:!0,get:function(){return w0.default}}),Object.defineProperty(r,"booleanContains",{enumerable:!0,get:function(){return _i.default}}),Object.defineProperty(r,"booleanCrosses",{enumerable:!0,get:function(){return B0.default}}),Object.defineProperty(r,"booleanClockwise",{enumerable:!0,get:function(){return s0.default}}),Object.defineProperty(r,"booleanOverlap",{enumerable:!0,get:function(){return da.default}}),Object.defineProperty(r,"booleanPointOnLine",{enumerable:!0,get:function(){return Yt.default}}),Object.defineProperty(r,"booleanEqual",{enumerable:!0,get:function(){return ut.default}}),Object.defineProperty(r,"booleanWithin",{enumerable:!0,get:function(){return Ja.default}}),Object.defineProperty(r,"booleanIntersects",{enumerable:!0,get:function(){return fa.default}}),Object.defineProperty(r,"clone",{enumerable:!0,get:function(){return Ei.default}}),Object.defineProperty(r,"cleanCoords",{enumerable:!0,get:function(){return t0.default}}),Object.defineProperty(r,"clustersDbscan",{enumerable:!0,get:function(){return D0.default}}),Object.defineProperty(r,"clustersKmeans",{enumerable:!0,get:function(){return pa.default}}),Object.defineProperty(r,"pointToLineDistance",{enumerable:!0,get:function(){return $a.default}}),Object.defineProperty(r,"booleanParallel",{enumerable:!0,get:function(){return Ua.default}}),Object.defineProperty(r,"shortestPath",{enumerable:!0,get:function(){return Ot.default}}),Object.defineProperty(r,"voronoi",{enumerable:!0,get:function(){return f0.default}}),Object.defineProperty(r,"ellipse",{enumerable:!0,get:function(){return Vt.default}}),Object.defineProperty(r,"centerMean",{enumerable:!0,get:function(){return ma.default}}),Object.defineProperty(r,"centerMedian",{enumerable:!0,get:function(){return Oi.default}}),Object.defineProperty(r,"standardDeviationalEllipse",{enumerable:!0,get:function(){return Wa.default}}),Object.defineProperty(r,"angle",{enumerable:!0,get:function(){return Dt.default}}),Object.defineProperty(r,"polygonSmooth",{enumerable:!0,get:function(){return H0.default}}),Object.defineProperty(r,"moranIndex",{enumerable:!0,get:function(){return zt.default}}),Object.defineProperty(r,"distanceWeight",{enumerable:!0,get:function(){return ga.default}}),r.projection=bi,r.random=G0,r.clusters=Ya,Object.defineProperty(r,"bearingToAngle",{enumerable:!0,get:function(){return Ct.bearingToAzimuth}}),Object.defineProperty(r,"convertDistance",{enumerable:!0,get:function(){return Ct.convertLength}}),Object.defineProperty(r,"degrees2radians",{enumerable:!0,get:function(){return Ct.degreesToRadians}}),Object.defineProperty(r,"distanceToDegrees",{enumerable:!0,get:function(){return Ct.lengthToDegrees}}),Object.defineProperty(r,"distanceToRadians",{enumerable:!0,get:function(){return Ct.lengthToRadians}}),r.helpers=O0,Object.defineProperty(r,"radians2degrees",{enumerable:!0,get:function(){return Ct.radiansToDegrees}}),Object.defineProperty(r,"radiansToDistance",{enumerable:!0,get:function(){return Ct.radiansToLength}}),r.invariant=Nt,r.meta=zi,Object.defineProperty(r,"difference",{enumerable:!0,get:function(){return sa.default}}),Object.defineProperty(r,"buffer",{enumerable:!0,get:function(){return n0.default}}),Object.defineProperty(r,"union",{enumerable:!0,get:function(){return Ni.default}}),Object.defineProperty(r,"intersect",{enumerable:!0,get:function(){return xi.default}}),Object.defineProperty(r,"dissolve",{enumerable:!0,get:function(){return is.default}}),Object.defineProperty(r,"hexGrid",{enumerable:!0,get:function(){return Xa.default}}),Object.defineProperty(r,"mask",{enumerable:!0,get:function(){return E0.default}}),Object.defineProperty(r,"squareGrid",{enumerable:!0,get:function(){return Xi.default}}),Object.defineProperty(r,"triangleGrid",{enumerable:!0,get:function(){return N0.default}}),Object.defineProperty(r,"interpolate",{enumerable:!0,get:function(){return ki.default}})}(js$1G)),js$1G}(function(module,exports){(function(r,e){e(exports,window.Cesium||_global_Cesium,window.turf||requireJs())})(commonjsGlobal,function(exports,Cesium,turf){const _0x5e32ae=_0x5210;(function(r,e){const t={_0x47e232:3561,_0x4e5b66:2794,_0x355cd6:1791},i=_0x5210,s=r();for(;[];)try{if(-parseInt(i(t._0x47e232))/1*(-parseInt(i(t._0x4e5b66))/2)+parseInt(i(3101))/3*(parseInt(i(3631))/4)+-parseInt(i(3295))/5+parseInt(i(2859))/6*(-parseInt(i(3162))/7)+-parseInt(i(834))/8+parseInt(i(1063))/9*(parseInt(i(2256))/10)+parseInt(i(t._0x355cd6))/11===e)break;s.push(s.shift())}catch{s.push(s.shift())}})(_0x564f,481894);function _interopNamespace(r){const e={_0x1996c5:3397,_0x4fa027:3825,_0x22791a:2500},t={_0xb3e506:1196},i=_0x5210;if(r&&r[i(e._0x1996c5)])return r;var s=Object[i(e._0x4fa027)](null);return r&&Object.keys(r)[i(e._0x22791a)](function(n){const o=i;if(n!=="default"){var c=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(s,n,c[o(t._0xb3e506)]?c:{enumerable:!![],get:function(){return r[n]}})}}),s.default=r,s}var Cesium__namespace=_interopNamespace(Cesium);if(!(Cesium__namespace!=null&&Cesium__namespace.Viewer))throw new Error(_0x5e32ae(1093));const getUrlComponent_old=Cesium__namespace[_0x5e32ae(4071)][_0x5e32ae(2392)][_0x5e32ae(1858)];Cesium__namespace.Resource.prototype[_0x5e32ae(1858)]=function(r,e){const t={_0x14fd50:2749,_0x3b2209:4071},i=_0x5e32ae;let s=getUrlComponent_old[i(t._0x14fd50)](this)(r,e);return Cesium__namespace[i(t._0x3b2209)].ReplaceUrl&&(s=Cesium__namespace.Resource.ReplaceUrl(s)),this._last_url=s,s};const getValueInReferenceFrame_old=Cesium__namespace.ConstantPositionProperty.prototype.getValueInReferenceFrame;Cesium__namespace.ConstantPositionProperty.prototype.getValueInReferenceFrame=function(r,e,t){return!Cesium__namespace[_0x5e32ae(515)](r)&&(r=Cesium__namespace.JulianDate.now()),getValueInReferenceFrame_old.bind(this)(r,e,t)},Cesium__namespace[_0x5e32ae(3111)].prototype.getValue=function(r,e){const t={_0xa559d:3073,_0x5a6488:3916,_0x404f46:792,_0x22dfe1:719},i=_0x5e32ae;!this._positionScratch&&(this._positionScratch=new Cesium__namespace.Cartesian3,this[i(t._0xa559d)]=new Cesium__namespace[i(t._0x5a6488)],this[i(t._0x404f46)]=new Cesium__namespace.Matrix3);let s=this._velocityVectorProperty._getValue(r,this._velocityScratch,this._positionScratch);if(Cesium__namespace[i(515)](s)?this._last_velocity=s.clone():s=this[i(t._0x22dfe1)],!!Cesium__namespace.defined(s))return Cesium__namespace.Transforms.rotationMatrixFromPositionVelocity(this[i(2778)],s,this._ellipsoid,this[i(792)]),Cesium__namespace.Quaternion[i(3365)](this._rotationScratch,e)};const beginFrame_old=Cesium__namespace.Globe.prototype.beginFrame;Cesium__namespace.Globe.prototype.beginFrame=function(r){const e={_0x4144cf:3677,_0x2e50a1:947,_0x620911:2840,_0x563a7a:423,_0x202267:2840,_0x32d663:757},t=_0x5e32ae;var i,s,n,o;const c=(i=this._surface[t(423)])===null||i===void 0||(s=i[t(e._0x4144cf)])===null||s===void 0?void 0:s.flat;c&&c.hasUpdate&&(c[t(e._0x2e50a1)]&&c.texture.destroy(),c[t(947)]=createFlattingAreaTextureOrLimitAreaTexture(r.context,c.areas,c.heights),c[t(e._0x620911)]=![]);const _=(n=this._surface[t(e._0x563a7a)])===null||n===void 0||(o=n.marsOptions)===null||o===void 0?void 0:o.uplift;return _&&_[t(e._0x202267)]&&(_.texture&&_.texture[t(e._0x32d663)](),_[t(947)]=createFlattingAreaTextureOrLimitAreaTexture(r.context,_.areas,void 0),_.hasUpdate=![]),beginFrame_old.bind(this)(r)};function createFlattingAreaTextureOrLimitAreaTexture(r,e,t){const i={_0x3b4f86:2816,_0x8f809d:1516},s=_0x5e32ae,n=e==null?void 0:e.length;if(!n||n===0)return;let o=0;e.forEach(_=>{o<_[_0x5210(3402)]&&(o=_.length)});const c=[];return e.forEach((_,l)=>{const h={_0x2beede:3759,_0x108d0e:3701},f=_.length;if(_.forEach(m=>{const g=_0x5210;c[g(h._0x2beede)](m.longitude),c.push(m[g(h._0x108d0e)]),c.push(f),Cesium__namespace[g(515)](t)?c[g(3759)](t[l]):c.push(0)}),f<o)for(let m=0;m<o-f;m++)c.push(0),c.push(0),c.push(0),c.push(0)}),new Cesium__namespace.Texture({context:r,pixelFormat:Cesium__namespace.PixelFormat.RGBA,pixelDatatype:Cesium__namespace.PixelDatatype[s(i._0x3b4f86)],sampler:new Cesium__namespace.Sampler({wrapS:Cesium__namespace.TextureWrap.CLAMP_TO_EDGE,wrapT:Cesium__namespace.TextureWrap.CLAMP_TO_EDGE,minificationFilter:Cesium__namespace.TextureMinificationFilter[s(i._0x8f809d)],magnificationFilter:Cesium__namespace[s(2346)].NEAREST}),flipY:![],source:{width:o,height:n,arrayBufferView:new Float32Array(c)}})}Object.defineProperties(Cesium__namespace[_0x5e32ae(2705)].prototype,{marsOptions:{get:function(){return this[_0x5e32ae(848)]}}}),Cesium__namespace[_0x5e32ae(2705)][_0x5e32ae(2392)]._initByMars3D=function(r){const e={_0x52063d:848},t={_0x264363:848},i={_0x4d0cb4:1720},s={_0x11f6d3:848,_0x1cc5cb:4102},n={_0xec6be5:848,_0x1cfca2:1130},o={_0x158b5a:2015,_0x2eae84:4275,_0x272d6b:3022,_0x8f4efa:4102,_0x2115bf:4069,_0xd4766e:1720},c={_0x27ae81:1130,_0x3a4d9a:3022,_0x3b43f4:4069},_={_0x58e0e7:3796},l=_0x5e32ae,h=this;this[l(e._0x52063d)]={resetValue:function(){this.resetClipValue(),this.resetFloodValue(),this.resetFlatValue(),this.resetUpliftValue()},flat:{},resetFlatValue:function(){const f=l;this.flat[f(968)]=![],this[f(1559)][f(_._0x58e0e7)]=[],this.flat[f(1764)]=void 0,this.flat.areas=void 0,this.flat[f(947)]=void 0,this.flat[f(2840)]=![]},uplift:{},resetUpliftValue:function(){const f=l;this.uplift.enabled=![],this.uplift.showUp=!![],this[f(644)].height=0,this[f(644)].rectangles=void 0,this.uplift.areas=void 0,this.uplift.texture=void 0,this[f(644)].hasUpdate=![]},clip:{},resetClipValue:function(){const f=l;this[f(c._0x27ae81)].enabled=![],this[f(1130)].clipOutSide=![],this.clip.polygonTexture=void 0,this[f(1130)][f(4300)]=Cesium__namespace.Cartesian4.ZERO,this.clip[f(c._0x3a4d9a)]=Cesium__namespace[f(4102)][f(c._0x3b43f4)]},flood:{},resetFloodValue:function(){const f=l;this.flood[f(968)]=![],this.flood.globe=!![],this.flood[f(o._0x158b5a)]=!![],this[f(o._0x2eae84)].polygonTexture=void 0,this[f(o._0x2eae84)][f(o._0x272d6b)]=Cesium__namespace[f(o._0x8f4efa)][f(o._0x2115bf)],this.flood.floodRect=Cesium__namespace[f(o._0xd4766e)].ZERO,this[f(4275)].heightVal=new Cesium__namespace[f(1720)](0,0,0,500),this.flood.color=new Cesium__namespace[f(2200)](.15,.7,.95,.5)},updateTileUniformMap:function(f,m){const g={_0x39f354:4275},C={_0x4cf954:1051};return{u_mars_clip_enabled:function(){return h._marsOptions.clip.enabled},u_mars_clip_only:function(){return h._marsOptions.clip.clipOutSide},u_mars_clip_area:function(){const E=_0x5210;return h[E(n._0xec6be5)][E(n._0x1cfca2)].polygonTexture||f.context.defaultTexture},u_mars_clip_inverMatrix:function(){const E=_0x5210;return h[E(s._0x11f6d3)].clip[E(3022)]||Cesium__namespace[E(s._0x1cc5cb)].ZERO},u_mars_clip_rect:function(){const E=_0x5210;return h[E(848)][E(1130)].tailorRect||Cesium__namespace[E(i._0x4d0cb4)].ZERO},u_mars_flood_emabled:function(){return h._marsOptions.flood.enabled},u_mars_flood_globe:function(){return h[_0x5210(t._0x264363)].flood.globe},u_mars_flood_showElse:function(){return h[_0x5210(848)].flood.showElseArea},u_mars_flood_area:function(){const E=_0x5210;return h._marsOptions[E(4275)][E(C._0x4cf954)]||f.context[E(2097)]},u_mars_flood_inverMatrix:function(){return h._marsOptions.flood.inverMatrix||Cesium__namespace.Matrix4.ZERO},u_mars_flood_rect:function(){const E=_0x5210;return h._marsOptions[E(4275)].floodRect||Cesium__namespace[E(1720)].ZERO},u_mars_flood_val:function(){const E=_0x5210;return h._marsOptions[E(g._0x39f354)].heightVal},u_mars_flood_color:function(){return h._marsOptions.flood.color}}}},this[l(848)].resetValue()},Cesium__namespace[_0x5e32ae(4210)].prototype._initByMars3D=function(r,e){const t={_0x396579:843,_0x58db78:2451},i=_0x5e32ae;this.invertColor=e[i(2468)]??r.invertColor,this[i(t._0x396579)]=e.filterColor??r.filterColor,this.filterColor&&typeof this[i(t._0x396579)]=="string"&&this.filterColor[i(3346)]===String&&(this.filterColor=Cesium__namespace[i(2200)][i(t._0x58db78)](this[i(843)]))},Cesium__namespace.ImageryLayerCollection.prototype.addImageryProvider=function(r,e){const t=new Cesium__namespace.ImageryLayer(r,r.options);return this.add(t,e),t};function _0x5210(r,e){const t=_0x564f();return _0x5210=function(i,s){return i=i-417,t[i]},_0x5210(r,e)}const createShadowReceiveFragmentShader_old=Cesium__namespace.ShadowMapShader[_0x5e32ae(2875)];Cesium__namespace.ShadowMapShader.createShadowReceiveFragmentShader=function(r,e,t,i,s){const n={_0x395c12:1270,_0x2d89ab:3056},o=_0x5e32ae,c=createShadowReceiveFragmentShader_old.bind(this)(r,e,t,i,s);if(!isSun(e._lightCamera[o(2180)])){const _=c[o(1270)][c[o(n._0x395c12)].length-1];c.sources[c.sources.length-1]=_[o(1525)](o(n._0x2d89ab),o(3802))}return c};function isSun(r){return Math.abs(r.x)>7471e3?!![]:Math.abs(r.y)>7471e3?!![]:Math.abs(r.z)>7471e3?!![]:![]}Object.defineProperties(Cesium__namespace[_0x5e32ae(3015)].prototype,{circle:{set:function(r){this.ellipse=r},get:function(){return this.ellipse}}}),Cesium__namespace.PerformanceDisplay[_0x5e32ae(2392)].update=function(r){const e={_0x7fdae8:2678,_0x4f1d95:2424},t=_0x5e32ae,i=Cesium__namespace.getTimestamp(),s=r??!![];this._fpsFrameCount++;const n=i-this._lastFpsSampleTime;if(n>1e3){if(s){const c=this[t(1261)]*1e3/n|0;this[t(e._0x7fdae8)][t(e._0x4f1d95)]=c+" FPS"}this._lastFpsSampleTime=i,this._fpsFrameCount=0}this._msFrameCount++;const o=i-this._lastMsSampleTime;if(o>200){if(s){const c=(o/this._msFrameCount)[t(1029)](2);this._msText.nodeValue=c+" MS"}this._lastMsSampleTime=i,this._msFrameCount=0}};const load_old=Cesium__namespace.I3SLayer.prototype.load;Cesium__namespace.I3SLayer.prototype.load=function(){const r=_0x5e32ae;var e,t;return((e=this._data)===null||e===void 0||(t=e.spatialReference)===null||t===void 0?void 0:t.wkid)===4490&&(this[r(483)].spatialReference.wkid=4326),load_old.bind(this)()},Object.defineProperties(Cesium__namespace[_0x5e32ae(4029)][_0x5e32ae(2392)],{globalAlpha:{set:function(r){this._globalAlpha=r},get:function(){return this[_0x5e32ae(4236)]??1}}});const getValue_old$6=Cesium__namespace.CheckerboardMaterialProperty.prototype[_0x5e32ae(810)];Cesium__namespace[_0x5e32ae(4029)].prototype[_0x5e32ae(810)]=function(r,e){const t={_0x5bacf2:3252,_0x283a94:3725},i=_0x5e32ae;return e=getValue_old$6.bind(this)(r,e),this[i(t._0x5bacf2)]!==1&&(e.lightColor&&(e.lightColor.alpha*=this.globalAlpha),e.darkColor&&(e.darkColor.alpha*=this.globalAlpha),e[i(3905)]&&(e[i(3905)][i(1202)]*=this.globalAlpha),e[i(t._0x283a94)]&&(e.oddColor.alpha*=this[i(t._0x5bacf2)])),e};let _hasInfo=!![],_hasError=!![];function hasInfo(r){_hasInfo=r}function hasWarn(r){_hasInfo=r}function hasError(r){_hasError=r}function logInfo(...r){_hasInfo&&console.log(...r)}function logWarn(...r){console[_0x5e32ae({_0x132c92:922}._0x132c92)](...r)}function logError$1(...r){_hasError&&console.error(...r)}var Log={__proto__:null,hasInfo,hasWarn,hasError,logInfo,logWarn,logError:logError$1};const GraphicType={},GraphicClass={};function hasType(r){return GraphicClass[r]?!![]:![]}function eachGraphicType(r){Object.keys(GraphicClass).forEach((e,t)=>{r&&r.call(this,e,t)})}function isPointType(r){return r?GraphicClass[r]&&GraphicClass[r].isPoint?!![]:![]:![]}function isCombineType(r){return r?GraphicClass[r]&&GraphicClass[r].isCombine?!![]:![]:![]}function register$4(r,e,t){const i=_0x5e32ae;GraphicClass[r]&&logError$1("register Graphic: "+r+"类型已存在",e),GraphicType[r]=r,GraphicClass[r]=e,e[i(3205)]=r,e.prototype[i(3640)]=r,t&&(e.isPoint=!![],e.prototype[i(2810)]=!![])}function getClass$4(r){return GraphicClass[r]?GraphicClass[r]:(logWarn("getClass:未找到该类型对应的处理类",r),null)}function create$4(r,e){const t=getClass$4(r);return t?new t(e):void 0}function fromDraw(r,e){const t={_0x307b2a:3205,_0x29aba6:3205,_0x4c8df5:1860},i=_0x5e32ae;if(!e[i(t._0x307b2a)]){logError$1("fromDraw:需要传入指定绘制的type类型！");return}const s=getClass$4(e[i(t._0x29aba6)]);if(!s||!s.prototype[i(t._0x4c8df5)]){logInfo("对象不支持标绘",s);return}const n=new s(e);return n.startDraw(r),n}var GraphicUtil={__proto__:null,hasType,eachGraphicType,isPointType,isCombineType,register:register$4,getClass:getClass$4,create:create$4,fromDraw},edgeIntersectsEdge=function(e,t,i,s){var n=(s[0]-i[0])*(e[1]-i[1])-(s[1]-i[1])*(e[0]-i[0]),o=(t[0]-e[0])*(e[1]-i[1])-(t[1]-e[1])*(e[0]-i[0]),c=(s[1]-i[1])*(t[0]-e[0])-(s[0]-i[0])*(t[1]-e[1]);if(c!==0){var _=n/c,l=o/c;if(_>=0&&_<=1&&l>=0&&l<=1)return!![]}return![]},coordinatesContainPoint=function(e,t){for(var i=![],s=-1,n=e.length,o=n-1;++s<n;o=s)(e[s][1]<=t[1]&&t[1]<e[o][1]||e[o][1]<=t[1]&&t[1]<e[s][1])&&t[0]<(e[o][0]-e[s][0])*(t[1]-e[s][1])/(e[o][1]-e[s][1])+e[s][0]&&(i=!i);return i},pointsEqual=function(e,t){for(var i=0;i<e.length;i++)if(e[i]!==t[i])return![];return!![]},arrayIntersectsArray=function(e,t){for(var i=0;i<e.length-1;i++)for(var s=0;s<t.length-1;s++)if(edgeIntersectsEdge(e[i],e[i+1],t[s],t[s+1]))return!![];return![]},closeRing=function(e){return!pointsEqual(e[0],e[e.length-1])&&e.push(e[0]),e},ringIsClockwise=function(e){var t=0,i=0,s=e.length,n=e[i],o;for(i;i<s-1;i++)o=e[i+1],t+=(o[0]-n[0])*(o[1]+n[1]),n=o;return t>=0},shallowClone=function(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},coordinatesContainCoordinates=function(e,t){var i=arrayIntersectsArray(e,t),s=coordinatesContainPoint(e,t[0]);return!i&&s?!![]:![]},convertRingsToGeoJSON=function(e){const t={_0x184d10:869,_0x296f24:3402,_0x42ccb8:3402,_0x23183a:3759,_0x1f05c6:2056},i=_0x5e32ae;for(var s=[],n=[],o,c,_,l=0;l<e.length;l++){var h=closeRing(e[l][i(t._0x184d10)](0));if(!(h.length<4))if(ringIsClockwise(h)){var f=[h.slice().reverse()];s.push(f)}else n.push(h[i(t._0x184d10)]().reverse())}for(var m=[];n[i(t._0x296f24)];){_=n.pop();var g=![];for(o=s[i(t._0x42ccb8)]-1;o>=0;o--)if(c=s[o][0],coordinatesContainCoordinates(c,_)){s[o][i(3759)](_),g=!![];break}!g&&m[i(t._0x23183a)](_)}for(;m.length;){_=m.pop();var C=![];for(o=s[i(3402)]-1;o>=0;o--)if(c=s[o][0],arrayIntersectsArray(c,_)){s[o][i(3759)](_),C=!![];break}!C&&s.push([_.reverse()])}return s.length===1?{type:i(t._0x1f05c6),coordinates:s[0]}:{type:i(3854),coordinates:s}},getId=function(e,t){const i={_0x56f5ee:2338,_0x3305be:3717},s=_0x5e32ae;for(var n=t?[t,s(i._0x56f5ee),s(i._0x3305be)]:["OBJECTID","FID"],o=0;o<n.length;o++){var c=n[o];if(c in e&&(typeof e[c]=="string"||typeof e[c]=="number"))return e[c]}throw Error("No valid id attribute found")},arcgisToGeoJSON$1=function r(e,t){const i={_0x45a2c1:1906,_0x9b9ac4:3205,_0xe0fecb:3743,_0x44d2fc:1743,_0x220c65:493,_0x5ddfc2:493,_0xb64cd1:869,_0x275f3d:3183,_0x58b9a7:4104,_0x1494eb:1743,_0x3c0a82:3081,_0xb73a22:2498,_0x39218f:2628},s=_0x5e32ae;var n={};if(e[s(1906)]){n.type="FeatureCollection",n[s(i._0x45a2c1)]=[];for(var o=0;o<e.features.length;o++)n.features[s(3759)](r(e.features[o],t))}if(typeof e.x=="number"&&typeof e.y===s(4104)&&(n[s(i._0x9b9ac4)]=s(i._0xe0fecb),n[s(i._0x44d2fc)]=[e.x,e.y],typeof e.z===s(4104)&&n.coordinates.push(e.z)),e.points&&(n.type="MultiPoint",n[s(1743)]=e.points.slice(0)),e.paths&&(e[s(i._0x220c65)].length===1?(n.type="LineString",n[s(1743)]=e[s(i._0x220c65)][0].slice(0)):(n[s(i._0x9b9ac4)]="MultiLineString",n.coordinates=e[s(i._0x5ddfc2)][s(i._0xb64cd1)](0))),e.rings&&(n=convertRingsToGeoJSON(e.rings.slice(0))),typeof e[s(i._0x275f3d)]=="number"&&typeof e.ymin=="number"&&typeof e.xmax===s(i._0x58b9a7)&&typeof e.ymax=="number"&&(n.type="Polygon",n[s(i._0x1494eb)]=[[[e.xmax,e[s(i._0x3c0a82)]],[e.xmin,e.ymax],[e.xmin,e[s(i._0xb73a22)]],[e[s(i._0x39218f)],e.ymin],[e.xmax,e.ymax]]]),(e.geometry||e.attributes)&&(n[s(3205)]="Feature",n.geometry=e[s(788)]?r(e[s(788)]):null,n.properties=e.attributes?shallowClone(e.attributes):null,e.attributes))try{n.id=getId(e[s(693)],t)}catch{}return JSON.stringify(n.geometry)===JSON.stringify({})&&(n.geometry=null),e.spatialReference&&e.spatialReference.wkid&&e.spatialReference.wkid!==4326&&console.warn("Object converted in non-standard crs - "+JSON.stringify(e.spatialReference)),n},orientRings=function(e){const t={_0x55d996:3402,_0x2caf18:943,_0x3bb5e4:3759},i=_0x5e32ae;var s=[],n=e[i(869)](0),o=closeRing(n.shift().slice(0));if(o[i(t._0x55d996)]>=4){!ringIsClockwise(o)&&o[i(t._0x2caf18)](),s[i(t._0x3bb5e4)](o);for(var c=0;c<n.length;c++){var _=closeRing(n[c].slice(0));_[i(t._0x55d996)]>=4&&(ringIsClockwise(_)&&_.reverse(),s[i(t._0x3bb5e4)](_))}}return s},flattenMultiPolygonRings=function(e){const t=_0x5e32ae;for(var i=[],s=0;s<e.length;s++)for(var n=orientRings(e[s]),o=n.length-1;o>=0;o--){var c=n[o][t(869)](0);i.push(c)}return i},geojsonToArcGIS$1=function r(e,t){const i={_0x156623:3205,_0x4e4ac9:1743,_0x44dca3:869,_0x202120:4126,_0x1d3097:3854,_0x1d61b5:1743,_0xcee14d:3185,_0x21e8d2:788,_0xf96070:552,_0x4f324f:1906},s=_0x5e32ae;t=t||"OBJECTID";var n={wkid:4326},o={},c;switch(e[s(i._0x156623)]){case"Point":o.x=e.coordinates[0],o.y=e.coordinates[1],e.coordinates[2]!=null&&(o.z=e[s(1743)][2]),o.spatialReference=n;break;case s(1385):o.points=e.coordinates.slice(0),e.coordinates[0][2]!=null&&(o[s(3185)]=!![]),o.spatialReference=n;break;case s(1225):o.paths=[e[s(i._0x4e4ac9)].slice(0)],e.coordinates[0][2]!=null&&(o.hasZ=!![]),o.spatialReference=n;break;case s(1345):o.paths=e.coordinates[s(i._0x44dca3)](0),e.coordinates[0][0][2]!=null&&(o.hasZ=!![]),o.spatialReference=n;break;case"Polygon":o[s(i._0x202120)]=orientRings(e.coordinates[s(869)](0)),e.coordinates[0][0][2]!=null&&(o.hasZ=!![]),o[s(2681)]=n;break;case s(i._0x1d3097):o.rings=flattenMultiPolygonRings(e.coordinates.slice(0)),e[s(i._0x1d61b5)][0][0][0][2]!=null&&(o[s(i._0xcee14d)]=!![]),o[s(2681)]=n;break;case"Feature":e.geometry&&(o[s(788)]=r(e[s(i._0x21e8d2)],t)),o.attributes=e.properties?shallowClone(e.properties):{},e.id&&(o[s(693)][t]=e.id);break;case s(i._0xf96070):for(o=[],c=0;c<e[s(i._0x4f324f)][s(3402)];c++)o.push(r(e.features[c],t));break;case"GeometryCollection":for(o=[],c=0;c<e.geometries.length;c++)o.push(r(e.geometries[c],t));break}return o};function globals(r){const e={_0x3648d7:557},t=_0x5e32ae;r("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),r("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),r(t(2693),"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),r[t(e._0x3648d7)]=r["EPSG:4326"],r["EPSG:3785"]=r["EPSG:3857"],r.GOOGLE=r["EPSG:3857"],r["EPSG:900913"]=r[t(2693)],r[t(1114)]=r["EPSG:3857"]}var PJD_3PARAM=1,PJD_7PARAM=2,PJD_GRIDSHIFT=3,PJD_WGS84=4,PJD_NODATUM=5,SRS_WGS84_SEMIMAJOR=6378137,SRS_WGS84_SEMIMINOR=6356752314e-3,SRS_WGS84_ESQUARED=.0066943799901413165,SEC_TO_RAD=484813681109536e-20,HALF_PI=Math.PI/2,SIXTH=.16666666666666666,RA4=.04722222222222222,RA6=.022156084656084655,EPSLN=1e-10,D2R$1=.017453292519943295,R2D=57.29577951308232,FORTPI=Math.PI/4,TWO_PI=Math.PI*2,SPI=3.14159265359,exports$3={};exports$3[_0x5e32ae(2155)]=0,exports$3.lisbon=-9.131906111111,exports$3.paris=2.337229166667,exports$3[_0x5e32ae(844)]=-74.080916666667,exports$3.madrid=-3.687938888889,exports$3.rome=12.452333333333,exports$3[_0x5e32ae(3385)]=7.439583333333,exports$3.jakarta=106.807719444444,exports$3.ferro=-17.666666666667,exports$3.brussels=4.367975,exports$3[_0x5e32ae(2342)]=18.058277777778,exports$3[_0x5e32ae(2230)]=23.7163375,exports$3[_0x5e32ae(3100)]=10.722916666667;var units={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},ignoredChar=/[\s_\-\/\(\)]/g;function match(r,e){const t={_0x379264:3503,_0x30bbf9:4113},i=_0x5e32ae;if(r[e])return r[e];for(var s=Object[i(t._0x379264)](r),n=e.toLowerCase().replace(ignoredChar,""),o=-1,c,_;++o<s.length;)if(c=s[o],_=c[i(t._0x30bbf9)]().replace(ignoredChar,""),_===n)return r[c]}function projStr(r){const e={_0x31405f:557},t={_0x5b0d1a:3988},i={_0x28bcbb:457},s={_0x483648:3737},n={_0x2d709e:678},o={_0x11dfac:1164},c={_0x21376f:4151},_={_0x154210:1996},l=_0x5e32ae;var h={},f=r.split("+")[l(3465)](function(P){return P.trim()}).filter(function(P){return P}).reduce(function(P,w){const M=l;var T=w.split("=");return T[M(3759)](!![]),P[T[0].toLowerCase()]=T[1],P},{}),m,g,C,E={proj:l(2650),datum:"datumCode",rf:function(P){h.rf=parseFloat(P)},lat_0:function(P){const w=l;h[w(_._0x154210)]=P*D2R$1},lat_1:function(P){const w=l;h[w(c._0x21376f)]=P*D2R$1},lat_2:function(P){h.lat2=P*D2R$1},lat_ts:function(P){h.lat_ts=P*D2R$1},lon_0:function(P){h.long0=P*D2R$1},lon_1:function(P){h.long1=P*D2R$1},lon_2:function(P){h.long2=P*D2R$1},alpha:function(P){h.alpha=parseFloat(P)*D2R$1},gamma:function(P){h.rectified_grid_angle=parseFloat(P)},lonc:function(P){const w=l;h[w(o._0x11dfac)]=P*D2R$1},x_0:function(P){h.x0=parseFloat(P)},y_0:function(P){h.y0=parseFloat(P)},k_0:function(P){h.k0=parseFloat(P)},k:function(P){h.k0=parseFloat(P)},a:function(P){h.a=parseFloat(P)},b:function(P){h.b=parseFloat(P)},r_a:function(){h.R_A=!![]},zone:function(P){h.zone=parseInt(P,10)},south:function(){h.utmSouth=!![]},towgs84:function(P){h.datum_params=P.split(",").map(function(w){return parseFloat(w)})},to_meter:function(P){const w=l;h[w(n._0x2d709e)]=parseFloat(P)},units:function(P){const w=l;h[w(2506)]=P;var M=match(units,P);M&&(h.to_meter=M.to_meter)},from_greenwich:function(P){h.from_greenwich=P*D2R$1},pm:function(P){const w=l;var M=match(exports$3,P);h[w(s._0x483648)]=(M||parseFloat(P))*D2R$1},nadgrids:function(P){const w=l;P==="@null"?h[w(i._0x28bcbb)]="none":h.nadgrids=P},axis:function(P){const w=l;var M=w(t._0x5b0d1a);P.length===3&&M[w(2316)](P.substr(0,1))!==-1&&M[w(2316)](P.substr(1,1))!==-1&&M[w(2316)](P.substr(2,1))!==-1&&(h.axis=P)},approx:function(){h.approx=!![]}};for(m in f)g=f[m],m in E?(C=E[m],typeof C=="function"?C(g):h[C]=g):h[m]=g;return typeof h.datumCode===l(1661)&&h.datumCode!==l(e._0x31405f)&&(h[l(457)]=h.datumCode.toLowerCase()),h}var NEUTRAL=1,KEYWORD=2,NUMBER=3,QUOTED=4,AFTERQUOTE=5,ENDED=-1,whitespace=/\s/,latin=/[A-Za-z]/,keyword=/[A-Za-z84_]/,endThings=/[,\]]/,digets=/[\d\.E\-\+]/;function Parser(r){if(typeof r!="string")throw new Error("not a string");this.text=r.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=NEUTRAL}Parser.prototype.readCharicter=function(){const r={_0x285907:3587,_0x47c82d:1260,_0x45474e:3402,_0x26cb68:3587,_0x421da5:686,_0x1053a6:1210},e=_0x5e32ae;var t=this.text[this.place++];if(this[e(686)]!==QUOTED)for(;whitespace.test(t);){if(this[e(r._0x285907)]>=this[e(r._0x47c82d)][e(r._0x45474e)])return;t=this.text[this[e(r._0x26cb68)]++]}switch(this[e(r._0x421da5)]){case NEUTRAL:return this.neutral(t);case KEYWORD:return this[e(1718)](t);case QUOTED:return this.quoted(t);case AFTERQUOTE:return this[e(r._0x1053a6)](t);case NUMBER:return this.number(t);case ENDED:return}},Parser[_0x5e32ae(2392)].afterquote=function(r){const e={_0x15e878:686},t=_0x5e32ae;if(r==='"'){this.word+='"',this[t(e._0x15e878)]=QUOTED;return}if(endThings[t(617)](r)){this[t(4284)]=this.word.trim(),this.afterItem(r);return}throw new Error(`havn't handled "`+r+'" in afterquote yet, index '+this.place)},Parser.prototype.afterItem=function(r){const e={_0x13aeed:861},t=_0x5e32ae;if(r===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=NEUTRAL;return}if(r==="]"){this.level--,this[t(4284)]!==null&&(this[t(e._0x13aeed)][t(3759)](this.word),this[t(4284)]=null),this.state=NEUTRAL,this[t(e._0x13aeed)]=this.stack.pop(),!this[t(861)]&&(this.state=ENDED);return}},Parser.prototype.number=function(r){const e={_0xc801cc:4284,_0x4bb58c:3266},t=_0x5e32ae;if(digets.test(r)){this[t(4284)]+=r;return}if(endThings.test(r)){this[t(e._0xc801cc)]=parseFloat(this.word),this.afterItem(r);return}throw new Error(`havn't handled "`+r+t(e._0x4bb58c)+this.place)},Parser[_0x5e32ae(2392)][_0x5e32ae(2814)]=function(r){if(r==='"'){this.state=AFTERQUOTE;return}this.word+=r},Parser.prototype[_0x5e32ae(1718)]=function(r){const e={_0x4c4f5e:617,_0x37f4ad:3759,_0x22e014:861},t=_0x5e32ae;if(keyword[t(e._0x4c4f5e)](r)){this[t(4284)]+=r;return}if(r==="["){var i=[];i.push(this.word),this[t(1096)]++,this.root===null?this.root=i:this.currentObject[t(e._0x37f4ad)](i),this.stack.push(this.currentObject),this[t(e._0x22e014)]=i,this.state=NEUTRAL;return}if(endThings.test(r)){this.afterItem(r);return}throw new Error(`havn't handled "`+r+'" in keyword yet, index '+this.place)},Parser.prototype[_0x5e32ae(2333)]=function(r){const e=_0x5e32ae;if(latin.test(r)){this.word=r,this[e(686)]=KEYWORD;return}if(r==='"'){this.word="",this.state=QUOTED;return}if(digets.test(r)){this[e(4284)]=r,this.state=NUMBER;return}if(endThings[e(617)](r)){this[e(2885)](r);return}throw new Error(`havn't handled "`+r+'" in neutral yet, index '+this.place)},Parser.prototype.output=function(){const r={_0x316c97:3587,_0xcd0930:3402,_0x28d117:686,_0x38a668:654},e=_0x5e32ae;for(;this[e(r._0x316c97)]<this.text[e(r._0xcd0930)];)this.readCharicter();if(this[e(r._0x28d117)]===ENDED)return this.root;throw new Error('unable to parse string "'+this[e(1260)]+e(r._0x38a668)+this.state)};function parseString(r){var e=new Parser(r);return e.output()}function mapit(r,e,t){Array.isArray(e)&&(t.unshift(e),e=null);var i=e?{}:r,s=t.reduce(function(n,o){return sExpr(o,n),n},i);e&&(r[e]=s)}function sExpr(r,e){const t={_0xeccf42:637,_0x4782db:3939,_0x38724b:1872,_0x1bf3a7:3253},i=_0x5e32ae;if(!Array.isArray(r)){e[r]=!![];return}var s=r.shift();if(s==="PARAMETER"&&(s=r[i(2823)]()),r.length===1){if(Array.isArray(r[0])){e[s]={},sExpr(r[0],e[s]);return}e[s]=r[0];return}if(!r.length){e[s]=!![];return}if(s==="TOWGS84"){e[s]=r;return}if(s==="AXIS"){!(s in e)&&(e[s]=[]),e[s].push(r);return}!Array.isArray(s)&&(e[s]={});var n;switch(s){case"UNIT":case i(1985):case"VERT_DATUM":e[s]={name:r[0].toLowerCase(),convert:r[1]},r[i(3402)]===3&&sExpr(r[2],e[s]);return;case i(1653):case"ELLIPSOID":e[s]={name:r[0],a:r[1],rf:r[2]},r.length===4&&sExpr(r[3],e[s]);return;case i(t._0xeccf42):case"PROJCRS":case i(1090):case"GEOCCS":case"PROJCS":case i(2069):case"GEODCRS":case i(t._0x4782db):case"GEODETICDATUM":case i(t._0x38724b):case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case i(1793):case i(3077):case"ENGCRS":case i(t._0x1bf3a7):case"LOCAL_DATUM":case"DATUM":r[0]=["name",r[0]],mapit(e,s,r);return;default:for(n=-1;++n<r.length;)if(!Array.isArray(r[n]))return sExpr(r,e[s]);return mapit(e,s,r)}}var D2R=.017453292519943295;function rename(r,e){var t=e[0],i=e[1];!(t in r)&&i in r&&(r[t]=r[i],e.length===3&&(r[t]=e[2](r[t])))}function d2r(r){return r*D2R}function cleanWKT(r){const e={_0x49ce58:1090,_0x3e7710:3205,_0x2daaae:758,_0x1295cb:3503,_0x4162d7:1730,_0x1e2861:3944,_0x11494c:3402,_0x26a4a0:3402,_0x27e87f:1647,_0x397c35:3205,_0x50181d:1589,_0x2dd921:3605,_0x7014ca:457,_0x43c572:457,_0x2cbd83:1525,_0x8e3c94:3770,_0x73102e:1589,_0x3d55d4:2316,_0x5913a4:457,_0x49e9ed:457,_0xdb30b:3815,_0x504502:622,_0x126954:3882,_0x561c46:824,_0x26aeb1:1996,_0x515a7d:1075,_0x222fde:3335,_0x193d41:2146,_0x5b52de:3605,_0x1bd442:2500,_0x582a5a:1164,_0x2c8251:480,_0x539096:4151},t=_0x5e32ae;if(r.type===t(e._0x49ce58)?r.projName=t(3969):r[t(e._0x3e7710)]==="LOCAL_CS"?(r.projName="identity",r.local=!![]):typeof r[t(e._0x2daaae)]=="object"?r.projName=Object[t(e._0x1295cb)](r.PROJECTION)[0]:r[t(2650)]=r.PROJECTION,r[t(1730)]){for(var i="",s=0,n=r.AXIS.length;s<n;++s){var o=[r.AXIS[s][0].toLowerCase(),r[t(e._0x4162d7)][s][1].toLowerCase()];o[0].indexOf("north")!==-1||(o[0]==="y"||o[0]===t(448))&&o[1]==="north"?i+="n":o[0].indexOf("south")!==-1||(o[0]==="y"||o[0]===t(448))&&o[1]==="south"?i+="s":o[0].indexOf("east")!==-1||(o[0]==="x"||o[0]==="lon")&&o[1]==="east"?i+="e":(o[0].indexOf("west")!==-1||(o[0]==="x"||o[0]===t(e._0x1e2861))&&o[1]==="west")&&(i+="w")}i[t(e._0x11494c)]===2&&(i+="u"),i[t(e._0x26a4a0)]===3&&(r.axis=i)}r.UNIT&&(r.units=r.UNIT.name[t(4113)](),r[t(2506)]==="metre"&&(r.units="meter"),r[t(e._0x27e87f)].convert&&(r[t(e._0x397c35)]===t(1090)?r.DATUM&&r[t(e._0x50181d)].SPHEROID&&(r.to_meter=r[t(e._0x27e87f)].convert*r.DATUM[t(1653)].a):r.to_meter=r.UNIT[t(3401)]));var c=r[t(e._0x49ce58)];r.type==="GEOGCS"&&(c=r),c&&(c.DATUM?r.datumCode=c.DATUM[t(e._0x2dd921)].toLowerCase():r.datumCode=c.name.toLowerCase(),r.datumCode.slice(0,2)==="d_"&&(r[t(e._0x7014ca)]=r[t(457)].slice(2)),(r.datumCode==="new_zealand_geodetic_datum_1949"||r[t(e._0x43c572)]==="new_zealand_1949")&&(r.datumCode="nzgd49"),(r.datumCode==="wgs_1984"||r.datumCode==="world_geodetic_system_1984")&&(r.PROJECTION==="Mercator_Auxiliary_Sphere"&&(r[t(1887)]=!![]),r[t(e._0x43c572)]=t(431)),r.datumCode.slice(-6)==="_ferro"&&(r.datumCode=r[t(457)][t(869)](0,-6)),r[t(457)].slice(-8)==="_jakarta"&&(r.datumCode=r.datumCode.slice(0,-8)),~r[t(e._0x7014ca)].indexOf("belge")&&(r.datumCode="rnb72"),c.DATUM&&c[t(1589)].SPHEROID&&(r.ellps=c.DATUM.SPHEROID.name.replace("_19","")[t(e._0x2cbd83)](/[Cc]larke\_18/,t(e._0x8e3c94)),r[t(1026)].toLowerCase().slice(0,13)==="international"&&(r.ellps=t(2514)),r.a=c.DATUM.SPHEROID.a,r.rf=parseFloat(c.DATUM.SPHEROID.rf,10)),c.DATUM&&c[t(e._0x73102e)].TOWGS84&&(r[t(1391)]=c[t(1589)].TOWGS84),~r.datumCode[t(e._0x3d55d4)](t(1565))&&(r.datumCode="osgb36"),~r.datumCode.indexOf("osni_1952")&&(r.datumCode="osni52"),(~r.datumCode.indexOf(t(1215))||~r[t(e._0x5913a4)][t(e._0x3d55d4)]("geodetic_datum_of_1965"))&&(r.datumCode="ire65"),r.datumCode===t(2539)&&(r.datumCode="ch1903"),~r[t(e._0x49e9ed)].indexOf(t(2610))&&(r.datumCode="isr93")),r.b&&!isFinite(r.b)&&(r.b=r.a);function _(f){var m=r.to_meter||1;return f*m}var l=function(f){return rename(r,f)},h=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],[t(e._0xdb30b),t(3746)],["standard_parallel_2",t(2047)],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian",t(1625)],["central_meridian","Longitude of natural origin"],[t(1053),t(e._0x504502)],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin",t(3419)],["latitude_of_origin",t(3638)],["latitude_of_origin",t(959)],["scale_factor",t(e._0x126954)],["k0",t(e._0x561c46)],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],[t(e._0x26aeb1),t(e._0x515a7d),d2r],["longitude_of_center",t(e._0x222fde)],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",d2r],["x0","false_easting",_],["y0",t(e._0x193d41),_],["long0","central_meridian",d2r],["lat0","latitude_of_origin",d2r],["lat0","standard_parallel_1",d2r],[t(4151),"standard_parallel_1",d2r],["lat2","standard_parallel_2",d2r],["azimuth",t(2447)],["alpha",t(2687),d2r],[t(2858),t(e._0x5b52de)]];h[t(e._0x1bd442)](l),!r.long0&&r[t(e._0x582a5a)]&&(r.projName==="Albers_Conic_Equal_Area"||r.projName==="Lambert_Azimuthal_Equal_Area")&&(r.long0=r.longc),!r.lat_ts&&r.lat1&&(r.projName==="Stereographic_South_Pole"||r.projName==="Polar Stereographic (variant B)")&&(r.lat0=d2r(r.lat1>0?90:-90),r[t(e._0x2c8251)]=r[t(e._0x539096)])}function wkt(r){const e=_0x5e32ae;var t=parseString(r),i=t.shift(),s=t.shift();t.unshift(["name",s]),t[e(3477)](["type",i]);var n={};return sExpr(t,n),cleanWKT(n),n}function defs(r){const e={_0x3f3d3f:1661,_0x4fe4ca:2066,_0x4ca170:1309},t=_0x5e32ae;var i=this;if(arguments[t(3402)]===2){var s=arguments[1];typeof s===t(e._0x3f3d3f)?s.charAt(0)==="+"?defs[r]=projStr(arguments[1]):defs[r]=wkt(arguments[1]):defs[r]=s}else if(arguments.length===1){if(Array.isArray(r))return r.map(function(n){Array[t(3845)](n)?defs.apply(i,n):defs(n)});if(typeof r===t(1661)){if(r in defs)return defs[r]}else"EPSG"in r?defs[t(e._0x4fe4ca)+r.EPSG]=r:t(600)in r?defs["ESRI:"+r[t(600)]]=r:"IAU2000"in r?defs[t(e._0x4ca170)+r.IAU2000]=r:console.log(r);return}}globals(defs);function testObj(r){return typeof r===_0x5e32ae(1661)}function testDef(r){return r in defs}var codeWords=["PROJECTEDCRS","PROJCRS",_0x5e32ae(1090),"GEOCCS","PROJCS","LOCAL_CS","GEODCRS",_0x5e32ae(3939),"GEODETICDATUM",_0x5e32ae(2521),"ENGINEERINGCRS"];function testWKT(r){return codeWords[_0x5e32ae(4177)](function(t){return r.indexOf(t)>-1})}var codes=[_0x5e32ae(3198),"900913","3785","102113"];function checkMercator(r){const e=_0x5e32ae;var t=match(r,"authority");if(t){var i=match(t,e(2434));return i&&codes[e(2316)](i)>-1}}function checkProjStr(r){var e=match(r,"extension");if(e)return match(e,"proj4")}function testProj(r){return r[0]==="+"}function parse(r){if(testObj(r)){if(testDef(r))return defs[r];if(testWKT(r)){var e=wkt(r);if(checkMercator(e))return defs["EPSG:3857"];var t=checkProjStr(e);return t?projStr(t):e}if(testProj(r))return projStr(r)}else return r}function extend(r,e){r=r||{};var t,i;if(!e)return r;for(i in e)t=e[i],t!==void 0&&(r[i]=t);return r}function msfnz(r,e,t){const i=_0x5e32ae;var s=r*e;return t/Math[i(928)](1-s*s)}function sign(r){return r<0?-1:1}function adjust_lon(r){return Math[_0x5e32ae({_0x1d2ae5:3926}._0x1d2ae5)](r)<=SPI?r:r-sign(r)*TWO_PI}function tsfnz(r,e,t){var i=r*t,s=.5*r;return i=Math.pow((1-i)/(1+i),s),Math.tan(.5*(HALF_PI-e))/i}function phi2z(r,e){const t=_0x5e32ae;for(var i=.5*r,s,n,o=HALF_PI-2*Math[t(3551)](e),c=0;c<=15;c++)if(s=r*Math.sin(o),n=HALF_PI-2*Math.atan(e*Math[t(3484)]((1-s)/(1+s),i))-o,o+=n,Math.abs(n)<=1e-10)return o;return-9999}function init$v(){const r={_0xcb45ba:480},e=_0x5e32ae;var t=this.b/this.a;this.es=1-t*t,!("x0"in this)&&(this.x0=0),!("y0"in this)&&(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=msfnz(this.e,Math.sin(this[e(r._0xcb45ba)]),Math.cos(this[e(480)])):!this.k0&&(this.k?this.k0=this.k:this.k0=1)}function forward$u(r){const e=_0x5e32ae;var t=r.x,i=r.y;if(i*R2D>90&&i*R2D<-90&&t*R2D>180&&t*R2D<-180)return null;var s,n;if(Math.abs(Math.abs(i)-HALF_PI)<=EPSLN)return null;if(this.sphere)s=this.x0+this.a*this.k0*adjust_lon(t-this[e(2957)]),n=this.y0+this.a*this.k0*Math.log(Math.tan(FORTPI+.5*i));else{var o=Math.sin(i),c=tsfnz(this.e,i,o);s=this.x0+this.a*this.k0*adjust_lon(t-this[e(2957)]),n=this.y0-this.a*this.k0*Math[e(1982)](c)}return r.x=s,r.y=n,r}function inverse$u(r){const e=_0x5e32ae;var t=r.x-this.x0,i=r.y-this.y0,s,n;if(this.sphere)n=HALF_PI-2*Math.atan(Math[e(2023)](-i/(this.a*this.k0)));else{var o=Math[e(2023)](-i/(this.a*this.k0));if(n=phi2z(this.e,o),n===-9999)return null}return s=adjust_lon(this.long0+t/(this.a*this.k0)),r.x=s,r.y=n,r}var names$w=[_0x5e32ae(2444),"Popular Visualisation Pseudo Mercator",_0x5e32ae(2758),"Mercator_Auxiliary_Sphere","merc"],merc={init:init$v,forward:forward$u,inverse:inverse$u,names:names$w};function init$u(){}function identity(r){return r}var names$v=["longlat","identity"],longlat={init:init$u,forward:identity,inverse:identity,names:names$v},projs=[merc,longlat],names$u={},projStore=[];function add$1(r,e){const t={_0xd7992a:2500},i=_0x5e32ae;var s=projStore.length;return r.names?(projStore[s]=r,r.names[i(t._0xd7992a)](function(n){const o=i;names$u[n[o(4113)]()]=s}),this):(console.log(e),!![])}function get$1(r){const e={_0x1c0f1b:4113},t=_0x5e32ae;if(!r)return![];var i=r[t(e._0x1c0f1b)]();if(typeof names$u[i]<"u"&&projStore[names$u[i]])return projStore[names$u[i]]}function start(){projs[_0x5e32ae(2500)](add$1)}var projections={start,add:add$1,get:get$1},exports$2={};exports$2.MERIT={a:6378137,rf:298.257,ellipseName:_0x5e32ae(592)},exports$2.SGS85={a:6378136,rf:298.257,ellipseName:_0x5e32ae(433)},exports$2[_0x5e32ae(985)]={a:6378137,rf:298.257222101,ellipseName:_0x5e32ae(2144)},exports$2[_0x5e32ae(3184)]={a:6378140,rf:298.257,ellipseName:"IAU 1976"},exports$2.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},exports$2.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},exports$2.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},exports$2.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},exports$2.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},exports$2[_0x5e32ae(1556)]={a:6378160,rf:298.25,ellipseName:_0x5e32ae(2519)},exports$2.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},exports$2[_0x5e32ae(1158)]={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},exports$2.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:_0x5e32ae(3856)},exports$2.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},exports$2.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:_0x5e32ae(2958)},exports$2.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},exports$2.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},exports$2.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},exports$2.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},exports$2.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},exports$2.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},exports$2.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:_0x5e32ae(3837)},exports$2.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},exports$2.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:_0x5e32ae(727)},exports$2.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},exports$2.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},exports$2.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},exports$2.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},exports$2.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},exports$2[_0x5e32ae(4015)]={a:6378270,rf:297,ellipseName:"Hough"},exports$2.intl={a:6378388,rf:297,ellipseName:_0x5e32ae(3470)},exports$2[_0x5e32ae(1142)]={a:6378163,rf:298.24,ellipseName:_0x5e32ae(4016)},exports$2.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},exports$2.mprts={a:6397300,rf:191,ellipseName:_0x5e32ae(3341)},exports$2.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},exports$2.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},exports$2.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},exports$2.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},exports$2.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},exports$2.WGS60={a:6378165,rf:298.3,ellipseName:_0x5e32ae(4077)},exports$2.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},exports$2[_0x5e32ae(1171)]={a:6378135,rf:298.26,ellipseName:"WGS 72"};var WGS84=exports$2.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};exports$2[_0x5e32ae(1887)]={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function eccentricity(r,e,t,i){var s=r*r,n=e*e,o=(s-n)/s,c=0;i?(r*=1-o*(SIXTH+o*(RA4+o*RA6)),s=r*r,o=0):c=Math.sqrt(o);var _=(s-n)/n;return{es:o,e:c,ep2:_}}function sphere(r,e,t,i,s){if(!r){var n=match(exports$2,i);!n&&(n=WGS84),r=n.a,e=n.b,t=n.rf}return t&&!e&&(e=(1-1/t)*r),(t===0||Math.abs(r-e)<EPSLN)&&(s=!![],e=r),{a:r,b:e,rf:t,sphere:s}}var exports$1={};exports$1.wgs84={towgs84:_0x5e32ae(2131),ellipse:"WGS84",datumName:_0x5e32ae(557)},exports$1.ch1903={towgs84:"674.374,15.056,405.346",ellipse:_0x5e32ae(1158),datumName:_0x5e32ae(3461)},exports$1.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:_0x5e32ae(985),datumName:"Greek_Geodetic_Reference_System_1987"},exports$1[_0x5e32ae(3319)]={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},exports$1.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:_0x5e32ae(2093)},exports$1.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},exports$1.carthage={towgs84:"-263.0,6.0,431.0",ellipse:_0x5e32ae(3209),datumName:"Carthage 1934 Tunisia"},exports$1.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:_0x5e32ae(1158),datumName:"Hermannskogel"},exports$1.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},exports$1.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},exports$1.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},exports$1.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:_0x5e32ae(2514),datumName:"New Zealand Geodetic Datum 1949"},exports$1[_0x5e32ae(3374)]={towgs84:_0x5e32ae(1148),ellipse:"airy",datumName:_0x5e32ae(1501)},exports$1[_0x5e32ae(3429)]={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},exports$1.beduaram={towgs84:"-106,-87,188",ellipse:_0x5e32ae(2876),datumName:_0x5e32ae(3955)},exports$1[_0x5e32ae(3340)]={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},exports$1.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function datum(r,e,t,i,s,n,o){const c={_0x1b2282:2433,_0x2a6080:3402,_0x1d7b47:1391},_=_0x5e32ae;var l={};return r===void 0||r==="none"?l[_(c._0x1b2282)]=PJD_NODATUM:l.datum_type=PJD_WGS84,e&&(l.datum_params=e.map(parseFloat),(l.datum_params[0]!==0||l[_(1391)][1]!==0||l[_(1391)][2]!==0)&&(l[_(2433)]=PJD_3PARAM),l[_(1391)][_(c._0x2a6080)]>3&&(l.datum_params[3]!==0||l[_(c._0x1d7b47)][4]!==0||l[_(1391)][5]!==0||l[_(1391)][6]!==0)&&(l.datum_type=PJD_7PARAM,l.datum_params[3]*=SEC_TO_RAD,l.datum_params[4]*=SEC_TO_RAD,l[_(1391)][5]*=SEC_TO_RAD,l[_(c._0x1d7b47)][6]=l.datum_params[6]/1e6+1)),o&&(l.datum_type=PJD_GRIDSHIFT,l.grids=o),l.a=t,l.b=i,l.es=s,l.ep2=n,l}var loadedNadgrids={};function nadgrid(r,e){const t=_0x5e32ae;var i=new DataView(e),s=detectLittleEndian(i),n=readHeader(i,s);n.nSubgrids>1&&console[t(1982)]("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var o=readSubgrids(i,n,s),c={header:n,subgrids:o};return loadedNadgrids[r]=c,c}function getNadgrids(r){const e=_0x5e32ae;if(r===void 0)return null;var t=r[e(439)](",");return t.map(parseNadgridString)}function parseNadgridString(r){if(r.length===0)return null;var e=r[0]==="@";return e&&(r=r.slice(1)),r==="null"?{name:"null",mandatory:!e,grid:null,isNull:!![]}:{name:r,mandatory:!e,grid:loadedNadgrids[r]||null,isNull:![]}}function secondsToRadians(r){return r/3600*Math.PI/180}function detectLittleEndian(r){const e=_0x5e32ae;var t=r.getInt32(8,![]);return t===11?![]:(t=r.getInt32(8,!![]),t!==11&&console.warn(e(3306)),!![])}function readHeader(r,e){const t={_0x2eacb1:2094},i=_0x5e32ae;return{nFields:r[i(3046)](8,e),nSubgridFields:r.getInt32(24,e),nSubgrids:r.getInt32(40,e),shiftType:decodeString(r,56,56+8).trim(),fromSemiMajorAxis:r.getFloat64(120,e),fromSemiMinorAxis:r.getFloat64(136,e),toSemiMajorAxis:r[i(t._0x2eacb1)](152,e),toSemiMinorAxis:r[i(2094)](168,e)}}function decodeString(r,e,t){const i={_0x94e8dc:2985},s=_0x5e32ae;return String.fromCharCode[s(i._0x94e8dc)](null,new Uint8Array(r[s(862)].slice(e,t)))}function readSubgrids(r,e,t){const i={_0x108b0d:3238,_0x43bdc3:1331,_0x4d94e8:3759},s=_0x5e32ae;for(var n=176,o=[],c=0;c<e.nSubgrids;c++){var _=readGridHeader(r,n,t),l=readGridNodes(r,n,_,t),h=Math.round(1+(_.upperLongitude-_[s(i._0x108b0d)])/_.longitudeInterval),f=Math[s(i._0x43bdc3)](1+(_.upperLatitude-_.lowerLatitude)/_.latitudeInterval);o[s(i._0x4d94e8)]({ll:[secondsToRadians(_[s(3238)]),secondsToRadians(_.lowerLatitude)],del:[secondsToRadians(_.longitudeInterval),secondsToRadians(_.latitudeInterval)],lim:[h,f],count:_.gridNodeCount,cvs:mapNodes(l)})}return o}function mapNodes(r){return r.map(function(e){return[secondsToRadians(e[_0x5210(3409)]),secondsToRadians(e.latitudeShift)]})}function readGridHeader(r,e,t){const i={_0x5e09b4:2094},s=_0x5e32ae;return{name:decodeString(r,e+8,e+16)[s(2529)](),parent:decodeString(r,e+24,e+24+8).trim(),lowerLatitude:r[s(i._0x5e09b4)](e+72,t),upperLatitude:r.getFloat64(e+88,t),lowerLongitude:r.getFloat64(e+104,t),upperLongitude:r.getFloat64(e+120,t),latitudeInterval:r.getFloat64(e+136,t),longitudeInterval:r.getFloat64(e+152,t),gridNodeCount:r.getInt32(e+168,t)}}function readGridNodes(r,e,t,i){const s={_0x827cf3:2937},n=_0x5e32ae;for(var o=e+176,c=16,_=[],l=0;l<t.gridNodeCount;l++){var h={latitudeShift:r[n(s._0x827cf3)](o+l*c,i),longitudeShift:r.getFloat32(o+l*c+4,i),latitudeAccuracy:r.getFloat32(o+l*c+8,i),longitudeAccuracy:r.getFloat32(o+l*c+12,i)};_.push(h)}return _}function Projection(r,e){const t={_0x2ed4b6:1391,_0x58c7b4:2782,_0x4f5820:1026,_0x1b2f72:4151,_0x5d1467:1996,_0x1d5d62:1391,_0x139538:4278,_0x4877c0:3646},i=_0x5e32ae;if(!(this instanceof Projection))return new Projection(r);e=e||function(f){if(f)throw f};var s=parse(r);if(typeof s!="object"){e(r);return}var n=Projection.projections.get(s.projName);if(!n){e(r);return}if(s.datumCode&&s.datumCode!=="none"){var o=match(exports$1,s.datumCode);o&&(s[i(t._0x2ed4b6)]=s.datum_params||(o.towgs84?o.towgs84.split(","):null),s.ellps=o[i(t._0x58c7b4)],s.datumName=o.datumName?o.datumName:s[i(457)])}s.k0=s.k0||1,s.axis=s.axis||"enu",s.ellps=s[i(t._0x4f5820)]||"wgs84",s.lat1=s[i(t._0x1b2f72)]||s[i(t._0x5d1467)];var c=sphere(s.a,s.b,s.rf,s[i(1026)],s[i(1887)]),_=eccentricity(c.a,c.b,c.rf,s.R_A),l=getNadgrids(s.nadgrids),h=s.datum||datum(s.datumCode,s[i(t._0x1d5d62)],c.a,c.b,_.es,_.ep2,l);extend(this,s),extend(this,n),this.a=c.a,this.b=c.b,this.rf=c.rf,this.sphere=c.sphere,this.es=_.es,this.e=_.e,this.ep2=_[i(t._0x139538)],this[i(t._0x4877c0)]=h,this.init(),e(null,this)}Projection.projections=projections,Projection[_0x5e32ae(1894)].start();function compareDatums(r,e){const t={_0x329be6:1391,_0x4e74e:1391,_0x522d6c:1391},i=_0x5e32ae;return r.datum_type!==e.datum_type?![]:r.a!==e.a||Math.abs(r.es-e.es)>5e-11?![]:r[i(2433)]===PJD_3PARAM?r.datum_params[0]===e[i(1391)][0]&&r[i(t._0x329be6)][1]===e.datum_params[1]&&r.datum_params[2]===e.datum_params[2]:r.datum_type===PJD_7PARAM?r.datum_params[0]===e.datum_params[0]&&r[i(t._0x329be6)][1]===e.datum_params[1]&&r.datum_params[2]===e.datum_params[2]&&r.datum_params[3]===e.datum_params[3]&&r.datum_params[4]===e[i(t._0x329be6)][4]&&r[i(t._0x4e74e)][5]===e[i(t._0x522d6c)][5]&&r.datum_params[6]===e.datum_params[6]:!![]}function geodeticToGeocentric(r,e,t){var i=r.x,s=r.y,n=r.z?r.z:0,o,c,_,l;if(s<-HALF_PI&&s>-1.001*HALF_PI)s=-HALF_PI;else if(s>HALF_PI&&s<1.001*HALF_PI)s=HALF_PI;else{if(s<-HALF_PI)return{x:-1/0,y:-1/0,z:r.z};if(s>HALF_PI)return{x:1/0,y:1/0,z:r.z}}return i>Math.PI&&(i-=2*Math.PI),c=Math.sin(s),l=Math.cos(s),_=c*c,o=t/Math.sqrt(1-e*_),{x:(o+n)*l*Math.cos(i),y:(o+n)*l*Math.sin(i),z:(o*(1-e)+n)*c}}function geocentricToGeodetic(r,e,t,i){const s={_0x139b80:3551},n=_0x5e32ae;var o=1e-12,c=o*o,_=30,l,h,f,m,g,C,E,P,w,M,T,L,R,D=r.x,N=r.y,k=r.z?r.z:0,B,$,H;if(l=Math.sqrt(D*D+N*N),h=Math.sqrt(D*D+N*N+k*k),l/t<o){if(B=0,h/t<o)return $=HALF_PI,H=-i,{x:r.x,y:r.y,z:r.z}}else B=Math.atan2(N,D);f=k/h,m=l/h,g=1/Math[n(928)](1-e*(2-e)*m*m),P=m*(1-e)*g,w=f*g,R=0;do R++,E=t/Math[n(928)](1-e*w*w),H=l*P+k*w-E*(1-e*w*w),C=e*E/(E+H),g=1/Math.sqrt(1-C*(2-C)*m*m),M=m*(1-C)*g,T=f*g,L=T*P-M*w,P=M,w=T;while(L*L>c&&R<_);return $=Math[n(s._0x139b80)](T/Math.abs(M)),{x:B,y:$,z:H}}function geocentricToWgs84(r,e,t){if(e===PJD_3PARAM)return{x:r.x+t[0],y:r.y+t[1],z:r.z+t[2]};if(e===PJD_7PARAM){var i=t[0],s=t[1],n=t[2],o=t[3],c=t[4],_=t[5],l=t[6];return{x:l*(r.x-_*r.y+c*r.z)+i,y:l*(_*r.x+r.y-o*r.z)+s,z:l*(-c*r.x+o*r.y+r.z)+n}}}function geocentricFromWgs84(r,e,t){if(e===PJD_3PARAM)return{x:r.x-t[0],y:r.y-t[1],z:r.z-t[2]};if(e===PJD_7PARAM){var i=t[0],s=t[1],n=t[2],o=t[3],c=t[4],_=t[5],l=t[6],h=(r.x-i)/l,f=(r.y-s)/l,m=(r.z-n)/l;return{x:h+_*f-c*m,y:-_*h+f+o*m,z:c*h-o*f+m}}}function checkParams(r){return r===PJD_3PARAM||r===PJD_7PARAM}function datum_transform(r,e,t){const i={_0x50134b:2433,_0x197601:1391,_0x2621cd:1391},s=_0x5e32ae;if(compareDatums(r,e)||r.datum_type===PJD_NODATUM||e.datum_type===PJD_NODATUM)return t;var n=r.a,o=r.es;if(r.datum_type===PJD_GRIDSHIFT){var c=applyGridShift(r,![],t);if(c!==0)return;n=SRS_WGS84_SEMIMAJOR,o=SRS_WGS84_ESQUARED}var _=e.a,l=e.b,h=e.es;if(e[s(i._0x50134b)]===PJD_GRIDSHIFT&&(_=SRS_WGS84_SEMIMAJOR,l=SRS_WGS84_SEMIMINOR,h=SRS_WGS84_ESQUARED),o===h&&n===_&&!checkParams(r.datum_type)&&!checkParams(e.datum_type))return t;if(t=geodeticToGeocentric(t,o,n),checkParams(r.datum_type)&&(t=geocentricToWgs84(t,r.datum_type,r[s(i._0x197601)])),checkParams(e.datum_type)&&(t=geocentricFromWgs84(t,e[s(2433)],e[s(i._0x2621cd)])),t=geocentricToGeodetic(t,h,_,l),e[s(2433)]===PJD_GRIDSHIFT){var f=applyGridShift(e,!![],t);if(f!==0)return}return t}function applyGridShift(r,e,t){const i={_0x2dc523:3402,_0x52b7f0:1062,_0x4ed8bf:3605,_0x39f643:3926,_0x38b955:2991},s=_0x5e32ae;if(r.grids===null||r.grids[s(i._0x2dc523)]===0)return console.log("Grid shift grids not found"),-1;for(var n={x:-t.x,y:t.y},o={x:Number[s(2139)],y:Number.NaN},c=[],_=0;_<r[s(i._0x52b7f0)].length;_++){var l=r.grids[_];if(c.push(l.name),l.isNull){o=n;break}if(l.grid===null){if(l.mandatory)return console.log("Unable to find mandatory grid '"+l[s(i._0x4ed8bf)]+"'"),-1;continue}var h=l[s(447)].subgrids[0],f=(Math.abs(h.del[1])+Math[s(i._0x39f643)](h.del[0]))/1e4,m=h.ll[0]-f,g=h.ll[1]-f,C=h.ll[0]+(h[s(1974)][0]-1)*h.del[0]+f,E=h.ll[1]+(h[s(1974)][1]-1)*h.del[1]+f;if(!(g>n.y||m>n.x||E<n.y||C<n.x)&&(o=applySubgridShift(n,e,h),!isNaN(o.x)))break}return isNaN(o.x)?(console.log(s(i._0x38b955)+-n.x*R2D+" "+n.y*R2D+" tried: '"+c+"'"),-1):(t.x=-o.x,t.y=o.y,0)}function applySubgridShift(r,e,t){const i={_0x2fe37d:3543},s=_0x5e32ae;var n={x:Number.NaN,y:Number[s(2139)]};if(isNaN(r.x))return n;var o={x:r.x,y:r.y};o.x-=t.ll[0],o.y-=t.ll[1],o.x=adjust_lon(o.x-Math.PI)+Math.PI;var c=nadInterpolate(o,t);if(e){if(isNaN(c.x))return n;c.x=o.x-c.x,c.y=o.y-c.y;var _=9,l=1e-12,h,f;do{if(f=nadInterpolate(c,t),isNaN(f.x)){console[s(1982)]("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}h={x:o.x-(f.x+c.x),y:o.y-(f.y+c.y)},c.x+=h.x,c.y+=h.y}while(_--&&Math.abs(h.x)>l&&Math.abs(h.y)>l);if(_<0)return console[s(1982)](s(i._0x2fe37d)),n;n.x=adjust_lon(c.x+t.ll[0]),n.y=c.y+t.ll[1]}else!isNaN(c.x)&&(n.x=r.x+c.x,n.y=r.y+c.y);return n}function nadInterpolate(r,e){const t={_0x36ac7f:1476,_0x5a38eb:1382},i=_0x5e32ae;var s={x:r.x/e[i(1476)][0],y:r.y/e[i(t._0x36ac7f)][1]},n={x:Math[i(t._0x5a38eb)](s.x),y:Math.floor(s.y)},o={x:s.x-1*n.x,y:s.y-1*n.y},c={x:Number.NaN,y:Number[i(2139)]},_;if(n.x<0||n.x>=e.lim[0]||n.y<0||n.y>=e.lim[1])return c;_=n.y*e.lim[0]+n.x;var l={x:e.cvs[_][0],y:e.cvs[_][1]};_++;var h={x:e.cvs[_][0],y:e.cvs[_][1]};_+=e.lim[0];var f={x:e.cvs[_][0],y:e[i(3172)][_][1]};_--;var m={x:e.cvs[_][0],y:e.cvs[_][1]},g=o.x*o.y,C=o.x*(1-o.y),E=(1-o.x)*(1-o.y),P=(1-o.x)*o.y;return c.x=E*l.x+C*h.x+P*m.x+g*f.x,c.y=E*l.y+C*h.y+P*m.y+g*f.y,c}function adjust_axis(r,e,t){const i={_0x13dfc0:1372},s=_0x5e32ae;var n=t.x,o=t.y,c=t.z||0,_,l,h,f={};for(h=0;h<3;h++)if(!(e&&h===2&&t.z===void 0))switch(h===0?(_=n,"ew".indexOf(r.axis[h])!==-1?l="x":l="y"):h===1?(_=o,"ns".indexOf(r[s(1372)][h])!==-1?l="y":l="x"):(_=c,l="z"),r[s(i._0x13dfc0)][h]){case"e":f[l]=_;break;case"w":f[l]=-_;break;case"n":f[l]=_;break;case"s":f[l]=-_;break;case"u":t[l]!==void 0&&(f.z=_);break;case"d":t[l]!==void 0&&(f.z=-_);break;default:return null}return f}function common(r){const e=_0x5e32ae;var t={x:r[0],y:r[1]};return r[e(3402)]>2&&(t.z=r[2]),r.length>3&&(t.m=r[3]),t}function checkSanity(r){checkCoord(r.x),checkCoord(r.y)}function checkCoord(r){const e=_0x5e32ae;if(typeof Number.isFinite===e(1324)){if(Number.isFinite(r))return;throw new TypeError("coordinates must be finite numbers")}if(typeof r!="number"||r!==r||!isFinite(r))throw new TypeError("coordinates must be finite numbers")}function checkNotWGS(r,e){const t={_0x2964ef:3646},i=_0x5e32ae;return(r[i(t._0x2964ef)][i(2433)]===PJD_3PARAM||r.datum.datum_type===PJD_7PARAM||r.datum.datum_type===PJD_GRIDSHIFT)&&e[i(457)]!=="WGS84"||(e.datum[i(2433)]===PJD_3PARAM||e.datum.datum_type===PJD_7PARAM||e.datum.datum_type===PJD_GRIDSHIFT)&&r.datumCode!==i(557)}function transform(r,e,t,i){const s={_0x25afdb:2650,_0x56f0a5:678,_0x1a0979:3737,_0x2a2d32:678},n=_0x5e32ae;var o;Array[n(3845)](t)?t=common(t):t={x:t.x,y:t.y,z:t.z,m:t.m};var c=t.z!==void 0;if(checkSanity(t),r.datum&&e[n(3646)]&&checkNotWGS(r,e)&&(o=new Projection("WGS84"),t=transform(r,o,t,i),r=o),i&&r.axis!=="enu"&&(t=adjust_axis(r,![],t)),r[n(s._0x25afdb)]===n(3969))t={x:t.x*D2R$1,y:t.y*D2R$1,z:t.z||0};else if(r[n(s._0x56f0a5)]&&(t={x:t.x*r.to_meter,y:t.y*r.to_meter,z:t.z||0}),t=r.inverse(t),!t)return;if(r.from_greenwich&&(t.x+=r.from_greenwich),t=datum_transform(r.datum,e.datum,t),!!t)return e.from_greenwich&&(t={x:t.x-e[n(s._0x1a0979)],y:t.y,z:t.z||0}),e.projName==="longlat"?t={x:t.x*R2D,y:t.y*R2D,z:t.z||0}:(t=e.forward(t),e.to_meter&&(t={x:t.x/e[n(s._0x2a2d32)],y:t.y/e[n(s._0x2a2d32)],z:t.z||0})),i&&e.axis!=="enu"?adjust_axis(e,!![],t):(!c&&delete t.z,t)}var wgs84=Projection("WGS84");function transformer(r,e,t,i){const s={_0x552e6a:3139,_0x899e23:2889},n={_0x5e29ba:3605},o=_0x5e32ae;var c,_,l;return Array.isArray(t)?(c=transform(r,e,t,i)||{x:NaN,y:NaN},t.length>2?typeof r.name<"u"&&r[o(3605)]===o(s._0x552e6a)||typeof e.name<"u"&&e.name==="geocent"?typeof c.z===o(4104)?[c.x,c.y,c.z][o(3611)](t[o(s._0x899e23)](3)):[c.x,c.y,t[2]][o(3611)](t.splice(3)):[c.x,c.y][o(3611)](t.splice(2)):[c.x,c.y]):(_=transform(r,e,t,i),l=Object.keys(t),l.length===2||l.forEach(function(h){const f=o;if(typeof r[f(n._0x5e29ba)]!==f(1781)&&r[f(3605)]===f(3139)||typeof e.name<"u"&&e.name==="geocent"){if(h==="x"||h==="y"||h==="z")return}else if(h==="x"||h==="y")return;_[h]=t[h]}),_)}function checkProj(r){return r instanceof Projection?r:r.oProj?r.oProj:Projection(r)}function proj4(r,e,t){const i=_0x5e32ae;r=checkProj(r);var s=![],n;return typeof e>"u"?(e=r,r=wgs84,s=!![]):(typeof e.x!==i(1781)||Array.isArray(e))&&(t=e,e=r,r=wgs84,s=!![]),e=checkProj(e),t?transformer(r,e,t):(n={forward:function(o,c){return transformer(r,e,o,c)},inverse:function(o,c){return transformer(e,r,o,c)}},s&&(n.oProj=e),n)}var NUM_100K_SETS=6,SET_ORIGIN_COLUMN_LETTERS="AJSAJS",SET_ORIGIN_ROW_LETTERS="AFAFAF",A=65,I=73,O=79,V=86,Z=90,mgrs={forward:forward$t,inverse:inverse$t,toPoint};function forward$t(r,e){return e=e||5,encode$1(LLtoUTM({lat:r[1],lon:r[0]}),e)}function inverse$t(r){const e={_0x4933fb:1895,_0x3e2f1d:448},t=_0x5e32ae;var i=UTMtoLL(decode(r[t(e._0x4933fb)]()));return i[t(e._0x3e2f1d)]&&i.lon?[i.lon,i.lat,i.lon,i.lat]:[i.left,i.bottom,i.right,i.top]}function toPoint(r){const e={_0x2440c4:3944,_0x324765:3944,_0x345092:3975},t=_0x5e32ae;var i=UTMtoLL(decode(r.toUpperCase()));return i.lat&&i[t(e._0x2440c4)]?[i[t(e._0x324765)],i.lat]:[(i.left+i.right)/2,(i[t(1194)]+i[t(e._0x345092)])/2]}function degToRad(r){return r*(Math.PI/180)}function radToDeg(r){return 180*(r/Math.PI)}function LLtoUTM(r){const e={_0xba20b6:442,_0x186b0d:442},t=_0x5e32ae;var i=r.lat,s=r.lon,n=6378137,o=.00669438,c=.9996,_,l,h,f,m,g,C,E=degToRad(i),P=degToRad(s),w,M;M=Math[t(1382)]((s+180)/6)+1,s===180&&(M=60),i>=56&&i<64&&s>=3&&s<12&&(M=32),i>=72&&i<84&&(s>=0&&s<9?M=31:s>=9&&s<21?M=33:s>=21&&s<33?M=35:s>=33&&s<42&&(M=37)),_=(M-1)*6-180+3,w=degToRad(_),l=o/(1-o),h=n/Math.sqrt(1-o*Math[t(442)](E)*Math[t(e._0xba20b6)](E)),f=Math.tan(E)*Math[t(597)](E),m=l*Math.cos(E)*Math.cos(E),g=Math[t(1784)](E)*(P-w),C=n*((1-o/4-3*o*o/64-5*o*o*o/256)*E-(3*o/8+3*o*o/32+45*o*o*o/1024)*Math[t(e._0x186b0d)](2*E)+(15*o*o/256+45*o*o*o/1024)*Math.sin(4*E)-35*o*o*o/3072*Math.sin(6*E));var T=c*h*(g+(1-f+m)*g*g*g/6+(5-18*f+f*f+72*m-58*l)*g*g*g*g*g/120)+5e5,L=c*(C+h*Math.tan(E)*(g*g/2+(5-f+9*m+4*m*m)*g*g*g*g/24+(61-58*f+f*f+600*m-330*l)*g*g*g*g*g*g/720));return i<0&&(L+=1e7),{northing:Math.round(L),easting:Math.round(T),zoneNumber:M,zoneLetter:getLetterDesignator(i)}}function UTMtoLL(r){const e={_0x3c4af6:442,_0x2dd7b2:442,_0xa90406:1784,_0xf85c20:1489},t=_0x5e32ae;var i=r[t(4215)],s=r.easting,n=r.zoneLetter,o=r.zoneNumber;if(o<0||o>60)return null;var c=.9996,_=6378137,l=.00669438,h,f=(1-Math.sqrt(1-l))/(1+Math.sqrt(1-l)),m,g,C,E,P,w,M,T,L,R=s-5e5,D=i;n<"N"&&(D-=1e7),M=(o-1)*6-180+3,h=l/(1-l),w=D/c,T=w/(_*(1-l/4-3*l*l/64-5*l*l*l/256)),L=T+(3*f/2-27*f*f*f/32)*Math.sin(2*T)+(21*f*f/16-55*f*f*f*f/32)*Math.sin(4*T)+151*f*f*f/96*Math[t(e._0x3c4af6)](6*T),m=_/Math.sqrt(1-l*Math[t(e._0x2dd7b2)](L)*Math[t(442)](L)),g=Math.tan(L)*Math[t(597)](L),C=h*Math[t(e._0xa90406)](L)*Math.cos(L),E=_*(1-l)/Math.pow(1-l*Math.sin(L)*Math.sin(L),1.5),P=R/(m*c);var N=L-m*Math.tan(L)/E*(P*P/2-(5+3*g+10*C-4*C*C-9*h)*P*P*P*P/24+(61+90*g+298*C+45*g*g-252*h-3*C*C)*P*P*P*P*P*P/720);N=radToDeg(N);var k=(P-(1+2*g+C)*P*P*P/6+(5-2*C+28*g-3*C*C+8*h+24*g*g)*P*P*P*P*P/120)/Math.cos(L);k=M+radToDeg(k);var B;if(r.accuracy){var $=UTMtoLL({northing:r.northing+r[t(e._0xf85c20)],easting:r.easting+r.accuracy,zoneLetter:r.zoneLetter,zoneNumber:r.zoneNumber});B={top:$.lat,right:$.lon,bottom:N,left:k}}else B={lat:N,lon:k};return B}function getLetterDesignator(r){var e="Z";return 84>=r&&r>=72?e="X":72>r&&r>=64?e="W":64>r&&r>=56?e="V":56>r&&r>=48?e="U":48>r&&r>=40?e="T":40>r&&r>=32?e="S":32>r&&r>=24?e="R":24>r&&r>=16?e="Q":16>r&&r>=8?e="P":8>r&&r>=0?e="N":0>r&&r>=-8?e="M":-8>r&&r>=-16?e="L":-16>r&&r>=-24?e="K":-24>r&&r>=-32?e="J":-32>r&&r>=-40?e="H":-40>r&&r>=-48?e="G":-48>r&&r>=-56?e="F":-56>r&&r>=-64?e="E":-64>r&&r>=-72?e="D":-72>r&&r>=-80&&(e="C"),e}function encode$1(r,e){const t={_0x503e9c:2703,_0x4b4ec4:3766},i=_0x5e32ae;var s="00000"+r[i(t._0x503e9c)],n=i(t._0x4b4ec4)+r.northing;return r[i(1690)]+r[i(2700)]+get100kID(r.easting,r.northing,r.zoneNumber)+s.substr(s.length-5,e)+n.substr(n[i(3402)]-5,e)}function get100kID(r,e,t){var i=get100kSetForZone(t),s=Math.floor(r/1e5),n=Math.floor(e/1e5)%20;return getLetter100kID(s,n,i)}function get100kSetForZone(r){var e=r%NUM_100K_SETS;return e===0&&(e=NUM_100K_SETS),e}function getLetter100kID(r,e,t){var i=t-1,s=SET_ORIGIN_COLUMN_LETTERS.charCodeAt(i),n=SET_ORIGIN_ROW_LETTERS.charCodeAt(i),o=s+r-1,c=n+e,_=![];o>Z&&(o=o-Z+A-1,_=!![]),(o===I||s<I&&o>I||(o>I||s<I)&&_)&&o++,(o===O||s<O&&o>O||(o>O||s<O)&&_)&&(o++,o===I&&o++),o>Z&&(o=o-Z+A-1),c>V?(c=c-V+A-1,_=!![]):_=![],(c===I||n<I&&c>I||(c>I||n<I)&&_)&&c++,(c===O||n<O&&c>O||(c>O||n<O)&&_)&&(c++,c===I&&c++),c>V&&(c=c-V+A-1);var l=String.fromCharCode(o)+String.fromCharCode(c);return l}function decode(r){const e={_0x1647d0:617,_0x424081:766,_0x9af212:3392},t=_0x5e32ae;if(r&&r.length===0)throw t(961);for(var i=r.length,s=null,n="",o,c=0;!/[A-Z]/[t(e._0x1647d0)](o=r[t(4206)](c));){if(c>=2)throw t(e._0x424081)+r;n+=o,c++}var _=parseInt(n,10);if(c===0||c+3>i)throw"MGRSPoint bad conversion from: "+r;var l=r.charAt(c++);if(l<="A"||l==="B"||l==="Y"||l>="Z"||l==="I"||l==="O")throw"MGRSPoint zone letter "+l+" not handled: "+r;s=r.substring(c,c+=2);for(var h=get100kSetForZone(_),f=getEastingFromChar(s.charAt(0),h),m=getNorthingFromChar(s.charAt(1),h);m<getMinNorthing(l);)m+=2e6;var g=i-c;if(g%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+r;var C=g/2,E=0,P=0,w,M,T,L,R;return C>0&&(w=1e5/Math.pow(10,C),M=r.substring(c,c+C),E=parseFloat(M)*w,T=r[t(e._0x9af212)](c+C),P=parseFloat(T)*w),L=E+f,R=P+m,{easting:L,northing:R,zoneLetter:l,zoneNumber:_,accuracy:w}}function getEastingFromChar(r,e){const t=_0x5e32ae;for(var i=SET_ORIGIN_COLUMN_LETTERS.charCodeAt(e-1),s=1e5,n=![];i!==r[t(1799)](0);){if(i++,i===I&&i++,i===O&&i++,i>Z){if(n)throw t(421)+r;i=A,n=!![]}s+=1e5}return s}function getNorthingFromChar(r,e){const t={_0x1ac19d:1799},i=_0x5e32ae;if(r>"V")throw"MGRSPoint given invalid Northing "+r;for(var s=SET_ORIGIN_ROW_LETTERS.charCodeAt(e-1),n=0,o=![];s!==r[i(t._0x1ac19d)](0);){if(s++,s===I&&s++,s===O&&s++,s>V){if(o)throw i(421)+r;s=A,o=!![]}n+=1e5}return n}function getMinNorthing(r){var e;switch(r){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+r}function Point(r,e,t){if(!(this instanceof Point))return new Point(r,e,t);if(Array.isArray(r))this.x=r[0],this.y=r[1],this.z=r[2]||0;else if(typeof r=="object")this.x=r.x,this.y=r.y,this.z=r.z||0;else if(typeof r=="string"&&typeof e>"u"){var i=r.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=r,this.y=e,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Point.fromMGRS=function(r){return new Point(toPoint(r))},Point.prototype.toMGRS=function(r){return forward$t([this.x,this.y],r)};var C00=1,C02=.25,C04=.046875,C06=.01953125,C08=.01068115234375,C22=.75,C44=.46875,C46=.013020833333333334,C48=.007120768229166667,C66=.3645833333333333,C68=.005696614583333333,C88=.3076171875;function pj_enfn(r){var e=[];e[0]=C00-r*(C02+r*(C04+r*(C06+r*C08))),e[1]=r*(C22-r*(C04+r*(C06+r*C08)));var t=r*r;return e[2]=t*(C44-r*(C46+r*C48)),t*=r,e[3]=t*(C66-r*C68),e[4]=t*r*C88,e}function pj_mlfn(r,e,t,i){return t*=e,e*=e,i[0]*r-t*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))}var MAX_ITER$3=20;function pj_inv_mlfn(r,e,t){const i={_0x2e2750:928},s=_0x5e32ae;for(var n=1/(1-e),o=r,c=MAX_ITER$3;c;--c){var _=Math.sin(o),l=1-e*_*_;if(l=(pj_mlfn(o,_,Math.cos(o),t)-r)*(l*Math[s(i._0x2e2750)](l))*n,o-=l,Math.abs(l)<EPSLN)return o}return o}function init$t(){const r=_0x5e32ae;this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=pj_enfn(this.es),this.ml0=pj_mlfn(this.lat0,Math.sin(this.lat0),Math[r(1784)](this[r(1996)]),this.en))}function forward$s(r){const e={_0x21b3be:2957,_0x13f91b:3484,_0x29f01a:3926},t=_0x5e32ae;var i=r.x,s=r.y,n=adjust_lon(i-this[t(e._0x21b3be)]),o,c,_,l=Math.sin(s),h=Math.cos(s);if(this.es){var m=h*n,g=Math[t(3484)](m,2),C=this.ep2*Math.pow(h,2),E=Math[t(e._0x13f91b)](C,2),P=Math[t(e._0x29f01a)](h)>EPSLN?Math.tan(s):0,w=Math.pow(P,2),M=Math[t(3484)](w,2);o=1-this.es*Math.pow(l,2),m=m/Math.sqrt(o);var T=pj_mlfn(s,l,h,this.en);c=this.a*(this.k0*m*(1+g/6*(1-w+C+g/20*(5-18*w+M+14*C-58*w*C+g/42*(61+179*M-M*w-479*w)))))+this.x0,_=this.a*(this.k0*(T-this.ml0+l*n*m/2*(1+g/12*(5-w+9*C+4*E+g/30*(61+M-58*w+270*C-330*w*C+g/56*(1385+543*M-M*w-3111*w))))))+this.y0}else{var f=h*Math[t(442)](n);if(Math[t(3926)](Math.abs(f)-1)<EPSLN)return 93;if(c=.5*this.a*this.k0*Math.log((1+f)/(1-f))+this.x0,_=h*Math.cos(n)/Math.sqrt(1-Math.pow(f,2)),f=Math.abs(_),f>=1){if(f-1>EPSLN)return 93;_=0}else _=Math[t(4281)](_);s<0&&(_=-_),_=this.a*this.k0*(_-this[t(1996)])+this.y0}return r.x=c,r.y=_,r}function inverse$s(r){const e={_0x1fd729:3484},t=_0x5e32ae;var i,s,n,o,c=(r.x-this.x0)*(1/this.a),_=(r.y-this.y0)*(1/this.a);if(this.es)if(i=this.ml0+_/this.k0,s=pj_inv_mlfn(i,this.es,this.en),Math[t(3926)](s)<HALF_PI){var g=Math.sin(s),C=Math.cos(s),E=Math.abs(C)>EPSLN?Math.tan(s):0,P=this.ep2*Math.pow(C,2),w=Math.pow(P,2),M=Math.pow(E,2),T=Math.pow(M,2);i=1-this.es*Math[t(e._0x1fd729)](g,2);var L=c*Math.sqrt(i)/this.k0,R=Math.pow(L,2);i=i*E,n=s-i*R/(1-this.es)*.5*(1-R/12*(5+3*M-9*P*M+P-4*w-R/30*(61+90*M-252*P*M+45*T+46*P-R/56*(1385+3633*M+4095*T+1574*T*M)))),o=adjust_lon(this.long0+L*(1-R/6*(1+2*M+P-R/20*(5+28*M+24*T+8*P*M+6*P-R/42*(61+662*M+1320*T+720*T*M))))/C)}else n=HALF_PI*sign(_),o=0;else{var l=Math.exp(c/this.k0),h=.5*(l-1/l),f=this[t(1996)]+_/this.k0,m=Math.cos(f);i=Math.sqrt((1-Math.pow(m,2))/(1+Math.pow(h,2))),n=Math.asin(i),_<0&&(n=-n),h===0&&m===0?o=0:o=adjust_lon(Math[t(935)](h,m)+this.long0)}return r.x=o,r.y=n,r}var names$t=["Fast_Transverse_Mercator","Fast Transverse Mercator"],tmerc={init:init$t,forward:forward$s,inverse:inverse$s,names:names$t};function sinh(r){var i=Math[_0x5e32ae({_0x3a030b:2023}._0x3a030b)](r);return i=(i-1/i)/2,i}function hypot(r,e){const t={_0x180afa:3926,_0x59de84:1124,_0x3d5075:928},i=_0x5e32ae;r=Math[i(t._0x180afa)](r),e=Math.abs(e);var s=Math[i(t._0x59de84)](r,e),n=Math.min(r,e)/(s||1);return s*Math[i(t._0x3d5075)](1+Math.pow(n,2))}function log1py(r){const e=_0x5e32ae;var t=1+r,i=t-1;return i===0?r:r*Math[e(1982)](t)/i}function asinhy(r){var e=Math.abs(r);return e=log1py(e*(1+e/(hypot(1,e)+1))),r<0?-e:e}function gatg(r,e){for(var t=2*Math.cos(2*e),i=r.length-1,s=r[i],n=0,o;--i>=0;)o=-n+t*s+r[i],n=s,s=o;return e+o*Math.sin(2*e)}function clens(r,e){const t={_0x3f3927:442},i=_0x5e32ae;for(var s=2*Math.cos(e),n=r.length-1,o=r[n],c=0,_;--n>=0;)_=-c+s*o+r[n],c=o,o=_;return Math[i(t._0x3f3927)](e)*_}function cosh(r){var e=Math.exp(r);return e=(e+1/e)/2,e}function clens_cmplx(r,e,t){for(var i=Math.sin(e),s=Math.cos(e),n=sinh(t),o=cosh(t),c=2*s*o,_=-2*i*n,l=r.length-1,h=r[l],f=0,m=0,g=0,C,E;--l>=0;)C=m,E=f,m=h,f=g,h=-C+c*m-_*f+r[l],g=-E+_*m+c*f;return c=i*o,_=s*n,[c*h-_*g,c*g+_*h]}function init$s(){const r={_0x1a6954:3536,_0x1de8c4:2985,_0x58deeb:2957,_0x22990b:2117,_0x13c5b7:928,_0x15aacf:1302,_0x48b64c:3433,_0x5ed4d6:3468,_0x465bed:3433},e=_0x5e32ae;if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(tmerc[e(r._0x1a6954)][e(r._0x1de8c4)](this),this.forward=tmerc.forward,this.inverse=tmerc.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this[e(2957)]=this[e(r._0x58deeb)]!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this[e(r._0x22990b)]=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math[e(r._0x13c5b7)](1-this.es)),i=t/(2-t),s=i;this.cgb[0]=i*(2+i*(-2/3+i*(-2+i*(116/45+i*(26/45+i*(-2854/675)))))),this.cbg[0]=i*(-2+i*(2/3+i*(4/3+i*(-82/45+i*(32/45+i*(4642/4725)))))),s=s*i,this[e(r._0x15aacf)][1]=s*(7/3+i*(-8/5+i*(-227/45+i*(2704/315+i*(2323/945))))),this.cbg[1]=s*(5/3+i*(-16/15+i*(-13/9+i*(904/315+i*(-1522/945))))),s=s*i,this.cgb[2]=s*(56/15+i*(-136/35+i*(-1262/105+i*(73814/2835)))),this.cbg[2]=s*(-26/15+i*(34/21+i*(8/5+i*(-12686/2835)))),s=s*i,this.cgb[3]=s*(4279/630+i*(-332/35+i*(-399572/14175))),this.cbg[3]=s*(1237/630+i*(-12/5+i*(-24832/14175))),s=s*i,this.cgb[4]=s*(4174/315+i*(-144838/6237)),this.cbg[4]=s*(-734/315+i*(109598/31185)),s=s*i,this.cgb[5]=s*(601676/22275),this.cbg[5]=s*(444337/155925),s=Math[e(3484)](i,2),this.Qn=this.k0/(1+i)*(1+s*(1/4+s*(1/64+s/256))),this.utg[0]=i*(-.5+i*(2/3+i*(-37/96+i*(1/360+i*(81/512+i*(-96199/604800)))))),this.gtu[0]=i*(.5+i*(-2/3+i*(5/16+i*(41/180+i*(-127/288+i*(7891/37800)))))),this.utg[1]=s*(-1/48+i*(-1/15+i*(437/1440+i*(-46/105+i*(1118711/3870720))))),this.gtu[1]=s*(13/48+i*(-3/5+i*(557/1440+i*(281/630+i*(-1983433/1935360))))),s=s*i,this.utg[2]=s*(-17/480+i*(37/840+i*(209/4480+i*(-5569/90720)))),this[e(r._0x48b64c)][2]=s*(61/240+i*(-103/140+i*(15061/26880+i*(167603/181440)))),s=s*i,this.utg[3]=s*(-4397/161280+i*(11/504+i*(830251/7257600))),this.gtu[3]=s*(49561/161280+i*(-179/168+i*(6601661/7257600))),s=s*i,this[e(r._0x5ed4d6)][4]=s*(-4583/161280+i*(108847/3991680)),this.gtu[4]=s*(34729/80640+i*(-3418889/1995840)),s=s*i,this.utg[5]=s*(-20648693/638668800),this[e(r._0x465bed)][5]=s*(212378941/319334400);var n=gatg(this.cbg,this.lat0);this.Zb=-this.Qn*(n+clens(this[e(r._0x48b64c)],2*n))}function forward$r(r){const e={_0x33caf7:3433},t=_0x5e32ae;var i=adjust_lon(r.x-this.long0),s=r.y;s=gatg(this.cbg,s);var n=Math.sin(s),o=Math.cos(s),c=Math.sin(i),_=Math.cos(i);s=Math.atan2(n,_*o),i=Math.atan2(c*o,hypot(n,o*_)),i=asinhy(Math.tan(i));var l=clens_cmplx(this[t(e._0x33caf7)],2*s,2*i);s=s+l[0],i=i+l[1];var h,f;return Math.abs(i)<=2.623395162778?(h=this.a*(this.Qn*i)+this.x0,f=this.a*(this.Qn*s+this.Zb)+this.y0):(h=1/0,f=1/0),r.x=h,r.y=f,r}function inverse$r(r){const e={_0x3f04d1:935},t=_0x5e32ae;var i=(r.x-this.x0)*(1/this.a),s=(r.y-this.y0)*(1/this.a);s=(s-this.Zb)/this.Qn,i=i/this.Qn;var n,o;if(Math[t(3926)](i)<=2.623395162778){var c=clens_cmplx(this.utg,2*s,2*i);s=s+c[0],i=i+c[1],i=Math.atan(sinh(i));var _=Math.sin(s),l=Math.cos(s),h=Math.sin(i),f=Math[t(1784)](i);s=Math[t(e._0x3f04d1)](_*f,hypot(h,f*l)),i=Math.atan2(h,f*l),n=adjust_lon(i+this.long0),o=gatg(this.cgb,s)}else n=1/0,o=1/0;return r.x=n,r.y=o,r}var names$s=[_0x5e32ae(2049),"Extended Transverse Mercator",_0x5e32ae(3108),"Transverse_Mercator",_0x5e32ae(903),"tmerc"],etmerc={init:init$s,forward:forward$r,inverse:inverse$r,names:names$s};function adjust_zone(r,e){if(r===void 0){if(r=Math.floor((adjust_lon(e)+Math.PI)*30/Math.PI)+1,r<0)return 0;if(r>60)return 60}return r}var dependsOn=_0x5e32ae(3108);function init$r(){const r={_0x378bea:2957,_0x59a6a3:3926},e=_0x5e32ae;var t=adjust_zone(this.zone,this[e(r._0x378bea)]);if(t===void 0)throw new Error("unknown utm zone");this[e(1996)]=0,this.long0=(6*Math[e(r._0x59a6a3)](t)-183)*D2R$1,this.x0=5e5,this.y0=this[e(1363)]?1e7:0,this.k0=.9996,etmerc.init.apply(this),this.forward=etmerc[e(684)],this.inverse=etmerc.inverse}var names$r=["Universal Transverse Mercator System","utm"],utm={init:init$r,names:names$r,dependsOn};function srat(r,e){return Math[_0x5e32ae(3484)]((1-r)/(1+r),e)}var MAX_ITER$2=20;function init$q(){const r={_0x1ba3a6:928},e=_0x5e32ae;var t=Math.sin(this[e(1996)]),i=Math[e(1784)](this[e(1996)]);i*=i,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math[e(r._0x1ba3a6)](1+this.es*i*i/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+FORTPI)/(Math[e(3484)](Math.tan(.5*this.lat0+FORTPI),this.C)*srat(this.e*t,this.ratexp))}function forward$q(r){var e=r.x,t=r.y;return r.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+FORTPI),this.C)*srat(this.e*Math.sin(t),this.ratexp))-HALF_PI,r.x=this.C*e,r}function inverse$q(r){const e={_0x6db668:597},t=_0x5e32ae;for(var i=1e-14,s=r.x/this.C,n=r.y,o=Math.pow(Math[t(e._0x6db668)](.5*n+FORTPI)/this.K,1/this.C),c=MAX_ITER$2;c>0&&(n=2*Math.atan(o*srat(this.e*Math[t(442)](r.y),-.5*this.e))-HALF_PI,!(Math.abs(n-r.y)<i));--c)r.y=n;return c?(r.x=s,r.y=n,r):null}var names$q=[_0x5e32ae(3620)],gauss={init:init$q,forward:forward$q,inverse:inverse$q,names:names$q};function init$p(){const r={_0x270d9e:2542},e=_0x5e32ae;gauss.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this[e(4027)]=Math.cos(this.phic0),this.R2=2*this.rc,!this.title&&(this[e(r._0x270d9e)]=e(1641)))}function forward$p(r){const e={_0x30511d:1784},t=_0x5e32ae;var i,s,n,o;return r.x=adjust_lon(r.x-this.long0),gauss[t(684)][t(2985)](this,[r]),i=Math.sin(r.y),s=Math[t(e._0x30511d)](r.y),n=Math.cos(r.x),o=this.k0*this.R2/(1+this.sinc0*i+this.cosc0*s*n),r.x=o*s*Math.sin(r.x),r.y=o*(this.cosc0*i-this.sinc0*s*n),r.x=this.a*r.x+this.x0,r.y=this.a*r.y+this.y0,r}function inverse$p(r){const e={_0x234688:935},t=_0x5e32ae;var i,s,n,o,c;if(r.x=(r.x-this.x0)/this.a,r.y=(r.y-this.y0)/this.a,r.x/=this.k0,r.y/=this.k0,c=Math.sqrt(r.x*r.x+r.y*r.y)){var _=2*Math.atan2(c,this.R2);i=Math.sin(_),s=Math.cos(_),o=Math[t(1972)](s*this.sinc0+r.y*i*this.cosc0/c),n=Math[t(e._0x234688)](r.x*i,c*this.cosc0*s-r.y*this.sinc0*i)}else o=this.phic0,n=0;return r.x=n,r.y=o,gauss.inverse.apply(this,[r]),r.x=adjust_lon(r.x+this.long0),r}var names$p=["Stereographic_North_Pole","Oblique_Stereographic",_0x5e32ae(3060),"sterea","Oblique Stereographic Alternative",_0x5e32ae(3831)],sterea={init:init$p,forward:forward$p,inverse:inverse$p,names:names$p};function ssfn_(r,e,t){return e*=t,Math.tan(.5*(HALF_PI+r))*Math.pow((1-e)/(1+e),.5*t)}function init$o(){const r={_0x2eec61:1843,_0x46830e:1996,_0x1672a7:1887,_0x36f1ab:442,_0x3803df:2138,_0x305f3a:1816,_0x2934ce:3532,_0x498580:480,_0x266267:1843,_0x3daaf5:1116},e=_0x5e32ae;this.coslat0=Math.cos(this.lat0),this[e(r._0x2eec61)]=Math.sin(this[e(r._0x46830e)]),this[e(r._0x1672a7)]?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=EPSLN&&(this.k0=.5*(1+sign(this.lat0)*Math[e(r._0x36f1ab)](this[e(480)]))):(Math.abs(this.coslat0)<=EPSLN&&(this.lat0>0?this.con=1:this[e(r._0x3803df)]=-1),this[e(3532)]=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math[e(3484)](1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this[e(r._0x305f3a)])<=EPSLN&&(this.k0=.5*this[e(r._0x2934ce)]*msfnz(this.e,Math.sin(this[e(480)]),Math.cos(this[e(r._0x498580)]))/tsfnz(this.e,this.con*this.lat_ts,this.con*Math[e(r._0x36f1ab)](this.lat_ts))),this.ms1=msfnz(this.e,this[e(r._0x266267)],this.coslat0),this.X0=2*Math.atan(this[e(2516)](this.lat0,this.sinlat0,this.e))-HALF_PI,this[e(r._0x3daaf5)]=Math.cos(this.X0),this[e(2362)]=Math[e(442)](this.X0))}function forward$o(r){const e={_0x4de740:1816,_0x41bce6:442,_0x3ba986:1116},t=_0x5e32ae;var i=r.x,s=r.y,n=Math.sin(s),o=Math.cos(s),c,_,l,h,f,m,g=adjust_lon(i-this.long0);return Math.abs(Math.abs(i-this.long0)-Math.PI)<=EPSLN&&Math.abs(s+this.lat0)<=EPSLN?(r.x=NaN,r.y=NaN,r):this.sphere?(c=2*this.k0/(1+this[t(1843)]*n+this.coslat0*o*Math.cos(g)),r.x=this.a*c*o*Math[t(442)](g)+this.x0,r.y=this.a*c*(this.coslat0*n-this.sinlat0*o*Math.cos(g))+this.y0,r):(_=2*Math.atan(this.ssfn_(s,n,this.e))-HALF_PI,h=Math[t(1784)](_),l=Math.sin(_),Math[t(3926)](this[t(e._0x4de740)])<=EPSLN?(f=tsfnz(this.e,s*this[t(2138)],this.con*n),m=2*this.a*this.k0*f/this.cons,r.x=this.x0+m*Math[t(e._0x41bce6)](i-this.long0),r.y=this.y0-this.con*m*Math.cos(i-this[t(2957)]),r):(Math.abs(this.sinlat0)<EPSLN?(c=2*this.a*this.k0/(1+h*Math.cos(g)),r.y=c*l):(c=2*this.a*this.k0*this.ms1/(this[t(e._0x3ba986)]*(1+this[t(2362)]*l+this.cosX0*h*Math.cos(g))),r.y=c*(this.cosX0*l-this[t(2362)]*h*Math.cos(g))+this.y0),r.x=c*h*Math.sin(g)+this.x0,r))}function inverse$o(r){const e={_0x479743:2957,_0x3c0eb1:2957,_0x4281c6:442,_0x3cebe8:1784,_0x12292f:2138,_0xdde27f:597},t=_0x5e32ae;r.x-=this.x0,r.y-=this.y0;var i,s,n,o,c,_=Math.sqrt(r.x*r.x+r.y*r.y);if(this.sphere){var l=2*Math.atan(_/(2*this.a*this.k0));return i=this[t(e._0x479743)],s=this[t(1996)],_<=EPSLN?(r.x=i,r.y=s,r):(s=Math[t(1972)](Math.cos(l)*this.sinlat0+r.y*Math.sin(l)*this[t(1816)]/_),Math.abs(this[t(1816)])<EPSLN?this.lat0>0?i=adjust_lon(this[t(2957)]+Math.atan2(r.x,-1*r.y)):i=adjust_lon(this[t(e._0x3c0eb1)]+Math.atan2(r.x,r.y)):i=adjust_lon(this.long0+Math.atan2(r.x*Math[t(e._0x4281c6)](l),_*this[t(1816)]*Math[t(e._0x3cebe8)](l)-r.y*this.sinlat0*Math[t(442)](l))),r.x=i,r.y=s,r)}else if(Math.abs(this.coslat0)<=EPSLN){if(_<=EPSLN)return s=this.lat0,i=this.long0,r.x=i,r.y=s,r;r.x*=this[t(2138)],r.y*=this.con,n=_*this.cons/(2*this.a*this.k0),s=this.con*phi2z(this.e,n),i=this.con*adjust_lon(this[t(e._0x12292f)]*this.long0+Math.atan2(r.x,-1*r.y))}else o=2*Math.atan(_*this.cosX0/(2*this.a*this.k0*this.ms1)),i=this.long0,_<=EPSLN?c=this.X0:(c=Math[t(1972)](Math.cos(o)*this[t(2362)]+r.y*Math.sin(o)*this.cosX0/_),i=adjust_lon(this[t(e._0x3c0eb1)]+Math[t(935)](r.x*Math[t(442)](o),_*this.cosX0*Math.cos(o)-r.y*this.sinX0*Math.sin(o)))),s=-1*phi2z(this.e,Math[t(e._0xdde27f)](.5*(HALF_PI+c)));return r.x=i,r.y=s,r}var names$o=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],stere={init:init$o,forward:forward$o,inverse:inverse$o,names:names$o,ssfn_};function init$n(){const r={_0x56a984:1972,_0x4e5726:1202,_0x42e3e2:1982,_0x3efb62:1202},e=_0x5e32ae;var t=this.lat0;this.lambda0=this.long0;var i=Math.sin(t),s=this.a,n=this.rf,o=1/n,c=2*o-Math.pow(o,2),_=this.e=Math.sqrt(c);this.R=this.k0*s*Math.sqrt(1-c)/(1-c*Math.pow(i,2)),this.alpha=Math.sqrt(1+c/(1-c)*Math.pow(Math.cos(t),4)),this.b0=Math[e(r._0x56a984)](i/this[e(r._0x4e5726)]);var l=Math[e(r._0x42e3e2)](Math.tan(Math.PI/4+this.b0/2)),h=Math.log(Math.tan(Math.PI/4+t/2)),f=Math.log((1+_*i)/(1-_*i));this.K=l-this[e(r._0x3efb62)]*h+this.alpha*_/2*f}function forward$n(r){const e={_0x1a96c2:1982,_0x3254fa:3313,_0x18e53f:442,_0x400122:1972,_0x2d67f2:1784,_0x4b6118:442},t=_0x5e32ae;var i=Math.log(Math.tan(Math.PI/4-r.y/2)),s=this.e/2*Math[t(e._0x1a96c2)]((1+this.e*Math.sin(r.y))/(1-this.e*Math.sin(r.y))),n=-this.alpha*(i+s)+this.K,o=2*(Math.atan(Math.exp(n))-Math.PI/4),c=this.alpha*(r.x-this[t(e._0x3254fa)]),_=Math[t(3551)](Math[t(e._0x18e53f)](c)/(Math.sin(this.b0)*Math[t(597)](o)+Math.cos(this.b0)*Math[t(1784)](c))),l=Math[t(e._0x400122)](Math[t(1784)](this.b0)*Math.sin(o)-Math.sin(this.b0)*Math[t(e._0x2d67f2)](o)*Math.cos(c));return r.y=this.R/2*Math.log((1+Math.sin(l))/(1-Math[t(e._0x4b6118)](l)))+this.y0,r.x=this.R*_+this.x0,r}function inverse$n(r){const e={_0x1abb32:1784,_0x301d1e:3926,_0x4df58e:1202},t=_0x5e32ae;for(var i=r.x-this.x0,s=r.y-this.y0,n=i/this.R,o=2*(Math.atan(Math.exp(s/this.R))-Math.PI/4),c=Math.asin(Math[t(e._0x1abb32)](this.b0)*Math.sin(o)+Math.sin(this.b0)*Math.cos(o)*Math[t(1784)](n)),_=Math[t(3551)](Math[t(442)](n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(o))),l=this.lambda0+_/this[t(1202)],h=0,f=c,m=-1e3,g=0;Math[t(e._0x301d1e)](f-m)>1e-7;){if(++g>20)return;h=1/this[t(e._0x4df58e)]*(Math.log(Math.tan(Math.PI/4+c/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(f))/2)),m=f,f=2*Math.atan(Math[t(2023)](h))-Math.PI/2}return r.x=l,r.y=f,r}var names$n=["somerc"],somerc={init:init$n,forward:forward$n,inverse:inverse$n,names:names$n},TOL=1e-7;function isTypeA(r){const e={_0x41089a:3600},t=_0x5e32ae;var i=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],s=typeof r[t(758)]===t(3687)?Object.keys(r.PROJECTION)[0]:r.PROJECTION;return"no_uoff"in r||t(e._0x41089a)in r||i[t(2316)](s)!==-1}function init$m(){const r={_0x3aa8de:4151,_0x4881a6:1996,_0x3ffdad:3484,_0x52c915:3484,_0x3f505b:4e3,_0x399964:2835,_0x11174c:1551},e=_0x5e32ae;var t,i,s,n,o,c,_,l,h,f,m=0,g,C=0,E=0,P=0,w=0,M=0,T=0;this[e(3600)]=isTypeA(this),this.no_rot="no_rot"in this;var L=![];"alpha"in this&&(L=!![]);var R=![];if("rectified_grid_angle"in this&&(R=!![]),L&&(T=this.alpha),R&&(m=this.rectified_grid_angle*D2R$1),L||R)C=this.longc;else if(E=this.long1,w=this[e(r._0x3aa8de)],P=this.long2,M=this[e(2711)],Math[e(3926)](w-M)<=TOL||(t=Math.abs(w))<=TOL||Math.abs(t-HALF_PI)<=TOL||Math.abs(Math.abs(this[e(r._0x4881a6)])-HALF_PI)<=TOL||Math.abs(Math.abs(M)-HALF_PI)<=TOL)throw new Error;var D=1-this.es;i=Math.sqrt(D),Math.abs(this.lat0)>EPSLN?(l=Math.sin(this[e(1996)]),s=Math.cos(this[e(r._0x4881a6)]),t=1-this.es*l*l,this.B=s*s,this.B=Math.sqrt(1+this.es*this.B*this.B/D),this.A=this.B*this.k0*i/t,n=this.B*i/(s*Math.sqrt(t)),o=n*n-1,o<=0?o=0:(o=Math.sqrt(o),this.lat0<0&&(o=-o)),this.E=o+=n,this.E*=Math[e(r._0x3ffdad)](tsfnz(this.e,this.lat0,l),this.B)):(this.B=1/i,this.A=this.k0,this.E=n=o=1),L||R?(L?(g=Math.asin(Math.sin(T)/n),!R&&(m=T)):(g=m,T=Math[e(1972)](n*Math.sin(g))),this.lam0=C-Math.asin(.5*(o-1/o)*Math.tan(g))/this.B):(c=Math[e(3484)](tsfnz(this.e,w,Math[e(442)](w)),this.B),_=Math[e(r._0x52c915)](tsfnz(this.e,M,Math.sin(M)),this.B),o=this.E/c,h=(_-c)/(_+c),f=this.E*this.E,f=(f-_*c)/(f+_*c),t=E-P,t<-Math.pi?P-=TWO_PI:t>Math.pi&&(P+=TWO_PI),this.lam0=adjust_lon(.5*(E+P)-Math.atan(f*Math.tan(.5*this.B*(E-P))/h)/this.B),g=Math.atan(2*Math.sin(this.B*adjust_lon(E-this.lam0))/(o-1/o)),m=T=Math.asin(n*Math.sin(g))),this.singam=Math.sin(g),this.cosgam=Math[e(1784)](g),this.sinrot=Math[e(442)](m),this.cosrot=Math.cos(m),this.rB=1/this.B,this[e(r._0x3f505b)]=this.A*this.rB,this[e(r._0x399964)]=1/this.ArB,this.A*this.B,this.no_off?this[e(r._0x11174c)]=0:(this[e(1551)]=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(T))),this.lat0<0&&(this.u_0=-this.u_0)),o=.5*g,this.v_pole_n=this.ArB*Math.log(Math.tan(FORTPI-o)),this.v_pole_s=this[e(4e3)]*Math.log(Math.tan(FORTPI+o))}function forward$m(r){const e={_0x5599d9:3926,_0x27dffd:3926,_0x1bc5d9:3712,_0x267bda:2025,_0x5bf74a:1518,_0x11f405:1551},t=_0x5e32ae;var i={},s,n,o,c,_,l,h,f;if(r.x=r.x-this.lam0,Math[t(e._0x5599d9)](Math[t(e._0x27dffd)](r.y)-HALF_PI)>EPSLN){if(_=this.E/Math.pow(tsfnz(this.e,r.y,Math.sin(r.y)),this.B),l=1/_,s=.5*(_-l),n=.5*(_+l),c=Math.sin(this.B*r.x),o=(s*this.singam-c*this[t(e._0x1bc5d9)])/n,Math.abs(Math.abs(o)-1)<EPSLN)throw new Error;f=.5*this.ArB*Math.log((1-o)/(1+o)),l=Math[t(1784)](this.B*r.x),Math.abs(l)<TOL?h=this.A*r.x:h=this.ArB*Math.atan2(s*this.cosgam+c*this.singam,l)}else f=r.y>0?this[t(e._0x267bda)]:this.v_pole_s,h=this.ArB*r.y;return this[t(e._0x5bf74a)]?(i.x=h,i.y=f):(h-=this[t(e._0x11f405)],i.x=f*this.cosrot+h*this.sinrot,i.y=h*this.cosrot-f*this.sinrot),i.x=this.a*i.x+this.x0,i.y=this.a*i.y+this.y0,i}function inverse$m(r){const e={_0xcac306:4038,_0x3165df:2835,_0x5bb414:3712},t=_0x5e32ae;var i,s,n,o,c,_,l,h={};if(r.x=(r.x-this.x0)*(1/this.a),r.y=(r.y-this.y0)*(1/this.a),this.no_rot?(s=r.y,i=r.x):(s=r.x*this[t(4038)]-r.y*this.sinrot,i=r.y*this[t(e._0xcac306)]+r.x*this.sinrot+this.u_0),n=Math.exp(-this[t(2835)]*s),o=.5*(n-1/n),c=.5*(n+1/n),_=Math.sin(this[t(e._0x3165df)]*i),l=(_*this.cosgam+o*this.singam)/c,Math[t(3926)](Math.abs(l)-1)<EPSLN)h.x=0,h.y=l<0?-HALF_PI:HALF_PI;else{if(h.y=this.E/Math.sqrt((1+l)/(1-l)),h.y=phi2z(this.e,Math.pow(h.y,1/this.B)),h.y===1/0)throw new Error;h.x=-this.rB*Math.atan2(o*this[t(e._0x5bb414)]-_*this.singam,Math.cos(this[t(2835)]*i))}return h.x+=this.lam0,h}var names$m=["Hotine_Oblique_Mercator",_0x5e32ae(2012),"Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin",_0x5e32ae(914),_0x5e32ae(1178),"omerc"],omerc={init:init$m,forward:forward$m,inverse:inverse$m,names:names$m};function init$l(){const r={_0x3ef035:2711,_0x99f011:4151,_0x47c9fd:2711,_0x148ac8:2542},e=_0x5e32ae;if(!this.lat2&&(this[e(r._0x3ef035)]=this.lat1),!this.k0&&(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this[e(r._0x99f011)]+this.lat2)<EPSLN)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var i=Math.sin(this.lat1),s=Math.cos(this.lat1),n=msfnz(this.e,i,s),o=tsfnz(this.e,this.lat1,i),c=Math.sin(this.lat2),_=Math[e(1784)](this[e(r._0x3ef035)]),l=msfnz(this.e,c,_),h=tsfnz(this.e,this.lat2,c),f=tsfnz(this.e,this[e(1996)],Math.sin(this.lat0));Math.abs(this.lat1-this[e(r._0x47c9fd)])>EPSLN?this.ns=Math.log(n/l)/Math[e(1982)](o/h):this.ns=i,isNaN(this.ns)&&(this.ns=i),this.f0=n/(this.ns*Math[e(3484)](o,this.ns)),this.rh=this.a*this.f0*Math.pow(f,this.ns),!this[e(r._0x148ac8)]&&(this.title="Lambert Conformal Conic")}}function forward$l(r){const e={_0x48e92f:3926,_0x26ff36:442},t=_0x5e32ae;var i=r.x,s=r.y;Math.abs(2*Math.abs(s)-Math.PI)<=EPSLN&&(s=sign(s)*(HALF_PI-2*EPSLN));var n=Math[t(e._0x48e92f)](Math[t(3926)](s)-HALF_PI),o,c;if(n>EPSLN)o=tsfnz(this.e,s,Math.sin(s)),c=this.a*this.f0*Math.pow(o,this.ns);else{if(n=s*this.ns,n<=0)return null;c=0}var _=this.ns*adjust_lon(i-this.long0);return r.x=this.k0*(c*Math[t(e._0x26ff36)](_))+this.x0,r.y=this.k0*(this.rh-c*Math.cos(_))+this.y0,r}function inverse$l(r){var e,t,i,s,n,o=(r.x-this.x0)/this.k0,c=this.rh-(r.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+c*c),t=1):(e=-Math.sqrt(o*o+c*c),t=-1);var _=0;if(e!==0&&(_=Math.atan2(t*o,t*c)),e!==0||this.ns>0){if(t=1/this.ns,i=Math.pow(e/(this.a*this.f0),t),s=phi2z(this.e,i),s===-9999)return null}else s=-HALF_PI;return n=adjust_lon(_/this.ns+this.long0),r.x=n,r.y=s,r}var names$l=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic",_0x5e32ae(1412),"Lambert_Conformal_Conic_2SP",_0x5e32ae(3383),_0x5e32ae(3298),"Lambert Conic Conformal (2SP)"],lcc={init:init$l,forward:forward$l,inverse:inverse$l,names:names$l};function init$k(){const r={_0xe1e5e4:1784,_0xbd527b:3309,_0x5f1062:442,_0x20b8d2:3148,_0x2ff54b:928,_0xb66f0a:1249},e=_0x5e32ae;this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),!this.lat0&&(this.lat0=.863937979737193),!this.long0&&(this.long0=.7417649320975901-.308341501185665),!this.k0&&(this.k0=.9999),this.s45=.785398163397448,this[e(1249)]=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math[e(928)](this.e2),this.alfa=Math.sqrt(1+this.e2*Math[e(3484)](Math[e(r._0xe1e5e4)](this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this[e(r._0xbd527b)])/this.alfa),this.g=Math.pow((1+this.e*Math[e(r._0x5f1062)](this[e(3309)]))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this[e(4028)])/Math.pow(Math.tan(this[e(r._0xbd527b)]/2+this.s45),this[e(r._0x20b8d2)])*this.g,this.k1=this.k0,this.n0=this.a*Math[e(r._0x2ff54b)](1-this.e2)/(1-this.e2*Math.pow(Math[e(442)](this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this[e(r._0xb66f0a)]-this.uq}function forward$k(r){const e={_0xe7df08:1784,_0x354ff4:4028},t=_0x5e32ae;var i,s,n,o,c,_,l,h=r.x,f=r.y,m=adjust_lon(h-this.long0);return i=Math.pow((1+this.e*Math.sin(f))/(1-this.e*Math.sin(f)),this.alfa*this.e/2),s=2*(Math.atan(this.k*Math.pow(Math.tan(f/2+this.s45),this.alfa)/i)-this.s45),n=-m*this.alfa,o=Math.asin(Math[t(e._0xe7df08)](this.ad)*Math[t(442)](s)+Math.sin(this.ad)*Math.cos(s)*Math.cos(n)),c=Math.asin(Math.cos(s)*Math.sin(n)/Math[t(1784)](o)),_=this.n*c,l=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(o/2+this[t(e._0x354ff4)]),this.n),r.y=l*Math.cos(_)/1,r.x=l*Math.sin(_)/1,!this.czech&&(r.y*=-1,r.x*=-1),r}function inverse$k(r){const e={_0x1c5368:2419,_0x205893:1784,_0x362227:442},t=_0x5e32ae;var i,s,n,o,c,_,l,h,f=r.x;r.x=r.y,r.y=f,!this.czech&&(r.y*=-1,r.x*=-1),_=Math.sqrt(r.x*r.x+r.y*r.y),c=Math.atan2(r.y,r.x),o=c/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this[t(e._0x1c5368)]/_,1/this.n)*Math.tan(this.s0/2+this[t(4028)]))-this[t(4028)]),i=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(o)),s=Math[t(1972)](Math.cos(n)*Math.sin(o)/Math[t(e._0x205893)](i)),r.x=this.long0-s/this.alfa,l=i,h=0;var m=0;do r.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(i/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math[t(e._0x362227)](l)),this.e/2))-this.s45),Math[t(3926)](l-r.y)<1e-10&&(h=1),l=r.y,m+=1;while(h===0&&m<15);return m>=15?null:r}var names$k=["Krovak","krovak"],krovak={init:init$k,forward:forward$k,inverse:inverse$k,names:names$k};function mlfn(r,e,t,i,s){const n=_0x5e32ae;return r*s-e*Math[n(442)](2*s)+t*Math[n(442)](4*s)-i*Math.sin(6*s)}function e0fn(r){return 1-.25*r*(1+r/16*(3+1.25*r))}function e1fn(r){return .375*r*(1+.25*r*(1+.46875*r))}function e2fn(r){return .05859375*r*r*(1+.75*r)}function e3fn(r){return r*r*r*(35/3072)}function gN(r,e,t){const i={_0x32aea7:928},s=_0x5e32ae;var n=e*t;return r/Math[s(i._0x32aea7)](1-n*n)}function adjust_lat(r){return Math.abs(r)<HALF_PI?r:r-sign(r)*Math.PI}function imlfn(r,e,t,i,s){const n=_0x5e32ae;var o,c;o=r/e;for(var _=0;_<15;_++)if(c=(r-(e*o-t*Math[n(442)](2*o)+i*Math.sin(4*o)-s*Math.sin(6*o)))/(e-2*t*Math.cos(2*o)+4*i*Math.cos(4*o)-6*s*Math.cos(6*o)),o+=c,Math.abs(c)<=1e-10)return o;return NaN}function init$j(){const r={_0x459cea:3597,_0x3abb8e:1996},e=_0x5e32ae;!this.sphere&&(this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this[e(r._0x459cea)]=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this[e(r._0x3abb8e)]))}function forward$j(r){const e={_0x5b9788:597},t=_0x5e32ae;var i,s,n=r.x,o=r.y;if(n=adjust_lon(n-this[t(2957)]),this[t(1887)])i=this.a*Math.asin(Math.cos(o)*Math.sin(n)),s=this.a*(Math.atan2(Math[t(e._0x5b9788)](o),Math.cos(n))-this.lat0);else{var c=Math.sin(o),_=Math.cos(o),l=gN(this.a,this.e,c),h=Math.tan(o)*Math.tan(o),f=n*Math.cos(o),m=f*f,g=this.es*_*_/(1-this.es),C=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,o);i=l*f*(1-m*h*(1/6-(8-h+8*g)*m/120)),s=C-this[t(3597)]+l*c/_*m*(.5+(5-h+6*g)*m/24)}return r.x=i+this.x0,r.y=s+this.y0,r}function inverse$j(r){const e={_0x11b15e:2957},t=_0x5e32ae;r.x-=this.x0,r.y-=this.y0;var i=r.x/this.a,s=r.y/this.a,n,o;if(this.sphere){var c=s+this.lat0;n=Math[t(1972)](Math.sin(c)*Math[t(1784)](i)),o=Math[t(935)](Math.tan(i),Math[t(1784)](c))}else{var _=this[t(3597)]/this.a+s,l=imlfn(_,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(l)-HALF_PI)<=EPSLN)return r.x=this[t(e._0x11b15e)],r.y=HALF_PI,s<0&&(r.y*=-1),r;var h=gN(this.a,this.e,Math.sin(l)),f=h*h*h/this.a/this.a*(1-this.es),m=Math.pow(Math.tan(l),2),g=i*this.a/h,C=g*g;n=l-h*Math.tan(l)/f*g*g*(.5-(1+3*m)*g*g/24),o=g*(1-C*(m/3+(1+3*m)*m*C/15))/Math.cos(l)}return r.x=adjust_lon(o+this.long0),r.y=adjust_lat(n),r}var names$j=["Cassini","Cassini_Soldner",_0x5e32ae(1846)],cass={init:init$j,forward:forward$j,inverse:inverse$j,names:names$j};function qsfnz(r,e){var t;return r>1e-7?(t=r*e,(1-r*r)*(e/(1-t*t)-.5/r*Math.log((1-t)/(1+t)))):2*e}var S_POLE=1,N_POLE=2,EQUIT=3,OBLIQ=4;function init$i(){const r={_0x105541:3926,_0x49e267:764,_0x39a31c:2563,_0x5521fa:1697,_0xcbd87d:2643,_0x31adf8:2382,_0x5991c5:442},e=_0x5e32ae;var t=Math.abs(this.lat0);if(Math[e(r._0x105541)](t-HALF_PI)<EPSLN?this.mode=this.lat0<0?this[e(r._0x49e267)]:this.N_POLE:Math.abs(t)<EPSLN?this.mode=this.EQUIT:this.mode=this[e(r._0x39a31c)],this.es>0){var i;switch(this.qp=qsfnz(this.e,1),this.mmf=.5/(1-this.es),this[e(r._0x5521fa)]=authset(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this[e(r._0xcbd87d)]:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this[e(r._0x31adf8)]=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),i=Math.sin(this.lat0),this.sinb1=qsfnz(this.e,i)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this[e(1996)])/(Math[e(928)](1-this.es*i*i)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math[e(r._0x5991c5)](this.lat0),this.cosph0=Math.cos(this.lat0))}function forward$i(r){const e={_0x432afe:928,_0x5dbbb5:3211,_0x11511c:442,_0x5d905e:3207},t=_0x5e32ae;var i,s,n,o,c,_,l,h,f,m,g=r.x,C=r.y;if(g=adjust_lon(g-this[t(2957)]),this.sphere){if(c=Math.sin(C),m=Math.cos(C),n=Math.cos(g),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(s=this.mode===this.EQUIT?1+m*n:1+this.sinph0*c+this[t(721)]*m*n,s<=EPSLN)return null;s=Math[t(e._0x432afe)](2/s),i=s*m*Math.sin(g),s*=this[t(e._0x5dbbb5)]===this.EQUIT?c:this.cosph0*c-this.sinph0*m*n}else if(this.mode===this[t(3490)]||this.mode===this.S_POLE){if(this.mode===this[t(3490)]&&(n=-n),Math.abs(C+this.lat0)<EPSLN)return null;s=FORTPI-C*.5,s=2*(this.mode===this.S_POLE?Math.cos(s):Math.sin(s)),i=s*Math[t(e._0x11511c)](g),s*=n}}else{switch(l=0,h=0,f=0,n=Math[t(1784)](g),o=Math[t(442)](g),c=Math.sin(C),_=qsfnz(this.e,c),(this.mode===this.OBLIQ||this.mode===this[t(2643)])&&(l=_/this.qp,h=Math[t(e._0x432afe)](1-l*l)),this.mode){case this.OBLIQ:f=1+this.sinb1*l+this.cosb1*h*n;break;case this.EQUIT:f=1+h*n;break;case this.N_POLE:f=HALF_PI+C,_=this.qp-_;break;case this.S_POLE:f=C-HALF_PI,_=this.qp+_;break}if(Math.abs(f)<EPSLN)return null;switch(this.mode){case this.OBLIQ:case this[t(2643)]:f=Math.sqrt(2/f),this.mode===this.OBLIQ?s=this.ymf*f*(this[t(733)]*l-this.sinb1*h*n):s=(f=Math[t(928)](2/(1+h*n)))*l*this[t(e._0x5d905e)],i=this.xmf*f*h*o;break;case this[t(3490)]:case this.S_POLE:_>=0?(i=(f=Math.sqrt(_))*o,s=n*(this.mode===this.S_POLE?f:-f)):i=s=0;break}}return r.x=this.a*i+this.x0,r.y=this.a*s+this.y0,r}function inverse$i(r){const e={_0x1d0ced:3211,_0x30b5f:1972,_0x369e04:721,_0x366818:3490,_0x5563bd:764,_0x9c1f8d:2957,_0x35b0d9:733,_0x44b213:2957},t=_0x5e32ae;r.x-=this.x0,r.y-=this.y0;var i=r.x/this.a,s=r.y/this.a,n,o,c,_,l,h,f;if(this.sphere){var m=0,g,C=0;if(g=Math[t(928)](i*i+s*s),o=g*.5,o>1)return null;switch(o=2*Math.asin(o),(this.mode===this.OBLIQ||this[t(e._0x1d0ced)]===this.EQUIT)&&(C=Math[t(442)](o),m=Math.cos(o)),this.mode){case this[t(2643)]:o=Math.abs(g)<=EPSLN?0:Math[t(e._0x30b5f)](s*C/g),i*=C,s=m*g;break;case this.OBLIQ:o=Math[t(3926)](g)<=EPSLN?this.lat0:Math.asin(m*this.sinph0+s*C*this[t(e._0x369e04)]/g),i*=C*this.cosph0,s=(m-Math[t(442)](o)*this.sinph0)*g;break;case this[t(e._0x366818)]:s=-s,o=HALF_PI-o;break;case this[t(e._0x5563bd)]:o-=HALF_PI;break}n=s===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(i,s)}else{if(f=0,this.mode===this.OBLIQ||this.mode===this[t(2643)]){if(i/=this.dd,s*=this.dd,h=Math.sqrt(i*i+s*s),h<EPSLN)return r.x=this[t(e._0x9c1f8d)],r.y=this.lat0,r;_=2*Math.asin(.5*h/this.rq),c=Math[t(1784)](_),i*=_=Math.sin(_),this.mode===this.OBLIQ?(f=c*this.sinb1+s*_*this[t(e._0x35b0d9)]/h,l=this.qp*f,s=h*this.cosb1*c-s*this.sinb1*_):(f=s*_/h,l=this.qp*f,s=h*c)}else if(this[t(3211)]===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(s=-s),l=i*i+s*s,!l)return r.x=this.long0,r.y=this[t(1996)],r;f=1-l/this.qp,this[t(3211)]===this.S_POLE&&(f=-f)}n=Math.atan2(i,s),o=authlat(Math.asin(f),this.apa)}return r.x=adjust_lon(this[t(e._0x44b213)]+n),r.y=o,r}var P00=.3333333333333333,P01=.17222222222222222,P02=.10257936507936508,P10=.06388888888888888,P11=.0664021164021164,P20=.016415012942191543;function authset(r){var e,t=[];return t[0]=r*P00,e=r*r,t[0]+=e*P01,t[1]=e*P10,e*=r,t[0]+=e*P02,t[1]+=e*P11,t[2]=e*P20,t}function authlat(r,e){const t={_0xae1815:442},i=_0x5e32ae;var s=r+r;return r+e[0]*Math[i(442)](s)+e[1]*Math.sin(s+s)+e[2]*Math[i(t._0xae1815)](s+s+s)}var names$i=["Lambert Azimuthal Equal Area",_0x5e32ae(1458),"laea"],laea={init:init$i,forward:forward$i,inverse:inverse$i,names:names$i,S_POLE,N_POLE,EQUIT,OBLIQ};function asinz(r){return Math[_0x5e32ae({_0x3b771e:3926}._0x3b771e)](r)>1&&(r=r>1?1:-1),Math.asin(r)}function init$h(){const r={_0x5abaa1:928,_0x2fc487:4151,_0x4ef153:1088,_0x1e9d78:3523,_0x2c979b:442,_0x261929:1996,_0xebf377:2508,_0x51970d:1820},e=_0x5e32ae;Math.abs(this.lat1+this.lat2)<EPSLN||(this[e(2018)]=this.b/this.a,this.es=1-Math[e(3484)](this.temp,2),this.e3=Math[e(r._0x5abaa1)](this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this[e(r._0x2fc487)]),this.t1=this.sin_po,this[e(2138)]=this.sin_po,this.ms1=msfnz(this.e3,this[e(r._0x4ef153)],this[e(r._0x1e9d78)]),this[e(2508)]=qsfnz(this.e3,this.sin_po),this.sin_po=Math[e(r._0x2c979b)](this.lat2),this.cos_po=Math.cos(this[e(2711)]),this.t2=this[e(1088)],this.ms2=msfnz(this.e3,this.sin_po,this.cos_po),this.qs2=qsfnz(this.e3,this.sin_po),this.sin_po=Math.sin(this[e(r._0x261929)]),this.cos_po=Math[e(1784)](this.lat0),this.t3=this.sin_po,this.qs0=qsfnz(this.e3,this.sin_po),Math[e(3926)](this[e(4151)]-this.lat2)>EPSLN?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this[e(1708)]=this.con,this.c=this.ms1*this.ms1+this.ns0*this[e(r._0xebf377)],this.rh=this.a*Math[e(928)](this.c-this.ns0*this[e(r._0x51970d)])/this.ns0)}function forward$h(r){const e={_0x5f1d17:442,_0x4790e4:928},t=_0x5e32ae;var i=r.x,s=r.y;this[t(944)]=Math[t(e._0x5f1d17)](s),this.cos_phi=Math.cos(s);var n=qsfnz(this.e3,this.sin_phi),o=this.a*Math[t(e._0x4790e4)](this.c-this.ns0*n)/this.ns0,c=this.ns0*adjust_lon(i-this.long0),_=o*Math.sin(c)+this.x0,l=this.rh-o*Math.cos(c)+this.y0;return r.x=_,r.y=l,r}function inverse$h(r){const e={_0x3d1609:1708},t=_0x5e32ae;var i,s,n,o,c,_;return r.x-=this.x0,r.y=this.rh-r.y+this.y0,this[t(1708)]>=0?(i=Math.sqrt(r.x*r.x+r.y*r.y),n=1):(i=-Math.sqrt(r.x*r.x+r.y*r.y),n=-1),o=0,i!==0&&(o=Math.atan2(n*r.x,n*r.y)),n=i*this[t(1708)]/this.a,this[t(1887)]?_=Math.asin((this.c-n*n)/(2*this[t(1708)])):(s=(this.c-n*n)/this[t(e._0x3d1609)],_=this.phi1z(this.e3,s)),c=adjust_lon(o/this.ns0+this.long0),r.x=c,r.y=_,r}function phi1z(r,e){var t,i,s,n,o,c=asinz(.5*e);if(r<EPSLN)return c;for(var _=r*r,l=1;l<=25;l++)if(t=Math.sin(c),i=Math.cos(c),s=r*t,n=1-s*s,o=.5*n*n/i*(e/(1-_)-t/n+.5/r*Math.log((1-s)/(1+s))),c=c+o,Math.abs(o)<=1e-7)return c;return null}var names$h=["Albers_Conic_Equal_Area","Albers","aea"],aea={init:init$h,forward:forward$h,inverse:inverse$h,names:names$h,phi1z};function init$g(){const r={_0x2345ba:1784},e=_0x5e32ae;this.sin_p14=Math.sin(this.lat0),this[e(2344)]=Math[e(r._0x2345ba)](this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function forward$g(r){const e={_0x1cbe73:1784,_0x962a86:604,_0xd7fa35:4320},t=_0x5e32ae;var i,s,n,o,c,_,l,h,f=r.x,m=r.y;return n=adjust_lon(f-this.long0),i=Math[t(442)](m),s=Math.cos(m),o=Math[t(e._0x1cbe73)](n),_=this.sin_p14*i+this.cos_p14*s*o,c=1,_>0||Math.abs(_)<=EPSLN?(l=this.x0+this.a*c*s*Math.sin(n)/_,h=this.y0+this.a*c*(this.cos_p14*i-this[t(e._0x962a86)]*s*o)/_):(l=this.x0+this[t(e._0xd7fa35)]*s*Math.sin(n),h=this.y0+this.infinity_dist*(this.cos_p14*i-this.sin_p14*s*o)),r.x=l,r.y=h,r}function inverse$g(r){const e={_0x1bf9d0:935,_0x304749:2957},t=_0x5e32ae;var i,s,n,o,c,_;return r.x=(r.x-this.x0)/this.a,r.y=(r.y-this.y0)/this.a,r.x/=this.k0,r.y/=this.k0,(i=Math.sqrt(r.x*r.x+r.y*r.y))?(o=Math.atan2(i,this.rc),s=Math.sin(o),n=Math.cos(o),_=asinz(n*this.sin_p14+r.y*s*this.cos_p14/i),c=Math[t(e._0x1bf9d0)](r.x*s,i*this.cos_p14*n-r.y*this.sin_p14*s),c=adjust_lon(this[t(e._0x304749)]+c)):(_=this.phic0,c=0),r.x=c,r.y=_,r}var names$g=["gnom"],gnom={init:init$g,forward:forward$g,inverse:inverse$g,names:names$g};function iqsfnz(r,e){const t={_0x34a31c:3926},i=_0x5e32ae;var s=1-(1-r*r)/(2*r)*Math.log((1-r)/(1+r));if(Math.abs(Math[i(t._0x34a31c)](e)-s)<1e-6)return e<0?-1*HALF_PI:HALF_PI;for(var n=Math.asin(.5*e),o,c,_,l,h=0;h<30;h++)if(c=Math.sin(n),_=Math.cos(n),l=r*c,o=Math[i(3484)](1-l*l,2)/(2*_)*(e/(1-r*r)-c/(1-l*l)+.5/r*Math.log((1-l)/(1+l))),n+=o,Math.abs(o)<=1e-10)return n;return NaN}function init$f(){const r={_0x1eb67e:1784},e=_0x5e32ae;!this.sphere&&(this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math[e(r._0x1eb67e)](this.lat_ts)))}function forward$f(r){const e={_0x30ad62:480},t=_0x5e32ae;var i=r.x,s=r.y,n,o,c=adjust_lon(i-this.long0);if(this.sphere)n=this.x0+this.a*c*Math.cos(this[t(e._0x30ad62)]),o=this.y0+this.a*Math.sin(s)/Math.cos(this.lat_ts);else{var _=qsfnz(this.e,Math.sin(s));n=this.x0+this.a*this.k0*c,o=this.y0+this.a*_*.5/this.k0}return r.x=n,r.y=o,r}function inverse$f(r){const e={_0x59dbb0:1784,_0x2578b1:2957},t=_0x5e32ae;r.x-=this.x0,r.y-=this.y0;var i,s;return this.sphere?(i=adjust_lon(this[t(2957)]+r.x/this.a/Math[t(e._0x59dbb0)](this.lat_ts)),s=Math[t(1972)](r.y/this.a*Math.cos(this[t(480)]))):(s=iqsfnz(this.e,2*r.y*this.k0/this.a),i=adjust_lon(this[t(e._0x2578b1)]+r.x/(this.a*this.k0))),r.x=i,r.y=s,r}var names$f=["cea"],cea={init:init$f,forward:forward$f,inverse:inverse$f,names:names$f};function init$e(){const r={_0x37bff5:1996,_0x287309:2542},e=_0x5e32ae;this.x0=this.x0||0,this.y0=this.y0||0,this[e(r._0x37bff5)]=this.lat0||0,this.long0=this[e(2957)]||0,this.lat_ts=this.lat_ts||0,this[e(r._0x287309)]=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function forward$e(r){const e={_0x1edab9:2957,_0x4e30d2:1996},t=_0x5e32ae;var i=r.x,s=r.y,n=adjust_lon(i-this[t(e._0x1edab9)]),o=adjust_lat(s-this[t(e._0x4e30d2)]);return r.x=this.x0+this.a*n*this.rc,r.y=this.y0+this.a*o,r}function inverse$e(r){const e={_0x37f364:2957},t=_0x5e32ae;var i=r.x,s=r.y;return r.x=adjust_lon(this[t(e._0x37f364)]+(i-this.x0)/(this.a*this.rc)),r.y=adjust_lat(this.lat0+(s-this.y0)/this.a),r}var names$e=["Equirectangular","Equidistant_Cylindrical","eqc"],eqc={init:init$e,forward:forward$e,inverse:inverse$e,names:names$e},MAX_ITER$1=20;function init$d(){const r={_0x136f0b:2018,_0x50b5ea:928,_0x160b96:1996},e=_0x5e32ae;this[e(r._0x136f0b)]=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math[e(r._0x50b5ea)](this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this[e(r._0x160b96)])}function forward$d(r){const e={_0xdd31f5:442},t=_0x5e32ae;var i=r.x,s=r.y,n,o,c,_=adjust_lon(i-this.long0);if(c=_*Math[t(e._0xdd31f5)](s),this.sphere)Math.abs(s)<=EPSLN?(n=this.a*_,o=-1*this.a*this[t(1996)]):(n=this.a*Math.sin(c)/Math.tan(s),o=this.a*(adjust_lat(s-this.lat0)+(1-Math.cos(c))/Math.tan(s)));else if(Math.abs(s)<=EPSLN)n=this.a*_,o=-1*this.ml0;else{var l=gN(this.a,this.e,Math.sin(s))/Math.tan(s);n=l*Math.sin(c),o=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,s)-this[t(3597)]+l*(1-Math.cos(c))}return r.x=n+this.x0,r.y=o+this.y0,r}function inverse$d(r){const e={_0x3928d8:2957,_0x2ce089:442,_0x14d8a6:3597,_0x6e087:1784,_0x5c8e4c:3926,_0x405577:928},t=_0x5e32ae;var i,s,n,o,c,_,l,h,f;if(n=r.x-this.x0,o=r.y-this.y0,this.sphere)if(Math.abs(o+this.a*this.lat0)<=EPSLN)i=adjust_lon(n/this.a+this.long0),s=0;else{_=this.lat0+o/this.a,l=n*n/this.a/this.a+_*_,h=_;var m;for(c=MAX_ITER$1;c;--c)if(m=Math.tan(h),f=-1*(_*(h*m+1)-h-.5*(h*h+l)*m)/((h-_)/m-1),h+=f,Math.abs(f)<=EPSLN){s=h;break}i=adjust_lon(this[t(e._0x3928d8)]+Math.asin(n*Math[t(597)](h)/this.a)/Math[t(e._0x2ce089)](s))}else if(Math.abs(o+this.ml0)<=EPSLN)s=0,i=adjust_lon(this[t(e._0x3928d8)]+n/this.a);else{_=(this[t(e._0x14d8a6)]+o)/this.a,l=n*n/this.a/this.a+_*_,h=_;var g,C,E,P,w;for(c=MAX_ITER$1;c;--c)if(w=this.e*Math.sin(h),g=Math.sqrt(1-w*w)*Math.tan(h),C=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,h),E=this.e0-2*this.e1*Math.cos(2*h)+4*this.e2*Math[t(e._0x6e087)](4*h)-6*this.e3*Math.cos(6*h),P=C/this.a,f=(_*(g*P+1)-P-.5*g*(P*P+l))/(this.es*Math.sin(2*h)*(P*P+l-2*_*P)/(4*g)+(_-P)*(g*E-2/Math.sin(2*h))-E),h-=f,Math[t(e._0x5c8e4c)](f)<=EPSLN){s=h;break}g=Math[t(e._0x405577)](1-this.es*Math[t(3484)](Math.sin(s),2))*Math.tan(s),i=adjust_lon(this.long0+Math.asin(n*g/this.a)/Math[t(442)](s))}return r.x=i,r.y=s,r}var names$d=["Polyconic","poly"],poly={init:init$d,forward:forward$d,inverse:inverse$d,names:names$d};function init$c(){const r={_0x3e39f2:3774,_0x52c62c:1150,_0x12f866:2127},e=_0x5e32ae;this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this[e(3774)]=[],this.B_im=[],this[e(3774)][1]=.7557853228,this.B_im[1]=0,this[e(r._0x3e39f2)][2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this[e(r._0x52c62c)][5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this[e(1217)][2]=-.577245789,this[e(2127)][2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this[e(1217)][4]=-.15094762,this[e(r._0x12f866)][4]=.18200602,this.C_re[5]=1.01418179,this[e(r._0x12f866)][5]=1.64497696,this[e(1217)][6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function forward$c(r){const e=_0x5e32ae;var t,i=r.x,s=r.y,n=s-this.lat0,o=i-this.long0,c=n/SEC_TO_RAD*1e-5,_=o,l=1,h=0;for(t=1;t<=10;t++)l=l*c,h=h+this.A[t]*l;var f=h,m=_,g=1,C=0,E,P,w=0,M=0;for(t=1;t<=6;t++)E=g*f-C*m,P=C*f+g*m,g=E,C=P,w=w+this.B_re[t]*g-this[e(1150)][t]*C,M=M+this[e(1150)][t]*g+this.B_re[t]*C;return r.x=M*this.a+this.x0,r.y=w*this.a+this.y0,r}function inverse$c(r){const e={_0x915fb4:3774,_0x39dfac:1150,_0x296057:3774},t=_0x5e32ae;var i,s=r.x,n=r.y,o=s-this.x0,c=n-this.y0,_=c/this.a,l=o/this.a,h=1,f=0,m,g,C=0,E=0;for(i=1;i<=6;i++)m=h*_-f*l,g=f*_+h*l,h=m,f=g,C=C+this.C_re[i]*h-this[t(2127)][i]*f,E=E+this.C_im[i]*h+this.C_re[i]*f;for(var P=0;P<this[t(2280)];P++){var w=C,M=E,T,L,R=_,D=l;for(i=2;i<=6;i++)T=w*C-M*E,L=M*C+w*E,w=T,M=L,R=R+(i-1)*(this[t(e._0x915fb4)][i]*w-this[t(e._0x39dfac)][i]*M),D=D+(i-1)*(this[t(1150)][i]*w+this.B_re[i]*M);w=1,M=0;var N=this.B_re[1],k=this.B_im[1];for(i=2;i<=6;i++)T=w*C-M*E,L=M*C+w*E,w=T,M=L,N=N+i*(this[t(e._0x296057)][i]*w-this[t(e._0x39dfac)][i]*M),k=k+i*(this.B_im[i]*w+this[t(3774)][i]*M);var B=N*N+k*k;C=(R*N+D*k)/B,E=(D*N-R*k)/B}var $=C,H=E,W=1,J=0;for(i=1;i<=9;i++)W=W*$,J=J+this.D[i]*W;var z=this.lat0+J*SEC_TO_RAD*1e5,fe=this.long0+H;return r.x=fe,r.y=z,r}var names$c=["New_Zealand_Map_Grid",_0x5e32ae(731)],nzmg={init:init$c,forward:forward$c,inverse:inverse$c,names:names$c};function init$b(){}function forward$b(r){const e=_0x5e32ae;var t=r.x,i=r.y,s=adjust_lon(t-this[e(2957)]),n=this.x0+this.a*s,o=this.y0+this.a*Math.log(Math[e(597)](Math.PI/4+i/2.5))*1.25;return r.x=n,r.y=o,r}function inverse$b(r){const e={_0x569e1b:2023},t=_0x5e32ae;r.x-=this.x0,r.y-=this.y0;var i=adjust_lon(this[t(2957)]+r.x/this.a),s=2.5*(Math.atan(Math[t(e._0x569e1b)](.8*r.y/this.a))-Math.PI/4);return r.x=i,r.y=s,r}var names$b=["Miller_Cylindrical",_0x5e32ae(488)],mill={init:init$b,forward:forward$b,inverse:inverse$b,names:names$b},MAX_ITER=20;function init$a(){const r=_0x5e32ae;this[r(1887)]?(this.n=1,this.m=0,this.es=0,this[r(1311)]=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=pj_enfn(this.es)}function forward$a(r){const e={_0x16a9cc:3926},t=_0x5e32ae;var i,s,n=r.x,o=r.y;if(n=adjust_lon(n-this.long0),this.sphere){if(!this.m)o=this.n!==1?Math.asin(this.n*Math.sin(o)):o;else for(var c=this.n*Math.sin(o),_=MAX_ITER;_;--_){var l=(this.m*o+Math[t(442)](o)-c)/(this.m+Math.cos(o));if(o-=l,Math[t(e._0x16a9cc)](l)<EPSLN)break}i=this.a*this.C_x*n*(this.m+Math.cos(o)),s=this.a*this.C_y*o}else{var h=Math.sin(o),f=Math.cos(o);s=this.a*pj_mlfn(o,h,f,this.en),i=this.a*n*f/Math[t(928)](1-this.es*h*h)}return r.x=i,r.y=s,r}function inverse$a(r){const e={_0x3c7814:1311,_0x4dab62:442,_0x4b2e92:1784},t=_0x5e32ae;var i,s,n,o;return r.x-=this.x0,n=r.x/this.a,r.y-=this.y0,i=r.y/this.a,this.sphere?(i/=this[t(e._0x3c7814)],n=n/(this[t(729)]*(this.m+Math.cos(i))),this.m?i=asinz((this.m*i+Math.sin(i))/this.n):this.n!==1&&(i=asinz(Math[t(e._0x4dab62)](i)/this.n)),n=adjust_lon(n+this.long0),i=adjust_lat(i)):(i=pj_inv_mlfn(r.y/this.a,this.es,this.en),o=Math.abs(i),o<HALF_PI?(o=Math.sin(i),s=this.long0+r.x*Math.sqrt(1-this.es*o*o)/(this.a*Math[t(e._0x4b2e92)](i)),n=adjust_lon(s)):o-EPSLN<HALF_PI&&(n=this.long0)),r.x=n,r.y=i,r}var names$a=["Sinusoidal","sinu"],sinu={init:init$a,forward:forward$a,inverse:inverse$a,names:names$a};function init$9(){}function forward$9(r){const e={_0x15c384:442},t=_0x5e32ae;for(var i=r.x,s=r.y,n=adjust_lon(i-this[t(2957)]),o=s,c=Math.PI*Math[t(e._0x15c384)](s);[];){var _=-(o+Math[t(442)](o)-c)/(1+Math.cos(o));if(o+=_,Math.abs(_)<EPSLN)break}o/=2,Math.PI/2-Math.abs(s)<EPSLN&&(n=0);var l=.900316316158*this.a*n*Math.cos(o)+this.x0,h=1.4142135623731*this.a*Math.sin(o)+this.y0;return r.x=l,r.y=h,r}function inverse$9(r){const e=_0x5e32ae;var t,i;r.x-=this.x0,r.y-=this.y0,i=r.y/(1.4142135623731*this.a),Math[e(3926)](i)>.999999999999&&(i=.999999999999),t=Math.asin(i);var s=adjust_lon(this.long0+r.x/(.900316316158*this.a*Math.cos(t)));s<-Math.PI&&(s=-Math.PI),s>Math.PI&&(s=Math.PI),i=(2*t+Math.sin(2*t))/Math.PI,Math.abs(i)>1&&(i=1);var n=Math.asin(i);return r.x=s,r.y=n,r}var names$9=["Mollweide","moll"],moll={init:init$9,forward:forward$9,inverse:inverse$9,names:names$9};function init$8(){const r={_0x610a8f:2711,_0x574145:442,_0x34363b:442,_0x342ea6:741,_0x49200c:2972},e=_0x5e32ae;Math.abs(this.lat1+this.lat2)<EPSLN||(this[e(r._0x610a8f)]=this.lat2||this.lat1,this[e(2018)]=this.b/this.a,this.es=1-Math[e(3484)](this[e(2018)],2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.sinphi=Math[e(r._0x574145)](this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=msfnz(this.e,this.sinphi,this.cosphi),this[e(2972)]=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat1),Math[e(3926)](this.lat1-this.lat2)<EPSLN?this.ns=this.sinphi:(this[e(2990)]=Math[e(r._0x34363b)](this.lat2),this.cosphi=Math.cos(this.lat2),this[e(r._0x342ea6)]=msfnz(this.e,this[e(2990)],this.cosphi),this.ml2=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this[e(741)])/(this.ml2-this[e(r._0x49200c)])),this.g=this.ml1+this.ms1/this.ns,this[e(3597)]=mlfn(this.e0,this.e1,this.e2,this.e3,this[e(1996)]),this.rh=this.a*(this.g-this.ml0))}function forward$8(r){const e={_0x48bd49:2957},t=_0x5e32ae;var i=r.x,s=r.y,n;if(this.sphere)n=this.a*(this.g-s);else{var o=mlfn(this.e0,this.e1,this.e2,this.e3,s);n=this.a*(this.g-o)}var c=this.ns*adjust_lon(i-this[t(e._0x48bd49)]),_=this.x0+n*Math.sin(c),l=this.y0+this.rh-n*Math.cos(c);return r.x=_,r.y=l,r}function inverse$8(r){const e=_0x5e32ae;r.x-=this.x0,r.y=this.rh-r.y+this.y0;var t,i,s,n;this.ns>=0?(i=Math.sqrt(r.x*r.x+r.y*r.y),t=1):(i=-Math.sqrt(r.x*r.x+r.y*r.y),t=-1);var o=0;if(i!==0&&(o=Math.atan2(t*r.x,t*r.y)),this[e(1887)])return n=adjust_lon(this[e(2957)]+o/this.ns),s=adjust_lat(this.g-i/this.a),r.x=n,r.y=s,r;var c=this.g-i/this.a;return s=imlfn(c,this.e0,this.e1,this.e2,this.e3),n=adjust_lon(this[e(2957)]+o/this.ns),r.x=n,r.y=s,r}var names$8=["Equidistant_Conic","eqdc"],eqdc={init:init$8,forward:forward$8,inverse:inverse$8,names:names$8};function init$7(){this.R=this.a}function forward$7(r){const e={_0x2371aa:928},t=_0x5e32ae;var i=r.x,s=r.y,n=adjust_lon(i-this.long0),o,c;Math.abs(s)<=EPSLN&&(o=this.x0+this.R*n,c=this.y0);var _=asinz(2*Math.abs(s/Math.PI));(Math.abs(n)<=EPSLN||Math.abs(Math.abs(s)-HALF_PI)<=EPSLN)&&(o=this.x0,s>=0?c=this.y0+Math.PI*this.R*Math[t(597)](.5*_):c=this.y0+Math.PI*this.R*-Math.tan(.5*_));var l=.5*Math.abs(Math.PI/n-n/Math.PI),h=l*l,f=Math.sin(_),m=Math.cos(_),g=m/(f+m-1),C=g*g,E=g*(2/f-1),P=E*E,w=Math.PI*this.R*(l*(g-P)+Math[t(928)](h*(g-P)*(g-P)-(P+h)*(C-P)))/(P+h);n<0&&(w=-w),o=this.x0+w;var M=h+g;return w=Math.PI*this.R*(E*M-l*Math[t(e._0x2371aa)]((P+h)*(h+1)-M*M))/(P+h),s>=0?c=this.y0+w:c=this.y0-w,r.x=o,r.y=c,r}function inverse$7(r){const e=_0x5e32ae;var t,i,s,n,o,c,_,l,h,f,m,g,C;return r.x-=this.x0,r.y-=this.y0,m=Math.PI*this.R,s=r.x/m,n=r.y/m,o=s*s+n*n,c=-Math.abs(n)*(1+o),_=c-2*n*n+s*s,l=-2*c+1+2*n*n+o*o,C=n*n/l+(2*_*_*_/l/l/l-9*c*_/l/l)/27,h=(c-_*_/3/l)/l,f=2*Math[e(928)](-h/3),m=3*C/h/f,Math.abs(m)>1&&(m>=0?m=1:m=-1),g=Math.acos(m)/3,r.y>=0?i=(-f*Math.cos(g+Math.PI/3)-_/3/l)*Math.PI:i=-(-f*Math[e(1784)](g+Math.PI/3)-_/3/l)*Math.PI,Math.abs(s)<EPSLN?t=this.long0:t=adjust_lon(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(s*s-n*n)+o*o))/2/s),r.x=t,r.y=i,r}var names$7=["Van_der_Grinten_I",_0x5e32ae(2593),_0x5e32ae(4033)],vandg={init:init$7,forward:forward$7,inverse:inverse$7,names:names$7};function init$6(){const r={_0x21dc2c:2691},e=_0x5e32ae;this[e(r._0x21dc2c)]=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function forward$6(r){const e={_0x36b721:1569,_0x99211d:2691,_0x31f85d:935,_0x4981a1:1972,_0x57c048:1784},t=_0x5e32ae;var i=r.x,s=r.y,n=Math[t(442)](r.y),o=Math.cos(r.y),c=adjust_lon(i-this.long0),_,l,h,f,m,g,C,E,P,w,M,T,L,R,D,N,k,B,$,H,W,J,z;return this[t(1887)]?Math[t(3926)](this.sin_p12-1)<=EPSLN?(r.x=this.x0+this.a*(HALF_PI-s)*Math.sin(c),r.y=this.y0-this.a*(HALF_PI-s)*Math.cos(c),r):Math[t(3926)](this[t(2691)]+1)<=EPSLN?(r.x=this.x0+this.a*(HALF_PI+s)*Math.sin(c),r.y=this.y0+this.a*(HALF_PI+s)*Math.cos(c),r):(B=this.sin_p12*n+this[t(e._0x36b721)]*o*Math[t(1784)](c),N=Math.acos(B),k=N?N/Math.sin(N):1,r.x=this.x0+this.a*k*o*Math.sin(c),r.y=this.y0+this.a*k*(this[t(1569)]*n-this.sin_p12*o*Math.cos(c)),r):(_=e0fn(this.es),l=e1fn(this.es),h=e2fn(this.es),f=e3fn(this.es),Math.abs(this.sin_p12-1)<=EPSLN?(m=this.a*mlfn(_,l,h,f,HALF_PI),g=this.a*mlfn(_,l,h,f,s),r.x=this.x0+(m-g)*Math.sin(c),r.y=this.y0-(m-g)*Math.cos(c),r):Math[t(3926)](this[t(e._0x99211d)]+1)<=EPSLN?(m=this.a*mlfn(_,l,h,f,HALF_PI),g=this.a*mlfn(_,l,h,f,s),r.x=this.x0+(m+g)*Math[t(442)](c),r.y=this.y0+(m+g)*Math.cos(c),r):(C=n/o,E=gN(this.a,this.e,this.sin_p12),P=gN(this.a,this.e,n),w=Math.atan((1-this.es)*C+this.es*E*this[t(2691)]/(P*o)),M=Math[t(e._0x31f85d)](Math.sin(c),this[t(e._0x36b721)]*Math.tan(w)-this.sin_p12*Math.cos(c)),M===0?$=Math[t(e._0x4981a1)](this.cos_p12*Math.sin(w)-this.sin_p12*Math.cos(w)):Math.abs(Math.abs(M)-Math.PI)<=EPSLN?$=-Math.asin(this.cos_p12*Math.sin(w)-this[t(e._0x99211d)]*Math[t(e._0x57c048)](w)):$=Math.asin(Math[t(442)](c)*Math.cos(w)/Math.sin(M)),T=this.e*this[t(e._0x99211d)]/Math.sqrt(1-this.es),L=this.e*this.cos_p12*Math.cos(M)/Math.sqrt(1-this.es),R=T*L,D=L*L,H=$*$,W=H*$,J=W*$,z=J*$,N=E*$*(1-H*D*(1-D)/6+W/8*R*(1-2*D)+J/120*(D*(4-7*D)-3*T*T*(1-7*D))-z/48*R),r.x=this.x0+N*Math.sin(M),r.y=this.y0+N*Math.cos(M),r))}function inverse$6(r){const e={_0x876048:928,_0x342d9f:1784,_0x4bb9fc:2957,_0x5d8ce6:1972,_0x55ce2c:2691,_0x26cb17:2957,_0x5512b2:935},t=_0x5e32ae;r.x-=this.x0,r.y-=this.y0;var i,s,n,o,c,_,l,h,f,m,g,C,E,P,w,M,T,L,R,D,N,k,B,$;return this.sphere?(i=Math[t(e._0x876048)](r.x*r.x+r.y*r.y),i>2*HALF_PI*this.a?void 0:(s=i/this.a,n=Math.sin(s),o=Math[t(e._0x342d9f)](s),c=this.long0,Math.abs(i)<=EPSLN?_=this.lat0:(_=asinz(o*this[t(2691)]+r.y*n*this.cos_p12/i),l=Math[t(3926)](this.lat0)-HALF_PI,Math.abs(l)<=EPSLN?this.lat0>=0?c=adjust_lon(this[t(2957)]+Math.atan2(r.x,-r.y)):c=adjust_lon(this.long0-Math.atan2(-r.x,r.y)):c=adjust_lon(this[t(e._0x4bb9fc)]+Math.atan2(r.x*n,i*this.cos_p12*o-r.y*this[t(2691)]*n))),r.x=c,r.y=_,r)):(h=e0fn(this.es),f=e1fn(this.es),m=e2fn(this.es),g=e3fn(this.es),Math.abs(this.sin_p12-1)<=EPSLN?(C=this.a*mlfn(h,f,m,g,HALF_PI),i=Math[t(e._0x876048)](r.x*r.x+r.y*r.y),E=C-i,_=imlfn(E/this.a,h,f,m,g),c=adjust_lon(this[t(2957)]+Math.atan2(r.x,-1*r.y)),r.x=c,r.y=_,r):Math[t(3926)](this.sin_p12+1)<=EPSLN?(C=this.a*mlfn(h,f,m,g,HALF_PI),i=Math[t(928)](r.x*r.x+r.y*r.y),E=i-C,_=imlfn(E/this.a,h,f,m,g),c=adjust_lon(this.long0+Math.atan2(r.x,r.y)),r.x=c,r.y=_,r):(i=Math.sqrt(r.x*r.x+r.y*r.y),M=Math[t(935)](r.x,r.y),P=gN(this.a,this.e,this.sin_p12),T=Math.cos(M),L=this.e*this.cos_p12*T,R=-L*L/(1-this.es),D=3*this.es*(1-R)*this.sin_p12*this.cos_p12*T/(1-this.es),N=i/P,k=N-R*(1+R)*Math[t(3484)](N,3)/6-D*(1+3*R)*Math[t(3484)](N,4)/24,B=1-R*k*k/2-N*k*k*k/6,w=Math[t(e._0x5d8ce6)](this[t(e._0x55ce2c)]*Math.cos(k)+this.cos_p12*Math.sin(k)*T),c=adjust_lon(this[t(e._0x26cb17)]+Math[t(1972)](Math.sin(M)*Math.sin(k)/Math[t(1784)](w))),$=Math.sin(w),_=Math[t(e._0x5512b2)](($-this.es*B*this[t(2691)])*Math[t(597)](w),$*(1-this.es)),r.x=c,r.y=_,r))}var names$6=["Azimuthal_Equidistant","aeqd"],aeqd={init:init$6,forward:forward$6,inverse:inverse$6,names:names$6};function init$5(){const r={_0x1976b1:604},e=_0x5e32ae;this[e(r._0x1976b1)]=Math.sin(this[e(1996)]),this.cos_p14=Math.cos(this.lat0)}function forward$5(r){const e={_0x1aa79f:1784,_0x436795:442},t=_0x5e32ae;var i,s,n,o,c,_,l,h,f=r.x,m=r.y;return n=adjust_lon(f-this.long0),i=Math.sin(m),s=Math[t(e._0x1aa79f)](m),o=Math.cos(n),_=this.sin_p14*i+this.cos_p14*s*o,c=1,(_>0||Math.abs(_)<=EPSLN)&&(l=this.a*c*s*Math[t(e._0x436795)](n),h=this.y0+this.a*c*(this.cos_p14*i-this.sin_p14*s*o)),r.x=l,r.y=h,r}function inverse$5(r){const e={_0x2b1baf:1996},t=_0x5e32ae;var i,s,n,o,c,_,l;return r.x-=this.x0,r.y-=this.y0,i=Math.sqrt(r.x*r.x+r.y*r.y),s=asinz(i/this.a),n=Math.sin(s),o=Math.cos(s),_=this.long0,Math.abs(i)<=EPSLN?(l=this.lat0,r.x=_,r.y=l,r):(l=asinz(o*this[t(604)]+r.y*n*this.cos_p14/i),c=Math.abs(this[t(e._0x2b1baf)])-HALF_PI,Math.abs(c)<=EPSLN?(this.lat0>=0?_=adjust_lon(this.long0+Math[t(935)](r.x,-r.y)):_=adjust_lon(this.long0-Math.atan2(-r.x,r.y)),r.x=_,r.y=l,r):(_=adjust_lon(this.long0+Math[t(935)](r.x*n,i*this[t(2344)]*o-r.y*this.sin_p14*n)),r.x=_,r.y=l,r))}var names$5=["ortho"],ortho={init:init$5,forward:forward$5,inverse:inverse$5,names:names$5},FACE_ENUM={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},AREA_ENUM={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function init$4(){const r={_0x8cc8c1:1996,_0x339db8:1996,_0x50a438:1996,_0x3c38a0:3876,_0x4a25e5:3727},e=_0x5e32ae;this.x0=this.x0||0,this.y0=this.y0||0,this[e(r._0x8cc8c1)]=this.lat0||0,this[e(2957)]=this.long0||0,this.lat_ts=this[e(480)]||0,this[e(2542)]=this.title||"Quadrilateralized Spherical Cube",this[e(r._0x339db8)]>=HALF_PI-FORTPI/2?this[e(1728)]=FACE_ENUM.TOP:this[e(r._0x50a438)]<=-(HALF_PI-FORTPI/2)?this.face=FACE_ENUM.BOTTOM:Math.abs(this.long0)<=FORTPI?this.face=FACE_ENUM.FRONT:Math.abs(this[e(2957)])<=HALF_PI+FORTPI?this.face=this[e(2957)]>0?FACE_ENUM.RIGHT:FACE_ENUM.LEFT:this.face=FACE_ENUM[e(r._0x3c38a0)],this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this[e(r._0x4a25e5)])}function forward$4(r){const e={_0x53dea5:2957,_0x40642d:2594,_0x310340:4240,_0x3a6fad:3427,_0xeec0e1:442},t=_0x5e32ae;var i={x:0,y:0},s,n,o,c,_,l,h={value:0};if(r.x-=this[t(e._0x53dea5)],this.es!==0?s=Math.atan(this.one_minus_f_squared*Math.tan(r.y)):s=r.y,n=r.x,this.face===FACE_ENUM[t(1172)])c=HALF_PI-s,n>=FORTPI&&n<=HALF_PI+FORTPI?(h.value=AREA_ENUM.AREA_0,o=n-HALF_PI):n>HALF_PI+FORTPI||n<=-(HALF_PI+FORTPI)?(h.value=AREA_ENUM.AREA_1,o=n>0?n-SPI:n+SPI):n>-(HALF_PI+FORTPI)&&n<=-FORTPI?(h.value=AREA_ENUM[t(e._0x40642d)],o=n+HALF_PI):(h.value=AREA_ENUM[t(1883)],o=n);else if(this.face===FACE_ENUM.BOTTOM)c=HALF_PI+s,n>=FORTPI&&n<=HALF_PI+FORTPI?(h.value=AREA_ENUM[t(e._0x310340)],o=-n+HALF_PI):n<FORTPI&&n>=-FORTPI?(h.value=AREA_ENUM.AREA_1,o=-n):n<-FORTPI&&n>=-(HALF_PI+FORTPI)?(h.value=AREA_ENUM[t(2594)],o=-n-HALF_PI):(h[t(e._0x3a6fad)]=AREA_ENUM.AREA_3,o=n>0?-n+SPI:-n-SPI);else{var f,m,g,C,E,P,w;this[t(1728)]===FACE_ENUM.RIGHT?n=qsc_shift_lon_origin(n,+HALF_PI):this.face===FACE_ENUM.BACK?n=qsc_shift_lon_origin(n,+SPI):this[t(1728)]===FACE_ENUM.LEFT&&(n=qsc_shift_lon_origin(n,-HALF_PI)),C=Math[t(e._0xeec0e1)](s),E=Math.cos(s),P=Math.sin(n),w=Math.cos(n),f=E*w,m=E*P,g=C,this.face===FACE_ENUM.FRONT?(c=Math.acos(f),o=qsc_fwd_equat_face_theta(c,g,m,h)):this.face===FACE_ENUM.RIGHT?(c=Math[t(4281)](m),o=qsc_fwd_equat_face_theta(c,g,-f,h)):this.face===FACE_ENUM.BACK?(c=Math[t(4281)](-f),o=qsc_fwd_equat_face_theta(c,g,-m,h)):this.face===FACE_ENUM.LEFT?(c=Math.acos(-m),o=qsc_fwd_equat_face_theta(c,g,f,h)):(c=o=0,h[t(e._0x3a6fad)]=AREA_ENUM.AREA_0)}return l=Math.atan(12/SPI*(o+Math.acos(Math[t(442)](o)*Math.cos(FORTPI))-HALF_PI)),_=Math.sqrt((1-Math.cos(c))/(Math.cos(l)*Math.cos(l))/(1-Math.cos(Math.atan(1/Math.cos(o))))),h[t(3427)]===AREA_ENUM.AREA_1?l+=HALF_PI:h.value===AREA_ENUM.AREA_2?l+=SPI:h.value===AREA_ENUM.AREA_3&&(l+=1.5*SPI),i.x=_*Math.cos(l),i.y=_*Math.sin(l),i.x=i.x*this.a+this.x0,i.y=i.y*this.a+this.y0,r.x=i.x,r.y=i.y,r}function inverse$4(r){const e={_0x21f1c3:4240,_0x3e4928:3551,_0x2d9865:4240,_0x32db84:1728,_0x36aa5a:1798,_0x5bcc17:4240,_0x5b916f:2370,_0x5d1ce0:3241,_0x2501da:928,_0x121aec:3241,_0x837d7a:928},t=_0x5e32ae;var i={lam:0,phi:0},s,n,o,c,_,l,h,f,m,g={value:0};if(r.x=(r.x-this.x0)/this.a,r.y=(r.y-this.y0)/this.a,n=Math.atan(Math.sqrt(r.x*r.x+r.y*r.y)),s=Math[t(935)](r.y,r.x),r.x>=0&&r.x>=Math.abs(r.y)?g.value=AREA_ENUM[t(e._0x21f1c3)]:r.y>=0&&r.y>=Math[t(3926)](r.x)?(g.value=AREA_ENUM.AREA_1,s-=HALF_PI):r.x<0&&-r.x>=Math.abs(r.y)?(g.value=AREA_ENUM.AREA_2,s=s<0?s+SPI:s-SPI):(g.value=AREA_ENUM.AREA_3,s+=HALF_PI),m=SPI/12*Math.tan(s),_=Math.sin(m)/(Math.cos(m)-1/Math.sqrt(2)),l=Math[t(e._0x3e4928)](_),o=Math.cos(s),c=Math.tan(n),h=1-o*o*c*c*(1-Math.cos(Math.atan(1/Math.cos(l)))),h<-1?h=-1:h>1&&(h=1),this.face===FACE_ENUM.TOP)f=Math.acos(h),i.phi=HALF_PI-f,g[t(3427)]===AREA_ENUM[t(e._0x2d9865)]?i.lam=l+HALF_PI:g.value===AREA_ENUM.AREA_1?i.lam=l<0?l+SPI:l-SPI:g.value===AREA_ENUM[t(2594)]?i.lam=l-HALF_PI:i[t(3241)]=l;else if(this[t(e._0x32db84)]===FACE_ENUM.BOTTOM)f=Math.acos(h),i[t(e._0x36aa5a)]=f-HALF_PI,g.value===AREA_ENUM[t(e._0x5bcc17)]?i.lam=-l+HALF_PI:g.value===AREA_ENUM[t(e._0x5b916f)]?i[t(e._0x5d1ce0)]=-l:g.value===AREA_ENUM.AREA_2?i[t(3241)]=-l-HALF_PI:i[t(e._0x5d1ce0)]=l<0?-l-SPI:-l+SPI;else{var C,E,P;C=h,m=C*C,m>=1?P=0:P=Math.sqrt(1-m)*Math.sin(l),m+=P*P,m>=1?E=0:E=Math[t(e._0x2501da)](1-m),g.value===AREA_ENUM.AREA_1?(m=E,E=-P,P=m):g.value===AREA_ENUM.AREA_2?(E=-E,P=-P):g.value===AREA_ENUM[t(1883)]&&(m=E,E=P,P=-m),this.face===FACE_ENUM.RIGHT?(m=C,C=-E,E=m):this.face===FACE_ENUM.BACK?(C=-C,E=-E):this.face===FACE_ENUM.LEFT&&(m=C,C=E,E=-m),i.phi=Math.acos(-P)-HALF_PI,i[t(3241)]=Math.atan2(E,C),this.face===FACE_ENUM.RIGHT?i.lam=qsc_shift_lon_origin(i[t(3241)],-HALF_PI):this.face===FACE_ENUM.BACK?i[t(e._0x121aec)]=qsc_shift_lon_origin(i.lam,-SPI):this[t(1728)]===FACE_ENUM.LEFT&&(i[t(e._0x5d1ce0)]=qsc_shift_lon_origin(i.lam,+HALF_PI))}if(this.es!==0){var w,M,T;w=i.phi<0?1:0,M=Math.tan(i.phi),T=this.b/Math.sqrt(M*M+this.one_minus_f_squared),i.phi=Math.atan(Math[t(e._0x837d7a)](this.a*this.a-T*T)/(this.one_minus_f*T)),w&&(i.phi=-i[t(1798)])}return i.lam+=this.long0,r.x=i[t(3241)],r.y=i.phi,r}function qsc_fwd_equat_face_theta(r,e,t,i){const s={_0xabe6d5:3427,_0x1f1737:4240,_0x349286:3427,_0x5a8d94:2594},n=_0x5e32ae;var o;return r<EPSLN?(i[n(s._0xabe6d5)]=AREA_ENUM[n(s._0x1f1737)],o=0):(o=Math.atan2(e,t),Math.abs(o)<=FORTPI?i.value=AREA_ENUM.AREA_0:o>FORTPI&&o<=HALF_PI+FORTPI?(i.value=AREA_ENUM.AREA_1,o-=HALF_PI):o>HALF_PI+FORTPI||o<=-(HALF_PI+FORTPI)?(i[n(s._0x349286)]=AREA_ENUM[n(s._0x5a8d94)],o=o>=0?o-SPI:o+SPI):(i.value=AREA_ENUM.AREA_3,o+=HALF_PI)),o}function qsc_shift_lon_origin(r,e){var t=r+e;return t<-SPI?t+=TWO_PI:t>+SPI&&(t-=TWO_PI),t}var names$4=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"],qsc={init:init$4,forward:forward$4,inverse:inverse$4,names:names$4},COEFS_X=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],COEFS_Y=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],FXC=.8487,FYC=1.3523,C1=R2D/5,RC1=1/C1,NODES=18,poly3_val=function(r,e){return r[0]+e*(r[1]+e*(r[2]+e*r[3]))},poly3_der=function(r,e){return r[1]+e*(2*r[2]+e*3*r[3])};function newton_rapshon(r,e,t,i){for(var s=e;i;--i){var n=r(s);if(s-=n,Math.abs(n)<t)break}return s}function init$3(){const r={_0x25a869:2542},e=_0x5e32ae;this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this[e(r._0x25a869)]=this.title||"Robinson"}function forward$3(r){var e=adjust_lon(r.x-this.long0),t=Math.abs(r.y),i=Math.floor(t*C1);i<0?i=0:i>=NODES&&(i=NODES-1),t=R2D*(t-RC1*i);var s={x:poly3_val(COEFS_X[i],t)*e,y:poly3_val(COEFS_Y[i],t)};return r.y<0&&(s.y=-s.y),s.x=s.x*this.a*FXC+this.x0,s.y=s.y*this.a*FYC+this.y0,s}function inverse$3(r){const e={_0x5c0544:2957},t=_0x5e32ae;var i={x:(r.x-this.x0)/(this.a*FXC),y:Math.abs(r.y-this.y0)/(this.a*FYC)};if(i.y>=1)i.x/=COEFS_X[NODES][0],i.y=r.y<0?-HALF_PI:HALF_PI;else{var s=Math.floor(i.y*NODES);for(s<0?s=0:s>=NODES&&(s=NODES-1);;)if(COEFS_Y[s][0]>i.y)--s;else if(COEFS_Y[s+1][0]<=i.y)++s;else break;var n=COEFS_Y[s],o=5*(i.y-n[0])/(COEFS_Y[s+1][0]-n[0]);o=newton_rapshon(function(c){return(poly3_val(n,c)-i.y)/poly3_der(n,c)},o,EPSLN,100),i.x/=poly3_val(COEFS_X[s],o),i.y=(5*s+o)*D2R$1,r.y<0&&(i.y=-i.y)}return i.x=adjust_lon(i.x+this[t(e._0x5c0544)]),i}var names$3=["Robinson",_0x5e32ae(1804)],robin={init:init$3,forward:forward$3,inverse:inverse$3,names:names$3};function init$2(){const r=_0x5e32ae;this[r(3605)]=r(3139)}function forward$2(r){var e=geodeticToGeocentric(r,this.es,this.a);return e}function inverse$2(r){var e=geocentricToGeodetic(r,this.es,this.a,this.b);return e}var names$2=[_0x5e32ae(3938),_0x5e32ae(550),"geocent","Geocent"],geocent={init:init$2,forward:forward$2,inverse:inverse$2,names:names$2},mode={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},params={h:{def:1e5,num:!![]},azi:{def:0,num:!![],degrees:!![]},tilt:{def:0,num:!![],degrees:!![]},long0:{def:0,num:!![]},lat0:{def:0,num:!![]}};function init$1(){const r={_0x196f0:764,_0x170a6e:442,_0x460fef:1784,_0x2bfe8c:4265},e={_0x58eef6:3941},t=_0x5e32ae;if(Object.keys(params)[t(2500)](function(n){const o=t;if(typeof this[n]>"u")this[n]=params[n][o(e._0x58eef6)];else{if(params[n].num&&isNaN(this[n]))throw new Error("Invalid parameter value, must be numeric "+n+" = "+this[n]);params[n].num&&(this[n]=parseFloat(this[n]))}params[n].degrees&&(this[n]=this[n]*D2R$1)}.bind(this)),Math[t(3926)](Math.abs(this[t(1996)])-HALF_PI)<EPSLN?this.mode=this.lat0<0?mode[t(r._0x196f0)]:mode.N_POLE:Math.abs(this.lat0)<EPSLN?this.mode=mode.EQUIT:(this[t(3211)]=mode.OBLIQ,this.sinph0=Math[t(r._0x170a6e)](this.lat0),this.cosph0=Math[t(r._0x460fef)](this.lat0)),this[t(4265)]=this.h/this.a,this[t(4265)]<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this[t(r._0x2bfe8c)],this.pfact=(this.p+1)*this.h1,this.es=0;var i=this.tilt,s=this[t(2696)];this.cg=Math.cos(s),this.sg=Math.sin(s),this.cw=Math.cos(i),this.sw=Math.sin(i)}function forward$1(r){const e={_0x44cf68:721},t=_0x5e32ae;r.x-=this.long0;var i=Math[t(442)](r.y),s=Math[t(1784)](r.y),n=Math.cos(r.x),o,c;switch(this.mode){case mode.OBLIQ:c=this.sinph0*i+this[t(e._0x44cf68)]*s*n;break;case mode[t(2643)]:c=s*n;break;case mode[t(764)]:c=-i;break;case mode.N_POLE:c=i;break}switch(c=this.pn1/(this.p-c),o=c*s*Math.sin(r.x),this.mode){case mode.OBLIQ:c*=this.cosph0*i-this.sinph0*s*n;break;case mode.EQUIT:c*=i;break;case mode.N_POLE:c*=-(s*n);break;case mode.S_POLE:c*=s*n;break}var _,l;return _=c*this.cg+o*this.sg,l=1/(_*this.sw*this.h1+this.cw),o=(o*this.cg-c*this.sg)*this.cw*l,c=_*l,r.x=o*this.a,r.y=c*this.a,r}function inverse$1(r){const e={_0x3a8634:3926,_0x5dc469:4265,_0x1af35f:1972,_0x54c55d:3092,_0x56788c:442,_0x32a1d9:2643},t=_0x5e32ae;r.x/=this.a,r.y/=this.a;var i={x:r.x,y:r.y},s,n,o;o=1/(this.pn1-r.y*this.sw),s=this.pn1*r.x*o,n=this.pn1*r.y*this.cw*o,r.x=s*this.cg+n*this.sg,r.y=n*this.cg-s*this.sg;var c=hypot(r.x,r.y);if(Math[t(e._0x3a8634)](c)<EPSLN)i.x=0,i.y=r.y;else{var _,l;switch(l=1-c*c*this[t(1137)],l=(this.p-Math.sqrt(l))/(this.pn1/c+c/this[t(e._0x5dc469)]),_=Math[t(928)](1-l*l),this.mode){case mode.OBLIQ:i.y=Math[t(e._0x1af35f)](_*this[t(e._0x54c55d)]+r.y*l*this.cosph0/c),r.y=(_-this[t(3092)]*Math[t(e._0x56788c)](i.y))*c,r.x*=l*this.cosph0;break;case mode[t(e._0x32a1d9)]:i.y=Math.asin(r.y*l/c),r.y=_*c,r.x*=l;break;case mode.N_POLE:i.y=Math.asin(_),r.y=-r.y;break;case mode.S_POLE:i.y=-Math.asin(_);break}i.x=Math.atan2(r.x,r.y)}return r.x=i.x+this.long0,r.y=i.y,r}var names$1=[_0x5e32ae(1429),"tpers"],tpers={init:init$1,forward:forward$1,inverse:inverse$1,names:names$1};function init(){const r={_0x15dddd:4274,_0x40f824:910,_0x52f7a8:3009,_0x392204:2782},e=_0x5e32ae;if(this[e(r._0x15dddd)]=this[e(2882)]==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this[e(3548)]<=0||this.radius_g_1>1e10)throw new Error;if(this[e(r._0x40f824)]=1+this.radius_g_1,this.C=this[e(910)]*this[e(910)]-1,this.es!==0){var t=1-this.es,i=1/t;this[e(r._0x52f7a8)]=Math.sqrt(t),this.radius_p2=t,this[e(1161)]=i,this.shape=e(r._0x392204)}else this.radius_p=1,this.radius_p2=1,this[e(1161)]=1,this[e(1592)]="sphere";!this.title&&(this.title="Geostationary Satellite View")}function forward(r){const e={_0x5236fc:1784,_0x3d8cb5:910,_0x149f71:4274,_0x4b413c:3548,_0xbdf5e0:3548},t=_0x5e32ae;var i=r.x,s=r.y,n,o,c,_;if(i=i-this.long0,this[t(1592)]==="ellipse"){s=Math.atan(this.radius_p2*Math.tan(s));var l=this.radius_p/hypot(this.radius_p*Math.cos(s),Math.sin(s));if(o=l*Math[t(e._0x5236fc)](i)*Math.cos(s),c=l*Math[t(442)](i)*Math.cos(s),_=l*Math[t(442)](s),(this[t(e._0x3d8cb5)]-o)*o-c*c-_*_*this[t(1161)]<0)return r.x=Number.NaN,r.y=Number.NaN,r;n=this.radius_g-o,this[t(e._0x149f71)]?(r.x=this.radius_g_1*Math.atan(c/hypot(_,n)),r.y=this.radius_g_1*Math.atan(_/n)):(r.x=this[t(e._0x4b413c)]*Math.atan(c/n),r.y=this.radius_g_1*Math.atan(_/hypot(c,n)))}else this.shape==="sphere"&&(n=Math.cos(s),o=Math.cos(i)*n,c=Math.sin(i)*n,_=Math[t(442)](s),n=this.radius_g-o,this[t(4274)]?(r.x=this[t(3548)]*Math.atan(c/hypot(_,n)),r.y=this[t(e._0xbdf5e0)]*Math.atan(_/n)):(r.x=this.radius_g_1*Math.atan(c/n),r.y=this[t(e._0x4b413c)]*Math[t(3551)](_/hypot(c,n))));return r.x=r.x*this.a,r.y=r.y*this.a,r}function inverse(r){const e={_0x1940b9:597,_0x164394:3548,_0x171e30:3551,_0x2843b1:4274},t=_0x5e32ae;var i=-1,s=0,n=0,o,c,_,l;if(r.x=r.x/this.a,r.y=r.y/this.a,this[t(1592)]==="ellipse"){this.flip_axis?(n=Math[t(597)](r.y/this[t(3548)]),s=Math.tan(r.x/this.radius_g_1)*hypot(1,n)):(s=Math[t(e._0x1940b9)](r.x/this.radius_g_1),n=Math.tan(r.y/this[t(e._0x164394)])*hypot(1,s));var h=n/this.radius_p;if(o=s*s+h*h+i*i,c=2*this[t(910)]*i,_=c*c-4*o*this.C,_<0)return r.x=Number.NaN,r.y=Number.NaN,r;l=(-c-Math.sqrt(_))/(2*o),i=this.radius_g+l*i,s*=l,n*=l,r.x=Math.atan2(s,i),r.y=Math[t(e._0x171e30)](n*Math.cos(r.x)/i),r.y=Math.atan(this.radius_p_inv2*Math.tan(r.y))}else if(this.shape==="sphere"){if(this[t(e._0x2843b1)]?(n=Math.tan(r.y/this.radius_g_1),s=Math.tan(r.x/this.radius_g_1)*Math.sqrt(1+n*n)):(s=Math.tan(r.x/this[t(3548)]),n=Math.tan(r.y/this[t(e._0x164394)])*Math.sqrt(1+s*s)),o=s*s+n*n+i*i,c=2*this.radius_g*i,_=c*c-4*o*this.C,_<0)return r.x=Number[t(2139)],r.y=Number.NaN,r;l=(-c-Math.sqrt(_))/(2*o),i=this.radius_g+l*i,s*=l,n*=l,r.x=Math.atan2(s,i),r.y=Math.atan(n*Math[t(1784)](r.x)/i)}return r.x=r.x+this[t(2957)],r}var names=["Geostationary Satellite View","Geostationary_Satellite","geos"],geos={init,forward,inverse,names};function includedProjections(r){const e={_0x1c6b09:1586,_0x23a906:1894,_0x378d6b:1894,_0x2a540b:1586,_0x4fc9d0:4084,_0x592188:1586,_0x67c054:1586,_0x450c9b:4084},t=_0x5e32ae;r.Proj.projections.add(tmerc),r[t(e._0x1c6b09)][t(e._0x23a906)].add(etmerc),r[t(1586)][t(e._0x23a906)].add(utm),r.Proj[t(e._0x378d6b)].add(sterea),r.Proj.projections.add(stere),r.Proj.projections.add(somerc),r.Proj.projections.add(omerc),r.Proj[t(1894)].add(lcc),r[t(e._0x2a540b)][t(1894)][t(e._0x4fc9d0)](krovak),r.Proj.projections.add(cass),r[t(1586)][t(1894)][t(e._0x4fc9d0)](laea),r[t(e._0x592188)].projections[t(e._0x4fc9d0)](aea),r.Proj[t(e._0x378d6b)][t(4084)](gnom),r[t(e._0x2a540b)][t(e._0x23a906)][t(e._0x4fc9d0)](cea),r.Proj.projections.add(eqc),r.Proj.projections[t(4084)](poly),r.Proj[t(1894)][t(4084)](nzmg),r.Proj[t(e._0x378d6b)].add(mill),r[t(e._0x67c054)][t(1894)][t(e._0x4fc9d0)](sinu),r.Proj.projections.add(moll),r.Proj.projections[t(e._0x4fc9d0)](eqdc),r[t(1586)].projections.add(vandg),r.Proj[t(e._0x23a906)].add(aeqd),r.Proj.projections.add(ortho),r[t(1586)].projections[t(e._0x4fc9d0)](qsc),r.Proj.projections[t(e._0x4fc9d0)](robin),r.Proj.projections.add(geocent),r.Proj.projections.add(tpers),r.Proj.projections[t(e._0x450c9b)](geos)}proj4.defaultDatum="WGS84",proj4[_0x5e32ae(1586)]=Projection,proj4.WGS84=new proj4.Proj("WGS84"),proj4[_0x5e32ae(3743)]=Point,proj4.toPoint=common,proj4.defs=defs,proj4.nadgrid=nadgrid,proj4.transform=transform,proj4.mgrs=mgrs,proj4.version="__VERSION__",includedProjections(proj4);const CRS={EPSG3857:"EPSG:3857",EPSG4326:_0x5e32ae(3178),EPSG4490:"EPSG:4490",CGCS2000_GK_Zone_3:"CGCS2000_GK_Zone_3",CGCS2000_GK_Zone_6:_0x5e32ae(3013),CGCS2000_GK_CM_3:"CGCS2000_GK_CM_3",CGCS2000_GK_CM_6:"CGCS2000_GK_CM_6"},PI$1=3.141592653589793;class LngLatPoint{constructor(e,t,i){this._lng=Number(e||0),this._lat=Number(t||0),this._alt=Number(i||0)}get[_0x5e32ae(3411)](){return this._lng}set[_0x5e32ae(3411)](e){this._lng=+e,this._position=null}get[_0x5e32ae(448)](){return this[_0x5e32ae(2756)]}set lat(e){const t={_0x21bf70:2756},i=_0x5e32ae;this[i(t._0x21bf70)]=+e,this._position=null}get alt(){return this._alt||0}set alt(e){const t=_0x5e32ae;this._alt=+e,this._position&&this._position instanceof Cesium__namespace.Cartesian3&&(this[t(918)]=null)}clone(){const e={_0x4060bf:3411},t=_0x5e32ae,i=new LngLatPoint;return i[t(e._0x4060bf)]=this.lng||0,i.lat=this.lat||0,i[t(3984)]=this.alt||0,i}[_0x5e32ae(3109)](){return this.lng=formatNum$2(this.lng,LngLatPoint.FormatLength),this.lat=formatNum$2(this.lat,LngLatPoint.FormatLength),this.alt=formatNum$2(this.alt,LngLatPoint.FormatAltLength),this}[_0x5e32ae(725)](e){const t={_0x1e8f95:448,_0xf65492:3984},i=_0x5e32ae;return this.format(),e?[this.lng,this.lat]:[this.lng,this[i(t._0x1e8f95)],this[i(t._0xf65492)]]}toString(){const e={_0x3ef80d:3411},t=_0x5e32ae;return this.format(),this[t(e._0x3ef80d)]+","+this.lat+","+this.alt}toCartesian(e=![]){return!e&&this[_0x5e32ae({_0x38711f:918}._0x38711f)]?this._position:Cesium__namespace.Cartesian3.fromDegrees(this.lng,this.lat,this.alt)}toCartographic(){const e={_0x1e095f:3984},t=_0x5e32ae;return Cesium__namespace.Cartographic.fromDegrees(this.lng,this.lat,this[t(e._0x1e095f)])}toMercator(){const e={_0x2fcb9d:1193,_0x1554e8:1124},t=_0x5e32ae;let i=Math[t(e._0x2fcb9d)](this.lng,180);i=Math[t(e._0x1554e8)](i,-180);let s=Math.min(this.lat,85.05112877980659);s=Math.max(s,-85.05112877980659);const n=i*2003750834e-2/180;let o=Math.log(Math.tan((90+s)*PI$1/360))/(PI$1/180);return o=o*2003750834e-2/180,[n,o,this.alt]}equals(e){return this===e||e instanceof LngLatPoint&&this._alt===e._alt&&this._lat===e._lat&&this._lng===e._lng}[_0x5e32ae(3653)](){const e={_0x16fdbd:2756},t=_0x5e32ae;return isNaN(this[t(2756)])||isNaN(this[t(1315)])?![]:this[t(e._0x16fdbd)]<-90||this._lat>90||this[t(1315)]<-180||this[t(1315)]>180?![]:this[t(2756)]===0&&this._lng===0&&this._alt===0?![]:!![]}static parse(e,t){const i={_0x493550:448,_0xd7dd99:918},s=_0x5e32ae;if(!e)return new LngLatPoint;if(e instanceof LngLatPoint)return e;let n;if(typeof e=="string")n=LngLatPoint[s(3404)](e);else if(Array.isArray(e))n=LngLatPoint.fromArray(e);else if(e instanceof LngLatPoint)n=e.clone();else if(Cesium__namespace.defined(e[s(i._0x493550)])&&Cesium__namespace.defined(e.lng)){n=new LngLatPoint(e.lng,e[s(448)],e.alt);for(const o in e)n[o]=e[o]}else e instanceof Cesium__namespace.Cartesian3||e._value||e.getValue?(n=LngLatPoint.fromCartesian(e,t),n[s(i._0xd7dd99)]=e):Cesium__namespace.defined(e.x)&&Cesium__namespace[s(515)](e.y)&&Cesium__namespace.defined(e.z)?(e=new Cesium__namespace.Cartesian3(e.x,e.y,e.z),n=LngLatPoint[s(3236)](e,t),n._position=e):(n=new LngLatPoint,logError$1(s(2351),e));return n}static[_0x5e32ae(3250)](e){const t={_0x5f13be:3411},i=_0x5e32ae,s=new LngLatPoint;return Array[i(3845)](e)&&(s[i(t._0x5f13be)]=e[0]||0,s.lat=e[1]||0,s.alt=e[2]||0),s}static fromString(e){const t={_0x5584c1:1661},i=_0x5e32ae;let s=new LngLatPoint;if(e&&typeof e===i(t._0x5584c1)){const n=e.split(",");s=this.fromArray(n)}return s}static[_0x5e32ae(3236)](e,t){const i={_0x482c2e:527},s=_0x5e32ae,n=new LngLatPoint;let o;if(e&&(e instanceof Cesium__namespace.Cartesian3?o=e:e._value&&e._value instanceof Cesium__namespace.Cartesian3?o=e._value:typeof e.getValue=="function"&&(o=e.getValue(t||Cesium__namespace[s(i._0x482c2e)].now()))),o){const c=Cesium__namespace[s(3026)].fromCartesian(o);c&&(n.lat=Cesium__namespace.Math.toDegrees(c.latitude),n.lng=Cesium__namespace.Math.toDegrees(c.longitude),n[s(3984)]=c.height,n[s(3109)]())}return n._position=e,n}static[_0x5e32ae(3163)](e){const t={_0xf5c21f:448,_0x66f5f3:1286,_0x54d0fa:1984,_0x1282e7:1640},i=_0x5e32ae,s=new LngLatPoint;return s[i(t._0xf5c21f)]=Cesium__namespace[i(t._0x66f5f3)][i(1984)](e[i(3701)]),s.lng=Cesium__namespace[i(1286)][i(t._0x54d0fa)](e[i(t._0x1282e7)]),s.alt=e.height,s}static fromMercator(e){const t=Number(e[0]),i=Number(e[1]),s=t/2003750834e-2*180;let n=i/2003750834e-2*180;return n=180/PI$1*(2*Math.atan(Math.exp(n*PI$1/180))-PI$1/2),new LngLatPoint(s,n,e[2]||0)}static[_0x5e32ae(2048)](e,t){return!e||e instanceof Cesium__namespace.Cartesian3?e:LngLatPoint.parse(e,t).toCartesian(!![])}static[_0x5e32ae(3530)](e,t){return!e||e instanceof Cesium__namespace[_0x5e32ae({_0x21cb57:3026}._0x21cb57)]?e:LngLatPoint.parse(e,t).toCartographic()}static toArray(e,t){const i=LngLatPoint.parse(e);return!i||!i.valid()?[]:i.toArray(t)}}LngLatPoint.FormatLength=6,LngLatPoint[_0x5e32ae(3190)]=1;function formatNum$2(r,e=0){const t=Math.pow(10,e);return Math.round(r*t)/t}class LngLatArray{static toCartesians(e,t){if(!e||!Array.isArray(e))return e;const i=[];return e.forEach(function(s){const n=_0x5210;if(s instanceof Cesium__namespace.Cartesian3){t?i.push(s.clone()):i.push(s);return}const o=LngLatPoint.parse(s);!o||!o.valid()||i[n(3759)](o[n(2048)](!![]))}),i}static toCartographics(e,t){if(!e||!Array.isArray(e))return e;const i=[];return e.forEach(function(s){const n=_0x5210;if(s instanceof Cesium__namespace.Cartographic){t?i[n(3759)](s.clone()):i[n(3759)](s);return}const o=LngLatPoint[n(1426)](s);!o||!o.valid()||i.push(o.toCartographic())}),i}static toPoints(e,t){const i={_0x3fa4ba:2500},s=_0x5e32ae;if(!e||!Array.isArray(e))return e;const n=[];return e[s(i._0x3fa4ba)](function(o){const c=s;if(o instanceof LngLatPoint&&!t){n[c(3759)](o);return}const _=LngLatPoint.parse(o);!_||!_.valid()||n.push(_)}),n}static toArray(e,t){if(!e||!Array.isArray(e))return e;const i=[];return e.forEach(function(s){const n=_0x5210;if(Array.isArray(s)){i[n(3759)](s);return}const o=LngLatPoint.parse(s);!o||!o.valid()||i.push(o.toArray(t))}),i}}function degree2dms(r){const e=_0x5e32ae;let t=1;r<0&&(t=-1),r=Math.abs(r);let i=Math[e(1382)](r);const s=Math[e(1382)]((r-i)*60),n=Math.round((r-i)*3600%60);return i*=t,{degree:i,minute:s,second:n,str:i+"° "+s+"'  "+n+'"'}}function dms2degree(r,e,t){let s=Math[_0x5e32ae(3926)](r)+e/60+t/3600;return r<0&&(s*=-1),s}function getCGCS2000EPSGByLng(r,e,t=!![]){let i;if(e){const s=parseInt(r/6)+1;if(s<13||s>23)return;t?i=s+4478:i=s+4489}else{const s=parseInt((r-1.5)/3)+1;if(s<25||s>45)return;t?i=s+4488:i=s+4509}return"EPSG:"+i}function getCGCS2000EPSGByX(r){const e={_0x161691:4130,_0x47e43e:869,_0x2f406e:2066},t=_0x5e32ae,i=parseInt(r[t(e._0x161691)]()[t(e._0x47e43e)](0,2));return i>=13&&i<=23?t(2066)+(i+4478):i>=25&&i<=45?t(e._0x2f406e)+(i+4488):void 0}function proj4Trans(r,e,t=_0x5e32ae(3178)){const i={_0x7cbfd8:4109},s=_0x5e32ae;if(!e||!t||e===t)return r;try{if((e===CRS.CGCS2000_GK_Zone_3||e===CRS.CGCS2000_GK_Zone_6)&&(e=getCGCS2000EPSGByX(r[0])),t===CRS[s(i._0x7cbfd8)]?t=getCGCS2000EPSGByLng(r[0],![],!![]):t===CRS.CGCS2000_GK_Zone_6?t=getCGCS2000EPSGByLng(r[0],!![],!![]):t===CRS.CGCS2000_GK_CM_3?t=getCGCS2000EPSGByLng(r[0],![],![]):t===CRS[s(462)]&&(t=getCGCS2000EPSGByLng(r[0],!![],![])),!e||!t||e===t)return r;const n=proj4(e,t,r);if(Cesium__namespace.defined(n)&&n.length>1&&!isNaN(n[0])&&n[0]!==1/0)return n}catch{}return r}function proj4TransArr(r,e,t=_0x5e32ae(3178)){const i=_0x5e32ae;if(!e||e===t)return r;const s=[];for(let n=0,o=r.length;n<o;n++){const c=r[n];if(Array.isArray(c[0])){const _=proj4TransArr(c,e,t);_&&_[i(3402)]>0&&s.push(_)}else{const _=proj4Trans(c,e,t);_&&s.push(_)}}return s}function cartesian2lonlat(r,e){return LngLatPoint[_0x5e32ae({_0x4368e1:725}._0x4368e1)](r,e)}function cartesians2lonlats(r,e){return LngLatArray.toArray(r,e)}function cartesian2mercator(r){const e=_0x5e32ae;return r?LngLatPoint[e(3236)](r).toMercator():null}function cartesians2mercators(r){const e={_0x5c687b:3759},t=_0x5e32ae,i=[];for(let s=0,n=r.length;s<n;s++){const o=cartesian2mercator(r[s]);o&&i[t(e._0x5c687b)](o)}return i}function lonlat2cartesian(r,e=0){const t=_0x5e32ae;return!r||r.length<2?null:Cesium__namespace[t(3916)].fromDegrees(r[0],r[1],r[2]||e)}function lonlats2cartesians(r,e){const t=_0x5e32ae,i=[];for(let s=0,n=r[t(3402)];s<n;s++){const o=r[s];if(Array[t(3845)](o[0])){const c=lonlats2cartesians(o,e);c&&c.length>0&&i.push(c)}else{const c=lonlat2cartesian(o,e);c&&i.push(c)}}return i}function lonlat2mercator(r){const e=_0x5e32ae;return LngLatPoint.fromArray(r)[e(3709)]()}function lonlats2mercators(r){const e={_0x1b51b2:3759},t=_0x5e32ae,i=[];for(let s=0,n=r.length;s<n;s++){const o=lonlat2mercator(r[s]);i[t(e._0x1b51b2)](o)}return i}function mercator2cartesian(r,e){const t={_0x4213e6:2048},i=_0x5e32ae;if(isNaN(r[0])||isNaN(r[1]))return null;const s=LngLatPoint.fromMercator(r);return Cesium__namespace[i(515)](e)&&(s.alt=e),s[i(t._0x4213e6)]()}function mercators2cartesians(r,e){const t=_0x5e32ae,i=[];for(let s=0,n=r[t(3402)];s<n;s++){const o=mercator2cartesian(r[s],e);o&&i.push(o)}return i}function mercator2lonlat(r){const e=_0x5e32ae;return LngLatPoint[e(1437)](r)[e(725)]()}function mercators2lonlats(r){const e=_0x5e32ae,t=[];for(let i=0,s=r.length;i<s;i++){const n=mercator2lonlat(r[i]);t[e(3759)](n)}return t}const x_PI=3.141592653589793*3e3/180,PI=3.141592653589793,a=6378245,ee=.00669342162296594;function transformlat(r,e){const t=_0x5e32ae;let i=-100+2*r+3*e+.2*e*e+.1*r*e+.2*Math.sqrt(Math.abs(r));return i+=(20*Math.sin(6*r*PI)+20*Math.sin(2*r*PI))*2/3,i+=(20*Math.sin(e*PI)+40*Math.sin(e/3*PI))*2/3,i+=(160*Math.sin(e/12*PI)+320*Math[t(442)](e*PI/30))*2/3,i}function transformlng(r,e){const t={_0xbfe4e2:442},i=_0x5e32ae;let s=300+r+2*e+.1*r*r+.1*r*e+.1*Math.sqrt(Math.abs(r));return s+=(20*Math.sin(6*r*PI)+20*Math[i(t._0xbfe4e2)](2*r*PI))*2/3,s+=(20*Math.sin(r*PI)+40*Math.sin(r/3*PI))*2/3,s+=(150*Math[i(t._0xbfe4e2)](r/12*PI)+300*Math.sin(r/30*PI))*2/3,s}function out_of_china(r,e){return r<72.004||r>137.8347||e<.8293||e>55.8271||![]}function bd2gcj(r){const e={_0x42da34:1784},t=_0x5e32ae,i=Number(r[0]),s=Number(r[1]),n=3.141592653589793*3e3/180,o=i-.0065,c=s-.006,_=Math.sqrt(o*o+c*c)-2e-5*Math.sin(c*n),l=Math.atan2(c,o)-3e-6*Math[t(e._0x42da34)](o*n);let h=_*Math.cos(l),f=_*Math.sin(l);return h=Number(h.toFixed(6)),f=Number(f[t(1029)](6)),[h,f]}function gcj2bd(r){const e={_0x45332e:442},t=_0x5e32ae,i=Number(r[0]),s=Number(r[1]),n=Math.sqrt(i*i+s*s)+2e-5*Math[t(e._0x45332e)](s*x_PI),o=Math.atan2(s,i)+3e-6*Math.cos(i*x_PI);let c=n*Math[t(1784)](o)+.0065,_=n*Math.sin(o)+.006;return c=Number(c.toFixed(6)),_=Number(_.toFixed(6)),[c,_]}function wgs2gcj(r){const e=_0x5e32ae,t=Number(r[0]),i=Number(r[1]);if(out_of_china(t,i))return[t,i];{let s=transformlat(t-105,i-35),n=transformlng(t-105,i-35);const o=i/180*PI;let c=Math[e(442)](o);c=1-ee*c*c;const _=Math.sqrt(c);s=s*180/(a*(1-ee)/(c*_)*PI),n=n*180/(a/_*Math.cos(o)*PI);let l=i+s,h=t+n;return h=Number(h[e(1029)](6)),l=Number(l.toFixed(6)),[h,l]}}function gcj2wgs(r){const e={_0x14c36a:442,_0x286947:1784},t=_0x5e32ae,i=Number(r[0]),s=Number(r[1]);if(out_of_china(i,s))return[i,s];{let n=transformlat(i-105,s-35),o=transformlng(i-105,s-35);const c=s/180*PI;let _=Math[t(e._0x14c36a)](c);_=1-ee*_*_;const l=Math.sqrt(_);n=n*180/(a*(1-ee)/(_*l)*PI),o=o*180/(a/l*Math[t(e._0x286947)](c)*PI);const h=s+n,f=i+o;let m=i*2-f,g=s*2-h;return m=Number(m.toFixed(6)),g=Number(g.toFixed(6)),[m,g]}}function bd2wgs(r){return gcj2wgs(bd2gcj(r))}function wgs2bd(r){return gcj2bd(wgs2gcj(r))}var PointTrans={__proto__:null,degree2dms,dms2degree,getCGCS2000EPSGByLng,getCGCS2000EPSGByX,proj4Trans,proj4TransArr,cartesian2lonlat,cartesians2lonlats,cartesian2mercator,cartesians2mercators,lonlat2cartesian,lonlats2cartesians,lonlat2mercator,lonlats2mercators,mercator2cartesian,mercators2cartesians,mercator2lonlat,mercators2lonlats,bd2gcj,gcj2bd,wgs2gcj,gcj2wgs,bd2wgs,wgs2bd};const Lang={_放大:["放大","放大","Zoom In"],_缩小:["缩小","縮小","Zoom Out"],_查看此处坐标:["查看此处坐标","查看此處坐標",_0x5e32ae(3734)],_位置信息:["位置信息","位置信息",_0x5e32ae(3659)],_经度:["经度","經度","Lon"],_纬度:["纬度","緯度",_0x5e32ae(444)],_海拔:["高程","高程",_0x5e32ae(784)],_横坐标:["横坐标","橫坐標","X"],_纵坐标:["纵坐标","縱坐標","Y"],_查看当前视角:["查看当前视角","查看當前視角",_0x5e32ae(2353)],_当前视角信息:["当前视角信息","當前視角信息","Current Camera Information"],_视角切换:["视角切换","視角切換","Camera"],_禁止进入地下:["禁止进入地下","禁止進入地下","Do not go underground"],_允许进入地下:["允许进入地下",_0x5e32ae(4076),_0x5e32ae(3375)],_绕此处环绕飞行:["绕此处环绕飞行","繞此處環繞飛行",_0x5e32ae(1495)],_关闭环绕飞行:["关闭环绕飞行","關閉環繞飛行","Close off circling"],_移动到此处:["移动到此处",_0x5e32ae(1994),_0x5e32ae(2677)],_第一视角站到此处:["第一视角站到此处","第一視角站到此處","First view is here"],_开启键盘漫游:[_0x5e32ae(2947),_0x5e32ae(4211),"Enable keyboard roaming"],_关闭键盘漫游:["关闭键盘漫游","關閉鍵盤漫遊",_0x5e32ae(2013)],_跟踪锁定:["跟踪锁定","跟踪鎖定","TrackedEntity"],_取消锁定:["取消锁定",_0x5e32ae(2604),"Unlocked"],_三维模型:[_0x5e32ae(3580),"三維模型",_0x5e32ae(3810)],_显示三角网:[_0x5e32ae(2241),"顯示三角網","Display Wireframe"],_关闭三角网:["关闭三角网","關閉三角網",_0x5e32ae(3293)],_显示包围盒:[_0x5e32ae(3067),"顯示包圍盒","Display BoundingVolume"],_关闭包围盒:[_0x5e32ae(543),_0x5e32ae(3847),"Close BoundingVolume"],_地形服务:["地形服务","地形服務","Terrain"],_开启地形:["开启地形","顯示地形","Open terrain"],_关闭地形:["关闭地形","關閉地形","Close terrain"],_图上标记:["图上标记",_0x5e32ae(2956),"Drawing"],_标记点:[_0x5e32ae(1703),"標記點","Mark points"],_标记线:["标记线","標記線","Tag line"],_标记面:["标记面",_0x5e32ae(1144),"Mark surface"],_标记圆:[_0x5e32ae(3171),"標記圓",_0x5e32ae(3446)],_标记矩形:[_0x5e32ae(1505),_0x5e32ae(1424),"Mark rectangular"],_允许编辑:["允许编辑","允許編輯",_0x5e32ae(2672)],_禁止编辑:["禁止编辑","禁止編輯","Prohibit to edit"],_导出GeoJSON:["导出GeoJSON","導出GeoJSON","Export GeoJSON"],_清除所有标记:["清除所有标记","清除所有標記","Clear"],_特效效果:["特效效果","特效效果","Effects"],_开启下雨:["开启下雨",_0x5e32ae(504),"Enable rain"],_关闭下雨:["关闭下雨","關閉下雨",_0x5e32ae(2120)],_开启下雪:["开启下雪","開啓下雪",_0x5e32ae(2878)],_关闭下雪:["关闭下雪","關閉下雪","Close snow"],_开启雾天气:["开启雾天气",_0x5e32ae(2282),"Enable fog"],_关闭雾天气:["关闭雾天气","關閉霧天氣","Close fog"],_开启泛光:["开启泛光","開啓泛光","Enable bloom"],_关闭泛光:["关闭泛光","關閉泛光","Close bloom"],_开启亮度:["开启亮度",_0x5e32ae(3435),_0x5e32ae(2522)],_关闭亮度:[_0x5e32ae(4127),"關閉亮度","Close brightness"],_开启夜视:["开启夜视","開啓夜視","Enable night vision"],_关闭夜视:[_0x5e32ae(679),_0x5e32ae(2830),"Close night vision"],_开启黑白:["开启黑白","開啓黑白","Enable black and white"],_关闭黑白:[_0x5e32ae(888),"關閉黑白","Close black and white"],_开启拾取高亮:[_0x5e32ae(2178),_0x5e32ae(520),_0x5e32ae(1606)],_关闭拾取高亮:["关闭拾取高亮","關閉拾取高亮","Close Pick highlighted"],_场景设置:[_0x5e32ae(2906),"場景設置",_0x5e32ae(2161)],_开启深度监测:["开启深度监测","開啓深度監測","Enable depth test against terrain"],_关闭深度监测:["关闭深度监测","關閉深度監測","Close depth test against terrain"],_显示星空背景:[_0x5e32ae(2011),"顯示星空背景",_0x5e32ae(2115)],_关闭星空背景:["关闭星空背景",_0x5e32ae(2821),_0x5e32ae(984)],_开启日照阴影:["开启日照阴影","開啓日照陰影","Enable shadow"],_关闭日照阴影:["关闭日照阴影",_0x5e32ae(4042),"Close shadow"],_开启大气渲染:[_0x5e32ae(3606),"開啓大氣渲染",_0x5e32ae(4163)],_关闭大气渲染:["关闭大气渲染","關閉大氣渲染","Close sky atmosphere"],_场景出图:[_0x5e32ae(3121),"場景出圖","Export image"],_图上量算:[_0x5e32ae(2925),"圖上量算","Measure"],_删除测量:["删除测量","刪除測量",_0x5e32ae(506)],_角度:["角度","角度","Angle"],_距离:["距离","距離","Distance"],_面积:["面积","面積","Area"],_总长:["总长","總長","Total distance"],_起点:["起点","起點","Start"],_高度差:["高度差","高度差","Height difference"],_空间距离:[_0x5e32ae(3437),"空間距離",_0x5e32ae(2083)],_水平距离:["水平距离",_0x5e32ae(1461),"Horizontal distance"],_正在计算体积:["正在计算体积",_0x5e32ae(3557),_0x5e32ae(2654)],_填方体积:[_0x5e32ae(1814),"填方體積","The volume of fill"],_挖方体积:[_0x5e32ae(1853),"挖方體積","Excavation volume"],_横切面积:["横切面积","橫切面積","Crosscutting area"],_面上:["面上","面上","Up"],_面下:["面下","面下","Down"],_米:["米","米","m"],_公里:["公里","公裏","km"],_万米:["万米","万米","myriametre"],_海里:["海里","海裏","mile"],_丈:["丈","丈","zhang"],_平方米:["平方米","平方米","m²"],_平方公里:["平方公里","平方公裏","km²"],_亩:["亩","畝","mu"],_公顷:["公顷","公頃","ha"],_立方米:["方","方","m³"],_万立方米:["万方","万方","wm³"],_单击开始绘制:[_0x5e32ae(1959),"單擊開始繪制","Click to start drawing"],_单击完成绘制:["单击完成绘制","單擊完成繪制",_0x5e32ae(3366)],_双击完成绘制:[_0x5e32ae(2567),_0x5e32ae(987),_0x5e32ae(3075)],_单击增加点:["单击增加点","單擊增加點",_0x5e32ae(897)],_右击删除点:["右击删除点","右擊刪除點","right click delete point"],_单击后激活编辑:["单击后激活编辑","單擊後 激活編輯","Click to activate editing"],_右击菜单删除:[_0x5e32ae(2907),_0x5e32ae(1808),_0x5e32ae(1778)],_更多功能请右击:["更多功能请右击",_0x5e32ae(2879),"For more functions, right click"],_停止编辑:[_0x5e32ae(647),"停止編輯","Stop editing"],_删除该点:["删除该点","刪除該點",_0x5e32ae(2974)],_按轴平移:[_0x5e32ae(3840),_0x5e32ae(1264),_0x5e32ae(4272)],_停止按轴平移:[_0x5e32ae(3358),"停止按軸平移","Stop translation along axis"],_按轴旋转:["按轴旋转","按軸旋轉",_0x5e32ae(2100)],_停止按轴旋转:[_0x5e32ae(3752),"停止按軸旋轉","Stop rotation on axis"],_调整比例:["调整比例","調整比例",_0x5e32ae(1375)],_停止调整比例:["停止调整比例",_0x5e32ae(1129),"Stop edit scale"],_释放后完成修改:["释放后完成修改","釋放後完成修改","Complete the modification after release"],_该对象不允许编辑:["该对象不允许编辑","該對象不允許編輯","This object does not allow editing"],_拖动该点后:["拖动该点后",_0x5e32ae(854),_0x5e32ae(740)],_拖动对象后:["拖动对象后",_0x5e32ae(3533),"Drag that object"],_修改位置:[_0x5e32ae(1021),"修改位置","Modify the position"],_整体平移:["整体平移","整體平移",_0x5e32ae(1349)],_增加点:["增加点",_0x5e32ae(4131),"Add point"],_修改高度:["修改高度","修改高度","Modify the height"],_修改半径:["修改半径",_0x5e32ae(4260),"Modify the radius"],_修改长度:["修改长度(X方向)",_0x5e32ae(1238),_0x5e32ae(4312)],_修改宽度:["修改宽度(Y方向)",_0x5e32ae(3035),"Change the width(Y direction)"],_修改方向:["修改方向","修改方向","Change direction"],_修改缩放比例:["修改缩放比例",_0x5e32ae(798),"Modify the Scale"],_无法删除不能少于最小点数:["无法删除，点数量不能少于","無法刪除，點數量不能少于","Cannot delete, the number of dots cannot be less than"],_删除:["删除","刪除",_0x5e32ae(506)],_加载模型中:["加载模型中…","加载模型中…",_0x5e32ae(3524)]};function xhrAdapter(r){const e={_0x39a179:4150,_0xec887f:3745,_0x107f4a:3154,_0xd865c9:3020,_0x201865:2648,_0xcc93ba:3591},t={_0x14feaa:872,_0x517ede:872,_0x3b5a44:2375},i={_0x118ed3:564};return r={method:"get",timeout:0,maxContentLength:-1,maxBodyLength:-1,params:r.queryParameters||{},...r},new Promise(function(n,o){const c={_0x2327ca:3535,_0x3be246:3745},_={_0x113171:3531},l=_0x5210;let h=r.data;const f=r[l(771)]||{},m=r.responseType;isFormData(h)&&delete f["Content-Type"];let g=new XMLHttpRequest;g[l(498)](r.method.toUpperCase(),buildURL(r.url,r.params,r.paramsSerializer),!![]),g.timeout=r.timeout;function C(){const E=l;if(!g)return;const P=E(2202)in g?parseHeaders(g.getAllResponseHeaders()):null,w=!m||m==="text"||m===E(i._0x118ed3)?g[E(3537)]:g.response,M={data:transformResponse(g,w),status:g.status,statusText:g.statusText,headers:P,options:r,request:g};settle(function(L){n(L)},function(L){o(L)},M),g=null}"onloadend"in g?g[l(1746)]=C:g.onreadystatechange=function(){const P=l;!g||g.readyState!==4||g[P(2003)]===0&&!(g.responseURL&&g.responseURL.indexOf(P(_._0x113171))===0)||setTimeout(C)},g.onabort=function(){const P=l;g&&(o(createError(P(4003),r,P(2375),g)),g=null)},g[l(e._0x39a179)]=function(){o(createError(l(1923),r,null,g)),g=null},g.ontimeout=function(){const P=l;let w="timeout of "+r.timeout+"ms exceeded";r[P(t._0x14feaa)]&&(w=r[P(t._0x517ede)]),o(createError(w,r,P(t._0x3b5a44),g)),g=null},l(e._0xec887f)in g&&forEach(f,function(P,w){const M=l;typeof h>"u"&&w.toLowerCase()===M(c._0x2327ca)?delete f[w]:g[M(c._0x3be246)](w,P)}),!isUndefined(r.withCredentials)&&(g[l(3154)]=!!r[l(e._0x107f4a)]),m&&m!=="json"&&(g[l(e._0xd865c9)]=r[l(3020)]),typeof r[l(e._0x201865)]=="function"&&g.addEventListener("progress",r.onDownloadProgress),typeof r.onUploadProgress=="function"&&g.upload&&g[l(e._0xcc93ba)].addEventListener("progress",r.onUploadProgress),!h&&(h=null),g[l(2233)](h)})}function isString$1(r){return typeof r=="string"}function isDate(r){return toString.call(r)==="[object Date]"}function isObject$1(r){return r!==null&&typeof r=="object"}function isFormData(r){return typeof FormData<"u"&&r instanceof FormData}function isUndefined(r){return typeof r===_0x5e32ae(1781)}function isURLSearchParams(r){return typeof URLSearchParams<"u"&&r instanceof URLSearchParams}function forEach(r,e){const t={_0x68b06a:3687,_0x57bfdc:2392,_0x587d35:2856,_0x169738:680},i=_0x5e32ae;if(!(r===null||typeof r===i(1781)))if(typeof r!==i(t._0x68b06a)&&(r=[r]),Array.isArray(r))for(let s=0,n=r.length;s<n;s++)e.call(null,r[s],s,r);else for(const s in r)Object[i(t._0x57bfdc)][i(t._0x587d35)].call(r,s)&&e[i(t._0x169738)](null,r[s],s,r)}function encode(r){const e=_0x5e32ae;return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")[e(1525)](/%5B/gi,"[").replace(/%5D/gi,"]")}function trim$1(r){return r[_0x5e32ae({_0x40c22a:2529}._0x40c22a)]?r.trim():r.replace(/^\s+|\s+$/g,"")}function buildURL(r,e,t){const i=_0x5e32ae;if(!e)return r;let s;if(t)s=t(e);else if(isURLSearchParams(e))s=e.toString();else{const n=[];forEach(e,function(c,_){const l={_0x279f6e:3759};c===null||typeof c>"u"||(Array.isArray(c)?_=_+"[]":c=[c],forEach(c,function(f){const m=_0x5210;isDate(f)?f=f.toISOString():isObject$1(f)&&(f=JSON.stringify(f)),n[m(l._0x279f6e)](encode(_)+"="+encode(f))}))}),s=n.join("&")}if(s){const n=r[i(2316)]("#");n!==-1&&(r=r.slice(0,n)),r+=(r.indexOf("?")===-1?"?":"&")+s}return r}const ignoreDuplicateOf=["age",_0x5e32ae(801),"content-length","content-type","etag",_0x5e32ae(1712),"from",_0x5e32ae(2614),"if-modified-since","if-unmodified-since","last-modified","location",_0x5e32ae(743),"proxy-authorization","referer",_0x5e32ae(3113),"user-agent"];function parseHeaders(r){const e={_0x365ff6:2721},t={};let i,s,n;return r&&forEach(r.split(`
`),function(c){const _=_0x5210;if(n=c.indexOf(":"),i=trim$1(c.substr(0,n)).toLowerCase(),s=trim$1(c.substr(n+1)),i){if(t[i]&&ignoreDuplicateOf.indexOf(i)>=0)return;i===_(e._0x365ff6)?t[i]=(t[i]?t[i]:[]).concat([s]):t[i]=t[i]?t[i]+", "+s:s}}),t}function settle(r,e,t){const i={_0x488f01:3656},s=_0x5e32ae;!t.status||validateStatus(t.status)?r(t):e(createError("Request failed with status code "+t.status,t.options,null,t[s(i._0x488f01)],t))}function validateStatus(r){return r>=200&&r<300}function createError(r,e,t,i,s){const n=new Error(r);return enhanceError(n,e,t,i,s)}function enhanceError(r,e,t,i,s){const n={_0x2502a9:3619},o={_0x3ad961:3079,_0xd5fd77:2086,_0x19bfd4:859,_0x2b9a44:3208,_0x382a20:2003},c=_0x5e32ae;return r.options=e,t&&(r[c(n._0x2502a9)]=t),r.request=i,r.response=s,r.isAxiosError=!![],r[c(3852)]=function(){const l=c;return{message:this[l(o._0x3ad961)],name:this.name,description:this[l(o._0xd5fd77)],number:this.number,fileName:this.fileName,lineNumber:this[l(o._0x19bfd4)],columnNumber:this.columnNumber,stack:this.stack,options:this.options,code:this.code,status:this.response&&this[l(o._0x2b9a44)][l(o._0x382a20)]?this.response.status:null}},r}function transformResponse(r,e){const t=_0x5e32ae;if(isString$1(e)&&e.length)try{return JSON[t(1426)](e)}catch{}return e}const version="3.5.10",update="2023-06-05 18:17:00",image={url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAAAUCAYAAAAJD/ojAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2NUVFNjVDRUFBMDgxMUU5QUM4NDg4MzU3RThBMzcwQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2NUVFNjVDRkFBMDgxMUU5QUM4NDg4MzU3RThBMzcwQiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjY1RUU2NUNDQUEwODExRTlBQzg0ODgzNTdFOEEzNzBCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjY1RUU2NUNEQUEwODExRTlBQzg0ODgzNTdFOEEzNzBCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+GxQkfQAADBVJREFUeNrsWHtwVNUd/u7u3d1sNtlNNmQTkiyjkfAIqCD4AOQhGUBAqtMahloFq6KOio9qfVu0VVtrpahtrQOlCsgUlYq0QuMDMojQVFrLo0UeaSIGSAJ57SbZ7Otuv9/ds3ETQeto/+jUM/Obe8+55/E73+9xvnO11h/6cMqiabAYCT4pug5PvAN7dD8u8t6Clm4LcOJdtg8G7HdMh8cbRA52gM1o7gZaeoASL7DtFaCzEZi2CGATgvxW14zHr8jBfdNyzGX2798Pp9OJQYMGIZFIqKU1hEIh1NbWoqioCF6v12xvbW3FkSNHkJOTY7ZbrVbE4/GTqi/fwuEw6uvr4XK5UFxcbM4rpaOjAxaLBdnZ2eb4aDRqridF5pZ+hmH06pJe0nVM1VPvsp682+12s27BFylUEl0EaPlSoPpDwHMjkDl3JvK9Vfhg8xw8MAG4n7LtVSCDgJhravh/LvoX6u1wiImA9z8Gyk4AMyaPRRS/gRjabvMhxw8YUb5n9sVVWTxpUn6IJpLyOUU8QSSRNl7exbNS3vV5RfqLh6bPIUXGp7wutc5/BWDLqTxMMoPFkgUtHqdyydgxYgTISgD5nuUbjDjWENyB6GC9bMIIjDzPA4+jA8cCwDEaIZeA211uevO5jJVRlHaEjc00a50786TBw8lxDWUgZUUkEmmQkEsvEtY2m40ZSx/AajmlhOBk8xlLt42KznZ+q2e4/oP9u6SNexnCtjjTRyNlAdsqY7HY8zTCmjQjfIsyi/IMZVfavOdSrqX8ibK+n6PeROGG8RPO39L7IZSIngpfaDF47Zr+uG7VBxsJbQsCx1qcnqFv2R6taYDmfxEhlJmd6bBoqBuB2rcnYficD5FTdBly9bHoxEUYMTMfRqQBDcdWwe54Bx3WjyePzsJNk7MEhHmU0wnkms7Oznq/32+ncj8Q0Cg1wWCwQTbtcDiuYP00ykrm6oaBAwciKyvrBQI0m8Aso2zguLy0fBSRdCjG4thZJSUlTxDEe8WTaaDJ7FvJ3CtPnbl3UyAQOMQc/X22nUODXs01J/CbGPq9fgBPpNzAbxkKYNEzk3XR7SGOG0BD7uUa1aznsd6sRxInPyAsVgu6u3oOOzTbUq/b81IGovfSYwPvWEZFGx3+C/g+vtdnxL/zSrPgXbhefMy0ThZR744dRqhxIZy1K9AVNRA4EyjMwT0Xy6FglV4C3CUE9ig39gIBiFFBQ3lSuLCwEAUFBYVse47f3ATjFQFJDi9uKkeFd4D1iAI1BXBUaRVQXp8jc1IMvj/PZy2bK8QTOX6Wx+ORqJgrBmd9R+ITV470gyWknq3q+Q3KSBUt4hyi2ww+z1JTVOt+z8nPOY0Ah4iVoWk7XXkYhrbGRVtD47VHXE+Vcdl5SJyEcnAJM1h6sA098fsRbn8XHU1cnvTB5iFkFtxZVo8x2gnsrInBV+TfPsjvv4QbHEPgxCOjKnjMIJJ0wHI2xU2F99KjD8kmMjMze09P1rtF5IRQwKbSQxeSvEX6aDSSmV44z1QV5lKGsP2OpqamlwjwXWQqRxhNQebnEkZIKpBT+b6Q4ytVrp7b1dW1js9fiS6c08lvU9nPzX0sZp+DvSnikiVtp2JoiMWSSTGrsyMRGDHqmT9f9trD7Zm+m3vtmJ7xbDC8bXWvavs3L2kpnlEDP6Onx80VMpN5O2jA59Mx7/w8+Lw6gnoc7uzs7QqAin379mH37t2YMmWKReiUgCUbo/JjBRgCsSk3Nzdx9OhRHD9+HPT6vQRhPPsJfyuiZKcZx1D1QqkwBTQJBRP6xZQxlWCO4LwCvp1rlK9atWr86NGjMyoqKvazvpE5e1L/A5GlkXp+QLlIjM22v1OvoWwfrFKFGED2ciVB3qZ0OahvLP/RZxzjcRM5hHI5zXmLYfct7hM0mpI4/vDN8Lp3f2Q8qMN9qO1N/Uq8EVmAxrgNDXE72sP5pG1BLJ0cwNhBPnR25iJ/QIIGjO1gajjETQ8nqGfSK/bQI0xmQ0AsAgrz4pWK626VjbrdbpNjEvAadhtN+ZeEIuXblKXKc6+i1FFkc9dnZGQ0pNiHyuW5wtZVlOSPGzeum8YTUO9gv4vlYEyHQQ5VxUgOKs5by2cXvX0Uc/dt5ObvcC/foQGb2X4p13uTz2Nc7x4dsyo/g+MQTY2UIav0VkRtD5tsIcWeLea5/fGFsc2rH8GjLVONLbcgUz8tVuZpKg+vPnB7aI3JUT70lOHHsRnY7rwUpcUF5sB4PGklghSh3MLXi3t6eo6Wl5dPJ4DCINDW1ja7paVl28iRI5eJE3FTWyQ8JXQlZ7J8l5s4l217+D5GTnCV9+JsG6JAJHHHDILwPo3yRzGYyq8iVsnJwkCGDRvWSS//Ketn0qBZfBYqIMPylMuNsJn8/PyEpBphOVKncTbw/ed0gKt5PjylWMs1CqVfUtbqaDsFh0gYybyp58xFWH+6r8fyW8zyxARjywNb4tPu0q3GzzotBbz12dARiY45lHCtiNH77cwM+fZ/4rHuPdgWWwZreK3slwDZe1ei11bxVlVF4OwE4sFUO29pt/PG9saCBQuWTJo0CZWVleZtT25c3ORMetWF9Ooa1hfTUxrY5mQk3ElAwjRWFds+4sa97JPNlBIUYMQwBKX/6ZFgexHX3i7eR4Ak3Bepb/PZ/yM+3+d8Or/PUCljHL10HJnPjvb29tvpuWv57XW2/41rXk/Pfpn7ekyMQ3NknQRfIymWvArYXCuQTjQsvA6HOm9EyL3bkR1HXPcu1Y1gccJqXZRJ9Jtixph98ZDeTdKcYVhMaiuEwdLdgea963DAPRaWaACyT3oNdu3aZYb97Nmzn6FyEwnY02yvy8vLWzp06NBlhw8fnvjkk0+eIHi4/PLLzXCl9/yF3nifcBfK+RxTwg2XSR8JDH4fyZDNo9cWEuxAY2NjtazBNNB/p8JYxOuGc/zddXV1Z9AQTczvEmqSwsIc2yGGlXNBjGeGSDxexbl3SDvbXqa4OMcK6i9pZj3rV6QuLvqnrrIJnmw6aZ7dfRY0x28JrksloCDlblhjvzZzs0UyhAVRTQ/bE/Fbu7q73w7b7K/7dPv512i+UZx1Z0JFgx46jlDpRBwovRaNLceh97SK8uahM336dPlPsIQK30AP2LV8+fK7hK5dd911pQTl1urq6k1sn02R/GaO40ZaCPSzBONCethAdaDZVYrQOM6hWIWTkdEjoS3jJKzZR0s7QeQM9ygvXVlVVWUylPnz5wu/H0aQ1nKNA3IG0FAxGrKa883j2lryYuuAon8FqRsh39387qIElAf3o2myvmYvgSVjJVXwm2rEIq8h2nkzNNcx2PU+/xc0NXGws2eDMwOnu3LtrwbCsTm8/+00jchIsEUjaM4/D905ZyAzyPODh5TwWQLs56XhJUXga5gqZtXW1sZ8Pp8cZLcpmnU3ARDeOpcKbxIPFp5JkVtck+K0RyjDlddIKPMeDwEtqMCfyDk2CSB8uvhd6JxT3cA8HGfyotLSUjMNiZMKOOybLVxcMRExboXadqdiOE6O3UiZwvrvWH+PxniW41q4v8vY9sYnAJspgQbN8DhhzXiRyJ2NSPQ4jPiNsBm/h+ikJT718ybRezHhfd6Ceq47y4gjVw7sJMDCCJiLc1zwDx0AI8T98nIjChLEc+QOSGXupGLLZR/yd0tYgvLGe9hvBxWeKwcX36vY12DfbMpY9oko7mtRz++Zfzs0bbQ6+GQSckXUs+9bbJer0UoFTL5KEa2U3bLYtGnTUmxhjTJejTiC6ErgT6Nx97P9kYaGhlViaF6CxrF+VNgC5TlGSJB67WbfhZz/DLFZ3xRhEGCnYx0ytKn0nbXoDixEPByENy8ZTVo6pKcszQS2mWD3MYXNpkPul5w/ve/rIv1///X7WbO+371f2t4T+aI/XhQzWP8fdN2oJF0voW4PyQvTRYrybRZJ/5HE9q18bP0kB5t5mxUbDe3KXo/W5pkI1l6F4lGrzVzce5VO4MuUlA5GUos+P2/+14rk5HS90x0j/R9xkhMk1LXNbv8FCcVwtNQOwcG3ViPG9Ge14evyZf8HZxZlIR6dg0B7E+wFF9A8bcmUpn2NzlcCcKTHAyP6VwSaNiDb1/W113615d8CDAB0JaU81/NTEwAAAABJRU5ErkJggg==",rectangle:[10,5,88,20]};new Function("czmver",`var msg = \`%c🌒%c Mars3D三维可视化平台 %c

  版 本 号：3.5.10     Cesium版本：\${czmver}
  编译日期：2023-06-05 18:17:00
  版权声明：
  1. Mars3D版权完全属于 "合肥火星科技有限公司"独自所有.
  2. Mars3D软件包，任何个人或组织在遵守下列条件的前提下可以永久免费使用：
    1）不进行任何形式的破解和裁剪，程序包完整引用
    2）保留此版权信息在控制台输出
  我们保留对此版权信息的最终解释权.


  🏠官网:  http://mars3d.cn
  📞微信:  http://marsgis.cn/weixin.html
  \`;
console.log(msg,
  'font-size: 19px;padding-left: 10px;  color: rgb(240, 133, 25);',
  'font-size: 15px;  line-height: 1.5;  font-family: "微软雅黑";color: rgb(240, 133, 25);  padding-bottom: 5px;',
  'font-size: 12px;  line-height: 1.5;  font-family: "微软雅黑";color: rgb(0, 138, 255);'  );`)(Cesium.VERSION);let customImage;function setImage(r){customImage=r}function addView(r){const e={_0xc65e5:1857,_0xd2e489:1877,_0x49939d:1423},t=_0x5e32ae,i=image||customImage;if(!i||!r||!r[t(1e3)])return;const s=i.rectangle||[10,5,88,20],n=new Cesium__namespace.ViewportQuad;return n[t(1323)]=new Cesium__namespace[t(e._0xc65e5)](s[0],s[1],s[2],s[3]),n[t(e._0xd2e489)]=new Cesium__namespace[t(e._0x49939d)]({fabric:{type:"Image",uniforms:{color:new Cesium__namespace.Color(1,1,1,1),image:i.url}}}),n._muyao=!![],r[t(1e3)].add(n),n}function add(r,e){const t=_0x5e32ae;!r||!r.primitives||(addView(r),setInterval(function(){try{!checkHasImage(r)&&addView(r)}catch{}},6e5+Math[t(3413)]()*6e5))}function checkHasImage(r){const e={_0x26e1ec:1e3,_0x7f3d14:3402},t=_0x5e32ae;if(!(r!=null&&r[t(e._0x26e1ec)])||r[t(1e3)].length===0)return![];for(let i=0,s=r.primitives[t(e._0x7f3d14)];i<s;++i)if(r[t(e._0x26e1ec)].get(i)._muyao)return!![];return![]}function isNumber(r){return typeof r=="number"&&r[_0x5e32ae(3346)]===Number}function isString(r){return typeof r=="string"&&r.constructor===String}function isBoolean(r){return typeof r=="boolean"&&r[_0x5e32ae({_0x19fb66:3346}._0x19fb66)]===Boolean}function isObject(r){return Object.prototype.toString.call(r)==="[object Object]"}const hasOwn={}.hasOwnProperty;function isPlainObject(r){const e={_0x5b5c9a:3346},t=_0x5e32ae;return isObject(r)?r.constructor&&!hasOwn[t(680)](r,t(e._0x5b5c9a))&&!hasOwn.call(r.constructor.prototype,t(954))?![]:!![]:![]}function isFunction(r){return r&&typeof r===_0x5e32ae(1324)}function isSimpleType(r){const e={_0x243da7:3845},t=_0x5e32ae;return r==null||r===void 0?![]:isString(r)||isBoolean(r)||isNumber(r)||Array[t(e._0x243da7)](r)?!![]:![]}const isMars3DCesium=!!(Cesium__namespace.ExpandByMars||Cesium__namespace.Mars3DEx);function formatNum$1(r,e=0){const t=Math.pow(10,e);return Math.round(r*t)/t}function padLeft0(r,e){r=String(r);let t=r.length;for(;t<e;)r="0"+r,t++;return r}function splitWords(r){return trim(r).split(/\s+/)}function trim(r){const e=_0x5e32ae;if(r)return r.trim?r[e(2529)]():r.replace(/^\s+|\s+$/g,"")}function getStrLength(r){const e={_0x506d7f:1525},t=_0x5e32ae;if(r)return r[t(e._0x506d7f)](/[\u0391-\uFFE5]/g,"00").length}const templateRe=/\{ *([a-zA-Z0-9_\u4e00-\u9fa5]+) *\}/g;function template(r,e,t){const i={_0xd652cf:515,_0x13a355:527};return r==null||!e||!templateRe.test(r)?r:r.replace(templateRe,function(s,n,o,c){const _=_0x5210;let l=e[n];if(!Cesium__namespace[_(i._0xd652cf)](l))return t?isString(t)?t:"":s;if(isFunction(l)){if(l=l(e),!Cesium__namespace.defined(l))return t?isString(t)?t:"":s}else if(l.getValue&&isFunction(l.getValue)&&(l=l.getValue(Cesium__namespace[_(i._0x13a355)].now()),!Cesium__namespace.defined(l)))return t?isString(t)?t:"":s;return l})}let lastId=0;function getGlobalId(){return++lastId}function stampGlobalId(r){const e={_0x2bbbf5:1214,_0x46c2f4:1214},t=_0x5e32ae;return r&&isObject(r)?(r[t(e._0x2bbbf5)]=r._mars3d_id||++lastId,r[t(e._0x46c2f4)]):-1}function createGuid(r="m-"){return r+Cesium__namespace[_0x5e32ae(2216)]()}let callbackIndex=0;function getTemplateHtml(_0xdafed){const _0xc6e4c6={_0x4083b0:2385,_0x2c288b:1247,_0x1b7a62:3957,_0x13ba8c:3845,_0x22fa33:3596,_0x9295f0:3205,_0x70ee2d:1121,_0x1e8640:2581,_0x263f5f:525,_0x3a63ac:3205,_0xec9962:3342,_0x1c9d70:4005,_0x3ca0c1:2569,_0x45c77d:4059,_0x1ef00b:2385,_0x57f0a1:2581},_0x5f3cca=_0x5e32ae;let _0x2c04de=_0xdafed.attr;if(!_0x2c04de)return![];const _0x3b3fff=_0xdafed.title,_0x8a535f=_0xdafed.edit,_0x391045=_0xdafed.template;if(_0x2c04de=getAttrVal(_0x2c04de),!_0x391045||_0x391045==="all"){let r=0,e=_0x3b3fff?'<div class="mars3d-template-titile">'+_0x3b3fff+_0x5f3cca(_0xc6e4c6._0x4083b0):"";e+=_0x5f3cca(_0xc6e4c6._0x2c288b);for(const t in _0x2c04de)try{let i=_0x2c04de[t];if(t==null||i==null||t==="Shape"||t==="FID"||t==="OBJECTID"||t==="_definitionChanged"||t==="_propertyNames"||isFunction(i)||(isObject(i)&&(i=JSON[_0x5f3cca(_0xc6e4c6._0x1b7a62)](getAttrVal(i,{onlySimpleType:!![]}))),i=String.prototype[_0x5f3cca(2529)].call(i||""),i===""||i==="Null"||i==="Unknown"))continue;e+="<div><label>"+t+"</label>"+i+"</div>",r++}catch(i){logError$1("getTemplateHtml:构造all时异常",i)}return e+="</div>",r===0?![]:e}else if(Array[_0x5f3cca(_0xc6e4c6._0x13ba8c)](_0x391045)){let _0x29b64f=0,_0x461f7a=_0x3b3fff?'<div class="mars3d-template-titile">'+_0x3b3fff+"</div>":'<div style="height: 10px;"></div>';_0x461f7a+=_0x5f3cca(1247);for(let _0x235283=0;_0x235283<_0x391045.length;_0x235283++){const _0x5d557b=_0x391045[_0x235283];if(_0x5d557b==null)continue;const _0x1c840f=_0x5d557b[_0x5f3cca(_0xc6e4c6._0x22fa33)],_0x3a3dc5=_0x5d557b.className||"";if(_0x5d557b[_0x5f3cca(_0xc6e4c6._0x9295f0)]===_0x5f3cca(_0xc6e4c6._0x70ee2d)||_0x5d557b[_0x5f3cca(_0xc6e4c6._0x9295f0)]==="button"){let _0x2b8105="";const _0x351d1e=_0x5d557b[_0x5f3cca(_0xc6e4c6._0x1e8640)];if(_0x351d1e){const _0xbff608="_cache_getTemplateHtml_"+callbackIndex++;isFunction(_0x351d1e)?window[_0xbff608]=function(){_0x351d1e(_0x2c04de)}:isString(_0x351d1e)&&(window[_0xbff608]=function(){eval(_0x351d1e+"("+JSON.stringify(_0x2c04de)+")")}),_0x2b8105=_0x5f3cca(3080)+_0xbff608+'();"  '}_0x461f7a+=`<div style="text-align: center;padding: 2px 0;" >
                      <button type="button"  `+_0x2b8105+_0x5f3cca(1491)+_0x1c840f+_0x5f3cca(_0xc6e4c6._0x263f5f)+_0x3a3dc5+'" >'+(_0x5d557b.name||"查看详情")+`</button>
                  </div>`,_0x29b64f++;continue}else if(_0x5d557b[_0x5f3cca(_0xc6e4c6._0x3a63ac)]==="html"){const r=template(_0x5d557b.html,_0x2c04de,!![]);_0x461f7a+='<div class="'+_0x3a3dc5+'">'+r+"</div>",_0x29b64f++;continue}let _0x18d6c3=_0x2c04de[_0x1c840f];if(!(!_0x8a535f&&(_0x1c840f==null||_0x18d6c3==null||isFunction(_0x18d6c3)))&&(_0x18d6c3=String.prototype.trim[_0x5f3cca(680)](_0x18d6c3||""),!(!_0x8a535f&&(_0x5d557b[_0x5f3cca(754)]??!![])&&(_0x18d6c3==null||_0x18d6c3===""||_0x18d6c3==="Null"||_0x18d6c3==="Unknown"||_0x18d6c3.length===0)))){if(_0x5d557b.format)try{isFunction(_0x5d557b.format)?_0x18d6c3=_0x5d557b[_0x5f3cca(3109)](_0x18d6c3):_0x18d6c3=eval(_0x5d557b.format+"("+_0x18d6c3+")")}catch(r){logWarn("getTemplateHtml:格式化出错",_0x5d557b)}if(_0x8a535f)switch(_0x5d557b.type){case _0x5f3cca(_0xc6e4c6._0xec9962):_0x18d6c3='<textarea class="mars3d-popup-edititem '+_0x3a3dc5+'" style="width:'+(_0xdafed[_0x5f3cca(_0xc6e4c6._0x1c9d70)]||190)+_0x5f3cca(1162)+_0x1c840f+'"  placeholder="请输入 '+_0x5d557b.name+_0x5f3cca(_0xc6e4c6._0x3ca0c1)+_0x18d6c3+"</textarea>";break;case"string":case"number":default:_0x18d6c3='<input type="'+(_0x5d557b[_0x5f3cca(3205)]||"text")+'" class="mars3d-popup-edititem '+_0x3a3dc5+'" style="width:'+(_0xdafed.width||190)+`px;"
                          data-type="`+_0x1c840f+'" value="'+_0x18d6c3+'" placeholder="请输入 '+_0x5d557b[_0x5f3cca(3605)]+'"  />';break}_0x5d557b.unit&&(_0x18d6c3+=_0x5d557b[_0x5f3cca(_0xc6e4c6._0x45c77d)]),_0x461f7a+="<div><label>"+_0x5d557b.name+"</label>"+_0x18d6c3+"</div>",_0x29b64f++}}return _0x461f7a+=_0x5f3cca(_0xc6e4c6._0x1ef00b),_0x29b64f===0?![]:_0x461f7a}else if(isObject(_0x391045))switch(_0x391045.type){case"iframe":{const r=template(_0x391045[_0x5f3cca(1221)],_0x2c04de,!![]);return _0x5f3cca(815)+r+'"  style="width:'+(_0x391045[_0x5f3cca(_0xc6e4c6._0x1c9d70)]||"300")+_0x5f3cca(2361)+(_0x391045.height||"300")+_0x5f3cca(3225)}case"javascript":{const _0x13c06b=_0x391045[_0x5f3cca(_0xc6e4c6._0x57f0a1)];return eval(_0x13c06b+"("+JSON.stringify(_0x2c04de)+")")}}else{if(isString(_0x391045))return template(_0x391045,_0x2c04de,!![]);if(isFunction(_0x391045))return _0x391045(_0x391045,_0x2c04de)}return![]}function getCesiumValue(r,e,t){if(!r)return r;if(e){if(r instanceof e)return r;if(r._value&&r._value instanceof e)return r._value}return isFunction(r.getValue)?r.getValue(t||Cesium__namespace.JulianDate.now()):r}function getCesiumColor(r,e,t){const i={_0x15d6c7:527,_0x2b74bc:1228,_0x42c1a6:2200,_0x2bab87:2451},s=_0x5e32ae;return r?(isFunction(r[s(810)])&&(r=r[s(810)](t||Cesium__namespace[s(i._0x15d6c7)][s(i._0x2b74bc)]())),isString(r)?Cesium__namespace[s(i._0x42c1a6)][s(i._0x2bab87)](r):isFunction(r)?getCesiumColor(r(t),e):r):e}function getColorByStyle(r,e=Cesium__namespace.Color[_0x5e32ae(4128)]){const t={_0x1ee9d6:1600,_0x4a1a8e:515},i=_0x5e32ae;let s;return r[i(2092)]?isString(r.color)?s=Cesium__namespace[i(2200)].fromCssColorString(r.color):isFunction(r[i(2092)])?s=r.color(r):s=r[i(2092)]:r.randomColor?s=Cesium__namespace.Color.fromRandom({minimumRed:r.minimumRed??0,maximumRed:r.maximumRed??.75,minimumGreen:r.minimumGreen??0,maximumGreen:r[i(t._0x1ee9d6)]??.75,minimumBlue:r.minimumBlue??0,maximumBlue:r.maximumBlue??.75}):s=e,s&&(Cesium__namespace[i(t._0x4a1a8e)](r.opacity)&&(r.opacity<0?r.opacity=0:r[i(3776)]>1&&(r.opacity=1),s=s.withAlpha(Number(r.opacity))),Cesium__namespace[i(515)](r.globalAlpha)&&r.globalAlpha!==1&&(s=s.withAlpha(s.alpha*r.globalAlpha)),s)}function getAttrVal(r,e={}){const t={_0x83867f:527},i=_0x5e32ae;if(!r)return r;try{isFunction(r.getValue)&&(r=r.getValue(Cesium__namespace[i(t._0x83867f)].now()));const s={};if(r._propertyNames&&r._propertyNames.length>0)for(const n of r._propertyNames){const o=getOneAttrValue(n,r[n],e);o!=null&&(s[n]=o)}else for(const n in r){const o=getOneAttrValue(n,r[n],e);o!=null&&(s[n]=o)}return s}catch(s){logError$1("getAttrVal:出错了",s)}return r}function get3DTileFeatureAttr(r){const e=_0x5e32ae,t={},i=r.getPropertyIds?r.getPropertyIds():r.getPropertyNames();for(let s=0;s<i.length;s++){const n=i[s];if(!r.hasProperty(n))continue;const o=r[e(4323)](n);o!=null&&(t[n]=o)}return t}function getOneAttrValue(r,e,t){const i={_0x1344cb:810,_0x4eba6b:2200,_0x3c99ed:3244},s=_0x5e32ae;if(e==null||e===""||e==="Null"||e===s(666)||(e.getValue&&typeof e[s(i._0x1344cb)]===s(1324)&&r!=="material"&&(e=e.getValue(Cesium__namespace[s(527)].now())),isFunction(e)))return null;if(t.onlySimpleType){if(e instanceof Cesium__namespace[s(i._0x4eba6b)])return e[s(i._0x3c99ed)]();if(t.noArray&&Array.isArray(e))return null;if(isPlainObject(e))return e;if(!isSimpleType(e))return null}return e}function merge(r={},...e){let t,i,s,n;for(i=0,s=e.length;i<s;i++){n=e[i];for(t in n)hasMergeObject(r[t],n[t])?r[t]=merge(r[t],n[t]):r[t]=n[t]}return r}function hasMergeObject(r,e){const t={_0x40ad6d:3845},i=_0x5e32ae;return!Cesium__namespace.defined(r)||!Cesium__namespace.defined(e)?![]:Array[i(t._0x40ad6d)](r)||Array.isArray(e)?![]:isPlainObject(r)&&isPlainObject(e)?!![]:![]}function clone(r,e=[],t=5){const i={_0x24fe79:3845,_0x3ccb72:4246},s=_0x5e32ae;if(r==null||typeof r!==s(3687))return r;if(r instanceof Date){const n=new Date;return n[s(2250)](r.getTime()),n}if(Array[s(i._0x24fe79)](r)&&t>=0){const n=[];for(let o=0,c=r.length;o<c;++o)n[o]=clone(r[o],e,t-1);return n}if(typeof r=="object"&&t>=0)try{if(r[s(i._0x3ccb72)])return r.clone();if(!isPlainObject(r))return r;const n={};for(const o in r)isFunction(o)||e.indexOf(o)===-1&&r.hasOwnProperty(o)&&(n[o]=clone(r[o],e,t-1));return n}catch(n){logError$1("clone:出错了",n)}return r}function getArrayRandomOne(r){const e=_0x5e32ae,t=Math.floor(Math[e(3413)]()*r.length+1)-1;return r[t]}function removeArrayItem(r,e){for(let t=0;t<r.length;t++)if(r[t]===e)return r.splice(t,1),!![];return![]}function getSymbolStyle(r,e){const t={_0x467844:1483,_0x5f2277:1483,_0x57c05f:2581},i=_0x5e32ae;if(!r)return{};let s=r.styleOptions?clone(r.styleOptions):{};if(r.styleField&&r[i(522)]&&e){const n=e[r[i(2267)]],o=r[i(522)][n];o!=null&&(s=merge(s,o))}if(e)for(const n in s)s[n]=template(s[n],e);if(s.label&&(s.label=clone(s.label)),s[i(t._0x467844)]&&(s.highlight=clone(s[i(t._0x5f2277)])),isFunction(r[i(t._0x57c05f)])){const n=r.callback(e,s);n!=null&&(s=merge(s,n))}return s}function geojsonToArcGIS(r,e){return geojsonToArcGIS$1(r,e)}function arcgisToGeoJSON(r,e){return arcgisToGeoJSON$1(r,e)}function getGeoJsonFeatures(r){const e={_0x42bf6f:2713,_0x2cc325:486,_0x38488f:2440,_0x28a675:1906},t=_0x5e32ae;if(r.geometryType&&r[t(3125)][t(2316)]("esri")!==-1)r=arcgisToGeoJSON(r);else if(r[t(3205)]==="Topology"){let s=[];for(const n in r.objects)if(r.objects.hasOwnProperty(n)){r=Cesium__namespace[t(e._0x42bf6f)][t(e._0x2cc325)](r,r[t(e._0x38488f)][n]);const o=getGeoJsonFeatures(r);s=s.concat(o)}return s}let i;return Array.isArray(r[t(1906)])?i=r[t(e._0x28a675)]:Array.isArray(r)?i=r:i=[r],i}function geoJsonToGraphics(r,e={}){const t={_0x228741:1613,_0x5ec08f:3611},i=_0x5e32ae;var s,n;if(!r)return[];const o=getGeoJsonFeatures(r);if(r!=null&&(s=r.crs)!==null&&s!==void 0&&(n=s.properties)!==null&&n!==void 0&&n.name&&!e[i(t._0x228741)]){const _=r.crs.properties.name;_[i(2316)]("EPSG:")!==-1&&(e.crs=_)}let c=[];for(let _=0,l=o.length;_<l;_++){const h=o[_],f=featureToGraphic(h,e);f&&f.length>0&&(c=c[i(t._0x5ec08f)](f))}return c}function featureToGraphic(r,e={}){const t={_0x124f02:2021,_0x1caf98:515,_0x1478a9:2365,_0xa0e79f:2092,_0x4b9b1c:3776,_0x17e528:3205,_0x533cd7:3402,_0x190b33:1861,_0x113175:3205,_0x39a6d0:1986,_0x3e6637:1986,_0x2f1a00:3759,_0x4c9da1:2436,_0x37206b:736,_0x3dae92:652},i={_0x2bacf4:2767},s=_0x5e32ae;var n,o,c;let _=[];r.type==="GeometryCollection"&&(r={geometry:r});const l=r.geometry,h=l==null?void 0:l.coordinates;if(!h&&!l)return _;let f;e.type?f=e.type:hasType((n=r)===null||n===void 0||(o=n.properties)===null||o===void 0?void 0:o.type)&&(f=r.properties.type);let m=clone((c=r)===null||c===void 0?void 0:c.properties,["style"])||{};m&&m[s(3205)]&&m.attr&&(m=m.attr);let g={};if(r.properties){r[s(3292)].style&&(g={...r[s(3292)].style});const L=m["marker-symbol"];if(Cesium__namespace[s(515)](L)){g.image=L;const D=m["marker-color"];Cesium__namespace.defined(D)&&(g.outline=!![],g.outlineColor=D)}const R=m.fill;if(Cesium__namespace[s(515)](R)&&l.type!=="LineString"&&l.type!==s(1345)){g.color=R;const D=m["fill-opacity"];Cesium__namespace.defined(D)&&D!==1&&(g.opacity=D);const N=m.stroke;if(Cesium__namespace.defined(N)){g[s(2667)]=!![],g[s(t._0x124f02)]=N;const k=m["stroke-width"];Cesium__namespace[s(t._0x1caf98)](k)&&(g[s(2605)]=k);const B=m[s(t._0x1478a9)];Cesium__namespace[s(t._0x1caf98)](B)&&B!==1&&(g.outlineOpacity=B)}}else{const D=m.stroke;if(Cesium__namespace.defined(D)){g[s(t._0xa0e79f)]=D;const N=m["stroke-width"];Cesium__namespace.defined(N)&&(g.width=N);const k=m[s(2365)];Cesium__namespace.defined(k)&&k!==1&&(g[s(t._0x4b9b1c)]=k)}}}if(e.style&&(e[s(4114)].merge?g={...g,...e[s(4114)]}:g={...e.style}),e.symbol)if(isFunction(e[s(3274)]))g=e.symbol(m,g,r)||g,g[s(3205)]&&(f=g.type);else{f=e.symbol[s(t._0x17e528)]||f;const L=getSymbolStyle(e.symbol,r.properties||{});L&&Object[s(3503)](L)[s(t._0x533cd7)]!==0&&(e.symbol[s(t._0x190b33)]?g={...L,...g}:g=L)}let C=e.crs;C==="EPSG:4326"&&(C=null);function E(L){const R=s;return C&&(L=proj4Trans(L,C)),e[R(i._0x2bacf4)]?e.onPointTrans(L):L}function P(L){const R=s;if(!e.onPointTrans&&!C)return L;const D=[];for(let N=0,k=L[R(3402)];N<k;N++){const B=L[N];if(Array.isArray(B[0])){const $=P(B);$&&$.length>0&&D.push($)}else{const $=E(B);$&&D.push($)}}return D}function w(L,R){eachGraphicType(function(D){isObject(R[D])&&(L[D]=R[D],delete R[D])})}let M,T;switch(l[s(t._0x113175)]){case"Point":{(!f||!isPointType(f))&&(f=g.image?"billboardP":s(t._0x39a6d0));const L={type:f,position:E(h),style:g,attr:m};w(L,m),_.push(L);break}case s(1385):{for((!f||!isPointType(f))&&(f=g.image?"billboardP":s(t._0x3e6637)),M=0,T=h.length;M<T;M++){const L={type:f,position:E(h[M]),style:g,attr:m};w(L,m),_[s(t._0x2f1a00)](L)}break}case"LineString":{!f&&(f="polylineP");const L={type:f,positions:P(h),style:g,attr:m};w(L,m),_.push(L);break}case"MultiLineString":{!f&&(f="polylineP");let L;const R=[];for(M=0,T=h.length;M<T;M++){const D={type:f,positions:P(h[M]),style:g,attr:m};w(D,m),_.push(D),R.push(D),(!L||L[s(t._0x4c9da1)].length<D[s(2436)].length)&&(L=D)}if(L&&(L.isMultiMax=!![],g.label&&!g[s(t._0x37206b)].showAll))for(M=0,T=R.length;M<T;M++){const D=R[M];L!==D&&(D.style={...D.style},delete D.style[s(736)])}break}case s(2056):{if(!f&&(f="polygon"),f[s(4205)](s(t._0x3dae92))){const L={type:f,positions:P(h[s(3402)]===1?h[0]:h),style:g,attr:m};w(L,m),_.push(L)}else for(M=0,T=h[s(3402)];M<T;M++){const L=h[M],R={type:f,positions:P(L.length===1?L[0]:L),style:g,attr:m};w(R,m),_[s(t._0x2f1a00)](R)}break}case s(3854):{!f&&(f="polygon");let L;const R=[];for(M=0,T=h.length;M<T;M++){const D=h[M],N={type:f,positions:P(D.length===1?D[0]:D),style:g,attr:m};w(N,m),_.push(N),R.push(N),(!L||L.positions.length<N[s(2436)].length)&&(L=N)}if(L&&(L.isMultiMax=!![],g.label&&!g.label.showAll))for(M=0,T=R.length;M<T;M++){const D=R[M];L!==D&&(D.style={...D.style},delete D.style[s(736)])}break}case s(1944):{for(let L=0,R=l.geometries.length;L<R;L++){const D=featureToGraphic({type:"Feature",geometry:l[s(4201)][L],properties:r.properties},e);D&&D.length>0&&(_=_.concat(D))}break}default:logError$1("Invalid GeoJSON object.",r)}return _}function mergeSymbolToGraphic(r,e){const t={_0x4c4217:1528},i=_0x5e32ae;if(e)if(isFunction(e))r.style=e(r.attr,r.style,r);else{e.type&&(r.type=e.type);const s=getSymbolStyle(e,r[i(t._0x4c4217)]||{});s&&Object.keys(s).length!==0&&(e.merge?r.style={...s,...r.style}:r.style=s)}return r}function heightToZoom(r){const t=7096758e-11,i=91610.74,s=-40467.74;return Math.round(s+(40487.57-s)/(1+Math.pow(r/i,t)))}function getUrlResource(r){const e={_0x1ae45d:2016,_0xe24cf7:2645,_0x5f1893:1221,_0x4f6d9f:2645},t=_0x5e32ae;if(!r.url)return r;let i;if(r.url instanceof Cesium__namespace.Resource){const s=r.url;return r.headers&&(s[t(771)]=r.headers),r.proxy&&(s[t(419)]=new Cesium__namespace.DefaultProxy(r.proxy)),r.templateValues&&s[t(e._0x1ae45d)](r.templateValues),r.queryParameters&&s.setQueryParameters(r.queryParameters),s}else r[t(e._0xe24cf7)]&&(r[t(e._0x5f1893)]=template(r.url,r.templateValues)),i=new Cesium__namespace[t(4071)]({url:r.url,queryParameters:r.queryParameters,templateValues:r[t(e._0x4f6d9f)],headers:r.headers,proxy:r.proxy?new Cesium__namespace.DefaultProxy(r.proxy):null});return i}function getTextImage(r,e={}){const t={_0x28e82f:2021,_0x58e8dc:2129,_0x4d9d33:906,_0x4d9f46:3244,_0x3058ef:2605},i=_0x5e32ae;!e.background&&(e.backgroundColor=Cesium__namespace[i(2200)].TRANSPARENT);const s=Cesium__namespace.writeTextToCanvas(r||"",e);if(s){if(e.outline){const n=s.width,o=s[i(3865)],c=s.getContext("2d",{willReadFrequently:!![]});e[i(t._0x28e82f)]?c[i(t._0x58e8dc)]=e.outlineColor.toCssColorString():e[i(t._0x4d9d33)]?c.strokeStyle=e.fillColor[i(t._0x4d9f46)]():c.strokeStyle="#ffffff";const _=e[i(t._0x3058ef)]||4;c.lineWidth=_,c.strokeRect(_/2,_/2,n-_,o-_)}return s}else return null}const circleImage={};function getCircleImage(r,e={}){const t={_0x49f683:1252,_0x2b4168:3841,_0x1ea1b6:3865,_0x44c569:478,_0x48a6c6:1012},i=_0x5e32ae,s=e.radius??26,n=s+(e.borderWidth??5);let o,c;if(e.color)o=e.color,c=e.borderColor||o;else{const l=e.opacity??.6,h=e.borderOpacity??l*.8;r<10?(o="rgba(110, 204, 57, "+l+")",c=i(t._0x49f683)+h+")"):r<100?(o="rgba(240, 194, 12,  "+l+")",c="rgba(241, 211, 87, "+h+")"):(o=i(t._0x2b4168)+l+")",c="rgba(253, 156, 115, "+h+")")}const _=r+"_"+n+"_"+s+"_"+o;if(!circleImage[_]){const l=n*2,h=document.createElement(i(3300));h.width=l,h[i(t._0x1ea1b6)]=l;const f=h.getContext("2d",{willReadFrequently:!![]});f.fillStyle="#ffffff00",f.globalAlpha=0,f.fillRect(0,0,l,l),s!==n&&(f.globalAlpha=1,f.beginPath(),f.arc(n,n,n,0,Math.PI*2,!![]),f.closePath(),f.fillStyle=c,f.fill()),f.globalAlpha=1,f.beginPath(),f[i(1004)](n,n,s,0,Math.PI*2,!![]),f.closePath(),f.fillStyle=o,f.fill(),f[i(3968)]=e.font||s*.9+i(t._0x44c569),f.fillStyle=e.fontColor||"#ffffff",f.textAlign="center",f.textBaseline=i(t._0x48a6c6),f.fillText(r,n,n),circleImage[_]=h.toDataURL("image/png")}return circleImage[_]}function download(r,e){const t={_0x6f61e4:3098,_0x1518af:1369,_0x357c42:1155},i=_0x5e32ae,s=document[i(t._0x6f61e4)]("a");s[i(t._0x1518af)]=r,s.href=URL[i(4277)](e),document.body[i(t._0x357c42)](s),s.click(),document.body.removeChild(s)}function base64Img2Blob(r){const e={_0x570ae7:2523,_0x948a53:1799},t=_0x5e32ae,i=r.split(t(e._0x570ae7)),s=i[0][t(439)](":")[1],n=window.atob(i[1]),o=n.length,c=new Uint8Array(o);for(let _=0;_<o;++_)c[_]=n[t(e._0x948a53)](_);return new Blob([c],{type:s})}function downloadBase64Image(r,e){const t={_0x1d285f:2790,_0x4652af:3037},i=_0x5e32ae,s=base64Img2Blob(e);!r[i(t._0x1d285f)](".jpg")&&!r.endsWith(".png")&&(r=r+i(t._0x4652af)),download(r,s)}function downloadFile(r,e){const t=new Blob([e]);download(r,t)}function getExplorerInfo(){const r={_0x4675c1:4113,_0x2261ed:2316,_0x4a1277:1547},e=_0x5e32ae;let t;const i=window.navigator.userAgent[e(r._0x4675c1)]();return i.indexOf("msie")>=0?(t=Number(i.match(/msie ([\d]+)/)[1]),{type:"IE",version:t}):i.indexOf("firefox")>=0?(t=Number(i.match(/firefox\/([\d]+)/)[1]),{type:"Firefox",version:t}):i.indexOf("chrome")>=0?(t=Number(i.match(/chrome\/([\d]+)/)[1]),{type:"Chrome",version:t}):i[e(r._0x2261ed)]("opera")>=0?(t=Number(i[e(1110)](/opera.([\d]+)/)[1]),{type:"Opera",version:t}):i[e(2316)](e(r._0x4a1277))>=0?(t=Number(i.match(/version\/([\d]+)/)[1]),{type:"Safari",version:t}):{type:i,version:-1}}function webglreport(){const r={_0x5da9ad:1494},e=_0x5e32ae,t=getExplorerInfo();if(t.type==="IE"&&t.version<11)return![];try{let i;const s=document.createElement(e(3300));if(typeof WebGL2RenderingContext<"u"&&(i=s.getContext("webgl2")||s.getContext("experimental-webgl2")||void 0),i==null&&(i=s.getContext("webgl")||s[e(r._0x5da9ad)]("experimental-webgl")||void 0),i==null)return![]}catch{return![]}return!![]}function webglerror(){const r={_0x2145ce:3221},e=_0x5e32ae;var t,i;(t=window)!==null&&t!==void 0&&(i=t.layer)!==null&&i!==void 0&&i.open?window.layer.open({type:1,title:e(1156),closeBtn:0,shadeClose:![],resize:![],area:[e(r._0x2145ce),e(3999)],content:'<div style="margin: 20px;color: #333;"><h3>系统检测到您使用的浏览器不支持WebGL功能！</h3>  <p>1、请您检查浏览器版本，安装使用最新版chrome、火狐或IE11以上浏览器！</p> <p>2、WebGL支持取决于GPU支持，请保证客户端电脑已安装显卡驱动程序！</p></div>'}):alert("系统检测到您使用的浏览器不支持WebGL功能")}function getRequest(){const r={_0x4b31c2:2316,_0x1c9f40:439},e=_0x5e32ae,t=location.search,i={};if(t[e(r._0x4b31c2)]("?")!==-1){const s=t.substr(1),n=s[e(r._0x1c9f40)]("&");for(let o=0;o<n.length;o++)i[n[o].split("=")[0]]=decodeURI(n[o][e(439)]("=")[1])}return i}function getRequestByName(r){const e=_0x5e32ae,t=new RegExp("(^|&)"+r+"=([^&]*)(&|$)","i"),i=window.location.search[e(707)](1)[e(1110)](t);return i!=null?decodeURI(i[2]):null}let _isPCBroswer;function isPCBroswer(){const r={_0x3ce299:1867,_0x43d6ea:4113},e=_0x5e32ae;if(!Cesium__namespace.defined(_isPCBroswer)){const t=navigator[e(r._0x3ce299)][e(r._0x43d6ea)](),i=["android",e(2780),"iphone","ipad","ipod","symbianos"];_isPCBroswer=!![];for(let s=0;s<i.length;s++)if(t.indexOf(i[s])>0){_isPCBroswer=![];break}}return _isPCBroswer}function alert(r,e){const t={_0x46bb27:3627},i=_0x5e32ae;window.globalAlert?window.globalAlert(r,e):window.layer?window.layer[i(t._0x46bb27)](r,{title:e||"提示",skin:"layui-layer-lan layer-mars-dialog",closeBtn:0,anim:0}):window.toastr?window.toastr.info(r,e):window.alert(r)}function msg(r){const e={_0x4c4ac4:3846,_0x2e3a9c:3627},t=_0x5e32ae;window.globalMsg?window[t(3314)](r):window[t(1627)]?window.toastr[t(e._0x4c4ac4)](r):window.layer?window.layer.msg(r):window[t(e._0x2e3a9c)](r)}function formatDate(r,e=_0x5e32ae(1365)){const t={_0x2e0b29:1875,_0x479ac4:3994,_0x2dc670:3402},i=_0x5e32ae,s={"M+":r.getMonth()+1,"d+":r.getDate(),"h+":r.getHours()%12===0?12:r.getHours()%12,"H+":r.getHours(),"m+":r[i(t._0x2e0b29)](),"s+":r[i(t._0x479ac4)](),"q+":Math.floor((r.getMonth()+3)/3),S:r.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(r.getFullYear()+"").substr(4-RegExp.$1.length)));for(const n in s)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,RegExp.$1.length===1?s[n]:("00"+s[n]).substr((""+s[n])[i(t._0x2dc670)])));return e}function formatTime(r){const e={_0x9f0d9d:1029,_0x417483:1382},t=_0x5e32ae;if(r=Number(r)||0,r<60)return r[t(e._0x9f0d9d)](0)+"秒";if(r>=60&&r<3600){const i=Math.floor(r%60);return Math[t(e._0x417483)](r/60)+"分钟"+(i!==0?i+"秒":"")}else return r=Math.floor(r/60),Math.floor(r/60)+"小时"+Math.floor(r%60)+"分钟"}function fetchJson(r){const e={_0x3bb555:4071},t=_0x5e32ae;return r=replaceOnlineUrlDomain(r),r.method==="post"?(r[t(931)]=r.queryParameters,delete r[t(577)],Cesium__namespace[t(e._0x3bb555)][t(1400)](r)):Cesium__namespace.Resource.fetchJson(r)}function sendAjax(r){const e={_0x927d1:1400},t=_0x5e32ae;return r=replaceOnlineUrlDomain(r),r.method===t(e._0x927d1)&&(r.data=r.queryParameters,delete r.queryParameters),xhrAdapter(r)[t(549)](i=>i==null?void 0:i.data).catch(i=>{console[t(1982)](i),logError$1("axios请求出错",i)})}function getLangText(r,e=0){const t=Lang[r];return t&&t[e]||r}function requestFullscreen(r){return Cesium__namespace[_0x5e32ae(2147)].requestFullscreen(r),Cesium__namespace.Fullscreen.fullscreen}function exitFullscreen(){const r={_0x395c23:1195,_0x2e5370:1670},e=_0x5e32ae;return Cesium__namespace.Fullscreen[e(r._0x395c23)](),Cesium__namespace.Fullscreen[e(r._0x2e5370)]}function replaceOnlineUrlDomain(r){const e={_0x5be802:428,_0xe0705b:2662},t=_0x5e32ae;var i,s,n;return!r.url||!isString(r.url)||(i=window)!==null&&i!==void 0&&(s=i[t(e._0x5be802)])!==null&&s!==void 0&&(n=s.hostname)!==null&&n!==void 0&&n.indexOf&&window.location.hostname.indexOf("mars3d.cn")===-1||r.url.indexOf(t(e._0xe0705b))===-1||r.url[t(2316)](t(2448))!==-1||(r.url=r.url.replace("data.mars3d.cn","data1.mars3d.cn")),r}var Util={__proto__:null,isNumber,isString,isBoolean,isObject,isPlainObject,isFunction,isSimpleType,isMars3DCesium,formatNum:formatNum$1,padLeft0,splitWords,trim,getStrLength,template,get lastId(){return lastId},getGlobalId,stampGlobalId,createGuid,getTemplateHtml,getCesiumValue,getCesiumColor,getColorByStyle,getAttrVal,get3DTileFeatureAttr,merge,clone,getArrayRandomOne,removeArrayItem,getSymbolStyle,geojsonToArcGIS,arcgisToGeoJSON,getGeoJsonFeatures,geoJsonToGraphics,featureToGraphic,mergeSymbolToGraphic,heightToZoom,getUrlResource,getTextImage,getCircleImage,downloadBase64Image,downloadFile,getExplorerInfo,webglreport,webglerror,getRequest,getRequestByName,isPCBroswer,alert,msg,formatDate,formatTime,fetchJson,sendAjax,getLangText,requestFullscreen,exitFullscreen,replaceOnlineUrlDomain,setImage};Object.defineProperties(Cesium__namespace.ColorMaterialProperty[_0x5e32ae(2392)],{globalAlpha:{set:function(r){const e={_0x47558e:2092,_0x8cdf74:515},t=_0x5e32ae;this._globalAlpha=r;const i=getCesiumColor(this[t(e._0x47558e)],Cesium__namespace[t(2200)].WHITE);!Cesium__namespace[t(e._0x8cdf74)](this[t(3338)])&&(this._color_alpha=i.alpha),this.color=i[t(3518)](this._color_alpha*r)},get:function(){return this._globalAlpha??1}}}),Object.defineProperties(Cesium__namespace.GridMaterialProperty.prototype,{globalAlpha:{set:function(r){this._globalAlpha=r},get:function(){return this._globalAlpha??1}}});const getValue_old$5=Cesium__namespace.GridMaterialProperty.prototype.getValue;Cesium__namespace[_0x5e32ae(2857)].prototype[_0x5e32ae(810)]=function(r,e){return e=getValue_old$5.bind(this)(r,e),this.globalAlpha!==1&&(e.color&&(e.color.alpha*=this.globalAlpha),e.cellAlpha&&(e.cellAlpha*=this.globalAlpha)),e},Object[_0x5e32ae(2576)](Cesium__namespace[_0x5e32ae(953)].prototype,{globalAlpha:{set:function(r){const e={_0x5bbc15:4236,_0x48818c:1202,_0x581152:3518},t=_0x5e32ae;this[t(e._0x5bbc15)]=r;const i=getCesiumColor(this.color,Cesium__namespace.Color.WHITE);!Cesium__namespace.defined(this._color_alpha)&&(this._color_alpha=i[t(e._0x48818c)]),this.color=i[t(e._0x581152)](this._color_alpha*r)},get:function(){return this[_0x5e32ae({_0x51f4d7:4236}._0x51f4d7)]??1}}}),Object.defineProperties(Cesium__namespace.PolylineArrowMaterialProperty.prototype,{globalAlpha:{set:function(r){this._globalAlpha=r},get:function(){return this._globalAlpha??1}}});const getValue_old$4=Cesium__namespace[_0x5e32ae(1999)].prototype.getValue;Cesium__namespace.PolylineArrowMaterialProperty[_0x5e32ae(2392)][_0x5e32ae(810)]=function(r,e){const t={_0x5e4787:2749,_0x2fc91c:2092,_0x110766:3252,_0x3a0140:1202},i=_0x5e32ae;return e=getValue_old$4[i(t._0x5e4787)](this)(r,e),e[i(t._0x2fc91c)]&&this[i(t._0x110766)]!==1&&(e[i(2092)][i(t._0x3a0140)]*=this.globalAlpha),e},Object[_0x5e32ae(2576)](Cesium__namespace.PolylineDashMaterialProperty.prototype,{globalAlpha:{set:function(r){const e={_0x1515f6:4236},t=_0x5e32ae;this[t(e._0x1515f6)]=r},get:function(){return this._globalAlpha??1}}});const getValue_old$3=Cesium__namespace.PolylineDashMaterialProperty.prototype.getValue;Cesium__namespace.PolylineDashMaterialProperty[_0x5e32ae(2392)].getValue=function(r,e){const t={_0x3b6c68:2749,_0x443a44:2092,_0x4a2558:3252},i=_0x5e32ae;return e=getValue_old$3[i(t._0x3b6c68)](this)(r,e),this[i(3252)]!==1&&(e[i(t._0x443a44)]&&(e.color.alpha*=this.globalAlpha),e.gapColor&&(e[i(1074)][i(1202)]*=this[i(t._0x4a2558)])),e},Object.defineProperties(Cesium__namespace.PolylineGlowMaterialProperty[_0x5e32ae(2392)],{globalAlpha:{set:function(r){const e={_0x33de1d:4236},t=_0x5e32ae;this[t(e._0x33de1d)]=r},get:function(){return this._globalAlpha??1}}});const getValue_old$2=Cesium__namespace[_0x5e32ae(2861)].prototype.getValue;Cesium__namespace.PolylineGlowMaterialProperty.prototype.getValue=function(r,e){const t={_0x3b93bc:2749},i=_0x5e32ae;return e=getValue_old$2[i(t._0x3b93bc)](this)(r,e),e.color&&this.globalAlpha!==1&&(e.color.alpha*=this[i(3252)]),e},Object[_0x5e32ae(2576)](Cesium__namespace[_0x5e32ae(2244)][_0x5e32ae(2392)],{globalAlpha:{set:function(r){this._globalAlpha=r},get:function(){return this[_0x5e32ae(4236)]??1}}});const getValue_old$1=Cesium__namespace[_0x5e32ae(2244)].prototype.getValue;Cesium__namespace.PolylineOutlineMaterialProperty.prototype.getValue=function(r,e){const t={_0x2349ac:2749,_0x1f8bd6:1202},i=_0x5e32ae;return e=getValue_old$1[i(t._0x2349ac)](this)(r,e),this.globalAlpha!==1&&(e.color&&(e.color[i(t._0x1f8bd6)]*=this.globalAlpha),e.outlineColor&&(e[i(2021)].alpha*=this.globalAlpha)),e},Object.defineProperties(Cesium__namespace.StripeMaterialProperty[_0x5e32ae(2392)],{globalAlpha:{set:function(r){this._globalAlpha=r},get:function(){return this._globalAlpha??1}}});const getValue_old=Cesium__namespace.StripeMaterialProperty.prototype.getValue;Cesium__namespace.StripeMaterialProperty.prototype[_0x5e32ae(810)]=function(r,e){const t={_0xb6a39b:3252},i=_0x5e32ae;return e=getValue_old.bind(this)(r,e),this.globalAlpha!==1&&(e.evenColor&&(e.evenColor.alpha*=this[i(t._0xb6a39b)]),e.oddColor&&(e.oddColor.alpha*=this[i(t._0xb6a39b)])),e},proj4.defs("EPSG:4490",_0x5e32ae(2838)),proj4.defs(_0x5e32ae(3972),"+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=13500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x5e32ae(1300)]("EPSG:4492","+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=14500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x5e32ae(665),"+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=15500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x5e32ae(1300)]("EPSG:4494",_0x5e32ae(1490)),proj4.defs("EPSG:4495",_0x5e32ae(1033)),proj4[_0x5e32ae(1300)]("EPSG:4496","+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=18500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4497","+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=19500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4498","+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=20500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x5e32ae(4110),_0x5e32ae(3286)),proj4.defs(_0x5e32ae(3568),"+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=22500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4501",_0x5e32ae(752)),proj4[_0x5e32ae(1300)](_0x5e32ae(2833),"+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=25500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x5e32ae(1593),_0x5e32ae(1415)),proj4.defs("EPSG:4515","+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=27500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4516",_0x5e32ae(677)),proj4[_0x5e32ae(1300)](_0x5e32ae(1657),"+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=29500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x5e32ae(2910),"+proj=tmerc +lat_0=0 +lon_0=90 +k=1 +x_0=30500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x5e32ae(4288),"+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=31500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4520","+proj=tmerc +lat_0=0 +lon_0=96 +k=1 +x_0=32500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x5e32ae(1300)]("EPSG:4521","+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=33500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x5e32ae(790),"+proj=tmerc +lat_0=0 +lon_0=102 +k=1 +x_0=34500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4523",_0x5e32ae(1749)),proj4.defs("EPSG:4524",_0x5e32ae(3979)),proj4.defs("EPSG:4525","+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=37500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4526","+proj=tmerc +lat_0=0 +lon_0=114 +k=1 +x_0=38500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x5e32ae(1300)]("EPSG:4527","+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=39500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4528","+proj=tmerc +lat_0=0 +lon_0=120 +k=1 +x_0=40500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4529","+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=41500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x5e32ae(1300)](_0x5e32ae(1080),"+proj=tmerc +lat_0=0 +lon_0=126 +k=1 +x_0=42500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x5e32ae(2874),"+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=43500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x5e32ae(1300)]("EPSG:4532","+proj=tmerc +lat_0=0 +lon_0=132 +k=1 +x_0=44500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x5e32ae(3792),_0x5e32ae(696)),proj4[_0x5e32ae(1300)]("EPSG:4502",_0x5e32ae(3641)),proj4.defs("EPSG:4503","+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4504",_0x5e32ae(4220)),proj4.defs("EPSG:4505","+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4506","+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4507","+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4508","+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4509","+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4510","+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4511","+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x5e32ae(1300)](_0x5e32ae(2070),"+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4534","+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4535",_0x5e32ae(2278)),proj4.defs(_0x5e32ae(1969),_0x5e32ae(2501)),proj4.defs("EPSG:4537","+proj=tmerc +lat_0=0 +lon_0=84 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4538",_0x5e32ae(4220)),proj4.defs(_0x5e32ae(2006),"+proj=tmerc +lat_0=0 +lon_0=90 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x5e32ae(1692),"+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x5e32ae(3608),"+proj=tmerc +lat_0=0 +lon_0=96 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4542","+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x5e32ae(1300)]("EPSG:4543",_0x5e32ae(1254)),proj4.defs("EPSG:4544","+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4545",_0x5e32ae(3452)),proj4[_0x5e32ae(1300)]("EPSG:4546","+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4547","+proj=tmerc +lat_0=0 +lon_0=114 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x5e32ae(1300)]("EPSG:4548","+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4549","+proj=tmerc +lat_0=0 +lon_0=120 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x5e32ae(701),"+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4551","+proj=tmerc +lat_0=0 +lon_0=126 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x5e32ae(1300)]("EPSG:4552","+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4553","+proj=tmerc +lat_0=0 +lon_0=132 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4554",_0x5e32ae(1724));class BaseClass{constructor(e){const t={_0x1aae59:3798},i=_0x5e32ae;this[i(t._0x1aae59)]=e,this._enabledEvent=(e==null?void 0:e.enabledEvent)??!![]}get enabledEvent(){return this._enabledEvent}set enabledEvent(e){this._enabledEvent=e}destroy(e){if(!e)for(const t in this)delete this[t]}on(e,t,i){const s={_0x9d6337:1416},n=_0x5e32ae;if(!e)return logError$1("绑定事件时传入了空值",t),this;if(Array.isArray(e))for(let o=0,c=e.length;o<c;o++)this._on(e[o],t,i);else if(isObject(e))for(const o in e)this[n(s._0x9d6337)](o,e[o],t);else{e=splitWords(e);for(let o=0,c=e.length;o<c;o++)this._on(e[o],t,i)}return this._onEventHook&&this._onEventHook(e),this}[_0x5e32ae(1220)](e,t,i){const s={_0x38bddb:3402},n=_0x5e32ae;if(!e)delete this[n(2102)];else if(Array.isArray(e))for(let o=0,c=e[n(s._0x38bddb)];o<c;o++)this._off(e[o],t,i);else if(isObject(e))for(const o in e)this._off(o,e[o],t);else{e=splitWords(e);for(let o=0,c=e.length;o<c;o++)this[n(3311)](e[o],t,i)}return this}_on(e,t,i){const s={_0x54fe8e:3402},n=_0x5e32ae;this._events=this._events||{};let o=this._events[e];!o&&(o=[],this._events[e]=o),i===this&&(i=void 0);const c={fn:t,ctx:i},_=o;for(let l=0,h=_[n(s._0x54fe8e)];l<h;l++)if(_[l].fn===t&&_[l].ctx===i)return;_.push(c)}_off(e,t,i){const s={_0x5e64d2:2102,_0x3eb433:869},n=_0x5e32ae;let o,c,_;if(this._events&&(o=this._events[e],!!o)){if(!t){for(c=0,_=o.length;c<_;c++)o[c].fn=falseFn;delete this._events[e];return}if(i===this&&(i=void 0),o)for(c=0,_=o.length;c<_;c++){const l=o[c];if(l.ctx===i&&l.fn===t){l.fn=falseFn,this[n(3540)]&&(this[n(s._0x5e64d2)][e]=o=o[n(s._0x3eb433)]()),o.splice(c,1);return}}}}[_0x5e32ae(1404)](e,t,i){const s={_0x23ff89:1255,_0x540c1c:3402,_0x2f7305:3540,_0x55345b:825},n=_0x5e32ae;if(!this.listens(e,i)||!this[n(s._0x23ff89)])return this;const o={sourceTarget:this,...t,type:e,target:this,stopPropagation:function(){this._stopPropagation=!![]}};if(this._events){const c=this._events[e];if(c){this[n(3540)]=this._firingCount+1||1;for(let _=0,l=c[n(s._0x540c1c)];_<l;_++){const h=c[_];h.fn.call(h.ctx||this,o)}this[n(s._0x2f7305)]--}}return i&&!o._stopPropagation&&this[n(s._0x55345b)](o),this}listens(e,t){const i={_0x3b3d48:3402,_0x5d6f58:3895},s=_0x5e32ae,n=this[s(2102)]&&this._events[e];if(n&&n[s(i._0x3b3d48)])return!![];if(t){for(const o in this[s(i._0x5d6f58)])if(this._eventParents[o].listens(e,t))return!![]}return![]}[_0x5e32ae(2211)](e,t,i){if(isObject(e)){for(const n in e)this.once(n,e[n],t);return this}const s=bind(()=>{this.off(e,t,i).off(e,s,i)},this);return this.on(e,t,i).on(e,s,i)}addEventParent(e){const t={_0x437f04:3895},i=_0x5e32ae;return this[i(t._0x437f04)]=this[i(t._0x437f04)]||{},this._eventParents[stampGlobalId(e)]=e,this}[_0x5e32ae(3665)](e){return this._eventParents&&delete this._eventParents[stampGlobalId(e)],this}[_0x5e32ae(2869)](e){const t={_0x122d38:3895},i=_0x5e32ae;return this._eventParents&&this[i(t._0x122d38)][stampGlobalId(e)]?!![]:![]}[_0x5e32ae(825)](e){const t={_0x4f9466:3205},i=_0x5e32ae;for(const s in this._eventParents){const n=this._eventParents[s];this[i(3672)](n,e)&&n.fire(e[i(t._0x4f9466)],{layer:e[i(3132)],propagatedFrom:e.target,...e},!![])}}[_0x5e32ae(3672)](e,t){return!![]}}function falseFn(){return![]}function bind(r,e){const t={_0x4eee23:2392},i=_0x5e32ae,s=Array[i(t._0x4eee23)].slice;if(r.bind)return r.bind.apply(r,s.call(arguments,1));const n=s[i(680)](arguments,2);return function(){return r.apply(e,n.length?n.concat(s.call(arguments)):arguments)}}const State={INITIALIZED:_0x5e32ae(3251),ADD:_0x5e32ae(4084),ADDED:"added",REMOVED:_0x5e32ae(3403),DESTROY:"destroy"},EventType={add:"add",remove:_0x5e32ae(2004),addItem:"addItem",removeItem:"removeItem",addGraphic:"addGraphic",removeGraphic:"removeGraphic",addLayer:_0x5e32ae(2965),removeLayer:"removeLayer",changeBasemap:_0x5e32ae(3769),addControl:"addControl",removeControl:"removeControl",updateControl:"updateControl",addEffect:_0x5e32ae(3070),removeEffect:_0x5e32ae(3414),update:"update",updatePosition:"updatePosition",updateStyle:"updateStyle",updateAttr:_0x5e32ae(2366),show:_0x5e32ae(575),hide:_0x5e32ae(2538),start:"start",change:"change",endItem:"endItem",end:"end",stop:"stop",zoom:"zoom",loadBefore:"loadBefore",load:"load",error:"error",loadConfig:"loadConfig",popupOpen:_0x5e32ae(4319),popupClose:_0x5e32ae(3867),tooltipOpen:"tooltipOpen",tooltipClose:"tooltipClose",contextMenuOpen:"contextMenuOpen",contextMenuClose:_0x5e32ae(2251),contextMenuClick:"contextMenuClick",highlightOpen:"highlightOpen",highlightClose:_0x5e32ae(2966),click:"click",clickGraphic:"clickGraphic",clickTileGraphic:"clickTileGraphic",clickMap:"clickMap",dblClick:_0x5e32ae(2321),leftDown:"leftDown",leftUp:_0x5e32ae(1285),mouseMove:_0x5e32ae(4055),mouseMoveTarget:_0x5e32ae(3927),wheel:"wheel",rightClick:"rightClick",rightDown:"rightDown",rightUp:"rightUp",middleClick:"middleClick",middleDown:_0x5e32ae(2969),middleUp:_0x5e32ae(1141),pinchStart:"pinchStart",pinchEnd:_0x5e32ae(2979),pinchMove:"pinchMove",mouseDown:"mouseDown",mouseUp:"mouseUp",mouseOver:_0x5e32ae(3986),mouseOut:_0x5e32ae(2088),keydown:_0x5e32ae(4141),keyup:_0x5e32ae(4308),drawStart:"drawStart",drawMouseMove:_0x5e32ae(3602),drawAddPoint:"drawAddPoint",drawRemovePoint:"drawRemovePoint",drawCreated:_0x5e32ae(1422),editStart:"editStart",editMouseDown:"editMouseDown",editMouseMove:"editMouseMove",editMovePoint:"editMovePoint",editAddPoint:"editAddPoint",editRemovePoint:_0x5e32ae(2679),editStyle:"editStyle",editStop:"editStop",move:"move",initialTilesLoaded:_0x5e32ae(3554),allTilesLoaded:"allTilesLoaded",addTile:_0x5e32ae(2668),addTileSuccess:"addTileSuccess",addTileError:_0x5e32ae(1514),removeTile:"removeTile",cameraMoveStart:"cameraMoveStart",cameraMoveEnd:"cameraMoveEnd",cameraChanged:_0x5e32ae(2369),preUpdate:"preUpdate",postUpdate:"postUpdate",preRender:_0x5e32ae(4194),postRender:"postRender",renderError:"renderError",morphStart:_0x5e32ae(2841),morphComplete:_0x5e32ae(1981),clockTick:"clockTick",clockStop:"clockStop",terrainChange:"terrainChange",terrainLoadError:"terrainLoadError",terrainLoadSuccess:"terrainLoadSuccess",tileLoadProgress:"tileLoadProgress"};class BaseThing extends BaseClass{constructor(e={}){const t={_0x23b81f:1497,_0x5c953a:2572},i=_0x5e32ae;isBoolean(e)&&(e={enabled:e}),super(e),this[i(3618)]=e.id??createGuid(),this[i(t._0x23b81f)]=e.enabled??!![],this[i(553)]=State[i(t._0x5c953a)],this.options=e}get state(){return this[_0x5e32ae({_0x137076:553}._0x137076)]}get isAdded(){const e=_0x5e32ae;return this._state===State[e(4142)]}get id(){return this._id}set id(e){this.options.id=e}get uuid(){return this[_0x5e32ae(3618)]}get enabled(){return this._enabled}set enabled(e){const t=_0x5e32ae;this[t(1497)]!==e&&(this._enabled=e,this[t(751)]&&this[t(751)](e))}addTo(e){const t={_0x23bdf5:3495},i=_0x5e32ae;return e&&e.addThing&&e[i(t._0x23bdf5)](this),this}remove(e){this[_0x5e32ae(1890)]&&this._map.removeThing(this,e)}_onAdd(e){const t={_0xbbf0ba:4134,_0x33d5fa:716,_0x412769:3936,_0x1d9790:1404,_0x3286e1:4084},i=_0x5e32ae;var s;this.isAdded||this[i(553)]===State[i(t._0xbbf0ba)]||(this._state=State.ADD,this._map=e,this.options.eventParent?this.addEventParent(this.options[i(t._0x33d5fa)]):((s=this.options)===null||s===void 0?void 0:s[i(716)])===![]||this.addEventParent(e),this._mountedHook&&!this._createOK&&(this._mountedHook(),this._createOK=!![]),this._addedBaseHook&&this[i(t._0x412769)](),this._addedHook&&this._addedHook(),this[i(553)]=State.ADDED,this[i(t._0x1d9790)](EventType[i(t._0x3286e1)]))}_onRemove(){const e={_0x370a40:2442,_0x58287b:716,_0x2f5573:3665,_0x4f3d27:1890},t=_0x5e32ae;var i,s;this._state===State[t(4142)]&&this._map&&(this._removedBaseHook&&this._removedBaseHook(),this[t(e._0x370a40)]&&this._removedHook(),this._state=State.REMOVED,this[t(1404)](EventType.remove),(i=this.options)!==null&&i!==void 0&&i.eventParent?this[t(3665)](this.options.eventParent):((s=this.options)===null||s===void 0?void 0:s[t(e._0x58287b)])===![]||this[t(e._0x2f5573)](this[t(e._0x4f3d27)]),this[t(1890)]=null)}_mountedHook(){}_addedHook(){}_removedHook(){}setOptions(e){const t={_0x4226dd:968,_0x425ea3:437},i=_0x5e32ae;return!e||Object.keys(e).length===0?this:(this.options=merge(this.options,e),Cesium__namespace.defined(e[i(t._0x4226dd)])&&(this[i(968)]=e[i(t._0x4226dd)]),this._setOptionsHook&&this[i(t._0x425ea3)](this.options,e),this)}destroy(e){const t={_0x3003a0:757},i=_0x5e32ae;this._state!==State.REMOVED&&(this.clear&&this[i(1387)](),this.remove()),super[i(t._0x3003a0)](e)}}class GroupThing extends BaseThing{constructor(e={}){const t=_0x5e32ae;super(e),this[t(4196)]=[]}get arrThing(){return this._arrThing}get[_0x5e32ae(470)](){return this.length===0}get[_0x5e32ae(732)](){return this.length>0}get length(){const e={_0x69fb1c:3798},t=_0x5e32ae;var i;return((i=this[t(e._0x69fb1c)].things)===null||i===void 0?void 0:i.length)>0?this[t(3798)].things.length:this._arrThing.length}_enabledHook(e){this.eachThing(t=>{const i=_0x5210;t[i(968)]=e},this)}[_0x5e32ae(4158)](){this.addChildsToMap()}_removedHook(){this.removeMapChilds()}addChildsToMap(){this.eachThing(e=>{this._map.addThing(e)},this)}[_0x5e32ae(570)](){this.eachThing(e=>{this._map.removeThing(e)},this)}[_0x5e32ae(3495)](e){const t=_0x5e32ae;return e.parent&&(e.removeEventParent(e.parent),e.parent=null),e.parent=this,e.options[t(716)]=this,this._arrThing.push(e),this.isAdded&&!e.isAdded?this._map[t(3495)](e):(e.removeEventParent(this._map),e.addEventParent(this)),this}[_0x5e32ae(1614)](e){return e.parent=null,e.removeEventParent(this),removeArrayItem(this._arrThing,e),this._map&&e.isAdded&&this._map.removeThing(e),this}[_0x5e32ae(1947)](e,t){if(this[_0x5e32ae({_0x182011:4196}._0x182011)])return this._arrThing.forEach(n=>{e.call(t,n)}),this}getThings(){return this._arrThing}getInMapChilds(){const e={_0x41776d:4196,_0x4a5434:3759},t=_0x5e32ae,i=this[t(4196)]||[];return this._map[t(1947)](s=>{const n=t;s.pid===this.id&&this[n(e._0x41776d)].indexOf(s)===-1&&i[n(e._0x4a5434)](s)},this),i}[_0x5e32ae(3829)](e){const t=_0x5e32ae,i=this[t(4196)];if(!(!this._arrThing||this._arrThing[t(3402)]===0))for(let s=0,n=i.length;s<n;s++){const o=i[s];if(o.id===e)return o}}[_0x5e32ae(757)](e){this[_0x5e32ae({_0x33c498:1947}._0x33c498)](s=>{s!=null&&s.destroy&&s.destroy(e)},this),super.destroy(e)}}var GroundSkyBoxFS=`uniform samplerCube u_cubeMap;
in vec3 v_texCoord;

void main() {
  vec4 color = czm_textureCube(u_cubeMap, normalize(v_texCoord));
  out_FragColor = vec4(czm_gammaCorrect(color).rgb, czm_morphTime);
}
`,GroundSkyBoxVS=`in vec3 position;
uniform mat3 u_rotateMatrix;
out vec3 v_texCoord;

void main() {
  vec3 p = czm_viewRotation * u_rotateMatrix * (czm_temeToPseudoFixed * (czm_entireFrustum.y * position));//【火星科技marsgis.cn】 Hao 2019-9-18   天空盒
  gl_Position = czm_projection * vec4(p, 1.0);
  v_texCoord = position.xyz;
}
`;class GroundSkyBox extends Cesium__namespace.SkyBox{constructor(e){const t=_0x5e32ae;super(e),this[t(955)]=new Cesium__namespace[t(3768)]}update(e,t){const i={_0x39f396:3707,_0x32da3d:2888,_0x2e98b4:1270,_0x394966:515,_0x7eaade:515,_0x4a46c0:1733,_0x4ea361:3368,_0x1dd040:648,_0x1daec6:1681,_0x4653de:1880,_0x7b0886:1620,_0x315d6a:2185,_0x4d5794:515},s={_0x5cb183:3684,_0x56d27a:955},n={_0x4b8a1b:648},o=_0x5e32ae,c=this;if(!this.show||e.mode!==Cesium__namespace[o(3850)][o(i._0x39f396)]&&e.mode!==Cesium__namespace.SceneMode[o(i._0x32da3d)]||!e.passes[o(3589)])return;const _=e.context;if(this._sources!==this.sources){this._sources=this[o(i._0x2e98b4)];const h=this[o(i._0x2e98b4)];if(!Cesium__namespace[o(i._0x394966)](h.positiveX)||!Cesium__namespace.defined(h.negativeX)||!Cesium__namespace.defined(h.positiveY)||!Cesium__namespace.defined(h.negativeY)||!Cesium__namespace[o(i._0x7eaade)](h[o(3556)])||!Cesium__namespace.defined(h[o(2081)]))throw new Cesium__namespace.DeveloperError("this.sources is required and must have positiveX, negativeX, positiveY, negativeY, positiveZ, and negativeZ properties.");if(typeof h.positiveX!=typeof h[o(i._0x4a46c0)]||typeof h.positiveX!=typeof h.positiveY||typeof h[o(3368)]!=typeof h.negativeY||typeof h[o(i._0x4ea361)]!=typeof h.positiveZ||typeof h[o(3368)]!=typeof h[o(2081)])throw new Cesium__namespace.DeveloperError("this.sources properties must all be the same type.");typeof h.positiveX===o(1661)?Cesium__namespace[o(3508)](_,this._sources).then(function(f){const m=o;c._cubeMap=c._cubeMap&&c[m(648)].destroy(),c._cubeMap=f}):(this._cubeMap=this._cubeMap&&this[o(i._0x1dd040)].destroy(),this._cubeMap=new Cesium__namespace.CubeMap({context:_,source:h}))}const l=this._command;if(!Cesium__namespace.defined(l[o(2271)])){l.uniformMap={u_cubeMap:()=>c[o(n._0x4b8a1b)],u_rotateMatrix:()=>{const m=o;return l[m(2294)]=Cesium__namespace.Transforms[m(s._0x5cb183)](e[m(2792)][m(3581)]),Cesium__namespace[m(4102)].getMatrix3(l[m(2294)],this[m(s._0x56d27a)])}};const h=Cesium__namespace[o(1891)].createGeometry(Cesium__namespace[o(1891)].fromDimensions({dimensions:new Cesium__namespace[o(3916)](2,2,2),vertexFormat:Cesium__namespace.VertexFormat.POSITION_ONLY})),f=this._attributeLocations=Cesium__namespace.GeometryPipeline.createAttributeLocations(h);l.vertexArray=Cesium__namespace.VertexArray.fromGeometry({context:_,geometry:h,attributeLocations:f,bufferUsage:Cesium__namespace[o(i._0x1daec6)].STATIC_DRAW}),l.renderState=Cesium__namespace.RenderState.fromCache({blending:Cesium__namespace.BlendingState[o(i._0x4653de)]})}if(!Cesium__namespace.defined(l.shaderProgram)||this._useHdr!==t){const h=new Cesium__namespace[o(i._0x7b0886)]({defines:[t?"HDR":""],sources:[GroundSkyBoxFS]});l.shaderProgram=Cesium__namespace[o(4010)][o(i._0x315d6a)]({context:_,vertexShaderSource:GroundSkyBoxVS,fragmentShaderSource:h,attributeLocations:this._attributeLocations}),this._useHdr=t}if(Cesium__namespace[o(i._0x4d5794)](this[o(648)]))return l}}var MultipleSkyBoxFS=_0x5e32ae(2248),MultipleSkyBoxVS=_0x5e32ae(2291);class MultipleSkyBox extends Cesium__namespace.SkyBox{constructor(e){const t={_0x4411bd:1896,_0x15d37e:966},i=_0x5e32ae;super(e),this[i(1896)]=e[i(t._0x4411bd)],this[i(4298)]=e.sources3,this[i(t._0x15d37e)]=void 0,this._sources3=void 0,this._cubeMap2=void 0,this[i(1819)]=void 0,this._skyboxMatrix3=new Cesium__namespace.Matrix3,this.select=e.select||0}update(e,t){const i={_0x1fb64d:3707,_0x504fc6:515,_0x45a283:3496,_0x46ae7c:3053,_0x22eec2:549,_0x1774a3:2258,_0x2b99c6:549,_0x24b122:648,_0x8f3c81:1313,_0x520a0c:1891,_0x3e0dbd:912,_0x16e9e1:853,_0x522201:2185,_0x54b3d2:515,_0x99a1e0:2457,_0x1e559d:1609},s={_0x2ff447:2792,_0x423a67:3581},n={_0x24fa07:1643},o={_0x438031:757},c=_0x5e32ae,_=this;if(!this[c(575)]||e.mode!==Cesium__namespace.SceneMode[c(i._0x1fb64d)]&&e.mode!==Cesium__namespace[c(3850)][c(2888)]||!e[c(2533)].render)return;const l=e.context;if(this[c(2173)]!==this.sources){this._sources=this.sources;const f=this.sources;this._sources2=this.sources2;const m=this.sources2;this._sources3=this.sources3;const g=this.sources3;if(!Cesium__namespace.defined(f.positiveX)||!Cesium__namespace[c(i._0x504fc6)](f.negativeX)||!Cesium__namespace.defined(f.positiveY)||!Cesium__namespace.defined(f[c(i._0x45a283)])||!Cesium__namespace[c(i._0x504fc6)](f.positiveZ)||!Cesium__namespace.defined(f.negativeZ))throw new Cesium__namespace.DeveloperError("this.sources is required and must have positiveX, negativeX, positiveY, negativeY, positiveZ, and negativeZ properties.");if(typeof f.positiveX!=typeof f[c(1733)]||typeof f[c(3368)]!=typeof f.positiveY||typeof f[c(3368)]!=typeof f.negativeY||typeof f.positiveX!=typeof f.positiveZ||typeof f.positiveX!=typeof f.negativeZ)throw new Cesium__namespace[c(i._0x46ae7c)]("this.sources properties must all be the same type.");typeof f.positiveX===c(1661)?(Cesium__namespace.loadCubeMap(l,this[c(2173)])[c(i._0x22eec2)](function(C){const E=c;_._cubeMap=_._cubeMap&&_._cubeMap[E(o._0x438031)](),_._cubeMap=C}),Cesium__namespace.loadCubeMap(l,this._sources2).then(function(C){const E=c;_._cubeMap2=_[E(n._0x24fa07)]&&_[E(n._0x24fa07)][E(757)](),_[E(1643)]=C}),Cesium__namespace.loadCubeMap(l,this[c(i._0x1774a3)])[c(i._0x2b99c6)](function(C){const E=c;_._cubeMap3=_._cubeMap3&&_[E(1819)][E(757)](),_._cubeMap3=C})):(this._cubeMap=this._cubeMap&&this[c(i._0x24b122)].destroy(),this[c(i._0x24b122)]=new Cesium__namespace.CubeMap({context:l,source:f}),this._cubeMap2=this._cubeMap2&&this[c(1643)].destroy(),this._cubeMap2=new Cesium__namespace.CubeMap({context:l,source:m}),this._cubeMap3=this._cubeMap3&&this._cubeMap3.destroy(),this[c(1819)]=new Cesium__namespace[c(i._0x8f3c81)]({context:l,source:g}))}const h=this._command;if(h.modelMatrix=Cesium__namespace[c(2911)].eastNorthUpToFixedFrame(e[c(2792)]._positionWC),!Cesium__namespace.defined(h.vertexArray)){h.uniformMap={u_cubeMap:function(){return _._cubeMap},u_cubeMap2:function(){return _._cubeMap2},u_cubeMap3:function(){return _._cubeMap3},u_select:()=>this.select,u_rotateMatrix:()=>{const g=c;return h[g(2294)]=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(e[g(s._0x2ff447)][g(s._0x423a67)]),Cesium__namespace.Matrix4.getMatrix3(h.modelMatrix,this._skyboxMatrix3)}};const f=Cesium__namespace[c(i._0x520a0c)].createGeometry(Cesium__namespace[c(1891)].fromDimensions({dimensions:new Cesium__namespace.Cartesian3(2,2,2),vertexFormat:Cesium__namespace.VertexFormat[c(i._0x3e0dbd)]})),m=this._attributeLocations=Cesium__namespace.GeometryPipeline[c(i._0x16e9e1)](f);h[c(2271)]=Cesium__namespace.VertexArray.fromGeometry({context:l,geometry:f,attributeLocations:m,bufferUsage:Cesium__namespace.BufferUsage._DRAW}),h.renderState=Cesium__namespace.RenderState[c(i._0x522201)]({blending:Cesium__namespace.BlendingState.ALPHA_BLEND})}if(!Cesium__namespace[c(i._0x54b3d2)](h.shaderProgram)||this[c(i._0x99a1e0)]!==t){const f=new Cesium__namespace[c(1620)]({defines:[t?c(i._0x1e559d):""],sources:[MultipleSkyBoxFS]});h.shaderProgram=Cesium__namespace.ShaderProgram[c(i._0x522201)]({context:l,vertexShaderSource:MultipleSkyBoxVS,fragmentShaderSource:f,attributeLocations:this._attributeLocations}),this._useHdr=t}if(Cesium__namespace.defined(this[c(i._0x24b122)])&&Cesium__namespace.defined(this._cubeMap2)&&Cesium__namespace.defined(this._cubeMap3))return h}[_0x5e32ae(4199)](){return![]}destroy(){const e={_0x575a19:2271,_0x5c8e56:1772,_0x31fc80:648,_0x320a69:757,_0x3a7a17:1819},t=_0x5e32ae,i=this._command;return i[t(e._0x575a19)]=i.vertexArray&&i[t(e._0x575a19)].destroy(),i[t(1772)]=i[t(e._0x5c8e56)]&&i.shaderProgram.destroy(),this[t(e._0x31fc80)]=this[t(e._0x31fc80)]&&this._cubeMap[t(757)](),this._cubeMap2=this._cubeMap2&&this._cubeMap2[t(e._0x320a69)](),this[t(e._0x3a7a17)]=this._cubeMap3&&this._cubeMap3.destroy(),this[t(1988)](this)}}class LocalWorldTransform{constructor(e,t){const i={_0x4e6e6e:1182,_0x5507fa:4253},s=_0x5e32ae;t=t||Cesium__namespace.Transforms.eastNorthUpToFixedFrame,this._matrix=t(e),this[s(i._0x4e6e6e)]=Cesium__namespace.Matrix4[s(i._0x5507fa)](this._matrix,new Cesium__namespace.Matrix4)}localToWorld(e,t){const i={_0x4f4f1c:4102},s=_0x5e32ae;return!t&&(t=new Cesium__namespace.Cartesian3),Cesium__namespace[s(i._0x4f4f1c)].multiplyByPoint(this._matrix,e,t),t}worldToLocal(e,t){const i={_0x14dcf5:3462},s=_0x5e32ae;return!t&&(t=new Cesium__namespace.Cartesian3),Cesium__namespace.Matrix4[s(i._0x14dcf5)](this._inverseMatrix,e,t),t}}class MarsArray{constructor(){const e={_0x58ea31:1235},t=_0x5e32ae;this[t(e._0x58ea31)]=[],this._hash={}}get[_0x5e32ae(3402)](){const e={_0x89d485:3402},t=_0x5e32ae;return this._array[t(e._0x89d485)]}get values(){return this._array}contains(e){const t={_0x262eba:2110},i=_0x5e32ae;return e?Cesium__namespace.defined(this[i(t._0x262eba)][e]):![]}set(e,t){const i=this._hash[e];t!==i&&(this.remove(e),this._hash[e]=t,this._array.push(t))}getLast(){return this[_0x5e32ae({_0x1154b2:1235}._0x1154b2)].length>0?this._array[this._array.length-1]:void 0}[_0x5e32ae(1196)](e){return e?this[_0x5e32ae(2110)][e]:void 0}[_0x5e32ae(4013)](e,t="id",i="options"){if(t==="id"&&this._hash[e])return this._hash[e];for(let s=0,n=this._array.length;s<n;s++){const o=this._array[s];if(o[t]==e||o[i]&&o[i][t]==e)return o}}getListByAttr(e,t="id",i=_0x5e32ae(3798)){const s={_0x3f97c5:3759},n=_0x5e32ae,o=[];for(let c=0,_=this._array.length;c<_;c++){const l=this._array[c];(l[t]==e||l[i]&&l[i][t]==e)&&o[n(s._0x3f97c5)](l)}return o}remove(e){const t={_0x21a288:2110,_0x4c7aaf:515,_0x229a72:2316},i=_0x5e32ae;if(!this[i(t._0x21a288)])return;const s=this[i(t._0x21a288)][e],n=Cesium__namespace[i(t._0x4c7aaf)](s);if(n){const o=this._array;o.splice(o[i(t._0x229a72)](s),1),delete this._hash[e]}return n}forEach(e,t,i){const s={_0x2cde2b:680,_0x2ce690:3402},n=_0x5e32ae;if(i)for(let o=this._array.length-1;o>=0;o--){const c=this[n(1235)][o];e[n(s._0x2cde2b)](t||this,c,o)}else for(let o=0,c=this._array[n(s._0x2ce690)];o<c;o++){const _=this[n(1235)][o];e.call(t||this,_,o)}}[_0x5e32ae(1888)](){const e={_0x1e3683:2110,_0x3e1f8f:3402},t=_0x5e32ae,i=this[t(1235)];i.length>0&&(this[t(e._0x1e3683)]={},i[t(e._0x3e1f8f)]=0)}destroy(){const e={_0x413f26:2004,_0x534537:757},t=_0x5e32ae;if(this._array.length>0&&this[t(1235)][0].destroy){this[t(e._0x413f26)]=function(){};for(let i=this._array.length-1;i>=0;i--){const s=this._array[i];if(s!=null&&s[t(e._0x534537)])try{s.destroy()}catch(n){logWarn("MarsArray item.destroy 异常",n)}}}this[t(1888)]();for(const i in this)delete this[i]}}class Texture3{constructor(e={}){const t={_0x52bfd3:1544,_0x84f487:515,_0x4c6359:4309,_0x353427:2399,_0x3cad28:3061,_0x21b28e:688,_0x2ce506:4068,_0x4c75f4:3455,_0xf1db4d:2416,_0x1f4e99:2595,_0x2fbb59:1388,_0x4f90cb:3202},i=_0x5e32ae,s=e.context,n=s._gl,o=e[i(3038)];let c=e.width,_=e.height,l=e.depth;if(Cesium__namespace.defined(o)&&(!Cesium__namespace.defined(c)&&(c=Cesium__namespace.defaultValue(o.videoWidth,o.width)),!Cesium__namespace.defined(_)&&(_=Cesium__namespace[i(1626)](o.videoHeight,o.height)),!Cesium__namespace.defined(l)&&(l=Cesium__namespace.defaultValue(o[i(t._0x52bfd3)],o.depth))),!Cesium__namespace[i(t._0x84f487)](c)||!Cesium__namespace.defined(_)||!Cesium__namespace[i(t._0x84f487)](l))throw new Cesium__namespace.DeveloperError("options requires a source field to create an initialized texture or width or height and depth fields to create a blank texture.");const h=Cesium__namespace[i(1626)](e.pixelFormat,Cesium__namespace[i(2399)][i(3993)]),f=Cesium__namespace.defaultValue(e.pixelDatatype,Cesium__namespace.PixelDatatype[i(2816)]),m=Cesium__namespace.PixelFormat[i(t._0x4c6359)](h,f,s),g=![],C=![];let E=4;Cesium__namespace[i(515)](o)&&Cesium__namespace[i(t._0x84f487)](o.arrayBufferView)&&(E=Cesium__namespace[i(t._0x353427)][i(1115)](h,f,c));const P=n.TEXTURE_3D,w=n[i(t._0x3cad28)]();if(n[i(t._0x21b28e)](n.TEXTURE0),n.bindTexture(P,w),n.pixelStorei(n.UNPACK_ALIGNMENT,E),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n[i(3898)]),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,C),Cesium__namespace[i(515)](o)&&Cesium__namespace.defined(o[i(t._0x2ce506)])){const T=o.arrayBufferView;n.texImage3D(P,0,m,c,_,l,0,h,Cesium__namespace.PixelDatatype[i(t._0x4c75f4)](f,s),T)}n.bindTexture(P,null);const M=texture3DSizeInBytes(h,f,c,_,l);this._id=Cesium__namespace[i(2216)](),this._context=s,this._textureFilterAnisotropic=s[i(t._0xf1db4d)],this._texture=w,this._textureTarget=P,this[i(t._0x1f4e99)]=m,this._pixelFormat=h,this[i(t._0x2fbb59)]=f,this[i(2237)]=c,this._height=_,this._depth=l,this._hasMipmap=![],this._sizeInBytes=M,this._preMultiplyAlpha=g,this[i(t._0x4f90cb)]=C,this._initialized=!![],this._dimensions=new Cesium__namespace.Cartesian3(c,_,l),this._sampler=void 0,this.sampler=Cesium__namespace.defaultValue(e.sampler,new Cesium__namespace[i(1253)])}get id(){return this._id}get sampler(){return this[_0x5e32ae({_0x4c2a30:2425}._0x4c2a30)]}set sampler(e){const t={_0x15593b:2284,_0x58849f:3451,_0x43ce03:2580,_0x38c9d0:3644},i=_0x5e32ae,s=e[i(t._0x15593b)],n=e[i(2223)],o=this._context,c=o._gl,_=this[i(1478)];c.activeTexture(c.TEXTURE0),c.bindTexture(_,this._texture),c.texParameteri(_,c.TEXTURE_MIN_FILTER,s),c.texParameteri(_,c.TEXTURE_MAG_FILTER,n),c[i(3571)](_,c.TEXTURE_WRAP_S,e.wrapS),c.texParameteri(_,c[i(t._0x58849f)],e.wrapT),c.texParameteri(_,c[i(t._0x43ce03)],c[i(t._0x38c9d0)]),c.bindTexture(_,null),this._sampler=e}get[_0x5e32ae(4214)](){return this[_0x5e32ae({_0xc5f407:3674}._0xc5f407)]}get pixelDatatype(){return this[_0x5e32ae({_0x340887:1388}._0x340887)]}get dimensions(){return this[_0x5e32ae(2035)]}get height(){return this._height}get depth(){return this._depth}get preMultiplyAlpha(){return this._preMultiplyAlpha}get[_0x5e32ae(3289)](){return this._flipY}get[_0x5e32ae(607)](){return this[_0x5e32ae({_0x37343e:3499}._0x37343e)]}get _target(){return this[_0x5e32ae(1478)]}isDestroyed(){return![]}[_0x5e32ae(757)](){const e={_0x24a8de:1988},t=_0x5e32ae;return this._context._gl[t(2310)](this._texture),Cesium__namespace[t(e._0x24a8de)](this)}}function texture3DSizeInBytes(r,e,t,i,s){const n={_0x44f078:607},o=_0x5e32ae,c=Cesium__namespace[o(2399)].componentsLength(r),_=Cesium__namespace.PixelDatatype[o(n._0x44f078)](e);return t*i*s*c*_}const ChinaCRS={WGS84:"WGS84",GCJ02:"GCJ02",BAIDU:_0x5e32ae(2199)};let ion="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJlZDJjMTcwNS04ZDVmLTQzNWQtYWUyZC0yMTJkMDkyMzkyMjMiLCJpZCI6MTQ4MiwiaWF0IjoxNjQ4NDQ2OTIwfQ.7e1QUkx_k-mZBxKz9tV8a5TFEorrlLlkfcVNNPzfTQY";function updateIon(r){ion=r,Cesium__namespace.Ion.defaultAccessToken=r}let mapbox="sk.eyJ1IjoibWFyc2dpcyIsImEiOiJjbDFhYXQ3a2EwaHF6M2NvdnhmdjR6ajZ2In0.-sahm9R0QuPP3pAihJHC4A";function updateMapbox(r){mapbox=r}let bing=_0x5e32ae(3985);function updateBing(r){bing=r}const tiandituArr=[_0x5e32ae(2556),"bcc62222fc634ec736589c483de933e6","d083e4cf30bfc438ef93436c10c2c20a","5e5949f7e96e8a136ef36a6594f18cdf"];let tianditu=getArrayRandomOne(tiandituArr);function updateTianditu(r){const e=_0x5e32ae;tiandituArr.splice(0,tiandituArr[e(3402)]),Array.isArray(r)?r.forEach(t=>{tiandituArr.push(t)}):tiandituArr[e(3759)](r),tianditu=getArrayRandomOne(tiandituArr)}const gaodeArr=["0ee24126ea61ec60a670675fd8cd29b1","fe80f2290b380cfed86c62e3edec169e",_0x5e32ae(2722),"25962df421fcad3cc2a8ceb55aafd04f","6e5d9f46b78cfb5b5ab3d407dad8fd14",_0x5e32ae(2852),_0x5e32ae(3356),_0x5e32ae(3873)];let gaode=getArrayRandomOne(gaodeArr);function updateGaode(r){gaodeArr.splice(0,gaodeArr.length),Array.isArray(r)?r.forEach(e=>{gaodeArr.push(e)}):gaodeArr.push(r),gaode=getArrayRandomOne(gaodeArr)}const baiduArr=["LvhIlDXT60I3NePicXWQT5K0eHFCR4hD","nLUUSRsSBRSVmtxfaGKPaN3mXf6jiivf",_0x5e32ae(1448),"R7KAL3f6AttldwwicmVXnYkN7EHCY729"];let baidu=getArrayRandomOne(baiduArr);function updateBaidu(r){const e={_0x50ec10:2500},t=_0x5e32ae;baiduArr.splice(0,baiduArr.length),Array.isArray(r)?r[t(e._0x50ec10)](i=>{baiduArr.push(i)}):baiduArr.push(r),baidu=getArrayRandomOne(baiduArr)}function updateAll(r){const e={_0x1eb662:1509},t=_0x5e32ae;r.tianditu&&updateTianditu(r.tianditu),r.gaode&&updateGaode(r.gaode),r.baidu&&updateBaidu(r.baidu),r.ion&&updateIon(r.ion),r.mapbox&&updateMapbox(r.mapbox),r[t(e._0x1eb662)]&&updateBing(r.bing)}var Token={__proto__:null,get ion(){return ion},updateIon,get mapbox(){return mapbox},updateMapbox,get bing(){return bing},updateBing,tiandituArr,get tianditu(){return tianditu},updateTianditu,gaodeArr,get gaode(){return gaode},updateGaode,baiduArr,get baidu(){return baidu},updateBaidu,updateAll};const Color$2=Cesium__namespace[_0x5e32ae(1423)].ColorType,PolylineDash=Cesium__namespace.Material.PolylineDashType,LineDotDash=_0x5e32ae(3722),PolylineOutline=Cesium__namespace.Material.PolylineOutlineType,PolylineArrow=Cesium__namespace.Material.PolylineArrowType,PolylineGlow=Cesium__namespace.Material.PolylineGlowType,LineFlow="LineFlow",LineFlowColor="LineFlowColor",ODLine="ODLine",LineFlicker=_0x5e32ae(921),LineTrail=_0x5e32ae(2169),LineBloom="LineBloom",DigitalFlow=_0x5e32ae(710),LineThreeDash=_0x5e32ae(610),WallScroll="WallScroll",Image$1=Cesium__namespace.Material.ImageType,Image2="Image2",Text="Text",Grid=Cesium__namespace.Material.GridType,Checkerboard=Cesium__namespace[_0x5e32ae(1423)][_0x5e32ae(2933)],Stripe=Cesium__namespace.Material.StripeType,PolyGradient="PolyGradient",PolyAsphalt="PolyAsphalt",PolyBlob="PolyBlob",PolyFacet=_0x5e32ae(1775),PolyGrass="PolyGrass",PolyWood="PolyWood",NeonLight="NeonLight",Water$1=Cesium__namespace[_0x5e32ae(1423)][_0x5e32ae(2615)],WaterLight="WaterLight",RectSlide="RectSlide",ScanLine="ScanLine",CircleScan="CircleScan",CircleWave=_0x5e32ae(3637),RadarLine="RadarLine",RadarWave="RadarWave",CylinderWave="CylinderWave",EllipsoidElectric="EllipsoidElectric",EllipsoidWave="EllipsoidWave";var MaterialType$1={__proto__:null,Color:Color$2,PolylineDash,LineDotDash,PolylineOutline,PolylineArrow,PolylineGlow,LineFlow,LineFlowColor,ODLine,LineFlicker,LineTrail,LineBloom,DigitalFlow,LineThreeDash,WallScroll,Image:Image$1,Image2,Text,Grid,Checkerboard,Stripe,PolyGradient,PolyAsphalt,PolyBlob,PolyFacet,PolyGrass,PolyWood,NeonLight,Water:Water$1,WaterLight,RectSlide,ScanLine,CircleScan,CircleWave,RadarLine,RadarWave,CylinderWave,EllipsoidElectric,EllipsoidWave};const LayerType={},ControlType={},EffectType={},LangType={ZH:0,ZHHK:1,EN:2},MoveType={ENLARGE:0,NARROW:1,LEFT_ROTATE:2,RIGHT_ROTATE:3,TOP_ROTATE:4,BOTTOM_ROTATE:5},ClipType={Z:1,ZR:2,X:3,XR:4,Y:5,YR:6},Icon={Delete:"fa fa-trash-o",Coordinates:"fa fa-info-circle",CameraInfo:"fa fa-camera-retro",Camera:_0x5e32ae(1633),UndergroundNo:"fa fa-ban",UndergroundYes:"fa fa-sort-amount-desc",RotatePointStart:"fa fa-retweet",RotatePointStop:"fa fa-remove",FlyToPoint:_0x5e32ae(806),FirstPerspective:_0x5e32ae(1154),KeyboardRoamYes:"fa fa-keyboard-o",KeyboardRoamNo:_0x5e32ae(3370),TrackedEntityYes:"fa fa-lock",TrackedEntityNo:"fa fa-unlock-alt",Tileset:"fa fa-building-o",TilesetWireframeYes:"fa fa-connectdevelop",TilesetWireframeNo:"fa fa-connectdevelop",TilesetBoundingVolumeYes:"fa fa-codepen",TilesetBoundingVolumeNo:_0x5e32ae(893),Terrain:"fa fa-globe",TerrainYes:_0x5e32ae(2364),TerrainNo:"fa fa-medium",TerrainWireframeYes:"fa fa-connectdevelop",TerrainWireframeNo:_0x5e32ae(969),Measure:_0x5e32ae(3116),MeasureDistance:"fa fa-minus",MeasureArea:"fa fa-medium",MeasureHeight:"fa fa-sort-amount-asc",MeasureAngle:_0x5e32ae(3084),Draw:"fa fa-eyedropper",DrawPoint:"fa fa-map-marker",DrawPolyline:"fa fa-reorder",DrawPolygon:_0x5e32ae(2364),DrawCircle:"fa fa-genderless",DrawRectangle:"fa fa-retweet",DrawEditYes:"fa fa-pencil",DrawEditNo:"fa fa-pencil-square",DrawDownJson:"fa fa-file-text-o",Effect:_0x5e32ae(958),RainEffectYes:"fa fa-tint",RainEffectNo:"fa fa-tint",SnowEffectYes:"fa fa-yelp",SnowEffectNo:"fa fa-yelp",FogEffectYes:_0x5e32ae(2918),FogEffectNo:_0x5e32ae(2918),BloomEffectYes:_0x5e32ae(1805),BloomEffectNo:"fa fa-bullseye",BrightnessEffectYes:"fa fa-trello",BrightnessEffectNo:"fa fa-trello",NightVisionEffectYes:"fa fa-dashboard",NightVisionEffectNo:"fa fa-dashboard",BlackAndWhiteEffectYes:_0x5e32ae(2837),BlackAndWhiteEffectNo:"fa fa-star-half-full",OutlineEffectYes:"fa fa-ticket",OutlineEffectNo:_0x5e32ae(2290),Scene:"fa fa-gear",DepthTestYes:_0x5e32ae(4139),DepthTestNo:"fa fa-eye",SkyBoxYes:"fa fa-moon-o",SkyBoxNo:"fa fa-moon-o",ShadowYes:"fa fa-sun-o",ShadowNo:"fa fa-sun-o",SkyAtmosphereYes:"fa fa-soundcloud",SkyAtmosphereNo:_0x5e32ae(1695),ExpImage:_0x5e32ae(836)};function create$3(r,e,t){const i={_0x50392b:1256},s=_0x5e32ae,n=document.createElement(r);return n[s(i._0x50392b)]=e||"",t&&t.appendChild(n),n}function createSvg(r,e,t,i){const s={_0x1bfb65:4225,_0x1a3015:4136,_0x2b5735:800,_0x52ec73:3130},n=_0x5e32ae,o=document[n(s._0x1bfb65)]("http://www.w3.org/2000/svg","svg:svg");o[n(s._0x1a3015)](n(s._0x2b5735),"svg-path"),o[n(4136)](n(4005),r),o.setAttribute("height",e),o.setAttribute(n(2832),"0 0 "+r+" "+e);const c=document.createElementNS(n(s._0x52ec73),"path");return c.setAttribute("d",t),o.appendChild(c),i&&i.appendChild(o),o}function createVideo(r,e,t,i){const s={_0x3e95e8:2098},n=_0x5e32ae,o=create$3(n(2034),t,i);o[n(4136)]("autoplay",!![]),o.setAttribute(n(3710),!![]),o.setAttribute(n(s._0x3e95e8),!![]),!e&&(e=r.substring(r.lastIndexOf(".")+1,r.length));const c=create$3("source","",o);return c.setAttribute(n(3696),r),c.setAttribute("type",n(2466)+e),o}function get(r){return typeof r=="string"?document.getElementById(r):r}function parseDom(r,e,t){const i=_0x5e32ae,s=document[i(3098)]("div");return t&&(s.className=t),s.innerHTML=r,e?s:s.childNodes}function remove(r){const e={_0x576b63:3004},t=_0x5e32ae;if(r=get(r),!r)return;const i=r[t(2214)];i&&i[t(e._0x576b63)](r)}function empty(r){const e={_0x453497:3720},t=_0x5e32ae;for(;r.firstChild;)r.removeChild(r[t(e._0x453497)])}function getStyle(r,e){const t={_0x2f6db7:2176,_0x1f6bee:4004},i=_0x5e32ae;let s=r.style[e]||r[i(t._0x2f6db7)]&&r.currentStyle[e];if((!s||s==="auto")&&document.defaultView){const n=document[i(t._0x1f6bee)][i(2740)](r,null);s=n?n[e]:null}return s==="auto"?null:s}function hasClass(r,e){const t={_0x58df4a:2396},i=_0x5e32ae;if(!r)return![];if(r.classList!==void 0)return r[i(1604)][i(3068)](e);const s=getClass$3(r);return s.length>0&&new RegExp(i(t._0x58df4a)+e+"(\\s|$)").test(s)}function addClass(r,e){const t={_0x526696:4084},i=_0x5e32ae;if(r){if(r.classList!==void 0){const s=splitWords(e);for(let n=0,o=s.length;n<o;n++)r.classList[i(t._0x526696)](s[n])}else if(!hasClass(r,e)){const s=getClass$3(r);setClass(r,(s?s+" ":"")+e)}}}function removeClass(r,e){const t=_0x5e32ae;r&&(r.classList!==void 0?r.classList[t(2004)](e):setClass(r,trim((" "+getClass$3(r)+" ").replace(" "+e+" "," "))))}function setClass(r,e){const t=_0x5e32ae;!r.className||!r.className[t(1431)]?r.className=e:r[t(1256)].baseVal=e}function getClass$3(r){const e={_0x12a912:1256},t=_0x5e32ae;var i;return r.correspondingElement&&(r=r.correspondingElement),(i=r.className)!==null&&i!==void 0&&i.baseVal?r[t(e._0x12a912)].baseVal:r.className}function copyCanvas(r){const e={_0x30d22d:424},t=_0x5e32ae,i=r.getContext("2d",{willReadFrequently:!![]}).getImageData(0,0,r.width,r.height),s=document.createElement("canvas");s.width=r[t(4005)],s.height=r.height;const n=s.getContext("2d",{willReadFrequently:!![]});return n[t(e._0x30d22d)](0,0,s.width,s.height),n.putImageData(i,0,0),s}var DomUtil={__proto__:null,create:create$3,createSvg,createVideo,get,parseDom,remove,empty,getStyle,hasClass,addClass,removeClass,setClass,getClass:getClass$3,copyCanvas};function getCenter(r){const e=_0x5e32ae;try{const t=r[e(3300)],i=new Cesium__namespace.Cartesian2(t.clientWidth/2,t.clientHeight/2),s=r.camera[e(989)](i);let n=r[e(1329)][e(1245)](s,r);return!n&&(n=r.camera[e(3652)](i)),n?LngLatPoint.fromCartesian(n):void 0}catch{return}}function getExtent(r,e={}){const t={_0x44b356:1984,_0x1f6107:3701,_0x436bb3:3183,_0x24b3e8:3081,_0x13646b:1124,_0x169fa9:3865,_0x5d2e4:2792,_0x369b5b:3865,_0x4572ed:2497,_0x57445b:2628,_0x1ff99e:4259,_0x5742c4:4259},i=_0x5e32ae,s={xmin:70,xmax:140,ymin:0,ymax:55,height:0},n=r.scene,o=n.globe.ellipsoid,c=n.canvas,_=r.camera.pickEllipsoid(new Cesium__namespace[i(2497)](0,0),o);if(_){const h=o.cartesianToCartographic(_);s.xmin=Cesium__namespace.Math.toDegrees(h[i(1640)]),s.ymax=Cesium__namespace.Math[i(t._0x44b356)](h[i(t._0x1f6107)]),s.height=Math.max(s.height,h.height)}else{const h=c.width/2,f=c.height/2;let m;for(let g=0;g<=f;g+=10){const C=g<=h?g:h;if(m=r.camera.pickEllipsoid(new Cesium__namespace.Cartesian2(C,g),o),m)break}if(m){const g=o.cartesianToCartographic(m);s[i(t._0x436bb3)]=Cesium__namespace.Math.toDegrees(g.longitude),s[i(t._0x24b3e8)]=Cesium__namespace.Math.toDegrees(g.latitude),s[i(3865)]=Math[i(t._0x13646b)](s.height,g[i(t._0x169fa9)])}}const l=r[i(t._0x5d2e4)].pickEllipsoid(new Cesium__namespace.Cartesian2(c.width,c[i(t._0x169fa9)]),o);if(l){const h=o.cartesianToCartographic(l);s.xmax=Cesium__namespace.Math[i(1984)](h[i(1640)]),s.ymin=Cesium__namespace.Math.toDegrees(h[i(3701)]),s.height=Math.max(s[i(3865)],h.height)}else{const h=c[i(4005)]/2,f=c[i(t._0x369b5b)]/2;let m;for(let g=c[i(3865)];g>=f;g-=10){const C=g>=h?g:h;if(m=r.camera.pickEllipsoid(new Cesium__namespace[i(t._0x4572ed)](C,g),o),m)break}if(m){const g=o.cartesianToCartographic(m);s[i(2628)]=Cesium__namespace[i(1286)].toDegrees(g.longitude),s.ymin=Cesium__namespace.Math.toDegrees(g.latitude),s.height=Math[i(1124)](s.height,g[i(t._0x369b5b)])}}if(s){if(s[i(2628)]<s.xmin){const h=s.xmax;s.xmax=s.xmin,s[i(3183)]=h}if(s.ymax<s.ymin){const h=s.ymax;s.ymax=s[i(2498)],s.ymin=h}if(Cesium__namespace[i(515)](e[i(3206)])){const h=e[i(3206)],f=(s[i(t._0x57445b)]-s[i(3183)])/2*h,m=(s.ymax-s.ymin)/2*h;s.xmin-=f,s.xmax+=f,s[i(2498)]-=m,s.ymax+=m}return e[i(3669)]&&(s.xmin=formatNum$1(s.xmin,LngLatPoint[i(4259)]),s.xmax=formatNum$1(s.xmax,LngLatPoint[i(t._0x1ff99e)]),s.ymin=formatNum$1(s.ymin,LngLatPoint.FormatLength),s.ymax=formatNum$1(s[i(3081)],LngLatPoint[i(t._0x5742c4)])),s}}function getCameraView(r,e){const t={_0x445357:2868,_0x126f78:448,_0x4908cf:1286,_0x1066fe:1984,_0x3c2f0d:2625,_0x43177e:3984,_0x421458:1984,_0x483824:4175},i=_0x5e32ae,s=r[i(t._0x445357)],n={};return n[i(t._0x126f78)]=formatNum$1(Cesium__namespace[i(t._0x4908cf)].toDegrees(s.latitude),LngLatPoint.FormatLength),n.lng=formatNum$1(Cesium__namespace[i(1286)][i(t._0x1066fe)](s.longitude),LngLatPoint.FormatLength),(e==null?void 0:e.simplify)??!![]?(n.alt=formatNum$1(s.height,1),n[i(3977)]=formatNum$1(Cesium__namespace.Math.toDegrees(r.heading||0)%360,1),n.pitch=formatNum$1(Cesium__namespace.Math[i(1984)](r[i(t._0x3c2f0d)]||0)%360,1)):(n[i(t._0x43177e)]=formatNum$1(s.height,LngLatPoint[i(3190)]),n.heading=formatNum$1(Cesium__namespace.Math[i(t._0x421458)](r[i(3977)]||0)%360,2),n[i(t._0x3c2f0d)]=formatNum$1(Cesium__namespace.Math.toDegrees(r[i(t._0x3c2f0d)]||0)%360,2),n[i(t._0x483824)]=formatNum$1(Cesium__namespace.Math.toDegrees(r.roll||0)%360,2)),n}function expImage(r,e={}){const t={_0xb59837:3783,_0x3eb2d6:3300,_0x2fd57c:4005,_0xf36ad4:3865},i={_0x9188b4:4005,_0x24c1b1:515,_0x4425d8:3865,_0x2f8d8f:3865,_0x4159e4:1331,_0x2863bd:1494,_0x38ab08:4005,_0x204689:3783,_0x5e7023:1788,_0x183a92:641};return new Promise((s,n)=>{const o=_0x5210;e.download=e.download??!![],e.type=e.type??"image/jpeg",r.render();const c=r.canvas[o(t._0xb59837)](e[o(3205)],e[o(2568)]),_=r[o(t._0x3eb2d6)].height,l=r.canvas[o(t._0x2fd57c)];if(Cesium__namespace.defined(e.width)||Cesium__namespace.defined(e[o(t._0xf36ad4)])){const h=new Image;h.onload=function(){const f=o;let m,g;if(Cesium__namespace.defined(e.width)&&!Cesium__namespace.defined(e.height))m=e[f(i._0x9188b4)],g=Math.round(m*_/l);else if(Cesium__namespace[f(i._0x24c1b1)](e[f(i._0x4425d8)])&&!Cesium__namespace[f(i._0x24c1b1)](e.width))g=e[f(3865)],m=Math.round(g*l/_);else{const L=e.width/l,R=e[f(i._0x2f8d8f)]/_;L>R?(m=e.width,g=Math.round(m*_/l)):(g=e.height,m=Math[f(i._0x4159e4)](g*l/_))}const C=document.createElement("canvas");C.width=e.width||m,C.height=e.height||g;const E=C[f(i._0x2863bd)]("2d",{willReadFrequently:!![]}),P=(C[f(i._0x38ab08)]-m)/2,w=(C.height-g)/2;E.drawImage(h,P,w,m,g);const M=C[f(i._0x204689)](e.type,e.encoderOptions);if(!e.filename&&(e[f(i._0x5e7023)]=f(i._0x183a92)+C.width+"x"+C.height),e.download){let L=e.filename;e.type===f(3762)&&(L=L+".jpg"),downloadBase64Image(L,M)}const T={image:M,width:C.width,height:C.height};e.callback&&e.callback(T),s(T)},h[o(3696)]=c}else{!e[o(1788)]&&(e.filename="场景出图_"+l+"x"+_),e.download&&downloadBase64Image(e[o(1788)],c);const h={image:c,width:l,height:_};e[o(2581)]&&e.callback(h),s(h)}})}function pick3DTileset(r,e){const t={_0x3d8673:515},i=_0x5e32ae;if(!e)return null;e instanceof Cesium__namespace.Cartesian3&&(e=[e]);for(let s=0,n=e.length;s<n;++s){const o=e[s],c=Cesium__namespace.SceneTransforms[i(3367)](r,o);if(!Cesium__namespace.defined(c))continue;const _=r.pick(c,10,10);if(Cesium__namespace[i(t._0x3d8673)](_)&&Cesium__namespace.defined(_.primitive)&&_[i(3150)]instanceof Cesium__namespace[i(2379)])return _[i(3150)]}return null}class SurfacePoint{constructor(e){const t={_0x24c804:551,_0x536673:2180,_0x4e8444:2359},i=_0x5e32ae;this.options=e,this.scene=e.map?e.map.scene:e[i(3107)],!this.scene&&logError$1(i(t._0x24c804),this.options),this._point=LngLatPoint.parse(e[i(t._0x536673)]),this._point&&(this._position=this[i(t._0x4e8444)][i(2048)](),this._cartographic=this[i(t._0x4e8444)].toCartographic(),this._height_original=this[i(t._0x4e8444)].alt)}start(){const e={_0x323021:2359,_0x46930e:2384};return new Promise((t,i)=>{const s=_0x5210;if(this._promise={resolve:t,reject:i},!this[s(e._0x323021)]){t({height:0});return}const n=this.options.has3dtiles??Cesium__namespace.defined(pick3DTileset(this.scene,this._position)),o=!!this[s(3107)][s(1773)]._layers;if(this._has3dtiles=n,this._hasTerrain=o,!o&&!n){this[s(e._0x46930e)](0);return}n?this[s(2409)]():this.clampToTerrain()})}clampTo3DTileset(){const e={_0x238b47:918,_0x1dca9a:4246},t={_0x18da71:3026},i=_0x5e32ae;this.scene.clampToHeightMostDetailed([this[i(e._0x238b47)][i(e._0x1dca9a)]()],this.options.objectsToExclude,.05).then(s=>{const n=i,o=s[0];if(Cesium__namespace.defined(o)){const c=Cesium__namespace[n(t._0x18da71)].fromCartesian(o),_=c.height;if(Cesium__namespace.defined(_)&&_>-1e3){this.end(_);return}}this.clampToTerrain()})}[_0x5e32ae(4074)](){const e={_0x3a636a:2384},t=_0x5e32ae;this[t(2334)]?Cesium__namespace.sampleTerrainMostDetailed(this.scene.terrainProvider,[this._cartographic])[t(549)](i=>{const s=t,n=i[0];let o;Cesium__namespace.defined(n)&&Cesium__namespace.defined(n.height)?o=n.height:o=this.scene.globe[s(770)](this._cartographic)||0,this[s(e._0x3a636a)](o)}):this.end(0)}[_0x5e32ae(2384)](e){const t={_0x56e730:3798,_0x1aa3b5:2359},i=_0x5e32ae;this[i(t._0x56e730)].callback&&this[i(3798)].callback(e),this._point.alt=e,this[i(3110)].resolve({height:e,height_original:this[i(3708)],point:this[i(t._0x1aa3b5)],position:Cesium__namespace.Cartesian3.fromRadians(this._cartographic.longitude,this[i(1897)].latitude,e),position_original:this._position,has3dtiles:this[i(827)],hasTerrain:this._hasTerrain})}}function getTransFun(r,e){if(!r||!e)return![];if(r=crsName2FunName(r),e=crsName2FunName(e),e===r)return![];const t=r+"2"+e;return PointTrans[t]?PointTrans[t]:![]}function crsName2FunName(r){const e=_0x5e32ae;switch(r){case ChinaCRS.GCJ02:return"gcj";case ChinaCRS[e(3578)]:return"bd";case ChinaCRS.WGS84:default:return"wgs"}}function getPositionValue(r,e){const t={_0x1a219b:1629,_0x428a6f:1629},i=_0x5e32ae;if(!r)return r;let s;return r instanceof Cesium__namespace.Cartesian3?s=r:r._value&&r[i(t._0x1a219b)]instanceof Cesium__namespace.Cartesian3?s=r[i(t._0x428a6f)]:typeof r.getValue=="function"&&(s=r.getValue(e||Cesium__namespace.JulianDate.now())),s}function getMaxHeight(r,e=0){if(r==null||r.length===0)return e;let t=e;for(let i=0;i<r.length;i++){const s=LngLatPoint.parse(r[i]);i===0&&(t=s.alt),s.alt>t&&(t=s.alt)}return formatNum(t,LngLatPoint.FormatAltLength)}function formatNum(r,e=0){const t={_0x1ae72f:3484},i=_0x5e32ae,s=Math[i(t._0x1ae72f)](10,e);return Math.round(r*s)/s}function getMinHeight(r,e=0){const t={_0x4470a0:3026,_0xb23da2:3236},i=_0x5e32ae;if(r==null||r.length===0)return e;let s=e;for(let n=0;n<r.length;n++){const o=Cesium__namespace[i(t._0x4470a0)][i(t._0xb23da2)](r[n]);n===0&&(s=o.height),o.height<s&&(s=o.height)}return formatNum(s,LngLatPoint[i(3190)])}function addPositionsHeight(r,e=0){const t={_0x315f8c:3402,_0xb0df4e:3865},i=_0x5e32ae;if(e=Number(e),isNaN(e)||e===0)return r;if(Array.isArray(r)){const s=[];for(let n=0,o=r[i(t._0x315f8c)];n<o;n++){const c=Cesium__namespace.Cartographic.fromCartesian(r[n]),_=Cesium__namespace.Cartesian3.fromRadians(c.longitude,c[i(3701)],c.height+e);s.push(_)}return s}else{const s=Cesium__namespace.Cartographic.fromCartesian(r);return Cesium__namespace.Cartesian3.fromRadians(s.longitude,s.latitude,s[i(t._0xb0df4e)]+e)}}function setPositionsHeight(r,e=0){const t={_0x49abde:3845,_0x47052c:3236,_0x272da8:3026,_0x43312a:1640,_0x156a1d:3701},i=_0x5e32ae;if(!r)return r;if(Array[i(t._0x49abde)](r)){const s=[];for(let n=0,o=r.length;n<o;n++){const c=Cesium__namespace.Cartographic[i(t._0x47052c)](r[n]),_=Cesium__namespace.Cartesian3.fromRadians(c.longitude,c.latitude,e);s.push(_)}return s}else{const s=Cesium__namespace[i(t._0x272da8)].fromCartesian(r);return Cesium__namespace.Cartesian3.fromRadians(s[i(t._0x43312a)],s[i(t._0x156a1d)],e)}}function getHeight(r,e,t={}){const i={_0x52a2eb:1426,_0x4569e7:2288,_0x44c03d:515},s=_0x5e32ae,n=LngLatPoint[s(i._0x52a2eb)](e);if(!r||!n)return 0;const o=n.toCartesian(),c=t[s(i._0x4569e7)]??Cesium__namespace[s(i._0x44c03d)](pick3DTileset(r,o));if(!!!r.terrainProvider._layers&&!c)return 0;const l=n.toCartographic();if(c){const f=r.sampleHeight(l,t[s(977)],t.width);if(Cesium__namespace.defined(f)&&f>-1e3)return f}const h=r.globe.getHeight(l);return Cesium__namespace.defined(h)&&h>-1e3?h:0}function getSurfaceHeight(r,e,t={}){const i={_0x464cb9:2476},s=_0x5e32ae;return t.scene=r,t.position=e,new SurfacePoint(t)[s(i._0x464cb9)]()}function getSurfaceTerrainHeight(r,e){const t={_0x47f466:2476},i=_0x5e32ae,s={scene:r,position:e,has3dtiles:![]};return new SurfacePoint(s)[i(t._0x47f466)]()}function getSurfacePosition(r,e,t={}){const i={_0x4811e2:3865},s=_0x5e32ae;if(!e)return e;r.scene&&(r=r.scene);let n=getHeight(r,e,t);if(n!==0||Cesium__namespace.defined(t.maxHeight)&&n<=t.maxHeight){const o=Cesium__namespace[s(3026)].fromCartesian(e);return t.relativeHeight&&(n+=o[s(i._0x4811e2)]),Cesium__namespace.Cartesian3[s(2793)](o.longitude,o.latitude,n)}return e}function hasPickedModel(r,e){const t={_0x29196b:3584,_0x52f5c1:2834},i=_0x5e32ae;if(Cesium__namespace.defined(r.id)){const s=r.id;if(s[i(t._0x29196b)]||e&&s===e)return s}if(Cesium__namespace.defined(r.primitive)){const s=r.primitive;if(s._noMousePick||e&&s===e)return s}if(Cesium__namespace.defined(r.tileset)){const s=r[i(t._0x52f5c1)];if(s._noMousePick||e&&s===e)return s}return null}function getCurrentMousePosition(r,e,t){const i={_0x58be08:1803,_0x5f31c4:3875,_0x42ce43:1329,_0x32cf48:575,_0x3838af:2791,_0x3860fa:3026,_0x3f710e:3236,_0x45140f:3865,_0x55b357:1977,_0x178497:3285,_0xae2f58:3865},s=_0x5e32ae;let n,o;try{o=r[s(1245)](e,5,5)}catch(c){logWarn(s(i._0x58be08),c)}if(r.pickPositionSupported&&!r.onlyPickTerrainPosition&&Cesium__namespace.defined(o)){const c=hasPickedModel(o,t);if(c){if((c[s(2747)]||c.point||c.label)&&!c.ellipse&&!c.model&&!c[s(i._0x5f31c4)])return getPositionValue(c.position);if(c.show&&(c.show=![],r.requestRender(),n=getCurrentMousePosition(r,e,t),c.show=!![],n))return n;if(!r[s(i._0x42ce43)][s(i._0x32cf48)])return r.pickPosition(e)}else{if(Cesium__namespace.defined(o.id)){const _=o.id;if((_.billboard||_.point||_.label)&&!_.model)return getPositionValue(_[s(2180)])}if(n=r[s(i._0x3838af)](e),Cesium__namespace.defined(n)){const _=Cesium__namespace[s(i._0x3860fa)][s(i._0x3f710e)](n);if(_.height>=0||!Cesium__namespace.defined(o.id)&&_[s(i._0x45140f)]>=-5e3)return n}}}if(Cesium__namespace.defined(Cesium__namespace[s(i._0x55b357)])&&(n=r.pickPosition(e),Cesium__namespace.defined(n))||!r[s(i._0x178497)]&&r.onlyPickModelPosition)return n;if(r[s(3211)]===Cesium__namespace.SceneMode.SCENE3D){const c=r.camera.getPickRay(e);n=r.globe[s(1245)](c,r),!n&&(n=r.camera.pickEllipsoid(e,r.globe[s(i._0x5f31c4)]))}else n=r.camera.pickEllipsoid(e,r.globe.ellipsoid);return Cesium__namespace[s(515)](n)&&r[s(2792)][s(2868)][s(i._0xae2f58)]<1e4&&Cesium__namespace.Cartographic[s(i._0x3f710e)](n).height<-5e3?null:n}function getCurrentMouseTerrainPosition(r,e){const t={_0x19c46d:3707,_0x3d3f42:2792,_0xfa2e78:3652,_0x1aace9:3875},i=_0x5e32ae;let s;if(r.mode===Cesium__namespace.SceneMode[i(t._0x19c46d)]){const n=r.camera.getPickRay(e);s=r.globe.pick(n,r),!s&&(s=r[i(t._0x3d3f42)].pickEllipsoid(e,r.globe.ellipsoid))}else s=r.camera[i(t._0xfa2e78)](e,r.globe[i(t._0x1aace9)]);return s}function getMidpoint(r,e){const t={_0x11af9a:2793,_0x33a346:3701},i=_0x5e32ae;if(!e||!r)return;const s=LngLatPoint.toCartographic(r),n=LngLatPoint[i(3530)](e),o=(s[i(3865)]+n.height)/2,c=new Cesium__namespace.EllipsoidGeodesic(s,n).interpolateUsingFraction(.5);return Cesium__namespace.Cartesian3[i(t._0x11af9a)](c.longitude,c[i(t._0x33a346)],o)}function isRepeatPoint(r,e){const t=_0x5e32ae;return!e||!r?![]:Math.abs(r.x-e.x)<.1&&Math[t(3926)](r.y-e.y)<.1&&Math.abs(r.z-e.z)<.1?!![]:![]}function getRotateCenterPoint(r,e,t){const i={_0x560df7:3026,_0x3d87be:3865,_0x3ba82e:1567,_0x231fde:3916,_0x1b94f0:4102},s=_0x5e32ae,n=Cesium__namespace[s(i._0x560df7)].fromCartesian(r);n[s(i._0x3d87be)]=0;const o=Cesium__namespace[s(3026)].toCartesian(n);let c=Cesium__namespace.Cartesian3.subtract(o,r,new Cesium__namespace.Cartesian3);c=Cesium__namespace[s(3916)].normalize(c,new Cesium__namespace.Cartesian3);const _=Cesium__namespace.Quaternion.fromAxisAngle(c,Cesium__namespace.Math[s(i._0x3ba82e)](t)),l=Cesium__namespace.Matrix3.fromQuaternion(_),h=Cesium__namespace.Matrix4.fromRotationTranslation(l),f=Cesium__namespace[s(i._0x231fde)].subtract(e,r,new Cesium__namespace.Cartesian3),m=Cesium__namespace[s(i._0x1b94f0)].multiplyByPoint(h,f,new Cesium__namespace.Cartesian3);return Cesium__namespace.Cartesian3.add(m,r,new Cesium__namespace.Cartesian3)}function getOnLinePointByLen(r,e,t,i){const s={_0xb335fe:3684,_0x3097f7:4102,_0x481a97:3462},n=_0x5e32ae,o=Cesium__namespace.Transforms[n(s._0xb335fe)](r),c=Cesium__namespace[n(s._0x3097f7)].inverse(o,new Cesium__namespace[n(s._0x3097f7)]);r=Cesium__namespace.Matrix4[n(s._0x481a97)](c,r,new Cesium__namespace.Cartesian3),e=Cesium__namespace.Matrix4.multiplyByPoint(c,e,new Cesium__namespace[n(3916)]);const _=Cesium__namespace.Cartesian3.subtract(e,r,new Cesium__namespace[n(3916)]),l=Cesium__namespace.Cartesian3.distance(r,e);let h;l!==0?h=t/l:h=.001,i&&(h+=1);let f=Cesium__namespace.Cartesian3.multiplyByScalar(_,h,new Cesium__namespace.Cartesian3);return f=Cesium__namespace.Matrix4.multiplyByPoint(o,f,new Cesium__namespace.Cartesian3),f}function getPositionByHprAndOffset(r,e,t,i,s){const n={_0x253bfe:3064,_0x109043:3462},o=_0x5e32ae;r=LngLatPoint.toCartesian(r),!t&&(t=new Cesium__namespace[o(n._0x253bfe)]);const c=Cesium__namespace[o(2911)].headingPitchRollQuaternion(r,t,i,s),_=Cesium__namespace.Matrix4[o(3651)](Cesium__namespace.Matrix3.fromQuaternion(c,new Cesium__namespace.Matrix3),r,new Cesium__namespace.Matrix4);return Cesium__namespace.Matrix4[o(n._0x109043)](_,e,new Cesium__namespace.Cartesian3)}function getPositionByDirectionAndLen(r,e,t){const i={_0x34ed10:2048,_0x47db74:3684,_0x4b90d8:3916},s=_0x5e32ae;r=LngLatPoint[s(i._0x34ed10)](r);const n=Cesium__namespace.Transforms[s(i._0x47db74)](r),o=Cesium__namespace.Matrix3.fromRotationZ(Cesium__namespace[s(1286)].toRadians(360-(e||0))),c=Cesium__namespace.Matrix4[s(3651)](o);return Cesium__namespace.Matrix4.multiply(n,c,n),Cesium__namespace[s(4102)][s(3462)](n,new Cesium__namespace.Cartesian3(t,0,0),new Cesium__namespace[s(i._0x4b90d8)])}function getPositionByHprAndLen(r,e,t){const i={_0x224b46:4102,_0x1f417b:767},s=_0x5e32ae;r=LngLatPoint[s(2048)](r);const n=Cesium__namespace.Transforms.headingPitchRollQuaternion(r,e),o=Cesium__namespace[s(i._0x224b46)].fromRotationTranslation(Cesium__namespace.Matrix3[s(i._0x1f417b)](n,new Cesium__namespace.Matrix3),r,new Cesium__namespace[s(4102)]);return Cesium__namespace.Matrix4.multiplyByPoint(o,new Cesium__namespace.Cartesian3(0,0,-t),new Cesium__namespace.Cartesian3)}function getRayEarthPosition(r,e,t,i){const s={_0x2d53ab:3064,_0x2281f4:3651,_0x6f7d4a:767,_0x54ac7a:3768},n=_0x5e32ae;if(!r||!e)return;e instanceof Cesium__namespace[n(s._0x2d53ab)]&&(e=Cesium__namespace.Transforms.headingPitchRollQuaternion(r,e));const o=Cesium__namespace.Matrix4[n(s._0x2281f4)](Cesium__namespace.Matrix3[n(s._0x6f7d4a)](e,new Cesium__namespace[n(s._0x54ac7a)]),r,new Cesium__namespace[n(4102)]);return getRayEarthPositionByMatrix(o,t,i)}function getRayEarthPositionByMatrix(r,e,t){const i=_0x5e32ae,s=new Cesium__namespace.Cartesian3,n=new Cesium__namespace.Ray;Cesium__namespace[i(4102)][i(3462)](r,Cesium__namespace[i(3916)].ZERO,s),s.clone(n.origin);const o=new Cesium__namespace.Cartesian3(0,0,e?-100:100);return extend2Earth(o,r,n,t)}function extend2Earth(r,e,t,i){const s=_0x5e32ae;i=i||Cesium__namespace.Ellipsoid.WGS84;const n=new Cesium__namespace.Cartesian3;Cesium__namespace[s(4102)].multiplyByPoint(e,r,n),Cesium__namespace.Cartesian3.subtract(n,t.origin,t.direction),Cesium__namespace.Cartesian3.normalize(t.direction,t.direction);const o=Cesium__namespace.IntersectionTests.rayEllipsoid(t,i);let c=null;if(o&&(c=Cesium__namespace.Ray.getPoint(t,o.start)),c)try{const _=new Cesium__namespace.Cartographic;Cesium__namespace.Cartographic.fromCartesian(c,null,_)}catch{return null}return c}function getHeadingPitchRollByOrientation(r,e,t,i){const s={_0x5e0703:4102},n=_0x5e32ae;if(!Cesium__namespace.defined(e)||!Cesium__namespace[n(515)](r))return new Cesium__namespace.HeadingPitchRoll;const o=Cesium__namespace[n(s._0x5e0703)].fromRotationTranslation(Cesium__namespace.Matrix3.fromQuaternion(e,new Cesium__namespace.Matrix3),r,new Cesium__namespace.Matrix4);return getHeadingPitchRollByMatrix(o,t,i)}function getHeadingPitchRollByMatrix(r,e,t,i){return Cesium__namespace[_0x5e32ae({_0x3c08fe:2911}._0x3c08fe)].fixedFrameToHeadingPitchRoll(r,e,t,i)}function getHeadingPitchRollForLine(r,e,t,i){const s={_0x3f3f55:2048,_0x108eed:557,_0x57607c:4102,_0x29be19:3768,_0x1aea8f:3916,_0x334063:2911},n=_0x5e32ae;r=LngLatPoint[n(s._0x3f3f55)](r),e=LngLatPoint[n(2048)](e),t=t||Cesium__namespace[n(2597)][n(s._0x108eed)];const o=new Cesium__namespace.Cartesian3,c=new Cesium__namespace[n(s._0x57607c)],_=new Cesium__namespace[n(s._0x29be19)],l=Cesium__namespace[n(s._0x1aea8f)].normalize(Cesium__namespace[n(s._0x1aea8f)].subtract(e,r,o),o);Cesium__namespace[n(s._0x334063)].rotationMatrixFromPositionVelocity(r,l,t,_);const h=Cesium__namespace.Matrix4.fromRotationTranslation(_,r,c);return Cesium__namespace.Matrix4.multiplyTransformation(h,Cesium__namespace.Axis.Z_UP_TO_X_UP,h),getHeadingPitchRollByMatrix(h,t,i)}function getReflectVector(r,e){const t={_0x3833a1:4318},i=_0x5e32ae,s=e.clone(),n=r.clone(),o=2*Cesium__namespace.Cartesian3[i(t._0x3833a1)](r,e);return Cesium__namespace.Cartesian3.multiplyByScalar(e,o,s),Cesium__namespace[i(3916)].subtract(r,s,n)}var PointUtil={__proto__:null,getTransFun,getPositionValue,getMaxHeight,getMinHeight,addPositionsHeight,setPositionsHeight,getHeight,getSurfaceHeight,getSurfaceTerrainHeight,getSurfacePosition,getCurrentMousePosition,getCurrentMouseTerrainPosition,getMidpoint,isRepeatPoint,getRotateCenterPoint,getOnLinePointByLen,getPositionByHprAndOffset,getPositionByDirectionAndLen,getPositionByHprAndLen,getRayEarthPosition,getRayEarthPositionByMatrix,extend2Earth,getHeadingPitchRollByOrientation,getHeadingPitchRollByMatrix,getHeadingPitchRollForLine,getReflectVector};class SurfacePoints{constructor(e){const t={_0x36cd06:4173},i=_0x5e32ae;this.options=e,this[i(3107)]=e.map?e.map.scene:e.scene,!this.scene&&logError$1(i(t._0x36cd06),this.options),this.positions=LngLatArray[i(3816)](this.options.positions)}start(){const e={_0x1f3ac8:2436,_0x394aee:2436,_0x485a6c:2436,_0x1a8aa8:977,_0x1085a2:4005,_0x28b6ba:3107,_0x36bafc:3759,_0x10b50f:3701,_0x1deb2f:3865};return new Promise((t,i)=>{const s=_0x5210;if(this._promise={resolve:t,reject:i},this.positions==null||this[s(e._0x1f3ac8)].length===0){this.end(this[s(2436)]);return}const n=this.options.has3dtiles??Cesium__namespace.defined(pick3DTileset(this.scene,this.positions)),o=!!this[s(3107)].terrainProvider._layers;if(this._has3dtiles=n,this._hasTerrain=o,!o&&!n){this.end(this.positions);return}if(this[s(3798)].exact)n?this.clampTo3DTileset(this[s(e._0x394aee)]):this.clampToTerrain(this[s(e._0x485a6c)]);else{const c=[];for(let _=0,l=this.positions.length;_<l;++_){const h=Cesium__namespace[s(3026)].fromCartesian(this[s(2436)][_]);let f;if(n){const m=this[s(3107)].sampleHeight(h,this.options[s(e._0x1a8aa8)],this.options[s(e._0x1085a2)]);Cesium__namespace.defined(m)&&m>-1e3&&(f=m)}if(!Cesium__namespace[s(515)](f)){const m=this[s(e._0x28b6ba)].globe.getHeight(h);Cesium__namespace.defined(m)&&m>-1e3&&(f=m)}c[s(e._0x36bafc)](Cesium__namespace.Cartesian3.fromRadians(h.longitude,h[s(e._0x10b50f)],f??h[s(e._0x1deb2f)]))}this.end(c)}})}clampTo3DTileset(e){const t={_0x528ece:3759,_0x5c34f:1855},i={_0x65a28c:2452,_0x3f82c5:3402,_0x5204ac:2384},s=_0x5e32ae,n=[];for(let o=0,c=e.length;o<c;++o)n[s(t._0x528ece)](e[o].clone());this.scene[s(t._0x5c34f)](n,this.options.objectsToExclude).then(o=>{const c=s;o=this[c(i._0x65a28c)](o),o[c(i._0x3f82c5)]>0?this[c(i._0x5204ac)](o):this.clampToTerrain(e)})}clampToTerrain(e){const t=_0x5e32ae;if(this._hasTerrain){const i=this[t(3107)].globe.ellipsoid,s=i.cartesianArrayToCartographicArray(e),n=Cesium__namespace.Cartographic.fromCartesian(e[0]).height;Cesium__namespace.sampleTerrainMostDetailed(this.scene.terrainProvider,s).then(o=>{const c=t;o=this.removeNullData(o);let _=![];const l=this.options.offset??0;for(let f=0;f<o.length;++f)o[f].height==null?(_=!![],o[f][c(3865)]=n):o[f].height=l+o[f][c(3865)];const h=i.cartographicArrayToCartesianArray(o);this.end(h,_)})}else this.end(e)}end(e,t){const i={_0x24620a:3798,_0x4d41dc:4056},s=_0x5e32ae;this.options.callback&&this[s(i._0x24620a)].callback(e,t,this.positions),this._promise[s(i._0x4d41dc)]({positions:e,positions_original:this.positions,noHeight:t,has3dtiles:this._has3dtiles,hasTerrain:this._hasTerrain})}removeNullData(e){const t=[];for(let i=0;i<e.length;++i)e[i]!=null&&t.push(e[i]);return t}}function logError(r,e){console.error(_0x5e32ae(1192)+r+" 不存在,该方法需引入 turf.js 库生效。",e)}function area(r){try{return turf.area(r)}catch(e){logError("area",e)}return 0}function bbox(r){const e={_0x3c87a5:1174},t=_0x5e32ae;try{return turf.bbox(r)}catch(i){logError(t(e._0x3c87a5),i)}return null}function bezierSpline(r,e){try{return turf.bezierSpline(r,e)}catch(t){logError("bezierSpline",t)}return r}function booleanPointInPolygon(r,e,t){try{return turf.booleanPointInPolygon(r,e,t)}catch(i){logError("booleanPointInPolygon",i)}return![]}function buffer$1(r,e,t){try{return turf.buffer(r,e,t)}catch(i){logError("buffer",i)}return r}function convex$1(r,e){const t=_0x5e32ae;try{return turf[t(2151)](r,e)}catch(i){logError("convex",i)}return r}function pointGrid(r,e,t){const i=_0x5e32ae;try{return turf[i(548)](r,e,t)}catch(s){logError("pointGrid",s)}return{features:[]}}const pickTilesetPassState=new Cesium__namespace.Cesium3DTilePassState({pass:Cesium__namespace.Cesium3DTilePass[_0x5e32ae(2477)]}),packedDepthScale=new Cesium__namespace.Cartesian4(1,1/255,1/65025,1/16581375),scratchRectangle=new Cesium__namespace.BoundingRectangle(0,0,3,3),scratchColorZero=new Cesium__namespace.Color(0,0,0,0),scratchRight=new Cesium__namespace[_0x5e32ae(3916)],scratchUp=new Cesium__namespace.Cartesian3,scratchPackedDepthArray=[];function interPolygonByDepth$1(r){const e={_0x16d873:3816,_0x149f24:2130,_0x12e755:3215,_0x59ccaa:3858,_0x7f1428:2792,_0x1ce207:2360,_0x53551e:2481,_0x49404e:1900,_0x47fb0c:3521,_0x13b611:3104,_0x36bdce:1649,_0x26ee71:4316,_0xba72a1:4004,_0x263e1a:3402},t={_0x59b374:3865,_0x9a880e:3759},i=_0x5e32ae,s=r[i(3107)],n=LngLatArray[i(e._0x16d873)](r.positions),o=s.globe[i(e._0x149f24)];s.globe.depthTestAgainstTerrain=!![];const c=r[i(2890)]??s.camera[i(2868)][i(3865)],{ray:_,frustumWidth:l,frustumHeight:h,cameraUp:f}=getCameraInforForPoints(n,c),m=Number(r.splitNum??512),g=l/m,C=h/m,E=new Cesium__namespace.Picking(s),P=E._pickOffscreenView,w=new Cesium__namespace[i(1857)](0,0,m,m);P.viewport=w,P[i(e._0x12e755)].viewport=w,s.view=P,updateOffscreenCamera(_.origin,_[i(e._0x59ccaa)],f,l,h,P[i(e._0x7f1428)]),Cesium__namespace.BoundingRectangle.clone(P.viewport,scratchRectangle);const M=P.pickFramebuffer.begin(scratchRectangle,P.viewport);s[i(e._0x1ce207)].disableThisFrame(),s[i(3018)](),s.frameState[i(e._0x53551e)]=![],s.frameState.passes.pick=!![],s.frameState[i(2533)][i(e._0x49404e)]=!![],s.frameState[i(2262)]=pickTilesetPassState,s[i(e._0x47fb0c)][i(e._0x13b611)].update(s[i(3899)]),s.updateEnvironment(),s.updateAndExecuteCommands(M,scratchColorZero),s[i(473)](M);const T=[];if(s.context[i(3982)]){const B=P.frustumCommandsList.length,$=new Cesium__namespace.Cartesian3;for(let H=0;H<B;++H){const W=E.getPickDepth(s,H),J=getDepth(s.context,0,0,m,m,W);for(let z=0;z<J.length;z++){const fe=J[z];if(fe>0&&fe<1){const q=P[i(e._0x36bdce)][H],te=q.near*(z!==0?s.opaqueFrustumNearOffset:1),{far:ie}=q,xe=te+fe*(ie-te),oe=Math.floor(z/m),de=z%m,X=(oe-m/2)*h/m,he=(de-m/2)*l/m,Se=new Cesium__namespace.Cartesian3;Cesium__namespace.Cartesian3.multiplyByScalar(f,X,$),Cesium__namespace.Cartesian3.add($,P[i(2792)].position,Se),Cesium__namespace.Cartesian3.multiplyByScalar(P.camera.right,he,$),Cesium__namespace.Cartesian3.add($,Se,Se);const Te=Cesium__namespace[i(916)].clone(_);Te.origin=Se;const Re=Cesium__namespace[i(916)][i(e._0x26ee71)](Te,xe);!T[z]&&(T[z]=Re)}}}}const L=[];let R=Number.MAX_VALUE,D=-Number.MAX_VALUE;const N=n.map(B=>{const $=i,H=Cesium__namespace[$(3026)].fromCartesian(B);return[H[$(1640)],H[$(3701)]]});T.forEach(B=>{const $=i,H=Cesium__namespace.Cartographic.fromCartesian(B);if(H&&pointInPolygonNested([H.longitude,H.latitude],N)){const W=H[$(t._0x59b374)];D<W&&(D=W),R>W&&(R=W),B[$(t._0x59b374)]=W,B.getOutline=function(){return getBoxOutLine(this,g,C,f)},L[$(t._0x9a880e)](B)}}),s.globe.depthTestAgainstTerrain=o,s.view=s[i(e._0xba72a1)],s.context.endFrame(),E.destroy();const k=g*C;return{positions:L,count:L[i(e._0x263e1a)],minHeight:R,maxHeight:D,box:{width:g,height:C,area:k},totalArea:k*L.length}}function interPolylineByDepth$1(r){const e={_0x43d346:3107,_0x373f22:1329,_0x525cf6:2793,_0x51370e:2776,_0x26299c:3662,_0x446066:3858,_0x413422:3916,_0x579631:1857,_0x2ae203:1104,_0x553d89:803,_0x8d5849:3794,_0x38d904:495,_0xa0bc9d:3759},t=_0x5e32ae,i=r[t(e._0x43d346)],s=LngLatArray.toCartesians(r[t(2436)]),n=i.globe.depthTestAgainstTerrain;i[t(e._0x373f22)].depthTestAgainstTerrain=!![];const o=Cesium__namespace.defined(i[t(1329)])?i.globe.ellipsoid:i.mapProjection.ellipsoid,c=i[t(3521)],_=c.uniformState,l=i[t(3899)],h=r.cameraHeight??i[t(2792)].positionCartographic[t(3865)],f=new Cesium__namespace.Picking(i),m=f._pickOffscreenView,g=.1;let C=[];const E=[];for(let P=0,w=s.length-1;P<w;P++){const M=s[P],T=s[P+1],L=Cesium__namespace[t(3026)].fromCartesian(M),R=Cesium__namespace.Cartographic.fromCartesian(T),D=Cesium__namespace.Cartesian3[t(e._0x525cf6)](L.longitude,L.latitude),N=Cesium__namespace[t(3916)][t(e._0x525cf6)](R[t(1640)],R[t(3701)]),k=Cesium__namespace.Cartesian3[t(e._0x51370e)](D,N);let B=100;Cesium__namespace.defined(r.splitNum)&&(B=Number(r.splitNum)),Cesium__namespace.defined(r.minDistance)&&(B=Math[t(1382)](k/r.minDistance)),B>Cesium__namespace[t(639)].maximumTextureSize&&(B=Cesium__namespace.ContextLimits[t(1576)]);const $=new Cesium__namespace.Ray,H=Cesium__namespace.Cartesian3.lerp(D,N,.5,new Cesium__namespace.Cartesian3),W=Cesium__namespace.Cartographic.fromCartesian(H),J=o[t(e._0x26299c)](W,new Cesium__namespace[t(3916)]);Cesium__namespace[t(3916)].negate(J,$[t(e._0x446066)]),$.origin=Cesium__namespace.Cartesian3[t(2793)](W.longitude,W.latitude,h);const z=Cesium__namespace.Cartesian3.subtract(N,D,scratchUp);Cesium__namespace[t(e._0x413422)].normalize(z,z);const fe=k,q=new Cesium__namespace[t(e._0x579631)](0,0,1,B);m.viewport=q,m.passState.viewport=q,i.view=m,updateOffscreenCamera($.origin,$.direction,z,g,fe,m[t(2792)]),Cesium__namespace[t(e._0x579631)][t(4246)](m[t(803)],scratchRectangle);const te=m[t(e._0x2ae203)][t(3791)](scratchRectangle,m[t(e._0x553d89)]);i.jobScheduler.disableThisFrame(),i.updateFrameState(),l[t(2481)]=![],l.passes.pick=!![],l.passes.offscreen=!![],l.tilesetPassState=pickTilesetPassState,_[t(932)](l),i.updateEnvironment(),i.updateAndExecuteCommands(te,scratchColorZero),i.resolveFramebuffers(te);const ie=[];if(i[t(3521)][t(3982)]){const oe=m[t(1649)].length,de=new Cesium__namespace[t(e._0x413422)];for(let X=0;X<oe;++X){const he=f[t(e._0x8d5849)](i,X),Se=getDepth(c,0,0,1,B,he);for(let Te=0,Re=Se.length;Te<Re;Te++){const Be=Se[Te];if(Be>0&&Be<1){const ze=m[t(1649)][X],Ve=ze.near*(Te!==0?i.opaqueFrustumNearOffset:1),ye=ze.far,Fe=Ve+Be*(ye-Ve);if(Re>1){const me=(Te/(Se.length-1)-.5)*fe;Cesium__namespace.Cartesian3.multiplyByScalar(z,me,de)}const Ce=Cesium__namespace.Ray.clone($);Cesium__namespace.Cartesian3.add(Ce.origin,de,Ce[t(e._0x38d904)]);const Q=Cesium__namespace.Ray[t(4316)](Ce,Fe);!ie[Te]&&(ie[Te]=Q)}}}}i.view=i.defaultView,c.endFrame();const xe=[];for(let oe=0,de=ie.length;oe<de;oe++){const X=ie[oe];Cesium__namespace[t(515)](X)&&xe[t(e._0xa0bc9d)](X)}C=C.concat(xe),E.push({distance:k,positions:xe})}return i.globe.depthTestAgainstTerrain=n,f.destroy(),{positions:C,list:E}}function getDepth(r,e,t,i,s,n){const o={_0x37f910:2190,_0x18ae7e:1997},c=_0x5e32ae,_=r[c(o._0x37f910)]({x:e,y:t,width:i,height:s,framebuffer:n[c(3275)]}),l=Cesium__namespace.Cartesian4[c(o._0x18ae7e)](_,scratchPackedDepthArray),h=[];for(let f=0;f<l.length;++f){const m=l[f];Cesium__namespace.Cartesian4[c(2323)](m,255,m);const g=Cesium__namespace.Cartesian4.dot(m,packedDepthScale);h.push(g)}return h}function updateOffscreenCamera(r,e,t,i,s,n){const o={_0x183bab:2180,_0x5609f5:4005,_0x21c81b:2801},c=_0x5e32ae,_=Cesium__namespace.Cartesian3.cross(e,t,scratchRight);return n[c(o._0x183bab)]=r,n.direction=e,n.up=t,n[c(2893)]=_,n[c(2801)][c(o._0x5609f5)]=i,n[c(2801)].aspectRatio=i/s,n[c(o._0x21c81b)].computeCullingVolume(n.positionWC,n.directionWC,n.upWC)}function getCameraInforForPoints(r,e){const t={_0x7e3dfd:2793,_0x1c602f:557,_0x3a7f47:3916,_0x4b2261:3324,_0x236dd8:1346,_0x16d49d:3026},i=_0x5e32ae,s=Cesium__namespace.Rectangle.fromCartesianArray(r),n=Cesium__namespace.Rectangle[i(4064)](s),o=Cesium__namespace.Cartesian3[i(t._0x7e3dfd)](n.longitude,n.latitude,e),c=Cesium__namespace[i(2597)][i(t._0x1c602f)].geodeticSurfaceNormal(o);Cesium__namespace[i(t._0x3a7f47)][i(2257)](c,-1,c);const _=Cesium__namespace.Cartesian3.fromRadians(n.longitude,n.latitude+s.height/2,e),l=Cesium__namespace.Cartesian3.subtract(_,o,new Cesium__namespace.Cartesian3),h=new Cesium__namespace.Ray(o,c),f=Cesium__namespace.Rectangle.southwest(s),m=Cesium__namespace[i(t._0x4b2261)].southeast(s),g=Cesium__namespace[i(3324)][i(t._0x236dd8)](s),C=Cesium__namespace[i(3026)].toCartesian(f),E=Cesium__namespace.Cartographic.toCartesian(m),P=Cesium__namespace[i(t._0x16d49d)].toCartesian(g),w=Cesium__namespace.Cartesian3.distance(C,E),M=Cesium__namespace.Cartesian3.distance(C,P);return{ray:h,frustumWidth:w,frustumHeight:M,cameraUp:l}}function pointInPolygonNested(r,e){const t={_0x4d9574:3402},i=_0x5e32ae,s=r[0],n=r[1];let o=![];const c=e[i(t._0x4d9574)];for(let _=0,l=c-1;_<c;l=_++){const h=e[_][0],f=e[_][1],m=e[l][0],g=e[l][1];f>n!=g>n&&s<(m-h)*(n-f)/(g-f)+h&&(o=!o)}return o}function getBoxOutLine(r,e,t,i){const s={_0x394d76:3029,_0x22cca7:3916},n=_0x5e32ae,o=Cesium__namespace[n(3916)][n(s._0x394d76)](r,new Cesium__namespace.Cartesian3),c=Cesium__namespace.Cartesian3.cross(i,o,o);Cesium__namespace.Cartesian3.multiplyByScalar(c,e/2,c);const _=Cesium__namespace.Cartesian3[n(2257)](i,t/2,new Cesium__namespace.Cartesian3),l=Cesium__namespace.Cartesian3.add(r,_,new Cesium__namespace.Cartesian3);Cesium__namespace[n(s._0x22cca7)].add(l,c,l);const h=Cesium__namespace.Cartesian3.add(r,_,new Cesium__namespace.Cartesian3);Cesium__namespace.Cartesian3.subtract(h,c,h);const f=Cesium__namespace.Cartesian3.subtract(r,_,new Cesium__namespace.Cartesian3);Cesium__namespace.Cartesian3.add(f,c,f);const m=Cesium__namespace.Cartesian3.subtract(r,_,new Cesium__namespace.Cartesian3);return Cesium__namespace.Cartesian3.subtract(m,c,m),[l,f,m,h]}new Cesium__namespace.PerspectiveFrustum,new Cesium__namespace[_0x5e32ae(3950)],new Cesium__namespace.OrthographicFrustum,new Cesium__namespace.OrthographicOffCenterFrustum;function centerOfMass(r,e){const t={_0x57e588:1640},i=_0x5e32ae;if(!r||r.length===0)return;const s=LngLatArray[i(3816)](r);try{if(s[i(3402)]===1)return s[0];if(s.length===2)return getMidpoint(s[0],s[1]);e==null&&(e=getMaxHeight(s));const n=Cesium__namespace.Rectangle.fromCartesianArray(s),o=Cesium__namespace.Rectangle[i(4064)](n);return Cesium__namespace[i(3916)].fromRadians(o[i(t._0x57e588)],o[i(3701)],e)}catch{return s[Math.floor(s[i(3402)]/2)]}}function buffer(r,e=1,t=8){try{var i,s;if(((i=r)===null||i===void 0||(s=i.geometry)===null||s===void 0?void 0:s.type)==="Polygon"){const n=r.geometry.coordinates[0],o=n[0],c=n[n.length-1];(o[0]!==c[0]||o[1]!==c[1])&&n.push(o)}r=buffer$1(r,e,{units:"meters",steps:t})}catch(n){logError$1("PolyUtil turf.buffer:缓冲分析异常 ",n)}return r}function bufferPoints(r,e=1,t=8){const i={_0x101dd6:3759,_0x192c6a:1743},s=_0x5e32ae;try{const n=LngLatArray.toArray(r),o=n[0],c=n[n.length-1];(o[0]!==c[0]||o[1]!==c[1])&&n[s(i._0x101dd6)](n[0]);const _={type:"Feature",geometry:{type:s(2056),coordinates:[n]}},l=buffer$1(_,e,{units:s(2892),steps:t});return LngLatArray.toPoints(l.geometry[s(i._0x192c6a)][0])}catch(n){logError$1("PolyUtil buffer:缓冲分析异常",n)}return r}function getGranularity(r,e=10){const t={_0x38fb9f:4005},i=_0x5e32ae,s=Cesium__namespace.Rectangle.fromCartesianArray(LngLatArray.toCartesians(r));let n=Math[i(1124)](s.height,s[i(t._0x38fb9f)]);return n/=e,n}function interPolygon(r){const e={_0xe76da:3916,_0x48c155:693,_0x1b2201:2180,_0x25f305:3759,_0x117b8f:4261},t=r.scene,i=LngLatArray.toCartesians(r.positions,!![]),s=getGranularity(i,r.splitNum);return new Promise((n,o)=>{const c={_0xf23180:4111,_0x2fed5c:2581};setTimeout(()=>{const _={_0x43ce43:2581},l=_0x5210,h=[],f=new Cesium__namespace.PolygonGeometry[l(1800)]({positions:i,vertexFormat:Cesium__namespace.PerInstanceColorAppearance[l(781)],granularity:s}),m=new Cesium__namespace.PolygonGeometry.createGeometry(f);let g,C,E,P,w,M;for(let k=0;k<m.indices.length;k+=3)g=m.indices[k],C=m[l(2524)][k+1],E=m.indices[k+2],P=new Cesium__namespace[l(e._0xe76da)](m.attributes.position.values[g*3],m.attributes.position.values[g*3+1],m.attributes.position.values[g*3+2]),h.push(P),w=new Cesium__namespace.Cartesian3(m.attributes.position[l(4261)][C*3],m.attributes.position[l(4261)][C*3+1],m[l(e._0x48c155)][l(e._0x1b2201)].values[C*3+2]),h[l(e._0x25f305)](w),M=new Cesium__namespace.Cartesian3(m[l(693)].position.values[E*3],m.attributes[l(2180)][l(e._0x117b8f)][E*3+1],m.attributes.position[l(4261)][E*3+2]),h[l(3759)](M);let T=0,L=9999;const R=r.onlyPoint??![];function D(k,B){const $=l;let H,W,J,z;return B?(delete r[$(_._0x43ce43)],H=getHeight(t,k,r),z=Cesium__namespace[$(3026)][$(3236)](k),W=Cesium__namespace.Cartesian3.fromRadians(z.longitude,z.latitude,0),J=Cesium__namespace.Cartesian3[$(2793)](z.longitude,z.latitude,H)):(z=Cesium__namespace.Cartographic.fromCartesian(k),H=z.height,W=Cesium__namespace.Cartesian3.fromRadians(z.longitude,z[$(3701)],0),J=k),T<H&&(T=H),L>H&&(L=H),{height:H,point:W,pointDM:J}}function N(k){const B=l,$=[];let H,W,J;for(let z=0;z<k.positions.length;z+=3)H=D(k.positions[z],k.noHeight),W=D(k.positions[z+1],k.noHeight),J=D(k.positions[z+2],k.noHeight),R?(addPointFoyArrOnly($,H),addPointFoyArrOnly($,W),addPointFoyArrOnly($,J)):$.push({point1:H,point2:W,point3:J});Cesium__namespace.defined(r.minHeight)&&(L=Math.max(r.minHeight,L),T=Math.max(T,L)),k.granularity=s,k[B(2298)]=T,k[B(c._0xf23180)]=L,k.list=$,r.callback&&r[B(c._0x2fed5c)](k),n(k)}r.exact?computeSurfacePoints({scene:t,positions:h,has3dtiles:r.has3dtiles,exact:r.exact})[l(549)](N):N({positions:h,noHeight:!![],has3dtiles:r.has3dtiles,hasTerrain:r.hasTerrain})},50)})}function addPointFoyArrOnly(r,e){const t={_0x554e3d:3381,_0x444d91:3402},i=_0x5e32ae;let s=![];const n=e[i(t._0x554e3d)];for(let o=0;o<r[i(t._0x444d91)];o++){const c=r[o].point;if(n.x===c.x&&n.y===c.y&&n.z===c.z){s=!![];break}}!s&&r.push(e)}function getHeightRange(r,e,t){return interPolygon({positions:r,scene:e,...t})}function getTriangleArea$1(r,e,t){const i={_0x149202:3916,_0x38c480:3916,_0x209410:2776},s=_0x5e32ae,n=Cesium__namespace[s(i._0x149202)].distance(r,e),o=Cesium__namespace.Cartesian3.distance(e,t),c=Cesium__namespace[s(i._0x38c480)][s(i._0x209410)](t,r),_=(n+o+c)/2;return Math.sqrt(_*(_-n)*(_-o)*(_-c))}function computeVolume(r){const e=_0x5e32ae;return interPolygon(r)[e(549)](t=>updateVolumeByMinHeight(t))}function updateVolumeByMinHeight(r){const e={_0x37f8c7:4111,_0x788f68:3381,_0x433735:3025},t=_0x5e32ae,i=r[t(e._0x37f8c7)];let s=0,n=0;for(let o=0,c=r.list.length;o<c;o++){const _=r.list[o],l=_.point1,h=_.point2,f=_.point3,m=getTriangleArea$1(l[t(e._0x788f68)],h.point,f.point);_[t(1451)]=m,s+=m;let g=l.height,C=h.height,E=f.height;g<i&&(g=i),C<i&&(C=i),E<i&&(E=i);const P=m*(g-i+C-i+E-i)/3;_[t(e._0x433735)]=P,n=n+P}return r[t(1199)]=s,r.totalVolume=n,r}function updateVolume(r,e){const t={_0x2503c1:3865,_0x3a525e:907},i=_0x5e32ae;if(!r)return;const s=r.minHeight,n=r.totalVolume;if(e<=s)return r.fillVolume=0,r[i(907)]=n,r;let o=0,c=0;for(let _=0,l=r.list.length;_<l;_++){const h=r.list[_];o+=h.area*(e-s);const f=h.point1,m=h.point2,g=h.point3;let C=f.height,E=m.height,P=g[i(t._0x2503c1)];C<e&&(C=e),E<e&&(E=e),P<e&&(P=e),c+=h.area*(C-e+E-e+P-e)/3}return r[i(t._0x3a525e)]=c,r[i(3685)]=o-(n-c),r}function getEllipseOuterPositions(r){const e={_0x5b647e:2232,_0x125507:1699,_0x264194:3916},t=_0x5e32ae;let i=r.position;if(!i)return null;i=LngLatPoint[t(2048)](i);const s=r[t(3136)]??r.radius,n=r.semiMinorAxis??r[t(3194)];if(!s||!n)return[i,i,i];const o=r.rotation??0;let c=r[t(e._0x5b647e)]||Cesium__namespace.Math[t(1924)];r.count&&(c=Math.PI/(16*r.count));const _=Cesium__namespace.EllipseGeometryLibrary.computeEllipsePositions({center:i,semiMajorAxis:s,semiMinorAxis:n,rotation:o,granularity:c},!![],!![]),l=_[t(e._0x125507)],h=[];for(let f=0,m=l.length;f<m;f+=3){const g=new Cesium__namespace[t(e._0x264194)](l[f],l[f+1],l[f+2]);h[t(3759)](g)}return h}function formatRectangle(r,e=LngLatPoint[_0x5e32ae(4259)]){let t=formatNum$1(Cesium__namespace.Math.toDegrees(r.west),e),i=formatNum$1(Cesium__namespace.Math.toDegrees(r.east),e),s=formatNum$1(Cesium__namespace.Math.toDegrees(r.north),e),n=formatNum$1(Cesium__namespace.Math.toDegrees(r.south),e);if(t>i){const o=t;t=i,i=o}if(n>s){const o=n;n=s,s=o}return{xmin:t,xmax:i,ymin:n,ymax:s}}function getExtentByGeoJSON(r){const e=bbox(r);return e&&e.length===4?{xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3]}:null}function getRectangle(r,e){const t={_0x42eac1:3402},i=_0x5e32ae;if(!r)return null;for(let n=r[i(t._0x42eac1)]-1;n>=0;n--)!Cesium__namespace.defined(r[n])&&r.splice(n,1);r=LngLatArray.toCartesians(r);const s=Cesium__namespace.Rectangle.fromCartesianArray(r);return e?formatRectangle(s):s}function getPositionsRectVertex(r,e=0){r=LngLatArray.toCartesians(r);const t=Cesium__namespace.Rectangle.fromCartesianArray(r),i=getMaxHeight(r);return getRectangleOuterPositions({rectangle:t,rotation:e,height:i})}function getRectangleOuterPositions(r){const e={_0x1e6c58:3916,_0x283d75:1134,_0x5dc0ac:1286,_0x3d74b3:2597,_0x157370:3916,_0x2ce3ec:1316},t=_0x5e32ae,i=r.rectangle,s=r.rotation??0,n=r.height??0;if(s===0)return[Cesium__namespace[t(e._0x1e6c58)].fromRadians(i.west,i.south,n),Cesium__namespace.Cartesian3.fromRadians(i.east,i.south,n),Cesium__namespace.Cartesian3.fromRadians(i[t(1189)],i[t(e._0x283d75)],n),Cesium__namespace.Cartesian3.fromRadians(i.west,i.north,n)];const o=r[t(2232)]??Cesium__namespace[t(e._0x5dc0ac)].RADIANS_PER_DEGREE,c=new Cesium__namespace.Rectangle,_=new Cesium__namespace.Cartographic,l=Cesium__namespace[t(1316)].computeOptions(i,o,s,0,c,_),h=l.height,f=l.width,m=r.ellipsoid??Cesium__namespace[t(e._0x3d74b3)].WGS84;let g=[new Cesium__namespace[t(3916)],new Cesium__namespace.Cartesian3,new Cesium__namespace[t(3916)],new Cesium__namespace[t(e._0x157370)]];return Cesium__namespace.RectangleGeometryLibrary.computePosition(l,m,![],0,0,g[0]),Cesium__namespace.RectangleGeometryLibrary.computePosition(l,m,![],0,f-1,g[1]),Cesium__namespace.RectangleGeometryLibrary.computePosition(l,m,![],h-1,f-1,g[2]),Cesium__namespace[t(e._0x2ce3ec)].computePosition(l,m,![],h-1,0,g[3]),n!==0&&(g=setPositionsHeight(g,n)),g}function getRectPositionsByCenter(r){const e={_0x19cb33:3916,_0x55ff15:2735,_0x111aca:3922,_0xcd82c:4069},t=_0x5e32ae,i=LngLatPoint.toCartesian(r.center),s=r.width,n=r.height,o=r.rotation??0,c=r.originX??.5,_=r.originY??.5,l=new Cesium__namespace.Matrix4,h=new Cesium__namespace[t(2988)],f=new Cesium__namespace.Matrix4,m=[Cesium__namespace[t(e._0x19cb33)][t(4115)](-c,-_,0),Cesium__namespace[t(e._0x19cb33)].fromElements(1-c,-_,0),Cesium__namespace[t(3916)][t(4115)](1-c,1-_,0),Cesium__namespace.Cartesian3.fromElements(-c,1-_,0)],g=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(i,Cesium__namespace.Ellipsoid.WGS84,l),C=Cesium__namespace.Quaternion[t(e._0x55ff15)](Cesium__namespace.Cartesian3[t(2072)],o,h),E=Cesium__namespace.Matrix4[t(e._0x111aca)],P=E(Cesium__namespace.Cartesian3[t(e._0xcd82c)],C,Cesium__namespace.Cartesian3.fromElements(s,n),f),w=Cesium__namespace.Matrix4.multiply(g,P,P),M=[];return m[t(2500)](function(T,L){typeof M[L]>"u"&&(M[L]=new Cesium__namespace.Cartesian3),Cesium__namespace.Matrix4.multiplyByPoint(w,T,M[L])}),M}function isInPoly(r,e){const t=_0x5e32ae,i={type:"Feature",geometry:{type:"Point",coordinates:LngLatPoint[t(1426)](r).toArray()}},s={type:t(2056),coordinates:[LngLatArray.toArray(e)]};return booleanPointInPolygon(i,s)}function getBezierCurve(r,e){const t={_0x296ff4:3402,_0x85dceb:3402,_0x33a78c:3759},i=_0x5e32ae;if(!r||r[i(t._0x296ff4)]<3)return r;const s=LngLatArray[i(725)](r);e!=null&&e.closure&&s.push(s[0]);const n=s[s[i(t._0x85dceb)]-1][2],o=bezierSpline({type:"Feature",geometry:{type:"LineString",coordinates:s}},{resolution:(e==null?void 0:e.resolution)??1e4,sharpness:(e==null?void 0:e.sharpness)??.85}),c=lonlats2cartesians(o.geometry.coordinates,n);return e!=null&&e.closure&&c[i(t._0x33a78c)](c[0]),c}function interPolyline(r){const e={_0x39a293:2436,_0x5c04be:3402,_0x572965:1640},t=_0x5e32ae,i=LngLatArray[t(3816)](r[t(e._0x39a293)]),s=r.scene;let n=getGranularity(i,r.splitNum||(r.has3dtiles?10:100));n<=0&&(n=null);const o=Cesium__namespace.PolylinePipeline.generateArc({positions:i,height:r[t(3865)],minDistance:r.minDistance,granularity:n}),c=[];for(let _=0;_<o[t(e._0x5c04be)];_+=3){let l=Cesium__namespace.Cartesian3[t(613)](o,_);if(s&&(r.surfaceHeight??!![])){delete r.callback;const h=getHeight(s,l,r),f=Cesium__namespace.Cartographic.fromCartesian(l);l=Cesium__namespace.Cartesian3.fromRadians(f[t(e._0x572965)],f[t(3701)],h)}c.push(l)}return c}function interLine(r,e={}){const t={_0x14bc38:3816,_0xdeb02:3050,_0x477079:3307,_0x5d60d1:2008,_0x4eb3c5:3026,_0x4a9ba2:3865,_0x2f47f5:3026,_0x455239:3916},i=_0x5e32ae;if(!r||r.length<2)return r;r=LngLatArray[i(t._0x14bc38)](r);let s;if(e.splitNum&&!Cesium__namespace.defined(e[i(t._0xdeb02)])&&(s=getGranularity(r,e.splitNum),s<=0&&(s=null)),e[i(3050)]===i(t._0x477079)){let o=Number[i(3747)];for(let c=1,_=r.length;c<_;c++)o=Math.min(o,Cesium__namespace.Cartesian3[i(2776)](r[c-1],r[c]));e.minDistance=o}const n=[r[0]];for(let o=1,c=r.length;o<c;o++){const _=r[o-1],l=r[o],h=Cesium__namespace.PolylinePipeline[i(t._0x5d60d1)]({positions:[_,l],minDistance:e[i(t._0xdeb02)],granularity:s}),f=Cesium__namespace[i(t._0x4eb3c5)].fromCartesian(_)[i(t._0x4a9ba2)],m=Cesium__namespace.Cartographic.fromCartesian(l).height,g=(m-f)/h[i(3402)];for(let C=3,E=h.length;C<E;C+=3){let P=Cesium__namespace[i(3916)].unpack(h,C);const w=Cesium__namespace[i(t._0x2f47f5)].fromCartesian(P),M=Number((f+g*C).toFixed(1));P=Cesium__namespace[i(t._0x455239)].fromRadians(w.longitude,w.latitude,M),n.push(P)}}return n}function computeSurfaceLine(r){const e={_0x4756e0:4246},t=_0x5e32ae,i=interPolyline({...r,surfaceHeight:![]}),s=[];for(let n=0,o=i.length;n<o;++n)s.push(i[n][t(e._0x4756e0)]());return r.positions=s,new SurfacePoints(r).start()}function computeSurfacePoints(r){return new SurfacePoints(r).start()}function computeStepSurfaceLine(r){const e=_0x5e32ae,t=r[e(2436)],i=[],s={};for(const n in r)n==="positions"||n==="callback"||n==="end"||n==="endItem"||(s[n]=r[n]);return new Promise((n,o)=>{const c={_0x5bb191:2581};setTimeout(()=>{let _=0;const l=t.length-1;function h(){const f=_0x5210;if(_>=l){r[f(c._0x5bb191)]&&r.callback(i),r.end&&r.end(i),n(i);return}s.positions=interPolyline({...r,positions:[t[_],t[_+1]],surfaceHeight:![]}),new SurfacePoints(s).start().then(m=>{const g=f;r.endItem&&r[g(2340)](m[g(2436)],m.noHeight,_),i.push(m.positions),_++,h()})}h()},50)})}function getLinkedPointList(r,e,t,i){const s={_0x5a3b2c:2048,_0x585e29:3236,_0xdd5241:1640,_0x16303e:3916,_0x3fe4c1:3916,_0x3f39e4:4246,_0x439461:3916,_0x10820b:3916,_0x4ade03:3916},n=_0x5e32ae,o=[];r=LngLatPoint.toCartesian(r),e=LngLatPoint[n(s._0x5a3b2c)](e);const c=Cesium__namespace[n(3026)].fromCartesian(r),_=Cesium__namespace.Cartographic[n(s._0x585e29)](e),l=c[n(s._0xdd5241)]*180/Math.PI,h=c.latitude*180/Math.PI,f=_.longitude*180/Math.PI,m=_.latitude*180/Math.PI,g=Math.sqrt((l-f)*(l-f)+(h-m)*(h-m)),C=g*t,E=Cesium__namespace[n(s._0x16303e)].clone(r),P=Cesium__namespace[n(s._0x3fe4c1)][n(s._0x3f39e4)](e),w=Cesium__namespace.Cartesian3.distance(E,Cesium__namespace.Cartesian3[n(4069)]),M=Cesium__namespace.Cartesian3.distance(P,Cesium__namespace[n(s._0x439461)].ZERO);if(Cesium__namespace.Cartesian3.normalize(E,E),Cesium__namespace.Cartesian3.normalize(P,P),Cesium__namespace.Cartesian3.distance(E,P)===0)return o;const T=Cesium__namespace.Cartesian3.angleBetween(E,P);o.push(r);for(let L=1;L<i-1;L++){const R=L*1/(i-1),D=1-R,N=Math.sin(D*T)/Math.sin(T),k=Math.sin(R*T)/Math.sin(T),B=Cesium__namespace.Cartesian3.multiplyByScalar(E,N,new Cesium__namespace[n(3916)]),$=Cesium__namespace[n(s._0x10820b)][n(2257)](P,k,new Cesium__namespace[n(s._0x10820b)]);let H=Cesium__namespace[n(s._0x4ade03)][n(4084)](B,$,new Cesium__namespace.Cartesian3);const W=R*Math.PI,J=w*D+M*R+Math[n(442)](W)*C;H=Cesium__namespace[n(3916)].multiplyByScalar(H,J,H),o.push(H)}return o.push(e),o}function getOffsetLine(r,e){const t={_0x565dbd:3759},i=_0x5e32ae;r=LngLatArray.toCartesians(r);const s=[];for(let n=1;n<r.length;n++){const o=r[n-1],c=r[n],_=Cesium__namespace.Cartesian3[i(1531)](o,c,new Cesium__namespace.Cartesian3),l=Cesium__namespace.Cartesian3.cross(o,_,new Cesium__namespace.Cartesian3),h=computedOffsetData(o,l,e*1e3),f=computedOffsetData(c,l,e*1e3);n===1&&s.push(h),s[i(t._0x565dbd)](f)}return s}function computedOffsetData(r,e,t){const i=_0x5e32ae,s=new Cesium__namespace.Ray(r,e);return Cesium__namespace.Ray.getPoint(s,t,new Cesium__namespace[i(3916)])}function sliceByMaxDistance(r,e,t={}){const i={_0x30158c:3402,_0x2eae28:3816,_0x76c4cf:3381,_0x266bd9:3381},s=_0x5e32ae;if(!r||r[s(i._0x30158c)]<2)return t.point?r.length===1?r[0]:void 0:r;r=LngLatArray[s(i._0x2eae28)](r);for(let n=r.length-1;n>=1;n--){const o=r[n],c=r[n-1],_=Cesium__namespace.Cartesian3.distance(o,c);if(e-=_,e===0)return t.point?o:r.slice(n);if(e<0){e+=_;const l=getOnLinePointByLen(o,c,e);return t[s(i._0x76c4cf)]?l:[l].concat(r.slice(n))}}return t[s(i._0x266bd9)]?r[r.length-1]:r}function convex(r){const e={_0x15e7a9:3759,_0x5a39ff:552,_0x4efc87:1743},t=_0x5e32ae;if(r.length>0){const s=[];for(let o=0;o<r.length;o++)s[t(e._0x15e7a9)]({type:"Feature",geometry:{type:"Point",coordinates:r[o]}});const n=convex$1({type:t(e._0x5a39ff),features:s});if(n){var i;const o=n==null||(i=n.geometry)===null||i===void 0?void 0:i[t(e._0x4efc87)];o&&o.length>0&&(r=o[0])}}return r}function getGridPoints(r,e,t){const i={_0x4f6aa6:3916,_0x3aebc7:3203},s=_0x5e32ae,n=Cesium__namespace.Cartesian3.distance(Cesium__namespace.Cartesian3[s(3203)](r[0],r[1]),Cesium__namespace[s(i._0x4f6aa6)][s(i._0x3aebc7)](r[2],r[3]))/(Math.sqrt(2)*1e3),o=n/Math.sqrt(e),c=pointGrid(r,o,{units:s(1282)}),_=[];return c[s(1906)].forEach(l=>{const h=l.geometry.coordinates;_.push(new LngLatPoint(h[0],h[1],t))}),{points:_,radius:Math.floor(o*1e3/2)}}function getGridPointsByPoly(r,e,t){const i={_0x34fabc:3402,_0x133d87:3701,_0xbae32e:3865,_0x429e35:1984},s={_0x19eb4b:3865},n=_0x5e32ae;if(r[n(i._0x34fabc)]<3)return;const o=LngLatArray[n(3507)](r),c=Cesium__namespace.defined(t),_=o[0];let l=_.longitude,h=_.longitude,f=_.latitude,m=_[n(i._0x133d87)],g=c?t:_[n(i._0xbae32e)];const C=o.map(H=>{const W=n;return l=Math.min(l,H.longitude),f=Math.max(f,H.longitude),h=Math.min(h,H.latitude),m=Math.max(m,H.latitude),!c&&(g=Math[W(1124)](g,H[W(s._0x19eb4b)])),H}),E=[],P=f-l,w=m-h,M=e/distanceCoor([l,h],[f,h]),T=e/distanceCoor([l,h],[l,m]),L=M*P,R=T*w,D=Math.floor(P/L),N=Math.floor(w/R),k=(P-D*L)/2,B=(w-N*R)/2;let $=l+k;for(;$<=f;){let H=h+B;for(;H<=m;){if(isInside([$,H],C)){const W=Cesium__namespace.Math[n(i._0x429e35)]($),J=Cesium__namespace[n(1286)].toDegrees(H);E[n(3759)](new LngLatPoint(W,J,g))}H+=R}$+=L}return E}function distanceCoor(r,e){const t={_0x5545ba:442},i=_0x5e32ae,s=e[1]-r[1],n=e[0]-r[0],o=r[1],c=e[1],_=Math.pow(Math[i(t._0x5545ba)](s/2),2)+Math.pow(Math.sin(n/2),2)*Math.cos(o)*Math.cos(c);return 2*Math[i(935)](Math.sqrt(_),Math.sqrt(1-_))*63710088e-1}function isInside(r,e){const t={_0x3a7036:3701,_0x3a192b:1640,_0x404e0a:3701,_0x1830f0:1640},i=_0x5e32ae;let s=![];const n=e.length,o=r[0],c=r[1];let _=e[0];for(let l=0;l<n;l++){let h=l+1;h=h===n?0:h;const f=e[h];if(_[i(1640)]===o&&_[i(t._0x3a7036)]===c||f[i(1640)]===o&&f[i(3701)]===c)return!![];if(_.latitude<c&&f.latitude>=c||_.latitude>=c&&f[i(t._0x3a7036)]<c){const m=_[i(t._0x3a192b)]+(c-_[i(t._0x404e0a)])*(f[i(1640)]-_[i(t._0x1830f0)])/(f[i(t._0x3a7036)]-_.latitude);if(m===o)return!![];m>o&&(s=!s)}_=f}return s}function getHeightRangeByDepth(r,e,t){return new Promise((i,s)=>{setTimeout(()=>{const n=interPolygonByDepth$1({...t,positions:r,scene:e});setTimeout(()=>{i(n)},10)},10)})}function interPolygonByDepth(r){return new Promise((e,t)=>{setTimeout(()=>{const i=interPolygonByDepth$1(r);setTimeout(()=>{e(i)},10)},10)})}function interPolylineByDepth(r){return new Promise((e,t)=>{setTimeout(()=>{const i=interPolylineByDepth$1(r);setTimeout(()=>{e(i)},10)},10)})}var PolyUtil={__proto__:null,centerOfMass,buffer,bufferPoints,getGranularity,interPolygon,getHeightRange,computeVolume,updateVolumeByMinHeight,updateVolume,getEllipseOuterPositions,formatRectangle,getExtentByGeoJSON,getRectangle,getPositionsRectVertex,getRectangleOuterPositions,getRectPositionsByCenter,isInPoly,getBezierCurve,interPolyline,interLine,computeSurfaceLine,computeSurfacePoints,computeStepSurfaceLine,getLinkedPointList,getOffsetLine,sliceByMaxDistance,convex,getGridPoints,getGridPointsByPoly,getHeightRangeByDepth,interPolygonByDepth,interPolylineByDepth};function getDistance(r,e){const t={_0x36f718:515},i=_0x5e32ae,s=r.length;if(!Cesium__namespace[i(t._0x36f718)](r)||s<2)return 0;r=LngLatArray.toCartesians(r);let n=0;for(let o=1;o<s;o++)n+=Cesium__namespace.Cartesian3.distance(r[o-1],r[o]);return e&&(n+=Cesium__namespace.Cartesian3.distance(r[0],r[s-1])),n}function getSurfaceDistance(r){const e={_0x3ea99a:3236},t=_0x5e32ae;if(!Cesium__namespace[t(515)](r)||r.length<2)return 0;r=LngLatArray.toCartesians(r);let i=0;for(let s=1,n=r.length;s<n;s++){const o=Cesium__namespace.Cartographic.fromCartesian(r[s-1]),c=Cesium__namespace.Cartographic[t(e._0x3ea99a)](r[s]),_=new Cesium__namespace[t(1043)];_.setEndPoints(o,c);let l=_.surfaceDistance;l=Math.sqrt(Math.pow(l,2)+Math.pow(c.height-o.height,2)),i+=l}return i}function getClampDistance(r,e){const t={_0xc960de:3107};let i=0;const s=[];return new Promise((n,o)=>{const c={_0xbcba09:2581};setTimeout(()=>{const _=_0x5210;computeStepSurfaceLine({scene:e[_(t._0xc960de)],positions:r,splitNum:e.splitNum,has3dtiles:e[_(2288)],exact:e.exact??!![],endItem:function(l,h,f){const m=_;let g=getSurfaceDistance(l);h&&e.disTerrainScale&&(g=g*e.disTerrainScale),i+=g,s.push(g),e[m(2340)]&&e.endItem({index:f,positions:l,distance:g,arrDistance:s,all_distance:i})},end:function(l){const h=_;e[h(2581)]&&e[h(c._0xbcba09)](i),e.end&&e.end(i),n({distance:i,arrDistance:s,arrPositions:l})}})},50)})}function getArea(r){const e={_0x489d28:3845,_0x1e41cf:3816,_0x1c7264:3871,_0x4e7d8d:1800,_0x20637f:3916,_0xf0fbd0:613},t=_0x5e32ae;if(!r||!Array[t(e._0x489d28)](r)||r.length<3)return 0;r=LngLatArray[t(e._0x1e41cf)](r);const i=Cesium__namespace.CoplanarPolygonGeometry[t(e._0x1c7264)](Cesium__namespace[t(2752)][t(e._0x4e7d8d)]({positions:r,vertexFormat:Cesium__namespace.VertexFormat.POSITION_ONLY}));let s=0;if(!i)return s;const n=i.attributes.position.values,o=i.indices;for(let c=0;c<o.length;c+=3){const _=Cesium__namespace.Cartesian3.unpack(n,o[c]*3,new Cesium__namespace.Cartesian3),l=Cesium__namespace[t(e._0x20637f)].unpack(n,o[c+1]*3,new Cesium__namespace.Cartesian3),h=Cesium__namespace.Cartesian3[t(e._0xf0fbd0)](n,o[c+2]*3,new Cesium__namespace.Cartesian3);s+=getTriangleArea(_,l,h)}return s}function getSurfaceArea(r){const e=_0x5e32ae;if(!r||!Array[e(3845)](r)||r.length<3)return 0;const t=LngLatArray.toArray(r);return t.length>0&&t.push(t[0]),area({type:e(3182),geometry:{type:"Polygon",coordinates:[t]}})}function getTriangleArea(r,e,t){const i={_0x1a0142:3916},s=_0x5e32ae,n=Cesium__namespace[s(3916)].subtract(r,e,new Cesium__namespace[s(i._0x1a0142)]),o=Cesium__namespace.Cartesian3.subtract(t,e,new Cesium__namespace.Cartesian3),c=Cesium__namespace[s(i._0x1a0142)].cross(n,o,n);return Cesium__namespace[s(3916)].magnitude(c)*.5}function getClampArea(r,e){return interPolygon({positions:r,exact:!![],...e}).then(t=>{const i=_0x5210;let s=0;for(let n=0,o=t.list.length;n<o;n++){const c=t.list[n],_=c.point1,l=c.point2,h=c.point3;s+=getTriangleArea(_.pointDM,l.pointDM,h.pointDM)}return t.area=s,e[i(2581)]&&e.callback(s,t),t})}function getAngle(r,e,t){const i={_0x47b5e3:4102,_0x2a5f31:3916,_0x23b1fb:3925,_0x451664:3029,_0x3e51ea:3916},s=_0x5e32ae;let n=Cesium__namespace.Transforms[s(3684)](e);n=Cesium__namespace[s(i._0x47b5e3)].getMatrix3(n,new Cesium__namespace.Matrix3);const o=Cesium__namespace.Matrix3.getColumn(n,0,new Cesium__namespace.Cartesian3),c=Cesium__namespace[s(3768)].getColumn(n,1,new Cesium__namespace[s(3916)]),_=Cesium__namespace.Matrix3.getColumn(n,2,new Cesium__namespace.Cartesian3);let l=Cesium__namespace[s(3916)][s(1531)](r,e,new Cesium__namespace.Cartesian3);if(isNaN(l.x)||isNaN(l.y)||isNaN(l.z)||l[s(2661)](Cesium__namespace.Cartesian3.ZERO))return 0;l=Cesium__namespace.Cartesian3[s(3925)](l,_,l),l=Cesium__namespace[s(i._0x2a5f31)][s(i._0x23b1fb)](_,l,l),l=Cesium__namespace.Cartesian3[s(i._0x451664)](l,l);let h=Cesium__namespace.Cartesian3.angleBetween(o,l);Cesium__namespace[s(i._0x3e51ea)].angleBetween(c,l)>Math.PI*.5&&(h=2*Math.PI-h);let m=360-Cesium__namespace.Math.toDegrees(h)-180;return t&&(m+=90),m<0?m=m+360:m>360&&(m=m-360),m}function formatDistance(r,e={}){const t={_0x5bb813:4059,_0x1f9d9f:1029,_0x367b69:663,_0x3778f7:3555},i=_0x5e32ae;if(r==null||(r=Number(r),isNaN(r)||r===0))return"";isString(e)&&(e={unit:e}),(e[i(t._0x5bb813)]==null||e.unit==="auto")&&(r<1e3?e.unit="m":e.unit="km"),e.decimal=e[i(2769)]??2;let s="";switch(e.unit){case"km":s=(r*.001)[i(t._0x1f9d9f)](e.decimal)+getLangText("_公里",e.lang);break;case"wm":s=(r*1e-4).toFixed(e.decimal)+getLangText("_万米",e[i(t._0x367b69)]);break;case"mile":s=(r*54e-5).toFixed(e[i(2769)])+getLangText("_海里",e.lang);break;case i(t._0x3778f7):s=(r*.3)[i(1029)](e.decimal)+getLangText("_丈",e[i(t._0x367b69)]);break;case"m":default:s=r.toFixed(e.decimal)+getLangText("_米",e.lang);break}return s}function formatArea(r,e={}){const t={_0x8dc5d8:3307,_0x54f9a6:2007,_0x3fec56:1029},i=_0x5e32ae;if(r==null||(r=Number(r),isNaN(r)||r===0))return"";isString(e)&&(e={unit:e}),(e.unit==null||e.unit===i(t._0x8dc5d8))&&(r<1e6?e.unit="m":e.unit="km"),e.decimal=e[i(2769)]??2;let s="";switch(e.unit){case"km":s=(r/1e6).toFixed(e.decimal)+getLangText(i(1320),e.lang);break;case"mu":s=(r*.0015).toFixed(e.decimal)+getLangText("_亩",e.lang);break;case"ha":s=(r*1e-4)[i(1029)](e.decimal)+getLangText(i(t._0x54f9a6),e.lang);break;case"m":default:s=r[i(t._0x3fec56)](e.decimal)+getLangText("_平方米",e.lang);break}return s}function formatVolume(r,e={}){const t={_0x4b4d74:2769,_0x509e7a:663,_0x5b7f5a:1522,_0x141246:2769},i=_0x5e32ae;return r==null||(r=Number(r),isNaN(r)||r===0)?"":(e[i(t._0x4b4d74)]=e.decimal??2,e[i(t._0x509e7a)]===LangType.EN?r.toFixed(e.decimal)+getLangText(i(t._0x5b7f5a),e.lang):r<1e4?r.toFixed(e[i(t._0x141246)])+getLangText("_立方米",e.lang):(r/1e4).toFixed(e.decimal)+getLangText(i(3232),e.lang))}var MeasureUtil={__proto__:null,getDistance,getSurfaceDistance,getClampDistance,getArea,getSurfaceArea,getTriangleArea,getClampArea,getAngle,formatDistance,formatArea,formatVolume};function register$3(r,e){const t={_0x2b22cd:2089,_0x2942f3:890,_0x250bfe:1423,_0x2d172a:667,_0x19df2b:714},i=_0x5e32ae;Cesium__namespace.Material[i(t._0x2b22cd)].getMaterial(r)&&logError$1("MaterialUtil register: "+r+i(t._0x2942f3),e),MaterialTypes[r]=r,Cesium__namespace[i(t._0x250bfe)][r+i(t._0x2d172a)]=r,e[i(2203)]&&(e.fabric.type=r),Cesium__namespace.Material._materialCache[i(t._0x19df2b)](r,e)}const OptsConverClass={};function registerOptsConver(r,e){const t=_0x5e32ae;OptsConverClass[r]&&logError$1("MaterialUtil registerOptsConver: "+r+t(890),e),OptsConverClass[r]=e}const MaterialClass={},MaterialTypes={};function registerClass(r,e){const t=_0x5e32ae;MaterialTypes[r]&&logError$1(t(768)+r+t(890),e),MaterialClass[r]=e,MaterialTypes[r]=r}const MaterialPropertyClass={};function registerPropertyClass(r,e){MaterialPropertyClass[r]&&logError$1("MaterialUtil registerPropertyClass: "+r+"属性类型已存在",e),MaterialPropertyClass[r]=e}function createMaterialProperty(r,e){const t={_0x4e6a2d:1740},i=_0x5e32ae,s=MaterialPropertyClass[r];if(s){const n=OptsConverClass[r]||OptsConverClass[i(4255)];n&&(e.materialType=r,e=n.toCesiumVal(e,{},!![]));const o=new s(e);return o[i(t._0x4e6a2d)]=r,o.options=e,o}else logWarn("createMaterialProperty:未找到该类型的对应材质属性",r)}function createMaterial(r,e){const t=_0x5e32ae;if(!r){logError$1(t(1140));return}const i=OptsConverClass[r]||OptsConverClass[t(4255)];i&&(e.materialType=r,e=i[t(1268)](e));let s;const n=MaterialClass[r];return n?s=new n(e):s=Cesium__namespace.Material.fromType(r,e),s.options=e,s._mars_type=r,s}function hasMaterial(r,e){return e?!!MaterialPropertyClass[r]:!!MaterialTypes[r]}function toJSON(r,e={}){const t={_0x3c1990:1740,_0x3808c9:3852},i=_0x5e32ae;var s;let n;if(r[i(t._0x3c1990)]?n=r._mars_type:r!=null&&(s=r._template)!==null&&s!==void 0&&s.type?n=r._template.type:r!=null&&r[i(1500)]&&(n=r.getType()),!n)if(r instanceof Cesium__namespace.Color)n="Color";else{if(r instanceof HTMLVideoElement)return;logWarn("toJSON：未识别的材质类型",r)}const o=OptsConverClass[n]||OptsConverClass.default;return o&&(e.materialType=n,e.materialOptions=o[i(t._0x3808c9)](r)),e}function toJSONByType(r,e){const t=OptsConverClass[r]||OptsConverClass.default;return t?t.toJSON(e):e}function addTextureUniform(r){const e={_0x5901e0:594},t={_0x47a176:765,_0x2f723b:2221},i=_0x5e32ae,{context:s,material:n,uniformName:o,image:c}=r,_=r[i(e._0x5901e0)]||Cesium__namespace.TextureWrap.REPEAT,l=r.wrapT||Cesium__namespace.TextureWrap[i(3842)],h=r.minificationFilter||Cesium__namespace[i(1036)].LINEAR,f=r.magnificationFilter||Cesium__namespace.TextureMagnificationFilter.LINEAR,m=new Image;m[i(3696)]=c,m.addEventListener("load",()=>{const g=i,C=new Cesium__namespace.Texture({context:s,source:m,sampler:new Cesium__namespace[g(1253)]({wrapS:_,wrapT:l,minificationFilter:h,magnificationFilter:f})});C.type="sampler2D",isPowerOfTwo(m.width)&&isPowerOfTwo(m[g(3865)])&&C.generateMipmap(Cesium__namespace[g(t._0x47a176)].NICEST),n[g(t._0x2f723b)][o]=C})}function isPowerOfTwo(r){return(r&r-1)===0&&r!==0}var MaterialUtil={__proto__:null,register:register$3,registerOptsConver,registerClass,registerPropertyClass,createMaterialProperty,createMaterial,hasMaterial,toJSON,toJSONByType,addTextureUniform};const PointType={Control:1,MoveAll:2,AddMidPoint:3,MoveHeight:4,EditAttr:5,EditRotation:6},PointColor={Control:"rgba(28,25,125,0.99)",MoveAll:_0x5e32ae(3231),MoveHeight:_0x5e32ae(3434),EditAttr:"rgba(245,49,232,0.99)",AddMidPoint:"rgba(4,194,201,0.3)"};let defaultEditStyle={pixelSize:12,outline:!![],outlineColor:"rgba(255,255,255,0.5)",outlineWidth:2,scaleByDistance:new Cesium__namespace.NearFarScalar(1e3,1,1e6,.5),disableDepthTestDistance:Number[_0x5e32ae(1850)]};function setPointStyle(r){defaultEditStyle=merge(defaultEditStyle,r)}function getEditPointStyle(r){const e={_0xb4d6a0:4197,_0x5ba099:2092,_0x30a356:2492,_0x164dc6:3721},t=_0x5e32ae,i={...defaultEditStyle};switch(r){case PointType.AddMidPoint:i.color=PointColor.AddMidPoint,i.outlineColor="rgba(255,255,255,0.4)";break;case PointType[t(e._0xb4d6a0)]:i.color=PointColor[t(4197)];break;case PointType[t(3565)]:i[t(e._0x5ba099)]=PointColor.MoveHeight;break;case PointType.EditAttr:i.color=PointColor[t(e._0x30a356)];break;case PointType.Control:default:i.color=PointColor[t(e._0x164dc6)];break}return i}var DrawUtil={__proto__:null,PointType,PointColor,setPointStyle,getEditPointStyle};const TerrainType={NONE:"none",XYZ:"xyz",ARCGIS:_0x5e32ae(2505),ION:"ion",GEE:_0x5e32ae(3280),VR:"vr"};class GCJMercatorTilingScheme extends Cesium__namespace.WebMercatorTilingScheme{constructor(e){const t={_0x41a66b:1851,_0xdfa862:1644,_0x4b51dc:2475},i={_0x303d06:832,_0x1f1519:3026,_0xbd4481:1567,_0x3cfee2:1286},s={_0x2e659a:1286,_0x1a745b:1286},n=_0x5e32ae;super(e);const o=e[n(t._0x41a66b)],c=e.chinaCRS,_=getTransFun(o,c),l=getTransFun(c,o);if(_){const h=new Cesium__namespace[n(t._0xdfa862)];this[n(1362)][n(t._0x4b51dc)]=function(f,m){const g=n;return m=_([Cesium__namespace[g(s._0x2e659a)].toDegrees(f.longitude),Cesium__namespace[g(1286)][g(1984)](f.latitude)]),m=h.project(new Cesium__namespace.Cartographic(Cesium__namespace.Math.toRadians(m[0]),Cesium__namespace[g(s._0x1a745b)].toRadians(m[1]))),new Cesium__namespace[g(2497)](m.x,m.y)},this._projection.unproject=function(f,m){const g=n,C=h[g(i._0x303d06)](f);return m=l([Cesium__namespace.Math.toDegrees(C.longitude),Cesium__namespace.Math.toDegrees(C[g(3701)])]),new Cesium__namespace[g(i._0x1f1519)](Cesium__namespace.Math[g(i._0xbd4481)](m[0]),Cesium__namespace[g(i._0x3cfee2)].toRadians(m[1]))}}}}const LayerClass={};function register$2(r,e){const t={_0x38e654:3640},i=_0x5e32ae;LayerClass[r]&&logError$1("register: "+r+"类型已存在",e),LayerType[r]=r,LayerClass[r]=e,e[i(3205)]=r,e[i(2392)][i(t._0x38e654)]=r}function getClass$2(r){return LayerClass[r]}function create$2(r,e){const t=_0x5e32ae,i=getClass$2(r.type);if(i)return e&&(r.templateValues=e),new i(r);logWarn(t(1133),r)}function converOptions(r){const e={_0x18ffa9:1613,_0x1856c4:901,_0x369f4e:3005,_0x3c255e:1851,_0x45a8e8:3005,_0x15bea6:515,_0x5840a1:1323,_0x1757dd:3203,_0xfb6df3:1525,_0x4a6f41:1221,_0x528fd7:1525,_0x44594d:4006,_0x7c2e92:4006,_0x4c10dc:4006,_0x44950b:3024,_0x4be4a4:2645},t=_0x5e32ae,i={};for(const s in r){let n=r[s];if(n!=null)switch(s){case t(e._0x18ffa9):n=(n+"")[t(1895)](),n===CRS.EPSG4326||n==="4326"||n==="EPSG4326"?(i[t(e._0x18ffa9)]=CRS.EPSG4326,i[t(e._0x1856c4)]=new Cesium__namespace.GeographicTilingScheme({numberOfLevelZeroTilesX:r.numberOfLevelZeroTilesX||2,numberOfLevelZeroTilesY:r.numberOfLevelZeroTilesY||1})):n===CRS.EPSG4490||n==="4490"||n==="EPSG4490"?(i[t(e._0x18ffa9)]=CRS.EPSG4490,i[t(901)]=new Cesium__namespace.GeographicTilingScheme({numberOfLevelZeroTilesX:r[t(1103)]||2,numberOfLevelZeroTilesY:r.numberOfLevelZeroTilesY||1})):(i.crs=CRS.EPSG3857,i.tilingScheme=new Cesium__namespace.WebMercatorTilingScheme({numberOfLevelZeroTilesX:r.numberOfLevelZeroTilesX||1,numberOfLevelZeroTilesY:r.numberOfLevelZeroTilesY||1}));break;case t(e._0x369f4e):{r.mapChinaCRS!==r.chinaCRS&&(i.tilingScheme=new GCJMercatorTilingScheme({mapChinaCRS:r[t(e._0x3c255e)]||ChinaCRS.WGS84,chinaCRS:r[t(e._0x45a8e8)],numberOfLevelZeroTilesX:r.numberOfLevelZeroTilesX||1,numberOfLevelZeroTilesY:r.numberOfLevelZeroTilesY||1}));break}case t(1323):Cesium__namespace[t(e._0x15bea6)](n)&&Cesium__namespace.defined(n[t(3183)])&&Cesium__namespace.defined(n[t(2628)])&&Cesium__namespace.defined(n.ymin)&&Cesium__namespace.defined(n.ymax)?i.rectangle=Cesium__namespace.Rectangle.fromDegrees(n.xmin,n.ymin,n.xmax,n.ymax):n instanceof Cesium__namespace.Rectangle&&(i.rectangle=n);break;case t(1174):i[t(e._0x5840a1)]=Cesium__namespace.Rectangle[t(e._0x1757dd)](n[0],n[1],n[2],n[3]);break;default:i[s]=n;break}}return i.crs===CRS.EPSG4490&&i[t(1221)]&&(i.url=i.url[t(e._0xfb6df3)](/\{z\}/gm,"{z4490}"),i[t(e._0x4a6f41)]=i[t(e._0x4a6f41)][t(1525)](/\{arc_z\}/gm,"{arc_z4490}"),i.url=i[t(1221)][t(e._0x528fd7)](/\{arc_Z\}/gm,"{arc_Z4490}")),r[t(894)]&&(i.url=i.url.replace(/\{y\}/gm,"{reverseY}")),Cesium__namespace.defined(r.minimumTerrainLevel)&&Cesium__namespace.defined(r.minimumLevel)&&r[t(e._0x44594d)]<r.minimumLevel&&(i.minimumTerrainLevel=r.minimumLevel),Cesium__namespace.defined(r.maximumTerrainLevel)&&Cesium__namespace[t(515)](r.maximumLevel)&&r.maximumTerrainLevel>r.maximumLevel&&(i.maximumTerrainLevel=r.maximumLevel),!Cesium__namespace[t(515)](r[t(e._0x7c2e92)])&&Cesium__namespace[t(515)](r.minimumLevel)&&r.minimumLevel>0&&(i[t(e._0x4c10dc)]=r[t(e._0x44950b)]),i.url&&(r.queryParameters||r[t(e._0x4be4a4)]||r.headers||r.proxy)&&(i.url=getUrlResource(i)),i}const ImageryProviderClass={};function registerImageryProvider(r,e){ImageryProviderClass[r]&&logError$1("registerImageryProvider: "+r+"类型已存在"),ImageryProviderClass[r]=e}function getProviderClass(r){return ImageryProviderClass[r]}async function createImageryProvider$k(r){const e={_0x5d9f43:3798},t=_0x5e32ae,i=getProviderClass(r[t(3205)]);if(i){const s=new i(r);return!s[t(e._0x5d9f43)]&&(s.options=r),Cesium__namespace.defined(r.invertColor)&&(s.invertColor=r.invertColor),Cesium__namespace[t(515)](r.filterColor)&&(s[t(843)]=getCesiumColor(r.filterColor)),s}else logWarn("createImageryProvider：存在未识别的图层",r)}function getImageryProviderViewModels(r,e){const t={_0x1c4549:4310,_0x1c53c8:3402,_0x3b9a94:3759},i=_0x5e32ae,s=[];let n=-1;for(let o=0;o<r.length;o++){const c=r[o];c.type==="group"&&c[i(t._0x1c4549)]==null||(e&&(c.templateValues=e),c[i(575)]?n=s[i(t._0x1c53c8)]:delete c.show,s[i(t._0x3b9a94)](createProviderViewModel(c,o)))}return{imageryProviderViewModels:s,selectedIndex:n}}function createProviderViewModel(_0x5e5fc3,_0x58ded0){const _0x3ea46d={_0x4ced34:2596},_0x2c28ee=_0x5e32ae;window._temp_mars3d_createImageryProvider=createImageryProvider$k;const _0x24f125="window._temp_mars3d_basemaps"+_0x58ded0;return new Function(`
    `+_0x24f125+` = function (item) {
      item = item || `+JSON.stringify(getAttrVal(_0x5e5fc3,{onlySimpleType:!![]}))+`;
      if (item.type === "group") {
        const arrVec = []
        for (let index = 0; index < item.layers.length; index++) {
          const item2 = item.layers[index]
          if (item.templateValues) {
            item2.templateValues = item.templateValues
          }
          const temp = window._temp_mars3d_createImageryProvider(item2)
          if (temp == null) {
            continue
          }
          arrVec.push(temp)
        }
        return arrVec
      } else {
        return window._temp_mars3d_createImageryProvider(item)
      }
    }`)(),new Cesium__namespace[_0x2c28ee(3424)]({name:_0x5e5fc3.name||"",tooltip:_0x5e5fc3.name||"",iconUrl:_0x5e5fc3[_0x2c28ee(_0x3ea46d._0x4ced34)]||"",category:_0x5e5fc3.category||"",creationFunction:eval(_0x24f125),marsOptions:{layerId:_0x5e5fc3.id}})}const _ellipsoid=new Cesium__namespace[_0x5e32ae(3838)]({ellipsoid:Cesium__namespace[_0x5e32ae(2597)].WGS84});function getNoTerrainProvider(){return _ellipsoid}const TerrainProviderClass={};function registerTerrainProvider(r,e){const t=_0x5e32ae;TerrainProviderClass[r]&&logError$1(t(1153)+r+t(890)),TerrainProviderClass[r]=e}function getTerrainProviderClass(r){return TerrainProviderClass[r]}async function createTerrainProvider(r){const e={_0x673865:1032,_0x427c00:1677,_0x54696a:1032,_0x5d92c9:508,_0x54160d:2220,_0x58a75f:4262,_0x1b40f3:1339,_0x55b8af:3146},t=_0x5e32ae;r=r||{type:TerrainType[t(e._0x673865)]},r.type=r.type||TerrainType[t(e._0x427c00)],r.requestVertexNormals=r.requestVertexNormals??!![];let i;switch(r.type){case TerrainType.XYZ:case"terrain":{replaceOnlineUrlDomain(r);const s={...r};delete s.url,i=await Cesium__namespace.CesiumTerrainProvider.fromUrl(getUrlResource(r),s);break}case TerrainType.NONE:case"ellipsoid":i=_ellipsoid;break;case TerrainType[t(e._0x54696a)]:i=await Cesium__namespace[t(e._0x5d92c9)][t(e._0x54160d)](r.assetId??1,{requestWaterMask:r.requestWaterMask,requestVertexNormals:r.requestVertexNormals});break;case TerrainType.GEE:case"google":{const s=await Cesium__namespace.GoogleEarthEnterpriseMetadata.fromUrl(getUrlResource(r),r);i=await Cesium__namespace.GoogleEarthEnterpriseTerrainProvider.fromMetadata(s,r)}break;case TerrainType[t(e._0x58a75f)]:i=await Cesium__namespace[t(e._0x1b40f3)][t(e._0x55b8af)](getUrlResource(r),r);break;case TerrainType.VR:i=await Cesium__namespace.VRTheWorldTerrainProvider.fromUrl(getUrlResource(r),r);break;default:{const s=getTerrainProviderClass(r.type);s&&(s.fromUrl?i=await s.fromUrl(getUrlResource(r),r):i=new s(r))}break}return i}function getTerrainProviderViewModels(r){const e={_0xde4a1d:1280,_0x28eacd:3605,_0x45e996:1687,_0x1ae779:3444,_0x1d0e1d:1824},t={_0x1ba8da:614},i=_0x5e32ae;return r?[new Cesium__namespace.ProviderViewModel({name:i(e._0xde4a1d),iconUrl:Cesium__namespace.buildModuleUrl("Widgets/Images/TerrainProviders/Ellipsoid.png"),tooltip:"WGS84标准椭球，即 EPSG:4326",category:"",creationFunction:function(){return getNoTerrainProvider()}}),new Cesium__namespace.ProviderViewModel({name:r[i(e._0x28eacd)]||"有地形",iconUrl:Cesium__namespace[i(e._0x45e996)](i(e._0x1ae779)),tooltip:r[i(571)]||i(3019),category:"",creationFunction:function(){return createTerrainProvider(r)}})]:[new Cesium__namespace[i(3424)]({name:"无地形",iconUrl:Cesium__namespace.buildModuleUrl("Widgets/Images/TerrainProviders/Ellipsoid.png"),tooltip:"WGS84标准椭球，即 EPSG:4326",category:"",creationFunction:function(){return getNoTerrainProvider()}}),new Cesium__namespace.ProviderViewModel({name:i(e._0x1d0e1d),iconUrl:Cesium__namespace.buildModuleUrl("Widgets/Images/TerrainProviders/CesiumWorldTerrain.png"),tooltip:"Mar3D提供的12.5米精度的中国地形",category:"",creationFunction:function(){return createTerrainProvider({url:"//data.mars3d.cn/terrain"})}}),new Cesium__namespace.ProviderViewModel({name:"Ion 全球地形",iconUrl:Cesium__namespace.buildModuleUrl("Widgets/Images/TerrainProviders/CesiumWorldTerrain.png"),tooltip:"Cesium官方Ion提供的高分辨率全球地形",category:"",creationFunction:function(){return createTerrainProvider({type:i(t._0x1ba8da)})}}),new Cesium__namespace[i(3424)]({name:i(750),iconUrl:Cesium__namespace.buildModuleUrl("Widgets/Images/TerrainProviders/CesiumWorldTerrain.png"),tooltip:"arcgis官方提供的高分辨率全球地形",category:"",creationFunction:function(){return createTerrainProvider({type:"arcgis",url:"https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer"})}})]}var LayerUtil={__proto__:null,register:register$2,getClass:getClass$2,create:create$2,converOptions,registerImageryProvider,getProviderClass,createImageryProvider:createImageryProvider$k,getImageryProviderViewModels,getNoTerrainProvider,registerTerrainProvider,getTerrainProviderClass,createTerrainProvider,getTerrainProviderViewModels};const ControlClass={};function register$1(r,e){const t=_0x5e32ae;ControlClass[r]&&logError$1("register: "+r+"类型已存在",e),ControlType[r]=r,ControlClass[r]=e,e[t(3205)]=r,e[t(2392)]._type=r}function getClass$1(r){return ControlClass[r]}function create$1(r,e){const t=getClass$1(r);if(t)return new t(e)}var ControlUtil={__proto__:null,register:register$1,getClass:getClass$1,create:create$1};const EffectClass={};function register(r,e){const t={_0x33a0b7:890},i=_0x5e32ae;EffectClass[r]&&logError$1("register: "+r+i(t._0x33a0b7),e),EffectType[r]=r,EffectClass[r]=e,e.type=r,e.prototype._type=r}function getClass(r){return EffectClass[r]}function create(r,e){const t=getClass(r);if(t)return new t(e);logWarn("配置中的特效未处理",r,e)}var EffectUtil={__proto__:null,register,getClass,create};class BaseOptsConver{constructor(e={}){const t={_0x557a6f:3798},i=_0x5e32ae;this[i(t._0x557a6f)]=e}get excludedKeys(){return null}get[_0x5e32ae(891)](){return[_0x5e32ae(2092),"outlineColor","backgroundColor","strokeColor"]}toCesiumVal(e,t={}){const i={_0x48ef8c:891,_0x113e25:489},s=_0x5e32ae;this._toCesiumValBefore(e,t);for(const n in e){const o=e[n];if(this[s(i._0x48ef8c)].indexOf(n)===-1){if(!isSimpleType(o)){t[n]=o;continue}if(this.excludedKeys&&this[s(i._0x113e25)].indexOf(n)!==-1)continue}const c=this._toOneCesiumVal(n,o,e,t);c!=null&&(t[n]=c)}return this[s(1139)](e,t),t}_toCesiumValBefore(e,t){}_toCesiumValEnd(e,t){}_toOneCesiumVal(e,t,i,s){switch(e){default:s[e]=t;break}}toJSON(e,t={}){const i={_0x5d61b1:1622},s=_0x5e32ae;e=getAttrVal(e),this[s(i._0x5d61b1)]&&this._toJSONValBefore(t,e);for(const n in e){const o=e[n];isSimpleType(o)?t[n]=o:this._toOneJson(n,e[n],t)}return this[s(3711)]&&this[s(3711)](t,e),t}_toOneJson(e,t,i){}static getColorByStyle(e){const t={_0x4bca55:3780,_0x2d1ffa:4129},i=_0x5e32ae;return!this.baseOptsConver&&(this[i(t._0x4bca55)]=new BaseOptsConver),this[i(3780)][i(t._0x2d1ffa)](e)}getColorByStyle(e){const t={_0x41d74b:3798,_0x27eadb:2092},i=_0x5e32ae;return getColorByStyle(e,this[i(t._0x41d74b)][i(t._0x27eadb)])}getOutlineColorByStyle(e){const t={_0x30a007:3997,_0x19810d:515,_0x1829c6:1202},i=_0x5e32ae;let s;return e.outlineColor?isString(e.outlineColor)?s=Cesium__namespace.Color.fromCssColorString(e.outlineColor):s=e.outlineColor:s=this[i(3798)].outlineColor,s&&(Cesium__namespace.defined(e[i(t._0x30a007)])?s=s.withAlpha(Number(e.outlineOpacity)):Cesium__namespace.defined(e.opacity)&&(s=s.withAlpha(Number(e.opacity))),Cesium__namespace[i(t._0x19810d)](e.globalAlpha)&&e.globalAlpha!==1&&(s=s.withAlpha(s[i(t._0x1829c6)]*e[i(3252)])),s)}}class BaseMaterialConver extends BaseOptsConver{get excludedKeys(){const e={_0x55820f:736,_0x24c127:2071},t=_0x5e32ae;return[t(e._0x55820f)][t(3611)](this[t(e._0x24c127)]())}_getExcludedStyle(){return[]}static toCesiumVal(e,t){return!this[_0x5e32ae(2153)]&&(this.baseMaterialConver=new BaseMaterialConver),this.baseMaterialConver.toCesiumVal(e,t)}_toOneCesiumVal(e,t,i,s){const n={_0xf61a6c:2021,_0x4707d6:3486,_0xddfdd7:2487,_0xd485b1:515,_0x231c8b:3252,_0x332346:3485,_0x448e34:1386},o=_0x5e32ae;switch(e){case o(2092):case"randomColor":s.color=this.getColorByStyle(i);break;case"color2":case"bgColor":case o(n._0xf61a6c):case"evenColor":case o(3725):case"lightColor":case"darkColor":case"baseWaterColor":case"blendColor":case o(1074):case"strokeColor":case o(n._0x4707d6):case o(n._0xddfdd7):{let c=getCesiumColor(t);Cesium__namespace[o(n._0xd485b1)](i.opacity)&&i.opacity!==1&&(c=c.withAlpha(i.opacity)),Cesium__namespace[o(515)](i[o(n._0x231c8b)])&&i.globalAlpha!==1&&(c=c.withAlpha(c.alpha*i.globalAlpha)),s[e]=c;break}case o(n._0x332346):case"repeat_y":{const c=i.repeat_x??1,_=i.repeat_y??1;s.repeat=new Cesium__namespace.Cartesian2(c,_);break}case o(n._0x448e34):{i.materialType===Stripe||i.materialType===CylinderWave?s[e]=t:s[e]=new Cesium__namespace.Cartesian2(i.repeat_x||t,i.repeat_y||t);break}case o(4070):case"lineThickness":case"lineOffset":case"noiseScale":{s[e]=new Cesium__namespace.Cartesian2(t,t);break}case"orientation":{t?s[e]=Cesium__namespace.StripeOrientation[o(4052)]:s[e]=Cesium__namespace.StripeOrientation.HORIZONTAL;break}default:s[e]=t;break}}static toJSON(e,t){const i=_0x5e32ae;return!this.baseMaterialConver&&(this.baseMaterialConver=new BaseMaterialConver),this[i(2153)].toJSON(e,t)}[_0x5e32ae(3852)](e,t={}){const i={_0x37863f:515},s=_0x5e32ae;var n;if((n=e)!==null&&n!==void 0&&n.options){const o=e.options;for(const c in o)Cesium__namespace[s(i._0x37863f)](e[c])&&(o[c]=e[c]);e=o}return super.toJSON(e,t)}_toOneJson(e,t,i){const s={_0x29e1b3:3905,_0x153bc0:1074,_0x2c6696:1982},n=_0x5e32ae;if(t instanceof Cesium__namespace[n(2200)]){i[e]=t[n(3244)]();return}switch(e){case n(736):break;case"color":case"fillColor":case"outlineColor":case n(s._0x29e1b3):case n(3725):case n(2022):case"blendColor":case n(s._0x153bc0):case"strokeColor":case"backgroundColor":case n(2487):case n(1783):{const o=getCesiumColor(t);o&&(i[e]=o[n(3244)]());break}case"repeat":{t instanceof Cesium__namespace.Cartesian2?t.x!==t.y?(i[e+"_x"]=t.x,i[e+"_y"]=t.y):i[e]=t.x:i[e]=t;break}case"lineCount":case"lineThickness":case n(3980):case"noiseScale":{i[e+"_x"]=t.x,i[e+"_y"]=t.y;break}default:console[n(s._0x2c6696)](n(1795),e,t);break}}}registerOptsConver(_0x5e32ae(4255),BaseMaterialConver);class ColorOptsConver extends BaseMaterialConver{static toCesiumVal(e,t,i){const s={_0x31b11f:794,_0x1662e5:942,_0x36395b:1268},n=_0x5e32ae;return e instanceof Cesium__namespace.Color?e:(!this[n(794)]&&(this[n(794)]=new ColorOptsConver),this[n(s._0x31b11f)][n(s._0x1662e5)]=i,this.colorOptsConver[n(s._0x36395b)](e,t))}toCesiumVal(e){return this.isProperty?this.getColorByStyle(e):{color:this.getColorByStyle(e)}}static toJSON(e,t={},i=![]){const s={_0x226171:794},n=_0x5e32ae;return!this[n(s._0x226171)]&&(this.colorOptsConver=new ColorOptsConver),this[n(s._0x226171)].isProperty=i,this.colorOptsConver.toJSON(e,t)}toJSON(e,t={}){const i={_0x19e38a:3244},s=_0x5e32ae;var n;(n=e)!==null&&n!==void 0&&n.color&&(e=e.color);let o=getCesiumValue(e,Cesium__namespace.Color);return o.color&&(o=o[s(2092)]),o&&(o instanceof Cesium__namespace.Color?t.color=o[s(i._0x19e38a)]():isString(o)&&(t.color=o)),t}}registerOptsConver(Color$2,ColorOptsConver),registerOptsConver(PolylineArrow,ColorOptsConver);class ImageOptsConver extends BaseMaterialConver{get excludedKeys(){return["repeat_y"]}static[_0x5e32ae(1268)](e,t){return!this[_0x5e32ae(1684)]&&(this.imageOptsConver=new ImageOptsConver),this.imageOptsConver.toCesiumVal(e,t)}_toOneCesiumVal(e,t,i,s){const n={_0x3de375:1386,_0xc399cd:2497,_0x224d44:3485,_0x43c217:2200,_0x30b53f:3252},o=_0x5e32ae;switch(e){case"repeat_x":{const c=i.repeat_x??1,_=i.repeat_y??1;s[o(n._0x3de375)]=new Cesium__namespace[o(n._0xc399cd)](c,_);break}case"repeat":{s[e]=new Cesium__namespace.Cartesian2(i[o(n._0x224d44)]||t,i[o(779)]||t);break}case"color":break;case"opacity":Cesium__namespace.defined(i.globalAlpha)&&i.globalAlpha!==1?s.color=Cesium__namespace[o(n._0x43c217)][o(2995)].withAlpha(i[o(n._0x30b53f)]*(t??1)):i.transparent??!![]?s.color=Cesium__namespace.Color.WHITE.withAlpha(t??1):s.color=Cesium__namespace.Color.WHITE;break;default:s[e]=t;break}}_toCesiumValEnd(e,t){t.transparent=t.transparent??!![]}static toJSON(e,t){return!this.imageOptsConver&&(this.imageOptsConver=new ImageOptsConver),this.imageOptsConver.toJSON(e,t)}[_0x5e32ae(4230)](e,t,i){switch(e){case"repeat":{i.repeat_x=t.x,i.repeat_y=t.y;break}case"color":{var s;i.opacity=((s=getCesiumColor(t))===null||s===void 0?void 0:s.alpha)??1;break}default:console.log("未处理的属性",e,t);break}}}registerOptsConver(Image$1,ImageOptsConver);class BaseStyleConver extends BaseOptsConver{get excludedKeys(){const e={_0x360aaa:3997,_0x51f055:2755,_0x359f9c:3935,_0x27acf4:1335},t=_0x5e32ae;return["type","label",t(e._0x360aaa),t(e._0x51f055),"lineCount","lineThickness","cellAlpha","oddcolor","speed","axisY","image2","color2",t(e._0x359f9c),"scaleByDistance_nearValue",t(e._0x27acf4),"scaleByDistance_farValue","distanceDisplayCondition_far","distanceDisplayCondition_near"].concat(this[t(2071)]())}[_0x5e32ae(2071)](){return[]}_toCesiumValBefore(e,t){const i={_0x1f2e6b:3048},s=_0x5e32ae;if(!e.material&&!e[s(3793)]){var n;e.color||e[s(4166)]||(n=e[s(i._0x1f2e6b)])!==null&&n!==void 0&&n.color?e.materialType=Color$2:e.image&&(e[s(3793)]=Image$1)}}[_0x5e32ae(962)](e,t,i,s){const n={_0x148eb6:1850,_0xac48c7:1118,_0x5da532:438,_0x307dc1:1626,_0x20c5f1:3041},o=_0x5e32ae;switch(e){case"clampToGround":t?s.heightReference=Cesium__namespace[o(3728)].CLAMP_TO_GROUND:s[o(4091)]=Cesium__namespace.HeightReference.NONE;break;case"visibleDepth":t?s.disableDepthTestDistance=0:s.disableDepthTestDistance=Number[o(n._0x148eb6)];break;case"hasShadows":t?s.shadows=Cesium__namespace.ShadowMode.ENABLED:s.shadows=Cesium__namespace.ShadowMode[o(1207)];break;case"scaleByDistance":t?s.scaleByDistance=new Cesium__namespace.NearFarScalar(Number(Cesium__namespace.defaultValue(i[o(3935)],1e3)),Number(Cesium__namespace.defaultValue(i[o(3487)],1)),Number(Cesium__namespace.defaultValue(i.scaleByDistance_far,1e6)),Number(Cesium__namespace.defaultValue(i.scaleByDistance_farValue,.1))):s[o(n._0xac48c7)]=void 0;break;case"distanceDisplayCondition":t?s.distanceDisplayCondition=new Cesium__namespace[o(n._0x5da532)](Number(Cesium__namespace[o(n._0x307dc1)](i[o(3493)],0)),Number(Cesium__namespace[o(1626)](i[o(n._0x20c5f1)],Number.MAX_VALUE))):s.distanceDisplayCondition=void 0;break;default:s[e]=t;break}}_toOneCesiumVal_Poly(e,t,i,s){const n={_0x5ce335:3048,_0x2c473e:4129,_0x22a132:4193,_0x3e8068:841,_0x59c9c9:4234,_0x4d6829:3493,_0x377e03:3041,_0x4e457b:1430,_0x3bca80:3703,_0x24d0ca:3866},o=_0x5e32ae;switch(e){case"materialType":{this.isEntity?s.material=createMaterialProperty(i.materialType,i[o(3048)]||i):s[o(1877)]=createMaterial(i.materialType,i[o(n._0x5ce335)]||i);break}case o(2092):case o(4166):{s[o(2092)]=this[o(n._0x2c473e)](i);break}case"outlineColor":{s.outlineColor=this.getOutlineColorByStyle(i);break}case o(2024):t?s[o(n._0x22a132)]=Cesium__namespace[o(n._0x3e8068)].ENABLED:s.shadows=Cesium__namespace[o(n._0x3e8068)].DISABLED;break;case"distanceDisplayCondition":t?this[o(n._0x59c9c9)]?s.distanceDisplayCondition=new Cesium__namespace[o(438)](Number(Cesium__namespace.defaultValue(i[o(n._0x4d6829)],0)),Number(Cesium__namespace.defaultValue(i[o(3041)],Number.MAX_VALUE))):s.distanceDisplayCondition=new Cesium__namespace.DistanceDisplayConditionGeometryInstanceAttribute(Number(Cesium__namespace[o(1626)](i[o(3493)],0)),Number(Cesium__namespace.defaultValue(i[o(n._0x377e03)],Number.MAX_VALUE))):s[o(n._0x4e457b)]=void 0;break;default:s[e]instanceof Cesium__namespace[o(n._0x3bca80)]?logWarn(o(n._0x24d0ca),e,t):s[e]=t;break}}[_0x5e32ae(3711)](e,t){}_toOneJson_Poly(e,t,i){const s={_0x3a2db9:1483,_0x5b206d:2092,_0xbe93a6:3493,_0x34ed11:1876},n=_0x5e32ae;switch(e){case"label":case"outlineStyle":case n(s._0x3a2db9):break;case n(1877):{toJSON(t,i);break}case"materialOptions":{i[e]=toJSONByType(i.materialType,t);break}case n(s._0x5b206d):{const o=getCesiumColor(t);o&&(i[e]=o.toCssColorString());break}case"outlineColor":{const o=getCesiumColor(t);o&&(i[e]=o[n(3244)]());break}case"rotation":i.rotationDegree=formatNum$1(Cesium__namespace.Math[n(1984)](t),2);break;case"stRotation":i.stRotationDegree=formatNum$1(Cesium__namespace.Math.toDegrees(t),2);break;case"shadows":{t===Cesium__namespace.ShadowMode.ENABLED?i.shadows=!![]:i[e]=t;break}case"distanceDisplayCondition":{i[n(s._0xbe93a6)]=t.near,i.distanceDisplayCondition_far=t[n(s._0x34ed11)];break}default:logWarn("未处理的属性",e,t);break}}_toOneJson_Point(e,t,i){const s={_0x49f4a8:736,_0x222794:2755,_0x4e2440:2021,_0x50b436:2279,_0x1e3baa:1118,_0x492541:1118,_0x1aed7f:3487},n=_0x5e32ae;switch(e){case n(s._0x49f4a8):case n(s._0x222794):case"highlight":break;case"material":{toJSON(t,i);break}case n(3048):{i[e]=toJSONByType(i.materialType,t);break}case"color":case"fillColor":case n(s._0x4e2440):case"backgroundColor":case"strokeColor":{const o=getCesiumColor(t);o&&(i[e]=o.toCssColorString());break}case"heightReference":{t===Cesium__namespace.HeightReference[n(3267)]&&(i[n(2825)]=!![]);break}case n(s._0x50b436):i.rotationDegree=formatNum$1(Cesium__namespace.Math.toDegrees(t),2);break;case"stRotation":i.stRotationDegree=formatNum$1(Cesium__namespace.Math.toDegrees(t),2);break;case"disableDepthTestDistance":{t===Number[n(1850)]?i[n(1931)]=![]:i.disableDepthTestDistance=t;break}case n(s._0x1e3baa):{i[n(s._0x492541)]=!![],i.scaleByDistance_near=t.near,i[n(s._0x1aed7f)]=t.nearValue,i.scaleByDistance_far=t.far,i[n(3441)]=t.farValue;break}case n(1430):{i.distanceDisplayCondition=!![],i[n(3493)]=t[n(1392)],i.distanceDisplayCondition_far=t.far;break}default:logWarn("未处理的属性",e,t);break}}}class BillboardStyleConver extends BaseStyleConver{_getExcludedStyle(){const e={_0x3c9be5:4198,_0x5654f1:2667},t=_0x5e32ae;return["outlineColor","backgroundColor","font_style","font_weight","font_size","font_family","backgroundOpacity",t(e._0x3c9be5),t(e._0x5654f1)]}static toCesiumVal(e,t,i){const s=_0x5e32ae;return!this.billboardStyleConver&&(this.billboardStyleConver=new BillboardStyleConver),this[s(3491)].isEntity=i,this[s(3491)].toCesiumVal(e,t)}[_0x5e32ae(4208)](e,t){const i={_0x275449:3034},s=_0x5e32ae;t.horizontalOrigin=t.horizontalOrigin??Cesium__namespace[s(3680)].CENTER,t.verticalOrigin=t[s(i._0x275449)]??Cesium__namespace[s(3680)].BOTTOM}_toOneCesiumVal(e,t,i,s){const n={_0xd0ab39:2995,_0x8e30aa:1003,_0x466221:2853,_0x4bf52f:2052,_0x4af024:515,_0x50cd93:962},o=_0x5e32ae;switch(e){case"color":{s.color=this[o(4129)](i);break}case"opacity":Cesium__namespace.defined(i.globalAlpha)&&i.globalAlpha!==1?s.color=Cesium__namespace[o(2200)][o(2995)].withAlpha(i.globalAlpha*(t??1)):s.color=Cesium__namespace.Color[o(n._0xd0ab39)].withAlpha(t??1);break;case o(n._0x8e30aa):s.rotation=Cesium__namespace.Math.toRadians(t);break;case"hasPixelOffset":!t&&(s[o(n._0x466221)]=new Cesium__namespace.Cartesian2(0,0));break;case"pixelOffsetX":case o(n._0x4bf52f):s.pixelOffset=new Cesium__namespace[o(2497)](i.pixelOffsetX||0,i.pixelOffsetY||0);break;case o(2853):Cesium__namespace[o(n._0x4af024)](t[0])&&Cesium__namespace[o(515)](t[1])?s.pixelOffset=new Cesium__namespace.Cartesian2(t[0],t[1]):s.pixelOffset=t;break;default:this[o(n._0x50cd93)](e,t,i,s);break}}static toJSON(e,t,i){const s={_0x560def:3852},n=_0x5e32ae;return!this.billboardStyleConver&&(this.billboardStyleConver=new BillboardStyleConver),this.billboardStyleConver.isEntity=i,this.billboardStyleConver[n(s._0x560def)](e,t)}[_0x5e32ae(4230)](e,t,i){switch(e){case"pixelOffset":{i.pixelOffsetX=t.x,i.pixelOffsetY=t.y;break}default:this._toOneJson_Point(e,t,i);break}}}class CloudStyleConver extends BaseStyleConver{static[_0x5e32ae(1268)](e,t){return!this.cloudStyleConver&&(this.cloudStyleConver=new CloudStyleConver),this.cloudStyleConver.toCesiumVal(e,t)}_toCesiumValBefore(e,t){}[_0x5e32ae(1519)](e,t,i,s){const n={_0x463dae:3787,_0x51f8be:3206,_0x428623:4037,_0x2e43bc:795},o=_0x5e32ae;switch(e){case"scaleX":case o(n._0x463dae):s[o(n._0x51f8be)]=new Cesium__namespace.Cartesian2(i[o(3245)]||1,i.scaleY||1);break;case o(n._0x428623):case o(795):case"maximumSizeZ":s.maximumSize=new Cesium__namespace.Cartesian3(i[o(4037)]||1,i[o(n._0x2e43bc)]||1,i.maximumSizeZ||1);break;default:this[o(962)](e,t,i,s);break}}static[_0x5e32ae(3852)](e,t){return!this.cloudStyleConver&&(this.cloudStyleConver=new CloudStyleConver),this.cloudStyleConver.toJSON(e,t)}_toOneJson(e,t,i){const s={_0x17c181:775,_0x1bcecb:1076},n=_0x5e32ae;switch(e){case"scale":i.scaleX=formatNum$1(t.x,2),i[n(3787)]=formatNum$1(t.y,2);break;case n(s._0x17c181):i.maximumSizeX=formatNum$1(t.x,2),i[n(795)]=formatNum$1(t.y,2),i[n(s._0x1bcecb)]=formatNum$1(t.z,2);break;default:this._toOneJson_Point(e,t,i);break}}}class BoxStyleConver extends BaseStyleConver{static toCesiumVal(e,t,i){const s={_0x1bd287:1268},n=_0x5e32ae;return!this[n(2077)]&&(this.boxStyleConver=new BoxStyleConver),this.boxStyleConver[n(4234)]=i,this.boxStyleConver[n(s._0x1bd287)](e,t)}[_0x5e32ae(2071)](){return[_0x5e32ae({_0x362f0d:3776}._0x362f0d),"dimensions_y","dimensions_z"]}_toOneCesiumVal(e,t,i,s){const n=_0x5e32ae;switch(e){case n(2021):{s[n(2021)]=this.getOutlineColorByStyle(i);break}case"dimensions_x":{const o=i.dimensions_x??100,c=i[n(434)]??100,_=i.dimensions_z??100;s[n(2535)]=new Cesium__namespace.Cartesian3(o,c,_);break}default:this._toOneCesiumVal_Poly(e,t,i,s);break}}static[_0x5e32ae(3852)](e,t,i){return!this.boxStyleConver&&(this.boxStyleConver=new BoxStyleConver),this.boxStyleConver.isEntity=i,this.boxStyleConver.toJSON(e,t)}[_0x5e32ae(4230)](e,t,i){const s=_0x5e32ae;switch(e){case"dimensions":{i.dimensions_x=t.x,i[s(434)]=t.y,i.dimensions_z=t.z;break}default:this._toOneJson_Poly(e,t,i);break}}}class CircleStyleConver extends BaseStyleConver{static toCesiumVal(e,t,i){const s={_0x1c0847:1837},n=_0x5e32ae;return!this.circleStyleConver&&(this.circleStyleConver=new CircleStyleConver),this.circleStyleConver.isEntity=i,this[n(s._0x1c0847)][n(1268)](e,t)}_toCesiumValBefore(e,t){const i={_0x5f4798:3865,_0x24f47f:2607},s=_0x5e32ae;super._toCesiumValBefore(e,t),e.clampToGround&&(e.hasOwnProperty(s(i._0x5f4798))&&delete e[s(i._0x5f4798)],e.hasOwnProperty(s(i._0x24f47f))&&delete e.extrudedHeight,e.hasOwnProperty("diffHeight")&&delete e.diffHeight),Cesium__namespace.defined(e.height)&&(e[s(2825)]=![])}_toOneCesiumVal(e,t,i,s){const n={_0x5ea74f:532,_0x6f63be:2279,_0x35c072:515,_0x216750:3136,_0x4661cf:3194,_0x442b75:4091,_0x38529a:3728,_0x2e3299:3267},o=_0x5e32ae;switch(e){case o(2279):s.rotation=t,!i.stRotation&&(s[o(n._0x5ea74f)]=s.rotation);break;case"rotationDegree":s[o(n._0x6f63be)]=Cesium__namespace.Math.toRadians(t),!i.stRotation&&(s.stRotation=s.rotation);break;case"stRotationDegree":s.stRotation=Cesium__namespace.Math.toRadians(t);break;case"height":s.height=t,i.diffHeight&&(s.extrudedHeight=Number(i.diffHeight)+Number(t));break;case"diffHeight":Cesium__namespace[o(n._0x35c072)](i.height)&&(s[o(2607)]=i.height+t);break;case"radius":this.isEntity?(s[o(1935)]=Number(t),s[o(n._0x216750)]=Number(t)):s[o(n._0x4661cf)]=Number(t);break;case"clampToGround":t?s[o(n._0x442b75)]=Cesium__namespace[o(n._0x38529a)][o(n._0x2e3299)]:s[o(n._0x442b75)]=Cesium__namespace.HeightReference.NONE;break;default:this._toOneCesiumVal_Poly(e,t,i,s);break}}static toJSON(e,t,i){return!this.circleStyleConver&&(this.circleStyleConver=new CircleStyleConver),this.circleStyleConver.isEntity=i,this.circleStyleConver.toJSON(e,t)}_toOneJson(e,t,i){switch(e){case"rotation":{i.rotationDegree=formatNum$1(Cesium__namespace.Math.toDegrees(t),1);break}case"stRotation":{i.stRotationDegree=formatNum$1(Cesium__namespace.Math.toDegrees(t),1);break}default:this._toOneJson_Poly(e,t,i);break}}}class CorridorStyleConver extends BaseStyleConver{static toCesiumVal(e,t,i){const s={_0x4adcc9:3903},n=_0x5e32ae;return!this[n(s._0x4adcc9)]&&(this[n(s._0x4adcc9)]=new CorridorStyleConver),this.corridorStyleConver.isEntity=i,this.corridorStyleConver.toCesiumVal(e,t)}_toCesiumValBefore(e,t){const i=_0x5e32ae;super._toCesiumValBefore(e,t),e.clampToGround&&(e.hasOwnProperty("height")&&delete e.height,e.hasOwnProperty(i(2607))&&delete e.extrudedHeight,e.hasOwnProperty("diffHeight")&&delete e.diffHeight)}[_0x5e32ae(1519)](e,t,i,s){const n={_0x5357bb:2021,_0x3bf7d7:3865},o=_0x5e32ae;switch(e){case o(n._0x5357bb):{s[o(2021)]=this.getOutlineColorByStyle(i);break}case o(3865):s.height=t,i.diffHeight&&(s[o(2607)]=Number(i.diffHeight)+Number(t));break;case"diffHeight":Cesium__namespace[o(515)](i[o(n._0x3bf7d7)])&&(s.extrudedHeight=i.height+t);break;default:this._toOneCesiumVal_Poly(e,t,i,s);break}}static toJSON(e,t,i){const s={_0x2c0522:3903},n=_0x5e32ae;return!this.corridorStyleConver&&(this.corridorStyleConver=new CorridorStyleConver),this[n(s._0x2c0522)].isEntity=i,this.corridorStyleConver.toJSON(e,t)}_toOneJson(e,t,i){this[_0x5e32ae({_0xbda052:1942}._0xbda052)](e,t,i)}}class CylinderStyleConver extends BaseStyleConver{static[_0x5e32ae(1268)](e,t,i){const s={_0x56cc7d:2526},n=_0x5e32ae;return!this[n(2526)]&&(this.cylinderStyleConver=new CylinderStyleConver),this[n(s._0x56cc7d)].isEntity=i,this[n(2526)].toCesiumVal(e,t)}_toCesiumValBefore(e,t){const i=_0x5e32ae;super._toCesiumValBefore(e,t),!e[i(4307)]&&(e.topRadius=0)}_toOneCesiumVal(e,t,i,s){const n={_0x3a290a:1367},o=_0x5e32ae;switch(e){case"diffHeight":s.length instanceof Cesium__namespace.CallbackProperty||(s.length=Number(t));break;default:this[o(n._0x3a290a)](e,t,i,s);break}}static[_0x5e32ae(3852)](e,t,i){const s={_0x2e1bbd:2526},n=_0x5e32ae;return!this.cylinderStyleConver&&(this.cylinderStyleConver=new CylinderStyleConver),this.cylinderStyleConver.isEntity=i,this[n(s._0x2e1bbd)].toJSON(e,t)}[_0x5e32ae(4230)](e,t,i){this._toOneJson_Poly(e,t,i)}}class DivGraphicStyleConver extends BaseStyleConver{static toCesiumVal(e,t){const i={_0x48dc3f:3423},s=_0x5e32ae;return!this.divGraphicStyleConver&&(this.divGraphicStyleConver=new DivGraphicStyleConver),this[s(i._0x48dc3f)].toCesiumVal(e,t)}_toCesiumValBefore(e,t){}_toOneCesiumVal(e,t,i,s){this._toOneCesiumVal_Point(e,t,i,s)}static[_0x5e32ae(3852)](e,t){return!this.divGraphicStyleConver&&(this.divGraphicStyleConver=new DivGraphicStyleConver),this.divGraphicStyleConver.toJSON(e,t)}_toOneJson(e,t,i){this._toOneJson_Point(e,t,i)}}class EllipsoidStyleConver extends BaseStyleConver{static toCesiumVal(e,t,i){return!this.ellipsoidStyleConver&&(this.ellipsoidStyleConver=new EllipsoidStyleConver),this.ellipsoidStyleConver.isEntity=i,this.ellipsoidStyleConver.toCesiumVal(e,t)}_toCesiumValBefore(e,t){const i=_0x5e32ae;super[i(4208)](e,t)}_getExcludedStyle(){return["radii_y","radii_z","innerRadii_y","innerRadii_z"]}_toOneCesiumVal(e,t,i,s){const n={_0x2b0e77:2137,_0x2f5115:2537,_0x2973c4:3916,_0x3dd424:1978,_0x7bf794:1675,_0xe1883:1525},o=_0x5e32ae;switch(e){case o(2137):s[o(n._0x2b0e77)]=new Cesium__namespace.Cartesian3(t,t,t);break;case"radii_x":s.radii=new Cesium__namespace[o(3916)](i.radii_x??100,i.radii_y??100,i[o(n._0x2f5115)]??100);break;case"innerRadii":s.innerRadii=new Cesium__namespace[o(n._0x2973c4)](t,t,t);break;case"innerRadii_x":i[o(3428)]>0&&i[o(n._0x3dd424)]>0&&i[o(1658)]>0?s[o(2349)]=new Cesium__namespace.Cartesian3(i[o(3428)]??0,i.innerRadii_y??0,i.innerRadii_z??0):s[o(2349)]=new Cesium__namespace.Cartesian3(.001,.001,.001);break;case"minimumClockDegree":case"maximumClockDegree":case o(n._0x7bf794):case o(561):s[e[o(n._0xe1883)]("Degree","")]=Cesium__namespace.Math.toRadians(t||0);break;default:this[o(1367)](e,t,i,s);break}}static[_0x5e32ae(3852)](e,t,i){const s={_0x205847:2408},n=_0x5e32ae;return!this[n(s._0x205847)]&&(this[n(2408)]=new EllipsoidStyleConver),this.ellipsoidStyleConver.isEntity=i,this.ellipsoidStyleConver[n(3852)](e,t)}_toOneJson(e,t,i){const s={_0x6020f9:1811,_0x9425b3:3428},n=_0x5e32ae;switch(e){case"radii":{i.radii_x=t.x,i[n(s._0x6020f9)]=t.y,i.radii_z=t.z;break}case n(2349):{i[n(s._0x9425b3)]=t.x,i[n(1978)]=t.y,i.innerRadii_z=t.z;break}case"minimumClock":case"maximumClock":case"minimumCone":case"maximumCone":i[e+"Degree"]=formatNum$1(Cesium__namespace.Math.toDegrees(t),2);break;default:this._toOneJson_Poly(e,t,i);break}}}class LabelStyleConver extends BaseStyleConver{static[_0x5e32ae(1268)](e,t,i){const s=_0x5e32ae;return!this.labelStyleConver&&(this.labelStyleConver=new LabelStyleConver),this.labelStyleConver[s(1528)]=i,t=this.labelStyleConver.toCesiumVal(e,t),t}_toCesiumValBefore(e,t){t.horizontalOrigin=t.horizontalOrigin??Cesium__namespace.HorizontalOrigin.CENTER,t.verticalOrigin=t.verticalOrigin??Cesium__namespace.HorizontalOrigin.BOTTOM}_toCesiumValEnd(e,t){const i={_0x59dd66:3345,_0x25e656:4114},s=_0x5e32ae;!Cesium__namespace.defined(e.font)&&(t.font=(e.font_style||"")+" "+(e.font_weight||"")+" "+(e.font_size||18)+"px  "+(e[s(i._0x59dd66)]||"微软雅黑")),!Cesium__namespace.defined(e.style)&&(e.fill??!![])&&(e.outline?t.style=Cesium__namespace.LabelStyle[s(2815)]:t[s(i._0x25e656)]=Cesium__namespace[s(793)].FILL)}[_0x5e32ae(2071)](){const e={_0x2b1968:3538},t=_0x5e32ae;return["font_style",t(2467),t(3976),"font_family",t(e._0x2b1968),"fill"]}_toOneCesiumVal(e,t,i,s){const n={_0x43dbc1:3740,_0x23c382:1836,_0x3b9229:3776,_0x1af35a:2853,_0x53f01f:2497,_0x5d68c0:2853,_0x548e71:2853},o=_0x5e32ae;switch(e){case o(1260):{this.attr&&(t=template(t,this.attr,i.templateEmptyStr??!![])),s.text=String(t||"")[o(1525)](/<br \/>/gm,`
`);break}case"color":{s.fillColor=this.getColorByStyle(i);break}case"outlineColor":{s[o(2021)]=this[o(1358)](i);break}case o(3654):case"fillColor":{s[e]=getCesiumColor(t);break}case"background":s.background=t,s[o(n._0x43dbc1)]=t;break;case"backgroundColor":{let c=getCesiumColor(t,Cesium__namespace.Color[o(n._0x23c382)]);Cesium__namespace.defined(i.backgroundOpacity)?c=c.withAlpha(Number(i.backgroundOpacity)):Cesium__namespace.defined(i[o(n._0x3b9229)])&&(c=c.withAlpha(Number(i[o(3776)]))),s.backgroundColor=c;break}case"backgroundPadding":s.backgroundPadding=new Cesium__namespace[o(2497)](t*1.2,t),s.padding=t;break;case"hasPixelOffset":!t&&(s.pixelOffset=new Cesium__namespace.Cartesian2(0,0));break;case"pixelOffsetX":case"pixelOffsetY":s[o(n._0x1af35a)]=new Cesium__namespace[o(n._0x53f01f)](i.pixelOffsetX||0,i.pixelOffsetY||0);break;case o(n._0x1af35a):Cesium__namespace.defined(t[0])&&Cesium__namespace.defined(t[1])?s[o(n._0x5d68c0)]=new Cesium__namespace[o(n._0x53f01f)](t[0],t[1]):s[o(n._0x548e71)]=t;break;default:this._toOneCesiumVal_Point(e,t,i,s);break}}static toJSON(e,t){const i={_0x4246d1:3852},s=_0x5e32ae;return!this.labelStyleConver&&(this.labelStyleConver=new LabelStyleConver),this.labelStyleConver[s(i._0x4246d1)](e,t)}_toOneJson(e,t,i){const s={_0x2751cf:3513},n=_0x5e32ae;switch(e){case"pixelOffset":{i[n(s._0x2751cf)]=t.x,i.pixelOffsetY=t.y;break}case"disableDepthTestDistance":{t===Number.POSITIVE_INFINITY?i[n(1931)]=![]:i[n(951)]=t;break}default:this._toOneJson_Point(e,t,i);break}}static setOpacity(e,t){const i={_0x491208:1202,_0x556f36:906,_0x2805f4:2200,_0x34ada6:515,_0x445a1c:878,_0x9927e:3518},s=_0x5e32ae,n=getCesiumValue(e.fillColor,Cesium__namespace.Color);n?(!Cesium__namespace.defined(e[s(1317)])&&(e._fillColor_alpha_bak=n[s(i._0x491208)]??1),e[s(i._0x556f36)]=n.withAlpha(t*e._fillColor_alpha_bak)):e.fillColor=Cesium__namespace.Color.WHITE[s(3518)](t);const o=getCesiumValue(e[s(2021)],Cesium__namespace[s(i._0x2805f4)]);o&&(!Cesium__namespace[s(i._0x34ada6)](e._outlineColor_alpha_bak)&&(e[s(i._0x445a1c)]=o.alpha??1),e.outlineColor=o.withAlpha(t*e._outlineColor_alpha_bak));const c=getCesiumValue(e.backgroundColor,Cesium__namespace[s(2200)]);c&&(!Cesium__namespace.defined(e._backgroundColor_alpha_bak)&&(e[s(4065)]=c.alpha??1),e.backgroundColor=c[s(i._0x9927e)](t*e[s(4065)]))}}class ModelStyleConver extends BaseStyleConver{static toCesiumVal(e,t,i){const s={_0x542a7d:1268},n=_0x5e32ae;return!this[n(722)]&&(this.modelStyleConver=new ModelStyleConver),this.modelStyleConver.isEntity=i,this.modelStyleConver[n(s._0x542a7d)](e,t)}[_0x5e32ae(4208)](e,t){}[_0x5e32ae(2071)](){return["silhouette","silhouetteColor","silhouetteAlpha","silhouetteSize","fill",_0x5e32ae({_0xd0dd7:3776}._0xd0dd7)]}_toOneCesiumVal(e,t,i,s){const n=_0x5e32ae;switch(e){case"url":case"modelUrl":case n(2657):t=replaceOnlineUrlDomain({url:t}).url,this.isEntity?s.uri=t:s.url=t;break;case n(3206):!isNaN(t)&&(s[e]=t);break;default:this._toOneCesiumVal_Point(e,t,i,s);break}}_toCesiumValEnd(e,t){const i={_0x6b0d19:3518,_0x9ef3a0:3252,_0x18cd71:1202,_0x3d3978:1327},s=_0x5e32ae;if(t.show=!!(t[s(2657)]||t.url),e[s(4198)]?t.color=getColorByStyle(e,Cesium__namespace.Color.WHITE):Cesium__namespace.defined(e.opacity)&&e.opacity!==1?t.color=Cesium__namespace.Color.WHITE[s(i._0x6b0d19)](e[s(3776)]):t.color=Cesium__namespace.Color.WHITE,e.silhouette){let n=getCesiumColor(e.silhouetteColor,Cesium__namespace.Color[s(2995)]);Cesium__namespace.defined(e.silhouetteAlpha)&&(n=n.withAlpha(Number(e.silhouetteAlpha))),Cesium__namespace.defined(e.globalAlpha)&&e[s(i._0x9ef3a0)]!==1&&(n=n[s(3518)](n[s(i._0x18cd71)]*e.globalAlpha)),t[s(i._0x3d3978)]=n,t.silhouetteSize=Number(e.silhouetteSize||1)}else t.silhouetteColor=void 0,t.silhouetteSize=0}static toJSON(e,t,i){const s={_0x3248f6:722},n=_0x5e32ae;return!this.modelStyleConver&&(this.modelStyleConver=new ModelStyleConver),this[n(s._0x3248f6)].isEntity=i,this.modelStyleConver.toJSON(e,t)}_toOneJson(e,t,i){const s=_0x5e32ae;switch(e){case"uri":{i.url=t;break}default:this[s(4174)](e,t,i);break}}static setOpacity(e,t){const i={_0x2eeeb9:2092,_0x3d2064:2200,_0xd71668:1202,_0x342075:1577},s=_0x5e32ae,n=getCesiumValue(e[s(i._0x2eeeb9)],Cesium__namespace.Color);!Cesium__namespace.defined(e._color_alpha_bak)&&(e._color_alpha_bak=(n==null?void 0:n.alpha)??1),n?e[s(2092)]=n.withAlpha(t*e._color_alpha_bak):e.color=Cesium__namespace[s(i._0x3d2064)].WHITE[s(3518)](t);const o=getCesiumValue(e.silhouetteColor,Cesium__namespace.Color);o&&(!Cesium__namespace[s(515)](e._silhouetteColor_alpha_bak)&&(e._silhouetteColor_alpha_bak=o[s(i._0xd71668)]??1),e.silhouetteColor=o.withAlpha(t*e[s(i._0x342075)]))}}class PathStyleConver extends BaseStyleConver{static toCesiumVal(e,t,i){const s={_0x2a1a22:2196},n=_0x5e32ae;return!this.pathStyleConver&&(this.pathStyleConver=new PathStyleConver),this[n(s._0x2a1a22)].isEntity=i,this[n(2196)].toCesiumVal(e,t)}_toOneCesiumVal(e,t,i,s){this[_0x5e32ae(1367)](e,t,i,s)}static toJSON(e,t,i){return!this[_0x5e32ae(2196)]&&(this.pathStyleConver=new PathStyleConver),this.pathStyleConver.isEntity=i,this.pathStyleConver.toJSON(e,t)}_toOneJson(e,t,i){this._toOneJson_Poly(e,t,i)}}class PlaneStyleConver extends BaseStyleConver{static[_0x5e32ae(1268)](e,t,i){const s=_0x5e32ae;return!this.planeStyleConver&&(this.planeStyleConver=new PlaneStyleConver),this[s(4086)].isEntity=i,this.planeStyleConver.toCesiumVal(e,t)}[_0x5e32ae(4208)](e,t){super._toCesiumValBefore(e,t)}[_0x5e32ae(1519)](e,t,i,s){const n={_0x1c4ae0:588,_0x36e5dd:659},o=_0x5e32ae;switch(e){case"dimensions_x":{const c=i.dimensions_x??100,_=i.dimensions_y??100;s[o(2535)]=new Cesium__namespace[o(2497)](c,_);break}case o(n._0x1c4ae0):{let c;switch(t){case"x":c=Cesium__namespace.Cartesian3.UNIT_X;break;case"y":c=Cesium__namespace.Cartesian3.UNIT_Y;break;case"z":c=Cesium__namespace.Cartesian3.UNIT_Z;break;default:c=t;break}const _=i[o(2895)]??0;s[o(n._0x36e5dd)]=new Cesium__namespace.Plane(c,_);break}default:this._toOneCesiumVal_Poly(e,t,i,s);break}}static toJSON(e,t,i){const s={_0x32baa9:4234},n=_0x5e32ae;return!this.planeStyleConver&&(this.planeStyleConver=new PlaneStyleConver),this.planeStyleConver[n(s._0x32baa9)]=i,this.planeStyleConver[n(3852)](e,t)}static[_0x5e32ae(2807)](e,t,i){const s={_0x3d0be3:4086},n=_0x5e32ae;return!this.planeStyleConver&&(this.planeStyleConver=new PlaneStyleConver),this[n(s._0x3d0be3)]._toOneJson(e,t,i)}[_0x5e32ae(4230)](e,t,i){const s={_0x468069:2535,_0xc4b654:2620,_0x4c34f1:588},n=_0x5e32ae;switch(e){case n(s._0x468069):{i.dimensions_x=t.x,i.dimensions_y=t.y;break}case"plane_normal":{t.equals(Cesium__namespace.Cartesian3[n(s._0xc4b654)])?i.plane_normal="x":t.equals(Cesium__namespace.Cartesian3.UNIT_Y)?i.plane_normal="y":(t.equals(Cesium__namespace.Cartesian3.UNIT_Z)||logWarn("plane类型未识别",t),i.plane_normal="z");break}case"plane":{t.normal.equals(Cesium__namespace.Cartesian3.UNIT_X)?i.plane_normal="x":t.normal[n(2661)](Cesium__namespace.Cartesian3.UNIT_Y)?i.plane_normal="y":t.normal.equals(Cesium__namespace.Cartesian3.UNIT_Z)?i[n(s._0x4c34f1)]="z":(logWarn("plane类型未识别",t),i.plane_normal="z"),i[n(2895)]=t.distance;break}default:this._toOneJson_Poly(e,t,i);break}}}class PointStyleConver extends BaseStyleConver{static[_0x5e32ae(1268)](e,t,i){const s=_0x5e32ae;return!this.pointStyleConver&&(this.pointStyleConver=new PointStyleConver),this[s(819)].isEntity=i,this.pointStyleConver[s(1268)](e,t)}_toCesiumValBefore(e,t){t.pixelSize=6}_toCesiumValEnd(e,t){const i=_0x5e32ae;e.outline===![]&&(t[i(2605)]=0)}_toOneCesiumVal(e,t,i,s){const n={_0x5e88fd:4166,_0x2efb31:2021},o=_0x5e32ae;switch(e){case"color":case o(n._0x5e88fd):{s.color=this.getColorByStyle(i);break}case o(n._0x2efb31):{s.outlineColor=this.getOutlineColorByStyle(i);break}default:this._toOneCesiumVal_Point(e,t,i,s);break}}static[_0x5e32ae(3852)](e,t,i){const s=_0x5e32ae;return!this.pointStyleConver&&(this.pointStyleConver=new PointStyleConver),this[s(819)].isEntity=i,this.pointStyleConver.toJSON(e,t)}[_0x5e32ae(4230)](e,t,i){this._toOneJson_Point(e,t,i)}}class PolygonStyleConver extends BaseStyleConver{static toCesiumVal(e,t,i){const s=_0x5e32ae;return!this.polygonStyleConver&&(this.polygonStyleConver=new PolygonStyleConver),this.polygonStyleConver.isEntity=i,this.polygonStyleConver[s(1268)](e,t)}_toCesiumValBefore(e,t){const i=_0x5e32ae;super._toCesiumValBefore(e,t),e.clampToGround?(t[i(3826)]=Cesium__namespace.ArcType.GEODESIC,e.hasOwnProperty("height")&&delete e.height,e.hasOwnProperty("diffHeight")&&delete e.diffHeight,e.hasOwnProperty("extrudedHeight")&&delete e[i(2607)]):Cesium__namespace.defined(e.height)?(e.clampToGround=![],t[i(1933)]=![]):(e.clampToGround=![],t.perPositionHeight=!![])}_toOneCesiumVal(e,t,i,s){const n={_0x203917:2607,_0x2ff6a7:2825,_0x1388f6:1933,_0xe5dd15:532},o=_0x5e32ae;switch(e){case"outlineColor":{s.outlineColor=this.getOutlineColorByStyle(i);break}case"height":{s[e]=t,s.perPositionHeight=![];break}case"diffHeight":{Cesium__namespace.defined(i.height)&&(s[o(n._0x203917)]=i.height+t);break}case o(n._0x2ff6a7):s[e]=t,s[o(n._0x1388f6)]=!t&&!Cesium__namespace[o(515)](i.height);break;case o(532):s.stRotation=t;break;case o(1197):s[o(n._0xe5dd15)]=Cesium__namespace.Math.toRadians(t);break;default:this[o(1367)](e,t,i,s);break}}static toJSON(e,t,i){return!this[_0x5e32ae(3093)]&&(this.polygonStyleConver=new PolygonStyleConver),this.polygonStyleConver.isEntity=i,this.polygonStyleConver.toJSON(e,t)}_toOneJson(e,t,i){const s={_0x7d50ac:532},n=_0x5e32ae;switch(e){case n(s._0x7d50ac):{i[n(1197)]=formatNum$1(Cesium__namespace.Math.toDegrees(t),1);break}default:this[n(1942)](e,t,i);break}}}class PolylineStyleConver extends BaseStyleConver{static toCesiumVal(e,t,i){const s={_0x2282cd:1827},n=_0x5e32ae;return!this[n(s._0x2282cd)]&&(this.polylineStyleConver=new PolylineStyleConver),this.polylineStyleConver[n(4234)]=i,this.polylineStyleConver[n(1268)](e,t)}_toCesiumValBefore(e,t){const i={_0x2f9399:2825,_0xa22e69:3897,_0x57f7da:3626},s=_0x5e32ae;super._toCesiumValBefore(e,t),e[s(i._0x2f9399)]&&(t.arcType=Cesium__namespace[s(i._0xa22e69)][s(i._0x57f7da)]),e.materialType===Color$2&&e.outline&&e.outlineColor&&(e[s(3793)]=PolylineOutline)}_toOneCesiumVal(e,t,i,s){const n={_0x1a3600:4234},o=_0x5e32ae;switch(e){case"depthFail":if(t){let c=getCesiumColor(i.depthFailColor||i.color,Cesium__namespace.Color.YELLOW);Cesium__namespace.defined(i.depthFailOpacity)&&(c=c.withAlpha(Number(i.depthFailOpacity))),this.isEntity?s.depthFailMaterial=c:s.depthFailColor=c,i[o(3776)]===1&&(i[o(3776)]=.98)}else s.depthFailMaterial=void 0;s[e]=t;break;case"closure":!this[o(n._0x1a3600)]&&(s.loop=t),s.closure=t;break;default:this._toOneCesiumVal_Poly(e,t,i,s);break}}static toJSON(e,t,i){const s={_0x442b2e:4234},n=_0x5e32ae;return!this.polylineStyleConver&&(this.polylineStyleConver=new PolylineStyleConver),this.polylineStyleConver[n(s._0x442b2e)]=i,this[n(1827)].toJSON(e,t)}_toOneJson(e,t,i){switch(e){case"loop":i.closure=t;break;default:this._toOneJson_Poly(e,t,i);break}}}class PolylineVolumeStyleConver extends BaseStyleConver{static toCesiumVal(e,t,i){const s={_0x1d4579:3124},n=_0x5e32ae;return!this[n(3124)]&&(this.polylineVolumeStyleConver=new PolylineVolumeStyleConver),this[n(s._0x1d4579)].isEntity=i,this.polylineVolumeStyleConver.toCesiumVal(e,t)}_toCesiumValEnd(e,t){const i={_0x21b151:1059,_0x171ef7:3848,_0x355b45:3294},s=_0x5e32ae,n=e.shape||e[s(i._0x21b151)];switch(e.radius=e[s(3194)]||10,n){case s(i._0x171ef7):t.shape=PolylineVolumeStyleConver[s(3693)](e);break;case"circle":t.shape=PolylineVolumeStyleConver[s(i._0x355b45)](e);break;case"star":t.shape=PolylineVolumeStyleConver.getShapeForStar(e);break;default:t.shape=n;break}}[_0x5e32ae(1519)](e,t,i,s){this[_0x5e32ae({_0x23523b:1367}._0x23523b)](e,t,i,s)}static toJSON(e,t,i){return!this.polylineVolumeStyleConver&&(this.polylineVolumeStyleConver=new PolylineVolumeStyleConver),this.polylineVolumeStyleConver.isEntity=i,this.polylineVolumeStyleConver.toJSON(e,t)}_toOneJson(e,t,i){this._toOneJson_Poly(e,t,i)}static getShapeForPipeline(e){const t={_0x3c75cd:4057,_0xbe1a9e:2219,_0xb7562e:4121,_0x2af456:772,_0x4f7669:442},i=_0x5e32ae,s=e.radius??1,n=e[i(t._0x3c75cd)]??s/3,o=Math.ceil(360/(e[i(t._0xbe1a9e)]??60)),c=e.startAngle??0,_=e[i(t._0xb7562e)]??c+360,l=e[i(t._0x2af456)]??1,h=e.hscale??1,f=[];for(let m=c;m<=_;m+=o){const g=Cesium__namespace.Math.toRadians(m);f.push(new Cesium__namespace.Cartesian2(s*h*Math.cos(g),s*l*Math.sin(g)))}for(let m=_;m>=c;m-=o){const g=Cesium__namespace.Math.toRadians(m);f.push(new Cesium__namespace[i(2497)]((s-n)*h*Math[i(1784)](g),(s-n)*l*Math[i(t._0x4f7669)](g)))}return f}static getShapeForCircle(e){const t={_0x4926ea:3194,_0x531793:4121},i=_0x5e32ae,s=e[i(t._0x4926ea)]??1,n=Math.ceil(360/(e.slices??60)),o=e.startAngle??0,c=e[i(t._0x531793)]??o+360,_=e.vscale??1,l=e.hscale??1,h=[];for(let f=o;f<=c;f+=n){const m=Cesium__namespace.Math.toRadians(f);h.push(new Cesium__namespace.Cartesian2(s*l*Math.cos(m),s*_*Math.sin(m)))}return h}static getShapeForStar(e){const t={_0x159d65:3194,_0x425fe5:4057,_0x2580fe:1784},i=_0x5e32ae,s=e[i(t._0x159d65)]??1,n=s-(e[i(t._0x425fe5)]??s/3),o=e.slices??6,c=Cesium__namespace.Math[i(1567)](e.startAngle??0),_=Math.PI/o,l=2*o,h=new Array(l);for(let f=0;f<l;f++){const m=f%2===0?s:n,g=c+f*_;h[f]=new Cesium__namespace.Cartesian2(Math[i(t._0x2580fe)](g)*m,Math.sin(g)*m)}return h}}class RectangleStyleConver extends BaseStyleConver{static toCesiumVal(e,t,i){const s={_0x52b2ba:487},n=_0x5e32ae;return!this.rectangleStyleConver&&(this[n(s._0x52b2ba)]=new RectangleStyleConver),this[n(s._0x52b2ba)].isEntity=i,this.rectangleStyleConver.toCesiumVal(e,t)}_toCesiumValBefore(e,t){const i={_0x51db8c:2825},s=_0x5e32ae;super[s(4208)](e,t),e.clampToGround?(e.hasOwnProperty("height")&&delete e.height,e.hasOwnProperty("diffHeight")&&delete e.diffHeight,e.hasOwnProperty("extrudedHeight")&&delete e[s(2607)]):(e[s(i._0x51db8c)]=![],t.height=0)}[_0x5e32ae(1519)](e,t,i,s){const n={_0xac13c7:3865,_0x38c004:532,_0x5013c0:1367},o=_0x5e32ae;switch(e){case o(3865):s[o(3865)]=t,i[o(2999)]&&(s.extrudedHeight=Number(i.diffHeight)+Number(t));break;case o(2999):Cesium__namespace.defined(i[o(n._0xac13c7)])&&(s.extrudedHeight=i.height+t);break;case"rotation":s.rotation=t,!i.stRotation&&(s.stRotation=s.rotation);break;case"rotationDegree":s.rotation=Cesium__namespace.Math.toRadians(t),!i[o(n._0x38c004)]&&(s.stRotation=s.rotation);break;case o(532):s[o(532)]=t;break;case"stRotationDegree":s.stRotation=Cesium__namespace[o(1286)].toRadians(t);break;case"clampToGround":t?s.heightReference=Cesium__namespace.HeightReference.CLAMP_TO_GROUND:s.heightReference=Cesium__namespace.HeightReference.NONE;break;default:this[o(n._0x5013c0)](e,t,i,s);break}}static[_0x5e32ae(3852)](e,t,i){const s={_0x137262:487},n=_0x5e32ae;return!this.rectangleStyleConver&&(this[n(s._0x137262)]=new RectangleStyleConver),this.rectangleStyleConver[n(4234)]=i,this.rectangleStyleConver.toJSON(e,t)}_toOneJson(e,t,i){this._toOneJson_Poly(e,t,i)}}class RectangularSensorStyleConver extends BaseStyleConver{static toCesiumVal(e,t){const i={_0x6ff533:2827,_0x455520:4234,_0x10ea4b:2827},s=_0x5e32ae;return!this[s(i._0x6ff533)]&&(this.rectangularSensorStyleConver=new RectangularSensorStyleConver),this.rectangularSensorStyleConver[s(i._0x455520)]=!![],this[s(i._0x10ea4b)][s(1268)](e,t)}_toCesiumValBefore(e,t){super._toCesiumValBefore(e,t)}_getExcludedStyle(){return["lineOpacity",_0x5e32ae(1175)]}_toOneCesiumVal(e,t,i,s){const n={_0x5e8603:2441,_0x2a6208:3518,_0xf58f96:3776,_0x11cc02:3252,_0x575747:2200,_0x1527b9:515,_0x402bb5:3252,_0x554102:1009,_0x2533c4:3889,_0x3aa241:3248},o=_0x5e32ae;switch(e){case"lineColor":{let c=Cesium__namespace.Color.fromCssColorString(t||o(n._0x5e8603));Cesium__namespace.defined(i.lineOpacity)?c=c[o(n._0x2a6208)](Number(i.lineOpacity)):Cesium__namespace[o(515)](i.opacity)&&(c=c.withAlpha(Number(i[o(n._0xf58f96)]))),Cesium__namespace[o(515)](i.globalAlpha)&&i.globalAlpha!==1&&(c=c.withAlpha(c[o(1202)]*i[o(n._0x11cc02)])),s.lineColor=c;break}case"scanPlaneColor":{let c=Cesium__namespace[o(n._0x575747)][o(2451)](t||"#ffffff");Cesium__namespace[o(n._0x1527b9)](i.scanPlaneOpacity)?c=c.withAlpha(Number(i.scanPlaneOpacity)):Cesium__namespace[o(515)](i.opacity)&&(c=c.withAlpha(Number(i[o(3776)]))),Cesium__namespace[o(n._0x1527b9)](i[o(n._0x402bb5)])&&i.globalAlpha!==1&&(c=c.withAlpha(c.alpha*i.globalAlpha)),s[o(n._0x554102)]=c;break}case"xHalfAngleDegree":s.xHalfAngle=Cesium__namespace[o(1286)].toRadians(t);break;case o(n._0x2533c4):s[o(n._0x3aa241)]=Cesium__namespace.Math.toRadians(t);break;case"depthTest":s.showThroughEllipsoid=!t;break;default:this._toOneCesiumVal_Poly(e,t,i,s);break}}static[_0x5e32ae(3852)](e,t){const i={_0x491586:2827},s=_0x5e32ae;return!this.rectangularSensorStyleConver&&(this.rectangularSensorStyleConver=new RectangularSensorStyleConver),this.rectangularSensorStyleConver.isEntity=!![],this[s(i._0x491586)][s(3852)](e,t)}_toOneJson(e,t,i){this._toOneJson_Poly(e,t,i)}}class WallStyleConver extends BaseStyleConver{static toCesiumVal(e,t,i){const s=_0x5e32ae;return!this.wallStyleConver&&(this.wallStyleConver=new WallStyleConver),this.wallStyleConver.isEntity=i,this.wallStyleConver[s(1268)](e,t)}[_0x5e32ae(1519)](e,t,i,s){this[_0x5e32ae({_0x4b0981:1367}._0x4b0981)](e,t,i,s)}static toJSON(e,t,i){const s={_0x5961b6:2942,_0x54e1e7:4234,_0x4c7b29:3852},n=_0x5e32ae;return!this.wallStyleConver&&(this[n(2942)]=new WallStyleConver),this[n(s._0x5961b6)][n(s._0x54e1e7)]=i,this.wallStyleConver[n(s._0x4c7b29)](e,t)}_toOneJson(e,t,i){this._toOneJson_Poly(e,t,i)}}var czm_cellular=`
// Permutation polynomial: (34x^2 + x) mod 289
vec3 _czm_permute289(vec3 x) {
  return mod((34.0 * x + 1.0) * x, 289.0);
}

vec2 czm_cellular(vec2 P) {
  #define K 0.142857142857 // 1/7
  #define Ko 0.428571428571 // 3/7
  #define jitter 1.0 // Less gives more regular pattern
  vec2 Pi = mod(floor(P), 289.0);
  vec2 Pf = fract(P);
  vec3 oi = vec3(-1.0, 0.0, 1.0);
  vec3 of = vec3(-0.5, 0.5, 1.5);
  vec3 px = _czm_permute289(Pi.x + oi);
  vec3 p = _czm_permute289(px.x + Pi.y + oi); // p11, p12, p13
  vec3 ox = fract(p * K) - Ko;
  vec3 oy = mod(floor(p * K), 7.0) * K - Ko;
  vec3 dx = Pf.x + 0.5 + jitter * ox;
  vec3 dy = Pf.y - of + jitter * oy;
  vec3 d1 = dx * dx + dy * dy; // d11, d12 and d13, squared
  p = _czm_permute289(px.y + Pi.y + oi); // p21, p22, p23
  ox = fract(p * K) - Ko;
  oy = mod(floor(p * K), 7.0) * K - Ko;
  dx = Pf.x - 0.5 + jitter * ox;
  dy = Pf.y - of + jitter * oy;
  vec3 d2 = dx * dx + dy * dy; // d21, d22 and d23, squared
  p = _czm_permute289(px.z + Pi.y + oi); // p31, p32, p33
  ox = fract(p * K) - Ko;
  oy = mod(floor(p * K), 7.0) * K - Ko;
  dx = Pf.x - 1.5 + jitter * ox;
  dy = Pf.y - of + jitter * oy;
  vec3 d3 = dx * dx + dy * dy; // d31, d32 and d33, squared
    // Sort out the two smallest distances (F1, F2)
  vec3 d1a = min(d1, d2);
  d2 = max(d1, d2); // Swap to keep candidates for F2
  d2 = min(d2, d3); // neither F1 nor F2 are now in d3
  d1 = min(d1a, d2); // F1 is now in d1
  d2 = max(d1a, d2); // Swap to keep candidates for F2
  d1.xy = (d1.x < d1.y) ? d1.xy : d1.yx; // Swap if smaller
  d1.xz = (d1.x < d1.z) ? d1.xz : d1.zx; // F1 is in d1.x
  d1.yz = min(d1.yz, d2.yz); // F2 is now not in d2.yz
  d1.y = min(d1.y, d1.z); // nor in  d1.z
  d1.y = min(d1.y, d2.x); // F2 is in d1.y, we're done.
  return sqrt(d1.xy);
}
`,czm_snoise=_0x5e32ae(3028),LineDotDashMaterial=`uniform vec4 color;
uniform vec4 gapColor;
uniform float dashLength;
uniform float dashPattern;
in float v_polylineAngle;

const float maskLength = 16.0;

mat2 rotate(float rad) {
  float c = cos(rad);
  float s = sin(rad);
  return mat2(c, s, -s, c);
}

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);

  vec2 pos = rotate(v_polylineAngle) * gl_FragCoord.xy;

  float dashPosition = fract(pos.x / (dashLength * czm_pixelRatio));
  float maskIndex = floor(dashPosition * maskLength);
  float maskTest = floor(dashPattern / pow(2.0, maskIndex));

  vec4 fragColor = (mod(maskTest, 2.0) < 1.0) ? gapColor : color;
  if(fragColor.a < 0.005) {
    float dashPosition2 = fract(pos.x / (dashLength * 0.25 * czm_pixelRatio));
    float maskIndex2 = floor(dashPosition2 * maskLength);
    float maskTest2 = floor(dashPattern / pow(2.0, maskIndex2));
    fragColor = (mod(maskTest2, 2.0) < 1.0) ? gapColor : color;
    if(fragColor.a < 0.005) {
      discard;
    }
  }

  fragColor = czm_gammaCorrect(fragColor);
  material.emission = fragColor.rgb;
  material.alpha = fragColor.a;
  return material;
}
`,LineFlowMaterial=`uniform float globalAlpha;
uniform bool axisY;
uniform bool mixt;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = repeat * materialInput.st;

  vec4 colorImage;
  if(speed != 0.0) {
    float currTime;
    if(time < 0.0) {
      currTime = speed * czm_frameNumber / 1000.0;
    } else {
      currTime = time;
    }
    colorImage = texture(image, vec2(fract((axisY ? st.t : st.s) - currTime), st.t));
  } else {
    colorImage = texture(image, st);
  }

  if(color.a == 0.0) {
    if(colorImage.rgb == vec3(1.0)) {
      discard;
    }
  }

  if(color.rgb == vec3(1.0)) {
    material.alpha = colorImage.a * globalAlpha;
    material.diffuse = colorImage.rgb;
  } else {
    material.alpha = colorImage.a * color.a * globalAlpha;
    if(mixt)
      material.diffuse = max(colorImage.rgb * color.rgb * material.alpha * 3.0, colorImage.rgb * color.rgb);
    else
      material.diffuse = max(color.rgb * material.alpha * 3.0, color.rgb);
  }

  if(hasImage2) {
    vec4 colorBG = texture(image2, materialInput.st);
    if(colorBG.a > 0.5) {
      material.diffuse = color2.rgb;
    }
  }
  return material;
}
`,LineFlowColorMaterial=`uniform vec4 color;
uniform float speed;
uniform float startTime;
uniform float percent;
uniform float alpha;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  float t = fract(startTime + czm_frameNumber * speed / 1000.0);
  t *= (1.0 + percent);
  float alpha1 = smoothstep(t - percent, t, st.s) * step(-t, -st.s);
  alpha1 += alpha;
  material.diffuse = color.rgb;
  material.alpha = alpha1 * globalAlpha;
  return material;
}
`,ODLineMaterial=`uniform vec4 color;
uniform vec4 bgColor;
uniform float speed;
uniform float startTime;
uniform float bidirectional;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  float t = fract(startTime + czm_frameNumber * speed / 1000.0);

  t *= 1.03;
  float alpha0 = smoothstep(t - 0.03, t, st.s) * step(st.s, t);
  float mt = 1. - t;
  float alpha1 = smoothstep(mt + 0.03, mt, st.s) * step(mt, st.s);

  float a0 = step(abs(bidirectional - 0.0) - 0.001, 0.);
  float a1 = step(abs(bidirectional - 1.0) - 0.001, 0.);
  float db = step(abs(bidirectional - 2.0) - 0.001, 0.);
  float alpha = alpha0 * (a0 + db) + alpha1 * (a1 + db);
  alpha = clamp(alpha, 0., 1.);

  material.diffuse = color.rgb * alpha + bgColor.rgb * (1. - alpha);
  material.alpha = (color.a * alpha + bgColor.a * (1. - alpha)) * globalAlpha;

    // if (useImageAndRepeat.x != 0.) {
    //     float repeat = useImageAndRepeat.y;
    //     vec4 marsImageColor = texture(image, fract(vec2(fract((st.s-t)*repeat), st.t)));
    //     material.diffuse = marsImageColor.rgb;
    //     material.alpha = marsImageColor.a;
    // }

  return material;
}
`,LineFlickerMaterial=`uniform vec4 color;
uniform float speed;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  float time = fract(czm_frameNumber * speed / 1000.0);
  vec2 st = materialInput.st;
  float scalar = smoothstep(0.0, 1.0, time);
  material.diffuse = color.rgb * scalar;
  material.alpha = color.a * scalar * globalAlpha;
  return material;
}
`,LineTrailMaterial=_0x5e32ae(2759),LineBloomMaterial=`uniform vec4 color;
uniform float speed;
uniform float glow;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);

  vec2 st = materialInput.st;
  float t = fract(speed * czm_frameNumber / 1000.0);
  t *= 1.03;

  float alpha = smoothstep(t - 0.03, t, st.s) * step(-t, -st.s);
  alpha += 0.1;

  vec4 fragColor;
  fragColor.rgb = (color.rgb) / 0.5;
  fragColor = czm_gammaCorrect(fragColor);
  material.diffuse = fragColor.rgb;
  material.alpha = alpha * globalAlpha;
  material.emission = fragColor.rgb * glow;
  return material;
}
`,DigitalFlowMaterial=`uniform float globalAlpha;

float plot(float st, float pct) {
  return smoothstep(pct, pct, st) - smoothstep(pct, pct + 0.5, st);
}

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  float time2 = czm_frameNumber / speed;
  vec4 colorImage = texture(image, vec2(fract(st.s), fract(float(st.t * segment) - time2)));
  float percent = distance(st.y, .5) / 0.9;
  float distance = length(vec2(st.x, st.y));
  float pf = plot(distance, fract(czm_frameNumber / 200.0) * 10.);
  vec4 gradient = mix(vec4(1.0, 1.0, 1.0, 1.0), vec4(pf, pf, pf, 1.0), 0.8);
  float alpha = (colorImage.a * (1.0 - percent));
  vec3 diffuse = max(color.rgb * alpha * glow, color.rgb);

  if(flowGlow == 1.0) {
    vec4 rgba = mix(vec4(diffuse, alpha), gradient, pf);
    material.diffuse = rgba.rgb;
    material.alpha = rgba.a * globalAlpha;
  } else {
    material.diffuse = diffuse;
    material.alpha = alpha * globalAlpha;
  }
  return material;
}
`,LineThreeDashMaterial=`uniform vec4 color;
uniform float dashLength;
uniform float dashPattern;

uniform vec4 sidesColor;
uniform float sidesDashLength;
uniform float globalAlpha;

in float v_polylineAngle;

const float maskLength = 16.0;

mat2 rotate(float rad) {
  float c = cos(rad);
  float s = sin(rad);
  return mat2(c, s, -s, c);
}

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);

  vec2 pos = rotate(v_polylineAngle) * gl_FragCoord.xy;
  vec2 st = materialInput.st;

  float centerGlow = widthRatio / abs(st.t - 0.5) - (widthRatio / 0.5) - 1.0;
  if(centerGlow > 0.0) {
    float dashPosition = fract(pos.x / (dashLength * czm_pixelRatio));
    float maskIndex = floor(dashPosition * maskLength);
    float maskTest = floor(dashPattern / pow(2.0, maskIndex));
    if((mod(maskTest, 2.0) < 1.0)) {
      discard;
    }

    material.emission = color.rgb;
    material.alpha = color.a;
    return material;
  }

  float sidesGlow = (1.0 - sidesWidthRatio) / abs(st.t - 0.5) - ((1.0 - sidesWidthRatio) / 0.5) - 1.0;
  if(sidesGlow < 0.0) {
    float dashPosition = fract(pos.x / (sidesDashLength * czm_pixelRatio));
    float maskIndex = floor(dashPosition * maskLength);
    float maskTest = floor(dashPattern / pow(2.0, maskIndex));
    if((mod(maskTest, 2.0) < 1.0)) {
      discard;
    }

    material.emission = sidesColor.rgb;
    material.alpha = sidesColor.a* globalAlpha;
    return material;
  }

  discard;
}
`,WallScrollMaterial=`uniform sampler2D image;
uniform float speed;
uniform vec4 color;
uniform float count;
uniform bool axisY;
uniform bool reverse;
uniform bool bloom;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  float time = fract(czm_frameNumber * speed / 1000.0);

  vec4 colorImage;
  if(axisY) {
    if(reverse)
      colorImage = texture(image, vec2(fract(float(count) * st.s - time)));
    else
      colorImage = texture(image, vec2(fract(float(count) * st.s + time)));
  } else {
    if(reverse)
      colorImage = texture(image, vec2(fract(float(count) * st.t - time)));
    else
      colorImage = texture(image, vec2(fract(float(count) * st.t + time)));
  }

  float perDis = 1.0 / count / 3.0;
  material.alpha = colorImage.a * color.a * smoothstep(.2, 1., distance(st.t * perDis, 1. + perDis)) * globalAlpha;

  if(bloom) {
    //泛光
    vec4 fragColor;
    fragColor.rgb = (colorImage.rgb + color.rgb) / 1.0;
    fragColor = czm_gammaCorrect(fragColor);

    material.diffuse = colorImage.rgb;
    material.emission = fragColor.rgb;
  } else {
    material.diffuse = max(color.rgb * material.alpha * 1.5, color.rgb);
    material.emission = max(color.rgb * material.alpha * 1.5, color.rgb);
  }
  return material;
}
`,ScanLineMaterial=`uniform vec4 color;
uniform float globalAlpha;

float circle(vec2 uv, float r, float blur) {
  float d = length(uv) * 2.0;
  float c = smoothstep(r + blur, r, d);
  return c;
}

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st - .5;
  material.diffuse = color.rgb;
  material.emission = vec3(0);

  float t = fract(czm_frameNumber * speed / 1000.0);
  float s = 0.3;
  float radius1 = smoothstep(.0, s, t) * 0.9;
  float alpha1 = circle(st, radius1, 0.01) * circle(st, radius1, -0.01);
  float alpha2 = circle(st, radius1, 0.01 - radius1) * circle(st, radius1, 0.01);
  float radius2 = 0.5 + smoothstep(s, 1.0, t) * 0.5;
  float alpha3 = circle(st, radius1, radius2 + 0.01 - radius1) * circle(st, radius1, -0.01);

  material.alpha = smoothstep(1.0, s, t) * (alpha1 + alpha2 * 0.1 + alpha3 * 0.1);
  material.alpha *= color.a * globalAlpha;

  return material;
}
`,CircleScanMaterial=`uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  vec4 imgC = texture(image, st);
  if(imgC.a > .0) {
    material.diffuse = color.rgb;
  }
  material.alpha = imgC.a * color.a * globalAlpha;
  return material;
}
`,CircleWaveMaterial=`uniform float globalAlpha;
uniform vec4 color;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  material.diffuse = 1.5 * color.rgb;

  vec2 st = materialInput.st;
  float dis = distance(st, vec2(0.5, 0.5));
  float currTime;
  if(time < 0.0) {
    currTime = speed * czm_frameNumber / 1000.0;
  } else {
    currTime = time;
  }

  float per = fract(currTime);
  if(count == 1.0) {
    if(dis > per * 0.5) {
      discard;
    } else {
      material.alpha = color.a * dis / per / 2.0 * globalAlpha;
    }
  } else {
    vec3 str = materialInput.str;
    if(abs(str.z) > 0.001) {
      discard;
    }
    if(dis > 0.5) {
      discard;
    } else {
      float perDis = 0.5 / count;
      float disNum;
      float bl = 0.0;
      for(float i = 0.0; i <= 99.0; i+=1.0) {
        if(i <= count) {
          disNum = perDis * i - dis + per / count;
          if(disNum > 0.0) {
            if(disNum < perDis) {
              bl = 1.0 - disNum / perDis;
            } else if(disNum - perDis < perDis) {
              bl = 1.0 - abs(1.0 - disNum / perDis);
            }
            material.alpha = pow(bl, (1.0 + 10.0 * (1.0 - gradient))) * color.a * globalAlpha;
          }
        }
      }
    }
  }
  return material;
}
`,RadarLineMaterial=`uniform vec4 color;
uniform float speed;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st * 2.0 - 1.0;
  float t = czm_frameNumber * speed / 1000.0;
  vec3 col = vec3(0.0);
  vec2 p = vec2(sin(t), cos(t));
  float d = length(st - dot(p, st) * p);
  if(dot(st, p) < 0.) {
    d = length(st);
  }

  col = .006 / d * color.rgb;

  if(distance(st, vec2(0)) > 0.99) {
    col = color.rgb;
  }

  material.alpha = pow(length(col), 2.0) * globalAlpha;
  material.diffuse = col * 3.0;
  return material;
}
`,RadarWaveMaterial=`uniform vec4 color;
uniform float speed;
uniform float globalAlpha;

#define PI 3.14159265359

float rand(vec2 co) {
  return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  vec2 pos = st - vec2(0.5);
  float time = czm_frameNumber * speed / 1000.0;
  float r = length(pos);
  float t = atan(pos.y, pos.x) - time * 2.5;
  float a = (atan(sin(t), cos(t)) + PI) / (2.0 * PI);
  float ta = 0.5;
  float v = smoothstep(ta - 0.05, ta + 0.05, a) * smoothstep(ta + 0.05, ta - 0.05, a);
  vec3 flagColor = color.rgb * v;
  float blink = pow(sin(time * 1.5) * 0.5 + 0.5, 0.8);
  flagColor = color.rgb * pow(a, 8.0 * (.2 + blink)) * (sin(r * 500.0) * .5 + .5);
  flagColor = flagColor * pow(r, 0.4);
  material.alpha = length(flagColor) * 1.3 * globalAlpha;
  material.diffuse = flagColor * 3.0;
  return material;
}
`,RectSlideMaterial=_0x5e32ae(1010),EllipsoidElectricMaterial=_0x5e32ae(2148),EllipsoidWaveMaterial=`uniform vec4 color;
uniform float speed;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  float time = fract(czm_frameNumber * speed / 1000.0);
  float alpha = abs(smoothstep(0.5, 1., fract(-st.t - time)));
  alpha += .1;
  material.alpha = alpha * globalAlpha;
  material.diffuse = color.rgb;
  return material;
}
`,PolyGradientMaterial=_0x5e32ae(2559),AsphaltMaterial=`uniform vec4 color;
uniform float size;
uniform float frequency;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);

  // From Stefan Gustavson's Procedural Textures in GLSL in OpenGL Insights
  //Main cellular pattern
  vec4 color = color;
  vec2 st = materialInput.st;
  vec2 F = czm_cellular(st / size);
  color.rgb -= (F.x / F.y) * 0.1;

  //Extra bumps for frequency
  float noise = czm_snoise(st / size);
  noise = pow(noise, 5.0) * frequency;
  color.rgb += noise;

  material.diffuse = color.rgb;
  material.alpha = color.a * globalAlpha;

  return material;
}
`,BlobMaterial=`uniform vec4 evenColor;
uniform vec4 oddColor;
uniform float frequency;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);

  // From Stefan Gustavson's Procedural Textures in GLSL in OpenGL Insights
  vec2 F = czm_cellular(materialInput.st * frequency);
  float t = 1.0 - F.x * F.x;

  vec4 color = mix(evenColor, oddColor, t);
  material.diffuse = color.rgb;
  material.alpha = color.a * globalAlpha;

  return material;
}
`,FacetMaterial=_0x5e32ae(2862),PolyGrassMaterial=_0x5e32ae(2923),PolyWoodMaterial=`uniform vec4 evenColor;
uniform vec4 oddColor;
uniform float frequency;
uniform vec2 noiseScale;
uniform float grainFrequency;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);

  //Based on wood shader from OpenGL Shading Language (3rd edition) pg. 455
  vec2 st = materialInput.st;

  vec2 noisevec;
  noisevec.x = czm_snoise(st * noiseScale.x);
  noisevec.y = czm_snoise(st * noiseScale.y);

  vec2 location = st + noisevec;
  float dist = sqrt(location.x * location.x + location.y * location.y);
  dist *= frequency;

  float r = fract(dist + noisevec[0] + noisevec[1]) * 2.0;
  if(r > 1.0)
    r = 2.0 - r;

  vec4 color = mix(evenColor, oddColor, r);

  //streaks
  r = abs(czm_snoise(vec2(st.x * grainFrequency, st.y * grainFrequency * 0.02))) * 0.2;
  color.rgb += evenColor.rgb * r;

  material.diffuse = color.rgb;
  material.alpha = color.a * globalAlpha;

  return material;
}
`,ImageMaterial=`uniform sampler2D image;
uniform float opacity;
uniform vec4 color;
uniform float globalAlpha;
uniform bool flipx;
uniform bool flipy;
uniform bool noWhite;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  if(flipx){
    st.x = st.x + (0.5 - st.x) * 2.0;
  }
  if(flipy){
    st.y = st.y + (0.5 - st.y) * 2.0;
  }

  vec4 colorImage;
  if(speed != 0.0)
    colorImage = texture(image, vec2(fract(st.s + czm_frameNumber * speed / 1000.0), fract(st.t)));
  else
    colorImage = texture(image, st);

  if(noWhite && colorImage.rgb == vec3(1.0)) {
    discard;
  }
  material.alpha = colorImage.a * opacity * color.a * globalAlpha;
  material.diffuse = colorImage.rgb * color.rgb;
  return material;
}
`,WaterLightMaterial=`uniform float globalAlpha;

float time = 0.0;
mat2 m2 = mat2(0.80, 0.60, -0.60, 0.80);

mat2 mars3d_makem(in float theta) {
  float c = cos(theta);
  float s = sin(theta);
  return mat2(c, -s, s, c);
}

float noise(in vec2 x) {
  return texture(specularMap, x * .01).x;
}

float mars3d_fbm(in vec2 p) {
  float z = 2.;
  float rz = 0.;
  for(float i = 1.; i < 7.; i++) {
    rz += abs((noise(p) - 0.5) * 2.) / z;
    z = z * 2.;
    p = p * 2.;
    p *= m2;
  }
  return rz;
}

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 vUv = materialInput.st;
  time = czm_frameNumber / 200.0;
  vec2 p = 2. * vUv.xy - vec2(1., 1.);
  vec2 bp = p;

  #ifndef CENTERED
  p += 5.;
  p *= 30.;
  #endif
  float rb = mars3d_fbm(p * .5 + time * .17) * .1;
  rb = sqrt(rb);
  #ifndef CENTERED
  p *= mars3d_makem(rb * .2 + atan(p.y, p.x) * 1.);
  #else
  p *= mars3d_makem(rb * .2 + atan(p.y, p.x) * 2.);
  #endif

    //coloring
  float rz = mars3d_fbm(p * .9 - time * .7);
  rz *= dot(bp * 5., bp) + .5;
  rz *= sin(p.x * .5 + time * 4.) * 1.5;
  vec3 col = vec3(.04, 0.07, 0.45) / (.1 - rz);
  vec4 fragColor = vec4(sqrt(abs(col)), 1.0);
  material.alpha = fragColor.a * alpha * globalAlpha;
  material.diffuse = fragColor.rgb * .5;

    // cesium
  float frequency = 2000.0;
  float amplitude = 10.0;
  float fadeFactor = 1.0;
  vec4 mapColor = texture(normalMap, materialInput.st);
  float specularMapValue = texture(normalMap, materialInput.st).r;
  specularMapValue = 1.0;

  float fade = max(1.0, (length(materialInput.positionToEyeEC) / 10000000000.0) * frequency * fadeFactor);
  vec4 noise = czm_getWaterNoise(normalMap, materialInput.st * frequency, time, 0.0);
  vec3 normalTangentSpace = noise.xyz * vec3(1.0, 1.0, (1.0 / amplitude));
  normalTangentSpace.xy /= fade;
  normalTangentSpace = mix(vec3(0.0, 0.0, 50.0), normalTangentSpace, specularMapValue);
  normalTangentSpace = normalize(normalTangentSpace);

  float mars3dPerturbationRatio = clamp(dot(normalTangentSpace, vec3(0.0, 0.0, 0.1)), 0.0, 1.0);
  material.diffuse += (0.1 * mars3dPerturbationRatio);
  material.normal = normalize(materialInput.tangentToEyeMatrix * normalTangentSpace);
  material.specular = 0.5;
  material.shininess = 10.0;

  return material;
}
`,NeonLightMaterial=`uniform float globalAlpha;

float marsstepping(float t) {
  if(t < 0.)
    return -1. + pow(1. + t, 2.);
  else
    return 1. - pow(1. - t, 2.);
}

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 vUv = materialInput.st;
  vec2 uv = 2. * vUv.xy - vec2(1., 1.);

  uv *= 2.0;
  vec4 fragColor = vec4(0.);
  uv = normalize(uv) * length(uv);

  float time = czm_frameNumber / speed;
  for(float i = 0.0; i < 12.0; i+=1.0) {
    float t = time + i * 3.141592 / 12. * (5. + 1. * marsstepping(sin(time * 3.)));
    vec2 p = vec2(cos(t), sin(t));
    p *= cos(time + i * 3.141592 * cos(time / 8.));
    vec3 col = cos(vec3(0, 1, -1) * 3.141592 * 2. / 3. + 3.141925 * (time / 2. + i / 5.)) * 0.5 + 0.5;
    fragColor += vec4(0.05 / length(uv - p * 0.9) * col, 1.0);
  }
  fragColor.xyz = pow(fragColor.xyz, vec3(3.));
  fragColor.w = 1.0;

  vec4 baseColor = vec4(fragColor.rgb + color.rgb * 2.0, fragColor.r * 0.2);
  material.alpha = baseColor.a * globalAlpha;
  material.diffuse = baseColor.rgb;

  return material;
}
`;Cesium__namespace.ShaderSource[_0x5e32ae(927)][_0x5e32ae(4096)]=czm_cellular,Cesium__namespace.ShaderSource._czmBuiltinsAndUniforms[_0x5e32ae(994)]=czm_snoise,register$3(LineDotDash,{fabric:{uniforms:{color:new Cesium__namespace.Color(1,0,1,1),gapColor:new Cesium__namespace.Color(0,0,0,0),dashLength:16,dashPattern:255},source:LineDotDashMaterial},translucent:!![]}),register$3(LineFlow,{fabric:{uniforms:{image:Cesium__namespace.Material.DefaultImageId,color:new Cesium__namespace[_0x5e32ae(2200)](1,1,1,0),repeat:new Cesium__namespace.Cartesian2(1,1),axisY:![],mixt:![],speed:10,time:-1,hasImage2:![],image2:Cesium__namespace[_0x5e32ae(1423)].DefaultImageId,color2:new Cesium__namespace[_0x5e32ae(2200)](1,1,1),globalAlpha:1},source:LineFlowMaterial},translucent:!![]}),register$3(LineFlowColor,{fabric:{uniforms:{color:new Cesium__namespace.Color(1,0,0,.7),startTime:0,speed:2,percent:.04,alpha:.1,globalAlpha:1},source:LineFlowColorMaterial},translucent:!![]}),register$3(ODLine,{fabric:{uniforms:{color:new Cesium__namespace.Color(1,1,0,.7),startTime:0,speed:20,bgColor:new Cesium__namespace.Color(1,1,0,.1),bidirectional:0,globalAlpha:1},source:ODLineMaterial},translucent:!![]}),register$3(LineFlicker,{fabric:{uniforms:{color:new Cesium__namespace.Color(1,0,0,.7),speed:10,globalAlpha:1},source:LineFlickerMaterial},translucent:!![]}),register$3(LineTrail,{fabric:{uniforms:{color:new Cesium__namespace.Color(1,0,0,.7),bgColor:new Cesium__namespace.Color(0,0,0,0),speed:5,globalAlpha:1},source:LineTrailMaterial},translucent:!![]}),register$3(LineBloom,{fabric:{uniforms:{color:Cesium__namespace.Color.ORANGE,glow:1,speed:5,globalAlpha:1},source:LineBloomMaterial},translucent:!![]}),register$3(DigitalFlow,{fabric:{uniforms:{color:new Cesium__namespace[_0x5e32ae(2200)](0,0,0,.8),image:Cesium__namespace[_0x5e32ae(1423)].DefaultImageId,speed:10,glow:10,flowGlow:1,segment:3,globalAlpha:1},source:DigitalFlowMaterial},translucent:!![]}),register$3(LineThreeDash,{fabric:{uniforms:{color:Cesium__namespace.Color[_0x5e32ae(1039)],dashLength:64,widthRatio:.1,sidesColor:Cesium__namespace.Color.WHITE,sidesDashLength:32,sidesWidthRatio:.1,dashPattern:255,globalAlpha:1},source:LineThreeDashMaterial},translucent:!![]}),register$3(WallScroll,{fabric:{uniforms:{color:new Cesium__namespace.Color(0,0,0,1),image:Cesium__namespace.Material[_0x5e32ae(1838)],count:1,speed:5,reverse:![],axisY:![],bloom:![],globalAlpha:1},source:WallScrollMaterial},translucent:!![]}),register$3(ScanLine,{fabric:{uniforms:{color:new Cesium__namespace.Color(1,1,0,1),speed:10,globalAlpha:1},source:ScanLineMaterial},translucent:!![]}),register$3(CircleScan,{fabric:{uniforms:{color:new Cesium__namespace.Color(1,0,0,1),image:Cesium__namespace.Material.DefaultImageId,globalAlpha:1},source:CircleScanMaterial},translucent:!![]}),register$3(CircleWave,{fabric:{uniforms:{color:new Cesium__namespace.Color(1,1,0,1),speed:10,time:-1,count:1,gradient:.1,globalAlpha:1},source:CircleWaveMaterial},translucent:!![]}),register$3(RadarLine,{fabric:{uniforms:{color:new Cesium__namespace.Color(0,1,1,.7),speed:5,globalAlpha:1},source:RadarLineMaterial},translucent:!![]}),register$3(RadarWave,{fabric:{uniforms:{color:new Cesium__namespace[_0x5e32ae(2200)](0,1,1,.7),speed:5,globalAlpha:1},source:RadarWaveMaterial},translucent:!![]}),register$3(RectSlide,{fabric:{uniforms:{image:Cesium__namespace.Material[_0x5e32ae(1838)],color:Cesium__namespace[_0x5e32ae(2200)].WHITE,speed:10,pure:![],diffusePower:1.3,globalAlpha:1},source:RectSlideMaterial},translucent:!![]}),register$3(EllipsoidElectric,{fabric:{uniforms:{color:new Cesium__namespace[_0x5e32ae(2200)](0,1,1,.7),speed:5,globalAlpha:1},source:EllipsoidElectricMaterial},translucent:!![]}),register$3(EllipsoidWave,{fabric:{uniforms:{color:new Cesium__namespace.Color(0,1,1,.7),speed:5,globalAlpha:1},source:EllipsoidWaveMaterial},translucent:!![]}),register$3(PolyGradient,{fabric:{uniforms:{color:new Cesium__namespace.Color(1,1,0,.5),diffusePower:1.6,alphaPower:1.5,center:new Cesium__namespace.Cartesian2(.5,.5),globalAlpha:1},source:PolyGradientMaterial},translucent:!![]}),register$3(PolyAsphalt,{fabric:{uniforms:{color:new Cesium__namespace.Color(.15,.15,.15,1),size:.02,frequency:.2,globalAlpha:1},source:AsphaltMaterial},translucent:function(r){return r.uniforms.color.alpha<1}}),register$3(PolyBlob,{fabric:{uniforms:{evenColor:new Cesium__namespace[_0x5e32ae(2200)](1,1,1,.5),oddColor:new Cesium__namespace[_0x5e32ae(2200)](0,0,1,.5),frequency:10,globalAlpha:1},source:BlobMaterial},translucent:function(r){const e=_0x5e32ae,t=r[e(2221)];return t.evenColor[e(1202)]<1||t[e(3725)].alpha<0}}),register$3(PolyFacet,{fabric:{uniforms:{evenColor:new Cesium__namespace.Color(.25,.25,.25,.75),oddColor:new Cesium__namespace.Color(.75,.75,.75,.75),frequency:10,globalAlpha:1},source:FacetMaterial},translucent:function(r){const e={_0x42fc0e:1202},t=_0x5e32ae,i=r.uniforms;return i.evenColor[t(1202)]<1||i.oddColor[t(e._0x42fc0e)]<0}}),register$3(PolyGrass,{fabric:{uniforms:{evenColor:new Cesium__namespace.Color(.25,.4,.1,1),oddColor:new Cesium__namespace.Color(.1,.1,.1,1),frequency:1.5,globalAlpha:1},source:PolyGrassMaterial},translucent:function(r){const e={_0x89dbd4:2221,_0x6967eb:3905,_0x12b016:3725},t=_0x5e32ae,i=r[t(e._0x89dbd4)];return i[t(e._0x6967eb)].alpha<1||i[t(e._0x12b016)].alpha<1}}),register$3(PolyWood,{fabric:{uniforms:{evenColor:new Cesium__namespace.Color(.6,.3,.1,1),oddColor:new Cesium__namespace.Color(.4,.2,.07,1),frequency:3,noiseScale:new Cesium__namespace[_0x5e32ae(2497)](.7,.5),grainFrequency:27,globalAlpha:1},source:PolyWoodMaterial},translucent:function(r){const e={_0x429f45:2221},t=_0x5e32ae,i=r[t(e._0x429f45)];return i.evenColor[t(1202)]<1||i.oddColor.alpha<1}}),register$3(Image2,{fabric:{uniforms:{image:Cesium__namespace[_0x5e32ae(1423)].DefaultImageId,color:Cesium__namespace[_0x5e32ae(2200)].WHITE,opacity:1,speed:0,flipx:![],flipy:![],noWhite:!![],globalAlpha:1},source:ImageMaterial},translucent:!![]}),register$3(WaterLight,{fabric:{uniforms:{alpha:.3,specularMap:Cesium__namespace[_0x5e32ae(1423)].DefaultImageId,normalMap:Cesium__namespace.buildModuleUrl("Assets/Textures/waterNormals.jpg"),globalAlpha:1},source:WaterLightMaterial},translucent:!![]}),register$3(NeonLight,{fabric:{uniforms:{color:Cesium__namespace.Color[_0x5e32ae(2995)],speed:1,globalAlpha:1},source:NeonLightMaterial},translucent:!![]}),registerPropertyClass(Color$2,Cesium__namespace[_0x5e32ae(2430)]),registerPropertyClass(Image$1,Cesium__namespace.ImageMaterialProperty),registerPropertyClass(PolylineArrow,Cesium__namespace.PolylineArrowMaterialProperty),registerPropertyClass(PolylineOutline,Cesium__namespace.PolylineOutlineMaterialProperty),registerPropertyClass(PolylineDash,Cesium__namespace.PolylineDashMaterialProperty),registerPropertyClass(PolylineGlow,Cesium__namespace.PolylineGlowMaterialProperty),registerPropertyClass(Grid,Cesium__namespace.GridMaterialProperty),registerPropertyClass(Checkerboard,Cesium__namespace.CheckerboardMaterialProperty),registerPropertyClass(Stripe,Cesium__namespace.StripeMaterialProperty);class TextMaterial extends Cesium__namespace.Material{constructor(e={}){super(conventOptions$1(e))}}function conventOptions$1(r){const e={_0x2d3bc6:1260,_0x40d558:3976,_0xd74282:2200},t=_0x5e32ae,i=r[t(e._0x2d3bc6)];r[t(e._0x40d558)]=r.font_size||70;const s=LabelStyleConver.toCesiumVal(r,{fill:!![],fillColor:new Cesium__namespace[t(e._0xd74282)](1,1,0,1),textBaseline:"middle",padding:10}),n=getTextImage(i,s);let o;return n&&(o=n.toDataURL("image/png")),{fabric:{uniforms:{image:o,opacity:1,color:Cesium__namespace.Color.WHITE,speed:r.speed||0,flipx:![],flipy:![],noWhite:!![],globalAlpha:1},source:ImageMaterial},translucent:!![]}}registerClass(Text,TextMaterial);var CylinderWaveMaterialGlsl=`uniform vec4 color;
uniform float repeat;
uniform float offset;
uniform float thickness;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  float sp = 1.0 / repeat;
  vec2 st = materialInput.st;
  float dis = distance(st, vec2(0.5));
  float m = mod(dis + offset, sp);
  float a = step(sp * (1.0 - thickness), m);
  material.diffuse = color.rgb;
  material.alpha = a * color.a * globalAlpha;
  return material;
}
`;class CylinderWaveMaterial extends Cesium__namespace.Material{constructor(e={}){const t={_0x18ce86:2613},i={_0x5102d0:2438,_0x12fe4a:2850},s=_0x5e32ae;super(conventOptions(e)),this._frameTime=1e3/(e.frameRate||60),this[s(4247)]=e[s(t._0x18ce86)]??10;const n=this;let o=Date.now();(function c(){const _=s;n.animateFrame=window[_(i._0x5102d0)](c);const l=Date.now(),h=l-o;h>n._frameTime&&(o=l-h%n[_(i._0x12fe4a)],n.updateOffset())})()}updateOffset(){const e=_0x5e32ae;let t=this.uniforms.offset;t-=1e-4*this._speed,t>1&&(t=0),this[e(2221)][e(1406)]=t}[_0x5e32ae(757)](e){const t={_0xa9f926:757},i=_0x5e32ae;return window.cancelAnimationFrame(this.animateFrame),delete this.animateFrame,super[i(t._0xa9f926)](e)}}function conventOptions(r){const e={_0x15983d:2092},t=_0x5e32ae;return{fabric:{uniforms:{color:getCesiumColor(r.color,new Cesium__namespace[t(2200)](2,1,0,.8)),repeat:r.repeat??30,thickness:r.thickness??.3,offset:r.offset??0,globalAlpha:1},source:CylinderWaveMaterialGlsl},translucent:function(i){const s=t;return i.uniforms[s(e._0x15983d)].alpha<1}}}registerClass(CylinderWave,CylinderWaveMaterial);class BaseMaterialProperty{constructor(e={}){const t=_0x5e32ae;this.options=e,this[t(2001)]=new Cesium__namespace[t(2766)]}get[_0x5e32ae(4159)](){return!![]}get definitionChanged(){return this._definitionChanged}getType(e){return null}[_0x5e32ae(810)](e,t={}){return t}equals(e){return this===e}}class CircleScanMaterialProperty extends BaseMaterialProperty{constructor(e={}){super(e),this.image=e.image??e.url,this.color=e.color,this.globalAlpha=e.globalAlpha??1}getType(e){return CircleScan}getValue(e,t){const i=_0x5e32ae;return!Cesium__namespace.defined(t)&&(t={}),t[i(2092)]=getCesiumColor(this[i(2092)],new Cesium__namespace.Color(1,0,0,.5),e),t.image=this.image,t.globalAlpha=this.globalAlpha,t}equals(e){const t={_0x329d0b:2092},i=_0x5e32ae;return this===e||e instanceof CircleScanMaterialProperty&&Cesium__namespace.Property.equals(this.color,e[i(t._0x329d0b)])&&this.image===e.image}}registerPropertyClass(CircleScan,CircleScanMaterialProperty);class CircleWaveMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t=_0x5e32ae;super(e),this.color=e.color,this.speed=e.speed??10,this.duration=e.duration,this.count=e.count??1,this[t(2631)]=e.gradient??.1,this[t(3252)]=e.globalAlpha??1,this.count<=0&&(this[t(857)]=1),this.gradient<0&&(this.gradient=0),this[t(2631)]>1&&(this.gradient=1)}getType(e){return CircleWave}[_0x5e32ae(810)](e,t){const i={_0x4dc0f7:2092,_0x1c4c48:2631,_0x42661b:2613,_0x53f213:3252,_0x77ac04:1572,_0xdfe799:4017},s=_0x5e32ae;return!Cesium__namespace.defined(t)&&(t={}),t.color=getCesiumColor(this[s(i._0x4dc0f7)],Cesium__namespace.Color.YELLOW,e),t.count=this.count,t[s(i._0x1c4c48)]=this.gradient,t.speed=this[s(i._0x42661b)],t[s(i._0x53f213)]=this[s(3252)],this.duration?(this._time===void 0&&(this[s(2329)]=new Date().getTime()),t[s(i._0x77ac04)]=(new Date().getTime()-this._time)/(this[s(i._0xdfe799)]*1e3)):t.time=-1,t}[_0x5e32ae(2661)](e){const t={_0x18b8b4:2092},i=_0x5e32ae;return this===e||e instanceof CircleWaveMaterialProperty&&Cesium__namespace.Property.equals(this[i(t._0x18b8b4)],e[i(t._0x18b8b4)])&&this.count===e[i(857)]&&this.speed===e.speed&&this.gradient===e.gradient}}registerPropertyClass(CircleWave,CircleWaveMaterialProperty),register$3(CylinderWave,{fabric:{uniforms:{color:new Cesium__namespace[_0x5e32ae(2200)](2,1,0,.8),repeat:30,thickness:.3,offset:0,globalAlpha:1},source:CylinderWaveMaterialGlsl},translucent:!![]});class CylinderWaveMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t=_0x5e32ae;super(e),this.color=e.color,this.repeat=e[t(1386)]??30,this.thickness=e.thickness??.3,this.speed=e[t(2613)]??10,this.offset=0,this.globalAlpha=e.globalAlpha??1}getType(e){return CylinderWave}[_0x5e32ae(810)](e,t){const i={_0x199ab9:1406},s=_0x5e32ae;return!Cesium__namespace.defined(t)&&(t={}),this[s(1406)]-=1e-4*this.speed,this.offset>1&&(this.offset=0),t.color=getCesiumColor(this.color,new Cesium__namespace.Color(2,1,0,.8),e),t.repeat=this[s(1386)],t[s(1406)]=this[s(i._0x199ab9)],t.thickness=this.thickness,t[s(3252)]=this.globalAlpha,t}[_0x5e32ae(2661)](e){const t=_0x5e32ae;return this===e||e instanceof CylinderWaveMaterialProperty&&Cesium__namespace.Property.equals(this[t(2092)],e.color)&&this.repeat===e[t(1386)]&&this.thickness===e.thickness}}registerPropertyClass(CylinderWave,CylinderWaveMaterialProperty);class DigitalFlowMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x471fe5:2613},i=_0x5e32ae;super(e),this.color=getCesiumColor(e.color,new Cesium__namespace.Color(0,0,0,0)),this.speed=e[i(t._0x471fe5)]??5,this.glow=e[i(1138)]??1,this.flowGlow=e.flowGlow??1,this.segment=e.segment??3,this[i(3252)]=e[i(3252)]??1}getType(e){return DigitalFlow}getValue(e,t){const i={_0x384a1f:3377},s=_0x5e32ae;return!Cesium__namespace.defined(t)&&(t={}),t.color=this.color,t.speed=this.speed,t.glow=this.glow,t.flowGlow=this.flowGlow,t.segment=this[s(i._0x384a1f)],t.globalAlpha=this.globalAlpha,t}equals(e){const t={_0x282051:2092},i=_0x5e32ae;return this===e||e instanceof DigitalFlowMaterialProperty&&Cesium__namespace[i(2472)].equals(this[i(t._0x282051)],e.color)&&this[i(1138)]===e.glow&&this.speed===e.speed}}registerPropertyClass(DigitalFlow,DigitalFlowMaterialProperty);class EllipsoidElectricMaterialProperty extends BaseMaterialProperty{constructor(e={}){super(e),this.color=getCesiumColor(e.color,new Cesium__namespace.Color(0,0,0,0)),this.speed=e.speed??5,this.globalAlpha=e.globalAlpha??1}getType(e){return EllipsoidElectric}getValue(e,t){const i={_0x3587f1:2613,_0x3fe778:2613,_0x270397:3252},s=_0x5e32ae;return!Cesium__namespace.defined(t)&&(t={}),t.color=this.color,t[s(i._0x3587f1)]=this[s(i._0x3fe778)],t[s(i._0x270397)]=this.globalAlpha,t}equals(e){const t={_0x5137a5:2472},i=_0x5e32ae;return this===e||e instanceof EllipsoidElectricMaterialProperty&&Cesium__namespace[i(t._0x5137a5)].equals(this.color,e.color)&&this.speed===e.speed}}registerPropertyClass(EllipsoidElectric,EllipsoidElectricMaterialProperty);class EllipsoidWaveMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x3cc3f2:2092},i=_0x5e32ae;super(e),this.color=getCesiumColor(e[i(t._0x3cc3f2)],new Cesium__namespace.Color(0,0,0,0)),this.speed=e.speed??5,this.globalAlpha=e[i(3252)]??1}getType(e){return EllipsoidWave}getValue(e,t){const i={_0x3c957f:515,_0x362c32:2613},s=_0x5e32ae;return!Cesium__namespace[s(i._0x3c957f)](t)&&(t={}),t[s(2092)]=this.color,t[s(i._0x362c32)]=this.speed,t.globalAlpha=this.globalAlpha,t}equals(e){const t=_0x5e32ae;return this===e||e instanceof EllipsoidWaveMaterialProperty&&Cesium__namespace.Property[t(2661)](this.color,e[t(2092)])&&this.speed===e.speed}}registerPropertyClass(EllipsoidWave,EllipsoidWaveMaterialProperty);class Image2MaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x3645c0:513,_0x13b8d9:3776,_0x5e1b58:2092,_0x562a6e:2613,_0x4dff2f:2260,_0x42d53e:3252},i=_0x5e32ae;super(e),this.image=e[i(t._0x3645c0)],this.opacity=e[i(t._0x13b8d9)]??1,this.color=e[i(t._0x5e1b58)]??Cesium__namespace.Color[i(2995)],this[i(t._0x562a6e)]=e.speed??0,this[i(3195)]=e.flipx??![],this[i(t._0x4dff2f)]=e.flipy??![],this.noWhite=e.noWhite??!![],this[i(t._0x42d53e)]=e[i(3252)]??1}getType(e){return Image2}getValue(e,t){const i={_0x4d5a00:513,_0x151f50:3776,_0x2bbcdc:3195},s=_0x5e32ae;return!Cesium__namespace.defined(t)&&(t={}),t.image=this[s(i._0x4d5a00)],t.color=this[s(2092)],t.opacity=this[s(i._0x151f50)],t.speed=this.speed,t[s(i._0x2bbcdc)]=this.flipx,t.flipy=this[s(2260)],t.noWhite=this.noWhite,t.globalAlpha=this.globalAlpha,t}equals(e){const t={_0x2d964e:513},i=_0x5e32ae;return this===e||e instanceof Image2MaterialProperty&&Cesium__namespace.Property[i(2661)](this.color,e.color)&&this.opacity===e.opacity&&this.image===e[i(t._0x2d964e)]}}registerPropertyClass(Image2,Image2MaterialProperty);class LineBloomMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x23a1b9:2613},i=_0x5e32ae;super(e),this.color=getCesiumColor(e.color,new Cesium__namespace[i(2200)](0,0,0,0)),this[i(t._0x23a1b9)]=e.speed??5,this[i(1138)]=e.glow??1,this.globalAlpha=e.globalAlpha??1}getType(e){return LineBloom}getValue(e,t){const i=_0x5e32ae;return!Cesium__namespace.defined(t)&&(t={}),t.color=this.color,t.speed=this.speed,t.glow=this.glow,t.globalAlpha=this[i(3252)],t}equals(e){const t={_0x5ccb60:2613},i=_0x5e32ae;return this===e||e instanceof LineBloomMaterialProperty&&Cesium__namespace.Property.equals(this.color,e.color)&&this.glow===e.glow&&this[i(t._0x5ccb60)]===e.speed}}registerPropertyClass(LineBloom,LineBloomMaterialProperty);class LineFlickerMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0xb69efa:3252},i=_0x5e32ae;super(e),this[i(2092)]=e.color,this.speed=e.speed??2,this[i(3252)]=e[i(t._0xb69efa)]??1}getType(e){return LineFlicker}getValue(e,t){const i={_0x2b87ce:2200},s=_0x5e32ae;return!Cesium__namespace.defined(t)&&(t={}),t[s(2092)]=getCesiumColor(this.color,new Cesium__namespace[s(i._0x2b87ce)](0,0,0,0),e),t[s(2613)]=this[s(2613)],t.globalAlpha=this[s(3252)],t}[_0x5e32ae(2661)](e){const t=_0x5e32ae;return this===e||e instanceof LineFlickerMaterialProperty&&Cesium__namespace.Property.equals(this[t(2092)],e.color)&&this.speed===e.speed}}registerPropertyClass(LineFlicker,LineFlickerMaterialProperty);class LineFlowColorMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x3aa403:2092,_0x589e7a:2613,_0x3f960e:1202},i=_0x5e32ae;super(e),this[i(2092)]=e[i(t._0x3aa403)],this.speed=e[i(t._0x589e7a)]??2,this.percent=e.percent??.04,this[i(t._0x3f960e)]=e.alpha??.1,this.startTime=e.startTime??0,this.globalAlpha=e.globalAlpha??1}getType(e){return LineFlowColor}getValue(e,t){const i={_0xca2b84:3252},s=_0x5e32ae;return!Cesium__namespace.defined(t)&&(t={}),t.color=getCesiumColor(this[s(2092)],new Cesium__namespace.Color(1,0,0,1),e),t.speed=this.speed,t.percent=this.percent,t.alpha=this.alpha,t.startTime=this.startTime,t[s(3252)]=this[s(i._0xca2b84)],t}equals(e){const t={_0x52540e:2661,_0x14336a:3932},i=_0x5e32ae;return this===e||e instanceof LineFlowColorMaterialProperty&&Cesium__namespace.Property[i(t._0x52540e)](this[i(2092)],e.color)&&this.speed===e.speed&&this.percent===e.percent&&this.startTime===e[i(t._0x14336a)]&&this.alpha===e[i(1202)]}}registerPropertyClass(LineFlowColor,LineFlowColorMaterialProperty);class LineFlowMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x4be029:513},i=_0x5e32ae;super(e),this.image=e[i(t._0x4be029)]??e.url,this.color=e.color??new Cesium__namespace.Color(1,1,1,0),this.axisY=e.axisY??![],this[i(2228)]=e[i(2228)]??![],this.speed=e.speed??10,this[i(4017)]=e.duration,this.repeat=e.repeat??new Cesium__namespace.Cartesian2(1,1),this.image2=e.image2??e.bgUrl,this.color2=e.color2??e.bgColor??new Cesium__namespace.Color(1,1,1),this.hasImage2=Cesium__namespace.defined(this.image2),this.globalAlpha=e[i(3252)]??1}getType(e){return LineFlow}getValue(e,t){const i={_0x53826a:1683,_0x5042c0:2228,_0x32bbc7:2228,_0x51a6b0:2329,_0x15c5f6:4017,_0x4417c6:3269,_0x4223a1:2200},s=_0x5e32ae;return!Cesium__namespace.defined(t)&&(t={}),t.image=this.image,t[s(2092)]=getCesiumColor(this.color,new Cesium__namespace.Color(1,1,1,0),e),t.repeat=getCesiumValue(this.repeat,Cesium__namespace.Cartesian2,e),t.axisY=this[s(i._0x53826a)],t[s(i._0x5042c0)]=this[s(i._0x32bbc7)],t[s(2613)]=getCesiumValue(this.speed,Number,e),this.duration?(this._time===void 0&&(this[s(i._0x51a6b0)]=new Date().getTime()),t.time=(new Date().getTime()-this._time)/(this[s(i._0x15c5f6)]*1e3)):t.time=-1,t[s(3269)]=this[s(i._0x4417c6)],t.image2=this.image2,t[s(1737)]=getCesiumColor(this[s(1737)],new Cesium__namespace[s(i._0x4223a1)](1,1,1),e),t.globalAlpha=this[s(3252)],t}equals(e){const t={_0x5098a2:513,_0x2d55e0:1683},i=_0x5e32ae;return this===e||e instanceof LineFlowMaterialProperty&&Cesium__namespace[i(2472)].equals(this.color,e.color)&&Cesium__namespace.Property[i(2661)](this.repeat,e.repeat)&&this[i(t._0x5098a2)]===e.image&&this.axisY===e[i(t._0x2d55e0)]&&this[i(2613)]===e.speed&&this.hasImage2===e[i(3269)]&&this.image2===e.image2&&Cesium__namespace[i(2472)].equals(this.color2,e.color2)}}registerPropertyClass(LineFlow,LineFlowMaterialProperty);class LineTrailMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x2f7b59:2092},i=_0x5e32ae;super(e),this[i(t._0x2f7b59)]=getCesiumColor(e.color,new Cesium__namespace.Color(0,0,0,0)),this.bgColor=getCesiumColor(e.bgColor,this[i(2092)][i(3518)](.1)),this.speed=e.speed??2,this.globalAlpha=e.globalAlpha??1}getType(e){return LineTrail}getValue(e,t){const i={_0x1379c8:2613},s=_0x5e32ae;return!Cesium__namespace.defined(t)&&(t={}),t.color=this.color,t.bgColor=this[s(4032)],t[s(2613)]=this[s(i._0x1379c8)],t.globalAlpha=this.globalAlpha,t}equals(e){const t={_0x387e52:2092,_0x5e6fe3:2661},i=_0x5e32ae;return this===e||e instanceof LineTrailMaterialProperty&&Cesium__namespace.Property.equals(this[i(t._0x387e52)],e.color)&&Cesium__namespace.Property[i(t._0x5e6fe3)](this[i(4032)],e.bgColor)&&this.speed===e.speed}}registerPropertyClass(LineTrail,LineTrailMaterialProperty);class LineDotDashMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t=_0x5e32ae;super(e),this.color=getCesiumColor(e.color,new Cesium__namespace.Color(0,0,0,0)),this.gapColor=getCesiumColor(e.gapColor,Cesium__namespace[t(2200)].TRANSPARENT),this.dashLength=e.dashLength??16,this.dashPattern=e.dashPattern??255,this[t(3252)]=e.globalAlpha??1}getType(e){return LineDotDash}getValue(e,t){const i={_0x134978:1513,_0x33b64c:3252},s=_0x5e32ae;return!Cesium__namespace.defined(t)&&(t={}),t[s(2092)]=this.color,t.gapColor=this[s(1074)],t.dashLength=this.dashLength,t[s(i._0x134978)]=this.dashPattern,t[s(i._0x33b64c)]=this.globalAlpha,t}equals(e){const t={_0x6de5ad:2661,_0x4f5278:1513},i=_0x5e32ae;return this===e||e instanceof LineDotDashMaterialProperty&&Cesium__namespace[i(2472)].equals(this.color,e[i(2092)])&&Cesium__namespace[i(2472)][i(t._0x6de5ad)](this.gapColor,e.gapColor)&&this[i(2848)]===e.dashLength&&this.dashPattern===e[i(t._0x4f5278)]}}registerPropertyClass(LineDotDash,LineDotDashMaterialProperty);class NeonLightMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x2b5c9f:2092,_0xee9f15:2613},i=_0x5e32ae;super(e),this[i(2092)]=getCesiumColor(e[i(t._0x2b5c9f)],Cesium__namespace.Color.fromCssColorString("#9b08fd")),this[i(t._0xee9f15)]=e.speed??2,this.globalAlpha=e.globalAlpha??1}getType(e){return NeonLight}getValue(e,t){const i={_0x44a684:515},s=_0x5e32ae;return!Cesium__namespace[s(i._0x44a684)](t)&&(t={}),t[s(2092)]=this[s(2092)],t.speed=this[s(2613)],t.globalAlpha=this[s(3252)],t}equals(e){const t={_0x649aa1:2613},i=_0x5e32ae;return this===e||e instanceof NeonLightMaterialProperty&&Cesium__namespace[i(2472)].equals(this.color,e.color)&&this[i(t._0x649aa1)]===e.speed}}registerPropertyClass(NeonLight,NeonLightMaterialProperty);class LineThreeDashMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x587b52:2092,_0x81d50:2200,_0x506fda:445,_0x4dee54:445,_0xaea77c:3410},i=_0x5e32ae;super(e),this[i(2092)]=getCesiumColor(e[i(t._0x587b52)],Cesium__namespace[i(t._0x81d50)].RED),this.dashLength=e.dashLength??16,this[i(t._0x506fda)]=e[i(t._0x4dee54)]??.1,this.sidesColor=getCesiumColor(e[i(t._0xaea77c)],Cesium__namespace[i(2200)].WHITE),this.sidesDashLength=e.sidesDashLength??32,this.sidesWidthRatio=e.sidesWidthRatio??.1,this.dashPattern=e.dashPattern??255,this.globalAlpha=e.globalAlpha??1}[_0x5e32ae(1500)](e){return LineThreeDash}getValue(e,t){const i=_0x5e32ae;return!Cesium__namespace[i(515)](t)&&(t={}),t.color=getCesiumColor(this.color,Cesium__namespace.Color.RED,e),t[i(2848)]=this.dashLength,t.widthRatio=this.widthRatio,t.sidesColor=getCesiumColor(this.sidesColor,Cesium__namespace[i(2200)].WHITE,e),t.sidesDashLength=this.sidesDashLength,t.sidesWidthRatio=this.sidesWidthRatio,t.dashLength=this.dashLength,t.globalAlpha=this.globalAlpha,t}equals(e){const t=_0x5e32ae;return this===e||e instanceof LineThreeDashMaterialProperty&&Cesium__namespace.Property.equals(this.color,e[t(2092)])&&this.speed===e.speed}}registerPropertyClass(LineThreeDash,LineThreeDashMaterialProperty);class ODLineMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x17c502:4032,_0x2f523d:2544},i=_0x5e32ae;super(e),this.color=getCesiumColor(e.color,new Cesium__namespace.Color(Math.random()*.5+.5,Math.random()*.8+.2,0,1)),this.bgColor=getCesiumColor(e[i(t._0x17c502)],this.color[i(3518)](.1)),this.speed=e.speed??20+10*Math.random(),this.startTime=e.startTime??Math[i(3413)](),this[i(2544)]=e[i(t._0x2f523d)]??0,this.globalAlpha=e[i(3252)]??1}[_0x5e32ae(1500)](e){return ODLine}getValue(e,t){const i={_0x4f21b6:2092,_0xd13106:3252},s=_0x5e32ae;return!t&&(t={}),t[s(i._0x4f21b6)]=this.color,t.speed=this.speed,t.startTime=this.startTime,t.bgColor=this.bgColor,t.bidirectional=this.bidirectional,t[s(i._0xd13106)]=this[s(i._0xd13106)],t}equals(e){const t={_0x3f45c0:2661,_0x15a0b1:2472,_0x4bfe0f:2613,_0x408fb5:3932,_0x53c677:2544},i=_0x5e32ae;return this===e||e instanceof ODLineMaterialProperty&&Cesium__namespace.Property[i(t._0x3f45c0)](this.color,e.color)&&Cesium__namespace[i(t._0x15a0b1)].equals(this.bgColor,e.bgColor)&&this[i(t._0x4bfe0f)]===e.speed&&this[i(t._0x408fb5)]===e.startTime&&this[i(t._0x53c677)]===e.bidirectional}}registerPropertyClass(ODLine,ODLineMaterialProperty);class PolyAsphaltMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x1579b9:2200},i=_0x5e32ae;super(e),this.color=getCesiumColor(e.color,new Cesium__namespace[i(t._0x1579b9)](0,0,0,0)),this.size=e.size??.02,this.frequency=e.frequency??.2,this.globalAlpha=e.globalAlpha??1}getType(e){return PolyAsphalt}getValue(e,t){const i=_0x5e32ae;return!Cesium__namespace.defined(t)&&(t={}),t.color=this.color,t.size=this[i(983)],t.frequency=this.frequency,t.globalAlpha=this.globalAlpha,t}equals(e){const t={_0x4a7ee5:983},i=_0x5e32ae;return this===e||e instanceof PolyAsphaltMaterialProperty&&Cesium__namespace[i(2472)].equals(this.color,e.color)&&this.frequency===e.frequency&&this.size===e[i(t._0x4a7ee5)]}}registerPropertyClass(PolyAsphalt,PolyAsphaltMaterialProperty);class PolyBlobMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0xbc0f8d:2200},i=_0x5e32ae;super(e),this.evenColor=getCesiumColor(e[i(3905)],new Cesium__namespace.Color(1,1,1,.5)),this.oddColor=getCesiumColor(e.evenColor,new Cesium__namespace[i(t._0xbc0f8d)](0,0,1,.5)),this.frequency=e.frequency??10,this.globalAlpha=e.globalAlpha??1}getType(e){return PolyBlob}getValue(e,t){const i={_0x2bd846:2621,_0x2c32bc:3252},s=_0x5e32ae;return!Cesium__namespace[s(515)](t)&&(t={}),t.evenColor=this.evenColor,t.evenColor=this.oddColor,t[s(i._0x2bd846)]=this[s(2621)],t.globalAlpha=this[s(i._0x2c32bc)],t}equals(e){const t={_0x55c83b:3905,_0x17725d:2621},i=_0x5e32ae;return this===e||e instanceof PolyBlobMaterialProperty&&Cesium__namespace.Property.equals(this.evenColor,e[i(t._0x55c83b)])&&Cesium__namespace.Property.equals(this.oddColor,e.oddColor)&&this[i(t._0x17725d)]===e[i(t._0x17725d)]}}registerPropertyClass(PolyBlob,PolyBlobMaterialProperty);class PolyFacetMaterialProperty extends PolyBlobMaterialProperty{getType(e){return PolyFacet}}registerPropertyClass(PolyFacet,PolyFacetMaterialProperty);class PolyGradientMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x5076ec:2200},i=_0x5e32ae;super(e),this.color=getCesiumColor(e.color,new Cesium__namespace[i(t._0x5076ec)](1,1,0,.5)),this.diffusePower=e.diffusePower??1.6,this.alphaPower=e.alphaPower??1.5,this.center=e[i(4064)]??new Cesium__namespace[i(2497)](.5,.5),this.globalAlpha=e.globalAlpha??1}getType(e){return PolyGradient}getValue(e,t){const i={_0xba6f84:2092},s=_0x5e32ae;return!Cesium__namespace.defined(t)&&(t={}),t[s(i._0xba6f84)]=this[s(i._0xba6f84)],t.diffusePower=this[s(1585)],t.alphaPower=this.alphaPower,t[s(4064)]=this[s(4064)],t[s(3252)]=this[s(3252)],t}equals(e){const t={_0x506307:2092},i=_0x5e32ae;return this===e||e instanceof PolyGradientMaterialProperty&&Cesium__namespace.Property.equals(this.color,e[i(t._0x506307)])&&this.diffusePower===e.diffusePower}}registerPropertyClass(PolyGradient,PolyGradientMaterialProperty);class PolyGrassMaterialProperty extends PolyBlobMaterialProperty{getType(e){return PolyGrass}}registerPropertyClass(PolyGrass,PolyGrassMaterialProperty);class PolyWoodMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x18befb:2562},i=_0x5e32ae;super(e),this.evenColor=getCesiumColor(e.evenColor,new Cesium__namespace.Color(1,1,1,.5)),this.oddColor=getCesiumColor(e[i(3905)],new Cesium__namespace.Color(0,0,1,.5)),this.frequency=e[i(2621)]??10,this[i(t._0x18befb)]=e.noiseScale??new Cesium__namespace.Cartesian2(.7,.5),this.grainFrequency=e.grainFrequency??27,this.globalAlpha=e.globalAlpha??1}getType(e){return PolyWood}getValue(e,t){const i={_0x1af465:3905,_0x293913:776},s=_0x5e32ae;return!Cesium__namespace.defined(t)&&(t={}),t.evenColor=this[s(i._0x1af465)],t.evenColor=this.oddColor,t[s(2621)]=this[s(2621)],t.noiseScale=this.noiseScale,t[s(776)]=this[s(i._0x293913)],t.globalAlpha=this.globalAlpha,t}equals(e){const t={_0x5ca0b0:3725},i=_0x5e32ae;return this===e||e instanceof PolyWoodMaterialProperty&&Cesium__namespace.Property.equals(this.evenColor,e.evenColor)&&Cesium__namespace.Property.equals(this.oddColor,e[i(t._0x5ca0b0)])&&this.frequency===e.frequency}}registerPropertyClass(PolyWood,PolyWoodMaterialProperty);class RadarLineMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x452195:2613},i=_0x5e32ae;super(e),this.color=getCesiumColor(e.color,new Cesium__namespace.Color(0,0,0,0)),this[i(t._0x452195)]=e.speed??5,this.globalAlpha=e.globalAlpha??1}[_0x5e32ae(1500)](e){return RadarLine}getValue(e,t){return!Cesium__namespace[_0x5e32ae({_0x4a1fec:515}._0x4a1fec)](t)&&(t={}),t.color=this.color,t.speed=this.speed,t.globalAlpha=this.globalAlpha,t}[_0x5e32ae(2661)](e){const t={_0x46107d:2472,_0x13d45b:2092,_0xacb546:2613},i=_0x5e32ae;return this===e||e instanceof RadarLineMaterialProperty&&Cesium__namespace[i(t._0x46107d)].equals(this.color,e[i(t._0x13d45b)])&&this[i(t._0xacb546)]===e.speed}}registerPropertyClass(RadarLine,RadarLineMaterialProperty);class RadarWaveMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t=_0x5e32ae;super(e),this.color=getCesiumColor(e.color,new Cesium__namespace.Color(0,0,0,0)),this.speed=e.speed??5,this[t(3252)]=e.globalAlpha??1}[_0x5e32ae(1500)](e){return RadarWave}[_0x5e32ae(810)](e,t){const i=_0x5e32ae;return!Cesium__namespace.defined(t)&&(t={}),t[i(2092)]=this.color,t.speed=this.speed,t[i(3252)]=this[i(3252)],t}equals(e){const t=_0x5e32ae;return this===e||e instanceof RadarWaveMaterialProperty&&Cesium__namespace.Property.equals(this.color,e.color)&&this[t(2613)]===e.speed}}registerPropertyClass(RadarWave,RadarWaveMaterialProperty);class RectSlideMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x2ef155:2613,_0x1a2a6e:2613},i=_0x5e32ae;super(e),this.image=e.image,this.color=getCesiumColor(e.color,new Cesium__namespace[i(2200)](1,1,1,.9)),this[i(t._0x2ef155)]=e[i(t._0x1a2a6e)]??1,this.pure=!!e.pure,this.globalAlpha=e.globalAlpha??1}getType(e){return RectSlide}getValue(e,t){const i={_0x3b35b0:513,_0xffb23a:2092},s=_0x5e32ae;return!Cesium__namespace[s(515)](t)&&(t={}),t[s(513)]=this[s(i._0x3b35b0)],t.color=this[s(i._0xffb23a)],t.speed=this.speed,t.pure=this.pure,t.globalAlpha=this.globalAlpha,t}equals(e){const t={_0x5807d3:2613},i=_0x5e32ae;return this===e||e instanceof RectSlideMaterialProperty&&Cesium__namespace.Property.equals(this.color,e.color)&&this.image===e.image&&this.pure===e.pure&&this.speed===e[i(t._0x5807d3)]}}registerPropertyClass(RectSlide,RectSlideMaterialProperty);class ScanLineMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x526176:2092},i=_0x5e32ae;super(e),this[i(t._0x526176)]=getCesiumColor(e[i(t._0x526176)],Cesium__namespace[i(2200)][i(4128)]),this.speed=e.speed??10,this.globalAlpha=e.globalAlpha??1}getType(e){return ScanLine}getValue(e,t){const i=_0x5e32ae;return!Cesium__namespace.defined(t)&&(t={}),t.color=this.color,t.speed=this[i(2613)],t.globalAlpha=this[i(3252)],t}equals(e){const t={_0x4470ab:2613},i=_0x5e32ae;return this===e||e instanceof ScanLineMaterialProperty&&Cesium__namespace.Property.equals(this.color,e.color)&&this[i(t._0x4470ab)]===e.speed}}registerPropertyClass(ScanLine,ScanLineMaterialProperty);class TextMaterialProperty extends Image2MaterialProperty{constructor(e={}){const t={_0x42758f:4162,_0x443720:2200},i=_0x5e32ae;e.font_size=e.font_size??70,super(e),this[i(4162)]=e[i(t._0x42758f)]??!![],this._textStyles=LabelStyleConver.toCesiumVal(e,{fill:!![],fillColor:new Cesium__namespace[i(t._0x443720)](1,1,0,1),textBaseline:"middle",padding:10}),this._updateImage()}get text(){const e=_0x5e32ae;return this.options[e(1260)]}set[_0x5e32ae(1260)](e){const t=_0x5e32ae;this.options[t(1260)]=e,this._updateImage()}get textStyles(){return this[_0x5e32ae({_0x285dd7:2557}._0x285dd7)]}set textStyles(e){const t={_0x523266:2557},i=_0x5e32ae;this._textStyles=LabelStyleConver.toCesiumVal(e,this[i(t._0x523266)]),this._updateImage()}_updateImage(){const e={_0x44d36b:3122},t=_0x5e32ae;if(this._canvas=getTextImage(this.options.text,this._textStyles),this[t(e._0x44d36b)]){var i;this.image=this._canvas;const s=(i=this.options)===null||i===void 0?void 0:i.onCustomCanvas;s&&s(this._canvas,this).then(n=>{this.image=copyCanvas(n)})}}}registerPropertyClass(Text,TextMaterialProperty);class WallScrollMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x477b69:2200,_0x5439b2:857,_0x291ce4:943},i=_0x5e32ae;super(e),this.image=e.image,this[i(2092)]=getCesiumColor(e.color,new Cesium__namespace[i(t._0x477b69)](0,0,0,1)),this[i(2613)]=e.speed??10,this[i(t._0x5439b2)]=e.count??1,this[i(t._0x291ce4)]=e.reverse??![],this.axisY=e.axisY??![],this.bloom=e[i(1381)]??![],this.globalAlpha=e.globalAlpha??1}getType(e){return WallScroll}getValue(e,t){const i={_0xd74923:513,_0x18d475:2092,_0x41ce25:1683,_0x196bf8:1381},s=_0x5e32ae;return!Cesium__namespace.defined(t)&&(t={}),t[s(513)]=this[s(i._0xd74923)],t[s(i._0x18d475)]=this.color,t.speed=this.speed,t.count=this.count,t.reverse=this[s(943)],t[s(i._0x41ce25)]=this.axisY,t.bloom=this[s(i._0x196bf8)],t.globalAlpha=this[s(3252)],t}equals(e){const t={_0x4ba54f:2092,_0x5a5381:2613},i=_0x5e32ae;return this===e||e instanceof WallScrollMaterialProperty&&Cesium__namespace.Property.equals(this[i(t._0x4ba54f)],e.color)&&this.image===e.image&&this.count===e[i(857)]&&this[i(943)]===e.reverse&&this.bloom===e.bloom&&this[i(t._0x5a5381)]===e.speed}}registerPropertyClass(WallScroll,WallScrollMaterialProperty);class WaterLightMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x4196b6:4135},i=_0x5e32ae;super(e),this.specularMap=e.specularMap,this[i(t._0x4196b6)]=e[i(4135)]||Cesium__namespace[i(1423)].DefaultImageId,this.alpha=e.alpha??.2,this.globalAlpha=e.globalAlpha??1}[_0x5e32ae(1500)](e){return WaterLight}getValue(e,t){const i={_0x27d763:1202},s=_0x5e32ae;return!Cesium__namespace.defined(t)&&(t={}),t.specularMap=this.specularMap,t[s(4135)]=this[s(4135)],t.alpha=this[s(i._0x27d763)],t.globalAlpha=this.globalAlpha,t}equals(e){const t={_0x1ce55b:430,_0x41d224:1202},i=_0x5e32ae;return this===e||e instanceof WaterLightMaterialProperty&&this.specularMap===e[i(t._0x1ce55b)]&&this.normalMap===e.normalMap&&this[i(t._0x41d224)]===e.alpha}}registerPropertyClass(WaterLight,WaterLightMaterialProperty);class WaterMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x300bf8:1342,_0x282463:1423,_0x745d9c:1838,_0x3f3cda:2842},i=_0x5e32ae;super(e),this.baseWaterColor=getCesiumColor(e.baseWaterColor,new Cesium__namespace.Color(.2,.3,.6,1)),this[i(t._0x300bf8)]=getCesiumColor(e.blendColor,new Cesium__namespace.Color(0,1,.699,1)),this[i(430)]=e[i(430)]||Cesium__namespace[i(t._0x282463)].DefaultImageId,this.normalMap=e.normalMap||Cesium__namespace[i(1423)][i(t._0x745d9c)],this.frequency=e.frequency??1e3,this.animationSpeed=e.animationSpeed??.01,this.amplitude=e.amplitude??10,this.specularIntensity=e[i(2453)]??.5,this[i(t._0x3f3cda)]=e.fadeFactor??1,this.globalAlpha=e.globalAlpha??1}getType(e){return Water$1}getValue(e,t){const i={_0x3a82a8:1342,_0x54851c:2621,_0x59121d:2471,_0x186611:2471},s=_0x5e32ae;return!t&&(t={}),t.baseWaterColor=this.baseWaterColor,t.blendColor=this[s(i._0x3a82a8)],t.specularMap=this.specularMap,t.normalMap=this.normalMap,t[s(i._0x54851c)]=this.frequency,t.animationSpeed=this.animationSpeed,t[s(i._0x59121d)]=this[s(i._0x186611)],t.specularIntensity=this.specularIntensity,t.fadeFactor=this[s(2842)],this.globalAlpha!==1&&(t.baseWaterColor.alpha*=this[s(3252)],t.blendColor[s(1202)]*=this.globalAlpha),t}equals(e){const t={_0x19b074:2022,_0x5eabd4:1136,_0x7678ba:2842},i=_0x5e32ae;return this===e||e instanceof WaterMaterialProperty&&this[i(t._0x19b074)].equals(e.baseWaterColor)&&this.blendColor.equals(e.blendColor)&&this.specularMap===e.specularMap&&this.normalMap===e.normalMap&&this.frequency===e.frequency&&this.animationSpeed===e[i(t._0x5eabd4)]&&this.amplitude===e.amplitude&&this.specularIntensity===e.specularIntensity&&this[i(2842)]===e[i(t._0x7678ba)]}}registerPropertyClass(Water$1,WaterMaterialProperty);var index$7={__proto__:null,TextMaterial,CylinderWaveMaterial,BaseMaterialProperty,CircleScanMaterialProperty,CircleWaveMaterialProperty,CylinderWaveMaterialProperty,DigitalFlowMaterialProperty,EllipsoidElectricMaterialProperty,EllipsoidWaveMaterialProperty,Image2MaterialProperty,LineBloomMaterialProperty,LineFlickerMaterialProperty,LineFlowColorMaterialProperty,LineFlowMaterialProperty,LineTrailMaterialProperty,LineDotDashMaterialProperty,NeonLightMaterialProperty,LineThreeDashMaterialProperty,ODLineMaterialProperty,PolyAsphaltMaterialProperty,PolyBlobMaterialProperty,PolyFacetMaterialProperty,PolyGradientMaterialProperty,PolyGrassMaterialProperty,PolyWoodMaterialProperty,RadarLineMaterialProperty,RadarWaveMaterialProperty,RectSlideMaterialProperty,ScanLineMaterialProperty,TextMaterialProperty,WallScrollMaterialProperty,WaterLightMaterialProperty,WaterMaterialProperty};class BaseGraphic extends BaseClass{constructor(e={}){const t={_0x4cfd90:1528,_0x3aa497:3618,_0x590395:2307,_0x514666:1403,_0x545cb2:2572},i=_0x5e32ae;e.style=e.style||{},e.attr=e[i(t._0x4cfd90)]||{},super(e),this.options=e,this[i(t._0x3aa497)]=e.id??e.attr.id??createGuid(),this._name=e.name||e.attr[i(3605)]||"",this._show=e.show??!![],this._private=e.private,e.popup&&this.bindPopup(e[i(t._0x590395)],e[i(583)]),e.tooltip&&this.bindTooltip(e.tooltip,e.tooltipOptions),e[i(t._0x514666)]&&this.bindContextMenu(e[i(t._0x514666)],e.contextmenuItemsOptions),this._state=State[i(t._0x545cb2)]}get type(){return this._type}get id(){return this._id}set id(e){this._id=e}get[_0x5e32ae(501)](){return this._id}get state(){return this[_0x5e32ae({_0xe5673a:553}._0xe5673a)]}get isAdded(){return this[_0x5e32ae(553)]===State.ADDED}get isDestroy(){return this._state===State.DESTROY||!this.options}get isPrivate(){return this._private?!![]:![]}get czmObject(){return null}get czmObjectEx(){return null}get show(){return this._show}set[_0x5e32ae(575)](e){const t={_0xf07fb6:3001},i=_0x5e32ae;this[i(t._0xf07fb6)]!==e&&(this._show=e,this.czmObject&&(this.czmObject[i(575)]=this._show),this.czmObjectEx&&this.czmObjectEx[i(2500)](function(s){s.show=e}),this[i(3961)]&&this._showHook(e),e?this.fire(EventType.show):this.fire(EventType.hide))}get name(){return this._name}set name(e){const t={_0x2e46fc:671},i=_0x5e32ae;this[i(t._0x2e46fc)]=e}get attr(){return this[_0x5e32ae({_0x5ba9b8:3798}._0x5ba9b8)].attr}set[_0x5e32ae(1528)](e){this.options.attr=e,this.fire(EventType.updateAttr,{attr:e},!![])}get style(){var e;return(e=this.options)===null||e===void 0?void 0:e.style}set style(e){this[_0x5e32ae(1722)](e)}get allowDrillPick(){const e={_0x379f66:2181},t=_0x5e32ae;return this[t(3798)][t(e._0x379f66)]}set allowDrillPick(e){const t=_0x5e32ae;this.options[t(2181)]=e}get hasEdit(){return this._hasEdit&&!!(this.EditClass||this._getDrawEntityClass)}set[_0x5e32ae(2639)](e){this._hasEdit=e}get enabledEvent(){return this._layer?this._layer.enabledEvent&&this._enabledEvent:this._enabledEvent}set[_0x5e32ae(1255)](e){this._enabledEvent=e}get center(){return null}get[_0x5e32ae(2953)](){return LngLatPoint[_0x5e32ae({_0x40c9d5:3236}._0x40c9d5)](this.center)}get hasOpacity(){return!![]}addTo(e){return e&&e.addGraphic&&e.addGraphic(this),this}remove(e){const t={_0x40fcca:875},i=_0x5e32ae;this._layer&&this._layer[i(t._0x40fcca)](this,e)}bindPickId(e){const t={_0x4ad66d:2266},i=_0x5e32ae;var s;return e[i(t._0x4ad66d)]=(s=this._layer)===null||s===void 0?void 0:s.id,e[i(2252)]=this.id,this}_onAdd(e){const t={_0x1d51b6:716,_0x6fa4b:3052,_0x1c1681:4114,_0x5e08a3:1483,_0x52e3d1:2414,_0x354970:3798,_0x811e45:4142,_0x434a04:1404},i=_0x5e32ae;var s,n;this.isAdded||(this._state=State.ADD,this._layer=e,this._map=e._map,!this._map&&logWarn("BaseGraphic:为了避免异常问题，请将图层添加到Map上再进行添加矢量数据的操作！"),this.options[i(716)]?this[i(3052)](this.options[i(t._0x1d51b6)]):((s=this.options)===null||s===void 0?void 0:s[i(716)])===![]||this[i(t._0x6fa4b)](e),!this.czmObject&&this._mountedHook&&this._mountedHook(),this._addedHook&&this[i(4158)](this[i(4114)]),(n=this._layer)!==null&&n!==void 0&&n._highlightOptions||(this[i(t._0x1c1681)].highlight?this.bindHighlight(this.style.highlight):this[i(3798)][i(t._0x5e08a3)]&&this[i(3824)](this.options.highlight)),this.czmObject&&this[i(t._0x52e3d1)](this.czmObject),this.czmObjectEx&&this.czmObjectEx[i(2500)](o=>{this.bindPickId(o)}),this[i(t._0x354970)].flyTo&&this.flyTo({duration:0}),this._state=State[i(t._0x811e45)],this[i(t._0x434a04)](EventType.add),!this.isPrivate&&this.enabledEvent&&this[i(2873)].fire(EventType.addGraphic,{graphic:this},!![]))}_onRemove(){const e={_0x4465c4:1169,_0x13e740:2442,_0xb1b63b:1404,_0x15e2b0:716},t=_0x5e32ae;var i,s;this[t(553)]===State.ADDED&&(!this._layer||!this.options||(this[t(e._0x4465c4)](),this.unbindHighlight(),this[t(932)]&&this.unbindUpdateEvent(),this[t(2442)]&&this[t(e._0x13e740)](),this.options&&(this[t(553)]=State.REMOVED,this.fire(EventType.remove),!this.isPrivate&&this.enabledEvent&&this._layer[t(e._0xb1b63b)](EventType.removeGraphic,{graphic:this},!![]),(i=this.options)!==null&&i!==void 0&&i.eventParent?this.removeEventParent(this.options.eventParent):((s=this.options)===null||s===void 0?void 0:s[t(e._0x15e2b0)])===![]||this[t(3665)](this._layer),this[t(2873)]=null,this._map=null)))}[_0x5e32ae(3118)](){}[_0x5e32ae(4158)](e){}_removedHook(){}enableControl(e){const t={_0x17cb06:2307,_0x5b0095:1890,_0x1871eb:571},i=_0x5e32ae;this._map.mouseEvent[i(4183)]=e,this._map[i(2307)]&&(this._map[i(t._0x17cb06)].enabled=e),this[i(t._0x5b0095)][i(t._0x1871eb)]&&(this._map.tooltip.enabled=e),this._map.contextmenu&&(this._map.contextmenu.enabled=e)}setOptions(e){const t={_0x50467c:3605,_0x5926e4:3798,_0xed3626:571},i=_0x5e32ae;if(!e||Object.keys(e).length===0)return this;for(const s in e){const n=e[s];switch(s){case i(t._0x50467c):case"show":case"position":case i(2436):case"targetPosition":this.options[s]=n,this[s]=n;break;case"orientation":this.options[s]=n,this.czmObject[s]=n;break;case"attr":{this[i(3798)].attr=merge(this.options[i(1528)],e.attr),this.fire(EventType.updateAttr,{attr:e.attr},!![]);break}case"style":{this.options.style=merge(this.options[i(4114)],e.style),this._updateStyleBaseHook(e.style),this.fire(EventType[i(1780)],{style:e[i(4114)]},!![]);break}default:{isObject(n)?this.options[s]=merge(this[i(t._0x5926e4)][s],n):this.options[s]=n;break}}}return(e.popup||e.popupOptions)&&this.bindPopup(this.options.popup,this.options[i(583)]),(e[i(t._0xed3626)]||e.tooltipOptions)&&this.bindTooltip(this[i(t._0x5926e4)].tooltip,this[i(3798)][i(1574)]),(e.contextmenuItems||e.contextmenuItemsOptions)&&this.bindContextMenu(this.options.contextmenuItems,this.options.contextmenuItemsOptions),this[i(437)]&&this._setOptionsHook(this[i(3798)],e),this}setStyle(e){const t={_0x4a52d2:1877,_0x567252:3793,_0x5e401d:3798,_0x298d92:3048,_0x295bae:4114,_0x471f94:1483},i=_0x5e32ae;var s;return e[i(t._0x4a52d2)]&&delete this.options.style[i(1877)],e[i(t._0x567252)]&&this[i(t._0x5e401d)].style.materialOptions&&delete this.options[i(4114)][i(t._0x298d92)],this.options[i(t._0x295bae)]=merge(this.options.style,e),!((s=this._layer)!==null&&s!==void 0&&s._highlightOptions)&&Cesium__namespace.defined(e.highlight)&&(e.highlight?this.bindHighlight(this.style[i(t._0x471f94)]):this.unbindHighlight()),this._updateStyleBaseHook(e),this.fire(EventType.updateStyle,{style:e},!![]),this}_updateStyleBaseHook(e){}setOpacity(e){const t={_0x334bc8:2350},i=_0x5e32ae;clearTimeout(this._canrefresh),this[i(t._0x334bc8)]=setTimeout(()=>{const s=i;this[s(3126)]&&this[s(1722)]({globalAlpha:e})},500)}[_0x5e32ae(826)](e){const t={_0xd4a1fe:1528,_0x3305d2:1594,_0x6308c1:3276,_0x4c278b:2140,_0xacc4ab:3488},i=_0x5e32ae,s={type:i(3182),properties:{name:this[i(3605)],...this[i(t._0xd4a1fe)],id:this.id,type:this.type,style:this._style2JsonBase(this.style,!![])}};return this[i(879)]?s[i(788)]=this._getGeoJsonGeometry(e):this.position?s.geometry={type:"Point",coordinates:this.getCoordinate(e==null?void 0:e[i(t._0x3305d2)])}:this.positions&&(s.geometry={type:"LineString",coordinates:this[i(t._0x6308c1)](e==null?void 0:e.noAlt)}),Cesium__namespace.defined(this.options[i(t._0x4c278b)])&&(s.properties[i(2140)]=this[i(3798)][i(2140)]),this[i(t._0xacc4ab)]&&this[i(t._0xacc4ab)](s.properties),s}toJSON(){const e={_0x48efd7:2180,_0x51f167:3798},t=_0x5e32ae,i={...getAttrVal(this[t(3798)],{onlySimpleType:!![]}),id:this.id,name:this[t(3605)],type:this.type,attr:this.attr,style:this._style2JsonBase(this.style,![])};return this._getJsonPositions?this._getJsonPositions(i):this.coordinate?i[t(e._0x48efd7)]=this.coordinate:this[t(1743)]?i.positions=this.coordinates:logError$1("toJSON:缺少坐标信息",this),Cesium__namespace.defined(this.options.styleType)&&this[t(e._0x51f167)][t(2140)]!==this[t(3205)]&&(i.styleType=this[t(3798)].styleType),this._toJSON_Ex&&this[t(3488)](i),i}_style2JsonBase(e,t){const i={_0x121765:3978},s=_0x5e32ae;let n;return this._style2Json?(n=this[s(i._0x121765)](e),e[s(1483)]&&(n.highlight=this[s(3978)](e.highlight))):n=getAttrVal(e,{onlySimpleType:!![]}),e.label&&(n.label=LabelStyleConver.toJSON(e.label)),e.outlineStyle&&(n.outlineStyle=PolylineStyleConver.toJSON(e[s(2755)])),n}bindUpdateEvent(){const e=_0x5e32ae;!this.update||!this._map||(this.unbindUpdateEvent(),this[e(1890)].on(EventType.preRender,this._map_preRenderHandler,this),this[e(1091)](this._map.scene))}unbindUpdateEvent(){const e={_0x1dfecd:1890},t=_0x5e32ae;this[t(e._0x1dfecd)]&&this[t(1890)].off(EventType.preRender,this._map_preRenderHandler,this)}[_0x5e32ae(1091)](e){const t={_0x52bda1:3090},i=_0x5e32ae;var s;this._map&&((s=this.options)!==null&&s!==void 0&&s.frameRate&&this._last_preUpdateTime&&e._frameState[i(2845)]-this._last_preUpdateTime<this.options[i(2651)]||(this._last_preUpdateTime=e._frameState.frameNumber,this.update(e[i(t._0x52bda1)])))}getRectangle(e){const t=_0x5e32ae,i=this.positionsShow||this.positions;if(i&&i.length>0)return getRectangle(i,e==null?void 0:e[t(3937)]);if(this.position)return getRectangle([this.position],e==null?void 0:e.isFormat)}getMaxHeight(){const e=_0x5e32ae,t=this.positionsShow||this.positions;return t&&t[e(3402)]>0?getMaxHeight(t):this.position?getRectangle(this[e(2180)]):0}fire(e,t={},i){return t.graphic=this,super.fire(e,t,i)}flyTo(e={}){const t={_0x320cdc:1890,_0x39a176:2436,_0x189a64:2436,_0x5584cb:2825},i=_0x5e32ae;if(!this[i(t._0x320cdc)])return Promise.resolve(![]);this.options.flyToOptions&&(e={...this.options.flyToOptions,...e});let s;return this[i(1912)]?s=this.positionsShow:this[i(t._0x39a176)]?s=this[i(t._0x189a64)]:this.position&&(s=[this.position]),e.clampToGround=this[i(4114)][i(t._0x5584cb)],this._map[i(3255)](s,e)}[_0x5e32ae(2578)](e=0){const t={_0x1367f5:3845},i=_0x5e32ae;let s=this.style.addHeight;return Cesium__namespace.defined(s)?(isString(s)?(s=Number(template(s,this.attr,!![])),isNaN(s)&&(s=0)):Array[i(t._0x1367f5)](s)&&(s=s[e]||0),s):0}[_0x5e32ae(3824)](e){const t={_0x53ae47:2088},i=_0x5e32ae;this.unbindHighlight(),this[i(4306)]=e,this._highlightOptions.type===EventType.click?this.on(EventType[i(1948)],this._highlight_mouseEventHandler,this):(this.on(EventType.mouseOver,this._highlight_mouseEventHandler,this),this.on(EventType[i(t._0x53ae47)],this._highlight_mouseOutHandler,this))}unbindHighlight(){const e={_0x52776a:3205,_0x50444e:1220,_0x7b7d84:1948},t=_0x5e32ae;this._highlightOptions&&(this._highlightOptions[t(e._0x52776a)]===EventType[t(1948)]?this[t(e._0x50444e)](EventType[t(e._0x7b7d84)],this._highlight_mouseEventHandler,this):(this[t(1220)](EventType[t(3986)],this._highlight_mouseEventHandler,this),this.off(EventType[t(2088)],this._highlight_mouseOutHandler,this)),this[t(1890)].closeHighlight(),this._highlightOptions=null)}[_0x5e32ae(3213)](e){const t={_0x24babc:2932,_0x8ba133:1890,_0x1e5281:567},i=_0x5e32ae;if(!this._map)return;const s=e==null?void 0:e.graphic;s?this._map[i(t._0x24babc)](s,this._highlightOptions,e):this[i(t._0x8ba133)][i(t._0x1e5281)]()}[_0x5e32ae(2626)](e){this[_0x5e32ae({_0x4321ab:1890}._0x4321ab)].closeHighlight()}_closeAllControl(){const e={_0x27cb51:1789},t=_0x5e32ae;this.closePopup(),this[t(e._0x27cb51)](),this.closeSmallTooltip(),this[t(1246)]()}_getPopupPosition(){return this.position||this.center}[_0x5e32ae(2033)](e){return!!this[_0x5e32ae(3288)](e)}getPopupConfig(e=!![]){const t={_0x366f12:2513},i=_0x5e32ae;var s;return this._popupConfig?{...this[i(t._0x366f12)]}:e&&(s=this[i(2873)])!==null&&s!==void 0&&s[i(t._0x366f12)]?{...this._layer._popupConfig}:null}bindPopup(e,t={}){const i=_0x5e32ae;return this._popupConfig={content:e,options:t||this[i(3798)].popupOptions,graphic:this,layer:this[i(2873)]},this._onEventHook&&this[i(939)]("popup"),this}[_0x5e32ae(509)](e){return e?this._popupConfig=![]:this._popupConfig=null,this._onEventHook&&this._onEventHook("popup"),this}openPopup(e,t){const i={_0x235066:3220},s=_0x5e32ae,n=this.getPopupConfig();return n&&this._map&&(t&&(n.event=t),n.graphic=this,n.layer=this._layer,this._map.popup.open(e||this[s(i._0x235066)](),n)),this}[_0x5e32ae(3772)](){const e={_0xb6f459:1890,_0x4f1304:2307},t=_0x5e32ae;return this[t(1890)]&&this[t(e._0xb6f459)][t(e._0x4f1304)].close(this),this}getPopup(){const e=_0x5e32ae;if(this[e(1890)])return this[e(1890)].popup.getPopup(this)}[_0x5e32ae(2598)](e){return!!this.getTooltipConfig(e)}[_0x5e32ae(1417)](e=!![]){const t={_0x17f209:933,_0x4b63bc:2873},i=_0x5e32ae;var s;return this._tooltipConfig?{...this[i(t._0x17f209)]}:e&&(s=this[i(t._0x4b63bc)])!==null&&s!==void 0&&s._tooltipConfig?{...this[i(t._0x4b63bc)]._tooltipConfig}:null}bindTooltip(e,t){const i={_0x54c637:933},s=_0x5e32ae;return this[s(i._0x54c637)]={content:e,options:t||this.options.tooltipOptions},this._onEventHook&&this[s(939)]("tooltip"),this}unbindTooltip(e){return e?this._tooltipConfig=![]:this._tooltipConfig=null,this._onEventHook&&this._onEventHook("tooltip"),this}openTooltip(e,t){const i={_0xd87752:1417},s=_0x5e32ae,n=this[s(i._0xd87752)]();return n&&this._map&&(n[s(2118)]=this,n.layer=this._layer,t&&(n.event=t),this[s(1890)].tooltip[s(498)](e||this._getPopupPosition(),n)),this}closeTooltip(){const e={_0x16bb30:1890},t=_0x5e32ae;return this[t(e._0x16bb30)]&&this[t(1890)][t(571)][t(1293)](this),this}getTooltip(){const e={_0x3a2eb7:2017},t=_0x5e32ae;if(this._map)return this._map.tooltip[t(e._0x3a2eb7)](this)}[_0x5e32ae(3671)](e){return!!this.getContextMenu(e)}[_0x5e32ae(3204)](e=!![]){const t={_0x4160c9:2873},i=_0x5e32ae;var s;return this._contextmenuConfig?this[i(3331)]:e&&(s=this._layer)!==null&&s!==void 0&&s[i(3331)]?this[i(t._0x4160c9)]._contextmenuConfig:null}[_0x5e32ae(2182)](e,t){const i={_0x57c475:3331,_0x24748d:2873,_0x5e8cb0:939,_0x4ab999:2786},s=_0x5e32ae;return this[s(i._0x57c475)]={content:e,options:t||this.options.contextmenuOptions,graphic:this,layer:this[s(i._0x24748d)]},this[s(i._0x5e8cb0)]&&this._onEventHook(s(i._0x4ab999)),this}[_0x5e32ae(1001)](e){const t=_0x5e32ae;return e?this[t(3331)]=![]:this._contextmenuConfig=null,this._onEventHook&&this._onEventHook("contextMenu"),this}openContextMenu(e){const t={_0x112651:1538,_0x2c605a:2570},i=_0x5e32ae,s=this.getContextMenu();return s&&this._map&&(s.graphic=this,s[i(t._0x112651)]=this[i(2873)],this._map[i(t._0x2c605a)].open(e||this._getPopupPosition(),s)),this}closeContextMenu(){const e={_0x454f29:1293},t=_0x5e32ae;return this.hasContextMenu()&&this._map&&this._map.contextmenu[t(e._0x454f29)](this),this}openSmallTooltip(e,t){return this._map&&this._map.openSmallTooltip(e,t),this}[_0x5e32ae(3635)](){return this._map&&this._map.closeSmallTooltip(),this}destroy(e){const t={_0x455169:553,_0xcfe1e6:1856,_0x346724:757},i=_0x5e32ae;this[i(t._0x455169)]===State[i(3212)]||this._noDestroy||(this._state!==State[i(t._0xcfe1e6)]&&(this.clear&&this.clear(),this.remove()),super[i(t._0x346724)](e),this._state=State.DESTROY)}}class FlickerEntity{constructor(e={}){this.color=Cesium__namespace.Color.YELLOW.withAlpha(0)}startFlicker(e,t={}){const i={_0x2f209b:2092},s={_0x28d600:652,_0x486473:1877,_0x2a8fd9:3875,_0x2bea60:3795,_0x56a885:3381,_0x38eda8:3381,_0xfe0de5:2092,_0x313479:1007},n=_0x5e32ae,o=this;return this[n(2420)](),this.entitys=e,this.maxAlpha=t.maxAlpha??.3,this.time=t.time,this.color=t.color??Cesium__namespace[n(2200)].YELLOW,this.color=this[n(i._0x2f209b)].withAlpha(this.maxAlpha),this.onEnd=t.onEnd,this._startTime(),loopArrayForFun(e,function(c){const _={_0x390b20:2092},l={_0x446973:2092},h={_0x400b4d:2092},f=n;c[f(s._0x28d600)]&&(c.polygon[f(1393)]=c.polygon.material,c.polygon[f(s._0x486473)]=new Cesium__namespace[f(2430)](new Cesium__namespace.CallbackProperty(m=>o[f(h._0x400b4d)],![]))),c.polyline&&(c.polyline.material_bak=c.polyline.material,c.polyline.material=new Cesium__namespace[f(2430)](new Cesium__namespace.CallbackProperty(m=>o[f(l._0x446973)],![]))),c[f(3875)]&&(c[f(3875)].material_bak=c[f(s._0x2a8fd9)].material,c.ellipsoid.material=new Cesium__namespace.ColorMaterialProperty(new Cesium__namespace[f(3703)](m=>o.color,![]))),c[f(2782)]&&(c.ellipse.material_bak=c.ellipse.material,c.ellipse.material=new Cesium__namespace.ColorMaterialProperty(new Cesium__namespace[f(3703)](m=>o[f(_._0x390b20)],![]))),c[f(1323)]&&(c.rectangle.material_bak=c.rectangle.material,c[f(1323)][f(1877)]=new Cesium__namespace.ColorMaterialProperty(new Cesium__namespace.CallbackProperty(m=>o.color,![]))),c.wall&&(c.wall.material_bak=c.wall.material,c[f(s._0x2bea60)].material=new Cesium__namespace.ColorMaterialProperty(new Cesium__namespace.CallbackProperty(m=>o.color,![]))),c[f(s._0x56a885)]&&(c.point.color_bak=c[f(s._0x38eda8)].color,c.point.color=o[f(2092)]),c[f(2747)]&&(c[f(2747)].color_bak=c.billboard[f(s._0xfe0de5)],c[f(2747)].color=o[f(s._0xfe0de5)]),c[f(2927)]&&(c.model.color_bak=c.model[f(2092)],c.model.color=o.color),c.label&&(c.label[f(s._0x313479)]=c.label.fillColor,c[f(736)].fillColor=o.color)}),this}[_0x5e32ae(2420)](){const e={_0x1c6f7a:1632,_0x331262:1393,_0x146d81:1877,_0x4c6733:1393,_0x2f9be3:2782,_0x4d928b:1323,_0x5e8fe9:1323,_0x39f12c:3795,_0x2ad659:2747,_0x2f4947:2092,_0x158334:1007},t=_0x5e32ae;return this[t(2225)](),this.entitys&&(loopArrayForFun(this.entitys,function(i){const s=t;i.polygon&&i.polygon.material_bak&&(i.polygon.material=i.polygon.material_bak),i.polyline&&i[s(e._0x1c6f7a)].material_bak&&(i.polyline.material=i.polyline.material_bak),i[s(3875)]&&i.ellipsoid[s(e._0x331262)]&&(i.ellipsoid[s(e._0x146d81)]=i.ellipsoid[s(e._0x4c6733)]),i.ellipse&&i.ellipse[s(e._0x4c6733)]&&(i.ellipse.material=i[s(e._0x2f9be3)].material_bak),i[s(e._0x4d928b)]&&i[s(e._0x5e8fe9)][s(1393)]&&(i.rectangle.material=i[s(e._0x4d928b)][s(1393)]),i.wall&&i.wall.material_bak&&(i[s(3795)].material=i[s(e._0x39f12c)].material_bak),i.point&&i.point.color_bak&&(i.point.color=i.point[s(3868)]),i.billboard&&(i.billboard.color_bak?i[s(e._0x2ad659)][s(e._0x2f4947)]=i.billboard.color_bak:i.billboard.color=void 0),i.model&&(i.model.color_bak?i.model.color=i.model.color_bak:i.model.color=void 0),i.label&&i[s(736)][s(e._0x158334)]&&(i[s(736)].fillColor=i.label.fillColor_bak)}),this.onEnd&&this[t(4301)](this.entitys),delete this.entitys),this}_updateClr(){const e={_0x3e419f:3381},t=_0x5e32ae,i=this;this[t(715)]&&loopArrayForFun(this[t(715)],function(s){const n=t;s[n(e._0x3e419f)]&&(s.point.color=i.color),s.billboard&&(s.billboard[n(2092)]=i[n(2092)]),s.model&&(s.model[n(2092)]=i.color),s.label&&(s.label.fillColor=i[n(2092)])})}[_0x5e32ae(3091)](){const e={_0x24ed6e:1446},t=_0x5e32ae,i=30,s=this.maxAlpha/i;let n=0;this[t(e._0x24ed6e)]=setInterval(()=>{n+=s,n>this.maxAlpha&&(n=0),this.color=this.color.withAlpha(n),this._updateClr()},i),this.time&&(this[t(1635)]=setTimeout(()=>{this.stopFlicker()},this.time*1e3))}[_0x5e32ae(2225)](){const e=_0x5e32ae;this.interVal&&(clearInterval(this.interVal),this[e(1446)]=null),this.timeEndVal&&(clearTimeout(this.timeEndVal),this.timeEndVal=null)}}function loopArrayForFun(r,e){if(r!=null)if(Array.isArray(r)){const t=[];for(let i=0,s=r.length;i<s;i++)t.push(e(r[i]));return t}else return e(r)}class BaseEntity extends BaseGraphic{get dataSource(){const e={_0x17becb:2873,_0x5cfd18:1443},t=_0x5e32ae;var i;return(i=this[t(e._0x17becb)])===null||i===void 0?void 0:i[t(e._0x5cfd18)]}get czmObject(){return this._entity}get czmObjectEx(){const e=_0x5e32ae;let t=[];return this[e(4189)]&&t.push(this._primitive_label),this._entity_outlines&&(t=t.concat(this._entity_outlines)),t}get entity(){return this._entity}get[_0x5e32ae(2189)](){const e=_0x5e32ae;var t;return(t=this._entity)===null||t===void 0?void 0:t[e(3381)]}get label(){const e={_0x56b6c3:4189,_0x2af58b:736,_0x1ca59d:3579,_0x49b2fb:4114,_0x10cc98:736},t=_0x5e32ae;var i,s;if(this[t(e._0x56b6c3)])return this._primitive_label;if((i=this[t(3579)])!==null&&i!==void 0&&i[t(e._0x2af58b)])return this[t(e._0x1ca59d)].label;if((s=this.style)!==null&&s!==void 0&&s.label){var n;return(n=this[t(e._0x49b2fb)])===null||n===void 0?void 0:n[t(e._0x10cc98)]}return{}}get[_0x5e32ae(2224)](){return this._enabledEdit}[_0x5e32ae(3603)](){const e={_0x2d9432:1255,_0x20c9f3:2873,_0x5cbc75:2571},t=_0x5e32ae;this[t(e._0x2d9432)]=![],this._cancelPositionsCallback();const i=this[t(e._0x20c9f3)];this._onRemove(),delete this._entity,this.options.positions&&(this[t(2436)]=this.options.positions),this.options.position&&(this.position=this.options.position),this[t(e._0x5cbc75)](i),this.enabledEvent=!![]}[_0x5e32ae(3118)](){}[_0x5e32ae(4158)](e){const t={_0x428b90:1443,_0x580278:887,_0x18f94f:2500,_0x3be05d:1452,_0x425a03:4114},i=_0x5e32ae;this[i(t._0x428b90)][i(t._0x580278)].add(this[i(1679)]),this.czmObjectEx[i(t._0x18f94f)](s=>{s instanceof Cesium__namespace.Entity&&this.dataSource.entities.add(s)}),this[i(t._0x3be05d)]&&(this[i(1802)]=this[i(t._0x425a03)][i(2825)])}[_0x5e32ae(2442)](){const e={_0x5cf693:4231,_0x31ee43:845},t=_0x5e32ae;this[t(e._0x5cf693)](),this.stopEditing(),this.czmObject&&this.dataSource.entities.remove(this.czmObject),this.czmObjectEx&&this.czmObjectEx.forEach(i=>{i instanceof Cesium__namespace.Entity&&this.dataSource.entities.remove(i)}),this._primitive_label&&(this._layer[t(e._0x31ee43)].remove(this._primitive_label),delete this[t(4189)])}_initFromEntity(e){const t=_0x5e32ae;return e.entityCollection&&e.entityCollection[t(2004)](e),e._id=this.id,e}_updateEditDraggers(){const e=_0x5e32ae;var t;(t=this.editing)!==null&&t!==void 0&&t[e(968)]&&this.editing.updateDraggers()}[_0x5e32ae(3167)](e){const t={_0x3dc1c6:1452,_0x1cf975:2825,_0x1cd8db:515,_0x29dd8b:1761,_0x1fbefc:2655,_0x18a058:566,_0x13a260:4249},i=_0x5e32ae;var s;if(!(!this.czmObject||!e)){if(this[i(t._0x3dc1c6)]&&Cesium__namespace[i(515)](e[i(2825)])&&e[i(t._0x1cf975)]!==this._clampToGround_last){this[i(3603)](),this._clampToGround_last=e[i(2825)];return}return(Cesium__namespace[i(t._0x1cd8db)](e.setHeight)||Cesium__namespace[i(t._0x1cd8db)](e.addHeight))&&(this[i(t._0x29dd8b)]?(this.positions=this._positions_draw,this[i(t._0x1fbefc)](![])):this.positions=this.positionsShow),this._updateStyleHook(this.style,e),this._updateLabelStyleHook(this.style,e),this._getOutlinePositions&&this._updateOutlineStyle(this._getOutlinePositions(),this.style),this[i(3328)]&&Cesium__namespace.defined(e.globalAlpha)&&this._updateExOpacity(e.globalAlpha),this[i(t._0x18a058)]&&this[i(t._0x13a260)](),(s=this.editing)!==null&&s!==void 0&&s[i(968)]&&this.editing._updateStyleHook(e),this}}[_0x5e32ae(4249)](){const e={_0x5f2669:2597,_0x4c9183:4114,_0xe133b1:2588},t=_0x5e32ae;let i;const s=this.center;if(s?i=Cesium__namespace.Cartesian3.distance(s,new Cesium__namespace.Cartesian3):i=(Cesium__namespace.Ellipsoid.WGS84.minimumRadius+Cesium__namespace[t(e._0x5f2669)].WGS84[t(1738)])/2,this._isCallbackPositions?this.updateDistanceDisplayCondition(i):this.updateDistanceDisplayCondition(),this[t(934)])for(let n=0,o=this._entity_outlines.length;n<o;n++){const c=this._entity_outlines[n].polyline;this[t(e._0x4c9183)].distanceDisplayCondition?c[t(2436)]instanceof Cesium__namespace.CallbackProperty&&this[t(4114)].clampToGround?this.updateOutlinesDistanceDisplayCondition(c,i):this[t(e._0xe133b1)](c):c.distanceDisplayCondition=void 0}}updateDistanceDisplayCondition(e=0){const t={_0x4e4ee1:1430,_0x2c1c03:438},i=_0x5e32ae;this[i(4114)].distanceDisplayCondition?this[i(2189)][i(t._0x4e4ee1)]=new Cesium__namespace[i(t._0x2c1c03)](Number((this[i(4114)].distanceDisplayCondition_near??0)+e),Number((this[i(4114)].distanceDisplayCondition_far??Number.MAX_VALUE)+e)):this.entityGraphic.distanceDisplayCondition=void 0}updateOutlinesDistanceDisplayCondition(e,t=0){const i={_0x59c2f0:438,_0x3ab0d2:4114,_0x147a0f:3041,_0x4f61d3:3747},s=_0x5e32ae;e.distanceDisplayCondition=new Cesium__namespace[s(i._0x59c2f0)](Number((this.style.distanceDisplayCondition_near??0)+t),Number((this[s(i._0x3ab0d2)][s(i._0x147a0f)]??Number[s(i._0x4f61d3)])+t))}[_0x5e32ae(3601)](e,t){}openHighlight(e,t=!![]){const i={_0x1e14b8:4306,_0x50ccb7:3759,_0x4c3d90:2105,_0xf49b0c:3863},s=_0x5e32ae;var n;t&&(this._map.closeHighlight(),this[s(1890)].last_highlighGraphic=this);const o=e||this._highlightOptions||((n=this[s(2873)])===null||n===void 0?void 0:n[s(i._0x1e14b8)]);if(o){const c=[];for(const l in o)l!=="type"&&!Cesium__namespace.defined(this.style[l])&&c[s(i._0x50ccb7)](l);c.length>0&&logWarn("openHighlight：原有style中不存在以下属性，关闭高亮时将无法恢复",c);const _=merge(clone(this.style),o);this[s(3601)](_,o),this[s(i._0x4c3d90)](_,o),this.fire(EventType[s(i._0xf49b0c)],{},!![])}}closeHighlight(){const e={_0x5ea4a5:787,_0x51cc96:4114},t=_0x5e32ae;var i;!this.isAdded||((i=this._map)===null||i===void 0?void 0:i[t(e._0x5ea4a5)])!==this||(this._updateStyleHook(this.style,this[t(e._0x51cc96)]),this._updateLabelStyleHook(this.style,this.style),this._map._clearLastHighlight(),this[t(1404)](EventType[t(2966)],{},!![]))}_createEntity(e){const t={_0x30a224:2053,_0x20145a:3476,_0xe2db8f:1333,_0x584810:2086,_0x51cab2:3798},i=_0x5e32ae;this[i(3798)].onBeforeCreate&&(e=this[i(3798)].onBeforeCreate(e)||e),this[i(t._0x30a224)]&&(e=this._onBeforeCreate(e)||e);const s={id:this.id,name:this.name||this.id,properties:this.attr,show:this.show,parent:this.options[i(t._0x20145a)]};return this[i(3798)].availability&&(s[i(t._0xe2db8f)]=this.options.availability),this.options.description&&(s[i(t._0x584810)]=this.options[i(2086)]),this.options.viewFrom&&(s.viewFrom=this[i(t._0x51cab2)][i(1980)]),this[i(3798)].parent&&(s.parent=this[i(3798)][i(t._0x20145a)]),new Cesium__namespace.Entity({...s,...e})}[_0x5e32ae(2105)](e,t){const i={_0x25ea16:2825,_0x2a1876:2825,_0x2baba8:1268,_0x1fdb24:515,_0x5490c3:736,_0x35f8f7:2180,_0x89bf1a:1268,_0x2db339:736},s=_0x5e32ae;if(t!=null&&t.label)if(Cesium__namespace.defined(e.clampToGround)&&!Cesium__namespace.defined(e.label[s(i._0x25ea16)])&&(t.label[s(i._0x25ea16)]=e[s(i._0x2a1876)]),this._primitive_label){var n,o,c,_;LabelStyleConver[s(i._0x2baba8)](e.label,this._primitive_label,this.attr),(Cesium__namespace[s(i._0x1fdb24)](t==null||(n=t[s(i._0x5490c3)])===null||n===void 0?void 0:n[s(i._0x35f8f7)])||Cesium__namespace.defined(t==null||(o=t.label)===null||o===void 0?void 0:o[s(3865)])||Cesium__namespace[s(515)](t==null||(c=t.label)===null||c===void 0?void 0:c.addHeight)||Cesium__namespace[s(515)](t==null||(_=t[s(i._0x5490c3)])===null||_===void 0?void 0:_.setHeight))&&this[s(1288)]()}else if(this._entity.label){var l,h,f;LabelStyleConver[s(i._0x89bf1a)](e.label,this._entity.label,this.attr),(Cesium__namespace[s(515)](t==null||(l=t.label)===null||l===void 0?void 0:l.height)||Cesium__namespace.defined(t==null||(h=t[s(i._0x2db339)])===null||h===void 0?void 0:h.addHeight)||Cesium__namespace[s(515)](t==null||(f=t.label)===null||f===void 0?void 0:f.setHeight))&&this._updateLabelPosition()}else this._addLabel();else Cesium__namespace[s(515)](t==null?void 0:t.globalAlpha)&&this._updateLabelOpacity(t.globalAlpha)}[_0x5e32ae(2510)](){const e={_0x413749:4114,_0x49f61a:2825,_0x21f408:4114,_0x342858:575,_0x56f903:627},t=_0x5e32ae,i=this.style.label;if(!i||!i[t(1260)])return;Cesium__namespace.defined(this[t(e._0x413749)].clampToGround)&&!Cesium__namespace.defined(i[t(e._0x49f61a)])&&!Cesium__namespace.defined(i.height)&&(i[t(2825)]=this[t(e._0x21f408)][t(e._0x49f61a)]);const s=LabelStyleConver[t(1268)](this[t(4114)].label,{},this.attr);return s[t(e._0x342858)]=this.show,s.position=this[t(e._0x56f903)](),this._primitive_label&&this._layer.labelCollection.remove(this._primitive_label),this._primitive_label=this._layer.labelCollection.add(s),this.bindPickId(this[t(4189)]),this._primitive_label}_updateLabelPosition(){this._primitive_label&&(this._primitive_label.position=this._getLablePosition())}[_0x5e32ae(2989)](e){const t=_0x5e32ae;var i;(i=this._entity)!==null&&i!==void 0&&i.label&&LabelStyleConver.setOpacity(this[t(3579)].label,e),this._primitive_label&&this[t(4189)].show&&LabelStyleConver.setOpacity(this._primitive_label,e)}[_0x5e32ae(627)](){const e={_0x2571fc:2180,_0x269d80:2048,_0x4ff311:1426,_0x13a6f7:4114},t=_0x5e32ae,i=this.style.label;let s;if(i.position)if(i.position===t(4064))s=this.centerOfMass;else if(isString(i[t(2180)])){const c=template(i[t(e._0x2571fc)],this.attr,!![]);c&&(s=LngLatPoint[t(1426)](c)[t(e._0x269d80)]())}else s=LngLatPoint[t(e._0x4ff311)](i[t(2180)]).toCartesian();if(!s&&(s=this.center),!s)return new Cesium__namespace[t(3916)];if(Cesium__namespace.defined(i.height)||Cesium__namespace.defined(this[t(4114)].height)){const c=i.height??this[t(e._0x13a6f7)].height;s=setPositionsHeight(s,c)}Cesium__namespace.defined(this.style[t(2999)])&&(s=addPositionsHeight(s,this.style[t(2999)]));let n=i.setHeight;Cesium__namespace.defined(n)&&(isString(n)&&(n=Number(template(n,this[t(1528)],!![])),isNaN(n)&&(n=0)),s=setPositionsHeight(s,n));let o=i.addHeight;return Cesium__namespace.defined(o)&&(isString(o)&&(o=Number(template(o,this[t(1528)],!![])),isNaN(o)&&(o=0)),s=addPositionsHeight(s,o)),s}[_0x5e32ae(3279)](e={},t){const i={_0x4286e7:3205,_0x33b4b7:973},s=_0x5e32ae;if(e[s(i._0x4286e7)]&&e[s(i._0x4286e7)]!==s(736)){const n=create$4(e.type,{position:t,style:e,hasEdit:![],isPrivate:!![]});return Object.defineProperties(n,{text:{set:function(o){this.attr.text=o,this.style.updateText(o,this)},get:function(){return this.attr.text}}}),this._layer.addGraphic(n),n}else{const n=LabelStyleConver.toCesiumVal({color:"#ffffff",font_size:20,outline:!![],outlineColor:s(i._0x33b4b7),outlineWidth:3,background:!![],backgroundColor:"#000000",backgroundOpacity:.5,scaleByDistance:!![],scaleByDistance_far:8e5,scaleByDistance_farValue:.5,scaleByDistance_near:1e3,scaleByDistance_nearValue:1,pixelOffsetY:-15,horizontalOrigin:Cesium__namespace.HorizontalOrigin.LEFT,verticalOrigin:Cesium__namespace.VerticalOrigin.BOTTOM,visibleDepth:![],...e});t&&(n.position=t);const o=this._layer.labelCollection.add(n);return this.bindPickId(o),o._noMousePick=!![],o[s(2639)]=![],o}}_removeLabel(e){const t=_0x5e32ae;e.isAdded?this[t(2873)].removeGraphic(e,!![]):this._layer[t(845)].remove(e)}_getOutlineStyle(e,t){const i={_0x1accd8:2755,_0x4e4204:3997,_0x5c108c:2605,_0x3086d5:3626},s=_0x5e32ae,n={...e};return delete n.material,delete n.materialType,delete n[s(3048)],delete n.outline,delete n[s(2021)],delete n.outlineOpacity,delete n.outlineWidth,delete n[s(i._0x1accd8)],{...n,show:e.outline??![],color:e.outlineColor??Cesium__namespace.Color.WHITE,opacity:e[s(i._0x4e4204)],width:e[s(i._0x5c108c)]??1,arcType:e.arcType??e.clampToGround?Cesium__namespace.ArcType[s(i._0x3086d5)]:Cesium__namespace[s(3897)][s(3898)],...e.outlineStyle||{},...t||{}}}[_0x5e32ae(2924)](e,t,i){const s={_0x18bd33:2189,_0x51ea59:2189,_0x565df5:2667,_0x3eccfc:515,_0x4416ad:1268,_0x35046e:3865,_0x24fa89:821,_0x1f7dd7:575,_0xec32fe:1632},n=_0x5e32ae;var o;if(!this[n(s._0x18bd33)])return;const c=this._getOutlineStyle(t,i);if(c[n(575)]&&(this.style.diffHeight??0)===0&&(c.width>1||t.clampToGround||((o=this._entity_outlines)===null||o===void 0?void 0:o.length)>0)){if(this[n(s._0x51ea59)][n(s._0x565df5)]=![],this._entity_outlines)for(let _=0,l=this._entity_outlines.length;_<l;_++){const h=this[n(934)][_].polyline;if(e&&e[_]){let f=e[_];f instanceof Cesium__namespace.CallbackProperty?h.positions=f:Array.isArray(f)&&f[n(3402)]>0&&(Cesium__namespace.defined(c[n(3865)])&&(f=setPositionsHeight(f,c.height)),Cesium__namespace.defined(c.setHeight)&&(f=setPositionsHeight(f,c.setHeight)),Cesium__namespace[n(s._0x3eccfc)](c.addHeight)&&(f=addPositionsHeight(f,c.addHeight)),c.closure??!![]?h[n(2436)]=f[n(3611)](f[0]):h.positions=f)}PolylineStyleConver.toCesiumVal(c,h,!![])}else if(e){this._entity_outlines=[];for(let _=0,l=e[n(3402)];_<l;_++){let h=e[_];const f=PolylineStyleConver[n(s._0x4416ad)](c,{},!![]);h instanceof Cesium__namespace[n(3703)]?f[n(2436)]=h:Array.isArray(h)&&h.length>0&&(Cesium__namespace[n(515)](c.height)&&(h=setPositionsHeight(h,c[n(s._0x35046e)])),Cesium__namespace[n(s._0x3eccfc)](c.setHeight)&&(h=setPositionsHeight(h,c.setHeight)),Cesium__namespace[n(515)](c.addHeight)&&(h=addPositionsHeight(h,c[n(2530)])),c.closure??!![]?f.positions=h[n(3611)](h[0]):f.positions=h);const m=this[n(s._0x24fa89)]({id:this.id+"-outline"+_,polyline:f,show:this[n(s._0x1f7dd7)]});this.bindPickId(m),this._entity_outlines[n(3759)](m),this[n(3126)]&&this.dataSource.entities.add(m)}}return!![]}else{if(this._entity_outlines)for(let _=0,l=this._entity_outlines.length;_<l;_++){const h=this[n(934)][_][n(s._0xec32fe)];h[n(575)]=![]}return this.entityGraphic.outline=c.show,this.entityGraphic.outlineWidth=c.width,c.show&&(this[n(s._0x51ea59)].outlineColor=getCesiumColor(c[n(2092)],Cesium__namespace.Color.WHITE)),![]}}_updateOutlineOpacity(e){const t={_0x3c00a3:934,_0x2acbbb:3252,_0x1c5965:2667,_0x1a2a83:2674,_0x19a2d8:2021,_0x15cf4d:2674},i=_0x5e32ae;var s;if(this._entity_outlines&&this[i(t._0x3c00a3)].length>0)for(let o=0,c=this._entity_outlines.length;o<c;o++){var n;const _=this._entity_outlines[o].polyline;Cesium__namespace.defined(_==null||(n=_.material)===null||n===void 0?void 0:n[i(t._0x2acbbb)])?_.material.globalAlpha=e:this[i(2924)](null,this.style)}if((s=this.entityGraphic)!==null&&s!==void 0&&s.outline&&this[i(2189)][i(t._0x1c5965)].getValue()){const o=getCesiumColor(this[i(2189)].outlineColor,Cesium__namespace.Color.WHITE);!Cesium__namespace[i(515)](this[i(2189)]._outlineColor_alpha)&&(this.entityGraphic[i(t._0x1a2a83)]=o.alpha),this[i(2189)][i(t._0x19a2d8)]=o.withAlpha(this.entityGraphic[i(t._0x15cf4d)]*e)}}_updateOutlineToCallback(){const e={_0x2244b0:1632},t=_0x5e32ae;if(this._entity_outlines)for(let i=0,s=this._entity_outlines.length;i<s;i++){const n=this._entity_outlines[i];n[t(e._0x2244b0)].positions instanceof Cesium__namespace.CallbackProperty||(n.polyline.positions=new Cesium__namespace.CallbackProperty(o=>this.outlinePositions,![]))}}[_0x5e32ae(4224)](){const e={_0x4a63d6:3703,_0x2eddbb:466},t=_0x5e32ae;if(this._entity_outlines)for(let i=0,s=this[t(934)].length;i<s;i++){const n=this._entity_outlines[i];n.polyline.positions instanceof Cesium__namespace[t(e._0x4a63d6)]&&(n.polyline.positions=this[t(e._0x2eddbb)])}}setOpacity(e){const t={_0x3de905:4114,_0x577a54:3913},i=_0x5e32ae;if(this[i(t._0x3de905)].globalAlpha=e,this._updateEntityOpacity(this.entityGraphic,e)){this._updateLabelOpacity(e),this[i(1243)](e),this._updateExOpacity&&this._updateExOpacity(e);return}super[i(t._0x577a54)](e)}[_0x5e32ae(2981)](e,t){const i={_0x3a446a:3252,_0x13b980:1740,_0x2c7d6d:2092},s=_0x5e32ae,n=e==null?void 0:e.material;if(!n)return![];if(Cesium__namespace.defined(n==null?void 0:n.globalAlpha))return n[s(i._0x3a446a)]=t,!![];if(n[s(i._0x13b980)]==="Color"||n[s(i._0x13b980)]==="Image"){const o=getCesiumColor(n[s(i._0x2c7d6d)],Cesium__namespace.Color.WHITE);return!Cesium__namespace.defined(n._color_alpha)&&(n._color_alpha=o.alpha),n.color=o.withAlpha(n._color_alpha*t),!![]}return![]}startFlicker(e){const t=_0x5e32ae;!this.flickerEntity&&(this.flickerEntity=new FlickerEntity);const i=this[t(1830)].concat(this.czmObject);return this.flickerEntity[t(2784)](i,e),this.flickerEntity}[_0x5e32ae(2420)](){return this[_0x5e32ae({_0x1922e6:3664}._0x1922e6)]?this.flickerEntity.stopFlicker():null}startDraw(e){const t={_0x2e262d:1890,_0x3445f5:3579,_0x2981fa:3505,_0x9f2f14:4133,_0x25e92e:4008},i=_0x5e32ae;if(this._enabledDraw)return this;if(this._enabledDraw=!![],e&&this.addTo(e),!this[i(t._0x2e262d)])throw new Error("绘制时_map不能为空,请将对象添加到图层，并且图层已添加到Map");this._drawEndEventType=e.options.drawEndEventType??EventType.dblClick,this._drawDelEventType=e.options.drawDelEventType??EventType.rightClick,this._map.mouseEvent.noPickEntity=this[i(t._0x3445f5)],this._map[i(t._0x2981fa)](!![]),this[i(t._0x9f2f14)](![]),this._setPositionsToCallback(),this[i(t._0x25e92e)](),this.fire(EventType.drawStart,{drawtype:this.type,graphic:this},!![])}[_0x5e32ae(4231)](){const e={_0x34d2aa:2865,_0x5b4b4a:1890,_0x15afa8:3635,_0x33b97a:636,_0x5c8ed1:1966,_0x382d66:1957,_0xb54eea:1761,_0x5a34ff:3402,_0x5c36bc:2486,_0x66367f:3110,_0x22b13d:4056},t=_0x5e32ae;var i,s,n,o;if(!this[t(e._0x34d2aa)])return this;if(this[t(1940)](),this._updateLabelPosition(),this[t(e._0x5b4b4a)]._setEditCursor(![]),this.enableControl(!![]),this._map[t(e._0x15afa8)](),this._map[t(e._0x33b97a)].noPickEntity=null,this._enabledDraw=![],this.lastPointTemporary){var c;((c=this._positions_draw)===null||c===void 0?void 0:c.length)>0&&this._positions_draw[t(e._0x5c8ed1)](),this._position_draw&&(this[t(e._0x382d66)]=void 0)}if(this[t(2587)]=![],!this._position_draw&&(!this[t(e._0xb54eea)]||((i=this._positions_draw)===null||i===void 0?void 0:i.length)===0))return this[t(2004)](!![]),void 0;if(this[t(1761)]&&this._positions_draw[t(e._0x5a34ff)]<this._minPointNum)return this.remove(!![]),void 0;this[t(2873)].options.isRestorePositions&&this[t(1127)](),this.fire(EventType.drawCreated,{drawtype:this[t(3205)],positions:this._positions_draw},!![]),(s=this.options)!==null&&s!==void 0&&s[t(e._0x5c36bc)]&&this.options.success(this),(n=this.options)!==null&&n!==void 0&&(o=n[t(e._0x66367f)])!==null&&o!==void 0&&o.resolve&&this.options[t(3110)][t(e._0x22b13d)](this)}_setPositionsToCallback(){}_cancelPositionsCallback(){}[_0x5e32ae(4008)](){}[_0x5e32ae(1940)](){}_showDrawMouseMoveSmallTooltip(e){const t={_0x5b0937:4296,_0x510b5e:1761,_0x1f27fd:3402,_0x49fc88:3718,_0x18156e:1890},i=_0x5e32ae,s=e.endPosition??e[i(2180)];if(this._positions_draw.length<=1&&isPCBroswer())this._map.openSmallTooltip(s,this._map[i(t._0x5b0937)]("_单击开始绘制"));else if(this[i(t._0x510b5e)][i(t._0x1f27fd)]<this[i(4267)])this._map.openSmallTooltip(s,this._map.getLangText("_单击增加点"));else if(this[i(t._0x510b5e)].length>=this._maxPointNum)this._map.openSmallTooltip(s,this._map.getLangText("_单击完成绘制"));else{let n;if(isPCBroswer()){let o="";(this.options[i(2226)]??!![])&&(o=", "+this._map.getLangText(i(1064))),n=this[i(1890)].getLangText(i(t._0x49fc88))+o+"<br/>"+this._map.getLangText("_双击完成绘制")}else n=this._map[i(t._0x5b0937)](i(t._0x49fc88));this[i(t._0x18156e)].openSmallTooltip(s,n)}}_onMouseMoveHandler(e){const t=_0x5e32ae;this._showDrawMouseMoveSmallTooltip(e);const i=e[t(698)];if(i){if(this.options.validDrawPosition&&!this.options.validDrawPosition(i,this))return;this[t(2587)]&&this._positions_draw.pop(),this.lastPointTemporary=!![],this._positions_draw.push(i),this[t(2655)](![]),this.fire(EventType.drawMouseMove,{...e,drawtype:this.type,positions:this._positions_draw},!![])}}_onClickHandler(e){const t={_0xffda3b:2272,_0x3e0809:3593,_0xbcb376:3227,_0x3188d1:3227,_0x22a87d:3542,_0xf8ec1b:1761,_0x1c6a78:1966},i=_0x5e32ae,s=new Date().getTime()-(this._last_clickTime||0);if(this[i(t._0xffda3b)]&&s<200||(this._last_clickTime=new Date().getTime(),this[i(t._0x3e0809)]&&Math[i(3926)](this._last_clickPositionX-e[i(t._0xbcb376)].x)<10&&Math.abs(this._last_clickPositionY-e[i(t._0xbcb376)].y)<10))return;this._last_clickPositionX=e[i(t._0x3188d1)].x,this._last_clickPositionY=e.windowPosition.y;let n=e.cartesian;if(!n&&this.lastPointTemporary&&(n=this[i(1761)][this._positions_draw.length-1]),n){var o;if(this.options[i(3542)]&&!this.options[i(t._0x22a87d)](n,this))return;this[i(2587)]&&this[i(t._0xf8ec1b)][i(t._0x1c6a78)](),this.lastPointTemporary=![],this.removeNearPoint(),(o=this.options)!==null&&o!==void 0&&o.addHeight&&(n=addPositionsHeight(n,this.options.addHeight)),this._positions_draw[i(3759)](n),this.updateAttrForDrawing(![]),!isPCBroswer()&&this._showDrawMouseMoveSmallTooltip(e),this[i(1404)](EventType.drawAddPoint,{...e,drawtype:this.type,positions:this[i(t._0xf8ec1b)]},!![]),this[i(1761)].length>=this._maxPointNum&&this.stopDraw()}}[_0x5e32ae(1682)](e){const t={_0x53dda0:698,_0x10a336:4305,_0x553eae:1761},i=_0x5e32ae;this._positions_draw.pop();const s=e[i(t._0x53dda0)];s&&(this.lastPointTemporary&&this._positions_draw.pop(),this.lastPointTemporary=!![],this.fire(EventType[i(t._0x10a336)],{...e,drawtype:this.type,positions:this[i(t._0x553eae)]},!![]),this[i(1761)].push(s),this[i(2655)](![]))}_onDbClickHandler(e){const t={_0x24746a:3205},i=_0x5e32ae;e[i(t._0x24746a)]!==EventType[i(2321)]&&(this.lastPointTemporary=![]),this[i(892)](),this.endDraw()}removeNearPoint(){const e={_0x273ff5:1761,_0x47bdd8:3402,_0x1699ba:3916,_0x42f937:2889},t=_0x5e32ae;if(!(this._positions_draw[t(3402)]<3))for(let i=this[t(e._0x273ff5)][t(e._0x47bdd8)]-1;i>0;i--){const s=this[t(1761)][i],n=this[t(e._0x273ff5)][i-1];if(Cesium__namespace[t(e._0x1699ba)].distance(s,n)<.01)this._positions_draw[t(e._0x42f937)](i,1);else break}}[_0x5e32ae(3869)](){const e={_0x1de16e:2865,_0x564caf:4267,_0x4e12e0:2655},t=_0x5e32ae;return this[t(e._0x1de16e)]?this._positions_draw&&this._positions_draw.length<this[t(e._0x564caf)]?![]:(this[t(e._0x4e12e0)](![]),this.stopDraw(),!![]):![]}updateAttrForDrawing(e){}startEditing(){const e={_0x25affe:4183,_0x1410fc:3881,_0x396b11:4249},t=_0x5e32ae;if(this._enabledEdit)return this;if(this._enabledEdit=!![],!this._map)throw new Error(t(2763));this._map.mouseEvent.noPickEntity=this[t(3579)],this._map.mouseEvent[t(e._0x25affe)]=![],!this.editing&&(this.editing=new this.EditClass(this)),this[t(e._0x1410fc)].activate&&this[t(e._0x1410fc)].activate(),this._isCallbackPositions&&this[t(e._0x396b11)]()}stopEditing(){const e={_0x15f776:3126,_0x233146:3881,_0x186106:4114,_0x15d500:636},t=_0x5e32ae;var i;if(!this[t(463)]||!this[t(e._0x15f776)])return this;(i=this.editing)!==null&&i!==void 0&&i.disable&&this[t(e._0x233146)][t(1487)](),this[t(3798)]&&(this[t(e._0x186106)].distanceDisplayCondition&&this[t(4249)](),this[t(2781)]&&this._stopEditingHook(),this._map&&(this._map.closeSmallTooltip(),this[t(1890)][t(e._0x15d500)].noPickEntity=null,this._map.mouseEvent.enabledMoveTarget=!![]),this._enabledEdit=![])}}class BasePrimitive extends BaseGraphic{get czmObject(){return this[_0x5e32ae(3002)]}get czmObjectEx(){const e=[];return this._primitive_label&&e.push(this._primitive_label),this._primitive_outline&&e.push(this._primitive_outline),e}get primitiveCollection(){var e;return(e=this._layer)===null||e===void 0?void 0:e.primitiveCollection}get[_0x5e32ae(3150)](){return this._primitive}get geometryInstanceAttributes(){return this._primitive?this.getGeometryInstanceAttributes(this.id):this._primitive_outline?this.getGeometryInstanceAttributes(this.id,this._primitive_outline):null}get[_0x5e32ae(2221)](){const e={_0x418cf6:1877},t=_0x5e32ae;var i,s,n;return(i=this.primitive)===null||i===void 0||(s=i.appearance)===null||s===void 0||(n=s[t(e._0x418cf6)])===null||n===void 0?void 0:n.uniforms}get label(){return this._primitive_label?this._primitive_label:this.style.label}get[_0x5e32ae(2224)](){return this._enabledEdit}[_0x5e32ae(1945)](e,t){const i={_0x1ce3db:3205},s=_0x5e32ae;var n;const o=e.materialType||(t==null?void 0:t.materialType)||(t==null||(n=t.material)===null||n===void 0?void 0:n[s(i._0x1ce3db)]);return Cesium__namespace.defined(o)&&o!==Color$2?![]:!![]}_addedHook(e){const t={_0x18dd68:930,_0x5e4d91:3089,_0x36ce61:4005},i=_0x5e32ae;if(!this[i(575)])return;!e.material&&!e.materialType&&(e[i(2092)]||e.randomColor?e.materialType=Color$2:e.image&&(e.materialType=Image$1));const s=this._conversionStyle(e);if(s._isColorMaterial=this[i(1945)](e,s),this._primitive&&this[i(t._0x18dd68)][i(2004)](this[i(3002)]),(e.fill??!![])&&(this[i(3002)]=this[i(3963)](s)),this[i(t._0x5e4d91)]&&(this[i(t._0x18dd68)].remove(this[i(3089)]),delete this._primitive_outline),e[i(2667)]){const n=this._getOutlineStyle(e);n[i(t._0x36ce61)]>1&&(this.style.diffHeight??0)===0||n.clampToGround?this._primitive_outline=this._createPolylineOutline(n):(s.outlineStyle=n,this[i(3089)]=this._createPrimitive(s,!![]))}e.label&&this[i(2510)]()}_removedHook(){const e={_0x123612:4231,_0x37f7a5:783,_0x300fe9:3002,_0x19f38f:2004,_0x450f40:3089,_0x20138a:4189},t=_0x5e32ae;!this._noDestroy&&(this[t(e._0x123612)](),this[t(e._0x37f7a5)]()),this._primitive&&(this[t(930)].remove(this[t(e._0x300fe9)]),delete this[t(3002)]),this._primitive_outline&&(this.primitiveCollection[t(e._0x19f38f)](this[t(e._0x450f40)]),delete this._primitive_outline),this._primitive_label&&(this._layer.labelCollection[t(2004)](this[t(e._0x20138a)]),delete this._primitive_label)}_showHook(e){const t={_0x3ff225:2500},i=_0x5e32ae;this.isAdded&&(e?(this._addedHook(this.style),this.czmObject&&this.bindPickId(this.czmObject),this.czmObjectEx&&this.czmObjectEx[i(t._0x3ff225)](s=>{this.bindPickId(s)})):(this._noDestroy=!![],this._removedHook(),this._noDestroy=![]))}_conversionStyle(e){return e}_createPrimitive(e,t){const i={_0x416d70:777,_0x532efd:3798,_0x41b600:693,_0x2c0629:2197,_0x4daca9:533},s=_0x5e32ae;(!e[s(i._0x416d70)]&&e._isColorMaterial||t)&&(e.vertexFormat=this.defaultVertexFormat||Cesium__namespace.PerInstanceColorAppearance.VERTEX_FORMAT);const n={...this[s(i._0x532efd)],geometryInstances:this._createGeometryInstance(e,t),show:this.show,shadows:e.shadows};delete n[s(4114)],delete n[s(1528)],delete n.modelMatrix,n.geometryInstances.attributes=n.geometryInstances[s(i._0x41b600)]||{},n[s(i._0x2c0629)][s(i._0x41b600)].show=new Cesium__namespace.ShowGeometryInstanceAttribute(this.show),e.distanceDisplayCondition&&(n[s(2197)].attributes.distanceDisplayCondition=e.distanceDisplayCondition),!n[s(2374)]&&(n.appearance=this._createAppearance(e,n,t)),e.depthFail&&!n[s(2028)]&&(n.depthFailAppearance=this[s(664)](e,n,t));let o;return this.style.clampToGround?(n.classificationType=e.classificationType,this[s(3205)]==="polylineP"||this.type===s(i._0x4daca9)?o=this.primitiveCollection.add(new Cesium__namespace.GroundPolylinePrimitive(n)):o=this.primitiveCollection.add(new Cesium__namespace.GroundPrimitive(n))):e.classification?(n.classificationType=e.classificationType||Cesium__namespace.ClassificationType.CESIUM_3D_TILE,o=this.primitiveCollection.add(new Cesium__namespace[s(946)](n))):o=this.primitiveCollection[s(4084)](new Cesium__namespace.Primitive(n)),this.bindPickId(o),o}_getColorByColorMaterial(e,t=Cesium__namespace.Color.WHITE.withAlpha(.5)){const i={_0x339f9a:2221},s=_0x5e32ae;var n,o,c,_;return((n=e.material)===null||n===void 0||(o=n[s(i._0x339f9a)])===null||o===void 0?void 0:o.color)||((c=e.material)===null||c===void 0||(_=c.options)===null||_===void 0?void 0:_.color)||e.color||t}_createAppearance(e,t,i){const s={_0x274a4f:2168,_0xa0ee8b:2200,_0x4bb807:2995,_0x55a381:864,_0xb04605:693,_0x3e89ea:2197,_0x5e9961:2092,_0x305dbe:2261,_0x44b6dc:2412,_0x4e8307:4116,_0x15fc6a:2804},n=_0x5e32ae;if(e.material&&!e._isColorMaterial&&!i)return new Cesium__namespace[n(s._0x274a4f)]({...e});if(t.geometryInstances instanceof Cesium__namespace.GeometryInstance){let o;i&&e.outlineStyle?o=getColorByStyle(e.outlineStyle,Cesium__namespace[n(s._0xa0ee8b)][n(s._0x4bb807)]):o=this[n(s._0x55a381)](e),e.translucent=o[n(1202)]!==1,t[n(2197)][n(s._0xb04605)]=t[n(s._0x3e89ea)].attributes||{},t.geometryInstances.attributes[n(s._0x5e9961)]=Cesium__namespace[n(s._0x305dbe)].fromColor(o),e[n(s._0x44b6dc)]&&(t[n(s._0x3e89ea)].attributes.depthFailColor=Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(e.depthFailColor||o))}return Cesium__namespace.defined(this[n(s._0x4e8307)])&&(e[n(4116)]=this[n(s._0x4e8307)]),new Cesium__namespace[n(s._0x15fc6a)]({...e})}_createGeometryInstance(e,t){return this[_0x5e32ae(3798)].geometryInstances}_updateDiffHeight(e,t){const i={_0x7ac673:4114,_0x580671:515,_0x5e4324:3865,_0xd28bba:2436,_0x4a5ec5:2607},s=_0x5e32ae;if(!this[s(i._0x7ac673)].clampToGround){if(t){let n=0;Cesium__namespace.defined(this.style.height)?n=this.style.height:n=getMaxHeight(this.positions),e.height=n}if(Cesium__namespace.defined(this.style.diffHeight)&&!Cesium__namespace.defined(e.extrudedHeight)){let n=0;Cesium__namespace.defined(e.height)?n=e[s(3865)]:Cesium__namespace[s(i._0x580671)](this[s(4114)][s(i._0x5e4324)])?n=this.style.height:n=getMaxHeight(this[s(i._0xd28bba)]),e[s(i._0x4a5ec5)]=n+this[s(4114)].diffHeight}}}_updateStyleBaseHook(e){const t={_0x5dd7f4:2229},i=_0x5e32ae;e&&(this[i(t._0x5dd7f4)]&&this.type.startsWith(this._editing_entity.type)?this[i(t._0x5dd7f4)].setStyle(e):this.czmObject&&(this._updateLabelStyleHook(this.style,e),this._updateExOpacity&&Cesium__namespace.defined(e.globalAlpha)&&this._updateExOpacity(e.globalAlpha),(Cesium__namespace.defined(e.setHeight)||Cesium__namespace.defined(e.addHeight))&&(this.positions=this.positionsShow),this._updateStyleHook(this.style,e)))}_updateStyleHook(e,t){const i={_0x3be2e9:515,_0x5b2722:3699,_0x504cfb:515,_0x60f8c0:2667,_0xad15c6:3089,_0x88ceb9:3699,_0x59e1fd:4034},s=_0x5e32ae;if(e.materialType===Color$2&&(Cesium__namespace[s(i._0x3be2e9)](t.color)||Cesium__namespace.defined(t.opacity))){const n=getColorByStyle(e);if(n&&this[s(i._0x5b2722)](this._primitive,n,e))if(Cesium__namespace[s(i._0x504cfb)](t[s(i._0x60f8c0)])){if(this[s(i._0xad15c6)]){const c=this._getOutlineStyle(e);if(!c.materialType)if(c.show){if(this[s(i._0x88ceb9)](this._primitive_outline,getCesiumColor(c.color),e))return}else{this._primitive_outline&&(this.primitiveCollection.remove(this._primitive_outline),delete this._primitive_outline);return}}}else return}this[s(i._0x59e1fd)](e)}_updatePrimitiveForColorMaterial(e,t,i){const s={_0x27742f:515,_0x4b67ee:3205,_0x2fe196:2092,_0x28257e:1921,_0x42ad20:2939},n=_0x5e32ae;var o,c;if(!e)return![];const _=e==null||(o=e[n(2374)])===null||o===void 0||(c=o.material)===null||c===void 0?void 0:c[n(2221)];if(Cesium__namespace[n(s._0x27742f)](_==null?void 0:_.color)&&e[n(2374)].material[n(s._0x4b67ee)]===Color$2)return e.appearance.translucent=t.alpha!==1,_[n(s._0x2fe196)]=t,!![];const l=this[n(s._0x28257e)](this.id,e);return l!=null&&l.color?(l.color=Cesium__namespace.ColorGeometryInstanceAttribute.toValue(t),l.depthFailColor&&(i.depthFailColor||i.depthFail)&&(l[n(s._0x42ad20)]=Cesium__namespace.ColorGeometryInstanceAttribute.toValue(getCesiumColor(i.depthFailColor,t))),!![]):![]}[_0x5e32ae(3913)](e){const t={_0x5c075d:3089},i=_0x5e32ae;if(this.style[i(3252)]=e,this._updatePrimitiveOpacity(this._primitive,e)){this[i(1548)](this[i(t._0x5c075d)],e),this._updateLabelOpacity(e),this._updateExOpacity&&this._updateExOpacity(e);return}super.setOpacity(e)}_updatePrimitiveOpacity(e,t){const i={_0x5d7f70:2092,_0x219a3d:1202,_0x5b8324:3252,_0x50ef8f:1034,_0x41866d:2855,_0xdb8d91:2939},s=_0x5e32ae;if(!e)return![];try{var n,o;const c=e==null||(n=e.appearance)===null||n===void 0||(o=n.material)===null||o===void 0?void 0:o[s(2221)];if(c){if(Cesium__namespace.defined(c[s(3252)]))return e[s(2374)].translucent=t!==1,c[s(3252)]=t,!![];if((e[s(2374)].material.type===Color$2||e.appearance.material.type===Image$1)&&Cesium__namespace.defined(c[s(i._0x5d7f70)]))return!Cesium__namespace.defined(e[s(2718)])&&(e._uniforms_color_alpha=c.color[s(i._0x219a3d)]),c.color.alpha=e._uniforms_color_alpha*t,e.appearance.translucent=c.color[s(i._0x219a3d)]!==1,!![];if(e.appearance.material[s(3205)]===Water$1)return!Cesium__namespace.defined(e._uniforms_baseWaterColor_alpha)&&(e._uniforms_baseWaterColor_alpha=c[s(2022)].alpha,e[s(1034)]=c.blendColor.alpha),this[s(i._0x5b8324)]!==1&&(c.baseWaterColor.alpha=e._uniforms_baseWaterColor_alpha*t,c.blendColor.alpha=e[s(i._0x50ef8f)]*t),!![]}const _=this[s(1921)](this.id,e);if(_!=null&&_[s(i._0x5d7f70)]){!Cesium__namespace.defined(e._attributes_color_alpha)&&(e[s(1554)]=_.color[3]/255);const l=e._attributes_color_alpha*t;return _.color=new Uint8Array([_[s(2092)][0],_.color[1],_.color[2],Cesium__namespace.Color[s(i._0x41866d)](l)]),e.appearance.translucent=l!==1,_[s(i._0xdb8d91)]&&(!Cesium__namespace.defined(e._attributes_depthFailColor_alpha)&&(e[s(3145)]=_.depthFailColor[3]/255),_.depthFailColor=new Uint8Array([_.depthFailColor[0],_.depthFailColor[1],_.depthFailColor[2],Cesium__namespace.Color[s(i._0x41866d)](e._attributes_depthFailColor_alpha*t)])),!![]}}catch{}return![]}getGeometryInstanceAttributes(e,t){const i={_0x4929f8:4114},s=_0x5e32ae;return t=t||this[s(3002)],!t||!t.getGeometryInstanceAttributes||this[s(i._0x4929f8)].clampToGround&&!t._primitive?null:t.getGeometryInstanceAttributes(e)}[_0x5e32ae(2989)](e){this._primitive_label&&this._primitive_label.show&&LabelStyleConver.setOpacity(this._primitive_label,e)}[_0x5e32ae(4034)](e){const t={_0x206955:1679,_0x483711:1830},i=_0x5e32ae;return this.isAdded&&this.show&&(this._noDestroy=!![],this._removedHook(),this._noDestroy=![],this._addedHook(e||this.style),this[i(1679)]&&this.bindPickId(this[i(t._0x206955)]),this.czmObjectEx&&this[i(t._0x483711)].forEach(s=>{this.bindPickId(s)})),this}_updatePositionsHook(){this[_0x5e32ae({_0x479584:4034}._0x479584)]()}_updateLabelStyleHook(e,t){const i={_0x463e79:736,_0xf76628:3252},s=_0x5e32ae;if(t!=null&&t[s(i._0x463e79)])if(this._primitive_label){var n,o,c,_;LabelStyleConver.toCesiumVal(e.label,this._primitive_label,this.attr),(Cesium__namespace.defined(t==null||(n=t[s(736)])===null||n===void 0?void 0:n.position)||Cesium__namespace.defined(t==null||(o=t.label)===null||o===void 0?void 0:o.height)||Cesium__namespace.defined(t==null||(c=t.label)===null||c===void 0?void 0:c.addHeight)||Cesium__namespace[s(515)](t==null||(_=t[s(i._0x463e79)])===null||_===void 0?void 0:_.setHeight))&&this._updateLabelPosition()}else this[s(2510)]();else Cesium__namespace.defined(t==null?void 0:t[s(i._0xf76628)])&&this._updateLabelOpacity(t[s(3252)])}_addLabel(){const e={_0x4381f3:1260,_0x5d9950:4189,_0x1d2890:2414},t=_0x5e32ae,i=this[t(4114)][t(736)];if(!i||!i[t(e._0x4381f3)])return;Cesium__namespace.defined(this.style.clampToGround)&&!Cesium__namespace.defined(i.clampToGround)&&!Cesium__namespace[t(515)](i.height)&&(i.clampToGround=this.style.clampToGround);const s=LabelStyleConver[t(1268)](i,{},this.attr);return s.show=this.show,s.position=this._getLablePosition(),this[t(4189)]&&this._layer.labelCollection[t(2004)](this[t(e._0x5d9950)]),this._primitive_label=this._layer.labelCollection.add(s),this[t(e._0x1d2890)](this._primitive_label),this._primitive_label}[_0x5e32ae(1288)](){this._primitive_label&&!this._primitive_label.isDestroyed()&&(this._primitive_label.position=this._getLablePosition())}_getLablePosition(){const e={_0x3b5ead:736,_0x4d664c:2180,_0x5db851:2180,_0x1b8230:1426,_0x2af7b2:515,_0x445318:4114},t=_0x5e32ae,i=this.style[t(e._0x3b5ead)];let s;if(i[t(e._0x4d664c)])if(i.position==="center")s=this.centerOfMass;else if(isString(i[t(2180)])){const c=template(i[t(e._0x5db851)],this.attr,!![]);c&&(s=LngLatPoint.parse(c).toCartesian())}else s=LngLatPoint[t(e._0x1b8230)](i.position).toCartesian();if(!s&&(s=this.center),!s)return new Cesium__namespace[t(3916)];if(Cesium__namespace[t(e._0x2af7b2)](i[t(3865)])||Cesium__namespace.defined(this.style.height)){const c=i.height??this[t(4114)].height;s=setPositionsHeight(s,c)}Cesium__namespace.defined(this[t(e._0x445318)].diffHeight)&&(s=addPositionsHeight(s,this.style[t(2999)]));let n=i.setHeight;Cesium__namespace.defined(n)&&(isString(n)&&(n=Number(template(n,this.attr,!![])),isNaN(n)&&(n=0)),s=setPositionsHeight(s,n));let o=i.addHeight;return Cesium__namespace.defined(o)&&(isString(o)&&(o=Number(template(o,this.attr,!![])),isNaN(o)&&(o=0)),s=addPositionsHeight(s,o)),s}_getOutlineStyle(e,t){const i={_0x24dbe7:2755,_0x2f3a4d:2825},s=_0x5e32ae,n={...e};return delete n.material,delete n.materialType,delete n.materialOptions,delete n.outline,delete n.outlineColor,delete n.outlineOpacity,delete n.outlineWidth,delete n[s(i._0x24dbe7)],{...n,show:e.outline??![],color:e.outlineColor??Cesium__namespace.Color[s(2995)],opacity:e[s(3997)],width:e.outlineWidth??1,arcType:e[s(3826)]??e[s(i._0x2f3a4d)]?Cesium__namespace.ArcType.GEODESIC:Cesium__namespace[s(3897)].NONE,...e.outlineStyle||{},...t||{}}}_getPolylineOutlinePositions(){return[this.positions]}_createPolylineOutline(e){const t={_0x5f0c97:1268,_0x4b56b7:515,_0x4408d5:3865,_0x284eac:3611,_0x5161eb:2200,_0x2fcf7f:3511,_0x6b737a:864,_0x190fbc:575,_0x5d838b:3402,_0x49524a:2374,_0x2876d3:3647},i=_0x5e32ae,s=PolylineStyleConver[i(t._0x5f0c97)](e),n=s.clampToGround?Cesium__namespace.GroundPolylineGeometry:Cesium__namespace.PolylineGeometry,o=[],c=this._getPolylineOutlinePositions();for(let h=0,f=c.length;h<f;h++){let m=c[h];if(!m||m.length===0)continue;Cesium__namespace[i(t._0x4b56b7)](e[i(3865)])&&(m=setPositionsHeight(m,e[i(t._0x4408d5)])),Cesium__namespace.defined(e[i(2554)])&&(m=setPositionsHeight(m,e.setHeight)),Cesium__namespace.defined(e.addHeight)&&(m=addPositionsHeight(m,e.addHeight)),m.length>0&&(m=m[i(t._0x284eac)](m[0]));const g={...s};g.positions=m,(!g.material||g.material.type===i(t._0x5161eb))&&(g.vertexFormat=Cesium__namespace.PolylineColorAppearance[i(t._0x2fcf7f)]);const C=this[i(t._0x6b737a)](g),E=new Cesium__namespace.GeometryInstance({id:this.id,geometry:new n(g),attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(C),distanceDisplayCondition:s[i(1430)],show:new Cesium__namespace.ShowGeometryInstanceAttribute(this[i(t._0x190fbc)])}});o[i(3759)](E)}if(o[i(t._0x5d838b)]===0)return;const _={...this.options,geometryInstances:o,show:this.show,shadows:s[i(4193)]};delete _.style,delete _.attr,s.material&&!s.classification?_[i(t._0x49524a)]=new Cesium__namespace[i(t._0x2876d3)]({...s}):_.appearance=new Cesium__namespace.PolylineColorAppearance({...s});let l;return this[i(4114)].clampToGround?(_.classificationType=s.classificationType,l=this[i(930)].add(new Cesium__namespace.GroundPolylinePrimitive(_))):l=this.primitiveCollection.add(new Cesium__namespace[i(1101)](_)),this.bindPickId(l),l}[_0x5e32ae(2932)](e,t=!![]){const i={_0x1f3bf7:2873,_0x2b8190:3205,_0x4b34a0:3601,_0x37a95f:3863},s=_0x5e32ae;var n;t&&(this._map.closeHighlight(),this._map.last_highlighGraphic=this);const o=e||this._highlightOptions||((n=this[s(i._0x1f3bf7)])===null||n===void 0?void 0:n._highlightOptions);if(o){const c=[];for(const l in o)l!==s(i._0x2b8190)&&!Cesium__namespace[s(515)](this[s(4114)][l])&&c.push(l);c.length>0&&logWarn("openHighlight：原有style中不存在以下属性，关闭高亮时将无法恢复",c);const _=merge(clone(this.style),o);this[s(i._0x4b34a0)](_,o),this._updateLabelStyleHook(_,o),this.fire(EventType[s(i._0x37a95f)],{},!![])}}[_0x5e32ae(567)](){const e={_0x27d05b:1890,_0x6d2316:4114,_0x95d4e0:4114},t=_0x5e32ae;var i;!this.isAdded||((i=this[t(e._0x27d05b)])===null||i===void 0?void 0:i.last_highlighGraphic)!==this||(this._updateStyleHook(this.style,this.style),this._updateLabelStyleHook(this[t(e._0x6d2316)],this[t(e._0x95d4e0)]),this[t(1890)]._clearLastHighlight(),this.fire(EventType.highlightClose,{},!![]))}_replaceFragmentShaderSourceByStyle(e){const t=_0x5e32ae;return this.style.flat&&(e=`#define FLAT
`+e),this[t(4114)][t(4285)]&&(e=`#define FACE_FORWARD
`+e),e}startDraw(e){const t={_0x484c52:2865,_0xa1975b:4148,_0x3d6550:902,_0x54de24:2229},i={_0x2329d7:2118},s=_0x5e32ae;if(!this[s(4148)]){logInfo("对象不支持标绘",this);return}if(this._enabledDraw)return this;if(this[s(t._0x484c52)]=!![],this.show=![],e&&this.addTo(e),!this._map)throw new Error(s(3544));this._editing_entity=this[s(t._0xa1975b)]({minPointNum:this.options[s(t._0x3d6550)],maxPointNum:this.options.maxPointNum,style:this[s(1438)](),private:!![]},!![]),this._editing_entity[s(3476)]=this,this._editing_entity.once(EventType[s(1422)],n=>{this.stopDraw()}),this[s(t._0x54de24)].on([EventType.drawAddPoint,EventType[s(3602)],EventType.drawRemovePoint],n=>{const o=s;n[o(i._0x2329d7)]=this,n.drawtype=this.type,this.fire(n[o(3205)],n,!![])}),this._editing_entity[s(1860)](this._map.graphicLayer),this[s(1404)](EventType[s(3790)],{drawtype:this.type},!![])}stopDraw(){const e={_0x54598d:1422,_0x40963e:4056},t=_0x5e32ae;var i,s,n;if(!this._enabledDraw||!this._editing_entity)return this;if(this._enabledDraw=![],!this._editing_entity.stopDraw()){this[t(2004)](!![]);return}this._updateDrawEntityToThis(),this.fire(EventType[t(e._0x54598d)],{drawtype:this.type,positions:this.positions},!![]),(i=this[t(3798)])!==null&&i!==void 0&&i.success&&this.options[t(2486)](this),(s=this.options)!==null&&s!==void 0&&(n=s[t(3110)])!==null&&n!==void 0&&n[t(e._0x40963e)]&&this.options._promise.resolve(this)}endDraw(){const e={_0x2d357f:2229},t=_0x5e32ae;return!this._enabledDraw||!this[t(2229)]?![]:this[t(e._0x2d357f)].endDraw()?!![]:![]}_getDrawEntityStyle(){const e={_0xbb3caf:1483},t=_0x5e32ae,i=this._style2JsonBase(this.style,![]);return delete i[t(e._0xbb3caf)],i}_getDrawPointEntityClass(e,t){const i={_0x11fb50:4114},s=_0x5e32ae;return e.drawShow=!t,e[s(i._0x11fb50)]=getEditPointStyle(),create$4(s(3381),e)}_updateDrawEntityToThis(){const e={_0x14cb77:4114},t=_0x5e32ae,i=this._editing_entity.toJSON();this[t(2229)].remove(!![]),delete this._editing_entity,i.style&&this[t(3205)].startsWith(i[t(3205)])?(this.options.style=merge(this.options.style,i.style),this._updateStyleBaseHook(this.options[t(e._0x14cb77)])):this._updateStyleByEdit&&this._updateStyleByEdit(i.style,i),i.position?this.position=i.position:i[t(2436)]&&(this[t(2436)]=i.positions),this.show=!![]}[_0x5e32ae(4244)](){const e={_0xe49cd8:1890,_0x9ba191:4148,_0xa32c45:4205,_0x202d45:2679,_0x5824ea:575,_0xcf9571:2229,_0x5df992:3381,_0x132b3e:2189},t={_0x9d6d96:2005},i=_0x5e32ae;if(this._enabledEdit)return this;if(this._enabledEdit=!![],!this[i(e._0xe49cd8)])throw new Error("编辑时_map不能为空,请将对象添加到图层，并且图层已添加到Map");this._editing_entity=this[i(e._0x9ba191)]({hasMoveEdit:this.options.hasMoveEdit,hasHeightEdit:this.options.hasHeightEdit,style:this[i(1438)](),position:this.position,positions:this.positions,private:!![]},![]),this._startEditingHook&&this._startEditingHook(this._editing_entity),this._editing_entity.parent=this;const s=this.type[i(e._0xa32c45)](this._editing_entity.type);this._editing_entity[i(2211)](EventType.editStop,n=>{this.stopEditing()}),this._editing_entity.on(EventType[i(856)],n=>{const o=i,c=this._editing_entity.toJSON();c.style&&s?this.options.style=merge(this[o(3798)][o(4114)],c[o(4114)]):this[o(t._0x9d6d96)]&&this[o(2005)](c[o(4114)],c)}),this._editing_entity.on([EventType.editAddPoint,EventType.editMovePoint,EventType[i(e._0x202d45)]],n=>{const o=i;this._editing_entity._position_draw?s?(this._point=LngLatPoint.parse(this._editing_entity._position_draw),this._position=this._editing_entity._position_draw):this.position=this._editing_entity._position_draw:this._editing_entity._positions_draw&&(s?(this._points=LngLatArray[o(2496)](this._editing_entity._positions_draw),this._positions=this._editing_entity._positions_draw):this.positions=this._editing_entity._positions_draw)}),this[i(1890)][i(2839)].addGraphic(this._editing_entity),this._editing_entity.startEditing(),s?this[i(e._0x5824ea)]=![]:this[i(e._0xcf9571)].type!==i(e._0x5df992)&&(this[i(e._0xcf9571)][i(e._0x132b3e)][i(575)]=![])}stopEditing(){const e={_0x3d0eeb:2229},t=_0x5e32ae;if(!this._enabledEdit||!this[t(e._0x3d0eeb)])return this;this._enabledEdit=![],this._updateDrawEntityToThis()}}class BasePointPrimitive extends BasePrimitive{constructor(e={}){const t={_0x23a317:2294,_0x4970ee:515,_0x5edad8:4114,_0x17cb01:3768,_0x394594:4102,_0x4960ea:3977},i=_0x5e32ae;if(super(e),this[i(4009)]=this.options[i(2639)]??!![],e.positions&&(this[i(2436)]=e.positions),e[i(2180)])this.position=e.position;else if(e[i(t._0x23a317)]&&(this._position=Cesium__namespace.Matrix4.getTranslation(e.modelMatrix,new Cesium__namespace.Cartesian3),this._point=LngLatPoint.parse(this[i(918)]),!Cesium__namespace[i(t._0x4970ee)](this[i(t._0x5edad8)].heading))){const s=Cesium__namespace.Matrix4.getMatrix3(e.modelMatrix,new Cesium__namespace[i(t._0x17cb01)]),n=Cesium__namespace[i(t._0x394594)].getMatrix3(Cesium__namespace[i(2911)][i(3684)](this._position),new Cesium__namespace.Matrix3),o=Cesium__namespace.Matrix3[i(2898)](n,0,new Cesium__namespace.Cartesian3),c=Cesium__namespace.Matrix3.getColumn(n,1,new Cesium__namespace[i(3916)]),_=Cesium__namespace.Matrix3.getColumn(n,2,new Cesium__namespace.Cartesian3);let l=Cesium__namespace[i(3768)][i(2898)](s,0,new Cesium__namespace.Cartesian3);l=Cesium__namespace.Cartesian3.cross(l,_,l),l=Cesium__namespace[i(3916)].cross(_,l,l),l=Cesium__namespace.Cartesian3.normalize(l,l);let h=Cesium__namespace.Cartesian3.angleBetween(o,l);Cesium__namespace.Cartesian3.angleBetween(c,l)>Math.PI*.5&&(h=2*Math.PI-h),this.style[i(t._0x4960ea)]=Cesium__namespace[i(1286)].toDegrees(h)}}get[_0x5e32ae(2180)](){const e={_0x3d4cde:837},t=_0x5e32ae;if(this._position)return this._position;if(this.property){var i,s;return this.property.getValue((i=this._map)===null||i===void 0||(s=i.clock)===null||s===void 0?void 0:s[t(e._0x3d4cde)])}}set position(e){const t={_0x53d628:918,_0x5d010b:4114},i=_0x5e32ae;var s;if(this._forPositionProperty(e))return this[i(t._0x53d628)];if(this._point=LngLatPoint.parse(e),this._point){let n=this[i(t._0x5d010b)].setHeight;Cesium__namespace.defined(n)&&(isString(n)&&(n=Number(template(n,this.attr,!![])),isNaN(n)&&(n=0)),this._point.alt=n);const o=this.getAddHeight();o!==0&&(this[i(2359)][i(3984)]=this[i(2359)].alt+o)}this._position=(s=this._point)===null||s===void 0?void 0:s.toCartesian(),this[i(3798)].modelMatrix&&delete this.options.modelMatrix,this.czmObject&&this._updatePositionsHook(),this._primitive_label&&this._updateLabelPosition(),this._editing_entity&&(this[i(2229)].position=this[i(918)]),this.fire(EventType.updatePosition,{position:this._position})}get positionsShow(){return this.positions}get positionShow(){return this._position}get point(){return this._point}get coordinate(){return this.getCoordinate()}get center(){return this.position}get centerPoint(){return this[_0x5e32ae(3381)]}get height(){const e=_0x5e32ae;var t;return(t=this[e(3381)])===null||t===void 0?void 0:t.alt}set height(e){const t={_0x323159:3381},i=_0x5e32ae;this.point.alt=e,this.position=this[i(t._0x323159)]}get[_0x5e32ae(2436)](){return this.position?[this.position]:null}set[_0x5e32ae(2436)](e){const t={_0x115599:2180},i=_0x5e32ae;e&&e.length>0&&(this[i(t._0x115599)]=e[0])}get points(){return[this.point]}get coordinates(){return[this[_0x5e32ae({_0x1c1245:2961}._0x1c1245)]]}get[_0x5e32ae(908)](){return this._orientation||this.options.orientation}set orientation(e){this._orientation=e}get modelMatrix(){const e=_0x5e32ae;return this.options[e(2294)]?this.options.modelMatrix:this._getModelMatrix(this.position,this._orientation)}get heading(){const e={_0x1f1620:1984,_0x381263:3977},t=_0x5e32ae;return Cesium__namespace.defined(this._heading_reality)?Cesium__namespace.Math[t(e._0x1f1620)](this._heading_reality):this.style[t(e._0x381263)]??0}set heading(e){this.style.heading=e,this.updateModelMatrix()}get pitch(){const e={_0x487b9f:515},t=_0x5e32ae;return Cesium__namespace[t(e._0x487b9f)](this._pitch_reality)?Cesium__namespace.Math.toDegrees(this[t(1970)]):this.style.pitch??0}set pitch(e){const t={_0x2bf573:1537},i=_0x5e32ae;this[i(4114)].pitch=e,this[i(t._0x2bf573)]()}get roll(){const e=_0x5e32ae;return Cesium__namespace.defined(this._roll_reality)?Cesium__namespace.Math[e(1984)](this._roll_reality):this[e(4114)].roll??0}set roll(e){const t=_0x5e32ae;this.style.roll=e,this[t(1537)]()}get[_0x5e32ae(977)](){const e={_0x3aa269:3798,_0x3f5740:977},t=_0x5e32ae;if(this.options.objectsToExclude)return this[t(e._0x3aa269)][t(e._0x3f5740)];if(this._objectsToExcludee)return this._objectsToExclude}set objectsToExclude(e){this._objectsToExclude=e}get trackedEntity(){const e={_0x91ea41:4084},t={_0x107747:918},i=_0x5e32ae;return!this._trackedEntity&&(this._trackedEntity=this[i(2873)].dataSource.entities[i(e._0x91ea41)]({position:this.property||new Cesium__namespace.CallbackProperty(s=>this[i(t._0x107747)],![]),point:{pixelSize:2,color:Cesium__namespace.Color.WHITE.withAlpha(.01)}})),this._trackedEntity}get debugAxis(){return this[_0x5e32ae({_0x4a9742:2096}._0x4a9742)]}set debugAxis(e){const t={_0x4af0ab:578,_0x450c27:1170,_0xb92bc4:4195},i=_0x5e32ae;if(this._debugAxis=e,!this[i(t._0x4af0ab)]){const s=Math.max(Cesium__namespace.Cartographic.fromCartesian(this.positionShow).height*.06,100);this.debugAxisPrimitive=this._layer[i(930)].add(new Cesium__namespace[i(t._0x450c27)]({modelMatrix:this.modelMatrix,length:s,width:5})),this.debugAxisPrimitive._tooltipConfig={content:`<span style="color: red;">红色</span> 是 X轴<br/>
                  <span style="color: green;">绿色</span> 是 Y轴<br/>
                  <span style="color: blue;">蓝色</span> 是 Z轴`,options:this.options.tooltipOptions},this[i(t._0xb92bc4)]&&(this[i(578)][i(3688)]=setInterval(()=>{this.debugAxisPrimitive.modelMatrix=this.modelMatrix},300)),this.bindPickId(this.debugAxisPrimitive)}this.debugAxisPrimitive.show=e}get debugAxisLength(){const e={_0x3631b5:578,_0x4e240c:3402},t=_0x5e32ae;return this[t(e._0x3631b5)]?this.debugAxisPrimitive[t(e._0x4e240c)]:0}set[_0x5e32ae(4165)](e){!this.debugAxisPrimitive&&(this.debugAxis=!![]),this.debugAxisPrimitive.length=e}_addedHook(e){const t={_0x5582a3:3327},i=_0x5e32ae;!this.show||!this.position||(this[i(t._0x5582a3)](this[i(3798)].position),super[i(4158)](e))}[_0x5e32ae(2442)](e){const t={_0x32b5c8:2406,_0x241d7d:2004},i=_0x5e32ae;this._trackedEntity&&(this._map.trackedEntity===this[i(t._0x32b5c8)]&&(this._map.trackedEntity=void 0),this._layer.dataSource.entities[i(t._0x241d7d)](this[i(2406)]),delete this._trackedEntity),super._removedHook(e)}[_0x5e32ae(1537)](){const e={_0x391e41:2294},t=_0x5e32ae;this._primitive&&(this._primitive.modelMatrix=this[t(e._0x391e41)])}_getModelMatrix(e,t){const i={_0x3eda4a:4114,_0x789ad4:4175,_0x3afdab:810,_0x1c0af8:515,_0xc7b9ef:4114,_0x5f1d74:557,_0x9e640e:3206},s=_0x5e32ae;if(!e)return Cesium__namespace[s(4102)].IDENTITY;let n=Cesium__namespace.Math.toRadians(this.style[s(3977)]||0),o=Cesium__namespace.Math[s(1567)](this[s(4114)].pitch||0),c=Cesium__namespace.Math.toRadians(this.style.roll||0);const _=this[s(i._0x3eda4a)].mergeOrientation||!Cesium__namespace.defined(this[s(i._0x3eda4a)].heading)||!Cesium__namespace.defined(this[s(4114)][s(2625)])||!Cesium__namespace.defined(this.style[s(i._0x789ad4)]);if(t&&_){if(t[s(i._0x3afdab)]){var l,h;t=t.getValue((l=this._map)===null||l===void 0||(h=l.clock)===null||h===void 0?void 0:h.currentTime)}if(t){const m=getHeadingPitchRollByOrientation(e,t);this[s(4114)].mergeOrientation?(n+=m.heading,c+=m.roll,o+=m.pitch):(!Cesium__namespace[s(i._0x1c0af8)](this.style.heading)&&(n=m.heading),!Cesium__namespace.defined(this[s(i._0xc7b9ef)].roll)&&(c=m.roll),!Cesium__namespace.defined(this.style.pitch)&&(o=m.pitch))}}this._heading_reality=n,this._pitch_reality=o,this._roll_reality=c;const f=Cesium__namespace[s(2911)].headingPitchRollToFixedFrame(e,new Cesium__namespace.HeadingPitchRoll(n,o,c),Cesium__namespace.Ellipsoid[s(i._0x5f1d74)],this[s(3798)][s(2483)]);return Cesium__namespace.defined(this.scaleX)&&Cesium__namespace.defined(this.scaleY)&&Cesium__namespace.defined(this.scaleZ)?Cesium__namespace.Matrix4.multiplyByScale(f,new Cesium__namespace[s(3916)](this[s(3245)],this.scaleY,this.scaleZ),f):Cesium__namespace.defined(this.style[s(3206)])&&Cesium__namespace.Matrix4.multiplyByScale(f,new Cesium__namespace[s(3916)](this[s(4114)].scale,this.style.scale,this[s(4114)][s(i._0x9e640e)]),f),f}_getGeoJsonGeometry(e){const t={_0x4a4255:3743},i=_0x5e32ae;return{type:i(t._0x4a4255),coordinates:this[i(3405)](e==null?void 0:e[i(1594)])}}_forPositionProperty(e){const t={_0x46ef92:3703,_0x2f44d1:1160},i=_0x5e32ae;return e instanceof Cesium__namespace[i(t._0x46ef92)]||e instanceof Cesium__namespace[i(t._0x2f44d1)]?(this.options.frameRate=this.options.frameRate??20,this._orientation=this.options.orientation||new Cesium__namespace.VelocityOrientationProperty(e),this.property=e,this.bindUpdateEvent(),!![]):![]}update(e){const t=_0x5e32ae;this.show&&this.property&&(this[t(918)]=this.property.getValue(e[t(1572)]),this.czmObject&&this._updatePositionsHook(),this._primitive_label&&this._updateLabelPosition())}_getPopupPosition(){return this[_0x5e32ae(4195)]||this.position||this.center}addDynamicPosition(e,t){const i={_0x5bca9c:1228,_0x2ab7ce:1903,_0x194c4c:3798,_0x58ca87:4014},s=_0x5e32ae;var n,o,c,_;!this._sampledPositionProperty&&this._initSampledPositionProperty(),this._removeDynamicPosition();const l=((n=this._map)===null||n===void 0||(o=n[s(1949)])===null||o===void 0?void 0:o.currentTime)||Cesium__namespace.JulianDate[s(i._0x5bca9c)]();t?isNumber(t)?t=Cesium__namespace.JulianDate.addSeconds(l,t,new Cesium__namespace.JulianDate):isString(t)?t.indexOf("Z")===-1?t=Cesium__namespace.JulianDate.fromDate(new Date(t)):t=Cesium__namespace[s(527)][s(i._0x2ab7ce)](t):t instanceof Date&&(t=Cesium__namespace[s(527)].fromDate(t)):t=l,e=LngLatPoint.parse(e);const h=(c=this._sampledPositionProperty)===null||c===void 0||(_=c._property)===null||_===void 0?void 0:_._times;if(this[s(i._0x194c4c)].autoMiddleDynamicPosition&&(h==null?void 0:h.length)>0&&this[s(918)]){const m=h[h[s(3402)]-1];if(Cesium__namespace.JulianDate.secondsDifference(l,m)>.3){let g=this._position;this[s(789)]&&(g=getOnLinePointByLen(this[s(789)],this._position,.01,!![])),g=setPositionsHeight(g,e.alt||0),this._sampledPositionProperty.addSample(l,g)}}const f=e.toCartesian();return this._sampledPositionProperty[s(i._0x58ca87)](t,f),this._lastDynamicPosition=f,this}[_0x5e32ae(4263)](){const e={_0x252dd6:3683,_0x527d4f:3835,_0x9cc135:3898,_0x50f794:762,_0x4a4712:4081},t={_0x52d788:3798,_0x282d7b:4241,_0x12d501:1890,_0x3d524c:2873,_0x1526b9:977,_0x3fc26a:3739,_0x523772:2793},i=_0x5e32ae;this._clampToTilesetFrame=-1,this._frameRateHeight=this.options.frameRateHeight??30,this._maxCacheCount=this.options.maxCacheCount??50;let s;this._sampledPositionProperty?s=this._sampledPositionProperty:(s=new Cesium__namespace[i(1160)](this.options.referenceFrame,this.options[i(e._0x252dd6)]),s[i(e._0x527d4f)]=this.options.forwardExtrapolationType??Cesium__namespace.ExtrapolationType[i(e._0x9cc135)],s.backwardExtrapolationType=this.options.backwardExtrapolationType??Cesium__namespace[i(e._0x50f794)].NONE,this._sampledPositionProperty=s),this.property=new Cesium__namespace.CallbackProperty(n=>{const o=i;if(!this._map)return;let c=s.getValue(n);if(c&&this[o(t._0x52d788)].clampToTileset){if(this[o(t._0x282d7b)]++,!this[o(3739)]||this._clampToTilesetFrame%this._frameRateHeight===0){const _=getHeight(this[o(t._0x12d501)].scene,c,{objectsToExclude:this[o(t._0x3d524c)][o(t._0x1526b9)],has3dtiles:!![]});_&&(this[o(t._0x3fc26a)]=_)}if(this._clampToTilesetHeight){const _=Cesium__namespace.Cartographic.fromCartesian(c);c=Cesium__namespace.Cartesian3[o(t._0x523772)](_.longitude,_.latitude,this._clampToTilesetHeight+this.getAddHeight())}}return c},![]),this._orientation=this.options.orientation||new Cesium__namespace.VelocityOrientationProperty(s),this[i(e._0x4a4712)]()}_removeDynamicPosition(){const e={_0x5b6743:1904,_0x101e5f:4164},t=_0x5e32ae;var i,s;if(this[t(e._0x5b6743)]<1)return;const n=(i=this._sampledPositionProperty)===null||i===void 0||(s=i._property)===null||s===void 0?void 0:s[t(3528)];if(!n||n.length===0)return;const o=n.length-this._maxCacheCount-1;o>0&&this[t(2046)].removeSamples(new Cesium__namespace[t(e._0x101e5f)]({start:n[0],stop:n[o]}))}[_0x5e32ae(3258)](e={}){const t={_0x57c605:1890},i=_0x5e32ae;return getSurfaceHeight(this[i(t._0x57c605)][i(3107)],this.position,e).then(s=>{const n=i;s.position&&(this[n(2180)]=s.position)})}[_0x5e32ae(2825)](e){return this.autoSurfaceHeight(e)}[_0x5e32ae(3405)](e){return this[_0x5e32ae({_0x5195bc:3381}._0x5195bc)]?this.point.toArray(e):[]}}class PointPrimitive extends BasePointPrimitive{get[_0x5e32ae(930)](){const e=_0x5e32ae;var t;return(t=this[e(2873)])===null||t===void 0?void 0:t.pointCollection}_showHook(e){const t=_0x5e32ae;this._primitive?this[t(3002)].show=e:e&&super[t(3961)](e)}_addedHook(e){const t={_0x3bcd3f:3798,_0x4da89:4114,_0x5c86fe:4114},i=_0x5e32ae;if(!this[i(575)])return;this[i(3327)](this[i(t._0x3bcd3f)].position),this[i(3002)]&&this[i(930)][i(2004)](this._primitive);const s=PointStyleConver[i(1268)](this[i(t._0x4da89)],{show:this.show,position:this.position});this._primitive=this[i(930)][i(4084)](s),this[i(t._0x5c86fe)][i(736)]&&this._addLabel()}_updateStyleHook(e,t){const i=_0x5e32ae;PointStyleConver.toCesiumVal(e,this[i(3150)])}_style2Json(e,t){return PointStyleConver[_0x5e32ae(3852)](e,t)}_updatePositionsHook(){this._primitive.position=this.position}_getDrawEntityClass(e,t){return create$4("point",e)}}register$4("pointP",PointPrimitive,!![]);class BasePolyPrimitive extends BasePrimitive{constructor(e={}){const t={_0x226224:4009,_0x3a0f0a:3278,_0x32baad:2436},i=_0x5e32ae;super(e),this[i(t._0x226224)]=this.options[i(2639)]??!![],e.positions&&(this.style.buffer>0?this.positions=bufferPoints(e.positions,this[i(4114)].buffer,this.style[i(t._0x3a0f0a)]):this.positions=e[i(t._0x32baad)])}get center(){const e=_0x5e32ae;return this.style[e(2325)]?this.centerOfMass:this.centerOfLine}get centerOfMass(){return centerOfMass(this.positions)}get centerOfLine(){const e={_0xfb7353:3402,_0x47d90f:3402},t=_0x5e32ae,i=this.positions;return!i||i.length===0?null:i[t(e._0xfb7353)]===1?i[0]:i[t(e._0x47d90f)]<10?sliceByMaxDistance(i,this.distance/2,{point:!![]}):i[Math.floor(i.length/2)]}get[_0x5e32ae(2776)](){return getDistance(this.positions)}get area(){return getSurfaceArea(this.positions)}get positions(){return this._positions}set positions(e){const t={_0x2aa951:4119,_0x18bda8:2229},i={_0x2ba9ba:3653,_0x2f2edd:3845,_0x655094:3984},s=_0x5e32ae;if(!e)return;const n=[],o=[];e.forEach((c,_)=>{const l=_0x5210,h=LngLatPoint.parse(c);if(!h||!h[l(i._0x2ba9ba)]())return;let f=this.style.setHeight;Cesium__namespace.defined(f)&&(isString(f)?(f=Number(template(f,this.attr,!![])),isNaN(f)&&(f=0)):Array[l(i._0x2f2edd)](f)&&(f=f[_]||0),h.alt=f);const m=this.getAddHeight(_);m!==0&&(h.alt=h[l(i._0x655094)]+m),n.push(h),o.push(h[l(2048)]())}),this._points=n,this[s(3270)]=o,this._primitive&&this[s(t._0x2aa951)](),this._primitive_label&&this._updateLabelPosition(),this[s(2229)]&&(this[s(t._0x18bda8)][s(2436)]=o),this[s(1404)](EventType[s(3563)],{positions:this._positions})}get positionsShow(){return this[_0x5e32ae({_0x5601ac:2436}._0x5601ac)]}get[_0x5e32ae(2820)](){const e={_0x1bc323:3270},t=_0x5e32ae;return!this._points&&(this._points=LngLatArray.toPoints(this[t(e._0x1bc323)])),this._points}get coordinates(){return this[_0x5e32ae(3276)]()}get rectangle(){const e=_0x5e32ae;return Cesium__namespace.Rectangle[e(3283)](this.positions)}_getGeoJsonGeometry(e){const t=_0x5e32ae;return{type:"LineString",coordinates:this.getCoordinates(e==null?void 0:e[t(1594)])}}getCoordinates(e){const t={_0x5c3129:2820},i=_0x5e32ae,s=[];return this[i(t._0x5c3129)].forEach(n=>{s.push(n.toArray(e))}),s}isInPoly(e){const t={_0x464e3d:3530,_0x5394c3:1743},i=_0x5e32ae,s=LngLatPoint.parse(e);return Cesium__namespace.Rectangle[i(3068)](Cesium__namespace.Rectangle.fromCartesianArray(this[i(2436)]),s[i(t._0x464e3d)]())?isInPoly(s,this[i(t._0x5394c3)]):![]}autoSurfaceHeight(e={}){const t=_0x5e32ae;return computeSurfacePoints({...e,map:this[t(1890)],positions:this.positions})[t(549)](i=>(!i.noHeight&&(this.positions=i.positions),i))}[_0x5e32ae(2825)](e){return this.autoSurfaceHeight(e)}}class PolylinePrimitive extends BasePolyPrimitive{[_0x5e32ae(1332)](e){return PolylineStyleConver.toCesiumVal(e)}_style2Json(e,t){return PolylineStyleConver[_0x5e32ae(3852)](e,t)}_createGeometryInstance(e,t){const i={_0x58225e:2436,_0x3c6f3f:2436,_0x53bf46:693},s=_0x5e32ae;var n;e[s(i._0x58225e)]=this[s(i._0x58225e)]||[],e.closure&&((n=e[s(i._0x3c6f3f)])===null||n===void 0?void 0:n.length)>0&&(e[s(2436)]=e[s(2436)][s(3611)](e.positions[0]));const o=e.clampToGround?Cesium__namespace.GroundPolylineGeometry:Cesium__namespace.PolylineGeometry;return new Cesium__namespace.GeometryInstance({id:this.id,geometry:new o(e),attributes:this.options[s(i._0x53bf46)]})}_createAppearance(e,t){const i={_0x4bae2a:2197,_0x50737a:2092,_0x4016bf:3647},s=_0x5e32ae;if(e._isColorMaterial){if(t[s(2197)].geometry.vertexFormat=Cesium__namespace.PolylineColorAppearance.VERTEX_FORMAT,!e[s(1659)]){const n=this._getColorByColorMaterial(e);t[s(2197)].attributes=t.geometryInstances[s(693)]||{},t[s(i._0x4bae2a)].attributes[s(i._0x50737a)]=Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(n),e.depthFail&&(t[s(2197)].attributes.depthFailColor=Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(e.depthFailColor||n))}return new Cesium__namespace[s(2055)]({...e})}else return new Cesium__namespace[s(i._0x4016bf)]({...e})}_updateStyleHook(e,t){const i=_0x5e32ae;Cesium__namespace.defined(t.color)&&Object.keys(t)===1?super._updateStyleHook(e,t):this[i(4034)](e)}_getDrawEntityClass(e,t){return create$4("polyline",e)}}register$4("polylineP",PolylinePrimitive);class BaseLayer extends BaseClass{constructor(e={}){const t={_0x3e8926:2463,_0x42d15c:687,_0x4beff5:3798,_0x54a97b:3352},i=_0x5e32ae;super(e),this.options=e,e.id=e.id??createGuid(),e.pid=e.pid??-1,this[i(3001)]=e[i(575)]??!![],this[i(t._0x3e8926)]=e.private,this._opacity=e.opacity??1,Cesium__namespace.defined(e.alpha)&&(this._opacity=e.alpha),this.options.proxy&&(isString(this.options[i(419)])?this._proxy=new Cesium__namespace.DefaultProxy(this[i(3798)].proxy):this[i(t._0x42d15c)]=this.options.proxy),replaceOnlineUrlDomain(this[i(t._0x4beff5)]),this._bindControl(),this[i(t._0x54a97b)]=Cesium__namespace[i(3804)](),this._state=State.INITIALIZED}get id(){return this.options.id}set id(e){this.options.id=e}get uuid(){return this.options.id}get name(){return this.options.name}set name(e){const t={_0x93e977:3798,_0x22f985:3605},i=_0x5e32ae;this[i(t._0x93e977)][i(t._0x22f985)]=e}get pid(){return this.options.pid}set[_0x5e32ae(1440)](e){this.options.pid=e}get type(){return this._type}get state(){return this._state}get isAdded(){const e={_0x5b2a37:553},t=_0x5e32ae;return this[t(e._0x5b2a37)]===State[t(4142)]}get isDestroy(){return this[_0x5e32ae(553)]===State.DESTROY}get isPrivate(){return this[_0x5e32ae(2463)]?!![]:![]}get[_0x5e32ae(2355)](){return this._readyPromise.promise}get layer(){return null}get[_0x5e32ae(575)](){return this._show}set show(e){const t={_0x27d266:575,_0x5c3896:1404},i={_0x37db81:575},s=_0x5e32ae;this._show===e||this.isDestroy||(this.options[s(t._0x27d266)]=e,this._show=e,this.layer&&(Array.isArray(this.layer)?this.layer[s(2500)](function(n){const o=s;n[o(i._0x37db81)]=e}):this.layer.show=e),this.isAdded&&(this._showHook&&this._showHook(e),e?this.fire(EventType.show):this[s(t._0x5c3896)](EventType.hide)))}get[_0x5e32ae(3265)](){return this[_0x5e32ae(3798)].hasOpacity===![]?![]:!!this.setOpacity}get opacity(){return this[_0x5e32ae(2649)]}set opacity(e){const t={_0x39a944:3913},i=_0x5e32ae;this._opacity=e,this[i(t._0x39a944)]&&this.setOpacity(e)}addTo(e){const t={_0x43df1d:2965},i=_0x5e32ae;return e&&e.addLayer&&e[i(t._0x43df1d)](this),this}remove(e){const t=_0x5e32ae;this._map&&this[t(1890)][t(2642)](this,e)}_onAdd(e){const t={_0x2ffc46:3798},i=_0x5e32ae;var s;this.isAdded||this[i(553)]===State.ADD||(this._state=State.ADD,this._map=e,this.options.eventParent?this.addEventParent(this.options.eventParent):((s=this[i(t._0x2ffc46)])===null||s===void 0?void 0:s.eventParent)===![]||this.addEventParent(e),this._mountedHook&&!this._createOK&&(this._mountedHook(),this._createOK=!![]),this._addedHook&&this[i(4158)](),this.options.flyTo&&this.flyToByAnimationEnd({duration:0}),this._state=State.ADDED,this.fire(EventType[i(4084)]),this.fire(EventType[i(2965)],{},!![]))}_onRemove(){const e={_0x4d0c7c:2442,_0x2e1d50:1404},t=_0x5e32ae;var i,s;this._state===State.ADDED&&this._map&&(this._removedHook&&this[t(e._0x4d0c7c)](),this._state=State.REMOVED,this[t(e._0x2e1d50)](EventType[t(2004)]),this.fire(EventType.removeLayer,{},!![]),(i=this[t(3798)])!==null&&i!==void 0&&i.eventParent?this.removeEventParent(this.options.eventParent):((s=this.options)===null||s===void 0?void 0:s[t(716)])===![]||this.removeEventParent(this[t(1890)]),this[t(1890)]=null)}[_0x5e32ae(3118)](){}_addedHook(){}_removedHook(){}fire(e,t={},i){const s={_0x4af56a:1538},n=_0x5e32ae;return!t.layer&&(t[n(s._0x4af56a)]=this),super.fire(e,t,i)}flyToByAnimationEnd(e){const t={_0x47d182:1503},i=_0x5e32ae;return!this._map||!this.show?this:(this._map.isFlyAnimation()?this[i(1890)][i(t._0x47d182)]=()=>{this.flyTo(e)}:this[i(3576)](e),this)}flyTo(e){const t={_0x34e7ef:3514},i=this._flyTo(e);return i||this.readyPromise.then(s=>this[_0x5210(t._0x34e7ef)](e))}[_0x5e32ae(3514)](e={}){const t={_0x3021d0:2292,_0x40ebd8:1227,_0x10467d:3569},i=_0x5e32ae;if(!this._map)return Promise.resolve(![]);if(this[i(3798)][i(t._0x3021d0)]&&(e={...this.options.flyToOptions,...e}),this._map.cancelFlyTo(),this.options.center)return this._map[i(t._0x40ebd8)](this.options.center,e);const s=this[i(3798)][i(t._0x10467d)]||this[i(1619)]||this[i(3879)]&&this.getRectangle();if(s)return this._map.flyToExtent(s,e)}setOptions(e){const t={_0x43ebf4:3605,_0x6e66d9:1439},i=_0x5e32ae;return!e||Object[i(3503)](e).length===0?this:(this[i(3798)]=merge(this.options,e),Cesium__namespace.defined(e[i(3776)])&&(this.opacity=e.opacity),Cesium__namespace.defined(e[i(t._0x43ebf4)])&&(this.name=e[i(t._0x43ebf4)]),Cesium__namespace.defined(e.show)&&(this.show=e.show),this[i(t._0x6e66d9)](),this[i(437)]&&this._setOptionsHook(this.options,e),this)}toJSON(){const e={_0x469a94:3798,_0x8a26e:716,_0x59127e:3205,_0x5c9a4e:867},t=_0x5e32ae,i=clone(this[t(e._0x469a94)],["parent",t(e._0x8a26e)]);return i.id=this.id,i[t(e._0x59127e)]=this.type,i[t(575)]=this.show,this[t(e._0x5c9a4e)](i),i}_toJsonEx(e){}_bindControl(){const e={_0x30ec01:3798,_0x208707:571},t=_0x5e32ae;if(Cesium__namespace[t(515)](this.options.contextmenuItems)&&(this[t(3798)].contextmenuItems?this._contextmenuConfig={content:this.options.contextmenuItems,options:this[t(3798)].contextmenuOptions,layer:this}:this[t(3331)]=null),Cesium__namespace.defined(this.options.popup))if(this.options.popup){const i=this[t(e._0x30ec01)].popupOptions||{};this[t(2513)]={options:i,content:bindLayerPopup(i,this[t(3798)].popup,this.name),layer:this}}else this._popupConfig=null;if(Cesium__namespace[t(515)](this.options.tooltip))if(this.options[t(e._0x208707)]){const i=this[t(3798)][t(1574)]||{};this._tooltipConfig={options:i,content:bindLayerPopup(i,this.options[t(e._0x208707)],this.name),layer:this}}else this._tooltipConfig=null}_filterPropagateEvent(e,t){return t.type==="load"?![]:!![]}[_0x5e32ae(757)](e){const t={_0x2c9006:3212,_0x15c753:1856,_0x51aba5:1387},i=_0x5e32ae;this._state!==State[i(t._0x2c9006)]&&(this._state!==State[i(t._0x15c753)]&&(this.clear&&this[i(t._0x51aba5)](),this.remove()),super[i(757)](e),this._state=State.DESTROY)}}function bindLayerPopup(r,e,t){const i={_0x2bf721:2542},s={_0xd3cd34:1655,_0x778668:2542};return typeof e=="function"?function(n){return e(n)}:function(n){const o=_0x5210;let c=_getAttrForPopup(n);if(c instanceof Promise)return c.then(_=>{const l=_0x5210;c={layer_name:t,..._};let h=t;return r[l(s._0xd3cd34)]?h=null:r.title?h=r[l(s._0x778668)]:r.titleField&&(h=c[r.titleField]),getTemplateHtml({title:h,template:e,attr:c})});{c={layer_name:t,...c};let _=t;return r.noTitle?_=null:r.title?_=r[o(i._0x2bf721)]:r.titleField&&(_=c[r[o(1206)]]),getTemplateHtml({title:_,template:e,attr:c})}}}function _getAttrForPopup(r){const e={_0x1fcfb1:1528},t=_0x5e32ae;var i;if(r!=null&&r[t(e._0x1fcfb1)])return r.attr;if(r!=null&&(i=r[t(2118)])!==null&&i!==void 0&&i.attr)return r.graphic[t(e._0x1fcfb1)];if(!r.czmObject)return{};let s=r.czmObject._attr||r[t(1679)].properties||r.czmObject.attribute;return s&&s.type&&s[t(1528)]&&(s=s.attr),s??{}}class BaseGraphicLayer extends BaseLayer{constructor(e={}){const t=_0x5e32ae;e.url&&e.templateValues&&(e.url=template(e[t(1221)],e[t(2645)])),super(e)}_showHook(e){!e&&this._closeAllControl()}_addedHook(){const e={_0x16dcb2:3798,_0x5157f9:1483},t=_0x5e32ae;var i,s;this[t(e._0x16dcb2)].highlight?this[t(3824)](this.options[t(e._0x5157f9)]):(i=this.options.symbol)!==null&&i!==void 0&&(s=i[t(1893)])!==null&&s!==void 0&&s.highlight&&this[t(3824)](this.options.symbol.styleOptions.highlight)}_removedHook(){this._closeAllControl(),this.unbindHighlight()}[_0x5e32ae(437)](e,t){const i={_0x82c1ad:3824},s=_0x5e32ae;var n,o;this._highlightOptions&&this.unbindHighlight(),t.highlight?this[s(i._0x82c1ad)](e.highlight):(n=t.symbol)!==null&&n!==void 0&&(o=n[s(1893)])!==null&&o!==void 0&&o.highlight&&this.bindHighlight(e.symbol.styleOptions[s(1483)])}[_0x5e32ae(1169)](){const e={_0x38ea2d:3772},t=_0x5e32ae;this[t(e._0x38ea2d)](),this[t(1789)](),this.closeSmallTooltip(),this.closeContextMenu()}bindHighlight(e){const t={_0x485297:4306,_0x5beca2:3205,_0xed7a09:2626},i=_0x5e32ae;this.unbindHighlight(),this._highlightOptions=e,this[i(t._0x485297)][i(t._0x5beca2)]===EventType.click?this.on(EventType.click,this._highlight_mouseEventHandler,this):(this.on(EventType.mouseOver,this._highlight_mouseEventHandler,this),this.on(EventType.mouseOut,this[i(t._0xed7a09)],this))}unbindHighlight(){const e={_0x27ebf9:1220,_0x219258:3213},t=_0x5e32ae;this._highlightOptions&&(this[t(e._0x27ebf9)](EventType.click,this._highlight_mouseEventHandler,this),this.off(EventType.mouseOver,this[t(e._0x219258)],this),this.off(EventType.mouseOut,this[t(2626)],this),this._map.closeHighlight(),this._highlightOptions=null)}[_0x5e32ae(3213)](e){const t={_0x463716:1890,_0x21aad1:4306},i=_0x5e32ae;if(!this._map)return;const s=e==null?void 0:e.graphic;s?this[i(t._0x463716)].openHighlight(s,this[i(t._0x21aad1)],e):this._map.closeHighlight()}_highlight_mouseOutHandler(e){this._map.closeHighlight()}[_0x5e32ae(2932)](e,t){const i={_0x3af671:4306},s=_0x5e32ae;!this._map||!e||this._map.openHighlight(e,this[s(i._0x3af671)],t)}[_0x5e32ae(567)](){this._map.closeHighlight()}[_0x5e32ae(2033)](){const e=_0x5e32ae;if(this._popupConfig)return!![];if(this[e(4145)]){const t=this[e(4145)].values;for(let i=0,s=t.length;i<s;i++)if(t[i][e(2513)])return!![]}return![]}bindPopup(e,t){const i={_0x2414f3:2513},s=_0x5e32ae;return this[s(i._0x2414f3)]={content:e,options:t||this.options.popupOptions,layer:this},this}[_0x5e32ae(509)](e){const t={_0x240a86:2513},i=_0x5e32ae;return this[i(3772)](),e?this[i(t._0x240a86)]=![]:this._popupConfig=null,this}[_0x5e32ae(2552)](e){const t={_0x326108:2552,_0xffe1b5:2513},i=_0x5e32ae;return e.openPopup?e[i(t._0x326108)]():this._popupConfig&&e&&this._map&&(this._popupConfig.graphic=null,this._map.popup.open(e,this[i(t._0xffe1b5)])),this}closePopup(){const e={_0x86f6b2:1890,_0x50ef1c:1293},t=_0x5e32ae;return this._map&&this.hasPopup()&&this[t(e._0x86f6b2)].popup[t(e._0x50ef1c)](null,this),this}[_0x5e32ae(2598)](){const e=_0x5e32ae;if(this._tooltipConfig)return!![];if(this._graphicList){const t=this._graphicList.values;for(let i=0,s=t.length;i<s;i++)if(t[i][e(933)])return!![]}return![]}bindTooltip(e,t){const i={_0x4f18bb:933},s=_0x5e32ae;return this[s(i._0x4f18bb)]={content:e,options:t||this.options.tooltipOptions,layer:this},this}unbindTooltip(e){const t={_0x68311f:933},i=_0x5e32ae;return e?this[i(t._0x68311f)]=![]:this._tooltipConfig=null,this[i(1789)](),this}[_0x5e32ae(2019)](e){const t={_0x194d22:1890,_0x5898fb:933},i=_0x5e32ae;return e.openTooltip?e.openTooltip():this._tooltipConfig&&e&&this[i(t._0x194d22)]&&(this[i(t._0x5898fb)].graphic=null,this._map.tooltip.open(e,this._tooltipConfig)),this}closeTooltip(){return this[_0x5e32ae(1890)]&&this.hasTooltip()&&this._map.tooltip.close(null,this),this}hasContextMenu(){if(this._contextmenuConfig)return!![];if(this._graphicList){const e=this._graphicList.values;for(let t=0,i=e.length;t<i;t++)if(e[t]._contextmenuConfig)return!![]}return![]}getContextMenu(){return this._contextmenuConfig}[_0x5e32ae(2182)](e,t){return this._contextmenuConfig={content:e,options:t||this.options.contextmenuOptions,layer:this},this}unbindContextMenu(e){const t={_0x34fe10:1246},i=_0x5e32ae;return e?this._contextmenuConfig=![]:this._contextmenuConfig=null,this[i(t._0x34fe10)](),this}openContextMenu(e){const t={_0x1ed6d2:4238,_0x21efb8:1890},i=_0x5e32ae;return e.openContextMenu?e[i(t._0x1ed6d2)]():this[i(3331)]&&e&&this[i(t._0x21efb8)]&&(this._contextmenuConfig.graphic=null,this._map[i(2570)].open(e,this[i(3331)])),this}[_0x5e32ae(1246)](){const e=_0x5e32ae;return this._map&&this[e(3671)]()&&this._map.contextmenu[e(1293)](null,this),this}openSmallTooltip(e,t){return this._map&&this._map.openSmallTooltip(e,t),this}closeSmallTooltip(){return this._map&&this._map.closeSmallTooltip(),this}}class GraphicLayer extends BaseGraphicLayer{constructor(e={}){const t={_0x3bf3cf:437},i=_0x5e32ae;super(e),this[i(t._0x3bf3cf)](e,e),this[i(4145)]=new MarsArray}_setOptionsHook(e,t){const i={_0x29f735:437,_0x3f28ec:2639},s=_0x5e32ae;super[s(i._0x29f735)](e,t),this[s(i._0x3f28ec)]=e.hasEdit??![],this[s(1166)]=e.isAutoEditing??!![],this.isContinued=e[s(2564)]??![]}get[_0x5e32ae(1538)](){const e={_0x574c54:1025,_0x596576:2201},t=_0x5e32ae,i=[];return this._dataSource&&i.push(this._dataSource),this._primitiveCollection&&i.push(this[t(e._0x574c54)]),this._labelCollection&&i.push(this._labelCollection),this._billboardCollection&&i.push(this._billboardCollection),this._cloudCollection&&i.push(this._cloudCollection),this._pointCollection&&i.push(this._pointCollection),this[t(e._0x596576)]&&i.push(this._polylineCollection),i}get clustering(){const e={_0x5df358:968},t=_0x5e32ae;var i,s;return(i=this[t(1443)])===null||i===void 0||(s=i.clustering)===null||s===void 0?void 0:s[t(e._0x5df358)]}set clustering(e){var t;(t=this.dataSource)!==null&&t!==void 0&&t.clustering&&(this.dataSource.clustering.enabled=e)}get dataSource(){const e={_0x13d1ae:1262},t=_0x5e32ae;return!this._dataSource&&(this._dataSource=new Cesium__namespace.CustomDataSource(this.id),this._dataSource.show=this.show,this._map&&(this._map.dataSources.add(this._dataSource),Cesium__namespace.defined(this.options[t(e._0x13d1ae)])&&(this[t(1262)]=this.options.zIndex))),this._dataSource}get primitiveCollection(){const e=_0x5e32ae;return!this._primitiveCollection&&(this._primitiveCollection=new Cesium__namespace.PrimitiveCollection(this.options),this._primitiveCollection.show=this.show,this._map&&(this._map.scene.primitives.add(this[e(1025)]),Cesium__namespace.defined(this.options.zIndex)&&(this.zIndex=this.options.zIndex))),this._primitiveCollection}get labelCollection(){const e={_0x2aef0a:1e3},t=_0x5e32ae;return!this._labelCollection&&(this._labelCollection=new Cesium__namespace.LabelCollection({...this.options,scene:this._map.scene}),this._labelCollection.show=this.show,this[t(1890)]&&this._map.scene[t(e._0x2aef0a)].add(this[t(1467)])),this._labelCollection}get pointCollection(){const e={_0x2e5bc9:563,_0x15e01a:575,_0x277132:1890},t=_0x5e32ae;return!this._pointCollection&&(this[t(e._0x2e5bc9)]=new Cesium__namespace.PointPrimitiveCollection(this[t(3798)]),this._pointCollection.show=this[t(e._0x15e01a)],this[t(e._0x277132)]&&this[t(e._0x277132)].scene.primitives.add(this._pointCollection)),this._pointCollection}get billboardCollection(){const e={_0x3a9e9d:2971,_0x118848:1890},t=_0x5e32ae;return!this._billboardCollection&&(this[t(e._0x3a9e9d)]=new Cesium__namespace[t(717)]({...this[t(3798)],scene:this._map.scene}),this[t(2971)].show=this[t(575)],this[t(e._0x118848)]&&this._map.scene[t(1e3)].add(this._billboardCollection)),this._billboardCollection}get cloudCollection(){const e={_0x566308:3371},t=_0x5e32ae;return!this._cloudCollection&&(this._cloudCollection=new Cesium__namespace.CloudCollection(this[t(3798)][t(537)]),this._cloudCollection[t(575)]=this.show,this._map&&this._map.scene.primitives[t(4084)](this._cloudCollection)),this[t(e._0x566308)]}get[_0x5e32ae(3188)](){const e={_0x4ca22d:2201,_0x67c1c1:3798,_0x3ddd5e:575},t=_0x5e32ae;return!this._polylineCollection&&(this[t(e._0x4ca22d)]=new Cesium__namespace.PolylineCollection(this[t(e._0x67c1c1)]),this._polylineCollection[t(e._0x3ddd5e)]=this[t(e._0x3ddd5e)],this._map&&this._map.scene[t(1e3)].add(this._polylineCollection)),this[t(e._0x4ca22d)]}get container(){const e={_0x37b9a9:1541,_0x55e980:2899,_0x53d337:4114,_0x346482:606,_0x20a146:2899,_0x1d1125:2899},t=_0x5e32ae;return!this._container&&(this[t(2899)]=create$3(t(e._0x37b9a9),t(1180)),this[t(575)]?this[t(e._0x55e980)][t(e._0x53d337)].display=t(e._0x346482):this[t(e._0x20a146)].style.display="none",this._map&&this._map.container.appendChild(this[t(e._0x1d1125)])),this._container}get pointerEvents(){return this._pointerEvents}set pointerEvents(e){this._pointerEvents=e,e?this.container.style["pointer-events"]="all":this.container.style["pointer-events"]="none"}get objectsToExclude(){const e={_0x446aef:3402,_0x52478d:2316},t=_0x5e32ae;return this._objectsToExclude?this[t(1866)]:(!this._objectsToExclude_auto&&(this._objectsToExclude_auto=[],this[t(4145)][t(2500)](i=>{const s={_0x2f2c40:2208},n=t,o=i.objectsToExclude;if(o&&o[n(e._0x446aef)]>0)o.forEach(c=>{const _=n;this._objectsToExclude_auto.indexOf(c)===-1&&this[_(s._0x2f2c40)].push(c)});else if(i.czmObject){const c=i.czmObject;this._objectsToExclude_auto[n(e._0x52478d)](c)===-1&&this[n(2208)][n(3759)](c)}},this)),this._objectsToExclude_auto)}set[_0x5e32ae(977)](e){this._objectsToExclude=e}get hasZIndex(){return!![]}get[_0x5e32ae(1262)](){return this[_0x5e32ae(3798)].zIndex}set zIndex(e){const t={_0x324172:1262},i=_0x5e32ae;this.options[i(t._0x324172)]=e,e!=null&&setTimeout(()=>{this._setZIndex(e)},100)}_setZIndex(e){const t={_0x508926:1262,_0x316908:1025,_0x2cab44:1676,_0x4e244a:2553},i=_0x5e32ae;if(this.isAdded){if(this._primitiveCollection){this._primitiveCollection.zIndex=e,this._map[i(3107)].primitives.raiseToTop(this._primitiveCollection);const s=this._map.scene.primitives;for(let n=s.length-1;n>=0;n--){const o=s.get(n);o!==this._primitiveCollection&&Cesium__namespace[i(515)](o.zIndex)&&e<o[i(t._0x508926)]&&this._map.scene.primitives.lower(this[i(t._0x316908)])}}if(this._dataSource){this._dataSource[i(t._0x508926)]=e,this[i(1890)][i(1135)][i(t._0x2cab44)](this._dataSource);const s=this._map.dataSources;for(let n=s.length-1;n>=0;n--){const o=s.get(n);o!==this[i(t._0x4e244a)]&&Cesium__namespace.defined(o.zIndex)&&e<o.zIndex&&this[i(1890)].dataSources.lower(this[i(2553)])}}}}toTop(){const e={_0x3bf9d8:1890,_0xeab3c6:1e3},t=_0x5e32ae;if(this[t(e._0x3bf9d8)]){if(this[t(1025)])return this._map.scene[t(e._0xeab3c6)].raiseToTop(this[t(1025)]);if(this._dataSource)return this._map[t(1135)].raiseToTop(this._dataSource)}}toBottom(){const e={_0x23f6a7:1890,_0x525a05:1135},t=_0x5e32ae;if(this._map){if(this._primitiveCollection)return this[t(e._0x23f6a7)].scene.primitives.lowerToBottom(this._primitiveCollection);if(this._dataSource)return this._map[t(e._0x525a05)].lowerToBottom(this._dataSource)}}get length(){return this._graphicList.length}get[_0x5e32ae(1715)](){return this.getGraphics()}get hasEdit(){return this._hasEdit}set hasEdit(e){e?this.activateEdit():this.disableEdit()}get isEditing(){return this._graphic_editing!=null}get[_0x5e32ae(2181)](){return this.options.allowDrillPick}set allowDrillPick(e){this.options.allowDrillPick=e}_onAdd(e){const t={_0x2ca8cd:1890,_0x5c6fa7:1890,_0x28efe5:3798,_0x22b5a0:3052,_0x4c27e0:2553,_0x235896:1025,_0x2dfbc0:1890,_0x1649fb:3107,_0xdf9cf5:1e3,_0x6245f4:4084,_0x184aff:2899,_0x8ff9e1:2500,_0x3d512c:1262},i={_0x39fc2f:2571},s=_0x5e32ae;var n;this[s(t._0x2ca8cd)]||(this._state=State.ADD,this[s(t._0x5c6fa7)]=e,this[s(t._0x28efe5)].eventParent?this.addEventParent(this.options.eventParent):((n=this.options)===null||n===void 0?void 0:n.eventParent)===![]||this[s(t._0x22b5a0)](e),this[s(t._0x4c27e0)]&&this._map.dataSources.add(this[s(t._0x4c27e0)]),this._primitiveCollection&&this[s(1890)].scene[s(1e3)][s(4084)](this[s(t._0x235896)]),this._labelCollection&&this[s(t._0x2dfbc0)].scene.primitives.add(this._labelCollection),this._billboardCollection&&this._map[s(t._0x1649fb)][s(t._0xdf9cf5)].add(this._billboardCollection),this._cloudCollection&&this._map[s(t._0x1649fb)].primitives[s(t._0x6245f4)](this[s(3371)]),this._pointCollection&&this._map[s(3107)].primitives[s(4084)](this._pointCollection),this._polylineCollection&&this[s(1890)].scene[s(1e3)].add(this._polylineCollection),this[s(t._0x184aff)]&&this._map.container.appendChild(this._container),this._mountedHook&&!this._createOK&&(this._createOK=!![],this._mountedHook()),this[s(4158)]&&this._addedHook(),this._graphicList[s(t._0x8ff9e1)](o=>{const c=s;o!=null&&o[c(i._0x39fc2f)]&&o._onAdd(this)},this),Cesium__namespace.defined(this.options[s(t._0x3d512c)])&&(this[s(1262)]=this[s(3798)].zIndex),this._state=State.ADDED,this.fire(EventType.addLayer,{layer:this},!![]))}_onRemove(){const e={_0x19e0a4:553,_0x4974fc:4145,_0x4f4017:1135,_0x2a749b:1e3,_0x180798:3107,_0x4fb002:2004,_0x318e7f:1890,_0x2578aa:3371,_0x345a57:2899,_0x4cd842:1890,_0x58b725:1404},t=_0x5e32ae;var i,s;this[t(e._0x19e0a4)]===State.ADDED&&this._map&&(this[t(e._0x4974fc)].forEach(n=>{const o=t;n!=null&&n._onRemove&&n[o(2851)]()},this),this._dataSource&&this._map[t(e._0x4f4017)].remove(this._dataSource),this._primitiveCollection&&this._map.scene[t(e._0x2a749b)].remove(this._primitiveCollection),this._labelCollection&&this[t(1890)][t(e._0x180798)].primitives[t(e._0x4fb002)](this._labelCollection),this._billboardCollection&&this[t(e._0x318e7f)][t(3107)].primitives[t(2004)](this._billboardCollection),this[t(e._0x2578aa)]&&this._map[t(e._0x180798)][t(1e3)].remove(this._cloudCollection),this._pointCollection&&this._map[t(3107)][t(e._0x2a749b)].remove(this._pointCollection),this._polylineCollection&&this[t(1890)].scene.primitives[t(2004)](this._polylineCollection),this._container&&this[t(e._0x345a57)].parentNode&&this[t(e._0x4cd842)].container.removeChild(this[t(2899)]),this._map.scene.primitives[t(3546)]&&(this._primitiveCollection=null,this._labelCollection=null,this._billboardCollection=null,this[t(3371)]=null,this._pointCollection=null,this._polylineCollection=null),this._removedHook&&this._removedHook(),this._state=State.REMOVED,this[t(e._0x58b725)](EventType.remove),this.fire(EventType.removeLayer,{layer:this},!![]),(i=this.options)!==null&&i!==void 0&&i.eventParent?this.removeEventParent(this.options.eventParent):((s=this[t(3798)])===null||s===void 0?void 0:s.eventParent)===![]||this.removeEventParent(this._map),this._map=null)}_showHook(e){const t={_0x5354f0:1648},i={_0x266987:3196},s=_0x5e32ae;super._showHook(e),e?this._container&&(this._container.style[s(t._0x5354f0)]="block",this._graphicList.forEach(n=>{n[s(i._0x266987)]&&n.updateDivPosition()},this)):(this[s(2899)]&&(this._container[s(4114)].display="none"),this.stopDraw())}_mountedHook(){const e={_0xbe2cf3:998,_0x293e1a:3798,_0x4b9a83:4056},t={_0x185f01:1750,_0x327e2f:2045},i={_0x4c4d57:1860,_0x23ee6d:2639},s=_0x5e32ae;super[s(3118)](),this.on(EventType.drawCreated,n=>{const o=s;this.stopDraw(),this[o(2564)]?this[o(i._0x4c4d57)](clone(n.graphic.options)):this[o(i._0x23ee6d)]&&this.isAutoEditing&&this.startEditing(n.graphic)},this),this.on(EventType.load,n=>{const o=s;this.hasEdit&&this[o(1166)]&&this._graphic_editing===n[o(2118)]&&this[o(4244)](n[o(2118)])},this),this.on(EventType.removeGraphic,n=>{const o=s;this[o(t._0x185f01)]===n.graphic&&(this._graphic_drawing=null),this._graphic_editing===n.graphic&&(this[o(t._0x327e2f)]=null)},this),this.on(EventType[s(e._0xbe2cf3)],n=>{this._graphic_editing=n.graphic},this),this.on(EventType[s(516)],n=>{this._graphic_editing=null},this),this.options.clustering&&this._bindClustering(this.options.clustering),this[s(3205)]===s(2118)&&(this.options[s(931)]&&this.addGraphic(this[s(e._0x293e1a)].data),this._readyPromise[s(e._0x4b9a83)](this)),this.options[s(651)]&&this.loadGeoJSON(this[s(3798)].geojson)}[_0x5e32ae(4158)](){const e={_0x5b890a:2704},t=_0x5e32ae;super._addedHook(),this._hasEdit&&this._bindEditEvent(),this.options.flyTo&&this[t(e._0x5b890a)]()}[_0x5e32ae(2442)](){const e={_0x461fdb:2442,_0xb27c41:4009},t=_0x5e32ae;super[t(e._0x461fdb)](),this[t(e._0xb27c41)]&&(this.stopDraw(),this._unbindEditEvent())}getRectangle(e){const t={_0x4e31c7:2500},i=_0x5e32ae;let s;return this._graphicList[i(t._0x4e31c7)](n=>{if(!n.getRectangle)return;const o=n.getRectangle();Cesium__namespace.defined(o)&&(s?s=Cesium__namespace.Rectangle.union(o,s):s=o)},this),e?formatRectangle(s):s}getMaxHeight(){const e={_0x4eaa43:4145},t=_0x5e32ae;let i=0;return this[t(e._0x4eaa43)].forEach(s=>{const n=t;s.getMaxHeight&&(i=Math[n(1124)](s.getMaxHeight(),i))},this),i}toGeoJSON(e){const t={_0x258a83:552},i=_0x5e32ae;e!=null&&e.stopEdit&&this.stopEditing();let s=[];return this._graphicList.forEach(n=>{const o=_0x5210;if(n[o(2212)])return;const c=n.toGeoJSON(e);c&&(Array.isArray(c)?s=s[o(3611)](c):s.push(c))},this),{type:i(t._0x258a83),layer:{id:this.id,name:this[i(3605)]},features:s}}_toJsonEx(e){const t={_0x3109e7:2500},i={_0x17322f:2212},s=_0x5e32ae;this.stopEditing();let n=[];this[s(4145)][s(t._0x3109e7)](o=>{const c=s;if(o[c(i._0x17322f)]||!o[c(686)])return;const _=o[c(3852)]();_&&(Array[c(3845)](_)?n=n.concat(_):n.push(_))},this),e.data=n}loadGeoJSON(e,t={}){const i={_0x3e6f21:1426,_0x4f4856:3798},s=_0x5e32ae;var n;try{isString(e)&&(e=JSON[s(i._0x3e6f21)](e))}catch(h){logError$1("loadGeoJSON:请确认json文件格式正确!",h);return}const o=(n=this._map)===null||n===void 0?void 0:n[s(3005)],c=this.options.chinaCRS,_=getTransFun(c,o),l=geoJsonToGraphics(e,{...t,symbol:this.options.symbol,crs:this[s(i._0x4f4856)].crs,onPointTrans:_});return this._addGraphicByArrOptions(l,t)}[_0x5e32ae(591)](e,t={}){const i={_0x2b9aa1:1387,_0x131076:1770,_0x16e0e0:4223},s=_0x5e32ae;t[s(i._0x2b9aa1)]&&this[s(i._0x2b9aa1)]();let n=[];if(e.length===0)return n;let o;t.enabledEvent===![]&&(this.enabledEvent=![],o=!![]);const c=e[0][s(3205)],_=this.options[s(2461)]||{};if(isCombineType(c)){const l={..._,type:c,instances:e};t.onEachFeature&&t.onEachFeature(l);const h=this._addGraphic(l);n.push(h)}else for(let l=0,h=e.length;l<h;l++){const f={..._,...e[l]};if(t[s(i._0x131076)]&&t.onEachFeature(f),this.options[s(4245)]){const m=this.options.onCreateGraphic(f);m&&(this[s(i._0x16e0e0)](m),Array[s(3845)](m)?n=n.concat(m):n[s(3759)](m))}else{const m=this._addGraphic(f);n[s(3759)](m)}}return o&&(this.enabledEvent=!![]),t.flyTo&&this.show&&this._map.flyToGraphic(n),n}_bindClustering(e={}){const t={_0x2ba72a:968},i={_0x490cc1:2266,_0x501ec9:575,_0x65af22:2532,_0x152e71:1506,_0x391ca2:3898,_0x4c6149:2530,_0x10246d:635,_0x2dd791:549,_0x957019:2747,_0xdda6e8:513,_0x301759:513,_0x1b6a3b:3502,_0x5c4042:1404},s=_0x5e32ae;var n;const o=(n=this.dataSource)===null||n===void 0?void 0:n[s(689)];if(!o)return;o.enabled=e[s(t._0x2ba72a)]??![],o.pixelRange=e.pixelRange??20;let c=setInterval(function(){o._cluster&&o._cluster()},800);o.clusterEvent.addEventListener((_,l)=>{const h={_0x2e203e:2252},f=s;if(c&&(clearInterval(c),c=null),l.label[f(i._0x490cc1)]=this.id,l.label.show=![],l.point._mars3d_layerId=this.id,l.billboard._mars3d_layerId=this.id,l.billboard[f(i._0x501ec9)]=!![],l.billboard.id=l.label.id,l.billboard[f(3034)]=Cesium__namespace[f(i._0x65af22)][f(i._0x152e71)],l.billboard.heightReference=e.clampToGround?Cesium__namespace.HeightReference[f(3267)]:Cesium__namespace.HeightReference[f(i._0x391ca2)],l.billboard.scale=.5,e.style&&(BillboardStyleConver[f(1268)](e.style,l[f(2747)]),e.style.setHeight&&(l.billboard.position=setPositionsHeight(l[f(2747)].position,e.style.setHeight)),e[f(4114)].addHeight&&(l.billboard[f(2180)]=addPositionsHeight(l.billboard.position,e.style[f(i._0x4c6149)]))),e[f(i._0x10246d)]){const C=e[f(635)](_.length,e);C.then?C[f(i._0x2dd791)](function(E){l.billboard.image=E}):l[f(i._0x957019)][f(i._0xdda6e8)]=C}else l.billboard[f(i._0x301759)]=getCircleImage(_.length,e);const m=this,g={entities:_,cluster:l,getGraphics:function(){const C=f,E=[],P=this.entities;for(let w=0,M=P.length;w<M;w++){const T=P[w],L=m[C(3388)](T[C(h._0x2e203e)]);E.push(L)}return E}};l.billboard[f(i._0x1b6a3b)]=g,this[f(i._0x5c4042)]("clustering",g)})}getClusterList(){const e={_0x25d32d:1443,_0x4b813d:689},t=_0x5e32ae;var i;const s=(i=this[t(e._0x25d32d)])===null||i===void 0?void 0:i[t(e._0x4b813d)];if(!s)return;const n=s._clusterBillboardCollection,o=s[t(1395)],c=[];for(let _=0,l=n[t(3402)];_<l;_++){const h=n.get(_);c.push({...o[_],...h._clusterData,billboard:h})}return c}setOpacity(e){const t=_0x5e32ae;this._opacity=e,this[t(4145)].forEach(i=>{const s=t;i.setOpacity&&i[s(3913)](e)},this)}addGraphic(e){const t={_0x1fa9e1:883,_0x3ecd62:3118,_0x4ad1e5:2305},i=_0x5e32ae;if(!this[i(t._0x1fa9e1)]&&this._mountedHook&&(this._createOK=!![],this[i(t._0x3ecd62)]()),Array.isArray(e)){if(e.length===0)return;const s=e[0].type;if(isCombineType(s)&&!e[0].instances){const n={type:s,instances:e};return this._addGraphic(n)}else{const n=[];for(let o=0,c=e.length;o<c;o++){const _=this[i(t._0x4ad1e5)](e[o]);_&&n.push(_)}return n}}else return this._addGraphic(e)}_addGraphic(e){const t={_0x5e7759:2208,_0x2b7082:3274},i=_0x5e32ae;var s;return delete this[i(t._0x5e7759)],this._graphicList.get((s=e)===null||s===void 0?void 0:s.id)&&(e.id=createGuid(),logWarn("addGraphic:数据id存在冲突，已重新赋值id",e)),!e._onAdd&&(e[i(3205)]||this.options.symbol)&&(this[i(3798)].symbol&&(e=mergeSymbolToGraphic(e,this.options[i(t._0x2b7082)])),e=create$4(e.type,e)),e&&(e._onAdd(this),this._graphicList.set(e.id,e)),e}removeGraphic(e,t){return this._removeGraphic(e,t),this}[_0x5e32ae(2697)](e,t,i){const s={_0x1c555b:757},n=_0x5e32ae;if(!e||!e._onRemove)return this;delete this._objectsToExclude_auto,!i&&this._graphicList.remove(e.id),e._onRemove(),t&&e[n(s._0x1c555b)]()}getGraphicById(e){return this._graphicList.get(e)}getGraphicByAttr(e,t){const i={_0x44d5d6:4145,_0x39797a:4013},s=_0x5e32ae;return this[s(i._0x44d5d6)][s(i._0x39797a)](e,t,s(1528))}getGraphicsByAttr(e,t){const i={_0x398c58:1528},s=_0x5e32ae;return this[s(4145)].getListByAttr(e,t,s(i._0x398c58))}getGraphicsByStyle(e,t){const i=[];return this._graphicList.forEach(s=>{s.style[e]===t&&i.push(s)},this),i}[_0x5e32ae(1061)](e,t){return this._graphicList.forEach(e,t||this),this}getGraphics(e=![]){const t={_0x3af94f:4261},i=_0x5e32ae;if(e)return this[i(4145)][i(t._0x3af94f)];{const s=[];return this._graphicList.forEach(n=>{!n[i(2212)]&&s.push(n)},this),s}}clear(e=!![]){const t={_0x31a64e:4231,_0x24f2f4:2500,_0x5d8dcf:1888,_0x152d32:1618,_0x47d01e:2863,_0x459015:1467,_0x530fe1:3371,_0x1a6cb4:1888,_0x250bb8:2201},i=_0x5e32ae;if(this[i(t._0x31a64e)](),this._graphicList&&(this._graphicList[i(t._0x24f2f4)](o=>{this._removeGraphic(o,e,!![])},this),this._graphicList.removeAll()),this._dataSource&&this[i(2553)].entities[i(t._0x5d8dcf)](),this[i(1025)])try{this[i(1025)].removeAll()}catch{const c=this._primitiveCollection._primitives,_=c.length;for(let l=0;l<_;++l){var s,n;(s=c[l])!==null&&s!==void 0&&(n=s._external)!==null&&n!==void 0&&n[i(t._0x152d32)]&&(delete c[l]._external[i(t._0x152d32)][this[i(t._0x47d01e)]],this[i(1025)].destroyPrimitives&&c[l].destroy())}this._primitiveCollection[i(4154)]=[]}this[i(1467)]&&this[i(t._0x459015)].removeAll(),this[i(2971)]&&this._billboardCollection.removeAll(),this[i(t._0x530fe1)]&&this._cloudCollection[i(t._0x1a6cb4)](),this._pointCollection&&this._pointCollection.removeAll(),this[i(t._0x250bb8)]&&this._polylineCollection.removeAll(),this._closeAllControl()}autoSurfaceHeight(e={}){const t={_0x477b41:3402};return new Promise((i,s)=>{const n={_0x372f10:2384,_0x955f2:3258,_0x933097:2340},o=_0x5210,c=this.getGraphics();let _=-1;const l=c[o(t._0x477b41)];function h(){const f={_0x2887a1:2340},m=o;if(_++,_>=l){e.end&&e[m(n._0x372f10)]({index:_,count:l,graphics:c}),i(c);return}const g=c[_];g[m(n._0x955f2)]?g.autoSurfaceHeight(e).then(()=>{const C=m;e.endItem&&e[C(f._0x2887a1)]({graphic:g,index:_,count:l}),h()}):(e.endItem&&e[m(n._0x933097)]({graphic:g,index:_,count:l}),h())}h()})}clampToGround(e){return this.autoSurfaceHeight(e)}startDraw(e){return new Promise((t,i)=>{const s=_0x5210;if(this.stopDraw(),!this._map)throw new Error("startDraw:需要 map.addLayer(当前图层) 后，才行使用本方法");e._promise={resolve:t,reject:i};const n=fromDraw(this,e);n!=null&&(this[s(1750)]=n)})}[_0x5e32ae(3869)](){const e={_0x24d533:1750},t=_0x5e32ae;if(this[t(783)](),this._graphic_drawing){const i=this[t(e._0x24d533)].endDraw();return i&&(this[t(e._0x24d533)]=null),i}return![]}stopDraw(){const e=_0x5e32ae;return this.stopEditing(),this[e(1750)]?(this[e(1750)][e(4231)](),this._graphic_drawing=null,!![]):![]}clearDrawing(){const e={_0x3f3246:1750},t=_0x5e32ae;return this._graphic_drawing?(this._graphic_drawing[t(2004)](!![]),this[t(e._0x3f3246)]=null,!![]):![]}[_0x5e32ae(3256)](){const e=_0x5e32ae;if(!this._hasEdit)return this[e(4009)]=!![],this._map&&this._bindEditEvent(),this}disableEdit(){const e=_0x5e32ae;if(this._hasEdit)return this._hasEdit=![],this._unbindEditEvent(),this[e(783)](),this}[_0x5e32ae(2423)](){const e={_0x19c600:524},t=_0x5e32ae;this[t(1890)].on(EventType.click,this._onClickHandler,this),this._map.on(EventType.mouseMoveTarget,this[t(e._0x19c600)],this)}[_0x5e32ae(1869)](){const e={_0x3597b0:1220,_0x1cae3c:1890,_0x4fb504:3927},t=_0x5e32ae;this._map[t(e._0x3597b0)](EventType.click,this._onClickHandler,this),this[t(e._0x1cae3c)].off(EventType[t(e._0x4fb504)],this._onMouseMoveHandler,this)}_onMouseMoveHandler(e){const t={_0x42d0af:1890,_0x54308e:2118,_0x45d34b:3635,_0x2d8ed0:2212,_0x58fe48:1890},i=_0x5e32ae;if(!this._hasEdit||!this[i(t._0x42d0af)].scene.screenSpaceCameraController.enableInputs)return;let s=e[i(2118)];if(!s){const o=this._map.mouseEvent[i(1402)](e.endPosition,e);s=o==null?void 0:o[i(t._0x54308e)]}if(s==null||s._layer!==this){this[i(t._0x42d0af)][i(t._0x45d34b)]();return}if(s._enabledDraw||s[i(t._0x2d8ed0)]||!s.hasEdit||this[i(t._0x42d0af)].contextmenu[i(575)]&&this._map.contextmenu.target===s)return;let n;isPCBroswer()?n=this._map.getLangText("_单击后激活编辑")+i(1401)+this[i(1890)].getLangText("_右击菜单删除"):n=this[i(t._0x58fe48)][i(4296)](i(3135)),this._map.openSmallTooltip(e[i(3227)],n)}[_0x5e32ae(1290)](e){const t={_0x1e5e13:2118,_0x32785f:2639,_0x1127f3:4244},i=_0x5e32ae;if(this._graphic_drawing)return;const s=e[i(t._0x1e5e13)];s&&(s.isPrivate||!s[i(2639)])||(this[i(t._0x32785f)]&&s&&e.layer===this?this[i(t._0x1127f3)](s,e):this.stopEditing())}[_0x5e32ae(4244)](e,t){const i={_0x32323b:4244,_0x1982fa:783,_0x51bc70:1517},s=_0x5e32ae;if(!(!e||!e[s(i._0x32323b)]||!e.isAdded||!e.hasEdit)&&!(this._graphic_editing===e||e._enabledDraw))return this[s(i._0x1982fa)](),e[s(4244)](),t&&e._draw_tooltip&&this._map[s(i._0x51bc70)](t.position,e._draw_tooltip),this._graphic_editing=e,this}[_0x5e32ae(783)](){const e=_0x5e32ae;return this._graphic_editing&&(this[e(2045)].stopEditing(),this._graphic_editing=null),this}}register$2("graphic",GraphicLayer);class MatrixMove extends BaseThing{constructor(e={}){const t={_0x3c81e1:529},i=_0x5e32ae;super(e),this[i(t._0x3c81e1)]=new Cesium__namespace.Cartesian3(0,0,0),this.rotateMatrix=new Cesium__namespace[i(3768)](1,0,0,0,1,0,0,0,1),e.position&&(this.position=e.position)}get[_0x5e32ae(2180)](){return this._position}set position(e){this._position=LngLatPoint.toCartesian(e),this._initByPosition(),this._updatePositionHook(!![])}get isMoveing(){return this._map?this._hasChangeEnableInputs:![]}_mountedHook(){this._graphicLayer=new GraphicLayer({private:!![]})}_addedHook(){const e={_0x591e0f:2058},t=_0x5e32ae;this._map.addLayer(this._graphicLayer),this[t(e._0x591e0f)](!![]),this._createGraphics(),this[t(3818)]()}[_0x5e32ae(2442)](){const e={_0x5aefa1:2314,_0x27c94a:993,_0x322d77:3942},t=_0x5e32ae;this._graphic_move_x&&delete this[t(e._0x5aefa1)],this._graphic_move_y&&delete this._graphic_move_y,this._graphic_move_z&&delete this._graphic_move_z,this._graphic_dragger_ing&&delete this._graphic_dragger_ing,this._graphicLayer.clear(),this._map.removeLayer(this[t(e._0x27c94a)]),this[t(e._0x322d77)]()}_createGraphics(){const e={_0x17e48d:2314,_0x2fbed6:3897,_0x23c5d6:4223,_0x17013c:4223,_0x27b7d2:4061},t=_0x5e32ae;this._graphicLayer.clear(),this[t(e._0x17e48d)]=new PolylinePrimitive({positions:this._positions_line_x,style:{width:15,arcType:Cesium__namespace.ArcType.NONE,materialType:PolylineArrow,color:Cesium__namespace.Color.RED,depthFail:!![]},attr:{move:!![],type:Cesium__namespace.Axis.X},asynchronous:![]}),this._graphicLayer.addGraphic(this._graphic_move_x),this._graphic_move_y=new PolylinePrimitive({positions:this._positions_line_y,style:{width:15,arcType:Cesium__namespace[t(e._0x2fbed6)].NONE,materialType:PolylineArrow,color:Cesium__namespace.Color[t(2371)],depthFail:!![]},attr:{move:!![],type:Cesium__namespace[t(988)].Y},asynchronous:![]}),this._graphicLayer[t(e._0x23c5d6)](this._graphic_move_y),this._graphic_move_z=new PolylinePrimitive({positions:this._positions_line_z,style:{width:15,arcType:Cesium__namespace[t(3897)].NONE,materialType:PolylineArrow,color:Cesium__namespace[t(2200)].BLUE,depthFail:!![]},attr:{move:!![],type:Cesium__namespace.Axis.Z},asynchronous:![]}),this._graphicLayer[t(e._0x17013c)](this._graphic_move_z),this._graphic_dragger_ing=new PolylinePrimitive({positions:[],style:{width:3,arcType:Cesium__namespace[t(3897)][t(3898)],materialType:PolylineDash,color:Cesium__namespace.Color[t(4128)],depthFail:!![]},asynchronous:![],show:![]}),this._graphicLayer.addGraphic(this[t(e._0x27b7d2)])}[_0x5e32ae(3697)](){const e={_0x184bbc:3989,_0x44911e:2911,_0x5992fa:3719},t=_0x5e32ae;this[t(e._0x184bbc)]=Cesium__namespace[t(e._0x44911e)].eastNorthUpToFixedFrame(this.position),this.worldToModel=Cesium__namespace.Matrix4.inverse(this.modelToWorld,new Cesium__namespace.Matrix4),this.matrix=this[t(3989)].clone(),this.inverseMatrix=Cesium__namespace.Matrix4.inverse(this.matrix,new Cesium__namespace.Matrix4),this[t(e._0x5992fa)]=Cesium__namespace[t(4102)].multiplyByPointAsVector(this.matrix,Cesium__namespace[t(3916)].UNIT_X,new Cesium__namespace.Cartesian3),this.normalY=Cesium__namespace[t(4102)].multiplyByPointAsVector(this.matrix,Cesium__namespace.Cartesian3.UNIT_Y,new Cesium__namespace.Cartesian3),this.normalZ=Cesium__namespace.Matrix4.multiplyByPointAsVector(this[t(3282)],Cesium__namespace.Cartesian3.UNIT_Z,new Cesium__namespace.Cartesian3),this[t(3297)]=[],this._positions_line_y=[],this[t(2234)]=[]}_updatePositionHook(e){const t={_0x2dbf6c:1890,_0x5b9615:4246,_0xda5706:4102,_0x215c59:3462,_0x8a867f:2792,_0x14c195:2112,_0x42b6d5:3916,_0x167a70:2234,_0x1e5e05:3194,_0xd7e035:2314,_0x241cd8:2436},i=_0x5e32ae;if(!this[i(t._0x2dbf6c)])return;const s=this.position[i(t._0x5b9615)]();if(e){const n=new Cesium__namespace[i(t._0xda5706)][i(t._0x215c59)](this._map[i(t._0x8a867f)].viewMatrix,s,new Cesium__namespace[i(3916)]),o=-n.z*Math.tan(this._map.camera[i(2801)][i(t._0x14c195)]/2)*2,c=o/this._map.canvas.width;this.radius=200*c}this._positions_line_x=[s,Cesium__namespace.Matrix4.multiplyByPoint(this.matrix,new Cesium__namespace.Cartesian3(this.radius,0,0),new Cesium__namespace[i(t._0x42b6d5)])],this._positions_line_y=[s,Cesium__namespace.Matrix4.multiplyByPoint(this[i(3282)],new Cesium__namespace.Cartesian3(0,this.radius,0),new Cesium__namespace.Cartesian3)],this[i(t._0x167a70)]=[s,Cesium__namespace.Matrix4[i(3462)](this.matrix,new Cesium__namespace[i(t._0x42b6d5)](0,0,this[i(t._0x1e5e05)]),new Cesium__namespace.Cartesian3)],this[i(2314)]&&(this[i(t._0xd7e035)].positions=this._positions_line_x),this[i(1550)]&&(this._graphic_move_y[i(t._0x241cd8)]=this._positions_line_y),this._graphic_move_z&&(this._graphic_move_z.positions=this._positions_line_z)}[_0x5e32ae(3818)](){const e={_0x42185c:4217},t=_0x5e32ae;this._graphicLayer.on(EventType[t(e._0x42185c)],this._onMap_leftDown,this),this[t(1890)].on(EventType[t(1285)],this._onMap_leftUp,this),this._map.on(EventType.middleClick,this._onMap_middleClick,this),this._map.on(EventType.wheel,this[t(3885)],this)}_unbindEvent(){const e={_0xb644c0:2819},t=_0x5e32ae;this._graphicLayer.off(EventType.leftDown,this._onMap_leftDown,this),this._map.off(EventType.leftUp,this[t(e._0xb644c0)],this),this._map.off(EventType.mouseMove,this._onMap_mouseMove,this),this._map[t(1220)](EventType.middleClick,this._onMap_middleClick,this),this._map.off(EventType.wheel,this[t(3885)],this)}_onMap_leftDown(e){const t={_0x4f2a35:2118,_0x113a99:706,_0x147376:4114,_0x4203dd:3284,_0x5d2766:3107,_0x5ba596:1890,_0x115eb3:3595,_0x440a98:3119},i=_0x5e32ae;if(this._graphic=void 0,e[i(1538)]!==this._graphicLayer)return;const s=e[i(t._0x4f2a35)];if(!s||!(s.attr.move||s.attr[i(t._0x113a99)]))return;this[i(3284)]=s,!s.style.color_bak&&(s[i(t._0x147376)].color_bak=s.style[i(2092)]),s.setStyle({color:Cesium__namespace.Color.YELLOW}),this._graphic_dragger_ing.positions=[this.position,this.position],this._graphic_dragger_ing.show=!![];const n=this[i(t._0x4203dd)].attr.type;this.fire(EventType.start,{...e,editType:n,graphic:s}),this._map[i(t._0x5d2766)].screenSpaceCameraController[i(979)]&&(this[i(t._0x5ba596)][i(3107)][i(t._0x115eb3)].enableInputs=![],this._hasChangeEnableInputs=!![]),this[i(1890)].on(EventType[i(4055)],this[i(t._0x440a98)],this)}_onMap_mouseMove(e){const t={_0x6457e4:1598,_0x502de8:1528,_0x3f7dee:3719,_0x3c658a:1558,_0x121c07:2792,_0x50b243:4102,_0x5e9c76:1890,_0x536fca:1890,_0x51fb7c:3916,_0x1b69f6:1640,_0x431316:1689,_0x279844:1771,_0x3149ad:1975,_0xd06c63:1558,_0x334fab:2949,_0x268875:3282,_0x3475a9:3916,_0x57b1bb:3281,_0x26d386:2072,_0x41ae94:3768,_0x579fc4:2666,_0x46bb51:1771,_0x2edf7f:3768,_0x188e4f:2666,_0x2696d3:2436},i=_0x5e32ae;if(!this._graphic)return;const s=e[i(t._0x6457e4)],n=e.endPosition;let o;const c=this._graphic[i(t._0x502de8)].type;c===Cesium__namespace.Axis.X&&(o=this[i(t._0x3f7dee)]),c===Cesium__namespace.Axis.Y&&(o=this[i(t._0x3c658a)]),c===Cesium__namespace.Axis.Z&&(o=this.normalZ);const _=new Cesium__namespace.Cartesian3(n.x-s.x,-(n.y-s.y),0),l=new Cesium__namespace.Matrix4[i(2949)](this[i(1890)][i(t._0x121c07)].inverseViewMatrix,_,new Cesium__namespace[i(3916)]),h=new Cesium__namespace[i(t._0x50b243)][i(3462)](this._map.camera.viewMatrix,this.position,new Cesium__namespace.Cartesian3),f=-h.z*Math.tan(this[i(t._0x5e9c76)].camera[i(2801)].fov/2)*2,m=f/this[i(t._0x536fca)].canvas.width,g=Cesium__namespace[i(t._0x51fb7c)].dot(l,o)*m,C=Cesium__namespace.Cartographic.fromCartesian(this.position);let E=new Cesium__namespace.Cartesian3(this.position.x+o.x*g,this[i(2180)].y+o.y*g,this[i(2180)].z+o.z*g);c!==Cesium__namespace.Axis.Z&&(E=Cesium__namespace.Cartographic.fromCartesian(E),E[i(3865)]=C.height,c===Cesium__namespace[i(988)].X?E.latitude=C.latitude:E.longitude=C[i(t._0x1b69f6)],E=Cesium__namespace.Cartesian3.fromRadians(E.longitude,E.latitude,E.height));const P=Cesium__namespace.Matrix4[i(3462)](this.inverseMatrix,E,new Cesium__namespace.Cartesian3);Cesium__namespace[i(4102)].multiplyByPointAsVector(this.matrix,P,P),Cesium__namespace.Matrix4[i(2666)](this[i(t._0x431316)],new Cesium__namespace.Cartesian4(P.x,P.y,P.z,0),P),Cesium__namespace.Cartesian3.add(this.translation,P,this.translation),this.position=E,this[i(3282)]=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(this.position),Cesium__namespace[i(4102)][i(t._0x279844)](this.matrix,this[i(t._0x3149ad)]);const w=this.normalX,M=this.normalY,T=this.normalZ;if(this[i(3719)]=Cesium__namespace.Matrix4.multiplyByPointAsVector(this.matrix,Cesium__namespace.Cartesian3[i(2620)],new Cesium__namespace.Cartesian3),this[i(t._0xd06c63)]=Cesium__namespace[i(t._0x50b243)][i(t._0x334fab)](this[i(t._0x268875)],Cesium__namespace.Cartesian3.UNIT_Y,new Cesium__namespace[i(t._0x3475a9)]),this[i(t._0x57b1bb)]=Cesium__namespace.Matrix4[i(2949)](this.matrix,Cesium__namespace.Cartesian3[i(t._0x26d386)],new Cesium__namespace.Cartesian3),c===Cesium__namespace.Axis.X){let R=Cesium__namespace.Cartesian3.angleBetween(M,this[i(1558)]),D=Cesium__namespace.Cartesian3[i(1701)](T,this.normalZ);g<0&&(D=-D,R=-R);const N=Cesium__namespace[i(t._0x50b243)].multiplyByPointAsVector(this.worldToModel,T,new Cesium__namespace.Cartesian3);let k=Cesium__namespace[i(t._0x41ae94)].inverse(this.rotateMatrix,new Cesium__namespace[i(t._0x41ae94)]),B=Cesium__namespace.Matrix3[i(t._0x579fc4)](k,N,new Cesium__namespace.Cartesian3),$=this._axisRotation(B,R);Cesium__namespace[i(3768)][i(2663)](this.rotateMatrix,$,this[i(2126)]);const H=Cesium__namespace.Matrix4.multiplyByPointAsVector(this.worldToModel,M,new Cesium__namespace.Cartesian3);k=Cesium__namespace.Matrix3[i(t._0x46bb51)](this.rotateMatrix,new Cesium__namespace.Matrix3),B=Cesium__namespace.Matrix3.multiplyByVector(k,H,new Cesium__namespace[i(3916)]),$=this._axisRotation(B,D),Cesium__namespace[i(3768)].multiply(this.rotateMatrix,$,this.rotateMatrix)}if(c===Cesium__namespace.Axis.Y){let R=Cesium__namespace[i(t._0x3475a9)].angleBetween(T,this.normalZ);g>0&&(R=-R);const D=Cesium__namespace.Matrix4[i(2949)](this.worldToModel,w,new Cesium__namespace[i(3916)]),N=Cesium__namespace[i(t._0x2edf7f)][i(1771)](this.rotateMatrix,new Cesium__namespace.Matrix3),k=Cesium__namespace[i(3768)][i(t._0x188e4f)](N,D,new Cesium__namespace.Cartesian3),B=this._axisRotation(k,R);Cesium__namespace.Matrix3.multiply(this.rotateMatrix,B,this.rotateMatrix)}this._graphic_dragger_ing[i(t._0x2696d3)]=[this._graphic_dragger_ing.positions[0],E],this._updatePositionHook();const L={...e,editType:c,position:E};this[i(2456)](L)}[_0x5e32ae(2819)](e){const t={_0x2ebf3a:3868,_0xd2031e:3284,_0x15e9b4:3119},i=_0x5e32ae;this._graphic&&(this._graphic.setStyle({color:this._graphic.style[i(t._0x2ebf3a)]}),this[i(t._0xd2031e)]=null,this._graphic_dragger_ing.positions=[],this._graphic_dragger_ing.show=![],this[i(469)]&&(this._map.scene.screenSpaceCameraController.enableInputs=!![],delete this._hasChangeEnableInputs),this._map.off(EventType[i(4055)],this[i(t._0x15e9b4)],this),this.fire(EventType[i(3874)],e))}[_0x5e32ae(1168)](e,t,i){const s={_0x1812ff:3768,_0x422e56:3768,_0x1b205a:3768},n=_0x5e32ae;let o=e.x,c=e.y,_=e.z;const l=Math.sqrt(o*o+c*c+_*_);o=o/l,c=c/l,_=_/l;const h=o*o,f=c*c,m=_*_,g=Math[n(1784)](t),C=Math.sin(t),E=1-g;return i=i||new Cesium__namespace.Matrix3,i[Cesium__namespace.Matrix3.COLUMN0ROW0]=h+(1-h)*g,i[Cesium__namespace.Matrix3.COLUMN0ROW1]=o*c*E+_*C,i[Cesium__namespace[n(s._0x1812ff)].COLUMN0ROW2]=o*_*E-c*C,i[Cesium__namespace[n(s._0x422e56)].COLUMN1ROW0]=o*c*E-_*C,i[Cesium__namespace.Matrix3[n(3788)]]=f+(1-f)*g,i[Cesium__namespace[n(3768)].COLUMN1ROW2]=c*_*E+o*C,i[Cesium__namespace.Matrix3.COLUMN2ROW0]=o*_*E+c*C,i[Cesium__namespace[n(3768)].COLUMN2ROW1]=c*_*E-o*C,i[Cesium__namespace[n(s._0x1b205a)].COLUMN2ROW2]=m+(1-m)*g,i}_onMap_wheel(){this[_0x5e32ae(2058)](!![])}_onMap_middleClick(e){const t={_0x56302e:3282,_0xd546b9:3684},i=_0x5e32ae,s=this._map.scene.pickPosition(e[i(2180)]);s&&(this.position=s,this[i(t._0x56302e)]=Cesium__namespace.Transforms[i(t._0xd546b9)](this.position),Cesium__namespace.Matrix4.inverse(this.matrix,this.inverseMatrix),this._updatePositionHook())}onChange(e){const t={_0x1a9a17:2456},i=_0x5e32ae;this.options[i(t._0x1a9a17)]&&this.options[i(t._0x1a9a17)](e),this[i(1404)](EventType.change,e,!![])}}class MatrixRotate extends MatrixMove{get heading(){return this.options.heading??0}set heading(e){const t={_0x1270df:3798,_0x3b1f62:3977},i=_0x5e32ae;this[i(t._0x1270df)][i(t._0x3b1f62)]=e}get pitch(){const e=_0x5e32ae;return this.options[e(2625)]??0}set[_0x5e32ae(2625)](e){this.options.pitch=e}get roll(){return this.options.roll??0}set roll(e){const t=_0x5e32ae;this.options[t(4175)]=e}[_0x5e32ae(2442)](){delete this._graphic_rotate_z,delete this._graphic_rotate_x,delete this._graphic_rotate_y,super._removedHook()}_createGraphics(){const e={_0x19a639:2200,_0x50cce1:3843,_0x3b103f:728,_0x4b0852:993,_0xa370fb:4223},t=_0x5e32ae;this._graphicLayer.clear(),this._graphic_rotate_x=new PolylinePrimitive({positions:this._positions_circle_x,style:{width:8,color:Cesium__namespace[t(e._0x19a639)][t(1039)],depthFail:!![],depthFailColor:Cesium__namespace.Color[t(1039)].withAlpha(.5)},attr:{rotate:!![],type:Cesium__namespace.Axis.X},asynchronous:![]}),this._graphicLayer.addGraphic(this[t(4286)]),this._graphic_rotate_y=new PolylinePrimitive({positions:this._positions_circle_y,style:{width:8,color:Cesium__namespace.Color.GREEN,depthFail:!![],depthFailColor:Cesium__namespace.Color.GREEN[t(3518)](.5)},attr:{rotate:!![],type:Cesium__namespace.Axis.Y},asynchronous:![]}),this._graphicLayer.addGraphic(this._graphic_rotate_y),this[t(e._0x50cce1)]=new PolylinePrimitive({positions:this._positions_circle_z,style:{width:8,color:Cesium__namespace.Color.BLUE,depthFail:!![],depthFailColor:Cesium__namespace.Color[t(e._0x3b103f)].withAlpha(.5)},attr:{rotate:!![],type:Cesium__namespace.Axis.Z},asynchronous:![]}),this[t(e._0x4b0852)][t(e._0xa370fb)](this._graphic_rotate_z),this._graphic_dragger_ing=new PolylinePrimitive({positions:[],style:{width:3,arcType:Cesium__namespace[t(3897)].NONE,materialType:PolylineDash,color:Cesium__namespace.Color.YELLOW,depthFail:!![]},asynchronous:![],show:![]}),this._graphicLayer.addGraphic(this._graphic_dragger_ing)}_initByPosition(){const e={_0x51dc36:3989,_0x26a4c3:4102,_0x356414:1771,_0xae041f:1558},t=_0x5e32ae;this[t(e._0x51dc36)]=Cesium__namespace.Transforms[t(3684)](this.position),this.worldToModel=Cesium__namespace[t(e._0x26a4c3)][t(e._0x356414)](this.modelToWorld,new Cesium__namespace[t(4102)]),this.matrix=this.modelToWorld.clone(),this.inverseMatrix=Cesium__namespace.Matrix4.inverse(this[t(3282)],new Cesium__namespace.Matrix4),this[t(3719)]=Cesium__namespace.Matrix4.multiplyByPointAsVector(this.matrix,Cesium__namespace[t(3916)].UNIT_X,new Cesium__namespace.Cartesian3),this[t(e._0xae041f)]=Cesium__namespace.Matrix4.multiplyByPointAsVector(this[t(3282)],Cesium__namespace.Cartesian3.UNIT_Y,new Cesium__namespace.Cartesian3),this.normalZ=Cesium__namespace.Matrix4.multiplyByPointAsVector(this.matrix,Cesium__namespace.Cartesian3.UNIT_Z,new Cesium__namespace.Cartesian3),this[t(1462)]=[],this._positions_circle_x=[],this._positions_circle_y=[]}[_0x5e32ae(2058)](e){const t={_0x144a02:1890,_0x345b60:597,_0x181049:3916,_0x2c9513:4084,_0x4ba2d:3759,_0x4737af:3916},i=_0x5e32ae;if(!this[i(t._0x144a02)])return;const s=this.position.clone();if(e){const n=new Cesium__namespace.Matrix4.multiplyByPoint(this._map.camera[i(2982)],s,new Cesium__namespace.Cartesian3),o=-n.z*Math[i(t._0x345b60)](this[i(t._0x144a02)].camera.frustum.fov/2)*2,c=o/this._map.canvas.width;this.radius=200*c}this._positions_circle_z=[],this._positions_circle_x=[],this._positions_circle_y=[];for(let n=0;n<=360;n++){const o=this.radius*Math.cos(n/180*Math.PI),c=this.radius*Math.sin(n/180*Math.PI),_=new Cesium__namespace[i(3916)];Cesium__namespace.Cartesian3.add(s,Cesium__namespace.Cartesian3.multiplyByScalar(this.normalX,o,new Cesium__namespace.Cartesian3),_),Cesium__namespace.Cartesian3[i(4084)](_,Cesium__namespace[i(t._0x181049)].multiplyByScalar(this.normalY,c,new Cesium__namespace[i(t._0x181049)]),_),this._positions_circle_z.push(_);const l=new Cesium__namespace[i(3916)];Cesium__namespace.Cartesian3.add(s,Cesium__namespace.Cartesian3.multiplyByScalar(this.normalX,o,new Cesium__namespace.Cartesian3),l),Cesium__namespace.Cartesian3[i(t._0x2c9513)](l,Cesium__namespace.Cartesian3.multiplyByScalar(this.normalZ,c,new Cesium__namespace.Cartesian3),l),this._positions_circle_x[i(t._0x4ba2d)](l);const h=new Cesium__namespace.Cartesian3;Cesium__namespace[i(t._0x4737af)].add(s,Cesium__namespace[i(3916)].multiplyByScalar(this.normalY,o,new Cesium__namespace[i(t._0x4737af)]),h),Cesium__namespace.Cartesian3.add(h,Cesium__namespace.Cartesian3.multiplyByScalar(this.normalZ,c,new Cesium__namespace.Cartesian3),h),this[i(2205)].push(h)}this._graphic_rotate_z&&(this._graphic_rotate_z.positions=this._positions_circle_z),this._graphic_rotate_x&&(this._graphic_rotate_x[i(2436)]=this[i(2558)]),this._graphic_rotate_y&&(this._graphic_rotate_y.positions=this[i(2205)])}_onMap_mouseMove(e){const t={_0x5cb4bf:3205,_0x464de8:4102,_0x5465db:3858,_0x3cdc99:1890,_0x425d78:3916,_0x20749c:2949,_0x3e94e6:3282,_0xb197e4:1890,_0xc863a6:1689,_0x3343bd:1689,_0x490f7e:3916,_0x5ec1e7:1771,_0x538077:2666},i=_0x5e32ae,s=e.startPosition,n=e.endPosition,o=new Cesium__namespace.Matrix4.multiplyByPoint(this._map[i(2792)].viewMatrix,this.position,new Cesium__namespace.Cartesian3);let _=-o.z*Math.tan(this._map.camera.frustum.fov/2)*2/this._map.canvas.width;const l=new Cesium__namespace[i(3916)](1,1,1);let h;const f=this._graphic.attr[i(t._0x5cb4bf)];f===Cesium__namespace.Axis.Z&&(l.z=0,h=Cesium__namespace.Cartesian3.angleBetween(Cesium__namespace[i(t._0x464de8)].multiplyByPointAsVector(this.matrix,new Cesium__namespace.Cartesian3(0,0,1),new Cesium__namespace.Cartesian3),this[i(1890)].camera[i(t._0x5465db)])),f===Cesium__namespace.Axis.X&&(l.y=0,h=Cesium__namespace.Cartesian3[i(1701)](Cesium__namespace.Matrix4.multiplyByPointAsVector(this.matrix,new Cesium__namespace.Cartesian3(0,1,0),new Cesium__namespace[i(3916)]),this[i(t._0x3cdc99)].camera.direction)),f===Cesium__namespace.Axis.Y&&(l.x=0,h=Cesium__namespace[i(t._0x425d78)].angleBetween(Cesium__namespace[i(t._0x464de8)][i(t._0x20749c)](this[i(t._0x3e94e6)],new Cesium__namespace[i(3916)](1,0,0),new Cesium__namespace.Cartesian3),this._map.camera.direction)),Math.abs(h-Math.PI/2)<.1&&(_=1,o.z=0);let m=new Cesium__namespace.Cartesian3((s.x-this._map[i(3300)].width/2)*_,(-s.y+this[i(t._0xb197e4)].canvas.height/2)*_,o.z),g=new Cesium__namespace.Cartesian3((n.x-this._map.canvas[i(4005)]/2)*_,(-n.y+this._map.canvas.height/2)*_,o.z);Cesium__namespace[i(4102)][i(3462)](this._map.camera.inverseViewMatrix,m,m),Cesium__namespace[i(4102)].multiplyByPoint(this._map.camera.inverseViewMatrix,g,g),Cesium__namespace.Matrix4.multiplyByPoint(this.inverseMatrix,m,m),Cesium__namespace[i(t._0x464de8)].multiplyByPoint(this.inverseMatrix,g,g),m=new Cesium__namespace[i(3916)](m.x*l.x,m.y*l.y,m.z*l.z),g=new Cesium__namespace.Cartesian3(g.x*l.x,g.y*l.y,g.z*l.z),h=Cesium__namespace.Cartesian3.angleBetween(m,g);let C;if(f===Cesium__namespace.Axis.Z){const T=m.x*g.y-m.y*g.x;C=Cesium__namespace.Matrix4.multiplyByPointAsVector(this[i(t._0xc863a6)],this[i(3281)],new Cesium__namespace.Cartesian3),T>0&&(h=-h),this.heading=(this.heading+Cesium__namespace.Math.toDegrees(h))%360}else if(f===Cesium__namespace[i(988)].X){const T=m.x*g.z-m.z*g.x;C=Cesium__namespace.Matrix4.multiplyByPointAsVector(this[i(t._0x3343bd)],this.normalY,new Cesium__namespace[i(t._0x490f7e)]),T>0&&(h=-h),this.pitch=(this[i(2625)]+Cesium__namespace.Math.toDegrees(h))%360}else if(f===Cesium__namespace[i(988)].Y){const T=m.y*g.z-m.z*g.y;C=Cesium__namespace.Matrix4.multiplyByPointAsVector(this.worldToModel,this.normalX,new Cesium__namespace.Cartesian3),T<0&&(h=-h),this.roll=(this.roll+Cesium__namespace[i(1286)][i(1984)](h))%360}const E=Cesium__namespace.Matrix3[i(t._0x5ec1e7)](this.rotateMatrix,new Cesium__namespace.Matrix3),P=Cesium__namespace.Matrix3[i(t._0x538077)](E,C,new Cesium__namespace[i(t._0x490f7e)]),w=this._axisRotation(P,h);Cesium__namespace[i(3768)].multiply(this.rotateMatrix,w,this.rotateMatrix);const M={...e,editType:f,position:this.position,heading:this.heading,pitch:this[i(2625)],roll:this.roll};this.onChange(M)}_onMap_middleClick(e){}}class EditBase{constructor(e){const t=_0x5e32ae;this._graphic=e,this._map=e[t(1890)],this[t(4209)]=[]}get enabled(){return this[_0x5e32ae({_0x3ce73b:1497}._0x3ce73b)]}get map(){return this[_0x5e32ae({_0x24f527:1890}._0x24f527)]}get layer(){return this[_0x5e32ae({_0x14a293:3284}._0x14a293)]._layer}get style(){const e=_0x5e32ae;return this._graphic[e(4114)]}get clampToGround(){const e={_0x2ed892:3284,_0x4f588f:2825},t=_0x5e32ae;var i,s;return(i=this[t(e._0x2ed892)])===null||i===void 0||(s=i.style)===null||s===void 0?void 0:s[t(e._0x4f588f)]}get type(){return this._graphic.type}get entityGraphic(){return this[_0x5e32ae(3284)].entityGraphic}set[_0x5e32ae(2436)](e){const t=_0x5e32ae;this._graphic[t(1761)]=e}get[_0x5e32ae(2436)](){return this._graphic._positions_draw||this._graphic._positions||[]}get hasRotateMatrix(){return!!this._matrixRotate}get hasMoveMatrix(){return!!this[_0x5e32ae({_0x2d5a06:1054}._0x2d5a06)]}fire(e,t={},i=!![]){const s={_0x2380b0:3205},n=_0x5e32ae;if(this._graphic){const o=this[n(3284)].parent;t.editType=this[n(s._0x2380b0)],this._graphic.fire(e,t,i),o&&(t.editType=o.type,o.fire(e,t,i))}}[_0x5e32ae(3669)](e,t){return formatNum$1(e,t)}[_0x5e32ae(3138)](){const e={_0x564ed1:3284},t=_0x5e32ae;return this[t(1497)]?this:(this._enabled=!![],this[t(e._0x564ed1)]._setPositionsToCallback&&this._graphic[t(3055)](),this.destroyDraggers(),this[t(1560)](),this.bindEvent(),this[t(1404)](EventType.editStart),this)}disable(){const e={_0x4bde5a:516},t=_0x5e32ae;var i,s,n;return this._enabled?(this._enabled=![],this[t(1258)](),this.stopRotateMatrix(),this.unbindEvent(),this.destroyDraggers(),this.finish(),(i=this._graphic)!==null&&i!==void 0&&(s=i._layer)!==null&&s!==void 0&&(n=s.options)!==null&&n!==void 0&&n.isRestorePositions&&this._graphic._cancelPositionsCallback(),this.fire(EventType[t(e._0x4bde5a)]),this):this}finish(){}bindEvent(){const e=_0x5e32ae;this._map.on(EventType.leftDown,this._onLeftDownHandler,this),this._map.on(EventType.mouseMove,this._onMouseMoveHandler,this),this[e(1890)].on(EventType[e(1285)],this._onLeftUpHandler,this)}unbindEvent(){const e={_0x313bfa:469,_0x18b8ed:575},t=_0x5e32ae;this._map.off(EventType.leftDown,this._onLeftDownHandler,this),this._map.off(EventType.mouseMove,this._onMouseMoveHandler,this),this._map.off(EventType.leftUp,this[t(1384)],this),this._hasChangeEnableInputs&&(this._map.scene.screenSpaceCameraController[t(979)]=!![],delete this[t(e._0x313bfa)]),this._map._setEditCursor(![]),!this._graphic[t(e._0x18b8ed)]&&(this._graphic.show=!![])}[_0x5e32ae(3756)](e){const t={_0x3756b2:3107,_0xce1cf7:1890,_0x5e985c:1169,_0xf99f6:3224,_0x82d79b:698,_0x24795a:2180},i=_0x5e32ae,s=this._map.mouseEvent[i(1402)](e.position,e);if(s.layer!==this.layer)return;const n=s==null?void 0:s[i(2118)];!n||!n[i(443)]||(this._map[i(t._0x3756b2)].screenSpaceCameraController.enableInputs&&(this[i(1890)].scene[i(3595)][i(979)]=![],this._hasChangeEnableInputs=!![]),this[i(t._0xce1cf7)]._setEditCursor(!![]),n[i(t._0x5e985c)](),this._draggerIng=n,this._draggerIng.show=n.options.drawShow??![],n[i(t._0xf99f6)]&&n.onDragStart(n,s[i(t._0x82d79b)]||n[i(t._0x24795a)]),this.fire(EventType.editMouseDown,{...e,...s,index:this._draggerIng.index}))}_onMouseMoveHandler(e){const t=_0x5e32ae;this._draggerIng?this[t(3169)](e):this._onMouseMoveMapHandler(e)}_onMouseMoveDraggerHandler(e){const t={_0xdcb4e3:1890,_0x37d841:2792,_0x220550:1890,_0x5a7fb8:4246,_0x21a2d0:2180,_0x19f53b:3542,_0x2e59f4:3284,_0x53a680:4063,_0x1801c3:1274},i=_0x5e32ae;let s;switch(this._draggerIng._pointType){case PointType.MoveHeight:{var n;const o=e.endPosition.y-e.startPosition.y,c=getPositionValue(this._draggerIng.position,(n=this._map)===null||n===void 0?void 0:n[i(1949)][i(837)]),_=new Cesium__namespace.EllipsoidTangentPlane(c),l=new Cesium__namespace.BoundingSphere,h=new Cesium__namespace[i(3916)];l.center=c,l.radius=1;const f=this[i(t._0xdcb4e3)].scene[i(3899)][i(t._0x37d841)].getPixelSize(l,this._map.scene.frameState.context.drawingBufferWidth,this[i(t._0x220550)].scene.frameState.context.drawingBufferHeight)*1.5;Cesium__namespace.Cartesian3.multiplyByScalar(_.zAxis,-o*f,h),s=Cesium__namespace.Cartesian3[i(t._0x5a7fb8)](c),Cesium__namespace.Cartesian3.add(c,h,s),this._draggerIng[i(t._0x21a2d0)]=s,this._draggerIng.onDrag&&this._draggerIng.onDrag(this._draggerIng,s,c),this.updateAttrForEditing(),this.fire(EventType.editStyle,e);break}default:{this._map.openSmallTooltip(e.endPosition,this[i(1890)].getLangText(i(3445)));let o=this._graphic._entity;if(this.clampToGround&&(o=null),s=getCurrentMousePosition(this._map.scene,e[i(1274)],o),s){if(this._graphic.options[i(t._0x19f53b)]&&!this._graphic.options.validDrawPosition(s,this[i(t._0x2e59f4)]))return;this._draggerIng.position=s,this._draggerIng[i(2439)]&&this._draggerIng.onDrag(this._draggerIng,s),this.updateAttrForEditing()}}break}this.fire(EventType.editMouseMove,{...e,index:this._draggerIng[i(t._0x53a680)],cartesian:s,windowPosition:e[i(t._0x1801c3)]})}[_0x5e32ae(3233)](e){const t={_0x5205b1:636,_0x360e33:1538,_0x9d116:2570,_0x3ff03a:3721,_0x15b810:3284,_0xb342e8:1401,_0x3fc64d:4296,_0x3e8a4e:1517},i=_0x5e32ae;var s,n;const o=this[i(1890)][i(t._0x5205b1)].getPickTarget(e.endPosition,e),c=o==null?void 0:o.graphic;if(c==null){this._map.closeSmallTooltip();return}if(o.layer!==this[i(t._0x360e33)]||!c[i(443)]||this._map[i(t._0x9d116)][i(575)]&&this._map[i(t._0x9d116)].target===c)return;let _=c._draw_tooltip;_&&(PointType[i(t._0x3ff03a)]===c[i(2997)]&&((s=this._graphic)===null||s===void 0||(n=s._positions_draw)===null||n===void 0?void 0:n[i(3402)])>this[i(t._0x15b810)]._minPointNum&&(_+=i(t._0xb342e8)+this._map[i(t._0x3fc64d)]("_右击删除点")),this._map[i(t._0x3e8a4e)](e.endPosition,_))}[_0x5e32ae(1384)](e){const t={_0x37fe66:4293,_0x2bcded:3505,_0x282e84:469},i=_0x5e32ae;var s;if(!this._draggerIng)return;this[i(t._0x37fe66)].show=!![];const n=getPositionValue(this[i(4293)].position,(s=this._map)===null||s===void 0?void 0:s.clock.currentTime),o=this._draggerIng.index;this._draggerIng.onDragEnd&&this[i(4293)].onDragEnd(this._draggerIng,n),this.updateAttrForEditing(),this.fire(EventType.editMovePoint,{...e,index:o,cartesian:n}),this._draggerIng=null,this._map[i(t._0x2bcded)](![]),this[i(t._0x282e84)]&&(this._map[i(3107)].screenSpaceCameraController.enableInputs=!![],delete this._hasChangeEnableInputs)}openSmallTooltipByMinPointNum(e){const t={_0x4f54d6:1890},i=_0x5e32ae;this[i(t._0x4f54d6)].openSmallTooltip(e,this[i(1890)].getLangText(i(4036))+" "+this._graphic._minPointNum)}createDragger(e){const t={_0xf6b073:3476,_0x2fa58b:838,_0x52dfa3:3584,_0x3e9465:2439,_0xf852d2:2997,_0x3c3fd3:3798,_0x3850f0:2182},i=_0x5e32ae;let s;return e.dragger?s=e.dragger:(s=new PointPrimitive({position:e.position??Cesium__namespace.Cartesian3.ZERO,style:getEditPointStyle(e[i(3205)]),hasEdit:![],private:!![]}),s[i(t._0xf6b073)]=this._graphic,this.layer.addGraphic(s)),s._draw_tooltip=this._map.getLangText("_拖动该点后")+" "+(e.tooltip||this._map.getLangText(i(t._0x2fa58b))),s._isDragger=!![],s[i(t._0x52dfa3)]=!![],s[i(2997)]=e.type||PointType.Control,s.onDragStart=e.onDragStart,s[i(t._0x3e9465)]=e.onDrag,s[i(2313)]=e.onDragEnd,(s._pointType===PointType.Control||s[i(t._0xf852d2)]===PointType.MoveAll)&&(this._graphic[i(t._0x3c3fd3)].hasEditContextMenu??!![])&&(s._draw_tooltip+="<br/>"+this._map.getLangText("_更多功能请右击"),s[i(t._0x3850f0)](this.getDraggerContextMenu(s))),s}bindDraggers(){}[_0x5e32ae(1326)](){for(let e=0,t=this.draggers.length;e<t;e++)this.layer.removeGraphic(this.draggers[e],!![]);this.draggers=[]}[_0x5e32ae(2813)](){const e={_0x4bfdfa:4063},t=_0x5e32ae;var i;if(!this[t(1497)])return this;const s=(i=this._matrixMove)===null||i===void 0?void 0:i[t(3758)];if(this.destroyDraggers(),this[t(1560)](),Cesium__namespace.defined(s))for(let n=0,o=this[t(4209)].length;n<o;n++){const c=this.draggers[n];if(!(c._pointType!==PointType.Control&&c._pointType!==PointType.MoveAll)&&c[t(e._0x4bfdfa)]===s){this.startMoveMatrix(c);break}}}updateAttrForEditing(){this._graphic.updateAttrForDrawing&&this._graphic.updateAttrForDrawing(!![]),this._graphic._updateLabelPosition&&this._graphic._updateLabelPosition()}[_0x5e32ae(2871)](e){const t={_0x3c7cfa:4296,_0x223b6b:1890},i={_0x3442b6:4063},s={_0x247924:2118,_0x5a7875:3284,_0x4f8ac1:3284,_0x485cfa:2889},n={_0x2777ee:4267},o=_0x5e32ae;return[{text:this._map.getLangText("_停止编辑"),icon:Icon.DrawEditNo,show:c=>{var _;return(_=this._graphic)===null||_===void 0?void 0:_.isEditing},callback:c=>{this._graphic.stopEditing()}},{text:this._map[o(t._0x3c7cfa)]("_删除该点"),icon:Icon.Delete,show:c=>{const _=o;var l;return!((l=this._graphic)!==null&&l!==void 0&&l._positions_draw)||e._pointType===PointType.MoveAll?![]:this._graphic._positions_draw.length-1<this[_(3284)][_(n._0x2777ee)]?(this.openSmallTooltipByMinPointNum(c.position),![]):!![]},callback:c=>{const _=o,l=c[_(s._0x247924)];if(l){const h=l[_(4063)];h>=0&&h<this[_(s._0x5a7875)]._positions_draw.length&&(this[_(s._0x4f8ac1)]._positions_draw[_(s._0x485cfa)](h,1),this.updateDraggers(),this.updateAttrForEditing(),this.fire(EventType.editRemovePoint,{...c,index:h}))}}},{text:this._map.getLangText("_按轴平移"),icon:Icon.DrawEditYes,show:c=>{const _=o;return!this._matrixMove||this._matrixMove[_(3758)]!==e.index},callback:c=>{const _=o;var l;const h=(l=c.graphic)!==null&&l!==void 0&&l.position?c[_(2118)]:c.layer;this.startMoveMatrix(h,c)}},{text:this[o(t._0x223b6b)].getLangText("_停止按轴平移"),icon:Icon.DrawEditNo,show:c=>{const _=o;return this._matrixMove&&this._matrixMove._dragger_index===e[_(i._0x3442b6)]},callback:c=>{this.stopMoveMatrix()}}]}_updateStyleHook(e){Cesium__namespace.defined(e.clampToGround)&&(this.stopMoveMatrix(),this.stopRotateMatrix(),this.updateDraggers())}[_0x5e32ae(3247)](e,t){const i={_0x45927a:2287},s=_0x5e32ae;this.fire(EventType[s(i._0x45927a)],{index:e.index,cartesian:t})}startMoveMatrix(e,t={}){const i={_0x1bade8:3284,_0x57746c:2180,_0x424a83:3107,_0x1ae469:1054,_0x364db6:3495,_0x22ef67:1054,_0x168a7c:1615},s={_0x1b89f7:3284,_0x230ad7:2174,_0x450a3c:4063},n={_0x40080f:1404},o=_0x5e32ae;this[o(1258)](),this.stopRotateMatrix(),!e&&(e=this[o(i._0x1bade8)]);let c=e.positionShow||e[o(i._0x57746c)];this.clampToGround&&(c=getSurfacePosition(this._map[o(i._0x424a83)],c)),this[o(i._0x1ae469)]=new MatrixMove({position:c}),this._map[o(i._0x364db6)](this._matrixMove),this._matrixMove._graphicLayer.bindContextMenu([{text:this._map[o(4296)](o(1828)),icon:Icon.DrawEditNo,show:_=>this._matrixMove,callback:_=>{this.stopMoveMatrix()}}]),this[o(2825)]&&this._matrixMove._graphic_move_z&&(this._matrixMove._graphic_move_z.show=![]),this._matrixMove._dragger_index=e.index,this._matrixMove.on(EventType.start,_=>{const l=o;e.onDragStart&&e.onDragStart(e,this._matrixMove[l(2180)])}),this._matrixMove.on(EventType.stop,_=>{const l=o;e.onDragEnd?e.onDragEnd(e,this._matrixMove.position,_):e.position=this._matrixMove[l(2180)],e[l(n._0x40080f)](EventType[l(3563)],{position:this._matrixMove[l(2180)]}),this.fire(EventType.editMovePoint,{...t,..._,index:e.index,cartesian:c})}),this[o(i._0x22ef67)].on(EventType.change,_=>{const l=o;var h;const f=this._matrixMove.position;if(e.isPrivate?e.position=f:Cesium__namespace.defined((h=this[l(3284)])===null||h===void 0?void 0:h._position_draw)?this[l(s._0x1b89f7)]._position_draw=f:e[l(2180)]=f,_.editType===Cesium__namespace[l(988)].Z&&this[l(s._0x230ad7)]){const m=Cesium__namespace.Cartographic.fromCartesian(f)[l(3865)];this._updateHeight(m)}else e.onDrag&&e.onDrag(e,f);this.updateAttrForEditing(),this.fire(EventType.editMouseMove,{...t,..._,index:e[l(s._0x450a3c)],cartesian:f})}),e.off(EventType.updatePosition,this[o(i._0x168a7c)],this),e.off(EventType.updatePosition,this._updateMatrixRotatePosition,this),e.on(EventType[o(3563)],this[o(i._0x168a7c)],this)}_updateMatrixMovePosition(e){const t={_0x526470:3758,_0x3281c4:2118},i=_0x5e32ae;var s;!this._matrixMove||this._matrixMove.isMoveing||!e.position||this._matrixMove[i(t._0x526470)]!==((s=e[i(t._0x3281c4)])===null||s===void 0?void 0:s[i(4063)])||(this[i(1054)].position=e.position)}stopMoveMatrix(){const e={_0x1b2a46:1054},t=_0x5e32ae;this._matrixMove&&(this._map.removeThing(this[t(e._0x1b2a46)],!![]),delete this._matrixMove)}startRotateMatrix(e){const t={_0x4624f2:2622,_0x4892fd:4114,_0x3f9379:4114,_0x200e8a:1890,_0x402645:2445,_0x3c4f43:993,_0x36ae11:2445,_0x564dc0:4161},i=_0x5e32ae;this.stopMoveMatrix(),this.stopRotateMatrix(),!e&&(e=this._graphic),this._matrixRotate=new MatrixRotate({position:e[i(t._0x4624f2)]||e.position,heading:this[i(t._0x4892fd)].heading||0,pitch:this[i(t._0x3f9379)].pitch||0,roll:this[i(4114)].roll||0}),this[i(t._0x200e8a)].addThing(this[i(2445)]),this[i(t._0x402645)][i(t._0x3c4f43)].bindContextMenu([{text:this._map[i(4296)]("_停止按轴旋转"),icon:Icon.BloomEffectNo,show:s=>this._matrixRotate,callback:s=>{this.stopRotateMatrix()}}]),this[i(t._0x36ae11)].on(EventType.change,s=>{const n=i;this.style.heading=formatNum$1(s[n(3977)],2),this.style.pitch=formatNum$1(s.pitch,2),this[n(4114)].roll=formatNum$1(s.roll,2),this._graphic.updateOrientation(),this.fire(EventType[n(856)])}),e.off(EventType.updatePosition,this[i(1615)],this),e[i(1220)](EventType.updatePosition,this[i(t._0x564dc0)],this),e.on(EventType.updatePosition,this._updateMatrixRotatePosition,this)}_updateMatrixRotatePosition(e){const t={_0x67d0c5:2445,_0x5604cb:2180},i=_0x5e32ae;var s;!this[i(t._0x67d0c5)]||this._matrixRotate.isMoveing||!e[i(t._0x5604cb)]||this._matrixRotate._dragger_index!==((s=e.graphic)===null||s===void 0?void 0:s.index)||(this._matrixRotate.position=e.position)}stopRotateMatrix(){const e={_0x309b51:2445},t=_0x5e32ae;this._matrixRotate&&(this._map.removeThing(this._matrixRotate,!![]),delete this[t(e._0x309b51)])}[_0x5e32ae(757)](){this.disable();for(const e in this)delete this[e]}}class EditPoint extends EditBase{bindDraggers(){this.createDragger({dragger:this._graphic,onDrag:(e,t)=>{const i=_0x5210;this._graphic[i(1957)]=t}})}[_0x5e32ae(3085)](){const e={_0x380944:3284},t=_0x5e32ae;delete this[t(e._0x380944)]._draw_tooltip,delete this._graphic._isDragger,delete this[t(e._0x380944)]._noMousePick,delete this._graphic._pointType,delete this[t(e._0x380944)][t(2439)],this._graphic.unbindContextMenu()}}class BasePointEntity extends BaseEntity{constructor(e={}){const t=_0x5e32ae;e.drawShow=e[t(1825)]??!![],super(e),this._minPointNum=e[t(902)]??1,this[t(2231)]=e.maxPointNum??1,this._hasEdit=this.options.hasEdit??!![],e.positions&&(this[t(2436)]=e.positions),e.position&&(this.position=e.position)}get[_0x5e32ae(1198)](){return EditPoint}get[_0x5e32ae(2180)](){return this[_0x5e32ae({_0x4b512d:918}._0x4b512d)]}set position(e){const t={_0xcdc569:1426,_0x55580a:2359,_0x53473a:3411,_0x476035:968,_0x761bfe:1404},i=_0x5e32ae;var s,n;if(this[i(2359)]=LngLatPoint[i(t._0xcdc569)](e),this[i(2359)]&&!(this._point.lat===0&&this[i(t._0x55580a)][i(t._0x53473a)]===0)){let _=this.style.setHeight;Cesium__namespace[i(515)](_)&&(isString(_)&&(_=Number(template(_,this.attr,!![])),isNaN(_)&&(_=0)),this._point.alt=_);const l=this.getAddHeight();l!==0&&(this._point.alt=this[i(2359)].alt+l)}const o=(s=this._point)===null||s===void 0?void 0:s.toCartesian();if((n=this.editing)!==null&&n!==void 0&&n[i(t._0x476035)]&&o instanceof Cesium__namespace.Cartesian3){var c;this._position_draw=o,o&&((c=this._positions_draw)===null||c===void 0?void 0:c.length)>0&&(this[i(1761)][0]=o)}else this._isCallbackPositions&&o instanceof Cesium__namespace.Cartesian3&&this._cancelPositionsCallback(),this._position=o;this[i(3579)]&&this._updatePositionsHook(),this[i(t._0x761bfe)](EventType.updatePosition,{position:this[i(918)]})}get positionShow(){const e=_0x5e32ae;var t;return getPositionValue(this.position,(t=this._map)===null||t===void 0?void 0:t.clock[e(837)])}get point(){const e=_0x5e32ae;return!(this._position instanceof Cesium__namespace[e(3916)])&&(this[e(2359)]=LngLatPoint.parse(this.positionShow)),this._point}get[_0x5e32ae(2961)](){return this[_0x5e32ae(3405)]()}get[_0x5e32ae(4064)](){var e;return getPositionValue(this.positionShow,(e=this._map)===null||e===void 0?void 0:e.clock.currentTime)}get centerPoint(){return this.point}get positions(){return this[_0x5e32ae(2180)]?[this.position]:[]}set positions(e){e&&e[_0x5e32ae(3402)]>0&&(this.position=e[0])}get points(){const e=_0x5e32ae;return this.point?[this[e(3381)]]:[]}get coordinates(){const e=_0x5e32ae;return this.coordinate?[this[e(2961)]]:[]}get positionsShow(){return this.positionShow?[this.positionShow]:[]}get orientation(){return this.getOrientation()}set orientation(e){this._orientation=e,this.updateOrientation()}get heading(){return this.style.heading??0}set heading(e){const t=_0x5e32ae;this[t(4114)].heading=e,this.updateOrientation()}get pitch(){const e={_0x3fdea6:2625},t=_0x5e32ae;return this.style[t(e._0x3fdea6)]??0}set pitch(e){const t=_0x5e32ae;this[t(4114)][t(2625)]=e,this.updateOrientation()}get roll(){return this.style.roll??0}set roll(e){const t=_0x5e32ae;this.style[t(4175)]=e,this.updateOrientation()}get height(){var e;return(e=this.point)===null||e===void 0?void 0:e.alt}set height(e){const t=_0x5e32ae;this.point[t(3984)]=e,this.position=this.point}get modelMatrix(){const e=_0x5e32ae;if(this._entity){var t,i;return this._entity[e(4295)]((t=this._map)===null||t===void 0||(i=t.clock)===null||i===void 0?void 0:i.currentTime,new Cesium__namespace[e(4102)])}else return}get debugAxis(){return this._debugAxis}set debugAxis(e){const t={_0x498a53:578,_0x256a1e:1160,_0x15b5e6:578},i=_0x5e32ae;if(this._debugAxis=e,!this.debugAxisPrimitive){const s=Math.max(Cesium__namespace.Cartographic.fromCartesian(this[i(2622)]).height*.06,100);this.debugAxisPrimitive=this._layer.primitiveCollection.add(new Cesium__namespace[i(1170)]({modelMatrix:this.modelMatrix,length:s,width:5})),this[i(t._0x498a53)]._tooltipConfig={content:`<span style="color: red;">红色</span> 是 X轴<br/>
                  <span style="color: green;">绿色</span> 是 Y轴<br/>
                  <span style="color: blue;">蓝色</span> 是 Z轴`,options:this.options.tooltipOptions},(this.position instanceof Cesium__namespace[i(3703)]||this.position instanceof Cesium__namespace[i(t._0x256a1e)])&&(this.debugAxisPrimitive._timeTik=setInterval(()=>{const n=i;this.debugAxisPrimitive.modelMatrix=this[n(2294)]},300)),this.bindPickId(this[i(t._0x498a53)])}this[i(t._0x15b5e6)].show=e}get[_0x5e32ae(4165)](){const e=_0x5e32ae;return this.debugAxisPrimitive?this[e(578)][e(3402)]:0}set debugAxisLength(e){!this[_0x5e32ae(578)]&&(this.debugAxis=!![]),this.debugAxisPrimitive.length=e}get[_0x5e32ae(977)](){if(this.options.objectsToExclude)return this.options.objectsToExclude;if(this._objectsToExcludee)return this._objectsToExclude}set objectsToExclude(e){this._objectsToExclude=e}_mountedHook(){}[_0x5e32ae(2442)](){const e=_0x5e32ae;super._removedHook(),this.debugAxisPrimitive&&(clearInterval(this[e(578)]._timeTik),this._layer.primitiveCollection[e(2004)](this[e(578)]),delete this.debugAxisPrimitive)}[_0x5e32ae(4119)](){const e={_0xf56e12:578},t=_0x5e32ae;this._entity.position=this[t(918)],this.debugAxisPrimitive&&(this[t(e._0xf56e12)].modelMatrix=this.modelMatrix),this._updateEditDraggers(),this._updateLabelPosition()}updateOrientation(){const e=_0x5e32ae;return this._entity.orientation=this.getOrientation(),this.debugAxisPrimitive&&(this.debugAxisPrimitive.modelMatrix=this.modelMatrix),this[e(3579)][e(908)]}getOrientation(e){const t={_0x28aee3:1286,_0x296248:1286,_0x217a37:2625,_0x2df776:2911},i={_0x592484:810,_0x5b63ef:4175,_0x2ffdb7:2625,_0x38e508:4175,_0x13111e:2625,_0x47765a:4043},s=_0x5e32ae;e=e||this.style;let n=this.options.orientation||this[s(2469)];if(n){const f=e.mergeOrientation||!Cesium__namespace.defined(e.heading)||!Cesium__namespace.defined(e[s(2625)])||!Cesium__namespace.defined(e.roll);if(n instanceof Cesium__namespace[s(3111)]&&f){const m=n,g=Cesium__namespace.Math.toRadians(this.heading),C=Cesium__namespace.Math[s(1567)](this[s(2625)]),E=Cesium__namespace[s(t._0x28aee3)].toRadians(this.roll);n=new Cesium__namespace.CallbackProperty(P=>{const w=s;var M,T;const L=getPositionValue(this.position,P),R=m[w(i._0x592484)](P);if(!L||!R)return null;const D=getHeadingPitchRollByOrientation(L,R);return e.mergeOrientation?(D.heading+=g,D[w(i._0x5b63ef)]+=E,D[w(i._0x2ffdb7)]+=C):(Cesium__namespace.defined(e[w(3977)])&&(D.heading=g),Cesium__namespace.defined(e[w(i._0x38e508)])&&(D.roll=E),Cesium__namespace.defined(e[w(i._0x13111e)])&&(D.pitch=C)),Cesium__namespace[w(2911)][w(i._0x47765a)](L,D,(M=this._map)===null||M===void 0||(T=M.scene)===null||T===void 0?void 0:T.globe[w(3875)])},![])}return n}const o=this.positionShow;if(o==null)return;const c=Cesium__namespace[s(t._0x296248)][s(1567)](e.heading??0),_=Cesium__namespace.Math.toRadians(e[s(t._0x217a37)]??0),l=Cesium__namespace.Math.toRadians(e.roll??0),h=new Cesium__namespace.HeadingPitchRoll(c,_,l);return Cesium__namespace[s(t._0x2df776)][s(4043)](o,h)}_getGeoJsonGeometry(e){return{type:"Point",coordinates:this.getCoordinate(e==null?void 0:e.noAlt)}}clearDynamicPosition(){return this._orientation=void 0,this.property=null,this.position=void 0,this}[_0x5e32ae(4263)](){const e={_0x1d15bb:4241,_0x185412:3798,_0x2136b3:3835,_0x580b5d:3249,_0x134c9f:3579,_0x1dc6bd:908},t={_0x4eba4a:574,_0x277d4e:3415,_0x35527f:2225,_0x18bfba:3026,_0x1d6999:3236,_0x507ff2:2180},i=_0x5e32ae;this[i(e._0x1d15bb)]=-1,this._frameRateHeight=this[i(e._0x185412)].frameRateHeight??30,this._maxCacheCount=this[i(3798)].maxCacheCount??50;const s=new Cesium__namespace.SampledPositionProperty(this.options.referenceFrame,this[i(3798)].numberOfDerivatives);s[i(e._0x2136b3)]=this.options.forwardExtrapolationType??Cesium__namespace.ExtrapolationType[i(e._0x580b5d)],s.backwardExtrapolationType=this.options[i(1482)]??Cesium__namespace.ExtrapolationType.HOLD,!this[i(2469)]&&(this._orientation=new Cesium__namespace.VelocityOrientationProperty(s),this[i(e._0x134c9f)]&&(this._entity[i(e._0x1dc6bd)]=this.getOrientation())),this.property=s,this.position=new Cesium__namespace[i(3703)](n=>{const o=i;if(!this._map)return;let c=s.getValue(n);if(!c)return!this[o(t._0x4eba4a)]&&this._stopTime&&Cesium__namespace.JulianDate[o(t._0x277d4e)](n,this[o(t._0x35527f)])&&(this.fire(EventType[o(3874)]),this[o(t._0x4eba4a)]=!![]),this._last_position;if(c&&this.options.clampToTileset){if(this._clampToTilesetFrame++,!this._clampToTilesetHeight||this._clampToTilesetFrame%this._frameRateHeight===0){const _=getHeight(this._map.scene,c,{objectsToExclude:this[o(2873)].objectsToExclude,has3dtiles:!![]});_&&(this._clampToTilesetHeight=_)}if(this._clampToTilesetHeight){const _=Cesium__namespace[o(t._0x18bfba)][o(t._0x1d6999)](c);c=Cesium__namespace.Cartesian3[o(2793)](_.longitude,_.latitude,this._clampToTilesetHeight+this[o(2578)]())}}return this._primitive_label&&(this._primitive_label[o(t._0x507ff2)]=c),this._last_position=c,this._last_isFireStop=![],c},![])}[_0x5e32ae(1230)](e,t){const i={_0x3458f6:4263,_0x518f55:527,_0x47f055:1903,_0x605e8b:918,_0x152f49:3402,_0x5d9844:4014,_0x2a613b:789},s=_0x5e32ae;var n,o,c,_;!this.property&&this[s(i._0x3458f6)](),this[s(3558)]();const l=((n=this._map)===null||n===void 0||(o=n[s(1949)])===null||o===void 0?void 0:o[s(837)])||Cesium__namespace.JulianDate.now();t?isNumber(t)?t=Cesium__namespace[s(i._0x518f55)].addSeconds(l,t,new Cesium__namespace.JulianDate):isString(t)?t.indexOf("Z")===-1?t=Cesium__namespace.JulianDate.fromDate(new Date(t)):t=Cesium__namespace.JulianDate[s(i._0x47f055)](t):t instanceof Date&&(t=Cesium__namespace[s(527)].fromDate(t)):t=l,e=LngLatPoint.parse(e);const h=(c=this._sampledPositionProperty)===null||c===void 0||(_=c._property)===null||_===void 0?void 0:_._times;if(this.options.autoMiddleDynamicPosition&&(h==null?void 0:h.length)>0&&this[s(i._0x605e8b)]){const m=h[h[s(i._0x152f49)]-1];if(Cesium__namespace.JulianDate.secondsDifference(l,m)>.3){let g=this._position;this._lastDynamicPosition&&(g=getOnLinePointByLen(this._lastDynamicPosition,this._position,.01,!![])),g=setPositionsHeight(g,e.alt||0),this._sampledPositionProperty[s(i._0x5d9844)](l,g)}}const f=e.toCartesian();return this.property.addSample(t,f),this[s(i._0x2a613b)]=f,this._stopTime=t,this}_removeDynamicPosition(){const e={_0x553aea:2551},t=_0x5e32ae;var i,s;if(this._maxCacheCount<1)return;const n=(i=this.property)===null||i===void 0||(s=i._property)===null||s===void 0?void 0:s._times;if(!n||(n==null?void 0:n.length)===0)return;const o=n.length-this[t(1904)]-1;o>0&&this.property[t(e._0x553aea)](new Cesium__namespace.TimeInterval({start:n[0],stop:n[o]}))}[_0x5e32ae(3220)](){const e={_0x2e2615:4195,_0x2927a7:2180},t=_0x5e32ae;return this[t(e._0x2e2615)]||this[t(e._0x2927a7)]||this.center}autoSurfaceHeight(e={}){const t=_0x5e32ae;return getSurfaceHeight(this[t(1890)].scene,this[t(2180)],{objectsToExclude:this._layer.objectsToExclude,...e})[t(549)](i=>{i[t(2180)]&&(this.position=i.position)})}clampToGround(e){return this.autoSurfaceHeight(e)}getCoordinate(e){const t=_0x5e32ae;return this.point?this[t(3381)].toArray(e):[]}setCallbackPosition(e){const t={_0x4a65ab:1957},i=_0x5e32ae;return this._setPositionsToCallback(),e&&(this[i(t._0x4a65ab)]=LngLatPoint.toCartesian(e)),this._position_draw}_setPositionsToCallback(){const e=_0x5e32ae;this[e(566)]||(this._isCallbackPositions=!![],this[e(575)]=this[e(3798)].drawShow,this._position_draw=this.positionShow,this.position=new Cesium__namespace.CallbackProperty(t=>this._position_draw,![]),this.updateAttrForDrawing&&this.updateAttrForDrawing(!![]),this._updateOutlineToCallback(),this._updateLabelPosition())}_cancelPositionsCallback(){const e={_0x197058:1957,_0xc46d68:2180},t=_0x5e32ae;this[t(566)]&&(this._isCallbackPositions=![],this[t(918)]=this[t(e._0x197058)],this._point=LngLatPoint.fromCartesian(this._position),delete this._position_draw,this._entity[t(e._0xc46d68)]=this._position)}[_0x5e32ae(4008)](){const e={_0x5bdb29:4055,_0x2d6ab2:3480},t=_0x5e32ae;this._map.on(EventType[t(e._0x5bdb29)],this[t(e._0x2d6ab2)],this),this[t(1890)].on(EventType.click,this._onClickHandler_point,this)}_stopDrawHook(){const e={_0x466257:1890},t=_0x5e32ae;this[t(e._0x466257)].off(EventType[t(4055)],this._onMouseMoveHandler_point,this),this._map.off(EventType.click,this._onClickHandler_point,this),this[t(575)]=!![]}_onMouseMoveHandler_point(e){const t={_0x14e07f:1517,_0x12a73b:1404},i=_0x5e32ae,s=e.cartesian;s&&(this._position_draw=s,this.lastPointTemporary=!![]),this._map[i(t._0x14e07f)](e[i(1274)],this._draw_tooltip||this._map.getLangText("_单击完成绘制")),this[i(t._0x12a73b)](EventType.drawMouseMove,{...e,drawtype:this.type,graphic:this},!![])}_onClickHandler_point(e){const t=_0x5e32ae,i=e[t(698)];i&&(this[t(1957)]=i),this._position_draw&&(this[t(2587)]=![],this.stopDraw())}}class EditPoly extends EditBase{get hasClosure(){return this.style.closure}get hasMidPoint(){const e={_0x129faf:3402},t=_0x5e32ae;return this.positions[t(e._0x129faf)]<this._graphic._maxPointNum}bindDraggers(){const e={_0x1e55b0:4209},t={_0x4a4ed9:2813},i={_0x1da995:2436},s={_0x1fab5d:2436},n={_0x9e546d:1723,_0x4618da:3402},o={_0x2cc36a:2180,_0x3dc477:4063,_0x10c8f0:4063,_0x10bdd8:760,_0x743a5f:3156},c=_0x5e32ae,_=this.positions;for(let l=0,h=_.length;l<h;l++){const f=this.updatePositionsHeightByAttr(_[l]),m=this.createDragger({position:f,onDrag:(g,C)=>{const E=_0x5210;var P;if(C=this.updatePositionsHeightByAttr(C),g[E(o._0x2cc36a)]=C,this[E(2436)][g.index]=C,!(((P=this._heightDraggers)===null||P===void 0?void 0:P.length)>0)){if(this.hasMidPoint){let w,M,T;if(this[E(1739)]||!this.hasClosure&&g.index!==0){g.index===0?(w=h*2-1,M=h-1):(w=g.index*2-1,M=g[E(o._0x3dc477)]-1);const L=_[M];T=getMidpoint(C,L),T=this.updatePositionsHeightByAttr(T),this[E(4209)][w].position=T}(this.hasClosure||!this.hasClosure&&g[E(o._0x10c8f0)]!==h-1)&&(g.index===h-1?(w=g.index*2+1,M=0):(w=g.index*2+1,M=g.index+1),T=getMidpoint(C,_[M]),T=this.updatePositionsHeightByAttr(T),this.draggers[w].position=T)}if(this[E(o._0x10bdd8)]){let w=centerOfMass(_);w=this[E(o._0x743a5f)](w),this._draggerMove.position=w}}},onDragStart:(g,C)=>{const E=_0x5210;var P;if(((P=this[E(n._0x9e546d)])===null||P===void 0?void 0:P.length)>0)for(let w=0,M=this.draggers[E(n._0x4618da)];w<M;w++)this.draggers[w].show=![]},onDragEnd:(g,C)=>{var E;((E=this._heightDraggers)===null||E===void 0?void 0:E.length)>0&&this.updateDraggers()}});if(m[c(4063)]=l,this[c(e._0x1e55b0)].push(m),this.hasMidPoint&&(this[c(1739)]||!this.hasClosure&&l<h-1)){const g=(l+1)%h;let C=getMidpoint(f,_[g]);C=this[c(3156)](C);const E=this.createDragger({position:C,type:PointType.AddMidPoint,tooltip:this._map.getLangText("_增加点"),onDragStart:(P,w)=>{this[c(s._0x1fab5d)].splice(P.index,0,w)},onDrag:(P,w)=>{const M=c;this[M(i._0x1da995)][P.index]=w},onDragEnd:(P,w)=>{const M=c;this._fireAddPoint(P,w),this[M(t._0x4a4ed9)]()}});E.index=g,this.draggers.push(E)}}this._bindMoveAllDragger(),this[c(2189)].extrudedHeight&&this[c(1132)]()}_bindMoveAllDragger(){const e={_0x235b8d:2436},t={_0x342916:2500,_0xeb90ec:3916,_0x37b4a8:4209,_0x2fa65b:3916},i=_0x5e32ae;if(!this._graphic._hasMoveEdit)return;let s=centerOfMass(this[i(e._0x235b8d)]);s=this.updatePositionsHeightByAttr(s);const n=this.createDragger({position:s,type:PointType[i(4197)],tooltip:this._map.getLangText("_整体平移"),onDragStart:(o,c)=>{s=c},onDrag:(o,c)=>{const _=i;var l;const h=Cesium__namespace.Cartesian3.subtract(c,s,new Cesium__namespace.Cartesian3);if(s=c,this.positions[_(t._0x342916)]((f,m,g)=>{const C=Cesium__namespace.Cartesian3.add(f,h,new Cesium__namespace.Cartesian3);this.positions[m]=C}),((l=this._graphic._draw_holes)===null||l===void 0?void 0:l.length)>0)for(let f=0,m=this._graphic._draw_holes[_(3402)];f<m;f++){const g=this._graphic._draw_holes[f];g.forEach((C,E,P)=>{const w=Cesium__namespace.Cartesian3.add(C,h,new Cesium__namespace.Cartesian3);g[E]=w})}for(let f=0,m=this[_(4209)].length;f<m;f++)n!==this.draggers[f]&&(this.draggers[f].position=Cesium__namespace[_(t._0xeb90ec)].add(this[_(t._0x37b4a8)][f][_(2180)],h,new Cesium__namespace[_(t._0x2fa65b)]));this._updateMoveAllHook(c)}});this._draggerMove=n,this.draggers[i(3759)](n)}[_0x5e32ae(1674)](e){}[_0x5e32ae(1132)](e){const t={_0x288261:1890,_0x59c691:4209,_0x36a147:1723},i={_0xf29761:3236,_0x171d9b:2243},s=_0x5e32ae;if(!this._graphic._hasHeightEdit)return;this._heightDraggers=[],e=e||this.positions;const n=getCesiumValue(this.entityGraphic.extrudedHeight,Number,this._map.clock.currentTime);for(let o=0,c=e.length;o<c;o++){const _=setPositionsHeight(e[o],n),l=this.createDragger({position:_,type:PointType.MoveHeight,tooltip:this[s(t._0x288261)].getLangText("_修改高度"),onDrag:(h,f)=>{const m=s,g=Cesium__namespace[m(3026)][m(i._0xf29761)](f).height;this.entityGraphic.extrudedHeight=g;const C=getMaxHeight(this.positions);this.style[m(2999)]=this.formatNum(g-C,2),this[m(i._0x171d9b)](g),this.updateAttrForEditing(),this.fire(EventType.editStyle)}});this[s(t._0x59c691)].push(l),this[s(t._0x36a147)].push(l)}}[_0x5e32ae(2243)](e){const t=_0x5e32ae;for(let s=0;s<this._heightDraggers.length;s++){var i;const n=this[t(1723)][s],o=setPositionsHeight(getPositionValue(n.position,(i=this[t(1890)])===null||i===void 0?void 0:i.clock.currentTime),e);n[t(2180)]=o}}updatePositionsHeightByAttr(e){return this.clampToGround&&(e=getSurfacePosition(this._map.scene,e,{has3dtiles:!![]})),e}_updateStyleHook(e){const t=_0x5e32ae;super._updateStyleHook(e),(Cesium__namespace.defined(e.diffHeight)||Cesium__namespace.defined(e.height)||Cesium__namespace[t(515)](e.clampToGround))&&this.updateDraggers()}}class BasePolyEntity extends BaseEntity{constructor(e={}){const t={_0xbd8924:4169,_0x2c16f1:4114},i=_0x5e32ae;super(e),this._hasEdit=this.options.hasEdit??!![],this[i(4267)]=e.minPointNum??2,this._maxPointNum=e.maxPointNum??9999,this._hasMoveEdit=e[i(t._0xbd8924)]??!![],this._hasHeightEdit=e.hasHeightEdit??!![],e[i(2436)]&&(this.style.buffer>0?this.positions=bufferPoints(e.positions,this.style.buffer,this[i(t._0x2c16f1)].bufferSteps):this.positions=e.positions)}get hasMoveEdit(){return this._hasMoveEdit}get hasHeightEdit(){return this._hasHeightEdit}get[_0x5e32ae(1198)](){return EditPoly}get center(){return this[_0x5e32ae(4114)].closure?this.centerOfMass:this.centerOfLine}get[_0x5e32ae(3303)](){return centerOfMass(this.positionsShow)}get centerOfLine(){const e={_0x34c3f1:3402,_0x18ead1:3402},t=_0x5e32ae,i=this[t(1912)];return!i||i[t(e._0x34c3f1)]===0?null:i.length===1?i[0]:i.length<10?sliceByMaxDistance(i,this.distance/2,{point:!![]}):i[Math[t(1382)](i[t(e._0x18ead1)]/2)]}get[_0x5e32ae(2776)](){return getDistance(this[_0x5e32ae({_0x51ba19:1912}._0x51ba19)])}get area(){return getSurfaceArea(this[_0x5e32ae({_0x1c90ce:1912}._0x1c90ce)])}get positions(){return this[_0x5e32ae({_0x549ca1:2113}._0x549ca1)]?this._getPositions():this._positions}set[_0x5e32ae(2436)](e){const t={_0x1afc18:2500,_0x403d29:1127,_0x42c4b4:4119,_0x3c9dff:3270},i={_0x230220:3845,_0x26e0af:3759},s=_0x5e32ae;if(e){if(Array.isArray(e)){var n;const o=[],c=[];e[s(t._0x1afc18)]((_,l)=>{const h=s,f=LngLatPoint.parse(_);if(!f||!f[h(3653)]())return;let m=this.style.setHeight;Cesium__namespace.defined(m)&&(isString(m)?(m=Number(template(m,this.attr,!![])),isNaN(m)&&(m=0)):Array[h(i._0x230220)](m)&&(m=m[l]||0),f.alt=m);const g=this.getAddHeight(l);g!==0&&(f.alt=f.alt+g),o.push(f),c[h(i._0x26e0af)](f.toCartesian())}),(n=this.editing)!==null&&n!==void 0&&n.enabled?this._positions_draw=c:(this._positions_draw&&this[s(t._0x403d29)](),this._positions=c),this._points=o}else this._positions=e;this._entity&&this[s(t._0x42c4b4)](),this.fire(EventType.updatePosition,{positions:this[s(t._0x3c9dff)]})}}get positionsShow(){let i=getCesiumValue(this[_0x5e32ae({_0x564ad5:3270}._0x564ad5)]);return i instanceof Cesium__namespace.Rectangle&&(i=this.outlinePositions),i}get points(){const e=_0x5e32ae;if(this._positions instanceof Cesium__namespace.CallbackProperty){let t;this._positions_draw?t=this[e(1761)]:(t=this.positionsShow,this.style.closure&&t.pop());const i=[];t[e(2500)](function(s){const n=LngLatPoint.parse(s);n&&i.push(n)}),this._points=i}return!this._points&&(this._points=LngLatArray.toPoints(this._positions)),this._points}get[_0x5e32ae(1743)](){return this.getCoordinates()}get rectangle(){return Cesium__namespace[_0x5e32ae({_0x2ae39b:3324}._0x2ae39b)].fromCartesianArray(this.positions)}getEntityPositions(){return this[_0x5e32ae(2189)].positions}_mountedHook(){}_updatePositionsHook(){this._updateLabelPosition(),this._updateEditDraggers()}[_0x5e32ae(879)](e){return{type:"LineString",coordinates:this.getCoordinates(e==null?void 0:e.noAlt)}}getCoordinates(e){const t={_0x729c06:725},i=[];return this.points.forEach(s=>{const n=_0x5210;i[n(3759)](s[n(t._0x729c06)](e))}),i}[_0x5e32ae(1721)](e){const t={_0x5f5a24:3530},i=_0x5e32ae,s=LngLatPoint[i(1426)](e);return Cesium__namespace.Rectangle.contains(Cesium__namespace.Rectangle.fromCartesianArray(this[i(1912)]),s[i(t._0x5f5a24)]())?isInPoly(s,this.coordinates):![]}autoSurfaceHeight(e={}){return computeSurfacePoints({...e,map:this._map,positions:this.positionsShow}).then(t=>{const i=_0x5210;return!t.noHeight&&(this[i(2436)]=t.positions),t})}clampToGround(e){return this.autoSurfaceHeight(e)}setCallbackPositions(e){const t=_0x5e32ae;return this._setPositionsToCallback(),e&&(this._positions_draw=LngLatArray[t(3816)](e)),this._positions_draw}_setPositionsToCallback(){const e={_0x4fec43:2436,_0x591bcd:2655},t=_0x5e32ae;if(this._isCallbackPositions)return;this._isCallbackPositions=!![];let i=getCesiumValue(this[t(3270)]);i instanceof Cesium__namespace.PolygonHierarchy?i=i[t(2436)]:i instanceof Cesium__namespace.Rectangle&&(i=this.outlinePositions),this[t(1761)]=i||this.positionsShow||[],this[t(e._0x4fec43)]=new Cesium__namespace.CallbackProperty(s=>this[t(2779)](),![]),this._updateOutlineToCallback(),this[t(e._0x591bcd)]&&this[t(2655)](!![]),this._updateLabelPosition()}[_0x5e32ae(2779)](){return this._positions_draw}[_0x5e32ae(1127)](){const e=_0x5e32ae;this[e(566)]&&(this._isCallbackPositions=![],this[e(3270)]=this._positions_draw,this._points=LngLatArray.toPoints(this._positions_draw),delete this[e(1761)],this._updatePositionsHook(),this._cancelOutlinePositionsCallback())}[_0x5e32ae(4008)](){const e=_0x5e32ae;this._map.on(EventType.mouseMove,this[e(524)],this),this._map.on(EventType.click,this._onClickHandler,this),this[e(1890)].on(this._drawEndEventType,this._onDbClickHandler,this),(this.options.hasDrawDelPoint??!![])&&this._map.on(this._drawDelEventType,this._onRightClickHandler,this)}[_0x5e32ae(1940)](){const e={_0x4c0d00:524,_0x1128ea:584},t=_0x5e32ae;this._map.off(EventType.mouseMove,this[t(e._0x4c0d00)],this),this._map[t(1220)](EventType.click,this._onClickHandler,this),this[t(1890)].off(this[t(e._0x1128ea)],this._onDbClickHandler,this),(this.options[t(2226)]??!![])&&this._map.off(this._drawDelEventType,this._onRightClickHandler,this)}}class PointEntity extends BasePointEntity{get[_0x5e32ae(2189)](){const e=_0x5e32ae;var t;return(t=this[e(3579)])===null||t===void 0?void 0:t[e(3381)]}_mountedHook(){const e={_0xad7f09:1268,_0x2ad5ad:4114,_0x1ffde6:736,_0x5f1223:1528,_0x3627b1:908,_0x3904df:4002,_0x529def:3798,_0xa2e057:4164},t=_0x5e32ae,i={position:this.position,point:PointStyleConver[t(e._0xad7f09)](this[t(e._0x2ad5ad)])};if(this.style.label&&(i[t(e._0x1ffde6)]=LabelStyleConver.toCesiumVal(this[t(4114)].label,{},this[t(e._0x5f1223)])),this.options.billboard&&(i.billboard=BillboardStyleConver.toCesiumVal(this.options.billboard,{},!![])),this.options.circle&&(i.ellipse=CircleStyleConver[t(1268)](this.options.circle,{},!![])),this.options.model&&(i[t(e._0x3627b1)]=this[t(e._0x3904df)](this.options.model),i.model=ModelStyleConver.toCesiumVal(this.options.model,{},!![])),this[t(e._0x529def)].path){var s,n;const c=PathStyleConver[t(1268)](this[t(3798)].path,{},!![]);!c.isAll&&(c.leadTime=0),i.path=c;const _=(s=this.position)===null||s===void 0||(n=s[t(3164)])===null||n===void 0?void 0:n[t(3528)];if(_&&_.length>0){var o;const l=_[0];let h=_[_.length-1];((o=this.position)===null||o===void 0?void 0:o.forwardExtrapolationType)===Cesium__namespace.ExtrapolationType[t(3249)]&&(h=Cesium__namespace.JulianDate.fromDate(new Date(2100,1,1))),i.availability=new Cesium__namespace.TimeIntervalCollection([new Cesium__namespace[t(e._0xa2e057)]({start:l,stop:h})])}}this[t(3579)]=this._createEntity(i)}_addLabel(){const e={_0x309332:736,_0x5e741f:1268,_0x426079:3579,_0x53aac9:1528},t=_0x5e32ae;this._entity[t(e._0x309332)]=this._entity.label||{},LabelStyleConver[t(e._0x5e741f)](this[t(4114)][t(e._0x309332)],this[t(e._0x426079)].label,this[t(e._0x53aac9)])}_updateStyleHook(e,t){PointStyleConver[_0x5e32ae({_0x31aa81:1268}._0x31aa81)](e,this.entityGraphic)}_style2Json(e,t){return PointStyleConver.toJSON(e,t,!![])}_setOptionsHook(e,t){const i={_0x5ca5dc:2927,_0x488a4c:2782},s=_0x5e32ae;t.model&&ModelStyleConver.toCesiumVal(e[s(i._0x5ca5dc)],this._entity.model,!![]),t.billboard&&BillboardStyleConver.toCesiumVal(e.billboard,this[s(3579)].billboard,!![]),t.path&&PathStyleConver.toCesiumVal(e[s(1018)],this._entity.path,!![]),t[s(833)]&&CircleStyleConver.toCesiumVal(e.circle,this._entity[s(i._0x488a4c)],!![])}_toJSON_Ex(e){const t={_0x5b3201:2927,_0x2acd3f:1018,_0x22179b:3798,_0x375342:833},i=_0x5e32ae;this.options[i(t._0x5b3201)]&&(e[i(2927)]={},ModelStyleConver.toJSON(this[i(3798)].model,e.model,!![])),this.options[i(2747)]&&(e[i(2747)]={},BillboardStyleConver.toJSON(this.options.billboard,e[i(2747)],!![])),this[i(3798)].path&&(e[i(t._0x2acd3f)]={},PathStyleConver.toJSON(this[i(3798)][i(1018)],e.path,!![])),this[i(t._0x22179b)].circle&&(e.circle={},CircleStyleConver[i(3852)](this[i(3798)][i(833)],e[i(t._0x375342)],!![]))}[_0x5e32ae(3328)](e){const t={_0x143e52:2747,_0x4471a1:3579,_0xdb0534:2995,_0x55e753:1268},i=_0x5e32ae;this._entity.model&&(this[i(3579)].model[i(2092)]=Cesium__namespace.Color.WHITE[i(3518)](e)),this._entity[i(t._0x143e52)]&&(this[i(t._0x4471a1)].billboard.color=Cesium__namespace[i(2200)][i(t._0xdb0534)].withAlpha(e)),this[i(3579)].path&&!this[i(2981)](this._entity.path,e)&&PathStyleConver[i(1268)]({...this.options.path,globalAlpha:e},this[i(t._0x4471a1)].path,!![]),this[i(3579)].circle&&!this._updateEntityOpacity(this._entity.circle,e)&&CircleStyleConver[i(t._0x55e753)]({...this.options.circle,globalAlpha:e},this._entity.ellipse,!![])}[_0x5e32ae(4249)](){}}register$4("point",PointEntity,!![]);class BillboardEntity extends BasePointEntity{get entityGraphic(){const e={_0x40b657:2747},t=_0x5e32ae;var i;return(i=this._entity)===null||i===void 0?void 0:i[t(e._0x40b657)]}get[_0x5e32ae(513)](){return this.style.image}set image(e){const t={_0x3d1dec:513},i=_0x5e32ae;this.style.image=e,this._entity&&(this._entity.billboard[i(t._0x3d1dec)]=e)}_mountedHook(){const e={_0x157baa:4114,_0x10a8ef:1268,_0x2a8e74:736,_0x2d5d36:3798,_0x2eaf40:833,_0x41773a:908,_0x39645f:3579},t=_0x5e32ae,i={position:this.position,billboard:BillboardStyleConver.toCesiumVal(this.style)};if(this[t(e._0x157baa)].label&&(Cesium__namespace.defined(this[t(4114)].clampToGround)&&!Cesium__namespace.defined(this[t(e._0x157baa)].label.clampToGround)&&(this[t(4114)].label[t(2825)]=this.style[t(2825)]),i.label=LabelStyleConver[t(e._0x10a8ef)](this[t(e._0x157baa)][t(e._0x2a8e74)],{},this[t(1528)])),this.options.point&&(i.point=PointStyleConver[t(1268)](this.options.point,{},!![])),this[t(e._0x2d5d36)][t(e._0x2eaf40)]&&(i.ellipse=CircleStyleConver[t(e._0x10a8ef)](this.options.circle,{},!![])),this.options[t(2927)]&&(i[t(e._0x41773a)]=this.getOrientation(this.options.model),i[t(2927)]=ModelStyleConver[t(1268)](this.options.model,{},!![])),this[t(e._0x2d5d36)].path){var s,n;const c=PathStyleConver.toCesiumVal(this[t(3798)].path,{},!![]);!c.isAll&&(c.leadTime=0),i[t(1018)]=c;const _=(s=this.position)===null||s===void 0||(n=s._property)===null||n===void 0?void 0:n._times;if(_&&_.length>0){var o;const l=_[0];let h=_[_[t(3402)]-1];((o=this.position)===null||o===void 0?void 0:o.forwardExtrapolationType)===Cesium__namespace[t(762)].HOLD&&(h=Cesium__namespace.JulianDate.fromDate(new Date(2100,1,1))),i.availability=new Cesium__namespace.TimeIntervalCollection([new Cesium__namespace[t(4164)]({start:l,stop:h})])}}this[t(e._0x39645f)]=this[t(821)](i)}_addLabel(){const e=_0x5e32ae;this._entity[e(736)]=this._entity.label||{},LabelStyleConver.toCesiumVal(this.style.label,this._entity.label,this[e(1528)])}_style2Json(e,t){return BillboardStyleConver.toJSON(e,t,!![])}_updateStyleHook(e,t){const i={_0x2ebfa6:2189},s=_0x5e32ae;BillboardStyleConver.toCesiumVal(e,this[s(i._0x2ebfa6)])}_setOptionsHook(e,t){const i={_0x4558be:3381},s=_0x5e32ae;t[s(2927)]&&ModelStyleConver.toCesiumVal(e.model,this._entity.model,!![]),t[s(3381)]&&PointStyleConver.toCesiumVal(e[s(i._0x4558be)],this._entity.point,!![]),t.path&&PathStyleConver.toCesiumVal(e.path,this._entity.path,!![]),t.circle&&CircleStyleConver[s(1268)](e.circle,this._entity.ellipse,!![])}_updateExOpacity(e){const t={_0x22f3ab:2927,_0x40ed2d:3381,_0x2bceb8:3798,_0x39650a:833},i=_0x5e32ae;this._entity[i(2927)]&&(this._entity[i(t._0x22f3ab)][i(2092)]=Cesium__namespace[i(2200)].WHITE.withAlpha(e)),this._entity.point&&!this._updateEntityOpacity(this._entity.point,e)&&PointStyleConver.toCesiumVal({...this.options[i(t._0x40ed2d)],globalAlpha:e},this[i(3579)].point,!![]),this._entity.path&&!this._updateEntityOpacity(this._entity.path,e)&&PathStyleConver[i(1268)]({...this.options.path,globalAlpha:e},this._entity.path,!![]),this._entity[i(833)]&&!this[i(2981)](this._entity.circle,e)&&CircleStyleConver.toCesiumVal({...this[i(t._0x2bceb8)][i(t._0x39650a)],globalAlpha:e},this._entity[i(2782)],!![])}_toJSON_Ex(e){const t={_0x798459:1018},i=_0x5e32ae;this.options.model&&(e[i(2927)]={},ModelStyleConver.toJSON(this[i(3798)].model,e.model,!![])),this.options.point&&(e[i(3381)]={},PointStyleConver.toJSON(this.options.point,e.point,!![])),this.options.path&&(e[i(t._0x798459)]={},PathStyleConver.toJSON(this.options.path,e[i(1018)],!![])),this.options[i(833)]&&(e[i(833)]={},CircleStyleConver.toJSON(this.options.circle,e.circle,!![]))}_updateDistanceDisplayConditionByEdit(){}setOpacity(e){const t={_0xce59bd:3579,_0xa8fb29:2989},i=_0x5e32ae;this.style.globalAlpha=e,this[i(t._0xce59bd)]&&(this._entity[i(2747)].color=Cesium__namespace[i(2200)][i(2995)].withAlpha(e)),this[i(t._0xa8fb29)](e)}startBounce(e={}){const t={_0x2b89d8:2298,_0x29ac9a:2853,_0x2954db:3703,_0x51de39:736,_0xe38f9c:2497},i=_0x5e32ae;if(!this._entity)return;let s=-(e[i(t._0x2b89d8)]||50);const n=e.step||1,o=e.autoStop;let c=s,_=-1;const l=this;function h(){c<=s&&_!==1?(_=1,o&&(s*=.55,n*2>=-s&&l.stopBounce())):c>=0&&_!==-1&&(_=-1),c+=n*_}const f=getCesiumValue(this[i(2189)][i(t._0x29ac9a)],Cesium__namespace[i(2497)])||new Cesium__namespace.Cartesian2(0,0),m=f.clone();if(this.entityGraphic.pixelOffset_original=f,this.entityGraphic.pixelOffset=new Cesium__namespace[i(t._0x2954db)](g=>(h(),m.y=f.y+c,m)),this._entity[i(t._0x51de39)]){const g=getCesiumValue(this._entity[i(t._0x51de39)].pixelOffset,Cesium__namespace[i(2497)])||new Cesium__namespace[i(t._0xe38f9c)](0,0),C=g.clone();this[i(3579)].label.pixelOffset_original=g,this._entity.label.pixelOffset=new Cesium__namespace[i(3703)](E=>(C.y=g.y+c,C))}}stopBounce(){const e={_0x3152e4:2853,_0x360718:1163,_0x14e256:736},t=_0x5e32ae;this.entityGraphic[t(e._0x3152e4)]=this.entityGraphic[t(e._0x360718)],this._entity[t(e._0x14e256)]&&(this._entity.label.pixelOffset=this._entity[t(e._0x14e256)][t(1163)])}}register$4("billboard",BillboardEntity,!![]);class DivBillboardEntity extends BillboardEntity{_mountedHook(){const e={_0x9886fc:1236},t=_0x5e32ae;super._mountedHook(),this[t(e._0x9886fc)]()}[_0x5e32ae(3601)](e,t){delete e.image,super._updateStyleHook(e,t),t&&(t.html||t.iconSize||t.color)&&this._updateImage_delay()}[_0x5e32ae(1236)](){const e={_0x19756b:3579},t=_0x5e32ae;this.updateTimer&&clearTimeout(this.updateTimer),this[t(1520)]=setTimeout(()=>{const i=t;delete this.updateTimer,this[i(e._0x19756b)]&&this._updateImage()},300)}_updateImage(){const e={_0x24cfd9:3833},t={_0x61f27a:1013,_0x23059d:1570},i={_0x572ea3:1570},s={_0x197cfe:513,_0x44ea64:3004},n=_0x5e32ae,o=create$3("div",n(e._0x24cfd9)),c=this.style.html;isString(c)?o.innerHTML=c:c instanceof Element&&o.appendChild(c),document.body[n(1155)](o),this._islosdImg=!![],window.domtoimage?window.domtoimage.toPng(o).then(_=>{const l=n;this.entityGraphic[l(s._0x197cfe)]=""+_,document.body[l(s._0x44ea64)](o),this[l(1570)]=![],this[l(1404)]("image",{image:_})}).catch(_=>{logError$1("未知原因，导出失败!",_),document.body.removeChild(o),this._islosdImg=![]}):window.html2canvas&&window.html2canvas(o,{backgroundColor:null,allowTaint:!![]}).then(_=>{const l=n;this.entityGraphic.image=_,document.body.removeChild(o),this[l(i._0x572ea3)]=![],this.fire("image",{canvas:_})}).catch(_=>{const l=n;logError$1(l(2590),_),document[l(t._0x61f27a)].removeChild(o),this[l(t._0x23059d)]=![]})}}register$4("divBillboard",DivBillboardEntity,!![]);class FontBillboardEntity extends DivBillboardEntity{_updateImage(){const e={_0x37f3de:4114,_0x381d44:4114,_0x149f25:2688,_0x12dd9f:1155,_0x16b544:1201},t={_0x4bf17e:1013,_0xfa05dd:3004},i={_0x564f26:1404},s={_0x470fba:2590},n={_0x55d6d6:513},o=_0x5e32ae,c=this[o(e._0x37f3de)].iconSize??50,_=this.style.iconPadding??10,l=this.style[o(2092)]??"#ff0000",h=create$3("div","mars3d-hideDiv");h.setAttribute(o(e._0x381d44),"padding: "+_+"px;text-align:center;max-width:"+c+o(e._0x149f25)+c+"px;");const f=document.createElement("i");f.setAttribute("class",this.style.iconClass),f.setAttribute("style","font-size:"+c+"px;color:"+l+";"),h[o(e._0x12dd9f)](f),document.body.appendChild(h),this._islosdImg=!![],window.domtoimage?window.domtoimage.toPng(h).then(m=>{const g=o;this.entityGraphic[g(513)]=""+m,document.body.removeChild(h),this._islosdImg=![],this.fire(g(n._0x55d6d6),{image:m})}).catch(m=>{logError$1(o(s._0x470fba),m),document.body.removeChild(h),this._islosdImg=![]}):window.html2canvas&&window.html2canvas(h,{backgroundColor:null,allowTaint:!![]}).then(m=>{const g=o;this.entityGraphic.image=m,document.body[g(3004)](h),this._islosdImg=![],this[g(i._0x564f26)]("image",{canvas:m})})[o(e._0x16b544)](m=>{const g=o;logError$1(g(2590),m),document[g(t._0x4bf17e)][g(t._0xfa05dd)](h),this._islosdImg=![]})}}register$4(_0x5e32ae(1152),FontBillboardEntity,!![]);class LabelEntity extends BasePointEntity{get entityGraphic(){var e;return(e=this._entity)===null||e===void 0?void 0:e.label}get[_0x5e32ae(736)](){const e={_0x6a9a3e:4114},t=_0x5e32ae;return this[t(3579)]?this[t(3579)][t(736)]:this[t(e._0x6a9a3e)]}get[_0x5e32ae(1260)](){const e={_0x4d54a9:1260},t=_0x5e32ae;return this.style[t(e._0x4d54a9)]}set text(e){const t={_0x4889fd:4114},i=_0x5e32ae;this[i(t._0x4889fd)][i(1260)]=e,this._entity&&(this.entityGraphic.text=e)}_mountedHook(){const e={_0x15c132:2180},t=_0x5e32ae,i={position:this[t(e._0x15c132)],label:LabelStyleConver.toCesiumVal(this.style)};this._entity=this._createEntity(i)}_addLabel(){}_style2Json(e,t){return LabelStyleConver[_0x5e32ae(3852)](e,t,!![])}_updateStyleHook(e,t){const i={_0x5d34a3:2189},s=_0x5e32ae;LabelStyleConver[s(1268)](e,this[s(i._0x5d34a3)])}[_0x5e32ae(4249)](){}startBounce(e={}){const t={_0x379573:2189},i=_0x5e32ae;if(!this._entity)return;let s=-(e[i(2298)]||50);const n=e.step||1,o=e[i(2413)];let c=s,_=-1;const l=this;function h(){c<=s&&_!==1?(_=1,o&&(s*=.55,n*2>=-s&&l.stopBounce())):c>=0&&_!==-1&&(_=-1),c+=n*_}const f=getCesiumValue(this[i(2189)][i(2853)],Cesium__namespace.Cartesian2)||new Cesium__namespace.Cartesian2(0,0),m=f.clone();this[i(t._0x379573)].pixelOffset_original=f,this[i(2189)].pixelOffset=new Cesium__namespace.CallbackProperty(g=>(h(),m.y=f.y+c,m))}[_0x5e32ae(3438)](){const e={_0x476365:2853},t=_0x5e32ae;this.entityGraphic[t(e._0x476365)]=this.entityGraphic.pixelOffset_original}setOpacity(e){const t=_0x5e32ae;this.style.globalAlpha=e,this._entity&&LabelStyleConver.setOpacity(this[t(2189)],e)}}register$4("label",LabelEntity,!![]);class CanvasLabelEntity extends BillboardEntity{_mountedHook(){const e={_0x5036f2:4114},t=_0x5e32ae;super[t(3118)](),this._updateImage_delay(this[t(e._0x5036f2)])}_onBeforeCreate(e){const t={_0x80b81e:513,_0x3329fa:2747,_0x20cacd:2092},i=_0x5e32ae;var s,n;return Cesium__namespace.defined(e==null||(s=e.billboard)===null||s===void 0?void 0:s[i(t._0x80b81e)])&&delete e[i(2747)].image,Cesium__namespace.defined(e==null||(n=e[i(t._0x3329fa)])===null||n===void 0?void 0:n[i(t._0x20cacd)])&&delete e[i(2747)].color,e}_updateStyleHook(e,t){const i={_0x130830:1236},s=_0x5e32ae,n={...e};delete n[s(513)],delete n[s(2092)],super[s(3601)](n,t),this[s(i._0x130830)](e)}_updateImage_delay(e){const t={_0x3ab49c:1520},i={_0x699858:1520,_0x57b3ab:3579},s=_0x5e32ae;this[s(t._0x3ab49c)]&&clearTimeout(this.updateTimer),this.updateTimer=setTimeout(()=>{const n=s;delete this[n(i._0x699858)],this[n(i._0x57b3ab)]&&this._updateImage(e)},100)}[_0x5e32ae(3449)](e){const t=LabelStyleConver.toCesiumVal(e),i=getTextImage(t.text,t);i&&(this.entityGraphic.image=i)}}register$4("canvasLabel",CanvasLabelEntity,!![]);class EditCircle extends EditPoly{bindDraggers(){const e={_0xc5f86e:2189,_0x313a08:1890,_0x144394:3284},t={_0x53d87b:4209},i={_0x5eb861:3669,_0x31cffe:3284,_0x4c5c4a:515,_0x27cce6:4114},s={_0x40d7ab:1723},n={_0x482e20:2813},o={_0x39540a:2189,_0x113518:3865,_0x331537:3669,_0x374091:2231,_0x1b4bc1:3194,_0x401e77:1404},c=_0x5e32ae,_=this.positions,l=this.updatePositionsHeightByAttr(_[0]),h=this[c(1890)].clock.currentTime,f=getEllipseOuterPositions({position:l,semiMajorAxis:getCesiumValue(this.entityGraphic.semiMajorAxis,Number,h),semiMinorAxis:getCesiumValue(this[c(2189)][c(1935)],Number,h),rotation:getCesiumValue(this[c(e._0xc5f86e)].rotation,Number,h)??0,count:1}),m=this.updatePositionsHeightByAttr(f[1]);_[1]=m;const g=this.createDragger({position:m,type:PointType[c(2492)],tooltip:this._map.getLangText("_修改半径"),onDragStart:(E,P)=>{const w=c;if(this._heightDraggers)for(let M=0,T=this._heightDraggers[w(3402)];M<T;M++)this._heightDraggers[M].show=![]},onDrag:(E,P)=>{const w=c;if(this[w(o._0x39540a)][w(o._0x113518)]!==void 0){const T=getCesiumValue(this.entityGraphic[w(3865)],Number,h);P=setPositionsHeight(P,T),E[w(2180)]=P}_[E.index]=P;const M=this[w(o._0x331537)](Cesium__namespace.Cartesian3.distance(_[0],P),2);this.entityGraphic[w(3136)]=M,this._graphic[w(o._0x374091)]===3||!Cesium__namespace.defined(this.style[w(o._0x1b4bc1)])?this.style[w(3136)]=M:(this.entityGraphic.semiMinorAxis=M,this.style.radius=M),this[w(o._0x401e77)](EventType.editStyle)},onDragEnd:(E,P)=>{this[c(n._0x482e20)]()}});g.index=1,this[c(4209)].push(g);let C;if(this[c(3284)]._maxPointNum===3){const E=this.updatePositionsHeightByAttr(f[0]);_[2]=E,C=this[c(1470)]({position:E,type:PointType.EditAttr,tooltip:this[c(e._0x313a08)].getLangText("_修改半径"),onDragStart:(P,w)=>{const M=c;if(this._heightDraggers)for(let T=0,L=this[M(s._0x40d7ab)].length;T<L;T++)this._heightDraggers[T].show=![]},onDrag:(P,w)=>{const M=c;if(this.entityGraphic.height!==void 0){const R=getCesiumValue(this[M(2189)].height,Number,h);w=setPositionsHeight(w,R),P.position=w}_[P.index]=w;let T=this[M(i._0x5eb861)](Cesium__namespace[M(3916)].distance(_[0],w),2);const L=getCesiumValue(this.entityGraphic.semiMajorAxis,Number,h);T>L&&(T=L),this.entityGraphic.semiMinorAxis=T,this[M(i._0x31cffe)]._maxPointNum===3||!Cesium__namespace[M(i._0x4c5c4a)](this.style.radius)?this.style.semiMinorAxis=T:(this.entityGraphic.semiMajorAxis=T,this[M(i._0x27cce6)].radius=T),this.fire(EventType.editStyle)},onDragEnd:(P,w)=>{this.updateDraggers()}}),C.index=2,this.draggers[c(3759)](C)}if(this[c(e._0x144394)]._hasMoveEdit){const E=this[c(1470)]({position:l,onDragStart:(P,w)=>{const M=c;for(let T=0,L=this[M(t._0x53d87b)].length;T<L;T++)this.draggers[T][M(575)]=![]},onDrag:(P,w)=>{_[0]=w},onDragEnd:(P,w)=>{this.updateDraggers()}});E.index=0,this.draggers.push(E),E.majorDragger=g,E.minorDragger=C}if(this.entityGraphic.extrudedHeight){const E=this._graphic._maxPointNum===3?[_[1],_[2]]:[_[1]];this._bindHeightDraggers(E)}}updatePositionsHeightByAttr(e){const t={_0x1caf0c:2825,_0x2bd582:1890},i=_0x5e32ae;if(this[i(t._0x1caf0c)]&&(e=getSurfacePosition(this._map[i(3107)],e)),this.entityGraphic.height!==void 0){const s=getCesiumValue(this[i(2189)].height,Number,this[i(t._0x2bd582)][i(1949)].currentTime);e=setPositionsHeight(e,s)}return e}_updateStyleHook(e){const t=_0x5e32ae;super._updateStyleHook(e),(Cesium__namespace.defined(e[t(3194)])||Cesium__namespace.defined(e.semiMinorAxis)||Cesium__namespace.defined(e.semiMajorAxis)||Cesium__namespace.defined(e.height)||Cesium__namespace.defined(e.diffHeight))&&this.updateDraggers()}openSmallTooltipByMinPointNum(e){}}class CircleEntity extends BasePointEntity{constructor(e={}){const t=_0x5e32ae;super(e),this._minPointNum=2,this._maxPointNum=2,this._hasMoveEdit=e.hasMoveEdit??!![],this._clampToGround_reload=!![],this[t(3798)].drawShowRadius=this.options.drawShowRadius??!![]}get entityGraphic(){var e;return(e=this._entity)===null||e===void 0?void 0:e.ellipse}get[_0x5e32ae(1198)](){return EditCircle}get outlinePositions(){const e={_0x44ef85:708},t=_0x5e32ae;return this._entity&&(this[t(e._0x44ef85)]=this.getOutlinePositions()),this._outlinePositions}set outlinePositions(e){const t={_0x40d9f6:708},i=_0x5e32ae;this[i(t._0x40d9f6)]=e}get outlineCoordinates(){return cartesians2lonlats(this.outlinePositions)}get[_0x5e32ae(2776)](){return Math.PI*2*this.radius}get area(){const e=this.radius;return Math.PI*e*e}get radius(){const e={_0x3d841d:4114,_0x1603d0:527,_0x17a589:1228},t=_0x5e32ae;var i;return this[t(e._0x3d841d)].radius?this.style[t(3194)]:getCesiumValue((i=this.entityGraphic)===null||i===void 0?void 0:i[t(3136)],Number,Cesium__namespace[t(e._0x1603d0)][t(e._0x17a589)]())}set[_0x5e32ae(3194)](e){const t={_0x1c4e85:3194},i=_0x5e32ae;this.style[i(t._0x1c4e85)]=e,this.entityGraphic&&(this.entityGraphic.semiMajorAxis=e,this.entityGraphic.semiMinorAxis=e,this._updateOutlineStyle(this._getOutlinePositions(),this.style))}get height(){const e={_0x1f89d6:3865},t=_0x5e32ae;var i;return this[t(4114)][t(e._0x1f89d6)]?this[t(4114)].height:getCesiumValue((i=this[t(2189)])===null||i===void 0?void 0:i.height,Number)??0}set height(e){const t=_0x5e32ae;this.style.height=e,this.entityGraphic&&(this.entityGraphic[t(3865)]=e)}_mountedHook(){const e={_0x5249be:515,_0x5e624e:2825},t=_0x5e32ae,i={position:this.position,ellipse:CircleStyleConver[t(1268)](this.style,{},!![])},s=this.style[t(736)];s&&(Cesium__namespace[t(e._0x5249be)](this.style.clampToGround)&&!Cesium__namespace[t(e._0x5249be)](s.clampToGround)&&(s[t(e._0x5e624e)]=this.style.clampToGround),Cesium__namespace.defined(s[t(2554)])||Cesium__namespace.defined(s.addHeight)?this._addLabel():i[t(736)]=LabelStyleConver.toCesiumVal(this.style.label,{},this.attr)),this[t(3579)]=this[t(821)](i),this._updateHeight(),this._updateOutlineStyle(this._getOutlinePositions(),this.style),(this.position instanceof Cesium__namespace.CallbackProperty||this.position instanceof Cesium__namespace.SampledPositionProperty)&&this._updateOutlineToCallback()}[_0x5e32ae(2510)](){const e={_0x522b28:515,_0x5c1e94:515,_0x457296:2530,_0x201044:1268,_0x2eac9f:4114,_0x16c947:736},t=_0x5e32ae,i=this.style.label;if(Cesium__namespace[t(e._0x522b28)](i.setHeight)||Cesium__namespace[t(e._0x5c1e94)](i[t(e._0x457296)])){var s;(s=this._entity)!==null&&s!==void 0&&s.label&&(this[t(3579)].label[t(575)]=![]),super._addLabel()}else this._entity.label=this._entity.label||{},LabelStyleConver[t(e._0x201044)](this[t(e._0x2eac9f)].label,this._entity[t(e._0x16c947)],this.attr)}_style2Json(e,t){return CircleStyleConver.toJSON(e,t,!![])}toGeoJSON(e){return super.toGeoJSON(e)}_getGeoJsonGeometry(e){const t={_0x2c492c:1594},i=_0x5e32ae;return e!=null&&e[i(2667)]?{type:"Polygon",coordinates:[this[i(531)](e==null?void 0:e.closure,e==null?void 0:e[i(857)],e==null?void 0:e.noAlt)]}:{type:"Point",coordinates:this.getCoordinate(e==null?void 0:e[i(t._0x2c492c)])}}_updateStyleHook(e,t){const i={_0x47a6ad:515,_0x4bca53:736,_0x2df77a:3579,_0x1a71bf:1528},s=_0x5e32ae;if(CircleStyleConver[s(1268)](e,this.entityGraphic,!![]),(Cesium__namespace[s(i._0x47a6ad)](t.diffHeight)||Cesium__namespace.defined(t[s(3865)]))&&this._updateHeight(),t!=null&&t.label)if(Cesium__namespace.defined(e.clampToGround)&&!Cesium__namespace.defined(e.label[s(2825)])&&(e.label.clampToGround=e.clampToGround),Cesium__namespace[s(515)](e.label.setHeight)||Cesium__namespace.defined(e.label.addHeight)){var n;(n=this._entity)!==null&&n!==void 0&&n.label&&(this._entity[s(i._0x4bca53)].show=![]),this._addLabel()}else this._entity.label=this._entity[s(736)]||{},LabelStyleConver.toCesiumVal(e.label,this[s(i._0x2df77a)].label,this[s(i._0x1a71bf)])}_updatePositionsHook(){const e={_0x17835f:4114},t=_0x5e32ae;this._entity.position=this.position,this._updateHeight(),this._updateOutlineStyle(this._getOutlinePositions(),this[t(e._0x17835f)]),this._updateLabelPosition(),this._updateEditDraggers()}_getOutlinePositions(){return[this.outlinePositions]}_setPositionsToCallback(){const e={_0x510fc0:566,_0x1a1433:1885},t={_0x9161a:1761,_0x5836bd:3402},i=_0x5e32ae;this._isCallbackPositions||(this[i(e._0x510fc0)]=!![],this._positions_draw=this.positions||[],this.position=new Cesium__namespace.CallbackProperty(s=>{const n=i;return this[n(t._0x9161a)][n(t._0x5836bd)]<1?null:this._positions_draw[0]},![]),this[i(e._0x1a1433)]())}_cancelPositionsCallback(){const e=_0x5e32ae;this._isCallbackPositions&&(this._isCallbackPositions=![],this._position=this._positions_draw[0],this._point=LngLatPoint[e(3236)](this[e(918)]),this._updatePositionsHook())}_updateHeight(){const e={_0x36ea5c:1761,_0x5aeaaa:3236,_0x577715:4114,_0x440dca:515,_0x47c7f7:2999,_0x52414b:2607,_0x3a7303:856},t=_0x5e32ae;var i;if(this.style.clampToGround)return;let s=this[t(918)];if(((i=this._positions_draw)===null||i===void 0?void 0:i.length)>0&&(s=this[t(e._0x36ea5c)][0]),!s)return;const n=this.style.height??LngLatPoint[t(e._0x5aeaaa)](s).alt;this.entityGraphic[t(3865)]=n,Cesium__namespace.defined(this[t(e._0x577715)][t(2999)])&&(Cesium__namespace[t(e._0x440dca)](this.style.diffHeight)&&this.style[t(e._0x47c7f7)]!==0?this.entityGraphic.extrudedHeight=n+this[t(4114)].diffHeight:this.entityGraphic[t(e._0x52414b)]=void 0),this[t(1404)](EventType[t(e._0x3a7303)])}[_0x5e32ae(4008)](){const e={_0x406a9a:1890},t=_0x5e32ae;this[t(e._0x406a9a)].on(EventType.mouseMove,this._onMouseMoveHandler,this),this._map.on(EventType.click,this._onClickHandler,this),this._map.on(this[t(584)],this._onDbClickHandler,this),(this.options.hasDrawDelPoint??!![])&&this._map.on(this._drawDelEventType,this._onRightClickHandler,this)}_stopDrawHook(){const e={_0xaa973b:1890,_0x452b75:584,_0x1dd78e:4082,_0x5a3dfe:3798,_0x48e653:1890},t=_0x5e32ae;this._map.off(EventType.mouseMove,this._onMouseMoveHandler,this),this[t(e._0xaa973b)].off(EventType.click,this._onClickHandler,this),this._map.off(this[t(e._0x452b75)],this[t(e._0x1dd78e)],this),(this[t(e._0x5a3dfe)].hasDrawDelPoint??!![])&&this[t(e._0x48e653)].off(this._drawDelEventType,this._onRightClickHandler,this)}_showDrawMouseMoveSmallTooltip(e){const t={_0x292443:1761,_0x4f7a80:698,_0x36d80a:3819,_0x22041c:4296,_0x2ad5ed:4018},i=_0x5e32ae;if(this[i(t._0x292443)].length<=1){this._map.openSmallTooltip(e.endPosition,this._map.getLangText("_单击开始绘制"));return}let s="";if(this.options.drawShowRadius&&this._positions_draw.length>0&&e[i(t._0x4f7a80)]){const n=Cesium__namespace[i(3916)].distance(this._positions_draw[0],e.cartesian);n>0&&(s=i(t._0x36d80a)+formatDistance(n)+"<br />")}this._map.openSmallTooltip(e.endPosition,s+this._map[i(t._0x22041c)](i(t._0x2ad5ed)))}updateAttrForDrawing(e){const t={_0x2c507e:3136,_0x4a6630:4114,_0x3ca158:2189},i=_0x5e32ae;if(!(this._positions_draw.length<2)){if(this._updateHeight(),!e){const s=formatNum$1(Cesium__namespace.Cartesian3.distance(this._positions_draw[0],this._positions_draw[1]),2);if(s<1)return;if(this[i(2231)]===3){let n=s,o=s;if(this._positions_draw.length===3&&(o=formatNum$1(Cesium__namespace.Cartesian3.distance(this._positions_draw[0],this._positions_draw[2]),2)),n>o){const c=n;n=o,o=c}this[i(2189)][i(t._0x2c507e)]=o,this.entityGraphic.semiMinorAxis=n,this.style.semiMajorAxis=o,this[i(t._0x4a6630)].semiMinorAxis=n}else this.entityGraphic.semiMajorAxis=s,this[i(t._0x3ca158)].semiMinorAxis=s,this.style[i(3194)]=s}this[i(934)]&&(this._outlinePositions=this.getOutlinePositions(),this._updateOutlineToCallback())}}[_0x5e32ae(1682)](e){const t={_0x197d1a:1682,_0x13b1cf:3136,_0x419b64:4114},i=_0x5e32ae;super[i(t._0x197d1a)](e),this.entityGraphic[i(t._0x13b1cf)]=0,this.entityGraphic.semiMinorAxis=0,this[i(t._0x419b64)].radius=0}getOutlinePositions(e=!![],t){const i={_0x312050:1935,_0x278e21:2279,_0x4c3ffe:3759},s=_0x5e32ae;var n,o,c,_;const l=Cesium__namespace.JulianDate.now(),h=getEllipseOuterPositions({position:getPositionValue(this._entity.position),semiMajorAxis:getCesiumValue((n=this._entity.ellipse)===null||n===void 0?void 0:n[s(3136)],Number,l),semiMinorAxis:getCesiumValue((o=this._entity.ellipse)===null||o===void 0?void 0:o[s(i._0x312050)],Number,l),rotation:getCesiumValue((c=this._entity.ellipse)===null||c===void 0?void 0:c[s(i._0x278e21)],Number,l)??0,granularity:getCesiumValue((_=this._entity.ellipse)===null||_===void 0?void 0:_.granularity,Number,l),count:t});if(e&&h){var f;h[s(i._0x4c3ffe)](h[0]),(this[s(4114)].outlineWidth>4||((f=this.style.outlineStyle)===null||f===void 0?void 0:f.width)>4)&&h.push(h[1])}return h}getOutlineCoordinates(e,t,i){return cartesians2lonlats(this[_0x5e32ae({_0xa8083d:2462}._0xa8083d)](e,t),i)}_getOutlineStyle(e,t){const i=_0x5e32ae,s=super._getOutlineStyle(e,t);return s[i(3826)]=Cesium__namespace.ArcType.RHUMB,s}getRectangle(e){const t=_0x5e32ae,i=this.getOutlinePositions(![],1);return!i||i.length===0?void 0:getRectangle(i,e==null?void 0:e[t(3937)])}[_0x5e32ae(1721)](e){const t={_0x144cda:3916,_0x3018b4:2622},i=_0x5e32ae;return e=LngLatPoint.parse(e).toCartesian(),e=setPositionsHeight(e,this.height),Cesium__namespace[i(t._0x144cda)].distance(this[i(t._0x3018b4)],e)<=this.radius}flyTo(e={}){const t={_0x504a46:3381},i=_0x5e32ae;return this._map?(e[i(3194)]=this.radius*2*(e.scale||1.8),this._map.flyToPoint(this[i(t._0x504a46)],e)):Promise.resolve(![])}}register$4(_0x5e32ae(833),CircleEntity,!![]);class EditModel extends EditBase{get position(){return this[_0x5e32ae(3284)]._position_draw}set[_0x5e32ae(2180)](e){const t={_0x2204e3:1957},i=_0x5e32ae;this._graphic[i(t._0x2204e3)]=e}[_0x5e32ae(3156)](e){const t=_0x5e32ae;return this.clampToGround&&(e=getSurfacePosition(this._map[t(3107)],e)),e}bindDraggers(){const e={_0x392c55:1890,_0x36e9a7:3156,_0x5a879d:1584,_0x25be91:2465,_0x37465c:3759,_0x28c3e0:1470},t={_0x1950e5:2813},i={_0x3bb5c7:2465},s={_0x4dd4ac:4114,_0x36b421:3284},n=_0x5e32ae;this._graphic._draw_tooltip=this[n(e._0x392c55)][n(4296)]("_拖动该点后")+"<br/>"+this._map.getLangText(n(838)),this.createDragger({dragger:this._graphic,onDragStart:(l,h)=>{const f=n;for(let m=0,g=this[f(4209)].length;m<g;m++)this.draggers[m][f(575)]=![]},onDrag:(l,h)=>{this.position=h},onDragEnd:(l,h)=>{this.updateDraggers()}});const o=this.style[n(3194)],c=this[n(e._0x36e9a7)](this[n(2180)]),_=Cesium__namespace.Cartographic[n(3236)](c)[n(3865)];if(this[n(e._0x5a879d)]){this[n(e._0x25be91)]=new CircleEntity({name:"角度调整底部圆",position:new Cesium__namespace.CallbackProperty(f=>c,![]),style:{fill:![],outline:!![],outlineColor:"#ffff00",outlineOpacity:.8,radius:o,height:_},private:!![]}),this.layer.addGraphic(this.entityAngle);const l=getPositionByDirectionAndLen(c,this[n(4114)].heading,o),h=this.createDragger({position:l,type:PointType.EditAttr,tooltip:this._map.getLangText("_修改方向"),onDrag:(f,m)=>{const g=n,C=getAngle(c,m);this[g(4114)].heading=formatNum$1(C,2),f.position=getPositionByDirectionAndLen(c,this[g(s._0x4dd4ac)].heading,this[g(4114)].radius),this[g(s._0x36b421)].updateOrientation(c)}});this.draggers[n(e._0x37465c)](h)}if(this._hasEditScale){const l=addPositionsHeight(c,o),h=this[n(e._0x28c3e0)]({position:l,type:PointType.MoveHeight,tooltip:this[n(1890)].getLangText("_修改缩放比例"),onDragStart:(f,m)=>{const g=n;this.entityAngle&&(this[g(i._0x3bb5c7)].show=![]);for(let C=0,E=this.draggers.length;C<E;C++)this.draggers[C].show=![]},onDrag:(f,m)=>{const g=n,C=Cesium__namespace.Cartesian3[g(2776)](m,c),E=f.radius/(this.style.scale||1);let P=formatNum$1(C/E,3);isNaN(P)||(P<=0&&(P=.001),this.style.scale=P,this.entityGraphic[g(3206)]=P,f.radius=C,this.style.radius=C)},onDragEnd:(f,m)=>{this[n(t._0x1950e5)](),this.fire(EventType.editStyle)}});h[n(3194)]=o,this.draggers.push(h)}}destroyDraggers(){super.destroyDraggers(),this.entityAngle&&(this.layer.removeGraphic(this.entityAngle,!![]),delete this.entityAngle)}getDraggerContextMenu(e){const t={_0x3934c5:3966,_0x34c827:1276,_0x24de40:1542,_0x17a08f:3284,_0x537637:3032},i={_0x14987a:2445},s={_0x4b45d5:2465,_0x57c8fd:875,_0x12172c:2465},n=_0x5e32ae,o=super.getDraggerContextMenu(e);return(this.style[n(t._0x3934c5)]??!![])&&(o.push({text:this._map.getLangText("_按轴旋转"),icon:Icon[n(t._0x34c827)],show:c=>{const _=n;return!this._matrixRotate||this._matrixRotate[_(3758)]!==e.index},callback:c=>{const _=n;this[_(s._0x4b45d5)]&&(this.layer[_(s._0x57c8fd)](this.entityAngle,!![]),delete this[_(s._0x12172c)],this._hasEditHeading=![],this.updateDraggers()),this.startRotateMatrix(c.graphic,c)}}),o.push({text:this._map.getLangText(n(2716)),icon:Icon.BloomEffectNo,show:c=>{const _=n;return this._matrixRotate&&this[_(i._0x14987a)]._dragger_index===e.index},callback:c=>{this.stopRotateMatrix()}})),!Cesium__namespace[n(515)](this[n(1584)])&&(this[n(1584)]=this._graphic.options.hasEditHeading??![]),o.push({text:n(2599),icon:Icon.DrawCircle,show:c=>!this._hasEditHeading,callback:c=>{this.stopRotateMatrix(),this._hasEditHeading=!![],this.updateDraggers()}}),o.push({text:"停止编辑方向",icon:Icon.DrawCircle,show:c=>this._hasEditHeading,callback:c=>{this._hasEditHeading=![],this.updateDraggers()}}),!Cesium__namespace.defined(this[n(t._0x24de40)])&&(this._hasEditScale=this[n(t._0x17a08f)].options.hasEditScale??![]),o.push({text:this._map.getLangText("_调整比例"),icon:Icon.UndergroundYes,show:c=>!this._hasEditScale,callback:c=>{this._hasEditScale=!![],this.updateDraggers()}}),o.push({text:this._map.getLangText(n(t._0x537637)),icon:Icon.UndergroundNo,show:c=>this[n(1542)],callback:c=>{this._hasEditScale=![],this.updateDraggers()}}),o}finish(){const e={_0x210600:3284,_0x14a763:3284,_0x56e404:1001},t=_0x5e32ae;delete this[t(e._0x210600)]._draw_tooltip,delete this._graphic._isDragger,delete this[t(e._0x210600)]._noMousePick,delete this[t(e._0x14a763)]._pointType,delete this._graphic.onDrag,this[t(e._0x14a763)][t(e._0x56e404)]()}}class ModelEntity extends BasePointEntity{constructor(e={}){const t=_0x5e32ae;e.drawShow=e[t(1825)]??!![],super(e),this.style.radius=this.style.radius??50,this._readyPromise=Cesium__namespace[t(3804)]()}get entityGraphic(){var e;return(e=this._entity)===null||e===void 0?void 0:e.model}get EditClass(){return EditModel}get scale(){return this[_0x5e32ae({_0x56add1:4114}._0x56add1)].scale??1}set scale(e){this.style.scale=e,this._updateStyleHook(this.style,{scale:e})}get[_0x5e32ae(2355)](){const e={_0x3db547:3870},t=_0x5e32ae;return this._readyPromise[t(e._0x3db547)]}_mountedHook(){const e={_0x5638bf:2581,_0x4f7674:515,_0x349753:4114,_0x5eed60:2747,_0x120265:3381,_0x40e106:3798,_0xc009f2:505,_0x48af2a:2180,_0x31b513:4114,_0x5c28c0:3579},t={_0x405ea6:1404,_0x433407:3205,_0x55b4d2:3352},i=_0x5e32ae,s={occlusion:this.style.marsOcclusion};isMars3DCesium&&(this.loadOk=![],this._draw_tooltip=this._map.getLangText("_加载模型中"),this.fire(EventType.loadBefore,{url:this.options.url}),s[i(e._0x5638bf)]=(h,f)=>{const m=i;delete this._draw_tooltip,this.loadOk=!![],this._model=f,f.boundingSphere.radius<(this.style.maxRadius,1e3)&&(this.style.radius=f.boundingSphere.radius),this[m(t._0x405ea6)](EventType.load,{drawtype:this[m(t._0x433407)],entity:h,model:f,graphic:this},!![]),this[m(t._0x55b4d2)][m(4056)](this)});const n={position:this.position,orientation:this.getOrientation(),model:ModelStyleConver.toCesiumVal(this.style,{},!![])};!n.model.uri&&this[i(3798)].url&&(n.model.uri=this.options.url,n.model.show=!![]);const o=this.style.label;if(o&&(Cesium__namespace[i(515)](this.style.clampToGround)&&!Cesium__namespace[i(515)](o.clampToGround)&&(o.clampToGround=this.style.clampToGround),Cesium__namespace.defined(o.setHeight)||Cesium__namespace[i(e._0x4f7674)](o.addHeight)?this._addLabel():n[i(736)]=LabelStyleConver[i(1268)](this[i(e._0x349753)].label,{},this.attr)),this.options[i(e._0x5eed60)]&&(n.billboard=BillboardStyleConver.toCesiumVal(this.options.billboard,{},!![])),this.options.point&&(n.point=PointStyleConver.toCesiumVal(this.options[i(e._0x120265)],{},!![])),this[i(e._0x40e106)].circle&&(n[i(2782)]=CircleStyleConver[i(1268)](this.options.circle,{},!![])),this.options.path){var c,_;const h=PathStyleConver.toCesiumVal(this[i(3798)].path,{},!![]);!h[i(1595)]&&(h[i(e._0xc009f2)]=0),n.path=h;const f=(c=this[i(e._0x48af2a)])===null||c===void 0||(_=c._property)===null||_===void 0?void 0:_._times;if(f&&f.length>0){var l;const m=f[0];let g=f[f.length-1];((l=this.position)===null||l===void 0?void 0:l.forwardExtrapolationType)===Cesium__namespace.ExtrapolationType.HOLD&&(g=Cesium__namespace.JulianDate.fromDate(new Date(2100,1,1))),n.availability=new Cesium__namespace.TimeIntervalCollection([new Cesium__namespace.TimeInterval({start:m,stop:g})])}}this[i(e._0x31b513)].distanceDisplayCondition&&(this.style.distanceDisplayPoint?(n.point=PointStyleConver.toCesiumVal(this.style.distanceDisplayPoint),n.point[i(1430)]=this[i(2404)](this.style.distanceDisplayPoint)):this.style.distanceDisplayBillboard&&(n.billboard=BillboardStyleConver.toCesiumVal(this.style.distanceDisplayBillboard),n.billboard.distanceDisplayCondition=this._getTargetDistanceDisplayCondition(this[i(4114)].distanceDisplayBillboard))),n.model[i(3677)]=s,this[i(e._0x5c28c0)]=this._createEntity(n)}[_0x5e32ae(2442)](){this.rotateStop(),super._removedHook()}[_0x5e32ae(3978)](e,t){const i={_0x15f34d:3821},s=_0x5e32ae,n=ModelStyleConver.toJSON(e,t,!![]);return this[s(4114)][s(i._0x15f34d)]?n.distanceDisplayPoint=PointStyleConver.toJSON(this.style[s(3821)],{},!![]):this.style.distanceDisplayBillboard&&(n[s(1731)]=BillboardStyleConver.toJSON(this.style.distanceDisplayBillboard,{},!![])),n}[_0x5e32ae(3601)](e,t){const i={_0x38dc3e:736,_0x2bc2e5:3579,_0xa4ddc3:2510,_0x3f47be:736,_0x592976:3579,_0x2b9ef7:1528},s=_0x5e32ae;if(t!=null&&t.url&&(this.loadOk=![],this[s(2189)]._readyOk=![],this.fire(EventType.loadBefore,{url:t==null?void 0:t[s(1221)]})),this[s(3579)].orientation=this[s(4002)](),ModelStyleConver.toCesiumVal(e,this.entityGraphic,!![]),t!=null&&t.label)if(Cesium__namespace.defined(e.clampToGround)&&!Cesium__namespace.defined(e.label.clampToGround)&&(e[s(i._0x38dc3e)].clampToGround=e.clampToGround),Cesium__namespace[s(515)](e.label[s(2554)])||Cesium__namespace.defined(e.label.addHeight)){var n;(n=this[s(3579)])!==null&&n!==void 0&&n.label&&(this[s(i._0x2bc2e5)][s(i._0x38dc3e)].show=![]),this[s(i._0xa4ddc3)]()}else this[s(3579)].label=this._entity[s(i._0x3f47be)]||{},LabelStyleConver.toCesiumVal(e.label,this[s(i._0x592976)][s(736)],this[s(i._0x2b9ef7)])}_updatePositionsHook(){const e=_0x5e32ae;if(super._updatePositionsHook(),this._entity.path){var t,i;const n=(t=this.position)===null||t===void 0||(i=t._property)===null||i===void 0?void 0:i._times;if(n&&n.length>0){var s;const o=n[0];let c=n[n[e(3402)]-1];((s=this.position)===null||s===void 0?void 0:s.forwardExtrapolationType)===Cesium__namespace[e(762)].HOLD&&(c=Cesium__namespace.JulianDate.fromDate(new Date(2100,1,1))),this._entity.availability=new Cesium__namespace.TimeIntervalCollection([new Cesium__namespace.TimeInterval({start:o,stop:c})])}}}_setOptionsHook(e,t){const i={_0xb4c30c:2747,_0x2c4c2b:1268,_0xc7e7ac:1018,_0x32154e:1595,_0x4252d2:3579,_0x96eefb:2782},s=_0x5e32ae;t.billboard&&BillboardStyleConver[s(1268)](e[s(i._0xb4c30c)],this._entity.billboard,!![]),t.point&&PointStyleConver.toCesiumVal(e.point,this._entity.point,!![]),t[s(1018)]&&(PathStyleConver[s(i._0x2c4c2b)](e[s(i._0xc7e7ac)],this._entity.path,!![]),!e.path[s(i._0x32154e)]&&(this[s(3579)].path.leadTime=0)),t.circle&&CircleStyleConver.toCesiumVal(e.circle,this[s(i._0x4252d2)][s(i._0x96eefb)],!![])}_toJSON_Ex(e){const t={_0x3db830:3798,_0x2991b9:2747,_0x462d5b:1018,_0x561b47:3852},i=_0x5e32ae;this[i(t._0x3db830)].billboard&&(e.billboard={},BillboardStyleConver[i(3852)](this.options.billboard,e[i(t._0x2991b9)],!![])),this.options[i(3381)]&&(e.point={},PointStyleConver.toJSON(this.options.point,e[i(3381)],!![])),this.options.path&&(e.path={},PathStyleConver.toJSON(this.options[i(t._0x462d5b)],e[i(1018)],!![])),this.options.circle&&(e.circle={},CircleStyleConver[i(t._0x561b47)](this.options.circle,e.circle,!![]))}_addLabel(){const e={_0x299d81:515,_0x4f6a3e:515,_0x1f3382:3579,_0x111bc9:736},t=_0x5e32ae,i=this.style[t(736)];if(Cesium__namespace[t(e._0x299d81)](i.setHeight)||Cesium__namespace[t(e._0x4f6a3e)](i[t(2530)])){var s;(s=this[t(e._0x1f3382)])!==null&&s!==void 0&&s.label&&(this._entity[t(e._0x111bc9)][t(575)]=![]),super._addLabel()}else this._entity.label=this._entity.label||{},LabelStyleConver.toCesiumVal(this.style.label,this[t(3579)].label,this.attr)}updateAttrForDrawing(e){}[_0x5e32ae(4249)](){}_getTargetDistanceDisplayCondition(e){const t=_0x5e32ae;let i;return this.style.distanceDisplayCondition instanceof Cesium__namespace.DistanceDisplayCondition?i=this.style.distanceDisplayCondition[t(1876)]:this.style.distanceDisplayCondition_far&&(i=this.style.distanceDisplayCondition_far),new Cesium__namespace.DistanceDisplayCondition((e.distanceDisplayCondition_near,i),(e.distanceDisplayCondition_far,Number.MAX_VALUE))}getHeadingPitchRoll(){const e={_0x11d2a2:2472,_0x5c7975:3260},t=_0x5e32ae,i=this._map[t(1949)].currentTime,s=this[t(2622)],n=Cesium__namespace[t(e._0x11d2a2)][t(e._0x5c7975)](this._entity.orientation,i,new Cesium__namespace[t(2988)]);return getHeadingPitchRollByOrientation(s,n)}rotateStart(e={}){const t={_0x14ca66:3447,_0x4a15f7:1905},i={_0x15c3bf:2911,_0x19311e:1890},s=_0x5e32ae;this[s(1456)]&&this.rotateStop(),this._rotateDirection=e.direction?1:-1,this[s(t._0x14ca66)]=360/(60*(e.time||60)),this._rotateAutoStopAngle=e.autoStopAngle,this._rotateHpr=this.getHeadingPitchRoll(),this._startHeading=this._rotateHpr.heading,this[s(t._0x4a15f7)]=0,this._isRotateStart=!![],this.entity.orientation=new Cesium__namespace.CallbackProperty(n=>{const o=s;var c,_;const l=getPositionValue(this.position,n);return Cesium__namespace[o(i._0x15c3bf)][o(4043)](l,this._rotateHpr,(c=this[o(i._0x19311e)])===null||c===void 0||(_=c.scene)===null||_===void 0?void 0:_[o(1329)].ellipsoid)},![]),this._map.on(EventType.preRender,this[s(2411)],this)}[_0x5e32ae(2411)](e){const t={_0x2d08a1:1905,_0x5b0727:2101,_0x40a50b:3977},i=_0x5e32ae;if(!this[i(1890)])return;this._tikRender++;const s=this[i(t._0x2d08a1)]*this._rotateAngle;if(this._rotateAutoStopAngle&&s>=this._rotateAutoStopAngle){this.rotateStop();return}const n=Cesium__namespace.Math.toRadians(s*this._rotateDirection)+this[i(t._0x5b0727)];this._rotateHpr[i(t._0x40a50b)]=n}rotateStop(){const e=_0x5e32ae;this._isRotateStart&&(this._isRotateStart=![],this._map.off(EventType.preRender,this._rotate_onPreRenderHandler,this),this.heading=Cesium__namespace.Math[e(1984)](this._rotateHpr[e(3977)]),delete this._rotateDirection,delete this._rotateAngle,delete this[e(1865)],delete this._rotateHpr,delete this._startHeading,delete this._tikRender)}moveTo(e){const t={_0x385790:3835,_0x27fa24:762,_0x393b77:527,_0x43ebad:1890,_0x2d4763:1949,_0x6ba652:1050},i={_0x4a0e75:4301};return new Promise((s,n)=>{const o=_0x5210,c=new Cesium__namespace.SampledPositionProperty;c[o(t._0x385790)]=Cesium__namespace[o(t._0x27fa24)].HOLD;const _=this._map[o(1949)].currentTime.clone(),l=this.positionShow;c.addSample(_,l);const h=LngLatPoint.parse(e.position).toCartesian(),f=e[o(1572)]||5,m=Cesium__namespace.JulianDate.addSeconds(_,f,new Cesium__namespace[o(t._0x393b77)]);c.addSample(m,h),this._entity.position=c;const g=this[o(1890)][o(1949)].multiplier;this[o(t._0x43ebad)][o(t._0x2d4763)][o(t._0x6ba652)]=!![],this._map.clock[o(2454)]=e.speed||1,setTimeout(()=>{const C=o;this._map&&(this.position=h,this._map[C(1949)].multiplier=g,e[C(i._0x4a0e75)]&&e.onEnd(),s(this))},f*1e3)})}[_0x5e32ae(3220)](){const e=_0x5e32ae;return this._entity[e(2180)]}flyTo(e={}){const t=_0x5e32ae;return this._map?(!Cesium__namespace[t(515)](e.radius)&&(e.radius=this.style.radius*2*(e.scale||1.8)),this._map.flyToPoint(this.point,e)):Promise[t(4056)](![])}[_0x5e32ae(3913)](e){const t={_0x53824b:2989},i=_0x5e32ae;this[i(4114)][i(3252)]=e,this._entity&&(ModelStyleConver.setOpacity(this.entityGraphic,e),this[i(t._0x53824b)](e))}}register$4("model",ModelEntity,!![]);class EditBox extends EditBase{get[_0x5e32ae(2180)](){return this[_0x5e32ae({_0x3c096a:3284}._0x3c096a)]._position_draw}set position(e){const t=_0x5e32ae;this[t(3284)]._position_draw=e}bindDraggers(){const e={_0x5547f1:1470,_0xc249e1:1286,_0x4be11d:1286,_0x2d7653:4175,_0x454c1d:4209,_0x3d44ff:4296,_0x364e5d:2809,_0x5188ec:3916,_0x266ce9:3565},t={_0xb6364b:2180},i={_0x47fdd9:2180},s={_0x477c6b:2180,_0x1f992a:2180},n={_0xd9a312:2180},o=_0x5e32ae,c=this.style;let _;const l=this[o(2180)];_=this[o(e._0x5547f1)]({position:l,onDrag:(w,M)=>{const T=o,L=Cesium__namespace.Cartesian3.subtract(M,this.position,new Cesium__namespace.Cartesian3);this[T(n._0xd9a312)]=M;for(let R=0,D=this.draggers.length;R<D;R++)this.draggers[R]!==w&&(this.draggers[R].position=Cesium__namespace[T(3916)].add(this.draggers[R].position,L,new Cesium__namespace.Cartesian3))}}),this.draggers.push(_);const h=Cesium__namespace[o(e._0xc249e1)].toRadians(this._graphic.heading),f=Cesium__namespace[o(e._0xc249e1)].toRadians(this[o(3284)].pitch),m=Cesium__namespace[o(e._0x4be11d)].toRadians(this._graphic[o(e._0x2d7653)]),g=new Cesium__namespace[o(3064)](h,f,m),C=getPositionByHprAndOffset(l,new Cesium__namespace.Cartesian3(c.dimensions_x/2,0,0),g);_=this[o(e._0x5547f1)]({position:C,type:PointType.EditAttr,tooltip:this._map[o(4296)]("_修改长度"),onDrag:(w,M)=>{const T=o,L=Cesium__namespace[T(3026)].fromCartesian(this.position).height;M=setPositionsHeight(M,L),w[T(s._0x477c6b)]=M;const R=this.formatNum(Cesium__namespace[T(3916)].distance(this[T(s._0x1f992a)],M),2);c[T(4149)]=R*2,this.updateBox(c),this[T(1404)](EventType.editStyle)},onDragEnd:(w,M)=>{this.updateDraggers()}}),this[o(e._0x454c1d)].push(_);const E=getPositionByHprAndOffset(l,new Cesium__namespace.Cartesian3(0,c.dimensions_y/2,0),g);_=this.createDragger({position:E,type:PointType.EditAttr,tooltip:this._map[o(e._0x3d44ff)](o(e._0x364e5d)),onDrag:(w,M)=>{const T=o,L=Cesium__namespace.Cartographic.fromCartesian(l)[T(3865)];M=setPositionsHeight(M,L),w[T(2180)]=M;const R=this[T(3669)](Cesium__namespace[T(3916)][T(2776)](this[T(i._0x47fdd9)],M),2);c.dimensions_y=R*2,this.updateBox(c),this.fire(EventType.editStyle)},onDragEnd:(w,M)=>{this.updateDraggers()}}),this.draggers.push(_);const P=getPositionByHprAndOffset(l,new Cesium__namespace[o(e._0x5188ec)](0,0,c.dimensions_z/2),g);_=this.createDragger({position:P,type:PointType[o(e._0x266ce9)],tooltip:this._map.getLangText(o(3930)),onDrag:(w,M)=>{const T=o,L=this.formatNum(Cesium__namespace[T(3916)].distance(this[T(t._0xb6364b)],M),2);c.dimensions_z=L*2,this.updateBox(c),this.fire(EventType.editStyle)},onDragEnd:(w,M)=>{this.updateDraggers()}}),this.draggers.push(_)}[_0x5e32ae(2247)](e){const t={_0x7667aa:3916,_0xdb6e2c:4149,_0x4694cc:4108,_0x2c270b:818},i=_0x5e32ae,s=new Cesium__namespace[i(t._0x7667aa)](e[i(t._0xdb6e2c)],e.dimensions_y,e[i(t._0x4694cc)]);this[i(2189)].dimensions[i(t._0x2c270b)](s)}_updateStyleHook(e){const t={_0x267f93:515,_0x58dd62:434},i=_0x5e32ae;super._updateStyleHook(e),(Cesium__namespace[i(t._0x267f93)](e.dimensions_x)||Cesium__namespace.defined(e[i(t._0x58dd62)])||Cesium__namespace.defined(e.dimensions_z))&&this.updateDraggers()}}class BoxEntity extends BasePointEntity{get entityGraphic(){var e;return(e=this._entity)===null||e===void 0?void 0:e.box}get EditClass(){return EditBox}_mountedHook(){const e={_0x259acd:4002,_0x1905d1:2510},t=_0x5e32ae,i={position:this.position,orientation:this[t(e._0x259acd)](),box:BoxStyleConver[t(1268)](this.style,{},!![])};this._entity=this._createEntity(i),this[t(4114)][t(736)]&&this[t(e._0x1905d1)]()}_style2Json(e,t){return BoxStyleConver[_0x5e32ae(3852)](e,t,!![])}_updateStyleHook(e,t){const i={_0x27e184:2189},s=_0x5e32ae;t&&(Cesium__namespace.defined(t.heading)||Cesium__namespace[s(515)](t.pitch)||Cesium__namespace.defined(t.roll))&&(this._entity.orientation=this.getOrientation()),BoxStyleConver.toCesiumVal(e,this[s(i._0x27e184)],!![])}_setPositionsToCallback(){const e={_0x1cbd2c:1949,_0x2ed5e6:4149,_0x2f8d03:4114},t=_0x5e32ae;super._setPositionsToCallback();const i=getCesiumValue(this.entityGraphic.dimensions,Number,this._map[t(e._0x1cbd2c)].currentTime);this.style.dimensions_x=this.style[t(e._0x2ed5e6)]??i.x,this.style.dimensions_y=this[t(4114)][t(434)]??i.y,this.style.dimensions_z=this.style.dimensions_z??i.z,delete this[t(e._0x2f8d03)].dimensions}}register$4(_0x5e32ae(630),BoxEntity,!![]);class EditPlane extends EditBase{get position(){return this._graphic._position_draw}set position(e){this._graphic._position_draw=e}[_0x5e32ae(1560)](){const e={_0x5cc6f2:3284,_0xa58903:1567,_0x9d4707:2492,_0x1c19e2:434,_0x2843af:1890,_0x9541a9:4209},t={_0x4d815d:2776,_0x4e2ed0:2180,_0x3c7377:434},i={_0x56f086:3669,_0x38bc54:3916,_0xd57da1:2180},s={_0x148e7f:2813},n={_0x4df20c:2180},o=_0x5e32ae,c=this.style;let _;const l=this.position;_=this[o(1470)]({position:l,onDrag:(E,P)=>{const w=o,M=Cesium__namespace.Cartesian3.subtract(P,this.position,new Cesium__namespace.Cartesian3);this.position=P;for(let T=0,L=this.draggers[w(3402)];T<L;T++)this.draggers[T]!==E&&(this[w(4209)][T][w(2180)]=Cesium__namespace.Cartesian3.add(this.draggers[T].position,M,new Cesium__namespace.Cartesian3))}}),this[o(4209)].push(_);const h=Cesium__namespace[o(1286)][o(1567)](this[o(e._0x5cc6f2)].heading),f=Cesium__namespace.Math[o(e._0xa58903)](this[o(3284)].pitch),m=Cesium__namespace[o(1286)].toRadians(this[o(e._0x5cc6f2)][o(4175)]),g=new Cesium__namespace.HeadingPitchRoll(h,f,m),C=new Cesium__namespace[o(3916)];switch(c.plane_normal){case"x":C.y=c.dimensions_x/2;break;default:C.x=c.dimensions_x/2;break}if(_=this.createDragger({position:getPositionByHprAndOffset(l,C,g),type:PointType[o(e._0x9d4707)],tooltip:this._map.getLangText("_修改长度"),onDrag:(E,P)=>{const w=o,M=Cesium__namespace.Cartographic.fromCartesian(this[w(2180)])[w(3865)];P=setPositionsHeight(P,M),E.position=P;const T=this.formatNum(Cesium__namespace.Cartesian3.distance(this[w(n._0x4df20c)],P),2);c.dimensions_x=T*2,this.updatePlane(c)},onDragEnd:(E,P)=>{this[o(s._0x148e7f)]()}}),this.draggers.push(_),c[o(588)]==="z")_=this.createDragger({position:getPositionByHprAndOffset(l,new Cesium__namespace.Cartesian3(0,c[o(e._0x1c19e2)]/2,0),g),type:PointType.EditAttr,tooltip:this[o(e._0x2843af)].getLangText("_修改宽度"),onDrag:(E,P)=>{const w=o,M=Cesium__namespace[w(3026)].fromCartesian(this.position).height;P=setPositionsHeight(P,M),E.position=P;const T=this[w(i._0x56f086)](Cesium__namespace[w(i._0x38bc54)].distance(this[w(i._0xd57da1)],P),2);c.dimensions_y=T*2,this.updatePlane(c)},onDragEnd:(E,P)=>{this[o(2813)]()}}),this[o(e._0x9541a9)].push(_);else{const E={x:0,y:0,z:0};switch(c.plane_normal){case"x":case"y":E.z=c.dimensions_y/2;break;default:E.y=c.dimensions_y/2;break}_=this.createDragger({position:getPositionByHprAndOffset(l,E,g),type:PointType[o(3565)],tooltip:this._map.getLangText("_修改宽度"),onDrag:(P,w)=>{const M=o,T=this.formatNum(Cesium__namespace[M(3916)][M(t._0x4d815d)](this[M(t._0x4e2ed0)],w),2);c[M(t._0x3c7377)]=T*2,this.updatePlane(c)},onDragEnd:(P,w)=>{this.updateDraggers()}}),this.draggers[o(3759)](_)}}[_0x5e32ae(1107)](e){const t={_0x48c320:434,_0x8fb97d:2189},i=_0x5e32ae,s=new Cesium__namespace.Cartesian2(e.dimensions_x,e[i(t._0x48c320)]);this[i(t._0x8fb97d)].dimensions[i(818)](s),this.fire(EventType.editStyle)}_updateStyleHook(e){const t={_0x1e6f0e:2813},i=_0x5e32ae;super._updateStyleHook(e),(Cesium__namespace.defined(e[i(4149)])||Cesium__namespace.defined(e.dimensions_y))&&this[i(t._0x1e6f0e)]()}}class PlaneEntity extends BasePointEntity{get[_0x5e32ae(2189)](){const e=_0x5e32ae;var t;return(t=this[e(3579)])===null||t===void 0?void 0:t[e(659)]}get EditClass(){return EditPlane}_mountedHook(){const e={position:this.position,orientation:this.getOrientation(),plane:PlaneStyleConver.toCesiumVal(this.style,{},!![])};this._entity=this._createEntity(e),this.style.label&&this._addLabel()}_style2Json(e,t){return PlaneStyleConver.toJSON(e,t,!![])}_updateStyleHook(e,t){const i={_0x59d8e7:4175,_0x2b8939:908},s=_0x5e32ae;t&&(Cesium__namespace.defined(t.heading)||Cesium__namespace[s(515)](t.pitch)||Cesium__namespace.defined(t[s(i._0x59d8e7)]))&&(this._entity[s(i._0x2b8939)]=this.getOrientation()),PlaneStyleConver.toCesiumVal(e,this.entityGraphic,!![])}_setPositionsToCallback(){const e={_0x222275:1949,_0x436895:2535,_0x1acc2a:4114,_0x522a09:2189,_0x588885:3442,_0x365ff5:659,_0x53c50b:4114},t=_0x5e32ae;super._setPositionsToCallback();const i=getCesiumValue(this.entityGraphic.dimensions,Cesium__namespace.Cartesian2,this._map[t(e._0x222275)][t(837)]);i&&PlaneStyleConver.toOneJson(t(e._0x436895),i,this[t(e._0x1acc2a)]);const s=getCesiumValue(this[t(e._0x522a09)][t(659)],Cesium__namespace[t(e._0x588885)],this._map.clock[t(837)]);s&&PlaneStyleConver.toOneJson(t(e._0x365ff5),s,this[t(e._0x53c50b)])}}register$4("plane",PlaneEntity,!![]);class EditCylinder extends EditPoly{[_0x5e32ae(1560)](){const e={_0x5df009:4114,_0x2b8875:2492,_0x25b6c:3402},t=_0x5e32ae,i=this.positions,s=i[0];let n=0;const o=this.createDragger({position:s,onDragStart:(m,g)=>{const C=_0x5210;for(let E=0,P=this.draggers.length;E<P;E++)this[C(4209)][E][C(575)]=![]},onDrag:(m,g)=>{i[0]=g},onDragEnd:(m,g)=>{this[_0x5210(2813)]()}});o.index=n,this.draggers.push(o);const c=getEllipseOuterPositions({position:s,semiMajorAxis:this[t(4114)][t(1987)],semiMinorAxis:this.style.bottomRadius,rotation:Cesium__namespace.Math.toRadians(Number(this[t(e._0x5df009)][t(2279)]||0))});n=1;const _=c[0];i[n]=_;const l=this.createDragger({position:_,type:PointType[t(e._0x2b8875)],tooltip:this[t(1890)].getLangText("_修改半径"),onDrag:(m,g)=>{i[1]=g;const C=this.formatNum(Cesium__namespace.Cartesian3.distance(i[0],g),2);this.style.bottomRadius=C,this.fire(EventType.editStyle)},onDragEnd:(m,g)=>{this.updateDraggers()}});l.index=n,this.draggers[t(3759)](l),n=2;const h=addPositionsHeight(s,this.style[t(e._0x25b6c)]);i[n]=h;const f=this.createDragger({position:h,type:PointType[t(3565)],tooltip:this._map.getLangText("_修改高度"),onDrag:(m,g)=>{const C=t;i[m[C(4063)]]=g;const E=this.formatNum(Cesium__namespace.Cartesian3[C(2776)](i[0],g),2);this.style[C(3402)]=E,this.fire(EventType[C(856)])},onDragEnd:(m,g)=>{this.updateDraggers()}});f.index=n,this.draggers[t(3759)](f)}[_0x5e32ae(3601)](e){const t={_0x4726bd:2999},i=_0x5e32ae;super._updateStyleHook(e),(Cesium__namespace.defined(e[i(4307)])||Cesium__namespace.defined(e.bottomRadius)||Cesium__namespace.defined(e.length)||Cesium__namespace.defined(e[i(t._0x4726bd)]))&&this.updateDraggers()}}class CylinderEntity extends BasePointEntity{constructor(e={}){super(e),this._minPointNum=2,this._maxPointNum=2}get entityGraphic(){var e;return(e=this._entity)===null||e===void 0?void 0:e.cylinder}get EditClass(){return EditCylinder}_mountedHook(){const e={_0x1e2342:3579,_0x1cdd26:821,_0x4646fa:736,_0x142161:2510},t=_0x5e32ae;this[t(e._0x1e2342)]=this[t(e._0x1cdd26)](this._getCreateEntityAttr()),this[t(4114)][t(e._0x4646fa)]&&this[t(e._0x142161)]()}_getCreateEntityAttr(){const e=_0x5e32ae;return{position:this.position,orientation:this[e(4002)](),cylinder:CylinderStyleConver[e(1268)](this.style,{},!![])}}_style2Json(e,t){return CylinderStyleConver.toJSON(e,t,!![])}_updateStyleHook(e,t){const i={_0x1057e5:2189,_0x18dfa4:2625,_0x3d53b7:4175,_0x3afd74:4002,_0x144744:515,_0xfcb2f2:1761,_0x5356da:3522},s=_0x5e32ae;if(CylinderStyleConver[s(1268)](e,this[s(i._0x1057e5)],{},!![]),(Cesium__namespace.defined(t.heading)||Cesium__namespace.defined(t[s(i._0x18dfa4)])||Cesium__namespace.defined(t[s(i._0x3d53b7)]))&&(this._entity.orientation=this[s(i._0x3afd74)]()),Cesium__namespace.defined(t.length)||Cesium__namespace[s(i._0x144744)](t.diffHeight)){var n;((n=this[s(i._0xfcb2f2)])===null||n===void 0?void 0:n.length)>0&&(this[s(i._0x5356da)]=addPositionsHeight(this._positions_draw[0],e.length/2))}}[_0x5e32ae(4119)](){const e=_0x5e32ae;var t,i;(t=this.editing)!==null&&t!==void 0&&t[e(968)]&&((i=this._positions_draw)===null||i===void 0?void 0:i.length)>0&&(this._position_show=addPositionsHeight(this._positions_draw[0],this.style.length/2)),super[e(4119)]()}[_0x5e32ae(3055)](){const e={_0x6c2bc2:566,_0x20ff41:1949,_0x79cb7b:1987,_0x148327:1987,_0x4c5cb5:2189,_0x56abe8:1761,_0x276b10:2180,_0x5ef772:3402,_0x2d0e7c:3522},t={_0x595a37:4114},i=_0x5e32ae;if(this[i(e._0x6c2bc2)])return;this._isCallbackPositions=!![];const s=this._map[i(e._0x20ff41)].currentTime;this.style.topRadius=getCesiumValue(this.entityGraphic.topRadius,Number,s),this[i(2189)].topRadius=new Cesium__namespace.CallbackProperty(n=>this[i(t._0x595a37)].topRadius,![]),this.style[i(e._0x79cb7b)]=getCesiumValue(this.entityGraphic[i(e._0x148327)],Number,s),this[i(e._0x4c5cb5)].bottomRadius=new Cesium__namespace.CallbackProperty(n=>this.style.bottomRadius,![]),this.style.length=getCesiumValue(this[i(e._0x4c5cb5)].length,Number,s),this.entityGraphic.length=new Cesium__namespace.CallbackProperty(n=>this.style.length,![]),this[i(2180)]?(this._positions_draw=this.positions,this[i(e._0x56abe8)][0]=addPositionsHeight(this[i(e._0x276b10)],-this.style[i(e._0x5ef772)]/2)):this._positions_draw=[],this[i(e._0x2d0e7c)]=this.position,this.position=new Cesium__namespace.CallbackProperty(n=>this._position_show,![])}[_0x5e32ae(1127)](){const e={_0x4269ab:2189,_0x95e63f:2189,_0x5874cd:4114,_0xf4a0cf:2189},t=_0x5e32ae;this._isCallbackPositions&&(this._isCallbackPositions=![],this[t(e._0x4269ab)].length=this.style.length,this[t(e._0x95e63f)].topRadius=this[t(e._0x5874cd)].topRadius,this[t(e._0xf4a0cf)].bottomRadius=this.style[t(1987)],this._position=this._position_show,this._point=LngLatPoint.fromCartesian(this._position),this._updatePositionsHook())}_startDrawHook(){const e={_0x301761:1890},t=_0x5e32ae;this._map.on(EventType.mouseMove,this._onMouseMoveHandler,this),this._map.on(EventType.click,this._onClickHandler,this),this[t(e._0x301761)].on(this._drawEndEventType,this[t(4082)],this),(this.options.hasDrawDelPoint??!![])&&this._map.on(this._drawDelEventType,this._onRightClickHandler,this)}_stopDrawHook(){const e={_0x1ec979:1220,_0x178df7:1290,_0xf1e1a:4040},t=_0x5e32ae;this._map[t(e._0x1ec979)](EventType.mouseMove,this._onMouseMoveHandler,this),this._map.off(EventType.click,this[t(e._0x178df7)],this),this._map.off(this._drawEndEventType,this._onDbClickHandler,this),(this.options.hasDrawDelPoint??!![])&&this._map.off(this[t(e._0xf1e1a)],this[t(1682)],this)}updateAttrForDrawing(e){const t={_0x24997b:1761,_0x42b75c:4114},i=_0x5e32ae;if(this._position_show=addPositionsHeight(this[i(t._0x24997b)][0],this[i(t._0x42b75c)].length/2),!e&&this._positions_draw.length>1){const s=formatNum$1(Cesium__namespace.Cartesian3.distance(this._positions_draw[0],this._positions_draw[1]),2);this[i(4114)].bottomRadius=s,this[i(t._0x42b75c)].length=s*2}}[_0x5e32ae(1682)](e){super._onRightClickHandler(e),this.style.bottomRadius=0,this.style.length=0}}register$4("cylinder",CylinderEntity,!![]);class ConeTrack extends CylinderEntity{constructor(e={}){const t=_0x5e32ae;super(e),e.targetPosition&&(this.targetPosition=e[t(589)])}get hasEdit(){return![]}get EditClass(){}get targetPosition(){return this._targetPosition}set targetPosition(e){const t={_0x51e58e:3682},i=_0x5e32ae;this._targetPoint=LngLatPoint.parse(e),this[i(t._0x51e58e)]=this._targetPoint[i(2048)]()}get targetPoint(){return this._targetPoint}get[_0x5e32ae(1314)](){return this[_0x5e32ae(4114)].angle}set[_0x5e32ae(1314)](e){this.style.angle=e}_mountedHook(){super._mountedHook(),this._updateDistanceDisplayConditionByEdit()}_getCreateEntityAttr(){const e={_0x56e74d:4307,_0x44b3d9:1989},t=_0x5e32ae,i=super._getCreateEntityAttr();return i.position=new Cesium__namespace.CallbackProperty(s=>(this._update(s),this._cylinderPosition),![]),i.orientation=new Cesium__namespace.CallbackProperty(s=>this._orientation,![]),i.cylinder.length=new Cesium__namespace.CallbackProperty(s=>this[_0x5210(4264)],![]),!Cesium__namespace.defined(i[t(1989)][t(e._0x56e74d)])&&(i[t(e._0x44b3d9)].topRadius=0),Cesium__namespace[t(515)](this.style.angle)&&(i[t(1989)][t(1987)]=new Cesium__namespace.CallbackProperty(s=>this._cylinderBottomRadius,![])),this._isCallbackPositions=!![],i}_update(e){const t={_0x367792:515,_0x485a3a:2469,_0x18cc74:3402,_0x569df2:1426,_0x556ad8:1890,_0x3b7f1a:4175},i=_0x5e32ae,s=getPositionValue(this.position,e);if(!s){this._cylinderPosition=void 0;return}if(Cesium__namespace[i(t._0x367792)](this.targetPosition)){const n=getPositionValue(this[i(589)],e);n&&(this._cylinderLength=Cesium__namespace.Cartesian3.distance(s,n),this._cylinderPosition=Cesium__namespace.Cartesian3.midpoint(s,n,new Cesium__namespace.Cartesian3),this[i(t._0x485a3a)]=Cesium__namespace.Transforms.headingPitchRollQuaternion(n,getHeadingPitchRollForLine(n,s)))}else{if(this._cylinderLength=this.style[i(t._0x18cc74)],!this[i(4264)]){const o=LngLatPoint[i(t._0x569df2)](s);this._cylinderLength=o.alt-getHeight(this[i(t._0x556ad8)].scene,o,{has3dtiles:![]})}const n=new Cesium__namespace.HeadingPitchRoll(Cesium__namespace.Math.toRadians(this.heading),Cesium__namespace.Math.toRadians(this.pitch),Cesium__namespace.Math[i(1567)](this[i(t._0x3b7f1a)]));this._orientation=Cesium__namespace.Transforms.headingPitchRollQuaternion(s,n),this._cylinderPosition=getPositionByHprAndLen(s,n,this._cylinderLength/2)}Cesium__namespace.defined(this[i(4114)].angle)&&(this._cylinderBottomRadius=this._cylinderLength*Math.cos(Cesium__namespace.Math.toRadians(90-this.angle)))}_updatePositionsHook(){}}register$4(_0x5e32ae(941),ConeTrack);class EditEllipsoid extends EditBase{bindDraggers(){const e={_0x1c3f3f:1470,_0x858316:3759,_0x5d90bd:3798,_0x426b70:2712,_0x14f3b5:4114,_0x59000a:1567,_0x680ad7:1470,_0x4720e5:3759,_0x88dadc:1486},t={_0x470dc4:3026,_0x3f7c7a:3236,_0x47ab49:3669,_0x25216f:1998,_0x1e63c5:2502,_0x21176b:856},i={_0x3f6bf8:3236,_0x2f4ad7:2180,_0x13d063:3284},s={_0x5474a3:2436,_0x2e0fb9:2776,_0x2d305a:3284},n={_0x14840f:4209},o=_0x5e32ae;let c;const _=this.positions[0];if(c=this[o(e._0x1c3f3f)]({position:_,onDragStart:(h,f)=>{const m=o;for(let g=0,C=this[m(n._0x14840f)].length;g<C;g++)this.draggers[g].show=![]},onDrag:(h,f)=>{this.positions[0]=f},onDragEnd:(h,f)=>{this.updateDraggers()}}),c.index=0,this.draggers[o(e._0x858316)](c),this[o(3284)][o(e._0x5d90bd)].hasEditRadii??!![]){c=this.createDragger({position:addPositionsHeight(_,this.style.radii_z),type:PointType.MoveHeight,tooltip:this._map.getLangText(o(e._0x426b70)),onDrag:(E,P)=>{const w=o,M=this[w(s._0x5474a3)][0],T=this.formatNum(Cesium__namespace.Cartesian3[w(s._0x2e0fb9)](M,P),2);this.style[w(2537)]=T,this[w(s._0x2d305a)].updateRadii(this[w(4114)]),this.fire(EventType.editStyle)}}),this[o(4209)].push(c);const h=getEllipseOuterPositions({position:_,semiMajorAxis:Number(this.style.radii_x),semiMinorAxis:Number(this[o(e._0x14f3b5)][o(1811)]),rotation:Cesium__namespace.Math[o(e._0x59000a)](Number(this[o(e._0x14f3b5)][o(2279)]||0))}),f=h[0],m=this[o(e._0x680ad7)]({position:f,type:PointType.EditAttr,tooltip:this._map.getLangText("_修改半径"),onDrag:(E,P)=>{const w=o,M=this[w(2436)][0],T=Cesium__namespace.Cartographic[w(i._0x3f6bf8)](M).height;P=setPositionsHeight(P,T),E[w(i._0x2f4ad7)]=P;const L=this.formatNum(Cesium__namespace.Cartesian3.distance(M,P),2);this.style.radii_y=L,this[w(i._0x13d063)][w(2502)](this.style),this.fire(EventType.editStyle)}});c.majorDragger=m,this.draggers[o(e._0x4720e5)](m);const g=h[1],C=this.createDragger({position:g,type:PointType.EditAttr,tooltip:this._map.getLangText("_修改半径"),onDrag:(E,P)=>{const w=o,M=this.positions[0],T=Cesium__namespace[w(t._0x470dc4)][w(t._0x3f7c7a)](M).height;P=setPositionsHeight(P,T),E.position=P;const L=this[w(t._0x47ab49)](Cesium__namespace.Cartesian3.distance(M,P),2);this.style[w(t._0x25216f)]=L,this._graphic[w(t._0x1e63c5)](this.style),this[w(1404)](EventType[w(t._0x21176b)])}});c[o(e._0x88dadc)]=C,this.draggers.push(C)}}[_0x5e32ae(3601)](e){const t={_0x11a52d:515,_0x5e2b08:515,_0x5cd695:2813},i=_0x5e32ae;super._updateStyleHook(e),(Cesium__namespace[i(t._0x11a52d)](e.radii_x)||Cesium__namespace[i(t._0x5e2b08)](e.radii_y)||Cesium__namespace.defined(e[i(2537)]))&&this[i(t._0x5cd695)]()}}class EllipsoidEntity extends BasePointEntity{constructor(e={}){const t={_0x3c0e02:4267,_0x5f5b07:2231},i=_0x5e32ae;super(e),this[i(t._0x3c0e02)]=2,this[i(t._0x5f5b07)]=3}get[_0x5e32ae(2189)](){var e;return(e=this._entity)===null||e===void 0?void 0:e.ellipsoid}get EditClass(){return EditEllipsoid}get[_0x5e32ae(1830)](){const e={_0x14bdc6:4189,_0x45bb44:3759},t=_0x5e32ae;let i=[];return this[t(e._0x14bdc6)]&&i[t(e._0x45bb44)](this._primitive_label),this._entity_scanPlane&&(i=i.concat(this._entity_scanPlane)),i}_mountedHook(){const e={_0x444ce8:821,_0x31ad78:736,_0x32d860:4140},t={_0x5b3091:1801},i=_0x5e32ae,s={position:this.position,orientation:this.getOrientation(),ellipsoid:EllipsoidStyleConver.toCesiumVal(this.style,{},!![])};this._entity=this[i(e._0x444ce8)](s),this.style[i(e._0x31ad78)]&&this._addLabel();const n=this[i(3798)][i(e._0x32d860)]||this.style.scanPlane;n&&(Array.isArray(n)?n.forEach(o=>{this[i(t._0x5b3091)](o)}):this.addScanPlane(n))}[_0x5e32ae(3978)](e,t){const i={_0x4ef316:813},s={_0x30f830:3759},n=_0x5e32ae;if(t=EllipsoidStyleConver.toJSON(e,t,!![]),this[n(813)]&&this[n(i._0x4ef316)].length>0){const o=[];this._entity_scanPlane.forEach(c=>{const _=n;o[_(s._0x30f830)](c[_(4266)])}),t.scanPlane=o}return t}[_0x5e32ae(3601)](e,t){const i={_0x4425e7:1268,_0xdfda21:3579,_0xe7eaf9:515},s=_0x5e32ae;EllipsoidStyleConver[s(i._0x4425e7)](e,this.entityGraphic,!![]),(Cesium__namespace.defined(t.heading)||Cesium__namespace.defined(t[s(2625)])||Cesium__namespace.defined(t.roll))&&(this[s(i._0xdfda21)].orientation=this.getOrientation()),(Cesium__namespace[s(i._0xe7eaf9)](t.radii_x)||Cesium__namespace.defined(t.radii_y)||Cesium__namespace[s(515)](t.radii_z))&&this.updateRadii(e)}_updatePositionsHook(){const e={_0x146dd0:4119,_0x2599a8:813,_0x5d71fa:813,_0x3088c0:2500},t=_0x5e32ae;super[t(e._0x146dd0)](),this[t(e._0x2599a8)]&&this[t(e._0x5d71fa)][t(e._0x3088c0)](i=>{const s=t;i[s(2180)]=this.position})}_setOptionsHook(e,t){const i=_0x5e32ae;if(t.scanPlane){this[i(4044)]();const s=e.scanPlane;Array.isArray(s)?s.forEach(n=>{this[i(1801)](n)}):this.addScanPlane(s)}}_updateExOpacity(e){const t={_0x43ba89:813},i={_0x2f65ab:4114,_0x52d3d6:4114},s=_0x5e32ae;var n;((n=this._entity_scanPlane)===null||n===void 0?void 0:n.length)>0&&this[s(t._0x43ba89)].forEach(o=>{const c=s;!this._updateEntityOpacity(o.ellipsoid,e)&&(o._planeOptions[c(i._0x2f65ab)].globalAlpha=e,EllipsoidStyleConver.toCesiumVal(o._planeOptions[c(i._0x52d3d6)],o.ellipsoid,!![]))})}updateRadii(e){const t={_0x2a8f41:3916,_0x201402:1811,_0x284dff:2137},i=_0x5e32ae,s=new Cesium__namespace[i(t._0x2a8f41)](e.radii_x,e[i(t._0x201402)],e.radii_z);this.entityGraphic[i(t._0x284dff)]?this[i(2189)].radii.setValue(s):this.entityGraphic.radii=s}[_0x5e32ae(3055)](){const e={_0x5b7ba9:566,_0x49acd9:3916,_0x1b9b6f:1890,_0xbd9883:1761},t=_0x5e32ae;if(this._isCallbackPositions)return;this[t(e._0x5b7ba9)]=!![];const i=getCesiumValue(this.entityGraphic.radii,Cesium__namespace[t(e._0x49acd9)],this[t(e._0x1b9b6f)][t(1949)].currentTime);i&&(this[t(4114)].radii_x=this.style.radii_x??i.x,this.style.radii_y=this.style.radii_y??i.y,this.style.radii_z=this.style.radii_z??i.z),this[t(e._0xbd9883)]=this.positions||[],this.position=new Cesium__namespace.CallbackProperty(s=>this._positions_draw.length<1?null:this._positions_draw[0],![])}_cancelPositionsCallback(){const e={_0x25fe2e:918,_0x44b601:2359},t=_0x5e32ae;this[t(566)]&&(this._isCallbackPositions=![],this[t(e._0x25fe2e)]=this._positions_draw[0],this[t(e._0x44b601)]=LngLatPoint[t(3236)](this._position),this._updatePositionsHook())}_startDrawHook(){const e={_0x1fee8f:4040},t=_0x5e32ae;this._map.on(EventType.mouseMove,this._onMouseMoveHandler,this),this._map.on(EventType.click,this._onClickHandler,this),this._map.on(this._drawEndEventType,this._onDbClickHandler,this),(this.options.hasDrawDelPoint??!![])&&this._map.on(this[t(e._0x1fee8f)],this._onRightClickHandler,this)}[_0x5e32ae(1940)](){const e={_0x5f4dad:1220,_0x35254f:3798,_0x5083b7:1682},t=_0x5e32ae;this._map.off(EventType.mouseMove,this._onMouseMoveHandler,this),this[t(1890)].off(EventType[t(1948)],this[t(1290)],this),this._map[t(e._0x5f4dad)](this._drawEndEventType,this._onDbClickHandler,this),(this[t(e._0x35254f)].hasDrawDelPoint??!![])&&this[t(1890)][t(1220)](this._drawDelEventType,this[t(e._0x5083b7)],this)}[_0x5e32ae(2655)](e){const t={_0x3e9e0e:1761,_0x4d57c0:1761,_0x3febe3:3402,_0x12c059:2776},i=_0x5e32ae;if(!(this._positions_draw[i(3402)]<2)&&!e){const s=formatNum$1(Cesium__namespace.Cartesian3.distance(this[i(t._0x3e9e0e)][0],this._positions_draw[1]),2);this.style.radii_x=s,this.style.radii_z=s;let n;this[i(t._0x4d57c0)][i(t._0x3febe3)]===3?n=formatNum$1(Cesium__namespace.Cartesian3[i(t._0x12c059)](this[i(t._0x4d57c0)][0],this._positions_draw[2]),2):n=s,this.style.radii_y=n,this[i(2502)](this.style)}}_onRightClickHandler(e){const t={_0x24b165:1761,_0x2ae0cf:4114},i=_0x5e32ae;super._onRightClickHandler(e),this[i(4114)].radii_y=0,this[i(t._0x24b165)].length===1&&(this.style.radii_x=0,this[i(4114)][i(2537)]=0),this.updateRadii(this[i(t._0x2ae0cf)])}addScanPlane(e={}){const t={_0x4386f0:4114,_0x28935f:4114,_0x2c7170:561,_0x1191a7:2092,_0x3e7bb8:3776,_0x43100a:4114,_0x1e0884:1286,_0x2277dd:2625,_0x1a0856:4114,_0x167a29:2622,_0x5dfdb7:1193,_0x454578:1567,_0x23bbac:4175,_0x3e297:1124,_0x341afb:1443},i={_0x11f5d2:1050,_0x2f83d6:2622},s={_0x240303:1890,_0x4630b2:2911,_0x41224a:4043},n=_0x5e32ae;this._entity_scanPlane=this._entity_scanPlane||[],e[n(t._0x4386f0)]=e.style||{};const o={radii:this.entityGraphic.radii,innerRadii:1e-5,minimumClockDegree:-1e-5,maximumClockDegree:1e-5,minimumConeDegree:this[n(t._0x28935f)].minimumConeDegree||0,maximumConeDegree:this.style[n(t._0x2c7170)]||90,outline:![]};this.style.color?(o[n(t._0x1191a7)]=this.style[n(2092)],this.style.opacity&&(o[n(t._0x3e7bb8)]=this.style.opacity)):this[n(4114)][n(2021)]&&(o[n(t._0x1191a7)]=this.style.outlineColor,this.style.outlineOpacity&&(o.opacity=this.style.outlineOpacity));let c;const _=Cesium__namespace.Math.toRadians(e.step||.5),l=new Cesium__namespace[n(3064)](Cesium__namespace[n(1286)][n(1567)](e[n(t._0x43100a)].heading||this[n(3977)]),Cesium__namespace[n(t._0x1e0884)].toRadians(e.style[n(t._0x2277dd)]||this[n(2625)]),Cesium__namespace[n(t._0x1e0884)].toRadians(e[n(t._0x1a0856)].roll||this.roll));let h=Cesium__namespace.Transforms[n(4043)](this[n(t._0x167a29)],l);switch(e.type){case"pitch":{const g=Cesium__namespace.Math.toRadians(e[n(t._0x5dfdb7)]??0),C=Cesium__namespace[n(t._0x1e0884)][n(t._0x454578)](e.max??180);c=new Cesium__namespace.CallbackProperty(E=>{const P=n;return this[P(s._0x240303)].clock.shouldAnimate&&(l.pitch+=_,l.pitch>=C&&(l[P(2625)]=g),h=Cesium__namespace[P(s._0x4630b2)][P(s._0x41224a)](this.positionShow,l)),h},![])}break;case n(t._0x23bbac):{const g=Cesium__namespace.Math.toRadians(e[n(1193)]??-90),C=Cesium__namespace[n(1286)].toRadians(e[n(t._0x3e297)]??90);c=new Cesium__namespace.CallbackProperty(E=>{const P=n;return this._map.clock.shouldAnimate&&(l.roll+=_,l.roll>=C&&(l[P(4175)]=g),h=Cesium__namespace.Transforms.headingPitchRollQuaternion(this[P(2622)],l)),h},![])}break;case"heading":default:{const g=Cesium__namespace.Math.toRadians(e.min??-180),C=Cesium__namespace.Math.toRadians(e[n(1124)]??180);c=new Cesium__namespace.CallbackProperty(E=>{const P=n;return this._map.clock[P(i._0x11f5d2)]&&(l.heading+=_,l[P(3977)]>=C&&(l.heading=g),h=Cesium__namespace.Transforms.headingPitchRollQuaternion(this[P(i._0x2f83d6)],l)),h},![]);break}}const f={id:"scanPlane-"+createGuid(),position:this.position,orientation:c,ellipsoid:EllipsoidStyleConver.toCesiumVal({...o,...e[n(4114)]},{},!![])},m=this._createEntity(f);return this[n(t._0x341afb)]&&this.isAdded&&this[n(t._0x341afb)].entities.add(m),this.bindPickId(m),m._planeOptions=e,this._entity_scanPlane[n(3759)](m),m}[_0x5e32ae(3389)](e){this[_0x5e32ae({_0xe6aa6f:1443}._0xe6aa6f)]&&this.isAdded&&this.dataSource.entities.remove(e),removeArrayItem(this._entity_scanPlane,e)}removeAllScanPlan(){const e=_0x5e32ae;this[e(1443)]&&this.isAdded&&this[e(813)].forEach(t=>{this.dataSource.entities.remove(t)}),this._entity_scanPlane=[]}}register$4("ellipsoid",EllipsoidEntity,!![]);class PolylineEntity extends BasePolyEntity{get entityGraphic(){const e=_0x5e32ae;var t;return(t=this[e(3579)])===null||t===void 0?void 0:t.polyline}_mountedHook(){const e={_0x32410d:4114},t=_0x5e32ae;this._positions_show=this.getShowPositions(this.positions);const i={polyline:PolylineStyleConver.toCesiumVal(this.style,{},!![])};i.polyline.positions=this._positions_show,this[t(3579)]=this._createEntity(i),this[t(e._0x32410d)].label&&this[t(2510)]()}getShowPositions(e){const t=_0x5e32ae;return this.style.closure&&(e==null?void 0:e[t(3402)])>0?e.concat(e[0]):e}[_0x5e32ae(3978)](e,t){return PolylineStyleConver.toJSON(e,t,!![])}_updateStyleHook(e,t){const i={_0x5724df:1268,_0x6e383d:2325,_0x57d74d:3270},s=_0x5e32ae;PolylineStyleConver[s(i._0x5724df)](e,this.entityGraphic,!![]),Cesium__namespace.defined(t==null?void 0:t[s(i._0x6e383d)])&&(!this[s(566)]&&(this[s(3214)]=this.getShowPositions(this[s(i._0x57d74d)]),this[s(2189)].positions=this._positions_show),this.updateAttrForDrawing())}_updatePositionsHook(){const e={_0x55703c:3703,_0x21ca12:3214},t=_0x5e32ae;this._positions instanceof Cesium__namespace[t(e._0x55703c)]?this.entityGraphic.positions=this._positions:(this._positions_show=this.getShowPositions(this._positions),this[t(2189)].positions=this[t(e._0x21ca12)]),this._updateLabelPosition(),this._updateEditDraggers()}_positions_CallbackProperty(){return this._positions_show}updateAttrForDrawing(e){const t={_0x168f08:3800,_0xd7f469:2436},i=_0x5e32ae;Cesium__namespace[i(515)](this.entityGraphic[i(t._0x168f08)])&&(this.entityGraphic[i(t._0xd7f469)]=this[i(2779)]()),this._positions_show=this.getShowPositions(this._positions_draw)}[_0x5e32ae(1940)](){super._stopDrawHook(),Cesium__namespace.defined(this.entityGraphic.depthFailMaterial)&&(this.positions=this._positions_draw)}_updateDistanceDisplayConditionByEdit(){const e={_0x328a99:4064},t=_0x5e32ae;if(this._isCallbackPositions&&this.style.clampToGround){let i;const s=this[t(e._0x328a99)];s?i=Cesium__namespace.Cartesian3[t(2776)](s,new Cesium__namespace.Cartesian3):i=(Cesium__namespace[t(2597)].WGS84.minimumRadius+Cesium__namespace[t(2597)].WGS84.maximumRadius)/2,this.updateDistanceDisplayCondition(i)}else this[t(1469)]()}}register$4("polyline",PolylineEntity);class CurveEntity extends PolylineEntity{getShowPositions(e){const t={_0x5ecb95:4114},i=_0x5e32ae;return!e||e.length<2?e:getBezierCurve(e,this[i(t._0x5ecb95)])}}register$4(_0x5e32ae(3321),CurveEntity);class EditPolylineVolume extends EditPoly{}class PolylineVolumeEntity extends BasePolyEntity{get[_0x5e32ae(2189)](){const e={_0x13701f:3579},t=_0x5e32ae;var i;return(i=this[t(e._0x13701f)])===null||i===void 0?void 0:i.polylineVolume}get[_0x5e32ae(1198)](){return EditPolylineVolume}_mountedHook(){const e=_0x5e32ae,t={polylineVolume:PolylineVolumeStyleConver.toCesiumVal(this.style,{},!![])};t[e(2322)].positions=this.positions,this._entity=this._createEntity(t),this[e(4114)][e(736)]&&this._addLabel()}[_0x5e32ae(3978)](e,t){return PolylineVolumeStyleConver[_0x5e32ae({_0x54a805:3852}._0x54a805)](e,t,!![])}[_0x5e32ae(3601)](e,t){PolylineVolumeStyleConver.toCesiumVal(e,this.entityGraphic,!![])}[_0x5e32ae(4119)](){const e=_0x5e32ae;this.entityGraphic.positions=this[e(2436)],this._updateLabelPosition(),this[e(3115)]()}}register$4(_0x5e32ae(2322),PolylineVolumeEntity);class PathEntity extends BasePointEntity{constructor(e={}){const t={_0x5d83de:4009},i=_0x5e32ae;super(e),delete this[i(4244)],this[i(t._0x5d83de)]=![]}get entityGraphic(){var e;return(e=this._entity)===null||e===void 0?void 0:e.path}get orientationShow(){const e={_0x11dffb:1949},t=_0x5e32ae;return Cesium__namespace[t(2472)].getValueOrUndefined(this.orientation,this._map[t(e._0x11dffb)][t(837)],new Cesium__namespace.Quaternion)}get[_0x5e32ae(526)](){return getHeadingPitchRollByOrientation(this.positionShow,this.orientationShow)}get[_0x5e32ae(2625)](){return this[_0x5e32ae(4114)].pitch??0}set[_0x5e32ae(2625)](e){const t={_0x39361b:2494},i=_0x5e32ae;this.style.pitch=e,this[i(t._0x39361b)]()}get roll(){const e=_0x5e32ae;return this[e(4114)][e(4175)]??0}set roll(e){this.style.roll=e,this.updateOrientation()}get positions(){return this._positions}set positions(e){const t=_0x5e32ae;if(!e)return;const i=new Cesium__namespace[t(1160)];e.forEach((s,n)=>{const o=t,c=Cesium__namespace[o(527)].fromDate(new Date(s[3]));i[o(4014)](c,Cesium__namespace.Cartesian3.fromDegrees(s[0],s[1],s[2]))}),this.position=i}get coordinates(){return this[_0x5e32ae({_0x2f26df:3276}._0x2f26df)]()}_updatePositionsHook(){const e={_0x15d4b8:2180,_0x359c68:3402,_0x386ea8:3402,_0x169bd1:3579},t=_0x5e32ae;if(super._updatePositionsHook(),!this[t(e._0x15d4b8)]||this.position instanceof Cesium__namespace.Cartesian3)this._entity.orientation=void 0,this._entity[t(1333)]=void 0;else{var i,s,n;if(this[t(3798)]._auto_orientation&&(this._entity.orientation=new Cesium__namespace.VelocityOrientationProperty(this.position)),this.options[t(2846)]&&((i=this.position)===null||i===void 0||(s=i[t(3164)])===null||s===void 0||(n=s._times)===null||n===void 0?void 0:n[t(e._0x359c68)])>0){var o;const c=this.position[t(3164)]._times,_=c[0];let l=c[c[t(e._0x386ea8)]-1];((o=this.position)===null||o===void 0?void 0:o.forwardExtrapolationType)===Cesium__namespace.ExtrapolationType.HOLD&&(l=Cesium__namespace.JulianDate.fromDate(new Date(2100,1,1))),this[t(e._0x169bd1)].availability=new Cesium__namespace.TimeIntervalCollection([new Cesium__namespace[t(4164)]({start:_,stop:l})])}}}[_0x5e32ae(3118)](){const e={_0x10e14f:3798,_0xf86dcb:3835,_0x5b1190:2846,_0x122254:762,_0x51cea3:527,_0x33b2c7:527,_0x50392f:3605,_0x1319a5:3381,_0x1a08e7:833},t=_0x5e32ae;this.position&&!this.options[t(908)]&&(this.options.orientation=new Cesium__namespace.VelocityOrientationProperty(this.position),this._auto_orientation=!![]);const i={position:this.position,orientation:this.options.orientation,path:PathStyleConver.toCesiumVal(this[t(4114)]||this.options.path,{},!![])};if(!this[t(e._0x10e14f)].availability){var s,n,o;if(((s=this.position)===null||s===void 0||(n=s[t(3164)])===null||n===void 0||(o=n._times)===null||o===void 0?void 0:o[t(3402)])>0){var c;const l=this.position[t(3164)]._times,h=l[0];let f=l[l.length-1];((c=this[t(2180)])===null||c===void 0?void 0:c[t(e._0xf86dcb)])===Cesium__namespace.ExtrapolationType[t(3249)]&&(f=Cesium__namespace.JulianDate.fromDate(new Date(2100,1,1))),i.availability=new Cesium__namespace.TimeIntervalCollection([new Cesium__namespace.TimeInterval({start:h,stop:f})]),this[t(e._0x5b1190)]=!![]}else{var _;const l=this._map.clock.currentTime;let h=Cesium__namespace.JulianDate.addDays(l,1,new Cesium__namespace.JulianDate);((_=this.position)===null||_===void 0?void 0:_.forwardExtrapolationType)===Cesium__namespace[t(e._0x122254)].HOLD&&(h=Cesium__namespace[t(e._0x51cea3)].addDays(h,365,new Cesium__namespace[t(e._0x33b2c7)])),i.availability=new Cesium__namespace.TimeIntervalCollection([new Cesium__namespace.TimeInterval({start:l,stop:h})])}}if(this.options.label&&(this[t(e._0x10e14f)].label.text=this.options.label.text||this[t(e._0x50392f)],i.label=LabelStyleConver.toCesiumVal(this.options.label)),this[t(3798)].billboard&&(i[t(2747)]=BillboardStyleConver.toCesiumVal(this.options.billboard)),this[t(3798)].point&&(i.point=PointStyleConver.toCesiumVal(this[t(3798)][t(e._0x1319a5)])),this.options[t(e._0x1a08e7)]&&(i[t(2782)]=CircleStyleConver.toCesiumVal(this[t(3798)].circle,{},!![])),this.options.model){i[t(2927)]=ModelStyleConver.toCesiumVal(this[t(3798)].model,{},!![]);const l=this[t(3798)][t(2927)];(l.mergeOrientation||!Cesium__namespace.defined(l[t(3977)])||!Cesium__namespace.defined(l.pitch)||!Cesium__namespace.defined(l[t(4175)]))&&(i.orientation=new Cesium__namespace[t(3703)](h=>this._getCustomQuaternion(this.position,this.options.orientation),![]))}this[t(3579)]=this._createEntity(i)}_getCustomQuaternion(e,t){const i={_0x54c37c:810,_0x4423d9:1890,_0x4a537c:2927,_0x33e6c1:2293,_0x50efd8:515,_0x48275c:4175,_0x369a2b:4043},s=_0x5e32ae;var n,o;if(e[s(i._0x54c37c)]){var c,_;e=e[s(810)]((c=this._map)===null||c===void 0||(_=c.clock)===null||_===void 0?void 0:_.currentTime)}if(t[s(810)]){var l,h;t=t[s(810)]((l=this[s(i._0x4423d9)])===null||l===void 0||(h=l.clock)===null||h===void 0?void 0:h.currentTime)}const f=this.options[s(i._0x4a537c)];let m=Cesium__namespace.Math.toRadians(f.heading||0),g=Cesium__namespace[s(1286)].toRadians(f[s(2625)]||0),C=Cesium__namespace.Math.toRadians(f.roll||0);if(t){const E=getHeadingPitchRollByOrientation(e,t);f[s(i._0x33e6c1)]?(m+=E.heading,C+=E.roll,g+=E.pitch):(!Cesium__namespace.defined(f.heading)&&(m=E[s(3977)]),!Cesium__namespace[s(i._0x50efd8)](f.roll)&&(C=E[s(i._0x48275c)]),!Cesium__namespace.defined(f.pitch)&&(g=E.pitch))}return Cesium__namespace.Transforms[s(i._0x369a2b)](e,new Cesium__namespace.HeadingPitchRoll(m,g,C),(n=this[s(1890)])===null||n===void 0||(o=n.scene)===null||o===void 0?void 0:o.globe.ellipsoid)}[_0x5e32ae(4263)](){const e={_0x2632ef:3798,_0x2b922b:2357,_0x41a660:1333,_0x52f27a:2180},t=_0x5e32ae;if(this[t(e._0x2632ef)]){if(this._maxCacheCount=this.options.maxCacheCount??50,!this[t(2180)]){const s=new Cesium__namespace.SampledPositionProperty(this.options.referenceFrame);if(s.forwardExtrapolationType=this.options.forwardExtrapolationType??Cesium__namespace[t(762)][t(3249)],s.backwardExtrapolationType=this.options.backwardExtrapolationType??Cesium__namespace.ExtrapolationType.HOLD,!this.options.orientation&&(this.options.orientation=new Cesium__namespace[t(3111)](s),this[t(3579)]&&(this._entity.orientation=this.getOrientation())),this._entity&&!this._entity.availability&&this[t(1890)]){var i;const n=this._map.clock.currentTime;let o=Cesium__namespace.JulianDate.addDays(n,1,new Cesium__namespace.JulianDate);((i=this[t(2180)])===null||i===void 0?void 0:i.forwardExtrapolationType)===Cesium__namespace.ExtrapolationType.HOLD&&(o=Cesium__namespace.JulianDate[t(e._0x2b922b)](o,365,new Cesium__namespace.JulianDate)),this._entity[t(e._0x41a660)]=new Cesium__namespace.TimeIntervalCollection([new Cesium__namespace.TimeInterval({start:n,stop:o})])}this[t(2180)]=s}this.property=this[t(e._0x52f27a)]}}_updateStyleHook(e,t){const i={_0x766e83:1268},s=_0x5e32ae;PathStyleConver[s(i._0x766e83)](e,this[s(2189)],{},!![])}_style2Json(e,t){return PathStyleConver[_0x5e32ae(3852)](e,t,!![])}[_0x5e32ae(879)](e){return{type:"LineString",coordinates:this[_0x5e32ae(3276)](e==null?void 0:e.noAlt)}}_getJsonPositions(e){const t={_0xce7978:2436},i=_0x5e32ae;e[i(t._0xce7978)]=this.getCoordinates()}[_0x5e32ae(3488)](e){const t={_0x5054fe:3381,_0x101a70:3798,_0x3a9f09:833,_0xcf1430:3852},i=_0x5e32ae;this.options.label&&(e.label={},LabelStyleConver[i(3852)](this.options.label,e.label,!![])),this[i(3798)].model&&(e.model={},ModelStyleConver.toJSON(this.options[i(2927)],e.model,!![])),this.options.billboard&&(e[i(2747)]={},BillboardStyleConver.toJSON(this.options.billboard,e.billboard,!![])),this.options[i(t._0x5054fe)]&&(e.point={},PointStyleConver.toJSON(this.options[i(3381)],e.point,!![])),this[i(t._0x101a70)][i(833)]&&(e[i(t._0x3a9f09)]={},CircleStyleConver[i(t._0xcf1430)](this[i(3798)].circle,e.circle,!![]))}[_0x5e32ae(437)](e,t){const i={_0x11913c:2747},s=_0x5e32ae;t.label&&LabelStyleConver.toCesiumVal(e.label,this._entity.label,this),t.model&&ModelStyleConver[s(1268)](e.model,this._entity.model,!![]),t.billboard&&BillboardStyleConver.toCesiumVal(e[s(i._0x11913c)],this._entity[s(2747)],!![]),t.point&&PointStyleConver.toCesiumVal(e[s(3381)],this._entity.point,!![]),t.circle&&CircleStyleConver[s(1268)](e.circle,this._entity.ellipse,!![])}[_0x5e32ae(3328)](e){const t={_0x58507b:2747,_0x23d68b:3381,_0x4b05cf:1268},i=_0x5e32ae;this._entity.model&&(this._entity.model[i(2092)]=Cesium__namespace.Color.WHITE[i(3518)](e)),this._entity.billboard&&(this._entity[i(t._0x58507b)].color=Cesium__namespace[i(2200)].WHITE.withAlpha(e)),this._entity[i(3381)]&&!this._updateEntityOpacity(this._entity[i(t._0x23d68b)],e)&&PointStyleConver[i(t._0x4b05cf)]({...this.options.point,globalAlpha:e},this._entity.point,!![]),this._entity.circle&&!this._updateEntityOpacity(this._entity.circle,e)&&CircleStyleConver.toCesiumVal({...this.options.circle,globalAlpha:e},this._entity.ellipse,!![])}getIndex(e){const t=_0x5e32ae;var i,s,n,o;const c=(i=this.position)===null||i===void 0||(s=i[t(3164)])===null||s===void 0?void 0:s._times,_=c[t(3402)];if(_===0)return 0;const l=e||((n=this._map)===null||n===void 0||(o=n.clock)===null||o===void 0?void 0:o[t(837)])||Cesium__namespace.JulianDate.now();let h=Cesium__namespace.binarySearch(c,l,Cesium__namespace.JulianDate.compare);return h<0&&(h=~h),h<0&&(h=0),h>=_&&(h=_-1),h}getRectangle(e){const t={_0x3ef38c:3164},i=_0x5e32ae;var s,n,o,c;const _=(s=this.position)===null||s===void 0||(n=s[i(t._0x3ef38c)])===null||n===void 0?void 0:n._times,l=(o=this.position)===null||o===void 0||(c=o._property)===null||c===void 0?void 0:c._values;if(!_||_[i(3402)]===0)return;const h=[];for(let m=0,g=_.length;m<g;m++)h.push(new Cesium__namespace.Cartesian3(l[m*3],l[m*3+1],l[m*3+2]));return getRectangle(h,e==null?void 0:e.isFormat)}getCoordinates(e){const t={_0x1b04e7:3402,_0x31a923:3916},i=_0x5e32ae;var s,n,o,c;const _=(s=this[i(2180)])===null||s===void 0||(n=s[i(3164)])===null||n===void 0?void 0:n._times,l=(o=this[i(2180)])===null||o===void 0||(c=o[i(3164)])===null||c===void 0?void 0:c._values;if(!_||_[i(t._0x1b04e7)]===0)return[];const h=[];for(let f=0,m=_.length;f<m;f++){const g=LngLatPoint.fromCartesian(new Cesium__namespace[i(t._0x31a923)](l[f*3],l[f*3+1],l[f*3+2])),C=g.toArray(e);C.push(Cesium__namespace.JulianDate[i(1455)](_[f])[i(3906)]()),h[i(3759)](C)}return h}flyToPoint(e={}){const t={_0x137146:4056},i=_0x5e32ae;if(!this._map)return Promise[i(t._0x137146)](![]);const s=this.positionShow;if(!s)return Promise.resolve(![]);let n;if(Cesium__namespace.defined(e.heading)){var o;n=e.heading+Cesium__namespace.Math.toDegrees(((o=this.hpr)===null||o===void 0?void 0:o.heading)||0)}return this._map.flyToPoint(s,{...e,heading:n})}}register$4(_0x5e32ae(1018),PathEntity,!![]);class EditCorridor extends EditPoly{[_0x5e32ae(3156)](e){if(this[_0x5e32ae(2189)].height!==void 0){const i=getCesiumValue(this.entityGraphic.height,Number,this._map.clock.currentTime);e=setPositionsHeight(e,i)}return e}[_0x5e32ae(1470)](e){const t=_0x5e32ae;return this[t(2825)]&&(e.position=getSurfacePosition(this[t(1890)].scene,e.position)),super.createDragger(e)}_updateMoveAllHook(e){const t={_0x3aab33:3865,_0x228a43:2189},i=_0x5e32ae;if(this.clampToGround)return;const s=Cesium__namespace.Cartographic.fromCartesian(e)[i(t._0x3aab33)];this[i(t._0x228a43)].height=s,this.style.height=this.formatNum(s,2)}[_0x5e32ae(2174)](e){const t=_0x5e32ae;this.entityGraphic.height=e,this.style.height=this.formatNum(e,2);const i=this[t(2436)];for(let s=0,n=i.length;s<n;s++)i[s]=setPositionsHeight(i[s],e);for(let s=0,n=this.draggers.length;s<n;s++){const o=this[t(4209)][s];o.position=setPositionsHeight(o[t(2180)],e)}this.fire(EventType.editStyle)}}class CorridorEntity extends BasePolyEntity{get[_0x5e32ae(2189)](){var e;return(e=this._entity)===null||e===void 0?void 0:e.corridor}get[_0x5e32ae(1198)](){return EditCorridor}[_0x5e32ae(3118)](){const e={_0x356ca5:2436,_0x202355:4114},t=_0x5e32ae,i={corridor:CorridorStyleConver[t(1268)](this.style,{},!![])};i.corridor[t(e._0x356ca5)]=this.positions,this._entity=this._createEntity(i),this[t(e._0x202355)].label&&this._addLabel()}_style2Json(e,t){return CorridorStyleConver.toJSON(e,t,!![])}_updateStyleHook(e,t){const i={_0x257692:2189},s=_0x5e32ae;CorridorStyleConver.toCesiumVal(e,this[s(i._0x257692)],!![]),t&&(Cesium__namespace.defined(t.diffHeight)||Cesium__namespace[s(515)](t.height))&&this._updateHeight()}[_0x5e32ae(4119)](){const e={_0x2307d8:3115},t=_0x5e32ae;this.entityGraphic.positions=this.positions,this._updateLabelPosition(),this[t(e._0x2307d8)]()}_updateHeight(e=!![]){const t={_0x566080:515,_0x3da0d2:3865,_0x5e6197:2999,_0x19d922:4114},i=_0x5e32ae;if(this.style.clampToGround)return;let s=0;e&&Cesium__namespace[i(t._0x566080)](this.style[i(t._0x3da0d2)])?s=this[i(4114)].height:s=getMaxHeight(this[i(1761)]||this._positions),this.entityGraphic.height=s,this.style[i(t._0x3da0d2)]=s,Cesium__namespace.defined(this.style.diffHeight)&&(Cesium__namespace.defined(this.style.diffHeight)&&this.style[i(t._0x5e6197)]!==0?this.entityGraphic[i(2607)]=s+this[i(t._0x19d922)].diffHeight:this.entityGraphic.extrudedHeight=void 0)}[_0x5e32ae(2655)](e){const t={_0x5113f2:4114,_0x344325:1761,_0x2217f0:3865,_0x512c9c:4114,_0x1608d3:2189,_0x2081d5:2189},i=_0x5e32ae;if(e)this[i(2174)]();else if(!this[i(t._0x5113f2)].clampToGround){const s=getMaxHeight(this[i(t._0x344325)]);s!==0&&(this[i(2189)][i(t._0x2217f0)]=s,this[i(t._0x512c9c)].height=s,Cesium__namespace.defined(this[i(t._0x512c9c)].diffHeight)&&(Cesium__namespace[i(515)](this.style.diffHeight)&&this.style.diffHeight!==0?this[i(t._0x1608d3)][i(2607)]=s+Number(this.style.diffHeight):this[i(t._0x2081d5)].extrudedHeight=void 0))}}}register$4("corridor",CorridorEntity);class EditWall extends EditPoly{bindDraggers(){const e={_0x4f764c:3759,_0x4bcce9:1739,_0x4208e5:2388},t={_0x527d75:4063},i={_0x132bff:2436},s={_0xa783bc:1723,_0x4deb56:2999,_0x137c04:4063,_0x3183ae:760},n=_0x5e32ae,o=this.positions,c=this.style,_=this.hasMidPoint;for(let l=0,h=o.length;l<h;l++){const f=o[l],m=this.createDragger({position:f,onDrag:(g,C)=>{const E=_0x5210;o[g.index]=C,this[E(1723)]&&this._heightDraggers.length>0&&(this[E(s._0xa783bc)][g.index].position=addPositionsHeight(C,c[E(s._0x4deb56)])),_&&(g[E(4063)]>0&&(this.draggers[g.index*2-1].position=getMidpoint(C,o[g.index-1],new Cesium__namespace.Cartesian3)),g[E(s._0x137c04)]<o.length-1&&(this[E(4209)][g.index*2+1][E(2180)]=getMidpoint(C,o[g[E(s._0x137c04)]+1])));const P=centerOfMass(o);this[E(s._0x3183ae)].position=P}});if(m.index=l,this.draggers[n(e._0x4f764c)](m),this.hasMidPoint&&(this[n(e._0x4bcce9)]||!this.hasClosure&&l<h-1)){const g=(l+1)%h,C=getMidpoint(f,o[g]),E=this.createDragger({position:C,type:PointType[n(e._0x4208e5)],tooltip:this._map.getLangText(n(449)),onDragStart:(P,w)=>{const M=n;this[M(i._0x132bff)].splice(P[M(4063)],0,w),this.updateAttrForEditing()},onDrag:(P,w)=>{const M=n;this.positions[P[M(t._0x527d75)]]=w},onDragEnd:(P,w)=>{this._fireAddPoint(P,w),this.updateDraggers()}});E.index=g,this.draggers[n(3759)](E)}}this._bindMoveAllDragger(),this._bindHeightDraggers()}_bindHeightDraggers(){const e={_0x46ac61:1470,_0x47e56c:3565,_0x12acf3:1723},t={_0x11a451:3236,_0x4a3454:4114,_0x156394:3284,_0x4c69db:4063,_0x56170c:2999},i=_0x5e32ae;if(!this._graphic._hasHeightEdit)return;this._heightDraggers=[];const s=this.positions,n=Number(this.style.diffHeight);for(let o=0,c=s.length;o<c;o++){const _=addPositionsHeight(s[o],n),l=this[i(e._0x46ac61)]({position:_,type:PointType[i(e._0x47e56c)],tooltip:this[i(1890)][i(4296)]("_修改高度"),onDrag:(h,f)=>{const m=i,g=Cesium__namespace.Cartographic[m(t._0x11a451)](f).height;this[m(t._0x4a3454)].diffHeight=formatNum$1(g-this[m(t._0x156394)]._minimumHeights[h[m(t._0x4c69db)]],2);for(let C=0;C<s.length;C++)C!==h[m(t._0x4c69db)]&&(this._heightDraggers[C].position=addPositionsHeight(s[C],this[m(t._0x4a3454)][m(t._0x56170c)]));this[m(3742)](),this.fire(EventType.editStyle)}});l.index=o,this.draggers.push(l),this[i(e._0x12acf3)][i(3759)](l)}}}class WallEntity extends BasePolyEntity{get[_0x5e32ae(2189)](){var e;return(e=this._entity)===null||e===void 0?void 0:e.wall}get EditClass(){return EditWall}_mountedHook(){const e={_0x1f45b6:2325,_0x5c35f3:4114,_0x3ceb48:3579,_0x16eec1:2510},t=_0x5e32ae;var i;this.style.diffHeight=this.style.diffHeight||100;const s={wall:WallStyleConver.toCesiumVal(this[t(4114)],{},!![])};this[t(4114)][t(e._0x1f45b6)]&&((i=this[t(2436)])===null||i===void 0?void 0:i.length)>0?s[t(3795)].positions=this.positions[t(3611)](this.positions[0]):s.wall.positions=this.positions,(!this.style.maximumHeights||!this[t(e._0x5c35f3)].minimumHeights)&&this._updateMaxMinHeights(s),this[t(e._0x3ceb48)]=this._createEntity(s),this.style.label&&this[t(e._0x16eec1)]()}[_0x5e32ae(3978)](e,t){return WallStyleConver.toJSON(e,t,!![])}_updateStyleHook(e,t){const i={_0x2b27cc:515},s=_0x5e32ae;WallStyleConver[s(1268)](e,this.entityGraphic,!![]),Cesium__namespace[s(i._0x2b27cc)](t[s(2325)])&&this._updatePositionsHook(),Cesium__namespace[s(515)](t==null?void 0:t.diffHeight)&&this[s(1390)](this._entity)}[_0x5e32ae(4119)](){const e={_0x2fcd07:4114,_0x48f947:2436},t=_0x5e32ae;var i;this[t(e._0x2fcd07)][t(2325)]&&((i=this.positions)===null||i===void 0?void 0:i.length)>0?this.entityGraphic[t(2436)]=this.positions.concat(this.positions[0]):this[t(2189)].positions=this[t(e._0x48f947)],(!this.style.maximumHeights||!this.style.minimumHeights)&&this._updateMaxMinHeights(this._entity),this._updateLabelPosition(),this._updateEditDraggers()}[_0x5e32ae(1390)](e){const t={_0x559355:4114},i=_0x5e32ae,s=this.points;if(!s||s.length===0)return;const n=s.length,o=new Array(n),c=new Array(n);for(let _=0;_<n;_++){const l=s[_].alt;o[_]=l,this.style.fixedTop?c[_]=s[0].alt+this.style[i(2999)]:c[_]=l+this.style.diffHeight}this[i(t._0x559355)].closure&&n>0&&(o.push(o[0]),c[i(3759)](c[0])),this._minimumHeights=o,this[i(1765)]=c,e&&(!(e.wall.minimumHeights instanceof Cesium__namespace[i(3703)])&&(e.wall.minimumHeights=o),!(e.wall.maximumHeights instanceof Cesium__namespace.CallbackProperty)&&(e[i(3795)].maximumHeights=c))}_setPositionsToCallback(){const e={_0x151960:566,_0x20fe94:2189},t=_0x5e32ae;this[t(e._0x151960)]||(super._setPositionsToCallback(),this[t(e._0x20fe94)].minimumHeights=new Cesium__namespace.CallbackProperty(i=>this._minimumHeights,![]),this.entityGraphic.maximumHeights=new Cesium__namespace[t(3703)](i=>this._maximumHeights,![]))}[_0x5e32ae(2779)](){const e={_0x428da2:4114,_0x4bb17d:1761},t=_0x5e32ae;var i;return this[t(e._0x428da2)][t(2325)]&&((i=this[t(1761)])===null||i===void 0?void 0:i.length)>0?this[t(1761)].concat(this._positions_draw[0]):this[t(e._0x4bb17d)]}[_0x5e32ae(1127)](){const e=_0x5e32ae;this._isCallbackPositions&&(super._cancelPositionsCallback(),this[e(2189)].minimumHeights=this._minimumHeights,this[e(2189)].maximumHeights=this._maximumHeights)}[_0x5e32ae(2655)](e){this[_0x5e32ae(1390)](this._entity)}}register$4(_0x5e32ae(3795),WallEntity);class EditRectangle extends EditPoly{bindDraggers(){const e={_0x1faa12:1481},t={_0xe8d44d:1949,_0x5c39ca:2189,_0x3fc421:2180},i=_0x5e32ae,s=this.positions;for(let n=0,o=s.length;n<o;n++){const c=this.updatePositionsHeightByAttr(s[n]),_=this[i(1470)]({position:c,onDrag:(l,h)=>{const f=i,m=this._map[f(t._0xe8d44d)].currentTime,g=getCesiumValue(this.entityGraphic.height,Number,m);if(this.positions[l.index]=h,this[f(t._0x5c39ca)].height!==void 0)for(let E=0,P=this.draggers[f(3402)];E<P;E++){const w=this[f(4209)][E],M=setPositionsHeight(this.positions[w.index],g);w.position=M,this.positions[w.index]=M}if(this._heightDraggers&&this[f(1723)][f(3402)]>0){const E=getCesiumValue(this[f(2189)].extrudedHeight,Number,m);this._heightDraggers[l.index][f(t._0x3fc421)]=setPositionsHeight(h,E)}let C=centerOfMass(this.positions);C=this.updatePositionsHeightByAttr(C),this._draggerMove.position=C}});_.index=n,this.draggers.push(_)}this[i(e._0x1faa12)](),this.entityGraphic[i(2607)]&&this[i(1132)]()}updatePositionsHeightByAttr(e){const t={_0xdefba0:837},i=_0x5e32ae;if(this.clampToGround&&(e=getSurfacePosition(this[i(1890)].scene,e)),this.entityGraphic.height!==void 0){const s=getCesiumValue(this.entityGraphic.height,Number,this._map.clock[i(t._0xdefba0)]);e=setPositionsHeight(e,s)}return e}_updateHeight(e){const t={_0x503eb5:2436,_0x36520a:1404},i=_0x5e32ae;this.entityGraphic[i(3865)]=e,this.style.height=this[i(3669)](e,2);const s=this[i(t._0x503eb5)];for(let n=0,o=s.length;n<o;n++)s[n]=setPositionsHeight(s[n],e);for(let n=0,o=this.draggers.length;n<o;n++){const c=this.draggers[n];c.position=setPositionsHeight(c.position,e)}this[i(t._0x36520a)](EventType.editStyle)}}class RectangleEntity extends BasePolyEntity{constructor(e={}){const t={_0x2c6fa6:1452,_0x150df7:1323,_0x293efc:2854},i=_0x5e32ae;super(e),this._minPointNum=2,this[i(2231)]=2,this[i(t._0x2c6fa6)]=!![],this[i(3798)][i(t._0x150df7)]?this[i(t._0x293efc)]=this.options.rectangle:this[i(3798)].coordinates&&(this._rectangle=this.options.coordinates)}get entityGraphic(){const e={_0x4ac036:1323},t=_0x5e32ae;var i;return(i=this._entity)===null||i===void 0?void 0:i[t(e._0x4ac036)]}get EditClass(){return EditRectangle}get center(){const e={_0x470364:3324},t=_0x5e32ae,i=getCesiumValue(this.rectangle);return i?Cesium__namespace[t(3026)].toCartesian(Cesium__namespace[t(e._0x470364)][t(4064)](i)):null}get outlinePositions(){const e=_0x5e32ae;return this._entity&&(this[e(708)]=getOutlinePositions(this._entity)),this._outlinePositions}set outlinePositions(e){this._outlinePositions=e}get outlineCoordinates(){return cartesians2lonlats(this[_0x5e32ae({_0x1d4dea:466}._0x1d4dea)])}get rectangle(){const e=_0x5e32ae;return!this._rectangle&&this.positions&&(this[e(2854)]=Cesium__namespace.Rectangle.fromCartesianArray(this.positions)),this[e(2854)]}set[_0x5e32ae(1323)](e){const t={_0x400071:3799,_0x59182a:2189},i=_0x5e32ae;var s;(s=this[i(3881)])!==null&&s!==void 0&&s[i(968)]&&!(e instanceof Cesium__namespace.CallbackProperty)?this[i(t._0x400071)]=e:(this._rectangle=e,this._entity&&(this[i(t._0x59182a)].coordinates=e))}get points(){const e={_0x1ef251:3270,_0x19a92c:3579},t={_0xa1939e:1426},i=_0x5e32ae,s=[];let n;return this._positions_draw?n=this._positions_draw:n=this[i(e._0x1ef251)],!n&&(n=getOutlinePositions(this[i(e._0x19a92c)],![])),n.forEach(function(o){const c=i,_=LngLatPoint[c(t._0xa1939e)](o);!_||!_.valid()||s.push(_)}),this._points=s,this._points}get[_0x5e32ae(2776)](){return getDistance(this.outlinePositions,!![])}get[_0x5e32ae(1451)](){return getSurfaceArea(this.outlinePositions)}getEntityPositions(){const e={_0x11fa94:1323,_0x213233:3579,_0x1f7ce9:2793},t=_0x5e32ae;if(!this._entity.rectangle)return null;const i=getCesiumValue(this._entity[t(e._0x11fa94)].coordinates,Cesium__namespace[t(3324)]),s=getCesiumValue(this[t(e._0x213233)][t(e._0x11fa94)].height,Number)||0,n=Cesium__namespace[t(3916)].fromRadians(i.west,i.south,s),o=Cesium__namespace.Cartesian3[t(e._0x1f7ce9)](i.east,i.north,s);return[n,o]}_mountedHook(){const e={_0x43648a:4114,_0x31afdd:1813},t=_0x5e32ae,i={rectangle:RectangleStyleConver.toCesiumVal(this[t(e._0x43648a)],{},!![])};i.rectangle.coordinates=this.rectangle,this._positions instanceof Cesium__namespace.CallbackProperty&&(i.rectangle.coordinates=new Cesium__namespace.CallbackProperty(s=>{const n=t,o=this._positions.getValue(s);return o&&o.length>0?(this._rectangle=Cesium__namespace.Rectangle[n(3283)](o),this._rectangle):void 0},![])),this._entity=this._createEntity(i),this._updateHeight(),this._updateOutlineStyle(this[t(e._0x31afdd)](),this.style),this._entity_outlines&&this[t(2189)].coordinates instanceof Cesium__namespace.CallbackProperty&&this._updateOutlineToCallback(),this.style.label&&this[t(2510)]()}[_0x5e32ae(3978)](e,t){return RectangleStyleConver.toJSON(e,t,!![])}_updateStyleHook(e,t){const i={_0x1515e6:515,_0x359c8f:2999,_0x2429ea:515},s=_0x5e32ae;RectangleStyleConver[s(1268)](e,this.entityGraphic,!![]),(Cesium__namespace[s(i._0x1515e6)](t[s(i._0x359c8f)])||Cesium__namespace[s(i._0x2429ea)](t.height))&&this._updateHeight()}[_0x5e32ae(4119)](){const e={_0x1958e6:2436,_0x1639f7:3324,_0x26904d:4114},t=_0x5e32ae;this[t(e._0x1958e6)]?this.rectangle=Cesium__namespace.Rectangle.fromCartesianArray(this.positions):this._rectangle_draw=Cesium__namespace[t(e._0x1639f7)].fromCartesianArray(this._positions_draw),this.outlinePositions=getOutlinePositions(this._entity),this[t(2924)](this._getOutlinePositions(),this[t(e._0x26904d)]),this._updateLabelPosition(),this[t(2174)](),this._updateEditDraggers()}_getOutlineStyle(e,t){const i={_0x13ab91:1011,_0x4ca419:2277},s=_0x5e32ae,n=super[s(i._0x13ab91)](e,t);return n.arcType=Cesium__namespace.ArcType[s(i._0x4ca419)],n}_getOutlinePositions(){return[this.outlinePositions]}[_0x5e32ae(826)](e){const t={_0x2d5d5c:826},i=_0x5e32ae;return super[i(t._0x2d5d5c)](e)}[_0x5e32ae(879)](e){const t={_0x20a6a2:2056,_0xd8b08c:1225},i=_0x5e32ae;return e!=null&&e.outline?{type:i(t._0x20a6a2),coordinates:[this.getOutlineCoordinates(e==null?void 0:e[i(2325)],e==null?void 0:e.noAlt)]}:{type:i(t._0xd8b08c),coordinates:this.getCoordinates(e==null?void 0:e.noAlt)}}_setPositionsToCallback(){const e={_0x1ed591:566,_0x3451a6:2436,_0x2542ed:1761,_0x15083a:1761,_0x3d259d:1323},t=_0x5e32ae;if(this[t(e._0x1ed591)])return;this._isCallbackPositions=!![];const i=this[t(e._0x3451a6)];i?(i instanceof Cesium__namespace.CallbackProperty?this[t(e._0x2542ed)]=this.getEntityPositions():this[t(1761)]=this.positions,this._rectangle_draw=Cesium__namespace.Rectangle[t(3283)](this._positions_draw)):(this[t(e._0x15083a)]=[],this._rectangle_draw=null),this[t(e._0x3d259d)]=new Cesium__namespace.CallbackProperty(s=>this[t(3799)],![]),this[t(1885)]()}_cancelPositionsCallback(){const e={_0x411137:1761,_0x33369b:4224},t=_0x5e32ae;this._isCallbackPositions&&(this._isCallbackPositions=![],this._positions=this[t(e._0x411137)],this._rectangle=this._rectangle_draw,this._entity&&(this[t(2189)].coordinates=this._rectangle_draw),delete this[t(e._0x411137)],delete this._rectangle_draw,this[t(e._0x33369b)]())}updateAttrForDrawing(e){const t=_0x5e32ae;this._rectangle_draw=Cesium__namespace.Rectangle.fromCartesianArray(this._positions_draw),this._entity_outlines&&(this[t(1885)](),this._outlinePositions=getOutlinePositions(this[t(3579)])),this._updateHeight(![])}[_0x5e32ae(2174)](e=!![]){const t={_0x108b59:4114,_0x3126f2:4114,_0x56d7f1:2999,_0x2fa07b:2999},i=_0x5e32ae;if(this.style[i(2825)])return;let s=0;e&&Cesium__namespace.defined(this.style.height)?s=this[i(t._0x108b59)].height:s=getMaxHeight(this._positions_draw||this._positions),this.entityGraphic.height=s,this.style.height=s,Cesium__namespace[i(515)](this[i(t._0x3126f2)][i(t._0x56d7f1)])&&(Cesium__namespace[i(515)](this[i(t._0x108b59)][i(t._0x56d7f1)])&&this.style.diffHeight!==0?this.entityGraphic.extrudedHeight=s+this.style[i(t._0x2fa07b)]:this.entityGraphic.extrudedHeight=void 0),this.fire(EventType.editStyle)}getOutlinePositions(e){return getOutlinePositions(this._entity,e)}getOutlineCoordinates(e,t){return cartesians2lonlats(this[_0x5e32ae(2462)](e),t)}getRectangle(e){const t={_0x270477:3937},i=_0x5e32ae,s=this._rectangle_draw||this[i(1323)];return e!=null&&e[i(t._0x270477)]?formatRectangle(s):s}isInPoly(e){const t={_0xc38f68:3324,_0x4544af:3068},i=_0x5e32ae;var s;const n=getCesiumValue((s=this[i(3579)].rectangle)===null||s===void 0?void 0:s.coordinates,Cesium__namespace[i(t._0xc38f68)]);return Cesium__namespace.Rectangle[i(t._0x4544af)](n,LngLatPoint.parse(e).toCartographic())}[_0x5e32ae(3576)](e={}){const t=_0x5e32ae;if(this._map)return e.clampToGround=this[t(4114)].clampToGround,this._map.flyToExtent(getCesiumValue(this.rectangle,Cesium__namespace.Rectangle),e),this}}register$4("rectangle",RectangleEntity);function getOutlinePositions(r,e=!![]){if(!r||!r.rectangle)return[];const t=getCesiumValue(r.rectangle.coordinates,Cesium__namespace.Rectangle);if(!t)return[];const i=getCesiumValue(r.rectangle.rotation,Number)||0,s=getCesiumValue(r.rectangle.height,Number)||0,n=getRectangleOuterPositions({rectangle:t,rotation:i,height:s});return e&&n.push(n[0]),n}function getAllPositions(r){const e=_0x5e32ae,t=getCesiumValue(r[e(652)].hierarchy,Cesium__namespace.PolygonHierarchy);return getHierarchyVal(t)}function getPositions(r,e){const t={_0x1ad100:1761,_0xd212e7:2238},i=_0x5e32ae;if(!e&&r._positions_draw&&r[i(t._0x1ad100)].length>0)return r._positions_draw;let s=getCesiumValue(r.polygon.hierarchy,Cesium__namespace[i(t._0xd212e7)]);return s&&s instanceof Cesium__namespace.PolygonHierarchy&&(s=s.positions),s}function getHolesPositions(r){const e={_0x4dae14:3402},t=_0x5e32ae,i=getCesiumValue(r[t(652)].hierarchy,Cesium__namespace[t(2238)]),s=getHierarchyVal(i);return s[t(e._0x4dae14)]>1?s.slice(1):null}function getHierarchyVal(r){const e={_0xaee739:1484},t=_0x5e32ae;if(!r)return[];if(r&&r instanceof Cesium__namespace.PolygonHierarchy){let i=[r.positions];for(let s=0,n=r[t(e._0xaee739)].length;s<n;s++){const o=r.holes[s];i=i[t(3611)](getHierarchyVal(o))}return i}else return[r]}function getPolygonHierarchy(r,e){const t={_0x170f21:3402,_0x2484cf:3402},i=_0x5e32ae;if(r[i(t._0x170f21)]===0)return new Cesium__namespace[i(2238)];const s=[];if(r.length>1)for(let c=1,_=r[i(t._0x2484cf)];c<_;c++)s.push(new Cesium__namespace.PolygonHierarchy(lonlats2cartesians(r[c],e)));const n=r[0];return new Cesium__namespace.PolygonHierarchy(lonlats2cartesians(n,e),s)}function getPolygonHierarchy2(r){const e={_0x5d5acf:2238,_0x366e5d:3402},t=_0x5e32ae;if(r.length===0)return new Cesium__namespace[t(e._0x5d5acf)];const i=[];if(r.length>1)for(let o=1,c=r[t(e._0x366e5d)];o<c;o++)i.push(new Cesium__namespace.PolygonHierarchy(LngLatArray[t(3816)](r[o])));const s=r[0];return new Cesium__namespace.PolygonHierarchy(LngLatArray.toCartesians(s),i)}class EditPolygon extends EditPoly{get hasClosure(){const e={_0x2dc27c:1739},t=_0x5e32ae;return this._graphic[t(e._0x2dc27c)]??!![]}get clampToGround(){var e,t;return this.style.clampToGround??!getCesiumValue((e=this._graphic)===null||e===void 0||(t=e.entityGraphic)===null||t===void 0?void 0:t.perPositionHeight,Boolean)}bindDraggers(){const e={_0x41ef22:3402,_0x5131ae:3923},t=_0x5e32ae;var i;if(super[t(1560)](),((i=this._graphic._draw_holes)===null||i===void 0?void 0:i[t(e._0x41ef22)])>0)for(let s=0,n=this._graphic[t(e._0x5131ae)].length;s<n;s++)this.bindHolesDraggers(this._graphic[t(3923)][s],s)}bindHolesDraggers(e,t){const i={_0x2e08d1:868},s={_0x10e170:3247},n={_0x560b1f:2813},o=_0x5e32ae;for(let c=0,_=e.length;c<_;c++){const l=this.updatePositionsHeightByAttr(e[c]),h=this.createDragger({position:l,onDrag:(f,m)=>{m=this[_0x5210(3156)](m),f.position=m,e[f.index]=m},onDragEnd:(f,m)=>{this[_0x5210(n._0x560b1f)]()}});if(h[o(4063)]=c,this.draggers.push(h),this[o(i._0x2e08d1)]&&(this[o(1739)]||!this.hasClosure&&c<_-1)){const f=(c+1)%_;let m=getMidpoint(l,e[f]);m=this.updatePositionsHeightByAttr(m);const g=this.createDragger({position:m,type:PointType.AddMidPoint,tooltip:this[o(1890)].getLangText("_增加点"),onDragStart:(C,E)=>{e.splice(C.index,0,E)},onDrag:(C,E)=>{e[C.index]=E},onDragEnd:(C,E)=>{this[o(s._0x10e170)](C,E),this.updateDraggers()}});g.index=f,this.draggers.push(g)}}}}const nullColor$1=new Cesium__namespace[_0x5e32ae(2200)](0,0,0,.01);class PolygonEntity extends BasePolyEntity{constructor(e={}){const t=_0x5e32ae;super(e),this._minPointNum=e.minPointNum??3,this[t(1452)]=!![]}get[_0x5e32ae(2189)](){const e=_0x5e32ae;var t;return(t=this[e(3579)])===null||t===void 0?void 0:t.polygon}get EditClass(){return EditPolygon}get center(){return this.centerOfMass}get distance(){return getDistance(this.positionsShow,!![])}get positionsShow(){const e=_0x5e32ae;let t=getCesiumValue(this._positions);return t instanceof Cesium__namespace.PolygonHierarchy&&(t=t[e(2436)]),this[e(3214)]??this.getShowPositions(t)}get hierarchy(){const e=_0x5e32ae;var t;return this[e(3123)]||((t=this.entityGraphic)===null||t===void 0?void 0:t.hierarchy)}get positions(){return this._positions}set positions(e){const t={_0x371089:3402,_0x590cfe:3270},i={_0x43da99:2554,_0x44954e:1528,_0x4a10e6:2578,_0x189a92:3984,_0x4830cd:3759},s=_0x5e32ae;var n;if(e){if(!((n=this.editing)!==null&&n!==void 0&&n[s(968)])&&(this._hierarchy=null,this._positions_show=null),e instanceof Cesium__namespace[s(2238)]&&(this._hierarchy=e,e=this._hierarchy.positions),Array.isArray(e)){var o;if(e.length>0&&Array.isArray(e[0])&&e[0][s(t._0x371089)]>0){const l=e[0][0];Array[s(3845)](l)&&isNumber(l[0])?(this[s(3123)]=getPolygonHierarchy(e,this.style.height||this.style.setHeight||this.style.addHeight),e=this._hierarchy.positions):l instanceof Cesium__namespace.Cartesian3&&(this._hierarchy=getPolygonHierarchy2(e),e=this._hierarchy.positions)}const c=[],_=[];e.forEach((l,h)=>{const f=s,m=LngLatPoint.parse(l);if(!m)return;let g=this.style[f(i._0x43da99)];Cesium__namespace[f(515)](g)&&(isString(g)?(g=Number(template(g,this[f(i._0x44954e)],!![])),isNaN(g)&&(g=0)):Array.isArray(g)&&(g=g[h]||0),m.alt=g);const C=this[f(i._0x4a10e6)](h);C!==0&&(m[f(i._0x189a92)]=m.alt+C),c.push(m),_[f(i._0x4830cd)](m.toCartesian())}),this._points=c,(o=this.editing)!==null&&o!==void 0&&o.enabled?this[s(1761)]=_:this._positions=_}else this[s(3270)]=e;this._entity&&this._updatePositionsHook(),this.fire(EventType.updatePosition,{positions:this[s(t._0x590cfe)]})}}getEntityPositions(){return getPositions(this._entity)}getShowPositions(e){return e}[_0x5e32ae(3118)](){const e={_0x373540:4114,_0x1c37b2:837,_0x48d161:3845,_0x15b6e6:981,_0x340923:3123,_0xd659a3:599,_0x24c62b:3579,_0x5bb161:2510},t={_0x440d38:1543,_0x2b61ac:934,_0x311630:4114},i=_0x5e32ae,s={polygon:PolygonStyleConver.toCesiumVal(this[i(e._0x373540)],{},!![])};if(this._positions instanceof Cesium__namespace[i(3703)]){const n=this._positions.getValue(this[i(1890)].clock[i(e._0x1c37b2)]);if(n&&Array[i(e._0x48d161)](n)){const o=new Cesium__namespace.PolygonHierarchy;s.polygon[i(e._0x15b6e6)]=new Cesium__namespace.CallbackProperty(c=>{const _=i;var l;const h=this._positions.getValue(c);if(this._positions_show=this[_(t._0x440d38)](h),o.positions=this._positions_show,this[_(t._0x2b61ac)]&&((l=this[_(3214)])===null||l===void 0?void 0:l.length)>0){var f;((f=this[_(t._0x311630)].outlineStyle)===null||f===void 0?void 0:f.closure)??!![]?this.outlinePositions=this._positions_show.concat(this._positions_show[0]):this.outlinePositions=this._positions_show}return o},![]),this[i(e._0x340923)]=o}else s.polygon.hierarchy=this._positions}else this._hierarchy?s.polygon[i(981)]=this._hierarchy:(!this._positions_show&&(this._positions_show=this[i(1543)](this.positions)),s[i(652)].hierarchy=new Cesium__namespace.PolygonHierarchy(this[i(3214)]));this._entity=this[i(821)](s),this._updateDiffHeight(),this[i(e._0xd659a3)](),this._updateOutlineStyle(this[i(1813)](),this[i(e._0x373540)]),this[i(e._0x24c62b)].polygon[i(e._0x15b6e6)]instanceof Cesium__namespace.CallbackProperty&&this._updateOutlineToCallback(),this.style[i(736)]&&this[i(e._0x5bb161)]()}_bindExType(){const e={_0x2cb431:3967,_0x5bc032:4083,_0x1c4000:1528,_0x5b3d99:3579,_0x572b56:652,_0x3315de:2607,_0x4cc9b5:1410,_0x367e8d:2073,_0x400db2:515,_0x29cf52:1877,_0x498d3e:1933},t=_0x5e32ae,i=this[t(3798)].buildings||this._layer.options[t(e._0x2cb431)];if(i&&(i.enabled??!![])){if(i.bottomHeight){let _;isNumber(i.bottomHeight)?_=i.bottomHeight:isString(i[t(e._0x5bc032)])&&(_=Number(this[t(e._0x1c4000)][i.bottomHeight]||0)),this._entity.polygon[t(3865)]=_}const n=Number(this[t(1528)][i[t(3191)]]||1);let o;isNumber(i.height)?o=i.height:isString(i.height)?o=this.attr[i.height]||o:o=3.5;const c=getCesiumValue(this[t(e._0x5b3d99)][t(e._0x572b56)].height)||0;this._entity.polygon[t(e._0x3315de)]=c+n*o}(this.options[t(e._0x4cc9b5)]||this[t(2873)].options[t(1410)])&&(this._entity.polygon[t(e._0x367e8d)]=Cesium__namespace.ClassificationType.BOTH,!Cesium__namespace[t(e._0x400db2)](this.style.color)&&(this._entity.polygon[t(e._0x29cf52)]=nullColor$1),!Cesium__namespace[t(515)](this.style.height)&&(this._entity[t(652)][t(e._0x498d3e)]=![]),this._entity.polygon.zIndex=99)}_updateDiffHeight(){const e={_0x2fe0d4:515,_0x221c03:2607},t=_0x5e32ae;if(!(!Cesium__namespace[t(515)](this.style.diffHeight)||this.entityGraphic.extrudedHeight instanceof Cesium__namespace.CallbackProperty))if(Cesium__namespace.defined(this.style.diffHeight)&&this.style.diffHeight!==0){let i=0;Cesium__namespace[t(e._0x2fe0d4)](this.style.height)?i=this.style.height:i=getMaxHeight(this[t(1761)]||this._positions),this.entityGraphic[t(e._0x221c03)]=i+this.style.diffHeight}else this.entityGraphic.extrudedHeight=void 0}_style2Json(e,t){return PolygonStyleConver.toJSON(e,t,!![])}[_0x5e32ae(3601)](e,t){const i={_0x25a6d0:515},s=_0x5e32ae;PolygonStyleConver.toCesiumVal(e,this.entityGraphic,!![]),(Cesium__namespace.defined(t.diffHeight)||Cesium__namespace[s(i._0x25a6d0)](t.height))&&this._updateDiffHeight()}_updatePositionsHook(){const e={_0x1efb0f:968,_0x47ccd7:3123,_0x952f1f:2436,_0x57e52b:1813},t=_0x5e32ae;if(this._positions instanceof Cesium__namespace.CallbackProperty){var i;this[t(2189)].hierarchy=this._positions,(i=this.editing)!==null&&i!==void 0&&i[t(e._0x1efb0f)]&&this[t(e._0x47ccd7)]&&(this._positions_show=this[t(1543)](this[t(1761)]),this[t(e._0x47ccd7)].positions=this[t(3214)])}else this._hierarchy?this.entityGraphic.hierarchy=this._hierarchy:(this._positions_show=this[t(1543)](this[t(e._0x952f1f)]),this.entityGraphic[t(981)]=new Cesium__namespace.PolygonHierarchy(this[t(3214)]));this._updateOutlineStyle(this[t(e._0x57e52b)](),this.style),this._updateLabelPosition(),this[t(3287)](),this[t(3115)]()}_getOutlinePositions(){return getAllPositions(this[_0x5e32ae(3579)])}toGeoJSON(e){return super.toGeoJSON(e)}[_0x5e32ae(879)](e){const t={_0x4df200:3276,_0x4f730e:3123,_0x569751:1484},i=_0x5e32ae;var s,n;let o=this[i(t._0x4df200)](e==null?void 0:e.noAlt);return e!=null&&e[i(2325)]&&o.length>0&&o.push(o[0]),((s=this[i(t._0x4f730e)])===null||s===void 0||(n=s[i(t._0x569751)])===null||n===void 0?void 0:n.length)>0&&(o=[o],getHolesPositions(this._entity).forEach(_=>{o.push(LngLatArray.toArray(_))})),{type:"Polygon",coordinates:[o]}}[_0x5e32ae(2673)](e){const t={_0xbbccd0:1761},i=_0x5e32ae;return this._setPositionsToCallback(),e&&(e&&(e=LngLatArray.toCartesians(e)),this[i(t._0xbbccd0)]=e,this._hierarchy.positions=e),this._positions_draw}_positions_CallbackProperty(){return this._hierarchy}_cancelPositionsCallback(){const e={_0x472366:1127},t=_0x5e32ae;super[t(e._0x472366)](),this._hierarchy=null}[_0x5e32ae(4008)](){super._startDrawHook(),this._updateOutlineStyle([new Cesium__namespace.CallbackProperty(e=>this.outlinePositions,![])],this.style,{show:!![],width:2,color:this.style.color})}[_0x5e32ae(3055)](){this._isCallbackPositions||(this._draw_holes=getHolesPositions(this._entity),super._setPositionsToCallback())}updateAttrForDrawing(e){const t={_0x4683bf:3123,_0x50fd58:2500,_0x26e20f:3214,_0xb29e2a:3214,_0x1d534d:3214,_0xb1a8ab:1885,_0x4192ae:2924,_0x77ddc4:3287},i=_0x5e32ae;var s;if(!this[i(t._0x4683bf)]&&(this._hierarchy=new Cesium__namespace.PolygonHierarchy,this._draw_holes)){const c=[];this._draw_holes[i(t._0x50fd58)](_=>{c.push(new Cesium__namespace.PolygonHierarchy(_))}),this._hierarchy.holes=c}if(this[i(t._0x26e20f)]=this.getShowPositions(this._positions_draw),this._hierarchy.positions=this._positions_show,((s=this[i(t._0xb29e2a)])===null||s===void 0?void 0:s.length)>0){var n;((n=this.style.outlineStyle)===null||n===void 0?void 0:n.closure)??!![]?this.outlinePositions=this[i(t._0x1d534d)].concat(this._positions_show[0]):this.outlinePositions=this._positions_show}let o;this._positions_draw.length<this._minPointNum&&(o={show:!![],width:2,color:this.style.color}),this[i(t._0xb1a8ab)](),this[i(t._0x4192ae)](null,this.style,o),this[i(t._0x77ddc4)]()}}register$4("polygon",PolygonEntity),PolygonEntity.getPositions=getPositions,PolygonEntity[_0x5e32ae(1508)]=getAllPositions;class EllipseEntity extends CircleEntity{constructor(e={}){super(e),this._maxPointNum=3}}register$4(_0x5e32ae(2782),EllipseEntity,!![]);function RectangularSensorGraphics(r){const e=_0x5e32ae;this._show=void 0,this._radius=void 0,this._xHalfAngle=void 0,this[e(814)]=void 0,this._lineColor=void 0,this[e(1216)]=void 0,this._showSectorSegmentLines=void 0,this._showLateralSurfaces=void 0,this._material=void 0,this._showDomeSurfaces=void 0,this._showDomeLines=void 0,this._showIntersection=void 0,this._intersectionColor=void 0,this[e(4099)]=void 0,this._showThroughEllipsoid=void 0,this[e(2171)]=void 0,this._showScanPlane=void 0,this._scanPlaneColor=void 0,this._scanPlaneMode=void 0,this[e(2750)]=void 0,this._definitionChanged=new Cesium__namespace.Event,this[e(1861)](Cesium__namespace.defaultValue(r,Cesium__namespace.defaultValue.EMPTY_OBJECT))}Object.defineProperties(RectangularSensorGraphics[_0x5e32ae(2392)],{definitionChanged:{get:function(){return this[_0x5e32ae({_0x151a8e:2001}._0x151a8e)]}},show:Cesium__namespace.createPropertyDescriptor(_0x5e32ae(575)),radius:Cesium__namespace.createPropertyDescriptor(_0x5e32ae(3194)),xHalfAngle:Cesium__namespace.createPropertyDescriptor("xHalfAngle"),yHalfAngle:Cesium__namespace.createPropertyDescriptor(_0x5e32ae(3248)),lineColor:Cesium__namespace.createPropertyDescriptor("lineColor"),showSectorLines:Cesium__namespace.createPropertyDescriptor("showSectorLines"),showSectorSegmentLines:Cesium__namespace[_0x5e32ae(1991)]("showSectorSegmentLines"),showLateralSurfaces:Cesium__namespace.createPropertyDescriptor("showLateralSurfaces"),material:Cesium__namespace[_0x5e32ae(2061)]("material"),showDomeSurfaces:Cesium__namespace.createPropertyDescriptor("showDomeSurfaces"),showDomeLines:Cesium__namespace.createPropertyDescriptor(_0x5e32ae(2915)),showIntersection:Cesium__namespace.createPropertyDescriptor("showIntersection"),intersectionColor:Cesium__namespace.createPropertyDescriptor(_0x5e32ae(2715)),intersectionWidth:Cesium__namespace.createPropertyDescriptor("intersectionWidth"),showThroughEllipsoid:Cesium__namespace.createPropertyDescriptor("showThroughEllipsoid"),gaze:Cesium__namespace.createPropertyDescriptor(_0x5e32ae(3422)),showScanPlane:Cesium__namespace.createPropertyDescriptor("showScanPlane"),scanPlaneColor:Cesium__namespace.createPropertyDescriptor(_0x5e32ae(1009)),scanPlaneMode:Cesium__namespace[_0x5e32ae(1991)]("scanPlaneMode"),scanPlaneRate:Cesium__namespace.createPropertyDescriptor(_0x5e32ae(662))}),RectangularSensorGraphics[_0x5e32ae(2392)][_0x5e32ae(4246)]=function(r){const e={_0x5c1289:3194,_0x15f119:3248,_0x5ae046:1045,_0x1e3479:1009},t=_0x5e32ae;return!Cesium__namespace.defined(r)&&(r=new RectangularSensorGraphics),r.show=this.show,r[t(e._0x5c1289)]=this.radius,r.xHalfAngle=this.xHalfAngle,r.yHalfAngle=this[t(e._0x15f119)],r.lineColor=this.lineColor,r.showSectorLines=this.showSectorLines,r.showSectorSegmentLines=this.showSectorSegmentLines,r.showLateralSurfaces=this.showLateralSurfaces,r.material=this.material,r[t(e._0x5ae046)]=this.showDomeSurfaces,r.showDomeLines=this.showDomeLines,r.showIntersection=this.showIntersection,r.intersectionColor=this.intersectionColor,r.intersectionWidth=this.intersectionWidth,r.showThroughEllipsoid=this[t(4001)],r.gaze=this.gaze,r.showScanPlane=this.showScanPlane,r[t(e._0x1e3479)]=this.scanPlaneColor,r.scanPlaneMode=this.scanPlaneMode,r.scanPlaneRate=this.scanPlaneRate,r},RectangularSensorGraphics[_0x5e32ae(2392)].merge=function(r){const e={_0x5cf2a6:3039,_0x3952c8:869,_0x37f9e4:575,_0x5970b0:1626,_0x1993fb:3042,_0x3101f6:1045,_0xd08ee9:1626,_0x3e59d2:1626,_0x579af7:3422,_0x4811ed:662},t=_0x5e32ae;if(!Cesium__namespace.defined(r))throw new Cesium__namespace.DeveloperError(t(e._0x5cf2a6));this.slice=Cesium__namespace.defaultValue(this.slice,r[t(e._0x3952c8)]),this[t(e._0x37f9e4)]=Cesium__namespace[t(e._0x5970b0)](this.show,r.show),this[t(3194)]=Cesium__namespace.defaultValue(this.radius,r.radius),this[t(3042)]=Cesium__namespace.defaultValue(this.xHalfAngle,r[t(e._0x1993fb)]),this.yHalfAngle=Cesium__namespace.defaultValue(this.yHalfAngle,r.yHalfAngle),this.lineColor=Cesium__namespace.defaultValue(this.lineColor,r[t(2829)]),this.showSectorLines=Cesium__namespace[t(1626)](this.showSectorLines,r.showSectorLines),this[t(1667)]=Cesium__namespace[t(1626)](this.showSectorSegmentLines,r.showSectorSegmentLines),this.showLateralSurfaces=Cesium__namespace.defaultValue(this.showLateralSurfaces,r.showLateralSurfaces),this.material=Cesium__namespace.defaultValue(this.material,r.material),this[t(e._0x3101f6)]=Cesium__namespace.defaultValue(this.showDomeSurfaces,r.showDomeSurfaces),this.showDomeLines=Cesium__namespace.defaultValue(this.showDomeLines,r.showDomeLines),this[t(3494)]=Cesium__namespace[t(e._0xd08ee9)](this.showIntersection,r.showIntersection),this.intersectionColor=Cesium__namespace.defaultValue(this[t(2715)],r.intersectionColor),this[t(3607)]=Cesium__namespace.defaultValue(this.intersectionWidth,r.intersectionWidth),this.showThroughEllipsoid=Cesium__namespace[t(e._0x3e59d2)](this.showThroughEllipsoid,r.showThroughEllipsoid),this.gaze=Cesium__namespace.defaultValue(this.gaze,r[t(e._0x579af7)]),this.showScanPlane=Cesium__namespace.defaultValue(this.showScanPlane,r.showScanPlane),this.scanPlaneColor=Cesium__namespace.defaultValue(this.scanPlaneColor,r.scanPlaneColor),this.scanPlaneMode=Cesium__namespace.defaultValue(this.scanPlaneMode,r[t(739)]),this.scanPlaneRate=Cesium__namespace.defaultValue(this.scanPlaneRate,r[t(e._0x4811ed)])};var RectangularSensorVS=`in vec4 position;
in vec3 normal;
out vec3 v_position;
out vec3 v_positionWC;
out vec3 v_positionEC;
out vec3 v_normalEC;

void main() {
  gl_Position = czm_modelViewProjection * position;
  v_position = vec3(position);
  v_positionWC = (czm_model * position).xyz;
  v_positionEC = (czm_modelView * position).xyz;
  v_normalEC = czm_normal * normal;
}
`,RectangularSensorFS=_0x5e32ae(4167),RectangularSensor$1=`uniform vec4 u_intersectionColor;
uniform float u_intersectionWidth;
uniform vec4 u_lineColor;

bool inSensorShadow(vec3 coneVertexWC, vec3 pointWC) {
    // Diagonal matrix from the unscaled ellipsoid space to the scaled space.
  vec3 D = czm_ellipsoidInverseRadii;

    // Sensor vertex in the scaled ellipsoid space
  vec3 q = D * coneVertexWC;
  float qMagnitudeSquared = dot(q, q);
  float test = qMagnitudeSquared - 1.0;

    // Sensor vertex to fragment vector in the ellipsoid's scaled space
  vec3 temp = D * pointWC - q;
  float d = dot(temp, q);

    // Behind silhouette plane and inside silhouette cone
  return (d < -test) && (d / length(temp) < -sqrt(test));
}


vec4 getLineColor() {
  return u_lineColor;
}

vec4 getIntersectionColor() {
  return u_intersectionColor;
}

float getIntersectionWidth() {
  return u_intersectionWidth;
}

vec2 sensor2dTextureCoordinates(float sensorRadius, vec3 pointMC) {
    // (s, t) both in the range [0, 1]
  float t = pointMC.z / sensorRadius;
  float s = 1.0 + (atan(pointMC.y, pointMC.x) / czm_twoPi);
  s = s - floor(s);

  return vec2(s, t);
}
`,RectangularSensorScanPlaneFS=`
uniform bool u_showIntersection;
uniform bool u_showThroughEllipsoid;

uniform float u_radius;
uniform float u_xHalfAngle;
uniform float u_yHalfAngle;
uniform float u_normalDirection;
uniform vec4 u_color;

in vec3 v_position;
in vec3 v_positionWC;
in vec3 v_positionEC;
in vec3 v_normalEC;

vec4 getColor(float sensorRadius, vec3 pointEC) {
  czm_materialInput materialInput;

  vec3 pointMC = (czm_inverseModelView * vec4(pointEC, 1.0)).xyz;
  materialInput.st = sensor2dTextureCoordinates(sensorRadius, pointMC);
  materialInput.str = pointMC / sensorRadius;

  vec3 positionToEyeEC = -v_positionEC;
  materialInput.positionToEyeEC = positionToEyeEC;

  vec3 normalEC = normalize(v_normalEC);
  materialInput.normalEC = u_normalDirection * normalEC;

  czm_material material = czm_getMaterial(materialInput);

  material.diffuse = u_color.rgb;
  material.alpha = u_color.a;
    // czm_lightDirectionEC在cesium1.66开始加入的
  return mix(czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC), vec4(material.diffuse, material.alpha), 0.4);

}

bool isOnBoundary(float value, float epsilon) {
  float width = getIntersectionWidth();
  float tolerance = width * epsilon;

  float delta = max(abs(dFdx(value)), abs(dFdy(value)));
  float pixels = width * delta;
  float temp = abs(value);
  return temp < tolerance && temp < pixels || (delta < 10.0 * tolerance && temp - delta < tolerance && temp < pixels);
}

vec4 shade(bool isOnBoundary) {
  if(u_showIntersection && isOnBoundary) {
    return getIntersectionColor();
  }
  return getColor(u_radius, v_positionEC);
}

float ellipsoidSurfaceFunction(vec3 point) {
  vec3 scaled = czm_ellipsoidInverseRadii * point;
  return dot(scaled, scaled) - 1.0;
}

void main() {
  vec3 sensorVertexWC = czm_model[3].xyz;      // (0.0, 0.0, 0.0) in model coordinates

  float positionX = v_position.x;
  float positionY = v_position.y;
  float positionZ = v_position.z;

  vec3 zDir = vec3(0.0, 0.0, 1.0);
  vec3 lineX = vec3(positionX, 0, positionZ);
  vec3 lineY = vec3(0, positionY, positionZ);
  float resX = dot(normalize(lineX), zDir);
  if(resX < cos(u_xHalfAngle) - 0.0001) {
    discard;
  }
  float resY = dot(normalize(lineY), zDir);
  if(resY < cos(u_yHalfAngle) - 0.0001) {
    discard;
  }

  float ellipsoidValue = ellipsoidSurfaceFunction(v_positionWC);

  if(!u_showThroughEllipsoid) {
    if(ellipsoidValue < 0.0) {
      discard;
    }
    if(inSensorShadow(sensorVertexWC, v_positionWC)) {
      discard;
    }
  }
  bool isOnEllipsoid = isOnBoundary(ellipsoidValue, czm_epsilon3);
  out_FragColor = shade(isOnEllipsoid);
}
`;const BoundingSphere$1=Cesium__namespace.BoundingSphere,Cartesian3$3=Cesium__namespace[_0x5e32ae(3916)],Color$1=Cesium__namespace[_0x5e32ae(2200)],combine$1=Cesium__namespace[_0x5e32ae(2124)],ComponentDatatype$1=Cesium__namespace.ComponentDatatype,defaultValue$1=Cesium__namespace.defaultValue,defined$3=Cesium__namespace[_0x5e32ae(515)],DeveloperError$1=Cesium__namespace.DeveloperError,Matrix4$1=Cesium__namespace.Matrix4,PrimitiveType$1=Cesium__namespace[_0x5e32ae(2684)],Buffer=Cesium__namespace[_0x5e32ae(1745)],BufferUsage=Cesium__namespace.BufferUsage,DrawCommand=Cesium__namespace[_0x5e32ae(1539)],Pass=Cesium__namespace.Pass,RenderState=Cesium__namespace.RenderState,ShaderProgram=Cesium__namespace.ShaderProgram,ShaderSource=Cesium__namespace.ShaderSource,VertexArray=Cesium__namespace.VertexArray,BlendingState=Cesium__namespace[_0x5e32ae(3165)],CullFace=Cesium__namespace.CullFace,Material=Cesium__namespace.Material,SceneMode=Cesium__namespace.SceneMode,VertexFormat$1=Cesium__namespace.VertexFormat,CesiumMath$2=Cesium__namespace[_0x5e32ae(1286)],Matrix3$2=Cesium__namespace.Matrix3,JulianDate=Cesium__namespace.JulianDate,sin=Math.sin,cos=Math.cos,tan=Math.tan,atan=Math.atan,attributeLocations={position:0,normal:1};function RectangularSensorPrimitive(r){const e={_0x4bae31:575,_0x183722:536,_0x21944b:2896,_0x405a40:1667,_0x52a5bf:2386,_0x351420:1350,_0x5d86ad:3396,_0x189560:1009,_0x2ade8b:2995,_0x295917:662,_0x3c4794:3549,_0x58279f:2983,_0x3326fa:730,_0xdbfb3f:1873,_0x3c18dc:3991,_0x3ce69c:1870,_0x281e9a:3892,_0x53170a:1868},t={_0x15db09:3042},i=_0x5e32ae,s=this;r=defaultValue$1(r,defaultValue$1.EMPTY_OBJECT),this[i(e._0x4bae31)]=defaultValue$1(r.show,!![]),this.slice=defaultValue$1(r.slice,32),this.modelMatrix=Matrix4$1.clone(r.modelMatrix,new Matrix4$1),this._modelMatrix=new Matrix4$1,this[i(e._0x183722)]=new Matrix4$1,this._computedScanPlaneModelMatrix=new Matrix4$1,this.radius=defaultValue$1(r.radius,Number.POSITIVE_INFINITY),this._radius=void 0,this[i(3042)]=defaultValue$1(r.xHalfAngle,0),this._xHalfAngle=void 0,this.yHalfAngle=defaultValue$1(r[i(3248)],0),this._yHalfAngle=void 0,this.lineColor=defaultValue$1(r.lineColor,Color$1.WHITE),this.showSectorLines=defaultValue$1(r[i(e._0x21944b)],!![]),this.showSectorSegmentLines=defaultValue$1(r[i(e._0x405a40)],!![]),this.showLateralSurfaces=defaultValue$1(r.showLateralSurfaces,!![]),this[i(1877)]=defined$3(r.material)?r.material:Material.fromType(Material.ColorType),this[i(e._0x52a5bf)]=void 0,this._translucent=void 0,this.lateralSurfaceMaterial=defined$3(r.lateralSurfaceMaterial)?r[i(e._0x351420)]:Material.fromType(Material.ColorType),this._lateralSurfaceMaterial=void 0,this._lateralSurfaceTranslucent=void 0,this[i(1045)]=defaultValue$1(r[i(1045)],!![]),this[i(3043)]=defined$3(r.domeSurfaceMaterial)?r.domeSurfaceMaterial:Material.fromType(Material.ColorType),this._domeSurfaceMaterial=void 0,this.showDomeLines=defaultValue$1(r[i(2915)],!![]),this[i(3494)]=defaultValue$1(r[i(3494)],!![]),this.intersectionColor=defaultValue$1(r.intersectionColor,Color$1.WHITE),this[i(3607)]=defaultValue$1(r.intersectionWidth,5),this[i(4001)]=defaultValue$1(r.showThroughEllipsoid,![]),this[i(e._0x5d86ad)]=void 0,this.showScanPlane=defaultValue$1(r.showScanPlane,!![]),this[i(e._0x189560)]=defaultValue$1(r.scanPlaneColor,Color$1[i(e._0x2ade8b)]),this.scanPlaneMode=defaultValue$1(r[i(739)],"horizontal"),this.scanPlaneRate=defaultValue$1(r[i(e._0x295917)],10),this._scanePlaneXHalfAngle=0,this[i(e._0x3c4794)]=0,this._time=JulianDate.now(),this._boundingSphere=new BoundingSphere$1,this._boundingSphereWC=new BoundingSphere$1,this[i(e._0x58279f)]=new DrawCommand({owner:this,primitiveType:PrimitiveType$1.TRIANGLES,boundingVolume:this._boundingSphereWC}),this[i(3078)]=new DrawCommand({owner:this,primitiveType:PrimitiveType$1[i(e._0x3326fa)],boundingVolume:this._boundingSphereWC}),this[i(e._0xdbfb3f)]=void 0,this[i(3545)]=new DrawCommand({owner:this,primitiveType:PrimitiveType$1[i(e._0x3c18dc)],boundingVolume:this[i(e._0x3ce69c)]}),this._sectorLineVA=void 0,this._sectorSegmentLineCommand=new DrawCommand({owner:this,primitiveType:PrimitiveType$1.LINES,boundingVolume:this._boundingSphereWC}),this._sectorSegmentLineVA=void 0,this._domeFrontCommand=new DrawCommand({owner:this,primitiveType:PrimitiveType$1[i(e._0x3326fa)],boundingVolume:this._boundingSphereWC}),this[i(e._0x281e9a)]=new DrawCommand({owner:this,primitiveType:PrimitiveType$1.TRIANGLES,boundingVolume:this._boundingSphereWC}),this._domeVA=void 0,this._domeLineCommand=new DrawCommand({owner:this,primitiveType:PrimitiveType$1.LINES,boundingVolume:this._boundingSphereWC}),this[i(e._0x53170a)]=void 0,this._scanPlaneFrontCommand=new DrawCommand({owner:this,primitiveType:PrimitiveType$1[i(730)],boundingVolume:this._boundingSphereWC}),this._scanPlaneBackCommand=new DrawCommand({owner:this,primitiveType:PrimitiveType$1.TRIANGLES,boundingVolume:this._boundingSphereWC}),this[i(1929)]=void 0,this[i(4171)]=[],this[i(2936)]=void 0,this._backFaceRS=void 0,this._sp=void 0,this._uniforms={u_type:function(){return 0},u_xHalfAngle:function(){return s[i(t._0x15db09)]},u_yHalfAngle:function(){return s.yHalfAngle},u_radius:function(){return s[i(3194)]},u_showThroughEllipsoid:function(){return s.showThroughEllipsoid},u_showIntersection:function(){return s.showIntersection},u_intersectionColor:function(){return s.intersectionColor},u_intersectionWidth:function(){return s.intersectionWidth},u_normalDirection:function(){return 1},u_lineColor:function(){return s.lineColor}},this._scanUniforms={u_xHalfAngle:function(){return s._scanePlaneXHalfAngle},u_yHalfAngle:function(){return s._scanePlaneYHalfAngle},u_radius:function(){return s.radius},u_color:function(){return s[i(1009)]},u_showThroughEllipsoid:function(){return s[i(4001)]},u_showIntersection:function(){return s.showIntersection},u_intersectionColor:function(){return s.intersectionColor},u_intersectionWidth:function(){return s[i(3607)]},u_normalDirection:function(){return 1},u_lineColor:function(){return s.lineColor}}}RectangularSensorPrimitive[_0x5e32ae(2392)].update=function(r){const e={_0x4d3b98:3042,_0x4e6bff:814,_0x282036:633,_0x522cca:3194,_0xe09127:2660,_0x30c0f0:4001,_0x360c5d:3577,_0x2d1188:1572,_0x1afe62:4182},t=_0x5e32ae,i=r.mode;if(!this.show||i!==SceneMode[t(3707)])return;let s=![],n=![],o=![];const c=this[t(e._0x4d3b98)],_=this[t(3248)];if(c<0||_<0)throw new DeveloperError$1("halfAngle must be greater than or equal to zero.");if(c===0||_===0)return;(this._xHalfAngle!==c||this._yHalfAngle!==_)&&(this._xHalfAngle=c,this[t(e._0x4e6bff)]=_,s=!![]);const l=this.radius;if(l<0)throw new DeveloperError$1(t(e._0x282036));let h=![];this._radius!==l&&(h=!![],this[t(1281)]=l,this._boundingSphere=new BoundingSphere$1(Cartesian3$3[t(4069)],this[t(e._0x522cca)])),(!Matrix4$1.equals(this.modelMatrix,this._modelMatrix)||h)&&(Matrix4$1[t(4246)](this.modelMatrix,this._modelMatrix),Matrix4$1.multiplyByUniformScale(this[t(2294)],this.radius,this._computedModelMatrix),BoundingSphere$1.transform(this[t(e._0xe09127)],this.modelMatrix,this[t(1870)]));const m=this.showThroughEllipsoid;this._showThroughEllipsoid!==this[t(e._0x30c0f0)]&&(this[t(3396)]=m,n=!![]);const g=this.material;this._material!==g&&(this._material=g,n=!![],o=!![]);const C=g.isTranslucent();if(this[t(e._0x360c5d)]!==C&&(this._translucent=C,n=!![]),this.showScanPlane){const M=r[t(e._0x2d1188)],T=JulianDate.secondsDifference(M,this._time);T<0&&(this._time=JulianDate.clone(M,this._time));const L=Math.max(T%this.scanPlaneRate/this.scanPlaneRate,0);let R;const D=new Matrix3$2;if(this[t(739)]==="horizontal"){R=2*_*L-_;const N=cos(R),k=tan(c),B=atan(N*k);this._scanePlaneXHalfAngle=B,this._scanePlaneYHalfAngle=R,Cesium__namespace.Matrix3[t(3592)](this._scanePlaneYHalfAngle,D)}else{R=2*c*L-c;const N=tan(_),k=cos(R),B=atan(k*N);this._scanePlaneXHalfAngle=R,this._scanePlaneYHalfAngle=B,Cesium__namespace.Matrix3[t(3501)](this._scanePlaneXHalfAngle,D)}Cesium__namespace.Matrix4.multiplyByMatrix3(this.modelMatrix,D,this._computedScanPlaneModelMatrix),Matrix4$1[t(e._0x1afe62)](this._computedScanPlaneModelMatrix,this.radius,this[t(3525)])}s&&createVertexArray(this,r),n&&createRenderState(this,m,C),o&&createShaderProgram(this,r,g),(n||o)&&createCommands(this,C);const E=r.commandList,P=r.passes,w=this._colorCommands;if(P.render)for(let M=0,T=w.length;M<T;M++){const L=w[M];E.push(L)}};const nScratch=new Cartesian3$3;function computeUnitPosiiton(r,e,t){const i={_0x144767:869},s=_0x5e32ae,n=r[s(i._0x144767)],o=cos(t),c=tan(t),_=cos(e),l=tan(e),h=atan(_*c),f=atan(o*l),m=[];for(let C=0;C<n;C++){const E=2*h*C/(n-1)-h;m.push(new Cartesian3$3(0,sin(E),cos(E)))}const g=[];for(let C=0;C<n;C++){const E=2*f*C/(n-1)-f;g.push(new Cartesian3$3(sin(E),0,cos(E)))}return{zoy:m,zox:g}}function computeSectorPositions(r,e){const t={_0x172602:3731,_0x296bee:3465,_0x5ab887:3501},i={_0x41d264:3916},s={_0x5551ae:2666},n=_0x5e32ae,o=r.xHalfAngle,c=r.yHalfAngle,_=e[n(1953)],l=e[n(t._0x172602)],h=[],f=new Matrix3$2;let m=Matrix3$2.fromRotationY(o,f);return h.push(_.map(function(g){return Matrix3$2[n(s._0x5551ae)](m,g,new Cesium__namespace.Cartesian3)})),m=Matrix3$2.fromRotationX(-c,f),h.push(l[n(t._0x296bee)](function(g){const C=n;return Matrix3$2.multiplyByVector(m,g,new Cesium__namespace[C(i._0x41d264)])}).reverse()),m=Matrix3$2[n(t._0x5ab887)](-o,f),h[n(3759)](_.map(function(g){return Matrix3$2.multiplyByVector(m,g,new Cesium__namespace.Cartesian3)}).reverse()),m=Matrix3$2[n(3592)](c,f),h[n(3759)](l.map(function(g){return Matrix3$2.multiplyByVector(m,g,new Cesium__namespace.Cartesian3)})),h}function createSectorVertexArray(r,e){const t={_0x27b5e1:3402,_0x28ba6e:2180},i=_0x5e32ae,s=Array[i(2392)][i(3611)].apply([],e).length-e.length,n=new Float32Array(2*3*3*s);let o=0;for(let h=0,f=e[i(3402)];h<f;h++){const m=e[h],g=Cartesian3$3.normalize(Cartesian3$3.cross(m[0],m[m[i(t._0x27b5e1)]-1],nScratch),nScratch);for(let C=0,E=m.length-1;C<E;C++)n[o++]=0,n[o++]=0,n[o++]=0,n[o++]=-g.x,n[o++]=-g.y,n[o++]=-g.z,n[o++]=m[C].x,n[o++]=m[C].y,n[o++]=m[C].z,n[o++]=-g.x,n[o++]=-g.y,n[o++]=-g.z,n[o++]=m[C+1].x,n[o++]=m[C+1].y,n[o++]=m[C+1].z,n[o++]=-g.x,n[o++]=-g.y,n[o++]=-g.z}const c=Buffer.createVertexBuffer({context:r,typedArray:n,usage:BufferUsage.STATIC_DRAW}),_=2*3*Float32Array.BYTES_PER_ELEMENT,l=[{index:attributeLocations[i(t._0x28ba6e)],vertexBuffer:c,componentsPerAttribute:3,componentDatatype:ComponentDatatype$1.FLOAT,offsetInBytes:0,strideInBytes:_},{index:attributeLocations.normal,vertexBuffer:c,componentsPerAttribute:3,componentDatatype:ComponentDatatype$1.FLOAT,offsetInBytes:3*Float32Array.BYTES_PER_ELEMENT,strideInBytes:_}];return new VertexArray({context:r,attributes:l})}function createSectorLineVertexArray(r,e){const t={_0x23a70e:3003,_0xa25431:2816},i=_0x5e32ae,s=e.length,n=new Float32Array(3*3*s);let o=0;for(let h=0,f=e.length;h<f;h++){const m=e[h];n[o++]=0,n[o++]=0,n[o++]=0,n[o++]=m[0].x,n[o++]=m[0].y,n[o++]=m[0].z}const c=Buffer.createVertexBuffer({context:r,typedArray:n,usage:BufferUsage[i(t._0x23a70e)]}),_=3*Float32Array.BYTES_PER_ELEMENT,l=[{index:attributeLocations[i(2180)],vertexBuffer:c,componentsPerAttribute:3,componentDatatype:ComponentDatatype$1[i(t._0xa25431)],offsetInBytes:0,strideInBytes:_}];return new VertexArray({context:r,attributes:l})}function createSectorSegmentLineVertexArray(r,e){const t={_0x168d42:2392,_0x196262:3611},i=_0x5e32ae,s=Array[i(t._0x168d42)][i(t._0x196262)].apply([],e).length-e[i(3402)],n=new Float32Array(3*3*s);let o=0;for(let h=0,f=e[i(3402)];h<f;h++){const m=e[h];for(let g=0,C=m.length-1;g<C;g++)n[o++]=m[g].x,n[o++]=m[g].y,n[o++]=m[g].z,n[o++]=m[g+1].x,n[o++]=m[g+1].y,n[o++]=m[g+1].z}const c=Buffer.createVertexBuffer({context:r,typedArray:n,usage:BufferUsage.STATIC_DRAW}),_=3*Float32Array.BYTES_PER_ELEMENT,l=[{index:attributeLocations.position,vertexBuffer:c,componentsPerAttribute:3,componentDatatype:ComponentDatatype$1.FLOAT,offsetInBytes:0,strideInBytes:_}];return new VertexArray({context:r,attributes:l})}function createDomeVertexArray(r){const e={_0xa7c52a:1910},t=_0x5e32ae,i=Cesium__namespace[t(e._0xa7c52a)].createGeometry(new Cesium__namespace.EllipsoidGeometry({vertexFormat:VertexFormat$1.POSITION_ONLY,stackPartitions:32,slicePartitions:32}));return VertexArray.fromGeometry({context:r,geometry:i,attributeLocations,bufferUsage:BufferUsage.STATIC_DRAW,interleave:![]})}function createDomeLineVertexArray(r){const e={_0x531f32:2507},t=_0x5e32ae,i=Cesium__namespace.EllipsoidOutlineGeometry[t(3871)](new Cesium__namespace[t(e._0x531f32)]({vertexFormat:VertexFormat$1.POSITION_ONLY,stackPartitions:32,slicePartitions:32}));return VertexArray[t(2443)]({context:r,geometry:i,attributeLocations,bufferUsage:BufferUsage.STATIC_DRAW,interleave:![]})}function createScanPlaneVertexArray(r,e){const t={_0x47fd06:2180},i=_0x5e32ae,s=e[i(3402)]-1,n=new Float32Array(3*3*s);let o=0;for(let h=0;h<s;h++)n[o++]=0,n[o++]=0,n[o++]=0,n[o++]=e[h].x,n[o++]=e[h].y,n[o++]=e[h].z,n[o++]=e[h+1].x,n[o++]=e[h+1].y,n[o++]=e[h+1].z;const c=Buffer.createVertexBuffer({context:r,typedArray:n,usage:BufferUsage.STATIC_DRAW}),_=3*Float32Array.BYTES_PER_ELEMENT,l=[{index:attributeLocations[i(t._0x47fd06)],vertexBuffer:c,componentsPerAttribute:3,componentDatatype:ComponentDatatype$1[i(2816)],offsetInBytes:0,strideInBytes:_}];return new VertexArray({context:r,attributes:l})}function createVertexArray(r,e){const t={_0x39fe56:1958,_0xf42be8:4072},i=_0x5e32ae,s=e.context,n=computeUnitPosiiton(r,r.xHalfAngle,r.yHalfAngle),o=computeSectorPositions(r,n);if(r.showLateralSurfaces&&(r._sectorVA=createSectorVertexArray(s,o)),r.showSectorLines&&(r._sectorLineVA=createSectorLineVertexArray(s,o)),r.showSectorSegmentLines&&(r._sectorSegmentLineVA=createSectorSegmentLineVertexArray(s,o)),r[i(1045)]&&(r[i(t._0x39fe56)]=createDomeVertexArray(s)),r.showDomeLines&&(r._domeLineVA=createDomeLineVertexArray(s)),r[i(2635)])if(r.scanPlaneMode==="horizontal"){const c=computeUnitPosiiton(r,CesiumMath$2.PI_OVER_TWO,0);r._scanPlaneVA=createScanPlaneVertexArray(s,c.zox)}else{const c=computeUnitPosiiton(r,0,CesiumMath$2[i(3151)]);r[i(t._0xf42be8)]=createScanPlaneVertexArray(s,c.zoy)}}function createCommonShaderProgram(r,e,t){const i=_0x5e32ae,s=e.context,n=RectangularSensorVS,o=new ShaderSource({sources:[RectangularSensor$1,t[i(440)],RectangularSensorFS]});r._sp=ShaderProgram.replaceCache({context:s,shaderProgram:r._sp,vertexShaderSource:n,fragmentShaderSource:o,attributeLocations});const c=new ShaderSource({sources:[RectangularSensor$1,t.shaderSource,RectangularSensorFS],pickColorQualifier:"uniform"});r._pickSP=ShaderProgram.replaceCache({context:s,shaderProgram:r._pickSP,vertexShaderSource:n,fragmentShaderSource:c,attributeLocations})}function createScanPlaneShaderProgram(r,e,t){const i={_0xefef12:3379,_0x3c2ac8:3379},s=_0x5e32ae,n=e.context,o=RectangularSensorVS,c=new ShaderSource({sources:[RectangularSensor$1,t.shaderSource,RectangularSensorScanPlaneFS]});r[s(i._0xefef12)]=ShaderProgram.replaceCache({context:n,shaderProgram:r[s(i._0x3c2ac8)],vertexShaderSource:o,fragmentShaderSource:c,attributeLocations})}function createShaderProgram(r,e,t){const i={_0x18d43e:2635},s=_0x5e32ae;createCommonShaderProgram(r,e,t),r[s(i._0x18d43e)]&&createScanPlaneShaderProgram(r,e,t)}function createRenderState(r,e,t){const i={_0x280f8e:1880,_0x1f9eee:2185},s=_0x5e32ae;t?(r._frontFaceRS=RenderState.fromCache({depthTest:{enabled:!e},depthMask:![],blending:BlendingState[s(i._0x280f8e)],cull:{enabled:!![],face:CullFace.BACK}}),r[s(2123)]=RenderState.fromCache({depthTest:{enabled:!e},depthMask:![],blending:BlendingState[s(1880)],cull:{enabled:!![],face:CullFace.FRONT}}),r[s(799)]=RenderState.fromCache({depthTest:{enabled:!e},depthMask:![],blending:BlendingState[s(i._0x280f8e)]})):(r._frontFaceRS=RenderState.fromCache({depthTest:{enabled:!e},depthMask:!![]}),r._pickRS=RenderState[s(i._0x1f9eee)]({depthTest:{enabled:!![]},depthMask:!![]}))}function createCommand(r,e,t,i,s,n,o,c,_,l,h,f){const m={_0x242c53:1070,_0x4c41ef:2504},g=_0x5e32ae;l&&t&&(t.vertexArray=o,t.renderState=s,t.shaderProgram=n,t[g(995)]=combine$1(c,r[g(2386)][g(m._0x242c53)]),t.uniformMap.u_normalDirection=function(){return-1},t.pass=h,t.modelMatrix=_,r._colorCommands.push(t)),e.vertexArray=o,e[g(m._0x4c41ef)]=i,e.shaderProgram=n,e[g(995)]=combine$1(c,r._material._uniforms),f&&(e[g(995)].u_type=function(){return 1}),e.pass=h,e.modelMatrix=_,r._colorCommands.push(e)}function createCommands(r,e){const t={_0x54b577:587,_0x14063a:2983,_0x41a58f:2936,_0x2cb610:2123,_0x7835d1:2474,_0x319bbd:1070,_0xed4032:1714},i=_0x5e32ae;r._colorCommands.length=0;const s=e?Pass[i(t._0x54b577)]:Pass.OPAQUE;r.showLateralSurfaces&&createCommand(r,r[i(t._0x14063a)],r._sectorBackCommand,r[i(t._0x41a58f)],r[i(2123)],r._sp,r[i(1873)],r._uniforms,r._computedModelMatrix,e,s),r.showSectorLines&&createCommand(r,r._sectorLineCommand,void 0,r._frontFaceRS,r[i(t._0x2cb610)],r[i(t._0x7835d1)],r._sectorLineVA,r._uniforms,r._computedModelMatrix,e,s,!![]),r.showSectorSegmentLines&&createCommand(r,r._sectorSegmentLineCommand,void 0,r._frontFaceRS,r._backFaceRS,r._sp,r._sectorSegmentLineVA,r[i(t._0x319bbd)],r[i(536)],e,s,!![]),r[i(1045)]&&createCommand(r,r._domeFrontCommand,r._domeBackCommand,r[i(2936)],r._backFaceRS,r._sp,r._domeVA,r[i(1070)],r._computedModelMatrix,e,s),r[i(2915)]&&createCommand(r,r._domeLineCommand,void 0,r._frontFaceRS,r._backFaceRS,r._sp,r._domeLineVA,r._uniforms,r._computedModelMatrix,e,s,!![]),r.showScanPlane&&createCommand(r,r._scanPlaneFrontCommand,r[i(t._0xed4032)],r[i(2936)],r[i(2123)],r._scanePlaneSP,r._scanPlaneVA,r._scanUniforms,r._computedScanPlaneModelMatrix,e,s)}const AssociativeArray=Cesium__namespace.AssociativeArray,Cartesian3$2=Cesium__namespace.Cartesian3,Color=Cesium__namespace.Color,defined$2=Cesium__namespace.defined,DeveloperError=Cesium__namespace.DeveloperError,Matrix3$1=Cesium__namespace[_0x5e32ae(3768)],Matrix4=Cesium__namespace.Matrix4,Quaternion$1=Cesium__namespace.Quaternion,MaterialProperty=Cesium__namespace.MaterialProperty,Property=Cesium__namespace.Property,matrix3Scratch=new Matrix3$1,cachedPosition=new Cartesian3$2,cachedGazePosition=new Cartesian3$2,cachedOrientation=new Quaternion$1,diffVectorScratch=new Cartesian3$2,orientationScratch=new Quaternion$1;function removePrimitive(r,e,t){const i=e[r.id];if(Cesium__namespace.defined(i)){const s=i.primitive;try{t.remove(s)}catch{}s.isDestroyed&&!s.isDestroyed()&&s.destroy(),delete e[r.id]}}function RectangularSensorVisualizer(r,e){const t={_0x10b893:1e3,_0x161023:2110},i=_0x5e32ae;if(!defined$2(r))throw new DeveloperError("scene is required.");if(!defined$2(e))throw new DeveloperError("entityCollection is required.");e[i(3567)].addEventListener(RectangularSensorVisualizer.prototype._onCollectionChanged,this),this._scene=r,this._primitives=r[i(t._0x10b893)],this._entityCollection=e,this[i(t._0x161023)]={},this._entitiesToVisualize=new AssociativeArray,this._onCollectionChanged(e,e.values,[],[])}RectangularSensorVisualizer.prototype.update=function(r){const e={_0x65763c:2110,_0x93c970:920,_0x3e8892:3260,_0x261135:2469,_0x4752c7:1281,_0x4dcadd:575,_0x46c782:3916,_0x29a37b:3651,_0x2fbee3:908,_0x5f87b7:4246,_0x23a179:3194,_0x3ea4f9:2617,_0x1b0009:2386,_0x1d4981:4001,_0x4c0489:2777},t=_0x5e32ae;if(!defined$2(r))throw new DeveloperError("time is required.");const i=this._entitiesToVisualize.values,s=this[t(e._0x65763c)],n=this[t(4154)];let o,c,_,l,h;for(let f=0,m=i.length;f<m;f++){const g=i[f],C=g[t(e._0x93c970)];let E=s[g.id],P=g.isShowing&&g.isAvailable(r)&&Property[t(2777)](C._show,r,!![]);if(P&&(o=Property[t(e._0x3e8892)](g[t(918)],r,cachedPosition),c=Property.getValueOrUndefined(g[t(e._0x261135)],r,cachedOrientation),_=Property.getValueOrUndefined(C[t(e._0x4752c7)],r),l=Property.getValueOrUndefined(C._xHalfAngle,r),h=Property.getValueOrUndefined(C._yHalfAngle,r),P=defined$2(o)&&defined$2(l)&&defined$2(h)),!P){defined$2(E)&&(E.primitive[t(e._0x4dcadd)]=![]);continue}let w=defined$2(E)?E.primitive:void 0;!defined$2(w)&&(w=new RectangularSensorPrimitive,w.id=g,n.add(w),E={primitive:w,position:void 0,orientation:void 0},s[g.id]=E);const M=Property[t(3260)](C._gaze,r);if(defined$2(M)){const T=Property.getValueOrUndefined(M._position,r,cachedGazePosition);if(!defined$2(o)||!defined$2(T))continue;const L=Cartesian3$2[t(1531)](o,T,diffVectorScratch),R=Cartesian3$2[t(1701)](Cesium__namespace[t(e._0x46c782)].UNIT_Z,L),D=Cartesian3$2.cross(Cesium__namespace[t(e._0x46c782)].UNIT_Z,L,diffVectorScratch);c=Quaternion$1[t(2735)](D,R-Math.PI,orientationScratch),_=Cartesian3$2.distance(o,T),w.modelMatrix=Matrix4[t(e._0x29a37b)](Matrix3$1[t(767)](c,matrix3Scratch),o,w[t(2294)])}else(!Cartesian3$2.equals(o,E.position)||!Quaternion$1.equals(c,E[t(e._0x2fbee3)]))&&(defined$2(c)?(w.modelMatrix=Matrix4[t(e._0x29a37b)](Matrix3$1.fromQuaternion(c,matrix3Scratch),o,w.modelMatrix),E[t(2180)]=Cartesian3$2.clone(o,E.position),E.orientation=Quaternion$1[t(e._0x5f87b7)](c,E.orientation)):(w[t(2294)]=Cesium__namespace.Transforms[t(3684)](o),E.position=Cartesian3$2[t(e._0x5f87b7)](o,E.position)));w.show=!![],w[t(3422)]=M,w[t(e._0x23a179)]=_,w.xHalfAngle=l,w.yHalfAngle=h,w[t(2829)]=Property.getValueOrDefault(C[t(e._0x3ea4f9)],r,Color[t(2995)]),w[t(2896)]=Property[t(2777)](C._showSectorLines,r,!![]),w.showSectorSegmentLines=Property.getValueOrDefault(C._showSectorSegmentLines,r,!![]),w[t(1841)]=Property.getValueOrDefault(C[t(1700)],r,!![]),w[t(1877)]=MaterialProperty.getValue(r,C[t(e._0x1b0009)],w.material),w.showDomeSurfaces=Property.getValueOrDefault(C._showDomeSurfaces,r,!![]),w.showDomeLines=Property.getValueOrDefault(C._showDomeLines,r,!![]),w.showIntersection=Property.getValueOrDefault(C._showIntersection,r,!![]),w.intersectionColor=Property.getValueOrDefault(C[t(3887)],r,Color.WHITE),w.intersectionWidth=Property.getValueOrDefault(C._intersectionWidth,r,1),w[t(e._0x1d4981)]=Property.getValueOrDefault(C._showThroughEllipsoid,r,![]),w.scanPlaneMode=Property.getValueOrDefault(C._scanPlaneMode,r),w.scanPlaneColor=Property[t(e._0x4c0489)](C[t(904)],r,Color.WHITE),w[t(2635)]=Property.getValueOrDefault(C._showScanPlane,r,!![]),w[t(662)]=Property.getValueOrDefault(C._scanPlaneRate,r,1)}return!![]},RectangularSensorVisualizer.prototype.isDestroyed=function(){return![]},RectangularSensorVisualizer.prototype[_0x5e32ae(757)]=function(){const r={_0x5624de:2110,_0xdb7524:1988},e=_0x5e32ae,t=this._entitiesToVisualize.values,i=this[e(r._0x5624de)],s=this._primitives;for(let n=t.length-1;n>-1;n--)removePrimitive(t[n],i,s);for(const n in this)delete this[n];return Cesium__namespace[e(r._0xdb7524)](this)},RectangularSensorVisualizer[_0x5e32ae(2392)][_0x5e32ae(3609)]=function(r,e,t,i){const s={_0x4f8d79:1502,_0x5befd1:920,_0x4de489:2004},n=_0x5e32ae,o=this._entitiesToVisualize;if(!o)return;const c=this._hash,_=this._primitives;let l,h;for(l=e.length-1;l>-1;l--)h=e[l],defined$2(h._rectangularSensorMars)&&defined$2(h._position)&&o[n(s._0x4f8d79)](h.id,h);for(l=i.length-1;l>-1;l--)h=i[l],defined$2(h[n(s._0x5befd1)])&&defined$2(h._position)?o[n(1502)](h.id,h):(removePrimitive(h,c,_),o[n(s._0x4de489)](h.id));for(l=t[n(3402)]-1;l>-1;l--)h=t[l],removePrimitive(h,c,_),o.remove(h.id)};const originalDefaultVisualizersCallback=Cesium__namespace.DataSourceDisplay.defaultVisualizersCallback;Cesium__namespace[_0x5e32ae(2943)][_0x5e32ae(1753)]=function(r,e,t){const i=t.entities;return originalDefaultVisualizersCallback(r,e,t).concat([new RectangularSensorVisualizer(r,i)])};class RectangularSensor extends BasePointEntity{get[_0x5e32ae(2189)](){const e=_0x5e32ae;var t;return(t=this[e(3579)])===null||t===void 0?void 0:t.rectangularSensorMars}get radius(){return this.style.radius}set radius(e){const t={_0x2d0729:2189},i=_0x5e32ae;this.style.radius=e,this._entity&&(this[i(t._0x2d0729)].radius=e)}_mountedHook(){const e={_0x33730c:3579},t=_0x5e32ae,i={position:this.position,orientation:this[t(4002)](),rectangularSensorMars:new RectangularSensorGraphics(RectangularSensorStyleConver.toCesiumVal(this.style))};this[t(e._0x33730c)]=this._createEntity(i),this.style.label&&this._addLabel()}_updateStyleHook(e,t){const i={_0x30a7b8:3579,_0x379596:3579},s=_0x5e32ae;if(this[s(i._0x30a7b8)]&&this.isAdded){const n=this._layer.dataSource;n.entities.remove(this[s(i._0x379596)]),delete this[s(i._0x379596)],this[s(3118)](),n.entities.add(this._entity)}}_updateEntityOpacity(e,t){const i={_0x24b3e7:515},s=_0x5e32ae,n=e==null?void 0:e.material;if(!n)return![];const o=getCesiumColor(n.color,Cesium__namespace.Color[s(2995)]);return!Cesium__namespace[s(i._0x24b3e7)](this._material_color_alpha)&&(this._material_color_alpha=o[s(1202)]),n.color=o.withAlpha(this._material_color_alpha*t),!![]}[_0x5e32ae(3328)](e){const t={_0x16d028:515,_0x4208a8:3180,_0x5363b4:1202,_0x14f5d2:1009},i=_0x5e32ae,s=getCesiumColor(this.entityGraphic[i(2829)],Cesium__namespace.Color.WHITE);!Cesium__namespace[i(t._0x16d028)](this._lineColor_alpha)&&(this._lineColor_alpha=s.alpha),this.entityGraphic.lineColor=s.withAlpha(this._lineColor_alpha*e);const n=getCesiumColor(this.entityGraphic.scanPlaneColor,Cesium__namespace.Color.WHITE);!Cesium__namespace.defined(this[i(t._0x4208a8)])&&(this._scanPlaneColor_alpha=n[i(t._0x5363b4)]),this.entityGraphic[i(t._0x14f5d2)]=n.withAlpha(this._scanPlaneColor_alpha*e)}_style2Json(e,t){return RectangularSensorStyleConver.toJSON(e,t,!![])}}register$4("rectangularSensor",RectangularSensor,!![]);const DEF_STYLE$m={distance:.1,perPositionHeight:!![],showFrustum:![],opacity:1,flipx:![],flipy:![]};class Video2D extends PolygonEntity{constructor(e={}){const t={_0x45c1c2:4114},i=_0x5e32ae;e[i(t._0x45c1c2)]={...DEF_STYLE$m,...e.style||{}},super(e),e.position&&(this.position=e.position),this[i(2584)]=!![]}get[_0x5e32ae(1830)](){const e={_0x409d98:3759,_0x19e7e7:934},t=_0x5e32ae;let i=[];return this._frustumPrimitive&&i[t(e._0x409d98)](this._frustumPrimitive),this._entity_label&&i[t(3759)](this[t(4170)]),this._entity_outlines&&(i=i[t(3611)](this[t(e._0x19e7e7)])),i}get[_0x5e32ae(2180)](){return getPositionValue(this._position)}set position(e){const t={_0x1fd65e:2359,_0x3185a9:4119},i=_0x5e32ae;var s;this[i(t._0x1fd65e)]=LngLatPoint[i(1426)](e),this._position=(s=this._point)===null||s===void 0?void 0:s[i(2048)](),this._entity&&(this[i(t._0x3185a9)](),this._updateDraw(),this._bindHierarchy())}get point(){return this[_0x5e32ae(2359)]}get coordinate(){const e={_0x5f88b3:3381,_0x4ef495:725},t=_0x5e32ae;return this[t(e._0x5f88b3)][t(e._0x4ef495)]()}get[_0x5e32ae(589)](){const e={_0x46f168:589},t=_0x5e32ae;return this.options[t(e._0x46f168)]}set targetPosition(e){const t={_0x19c89c:3798,_0x5ef0d8:589,_0xe6a417:3029,_0xce02ef:1531,_0x5649b1:3916,_0xf1ee17:4114,_0x2a5b6a:2625,_0x1fa93d:2625,_0x30b998:1757},i=_0x5e32ae;var s;if(this[i(t._0x19c89c)][i(t._0x5ef0d8)]=e,!this[i(1890)])return;const n=this[i(2180)];if(!n)return;const o=LngLatPoint.toCartesian(e,(s=this._map)===null||s===void 0?void 0:s.currentTime);this.distance=Cesium__namespace.Cartesian3[i(2776)](n,o);const c=Cesium__namespace.Cartesian3[i(t._0xe6a417)](Cesium__namespace.Cartesian3[i(t._0xce02ef)](o,n,new Cesium__namespace.Cartesian3),new Cesium__namespace[i(t._0x5649b1)]),_=Cesium__namespace.Cartesian3.normalize(n,new Cesium__namespace.Cartesian3),l=new Cesium__namespace[i(1696)](this._map[i(3107)]);l.position=n,l.direction=c,l.up=_,this.style.heading=Cesium__namespace.Math.toDegrees(l.heading),this[i(t._0xf1ee17)][i(t._0x2a5b6a)]=Cesium__namespace.Math.toDegrees(l[i(t._0x1fa93d)]),this[i(t._0x30b998)](),this._bindHierarchy()}get heading(){const e=_0x5e32ae;return this.style[e(3977)]??0}set heading(e){const t=_0x5e32ae;this.style[t(3977)]=e,this._updateDraw(),this._bindHierarchy()}get pitch(){const e={_0x181a62:4114,_0x5166ea:2625},t=_0x5e32ae;return this[t(e._0x181a62)][t(e._0x5166ea)]??0}set[_0x5e32ae(2625)](e){this.style.pitch=e,this._updateDraw(),this._bindHierarchy()}get[_0x5e32ae(4175)](){const e={_0x43c48a:4175},t=_0x5e32ae;return this[t(4114)][t(e._0x43c48a)]??0}set[_0x5e32ae(4175)](e){const t=_0x5e32ae;this[t(4114)].roll=e,this._updateDraw(),this[t(1698)]()}get[_0x5e32ae(1314)](){const e=_0x5e32ae;return this.style[e(1314)]}set angle(e){const t={_0x2f4a11:4114},i=_0x5e32ae;this[i(t._0x2f4a11)].angle=e,this._updateDraw(),this[i(1698)]()}get angle2(){return this[_0x5e32ae(4114)].angle2??this.style.angle}set angle2(e){const t={_0x35421d:4114},i=_0x5e32ae;this[i(t._0x35421d)].angle2=e,this._updateDraw(),this._bindHierarchy()}get[_0x5e32ae(2776)](){return this[_0x5e32ae(4114)].distance}set distance(e){const t={_0x1a2ca8:2776},i=_0x5e32ae;this[i(4114)][i(t._0x1a2ca8)]=e,this._updateDraw(),this._bindHierarchy()}get opacity(){return this.style.opacity}set[_0x5e32ae(3776)](e){const t={_0x28c3a2:652},i=_0x5e32ae;this[i(4114)][i(3776)]=e,this._entity&&(this._entity.polygon.material[i(1109)]._value.alpha=e,this._entity[i(t._0x28c3a2)][i(1877)].transparent=e!==1)}get flipx(){return this[_0x5e32ae(4114)].flipx}set flipx(e){const t={_0x3ecee5:1877},i=_0x5e32ae;this.style.flipx=e,this._entity&&(this._entity.polygon[i(t._0x3ecee5)][i(3195)]=e)}get showFrustum(){return this.style.showFrustum}set showFrustum(e){this.style.showFrustum=e,this._frustumPrimitive.show=e}get play(){return this._videoPlay}set play(e){const t={_0x57679b:2044},i=_0x5e32ae;if(this._videoPlay=e,!!this._videoContainer)try{this._videoPlay?this[i(2710)].play():this._videoContainer[i(t._0x57679b)]()}catch{}}updateVideoContainer(){const e={_0x38ec67:1221,_0x27907e:4114,_0x5275ea:3776},t=_0x5e32ae;var i;this._hasRemoveElement&&(i=this._videoContainer)!==null&&i!==void 0&&i[t(2214)]&&(this._videoContainer.parentNode.removeChild(this._videoContainer),delete this[t(3296)],delete this[t(2710)]),this.style[t(e._0x38ec67)]?(this._videoContainer=createVideo(this.style.url,this[t(4114)].fileType,"",document.body),this._videoContainer.style.display="none",this[t(3296)]=!![]):this[t(e._0x27907e)].container&&(this._videoContainer=this.style.container),this._videoContainer&&(this._entity.polygon.material=new Image2MaterialProperty({image:this._videoContainer,color:Cesium__namespace.Color.WHITE.withAlpha(this.style[t(e._0x5275ea)]),transparent:this[t(e._0x27907e)].opacity!==1,flipx:this.style[t(3195)],flipy:this[t(4114)][t(2260)]}))}_mountedHook(){const e={_0x28cb16:3399},t=_0x5e32ae;super._mountedHook(),this[t(3798)].targetPosition&&(this.targetPosition=this.options.targetPosition),this[t(e._0x28cb16)]()}[_0x5e32ae(3601)](e,t){const i={_0x10c2fe:3601,_0x129984:3399},s=_0x5e32ae;super[s(i._0x10c2fe)](e,t),(t.url||t.container)&&this[s(i._0x129984)]()}_addedHook(e){const t=_0x5e32ae;this[t(1757)](),this._bindHierarchy(),this.dataSource.entities[t(4084)](this._entity)}[_0x5e32ae(2442)](){const e={_0x273d04:2004,_0x9428d6:3296,_0xb8940:2710},t=_0x5e32ae;var i;this._frustumPrimitive&&(this._layer.primitiveCollection.remove(this._frustumPrimitive),delete this._frustumPrimitive),this.dataSource.entities[t(e._0x273d04)](this._entity),this._hasRemoveElement&&(i=this[t(2710)])!==null&&i!==void 0&&i.parentNode&&(this._videoContainer.parentNode.removeChild(this._videoContainer),delete this[t(e._0x9428d6)],delete this[t(e._0xb8940)])}[_0x5e32ae(1757)](){const e={_0x204391:1567,_0x5ce458:1890,_0x4ca4a5:1567,_0x343585:2548,_0x459bb6:3916,_0x50f0a2:1314,_0x592952:512,_0x21a5ce:3916,_0x172ad8:3916,_0x2978f5:916,_0x34f120:3916,_0x5461ec:3916,_0x1c0dc6:916,_0x321795:916,_0x448ca0:4316,_0x24401f:3916},t=_0x5e32ae;if(!this[t(1890)])return;const i=this[t(2180)];if(!i)return;const s=new Cesium__namespace.HeadingPitchRoll(Cesium__namespace.Math[t(1567)](this[t(3977)]),Cesium__namespace[t(1286)][t(e._0x204391)](this.pitch),Cesium__namespace.Math[t(1567)](this.roll)),n=new Cesium__namespace.Camera(this[t(e._0x5ce458)].scene);n.position=i,n.frustum.fov=Cesium__namespace[t(1286)][t(e._0x4ca4a5)](this.angle*2),n[t(2801)].aspectRatio=this.angle/this[t(e._0x343585)],n.frustum.near=.01,n[t(2801)].far=this[t(4114)].distance,n.setView({destination:i,orientation:{heading:s.heading,pitch:s.pitch,roll:s.roll}}),this._createFrustumPrimitive(n);const o=n[t(3779)],c=n.upWC,_=n.rightWC,l=new Cesium__namespace.Ray(i,o),h=Cesium__namespace.Ray.getPoint(l,this.style.distance,new Cesium__namespace[t(e._0x459bb6)]),f=Cesium__namespace.Math.toRadians(this[t(e._0x50f0a2)]),m=Math.tan(f),g=this.style.distance*m,C=g/n.frustum[t(e._0x592952)],E=Math.sqrt(g*g+C*C),P=new Cesium__namespace.Cartesian3,w=new Cesium__namespace[t(916)](h,_),M=Cesium__namespace[t(916)].getPoint(w,g,new Cesium__namespace[t(e._0x21a5ce)]),T=new Cesium__namespace[t(916)](M,c);Cesium__namespace.Ray.getPoint(T,C,P);const L=new Cesium__namespace[t(3916)],R=Cesium__namespace[t(e._0x172ad8)][t(2633)](c,new Cesium__namespace.Cartesian3),D=new Cesium__namespace[t(e._0x2978f5)](M,R);Cesium__namespace.Ray.getPoint(D,C,L);const N=new Cesium__namespace.Cartesian3,k=Cesium__namespace.Cartesian3.normalize(Cesium__namespace[t(e._0x34f120)].subtract(h,P,new Cesium__namespace[t(e._0x5461ec)]),new Cesium__namespace.Cartesian3),B=new Cesium__namespace[t(e._0x1c0dc6)](h,k);Cesium__namespace[t(e._0x321795)][t(e._0x448ca0)](B,E,N);const $=new Cesium__namespace[t(e._0x24401f)],H=Cesium__namespace.Cartesian3[t(3029)](Cesium__namespace.Cartesian3.subtract(h,L,new Cesium__namespace.Cartesian3),new Cesium__namespace.Cartesian3),W=new Cesium__namespace.Ray(h,H);Cesium__namespace.Ray.getPoint(W,E,$);const J=[$,P,L,N];this._positions=J}_bindHierarchy(){const e={_0x591b51:3703,_0x57c52e:918,_0x491997:1160,_0x4df7b7:2238},t=_0x5e32ae;if(this._entity)if(this._position instanceof Cesium__namespace[t(e._0x591b51)]||this[t(e._0x57c52e)]instanceof Cesium__namespace[t(e._0x491997)]){const i=new Cesium__namespace.PolygonHierarchy;this._entity.polygon.hierarchy=new Cesium__namespace.CallbackProperty(s=>(this._updateDraw(),i.positions=this._positions,i),![])}else this[t(3579)][t(652)].hierarchy=new Cesium__namespace[t(e._0x4df7b7)](this._positions)}_createFrustumPrimitive(e){const t={_0x7b228b:3768,_0x114437:3360,_0x848c20:930,_0x962d3d:2709,_0xfd5e9e:2180,_0x5d49e0:4287},i=_0x5e32ae,s=e.directionWC,n=e.upWC;let o=e.rightWC;o=Cesium__namespace.Cartesian3[i(2633)](o,new Cesium__namespace.Cartesian3);const c=new Cesium__namespace.Matrix3;Cesium__namespace[i(t._0x7b228b)].setColumn(c,0,o,c),Cesium__namespace.Matrix3.setColumn(c,1,n,c),Cesium__namespace.Matrix3[i(t._0x114437)](c,2,s,c);const _=Cesium__namespace.Quaternion.fromRotationMatrix(c,new Cesium__namespace[i(2988)]);this[i(560)]&&this._layer[i(t._0x848c20)][i(2004)](this._frustumPrimitive),this._frustumPrimitive=new Cesium__namespace[i(1101)]({geometryInstances:new Cesium__namespace[i(t._0x962d3d)]({id:this.id,geometry:new Cesium__namespace[i(2959)]({origin:e[i(t._0xfd5e9e)],orientation:_,frustum:e.frustum,_drawNearPlane:!![]}),attributes:{color:Cesium__namespace[i(2261)].fromColor(Cesium__namespace.Color[i(t._0x5d49e0)])}}),appearance:new Cesium__namespace[i(2804)]({translucent:![],flat:!![]}),asynchronous:![],show:this.showFrustum&&this[i(575)]}),this._layer.primitiveCollection.add(this._frustumPrimitive)}[_0x5e32ae(1378)](e,t){const i={_0x251403:3290},s=_0x5e32ae,n=getAttrVal(e,{onlySimpleType:!![]});return this.style.container&&(n[s(i._0x251403)]=s(909)+this._videoContainer.id+")"),n}_getGeoJsonGeometry(e){return{type:"Point",coordinates:this.getCoordinate(e==null?void 0:e.noAlt)}}getCoordinate(e){const t={_0xfe2ade:3381},i=_0x5e32ae;return this.point?this[i(t._0xfe2ade)].toArray(e):[]}setView(){const e={_0x39250c:1890,_0x52a0dd:2792},t=_0x5e32ae;this._map&&this[t(e._0x39250c)][t(e._0x52a0dd)].setView({destination:this.position,orientation:{heading:Cesium__namespace.Math.toRadians(this.heading),pitch:Cesium__namespace.Math[t(1567)](this.pitch),roll:Cesium__namespace.Math.toRadians(this.roll)}})}startDraw(e){const t={_0x5863b4:4133,_0x48c910:1404},i=_0x5e32ae;if(this._enabledDraw)return this;if(this._enabledDraw=!![],e&&this.addTo(e),!this._map)throw new Error("绘制时_map不能为空,请将对象添加到图层，并且图层已添加到Map");this._map._setEditCursor(!![]),this[i(t._0x5863b4)](![]),this._startDrawHook(),this[i(t._0x48c910)](EventType.drawStart,{drawtype:this.type,graphic:this},!![])}stopDraw(){const e={_0x7a16c3:3635,_0x58bb90:2776,_0x3f5bd6:1404,_0x25a2c9:3798,_0x3530a4:3110,_0x350987:4056},t=_0x5e32ae;var i,s,n;if(!this._enabledDraw)return this;if(this[t(1940)](),this._map._setEditCursor(![]),this.enableControl(!![]),this[t(1890)][t(e._0x7a16c3)](),this._enabledDraw=![],!this.position||!this[t(e._0x58bb90)]){this.remove(!![]);return}this[t(e._0x3f5bd6)](EventType.drawCreated,{drawtype:this.type,graphic:this},!![]),(i=this.options)!==null&&i!==void 0&&i.success&&this[t(e._0x25a2c9)].success(this),(s=this.options)!==null&&s!==void 0&&(n=s[t(e._0x3530a4)])!==null&&n!==void 0&&n[t(e._0x350987)]&&this[t(3798)]._promise[t(4056)](this)}_startDrawHook(){const e={_0x270888:1948},t=_0x5e32ae;this._map.on(EventType[t(e._0x270888)],this._onClickHandler,this),this._map.on(EventType.mouseMove,this[t(524)],this)}_stopDrawHook(){const e={_0x3a185a:1890,_0x50a41e:1220,_0x1bf4c4:4055,_0x3153e7:524},t=_0x5e32ae;this[t(e._0x3a185a)][t(e._0x50a41e)](EventType.click,this._onClickHandler,this),this._map[t(e._0x50a41e)](EventType[t(e._0x1bf4c4)],this[t(e._0x3153e7)],this)}[_0x5e32ae(1290)](e){const t=_0x5e32ae,i=e.cartesian;if(i){if(this.fire(EventType[t(2038)],{...e,drawtype:this.type,graphic:this},!![]),!this.position){this.position=i;return}this.targetPosition=i,this.stopDraw(),this[t(1404)](EventType.drawCreated,e)}}_onMouseMoveHandler(e){const t={_0x3b10c0:698},i=_0x5e32ae,s=e[i(t._0x3b10c0)];if(!s)return;this.position?(this.targetPosition=s,this.fire(EventType.drawMouseMove,{...e,drawtype:this.type,graphic:this},!![]),this._map.openSmallTooltip(e.endPosition,this._map.getLangText("_单击完成绘制"))):this._map.openSmallTooltip(e.endPosition,this._map.getLangText("_单击开始绘制"))}}register$4("video2D",Video2D,!![]);class PitEntity extends BasePolyEntity{constructor(e={}){const t={_0x4ecfc5:4114},i=_0x5e32ae;super(e),this[i(t._0x4ecfc5)].diffHeight=this.style.diffHeight??10,this[i(4114)].splitNum=this[i(4114)].splitNum??50}get diffHeight(){return this.style.diffHeight}set diffHeight(e){const t={_0xb137f9:3579,_0x5cf17a:2714,_0x11d448:3795},i=_0x5e32ae;if(this.style.diffHeight=e,this[i(t._0xb137f9)]){const s=this[i(905)]-this.style.diffHeight;this._entity.polygon.height=s;const n=Array(this[i(t._0x5cf17a)].length).fill(s);this._entity[i(t._0x11d448)].minimumHeights=n}}[_0x5e32ae(3118)](){const e={_0x4aeb08:931,_0x1a75bb:3865,_0x2b2134:2497,_0x468e69:3573,_0x51b1a1:953,_0x4a173e:905,_0xa074a7:3051},t=_0x5e32ae,i=this.options[t(931)]||this._getPitData();this[t(e._0x4aeb08)]=i;const s={polygon:new Cesium__namespace[t(1038)]({hierarchy:new Cesium__namespace.PolygonHierarchy(this.positions),perPositionHeight:![],height:i[t(e._0x1a75bb)],material:new Cesium__namespace.ImageMaterialProperty({image:this.style.imageBottom,repeat:new Cesium__namespace[t(e._0x2b2134)](2,2),transparent:![]}),fill:!![],outline:![]}),wall:{positions:i[t(e._0x468e69)],minimumHeights:i.minimumHeights,maximumHeights:i[t(3051)],fill:!![],material:new Cesium__namespace[t(e._0x51b1a1)]({image:this.style.image,repeat:new Cesium__namespace.Cartesian2(1,1)}),outline:![]}};this._entity=this._createEntity(s),this[t(e._0x4a173e)]=i.minHeight,this[t(2714)]=i.positionsWall,this._wallHeights=i[t(e._0xa074a7)],this.style.label&&this._addLabel()}_getPitData(){const e={_0x57ec3f:3107,_0x320ecc:4114,_0x5cf436:1193},t=_0x5e32ae,i=this.positions,s=interPolyline({scene:this._map[t(e._0x57ec3f)],positions:i.concat(i[0]),splitNum:this[t(e._0x320ecc)].splitNum}),n=[];let o=Number.MAX_VALUE;for(let l=0,h=s.length;l<h;l++){const f=Cesium__namespace.Cartographic[t(3236)](s[l]);o=Math[t(e._0x5cf436)](o,f.height),n.push(f.height)}const c=o-this[t(e._0x320ecc)].diffHeight,_=Array(s.length)[t(4198)](c);return{height:c,minHeight:o,positionsWall:s,minimumHeights:_,maximumHeights:n}}setUpHeight(e){const t={_0xdd43c5:3402,_0x50d974:3759,_0x52dd9e:3579},i=_0x5e32ae,s=this._minHeight-this.style.diffHeight,n=s+e,o=[],c=[];for(let _=0,l=this._wallHeights[i(t._0xdd43c5)];_<l;_++){const h=this._wallHeights[_];c[i(t._0x50d974)](h+e),o[i(3759)](n)}this._entity&&(this[i(t._0x52dd9e)][i(652)].height=s,this._entity[i(3795)].minimumHeights=o,this[i(t._0x52dd9e)].wall.maximumHeights=c)}}register$4("pitEntity",PitEntity);class AlgorithmUtil{constructor(){const e=_0x5e32ae;this[e(2951)]=Math.PI/2,this.ZERO_TOLERANCE=1e-4}toRadians(e){return e*Math.PI/180}[_0x5e32ae(2063)](e,t,i,s,n){const o={_0x1448b5:1318},c=_0x5e32ae,_=this[c(o._0x1448b5)](e,t),l=n?_+i:_-i,h=s*Math.cos(l),f=s*Math.sin(l);return[t[0]+h,t[1]+f]}getAzimuth(e,t){let i=0;const s=Math.asin(Math.abs(t[1]-e[1])/this.MathDistance(e,t));return t[1]>=e[1]&&t[0]>=e[0]?i=s+Math.PI:t[1]>=e[1]&&t[0]<e[0]?i=Math.PI*2-s:t[1]<e[1]&&t[0]<e[0]?i=s:t[1]<e[1]&&t[0]>=e[0]&&(i=Math.PI-s),i}MathDistance(e,t){return Math[_0x5e32ae(928)](Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}isClockWise(e,t,i){return i?(i[1]-e[1])*(t[0]-e[0])>(t[1]-e[1])*(i[0]-e[0]):![]}getBisectorNormals(e,t,i,s){const n=_0x5e32ae,o=this[n(2950)](t,i,s);let c=null,_=null,l=null,h=null,f=null;const m=Math.sqrt(o[0]*o[0]+o[1]*o[1]),g=o[0]/m,C=o[1]/m,E=this.MathDistance(t,i),P=this.MathDistance(i,s);return m>this.ZERO_TOLERANCE?this.isClockWise(t,i,s)?(l=e*E,h=i[0]-l*C,f=i[1]+l*g,c=[h,f],l=e*P,h=i[0]+l*C,f=i[1]-l*g,_=[h,f]):(l=e*E,h=i[0]+l*C,f=i[1]-l*g,c=[h,f],l=e*P,h=i[0]-l*C,f=i[1]+l*g,_=[h,f]):(h=i[0]+e*(t[0]-i[0]),f=i[1]+e*(t[1]-i[1]),c=[h,f],h=i[0]+e*(s[0]-i[0]),f=i[1]+e*(s[1]-i[1]),_=[h,f]),[c,_]}getCubicValue(e,t,i,s,n){const o={_0x3a8c8e:1124},c=_0x5e32ae;e=Math[c(o._0x3a8c8e)](Math[c(1193)](e,1),0);const _=1-e,l=e*e,h=l*e,f=_*_,m=f*_,g=m*t[0]+3*f*e*i[0]+3*_*l*s[0]+h*n[0],C=m*t[1]+3*f*e*i[1]+3*_*l*s[1]+h*n[1];return[g,C]}getNormal(e,t,i){let s=e[0]-t[0],n=e[1]-t[1];const o=Math.sqrt(s*s+n*n);s/=o,n/=o;let c=i[0]-t[0],_=i[1]-t[1];const l=Math.sqrt(c*c+_*_);c/=l,_/=l;const h=s+c,f=n+_;return[h,f]}[_0x5e32ae(2395)](e,t,i,s){let n=null,o=null;const c=[];let _=s-i;_=_<0?_+Math.PI*2:_;for(let l=0;l<=100;l++){const h=i+_*l/100;n=e[0]+t*Math.cos(h),o=e[1]+t*Math.sin(h),c.push([n,o])}return c}getPointByAngleAndLen(e,t,i){const s=_0x5e32ae,n=e[0]+t*Math[s(1784)](i),o=e[1]+t*Math.sin(i);return[n,o]}getBaseLength(e){return Math.pow(this[_0x5e32ae(2010)](e),.99)}wholeDistance(e){let t=0;const i=this;return e&&Array.isArray(e)&&e.length>0&&e.forEach(function(s,n){const o=_0x5210;n<e[o(3402)]-1&&(t+=i[o(1031)](s,e[n+1]))}),t}getArrowHeadPoints(e){const t={_0xf323e9:919,_0x2f9cf0:3402,_0x4e4fb8:2951},i=_0x5e32ae;if(!e)return[];const s=e.points;if(s[i(3402)]<2)return[];const n=e[i(1020)],o=e.tailRight,c=e[i(t._0xf323e9)],_=e.neckWidthFactor,l=e.neckHeightFactor,h=e.headWidthFactor,f=e.headHeightFactor;let m=this.getBaseLength(s),g=m*f;const C=s[s.length-1];m=this[i(1031)](C,s[s.length-2]);const E=this.MathDistance(n,o);g>E*c&&(g=E*c);const P=g*h,w=g*_;g=g>m?m:g;const M=g*l,T=this.getThirdPoint(s[s[i(t._0x2f9cf0)]-2],C,0,g,!![]),L=this.getThirdPoint(s[s.length-2],C,0,M,!![]),R=this.getThirdPoint(C,T,this[i(2951)],P,![]),D=this.getThirdPoint(C,T,this.HALF_PI,P,!![]),N=this[i(2063)](C,L,this.HALF_PI,w,![]),k=this.getThirdPoint(C,L,this[i(t._0x4e4fb8)],w,!![]);return[N,R,C,D,k]}getTailPoints(e){const t={_0x587333:2951,_0x37901c:2063},i=_0x5e32ae;if(!e)return;const s=e[i(2820)],n=e.tailWidthFactor,o=e[i(1447)],c=this[i(3617)](s),_=c*n,l=this.getThirdPoint(s[1],s[0],this[i(t._0x587333)],_,![]),h=this[i(t._0x37901c)](s[1],s[0],this.HALF_PI,_,!![]),f=_*o,m=this.getThirdPoint(s[1],s[0],0,f,!![]);return[l,m,h]}getArrowBodyPoints(e,t,i,s){const n=_0x5e32ae,o=this.wholeDistance(e),c=this.getBaseLength(e),_=c*s,l=this.MathDistance(t,i),h=(_-l)/2;let f=0;const m=[],g=[];for(let C=1;C<e.length-1;C++){const E=this.getAngleOfThreePoints(e[C-1],e[C],e[C+1])/2;f+=this.MathDistance(e[C-1],e[C]);const P=(_/2-f/o*h)/Math.sin(E),w=this.getThirdPoint(e[C-1],e[C],Math.PI-E,P,!![]),M=this.getThirdPoint(e[C-1],e[C],E,P,![]);m[n(3759)](w),g.push(M)}return m.concat(g)}getAngleOfThreePoints(e,t,i){const s=_0x5e32ae,n=this.getAzimuth(t,e)-this[s(1318)](t,i);return n<0?n+Math.PI*2:n}[_0x5e32ae(4269)](e){const t={_0x298043:3402},i=_0x5e32ae;if(e[i(t._0x298043)]<=2)return e;{const n=[],o=e[i(3402)]-2-1;n.push(e[0]);for(let c=0;c<=o;c++)for(let _=0;_<=1;_+=.05){let l=0,h=0;for(let f=0;f<=2;f++){const m=this.getQuadricBSplineFactor(f,_);l+=m*e[c+f][0],h+=m*e[c+f][1]}n.push([l,h])}return n.push(e[e.length-1]),n}}[_0x5e32ae(742)](e,t){const i={_0x363a5b:3484},s=_0x5e32ae;let n=0;return e===0?n=Math.pow(t-1,2)/2:e===1?n=(-2*Math[s(i._0x363a5b)](t,2)+2*t+1)/2:e===2&&(n=Math.pow(t,2)/2),n}Mid(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2,(e[2]||0+t[2]||0)/2]}[_0x5e32ae(3175)](e,t,i){const s=e[2]||0,n=[(e[0]+t[0])/2,(e[1]+t[1])/2,s],o=[n[0]-e[1]+t[1],n[1]+e[0]-t[0],s],c=[(e[0]+i[0])/2,(e[1]+i[1])/2,s],_=[c[0]-e[1]+i[1],c[1]+e[0]-i[0],s];return this.getIntersectPoint(n,o,c,_)}[_0x5e32ae(3347)](e,t,i,s){if(e[1]===t[1]){const l=(s[0]-i[0])/(s[1]-i[1]),h=l*(e[1]-i[1])+i[0],f=e[1];return[h,f]}if(i[1]===s[1]){const l=(t[0]-e[0])/(t[1]-e[1]),h=l*(i[1]-e[1])+e[0],f=i[1];return[h,f]}const n=(t[0]-e[0])/(t[1]-e[1]),o=(s[0]-i[0])/(s[1]-i[1]),c=(n*e[1]-e[0]-o*i[1]+i[0])/(n-o);return[n*c-n*e[1]+e[0],c,e[2]||0]}getBezierPoints(e){const t={_0x2740c5:3759},i=_0x5e32ae;if(e.length<=2)return e;{const s=[],n=e.length-1;for(let o=0;o<=1;o+=.01){let c=0,_=0;for(let l=0;l<=n;l++){const h=this.getBinomialFactor(n,l),f=Math.pow(o,l),m=Math.pow(1-o,n-l);c+=h*f*m*e[l][0],_+=h*f*m*e[l][1]}s[i(t._0x2740c5)]([c,_])}return s}}[_0x5e32ae(3243)](e){let t=1;switch(e){case e<=1:t=1;break;case e===2:t=2;break;case e===3:t=6;break;case e===24:t=24;break;case e===5:t=120;break;default:for(let i=1;i<=e;i++)t*=i;break}return t}getBinomialFactor(e,t){const i={_0x5e0491:3243},s=_0x5e32ae;return this[s(i._0x5e0491)](e)/(this[s(3243)](t)*this.getFactorial(e-t))}}const algorithmUtil=new AlgorithmUtil,minAnalge=algorithmUtil.toRadians(20),maxAnalge=algorithmUtil[_0x5e32ae(1567)](160);class ArrowParentUtil{constructor(){const e=_0x5e32ae;this[e(3851)]=algorithmUtil}getMaxHeight(e){let t=e[0][2]||0;for(let i=0;i<e.length;i++)e[2]>t&&(t=e[2]);return t}[_0x5e32ae(2866)](e,t,i){const s={_0x4e520d:1031,_0x17c412:2063,_0x543971:3851},n=_0x5e32ae;if(!e||e[n(3402)]<2)return null;let o=this[n(3851)][n(3617)](e)*this.headHeightFactor;const c=this[n(3851)][n(s._0x4e520d)](t,i);o>c*this[n(919)]&&(o=c*this[n(919)]);const _=e[e.length-1],l=e[e.length-2],h=this.algorithmUtil[n(s._0x4e520d)](_,l);o=o>h?h:o;const f=o*this.headWidthFactor,m=o*this.neckWidthFactor,g=o*this.neckHeightFactor,C=this.algorithmUtil[n(s._0x17c412)](l,_,0,o,!![]),E=this[n(s._0x543971)][n(2063)](l,_,0,g,!![]),P=this[n(3851)].getThirdPoint(_,C,Math.PI/2,f,![]),w=this.algorithmUtil[n(2063)](_,C,Math.PI/2,f,!![]),M=this.algorithmUtil.getThirdPoint(_,E,Math.PI/2,m,![]),T=this[n(3851)][n(2063)](_,E,Math.PI/2,m,!![]);return[M,P,_,w,T]}getArrowBodyPoints(e,t,i,s){const n={_0x379847:3851,_0x500945:3617,_0x2e2f26:3851,_0x150a1d:1031,_0x2c0854:3611},o=_0x5e32ae,c=this.algorithmUtil.wholeDistance(e),_=this[o(n._0x379847)][o(n._0x500945)](e),l=_*s,h=this[o(n._0x2e2f26)][o(1031)](t,i),f=(l-h)/2;let m=0;const g=[],C=[];for(let E=1;E<e.length-1;E++){let P=this.algorithmUtil.getAngleOfThreePoints(e[E-1],e[E],e[E+1])/2;P<minAnalge?P=minAnalge:P>maxAnalge&&(P=maxAnalge),m+=this.algorithmUtil[o(n._0x150a1d)](e[E-1],e[E]);const w=(l/2-m/c*f)/Math[o(442)](P),M=this[o(3851)].getThirdPoint(e[E-1],e[E],Math.PI-P,w,!![]),T=this.algorithmUtil.getThirdPoint(e[E-1],e[E],P,w,![]);g.push(M),C.push(T)}return g[o(n._0x2c0854)](C)}}class AttackArrowUtil extends ArrowParentUtil{[_0x5e32ae(724)](e={}){const t={_0x30f39b:919},i=_0x5e32ae;this.headHeightFactor=e.headHeightFactor||.18,this.headWidthFactor=e[i(2992)]||.3,this.neckHeightFactor=e.neckHeightFactor||.85,this[i(2341)]=e[i(2341)]||.15,this[i(t._0x30f39b)]=e.headTailFactor||.8}startCompute(e,t){const i={_0x1af2ae:3402,_0x408423:1031,_0x3e7353:3851},s=_0x5e32ae;if(!e||e.length===0)return e;this[s(2436)]=e,this.setOptions(t);const n=cartesians2mercators(e),o=this.getMaxHeight(n),c=n[n.length-1],_=n[n[s(i._0x1af2ae)]-2];this.algorithmUtil[s(i._0x408423)](c,_)<1&&n[s(3402)]>2&&n.splice(n.length-2,1);let h=n[0],f=n[1];this.algorithmUtil.isClockWise(n[0],n[1],n[2])&&(h=n[1],f=n[0]);const m=this.algorithmUtil[s(3636)](h,f),g=[m].concat(n.slice(2)),C=this.getArrowHeadPoints(g,h,f);if(!C||C[s(3402)]<4)return e;const E=C[0],P=C[4],w=this[s(i._0x3e7353)][s(i._0x408423)](h,f)/this.algorithmUtil.getBaseLength(g),M=this.getArrowBodyPoints(g,E,P,w),T=M.length;let L=[h].concat(M.slice(0,T/2));L.push(E);let R=[f].concat(M.slice(T/2,T));R.push(P),L=this[s(3851)].getQBSplinePoints(L),R=this.algorithmUtil.getQBSplinePoints(R);const D=L.concat(C,R.reverse());return mercators2cartesians(D,o)}}const attackArrowUtil$1=new AttackArrowUtil;class AttackArrow extends PolygonEntity{get[_0x5e32ae(1739)](){return![]}[_0x5e32ae(1543)](e){return!e||e.length<2?e:attackArrowUtil$1.startCompute(e,this.style)}}register$4("attackArrow",AttackArrow);class AttackArrowPWUtil extends ArrowParentUtil{setOptions(e={}){const t={_0x11ab49:3443},i=_0x5e32ae;this.headHeightFactor=e[i(2726)]||.18,this.headWidthFactor=e.headWidthFactor||.3,this.neckHeightFactor=e.neckHeightFactor||.85,this.neckWidthFactor=e.neckWidthFactor||.15,this[i(3443)]=e[i(t._0x11ab49)]||.1}[_0x5e32ae(1835)](e,t){const i={_0x2a89ec:724,_0x2cdc15:1414,_0x40d39a:869,_0x23b2f9:869,_0x5c6ba7:4269},s=_0x5e32ae;if(!e||e.length===0)return e;this.positions=e,this[s(i._0x2a89ec)](t);const n=cartesians2mercators(e),o=this[s(i._0x2cdc15)](n),c=this.getTailPoints(n),_=this.getArrowHeadPoints(n,c[0],c[1]);if(!_||_.length<4)return e;const l=_[0],h=_[4],f=this.getArrowBodyPoints(n,l,h,this.tailWidthFactor),m=f.length;let g=[c[0]].concat(f[s(i._0x40d39a)](0,m/2));g.push(l);let C=[c[1]].concat(f[s(i._0x23b2f9)](m/2,m));C.push(h),g=this.algorithmUtil[s(i._0x5c6ba7)](g),C=this.algorithmUtil.getQBSplinePoints(C);const E=g[s(3611)](_,C.reverse());return mercators2cartesians(E,o)}[_0x5e32ae(1341)](e){const t={_0x2c095e:3443,_0x135ece:3851,_0x57d2f4:2063},i=_0x5e32ae,s=this.algorithmUtil.getBaseLength(e),n=s*this[i(t._0x2c095e)],o=this.algorithmUtil[i(2063)](e[1],e[0],Math.PI/2,n,![]),c=this[i(t._0x135ece)][i(t._0x57d2f4)](e[1],e[0],Math.PI/2,n,!![]);return[o,c]}}const attackArrowPWUtil=new AttackArrowPWUtil;class AttackArrowPW extends PolygonEntity{get hasClosure(){return![]}getShowPositions(e){return!e||e.length<2?e:attackArrowPWUtil.startCompute(e,this.style)}static[_0x5e32ae(2462)](e,t){return!e||e[_0x5e32ae(3402)]<2?e:(e=LngLatArray.toCartesians(e),attackArrowPWUtil.startCompute(e,t))}}register$4("attackArrowPW",AttackArrowPW);class AttackArrowYWUtil extends ArrowParentUtil{setOptions(e={}){const t={_0x8afabc:2726},i=_0x5e32ae;this[i(t._0x8afabc)]=e.headHeightFactor||.18,this.headWidthFactor=e.headWidthFactor||.3,this[i(3082)]=e.neckHeightFactor||.85,this.neckWidthFactor=e.neckWidthFactor||.15,this.tailWidthFactor=e.tailWidthFactor||.1,this.headTailFactor=e.headTailFactor||.8,this.swallowTailFactor=e.swallowTailFactor||1}startCompute(e,t){const i={_0x17f214:724,_0x2fd7a3:1414,_0x32e344:3443,_0x1b20a0:943},s=_0x5e32ae;if(!e||e.length===0)return e;this.positions=e,this[s(i._0x17f214)](t);const n=cartesians2mercators(e),o=this[s(i._0x2fd7a3)](n),c=[n[0],n[1]];let _=c[0],l=c[1];this.algorithmUtil.isClockWise(n[0],n[1],n[2])&&(_=n[1],l=n[0]);const h=this[s(3851)].Mid(_,l),f=[h].concat(n.slice(2)),m=this.getArrowHeadPoints(f,_,l);if(!m||m.length<4)return e;const g=[m[0],m[4]],C=g[0],E=g[1],P=this.algorithmUtil[s(1031)](_,l),w=this.algorithmUtil[s(3617)](f),M=w*this[s(i._0x32e344)]*this[s(1447)],T=this.algorithmUtil.getThirdPoint(f[1],f[0],0,M,!![]),L=P/w,R=this.getArrowBodyPoints(f,C,E,L),D=R.length;let N=[_].concat(R.slice(0,D/2));N.push(C);let k=[l].concat(R.slice(D/2,D));k.push(E),N=this.algorithmUtil.getQBSplinePoints(N),k=this.algorithmUtil.getQBSplinePoints(k);const B=N[s(3611)](m,k[s(i._0x1b20a0)](),[T,N[0]]);return mercators2cartesians(B,o)}}const attackArrowUtil=new AttackArrowYWUtil;class AttackArrowYW extends PolygonEntity{get hasClosure(){return![]}getShowPositions(e){return!e||e.length<3?e:attackArrowUtil.startCompute(e,this.style)}static[_0x5e32ae(2462)](e,t){const i=_0x5e32ae;return!e||e[i(3402)]<3?e:(e=LngLatArray[i(3816)](e),attackArrowUtil.startCompute(e,t))}}register$4("attackArrowYW",AttackArrowYW);class CloseCurveUtil{constructor(){const e=_0x5e32ae;this[e(3851)]=algorithmUtil}startCompute(e,t){const i={_0x315725:500,_0x4e5023:3851,_0x3d1ca1:3759},s=_0x5e32ae;if(!e||e.length===0)return e;this[s(2436)]=e;const n=cartesians2mercators(e),o=this.getMaxHeight(n);n.push(n[0],n[1]);let c=[];const _=[];for(let f=0;f<n.length-2;f++){const m=this.algorithmUtil[s(i._0x315725)](.3,n[f],n[f+1],n[f+2]);c=c.concat(m)}const l=c[s(3402)];c=[c[l-1]].concat(c.slice(0,l-1));for(let f=0;f<n.length-2;f++){const m=n[f],g=n[f+1];_.push(m);for(let C=0;C<=100;C++){const E=this[s(i._0x4e5023)].getCubicValue(C/100,m,c[f*2],c[f*2+1],g);_[s(i._0x3d1ca1)](E)}_.push(g)}return mercators2cartesians(_,o)}getMaxHeight(e){const t=_0x5e32ae;let i=e[0][2]||0;for(let s=0;s<e[t(3402)];s++)e[2]>i&&(i=e[2]);return i}}const closeCurveUtil=new CloseCurveUtil;class CloseVurve extends PolygonEntity{getShowPositions(e){return!e||e.length<2?e:closeCurveUtil.startCompute(e,this.style)}static[_0x5e32ae(2462)](e,t){const i={_0x1f387e:1835},s=_0x5e32ae;return!e||e.length<2?e:(e=LngLatArray.toCartesians(e),closeCurveUtil[s(i._0x1f387e)](e,t))}}register$4("closeVurve",CloseVurve);class DoubleArrowUtil{constructor(){this.algorithmUtil=algorithmUtil}setOptions(e={}){const t={_0x2e234f:2341},i=_0x5e32ae;this.headHeightFactor=e.headHeightFactor||.25,this.headWidthFactor=e.headWidthFactor||.3,this.neckHeightFactor=e.neckHeightFactor||.85,this[i(t._0x2e234f)]=e.neckWidthFactor||.15}[_0x5e32ae(1835)](e,t){const i={_0x47eff6:3402,_0x571321:1031,_0x507379:3851,_0x35f28a:3361,_0x56be63:3611},s=_0x5e32ae;if(!e||e.length<3)return e;this.positions=e,this.setOptions(t);const n=cartesians2mercators(e),o=this.getMaxHeight(n),c=[n[0],n[1],n[2]],_=c[0],l=c[1],h=c[2],f=this.positions[s(i._0x47eff6)];let m,g;if(f===3)m=this.getTempPoint4(_,l,h),g=this.algorithmUtil.Mid(_,l);else if(f===4)m=n[3],g=this.algorithmUtil.Mid(_,l);else{const H=this.algorithmUtil[s(i._0x571321)](n[3],n[4]),W=this.algorithmUtil.MathDistance(n[2],n[3]);H<W*.1?(m=n[3],g=this[s(i._0x507379)].Mid(_,l)):(m=n[3],g=n[4])}let C,E;this.algorithmUtil.isClockWise(_,l,h)?(C=this.getArrowPoints(_,g,m,![]),E=this.getArrowPoints(g,l,h,!![])):(C=this.getArrowPoints(l,g,h,![]),E=this.getArrowPoints(g,_,m,!![]));const P=C.length,w=(P-5)/2,M=C[s(869)](0,w),T=C.slice(w,w+5);let L=C.slice(w+5,P),R=E.slice(0,w);const D=E.slice(w,w+5),N=E.slice(w+5,P);R=this.algorithmUtil[s(i._0x35f28a)](R);const k=this.algorithmUtil.getBezierPoints(N[s(i._0x56be63)](M.slice(1)));L=this.algorithmUtil.getBezierPoints(L);const B=R.concat(D,k,T,L);return mercators2cartesians(B,o)}getTempPoint4(e,t,i){const s={_0x340fd2:1031,_0x2c6af8:1784,_0x3e1178:2063,_0x4355a2:3851,_0x30ff9c:442},n=_0x5e32ae,o=this.algorithmUtil.Mid(e,t),c=this.algorithmUtil[n(s._0x340fd2)](o,i),_=this.algorithmUtil.getAngleOfThreePoints(e,o,i);let l,h,f,m;return _<Math.PI/2?(h=c*Math.sin(_),f=c*Math[n(s._0x2c6af8)](_),m=this.algorithmUtil[n(s._0x3e1178)](e,o,Math.PI/2,h,![]),l=this.algorithmUtil.getThirdPoint(o,m,Math.PI/2,f,!![])):_>=Math.PI/2&&_<Math.PI?(h=c*Math.sin(Math.PI-_),f=c*Math[n(s._0x2c6af8)](Math.PI-_),m=this[n(s._0x4355a2)].getThirdPoint(e,o,Math.PI/2,h,![]),l=this.algorithmUtil.getThirdPoint(o,m,Math.PI/2,f,![])):_>=Math.PI&&_<Math.PI*1.5?(h=c*Math[n(442)](_-Math.PI),f=c*Math.cos(_-Math.PI),m=this.algorithmUtil.getThirdPoint(e,o,Math.PI/2,h,!![]),l=this[n(s._0x4355a2)].getThirdPoint(o,m,Math.PI/2,f,!![])):(h=c*Math[n(s._0x30ff9c)](Math.PI*2-_),f=c*Math.cos(Math.PI*2-_),m=this.algorithmUtil.getThirdPoint(e,o,Math.PI/2,h,!![]),l=this.algorithmUtil.getThirdPoint(o,m,Math.PI/2,f,![])),l}[_0x5e32ae(645)](e,t,i,s){const n={_0x51ea41:3402,_0x3a8738:3851,_0x2fa35e:943,_0x323808:3611},o=_0x5e32ae,c=this.algorithmUtil.Mid(e,t),_=this.algorithmUtil.MathDistance(c,i);let l=this.algorithmUtil.getThirdPoint(i,c,0,_*.3,!![]),h=this.algorithmUtil[o(2063)](i,c,0,_*.5,!![]);l=this.algorithmUtil.getThirdPoint(c,l,Math.PI/2,_/5,s),h=this.algorithmUtil.getThirdPoint(c,h,Math.PI/2,_/4,s);const f=[c,l,h,i],m=this[o(2866)](f);if(m&&Array.isArray(m)&&m[o(n._0x51ea41)]>3){const g=[m[0],m[4]],C=g[0],E=g[1],P=this[o(3851)].MathDistance(e,t)/this[o(n._0x3a8738)].getBaseLength(f)/2,w=this.getArrowBodyPoints(f,C,E,P);if(w){const M=w.length;let T=w.slice(0,M/2),L=w[o(869)](M/2,M);return T.push(C),L.push(E),T=T[o(n._0x2fa35e)](),T[o(3759)](t),L=L.reverse(),L[o(3759)](e),T.reverse()[o(n._0x323808)](m,L)}}else console.log("getArrowPoints:插值出错",m)}[_0x5e32ae(2866)](e){const t={_0x37dff2:2063},i=_0x5e32ae;if(!e||e.length<2)return[];const s=this[i(3851)][i(3617)](e),n=s*this.headHeightFactor,o=e[e.length-1],c=n*this.headWidthFactor,_=n*this.neckWidthFactor,l=n*this.neckHeightFactor,h=this[i(3851)].getThirdPoint(e[e[i(3402)]-2],o,0,n,!![]),f=this.algorithmUtil.getThirdPoint(e[e[i(3402)]-2],o,0,l,!![]),m=this.algorithmUtil[i(t._0x37dff2)](o,h,Math.PI/2,c,![]),g=this.algorithmUtil.getThirdPoint(o,h,Math.PI/2,c,!![]),C=this.algorithmUtil[i(t._0x37dff2)](o,f,Math.PI/2,_,![]),E=this[i(3851)].getThirdPoint(o,f,Math.PI/2,_,!![]);return[C,m,o,g,E]}getArrowBodyPoints(e,t,i,s){const n={_0x3a9b51:1031,_0x56665b:442,_0x1d534f:3611},o=_0x5e32ae,c=this.algorithmUtil[o(2010)](e),_=this.algorithmUtil.getBaseLength(e),l=_*s,h=this.algorithmUtil[o(n._0x3a9b51)](t,i),f=(l-h)/2;let m=0;const g=[],C=[];for(let E=1;E<e.length-1;E++){const P=this[o(3851)].getAngleOfThreePoints(e[E-1],e[E],e[E+1])/2;m+=this.algorithmUtil[o(n._0x3a9b51)](e[E-1],e[E]);const w=(l/2-m/c*f)/Math[o(n._0x56665b)](P),M=this.algorithmUtil.getThirdPoint(e[E-1],e[E],Math.PI-P,w,!![]),T=this.algorithmUtil.getThirdPoint(e[E-1],e[E],P,w,![]);g.push(M),C.push(T)}return g[o(n._0x1d534f)](C)}getMaxHeight(e){const t={_0x360fc0:3402},i=_0x5e32ae;let s=e[0][2]||0;for(let n=0;n<e[i(t._0x360fc0)];n++)e[2]>s&&(s=e[2]);return s}}const doubleArrowUtil=new DoubleArrowUtil;class DoubleArrow extends PolygonEntity{constructor(e={}){const t={_0x5388de:4267},i=_0x5e32ae;super(e),this[i(t._0x5388de)]=3,this._maxPointNum=5}getShowPositions(e){const t={_0xfdad1f:4267},i=_0x5e32ae;return!e||e.length<this[i(t._0xfdad1f)]?e:doubleArrowUtil.startCompute(e,this.style)}static[_0x5e32ae(2462)](e,t){const i={_0x1d1cfc:3402,_0xd74208:3816},s=_0x5e32ae;return!e||e[s(i._0x1d1cfc)]<3?e:(e=LngLatArray[s(i._0xd74208)](e),doubleArrowUtil.startCompute(e,t))}}register$4("doubleArrow",DoubleArrow);class FineArrowUtil{constructor(){this.algorithmUtil=algorithmUtil}setOptions(e={}){const t={_0x14fcfa:3057,_0x38529c:2341},i=_0x5e32ae;this.headAngle=e[i(t._0x14fcfa)]||Math.PI/8.5,this.neckAngle=e.neckAngle||Math.PI/13,this.tailWidthFactor=e[i(3443)]||.1,this.neckWidthFactor=e[i(t._0x38529c)]||.2,this[i(2992)]=e.headWidthFactor||.25,this[i(3082)]=e.neckHeightFactor||.85}startCompute(e,t){const i={_0x2dbb9e:3851,_0x4ad7e2:1287},s=_0x5e32ae;if(!e||e.length===0)return e;this.positions=e,this.setOptions(t);const n=cartesians2mercators(e),o=this.getMaxHeight(n),c=[n[0],n[1]],_=c[0],l=c[1],h=this.algorithmUtil.getBaseLength(n),f=h*this.tailWidthFactor,m=h*this.neckWidthFactor,g=h*this[s(2992)],C=this[s(i._0x2dbb9e)].getThirdPoint(l,_,Math.PI/2,f,!![]),E=this.algorithmUtil.getThirdPoint(l,_,Math.PI/2,f,![]),P=this.algorithmUtil.getThirdPoint(_,l,this.headAngle,g,![]),w=this[s(3851)][s(2063)](_,l,this.headAngle,g,!![]),M=this.algorithmUtil.getThirdPoint(_,l,this.neckAngle,m,![]),T=this[s(3851)].getThirdPoint(_,l,this[s(i._0x4ad7e2)],m,!![]);return mercators2cartesians([C,M,P,l,w,T,E],o)}getMaxHeight(e){const t={_0x30e8e7:3402},i=_0x5e32ae;let s=e[0][2]||0;for(let n=0;n<e[i(t._0x30e8e7)];n++)e[2]>s&&(s=e[2]);return s}}const fineArrowUtil=new FineArrowUtil;class FineArrow extends PolygonEntity{constructor(e={}){super(e),this._minPointNum=2,this._maxPointNum=2}getShowPositions(e){return!e||e.length<2?e:fineArrowUtil.startCompute(e,this.style)}static[_0x5e32ae(2462)](e,t){return!e||e.length<2?e:(e=LngLatArray.toCartesians(e),fineArrowUtil.startCompute(e,t))}}register$4("fineArrow",FineArrow);class FineArrowYWUtil extends ArrowParentUtil{setOptions(e={}){const t={_0xab703d:2726,_0x4bf4c8:2341,_0x54bf57:1447},i=_0x5e32ae;this[i(t._0xab703d)]=e.headHeightFactor||.18,this.headWidthFactor=e.headWidthFactor||.3,this[i(3082)]=e.neckHeightFactor||.85,this[i(t._0x4bf4c8)]=e.neckWidthFactor||.15,this.tailWidthFactor=e.tailWidthFactor||.1,this[i(t._0x54bf57)]=e.swallowTailFactor||1}startCompute(e,t){const i={_0x75fa52:1341,_0x75b69c:3402,_0x205d96:943},s=_0x5e32ae;if(!e||e.length===0)return e;this[s(2436)]=e,this[s(724)](t);const n=cartesians2mercators(e),o=this.getMaxHeight(n),c=this[s(i._0x75fa52)](n),_=this.getArrowHeadPoints(n,c[0],c[2]);if(!_||_[s(3402)]<4)return e;const l=_[0],h=_[4],f=this.getArrowBodyPoints(n,l,h,this.tailWidthFactor),m=f[s(i._0x75b69c)];let g=[c[0]].concat(f.slice(0,m/2));g.push(l);let C=[c[2]][s(3611)](f.slice(m/2,m));C.push(h),g=this[s(3851)].getQBSplinePoints(g),C=this.algorithmUtil[s(4269)](C);const E=g.concat(_,C[s(i._0x205d96)](),[c[1],g[0]]);return mercators2cartesians(E,o)}[_0x5e32ae(1341)](e){const t=_0x5e32ae,i=this[t(3851)].getBaseLength(e),s=i*this.tailWidthFactor,n=this[t(3851)].getThirdPoint(e[1],e[0],Math.PI/2,s,![]),o=this[t(3851)][t(2063)](e[1],e[0],Math.PI/2,s,!![]),c=s*this.swallowTailFactor,_=this.algorithmUtil[t(2063)](e[1],e[0],0,c,!![]);return[n,_,o]}}const fineArrowYWUtil=new FineArrowYWUtil;class FineArrowYW extends PolygonEntity{constructor(e={}){const t={_0x4be96e:2231},i=_0x5e32ae;super(e),this._minPointNum=2,this[i(t._0x4be96e)]=2}getShowPositions(e){return!e||e.length<2?e:fineArrowYWUtil.startCompute(e,this.style)}static[_0x5e32ae(2462)](e,t){const i={_0x58b045:1835},s=_0x5e32ae;return!e||e.length<2?e:(e=LngLatArray.toCartesians(e),fineArrowYWUtil[s(i._0x58b045)](e,t))}}register$4("fineArrowYW",FineArrowYW);class GatheringPlaceUtil{constructor(){const e={_0x1b92a4:3851},t=_0x5e32ae;this[t(e._0x1b92a4)]=algorithmUtil}[_0x5e32ae(1835)](e,t){const i={_0x3b0b61:3851,_0x4a521e:3851,_0xffa8ce:3611},s=_0x5e32ae;if(!e||e.length===0)return e;this.positions=e;const n=cartesians2mercators(e),o=this.getMaxHeight(n),c=this[s(i._0x3b0b61)].Mid(n[0],n[2]);n[s(3759)](c,n[0],n[1]);let _=[],l,h,f;const m=[];for(let E=0;E<n.length-2;E++){l=n[E],h=n[E+1],f=n[E+2];const P=this[s(i._0x4a521e)].getBisectorNormals(.4,l,h,f);_=_.concat(P)}const g=_.length;_=[_[g-1]][s(i._0xffa8ce)](_.slice(0,g-1));for(let E=0;E<n.length-2;E++){l=n[E],h=n[E+1],m.push(l);for(let P=0;P<=100;P++){const w=this[s(3851)].getCubicValue(P/100,l,_[E*2],_[E*2+1],h);m.push(w)}m.push(h)}return mercators2cartesians(m,o)}getMaxHeight(e){let t=e[0][2]||0;for(let i=0;i<e.length;i++)e[2]>t&&(t=e[2]);return t}}const gatheringPlaceUtil=new GatheringPlaceUtil;class GatheringPlace extends PolygonEntity{constructor(e={}){super(e),this._minPointNum=3,this._maxPointNum=3}[_0x5e32ae(1543)](e){const t={_0x31333d:1835},i=_0x5e32ae;return!e||e.length<this._minPointNum?e:gatheringPlaceUtil[i(t._0x31333d)](e,this.style)}static getOutlinePositions(e,t){return!e||e[_0x5e32ae({_0x4d9245:3402}._0x4d9245)]<2?e:(e=LngLatArray.toCartesians(e),gatheringPlaceUtil.startCompute(e,t))}}register$4("gatheringPlace",GatheringPlace);class IsosTriangle extends PolygonEntity{constructor(e={}){const t={_0x57ea1c:2231},i=_0x5e32ae;super(e),this[i(4267)]=3,this[i(t._0x57ea1c)]=3}getShowPositions(e){const t={_0x3ccdf5:3402,_0x1ccaad:4114},i=_0x5e32ae;return!e||e[i(t._0x3ccdf5)]<this._minPointNum?e:IsosTriangle.getOutlinePositions(e,this[i(t._0x1ccaad)])}static getOutlinePositions(e,t){const i={_0x3afbb9:3916},s=_0x5e32ae;if(!e||e.length<3)return e;const n=e[0],o=e[1],c=e[2],_=Cesium__namespace.Cartesian3.midpoint(n,o,new Cesium__namespace[s(i._0x3afbb9)]),l=getAngle(_,o),h=getAngle(_,c),f=l-h-90,m=getRotateCenterPoint(_,c,f);return[n,o,m]}}register$4("isosTriangle",IsosTriangle);class LuneUtil{constructor(){this.algorithmUtil=algorithmUtil}startCompute(e,t){const i={_0x2b7642:3851,_0x46cfe5:3759},s=_0x5e32ae;if(!e||e.length===0)return e;this.positions=e;let n=cartesians2mercators(e);const o=this.getMaxHeight(n),c=[n[0],n[1],n[2],void 0,void 0],_=c[0],l=c[1],h=c[2];let f=c[3],m=c[4];const g=this.algorithmUtil.getCircleCenterOfThreePoints(_,l,h),C=this.algorithmUtil.MathDistance(_,g),E=this.algorithmUtil.getAzimuth(_,g),P=this.algorithmUtil.getAzimuth(l,g);return this[s(i._0x2b7642)].isClockWise(_,l,h)?(f=P,m=E):(f=E,m=P),n=this.algorithmUtil.getArcPoints(g,C,f,m),n[s(i._0x46cfe5)](n[0]),mercators2cartesians(n,o)}[_0x5e32ae(1414)](e){let t=e[0][2]||0;for(let i=0;i<e.length;i++)e[2]>t&&(t=e[2]);return t}}const luneUtil=new LuneUtil;class Lune extends PolygonEntity{constructor(e={}){const t=_0x5e32ae;super(e),this._minPointNum=3,this[t(2231)]=3}getShowPositions(e){const t=_0x5e32ae;return!e||e[t(3402)]<this[t(4267)]?e:luneUtil.startCompute(e,this.style)}static getOutlinePositions(e,t){const i=_0x5e32ae;return!e||e.length<3?e:(e=LngLatArray[i(3816)](e),luneUtil[i(1835)](e,t))}}register$4(_0x5e32ae(2080),Lune);class EditRegular extends EditPolygon{[_0x5e32ae(1560)](){const e={_0xd284ed:4197,_0x5df36a:1470},t={_0x4665ed:3156,_0x530c78:2180,_0x4c26d5:2528},i={_0x3616ba:4209},s=_0x5e32ae,n=this.positions;let o=this[s(3156)](n[0]);const c=this.createDragger({position:o,type:PointType[s(e._0xd284ed)],tooltip:this[s(1890)].getLangText("_整体平移"),onDrag:(h,f)=>{const m=s;f=this.updatePositionsHeightByAttr(f),h.position=f;const g=Cesium__namespace.Cartesian3.subtract(f,o,new Cesium__namespace.Cartesian3);o=f,this.positions.forEach((C,E,P)=>{const w=_0x5210,M=Cesium__namespace.Cartesian3[w(4084)](C,g,new Cesium__namespace.Cartesian3);this.positions[E]=M});for(let C=0,E=this.draggers.length;C<E;C++)this.draggers[C].position=Cesium__namespace.Cartesian3.add(this[m(i._0x3616ba)][C].position,g,new Cesium__namespace.Cartesian3)}});c.index=0,this.draggers.push(c);const _=getPositionByDirectionAndLen(o,this[s(4114)].startAngle,this.style.radius);n[1]=_;const l=this[s(e._0x5df36a)]({position:this.updatePositionsHeightByAttr(_),onDrag:(h,f)=>{const m=s;f=this[m(t._0x4665ed)](f),h[m(t._0x530c78)]=f,this.positions[h.index]=f,this.style.radius=Cesium__namespace.Cartesian3.distance(n[0],f),this.style[m(t._0x4c26d5)]=formatNum$1(getAngle(n[0],f),2)},onDragStart:(h,f)=>{const m=s;for(let g=0,C=this[m(4209)].length;g<C;g++)this.draggers[g].show=![]},onDragEnd:(h,f)=>{this.updateDraggers()}});l[s(4063)]=1,this.draggers[s(3759)](l),this.entityGraphic.extrudedHeight&&this._bindHeightDraggers()}_updateHeight(e){this.entityGraphic.height=e,this.style.height=this.formatNum(e,2);const t=this.positions;for(let i=0,s=t.length;i<s;i++)t[i]=setPositionsHeight(t[i],e);this.fire(EventType.editStyle)}}class Regular extends PolygonEntity{constructor(e={}){const t={_0x372af1:2231,_0x238afb:4114,_0x2b84e0:2180},i=_0x5e32ae;super(e),this._minPointNum=2,this[i(t._0x372af1)]=2,this.style.radius=this.style.radius??1e3,this[i(4114)].startAngle=this[i(t._0x238afb)].startAngle??0,e[i(t._0x2b84e0)]&&(this.positions=[e.position])}get EditClass(){return EditRegular}updateAttrForDrawing(e){const t={_0x259c55:2528,_0x18dd1a:1761,_0x3a331f:2655},i=_0x5e32ae;var s;if(!e&&((s=this[i(1761)])===null||s===void 0?void 0:s.length)>1){const n=this._positions_draw[0];this.style.radius=Cesium__namespace.Cartesian3[i(2776)](n,this._positions_draw[1]),this[i(4114)][i(t._0x259c55)]=formatNum$1(getAngle(n,this[i(t._0x18dd1a)][1]),2)}super[i(t._0x3a331f)](e)}getShowPositions(e){const t={_0x458987:2462},i=_0x5e32ae;return!e||e.length<1?e:Regular[i(t._0x458987)](e[0],this.style)}static getOutlinePositions(e,t){const i=_0x5e32ae,s=t.border||3,n=t[i(3194)]||1e3,o=t.startAngle||0,c=360/s,_=[];for(let l=0;l<=s;l++){const h=o+c*l;_.push(getPositionByDirectionAndLen(e,h,n))}return _}}register$4(_0x5e32ae(1533),Regular);class EditSector extends EditPolygon{bindDraggers(){const e={_0x3360b9:4063,_0xbeda1a:3194,_0xc29b36:1470,_0x309e07:4063},t={_0xcc747c:4209},i={_0x894ee2:4114,_0x351c1e:4121,_0x5e58d6:2528,_0x4159b6:4114},s={_0x183f06:4114},n={_0x504bee:2180,_0x5e881e:3916,_0x37b103:2436},o=_0x5e32ae,c=this.positions;let _=this.updatePositionsHeightByAttr(c[0]);const l=this.createDragger({position:_,type:PointType.MoveAll,tooltip:this._map[o(4296)]("_整体平移"),onDrag:(C,E)=>{const P=o;E=this.updatePositionsHeightByAttr(E),C[P(n._0x504bee)]=E;const w=Cesium__namespace[P(n._0x5e881e)][P(1531)](E,_,new Cesium__namespace.Cartesian3);_=E,this[P(n._0x37b103)][P(2500)]((M,T,L)=>{const R=P,D=Cesium__namespace.Cartesian3[R(4084)](M,w,new Cesium__namespace[R(3916)]);this.positions[T]=D});for(let M=0,T=this[P(4209)].length;M<T;M++)this[P(4209)][M].position=Cesium__namespace[P(n._0x5e881e)].add(this.draggers[M][P(2180)],w,new Cesium__namespace.Cartesian3)}});l[o(e._0x3360b9)]=0,this.draggers.push(l);const h=getPositionByDirectionAndLen(_,this[o(4114)].startAngle,this.style[o(e._0xbeda1a)]);c[1]=h;const f=this.createDragger({position:this.updatePositionsHeightByAttr(h),onDrag:(C,E)=>{const P=o;E=this.updatePositionsHeightByAttr(E),C.position=E,this.positions[C[P(4063)]]=E,this[P(4114)].radius=Cesium__namespace[P(3916)].distance(c[0],E),this.style.startAngle=formatNum$1(getAngle(c[0],E),2),c[2]=getPositionByDirectionAndLen(c[0],this[P(4114)].endAngle,this[P(s._0x183f06)].radius)},onDragStart:(C,E)=>{const P=o;for(let w=0,M=this.draggers[P(3402)];w<M;w++)this.draggers[w].show=![]},onDragEnd:(C,E)=>{this[o(2813)]()}});f[o(4063)]=1,this.draggers[o(3759)](f);const m=getPositionByDirectionAndLen(_,this.style.endAngle,this[o(4114)].radius);c[2]=m;const g=this[o(e._0xc29b36)]({position:this[o(3156)](m),onDrag:(C,E)=>{const P=o;E=this[P(3156)](E),C.position=E,this[P(2436)][C.index]=E,this[P(i._0x894ee2)].radius=Cesium__namespace.Cartesian3[P(2776)](c[0],E),this.style[P(i._0x351c1e)]=getAngle(c[0],E),c[1]=getPositionByDirectionAndLen(c[0],this.style[P(i._0x5e58d6)],this[P(i._0x4159b6)].radius)},onDragStart:(C,E)=>{const P=o;for(let w=0,M=this[P(t._0xcc747c)].length;w<M;w++)this.draggers[w].show=![]},onDragEnd:(C,E)=>{this.updateDraggers()}});g[o(e._0x309e07)]=2,this.draggers.push(g),this.entityGraphic.extrudedHeight&&this._bindHeightDraggers()}[_0x5e32ae(2174)](e){const t={_0x312d88:2189,_0x4da11b:1404},i=_0x5e32ae;this[i(t._0x312d88)].height=e,this.style.height=this[i(3669)](e,2);const s=this.positions;for(let n=0,o=s[i(3402)];n<o;n++)s[n]=setPositionsHeight(s[n],e);this[i(t._0x4da11b)](EventType.editStyle)}}class Sector extends PolygonEntity{constructor(e={}){const t={_0x292be2:3194},i=_0x5e32ae;super(e),this._minPointNum=2,this._maxPointNum=3,this.style[i(t._0x292be2)]=this.style.radius??1e3,this.style.startAngle=this.style.startAngle??0,this.style.endAngle=this.style.endAngle??0,e[i(2180)]&&(this.positions=[e.position])}get EditClass(){return EditSector}updateAttrForDrawing(e){const t={_0x46e0b2:1761,_0x543fdb:4114},i=_0x5e32ae;var s;if(!e&&((s=this._positions_draw)===null||s===void 0?void 0:s.length)>1){var n;const o=this[i(t._0x46e0b2)][0];this[i(t._0x543fdb)].radius=formatNum$1(Cesium__namespace.Cartesian3.distance(o,this._positions_draw[1]),2),this.style.startAngle=formatNum$1(getAngle(o,this._positions_draw[1]),2),((n=this._positions_draw)===null||n===void 0?void 0:n.length)>2?this.style.endAngle=formatNum$1(getAngle(o,this._positions_draw[2]),2):this.style[i(4121)]=this.style.startAngle}super.updateAttrForDrawing(e)}getShowPositions(e){return!e||e.length<1?e:Sector.getOutlinePositions(e[0],this.style)}_updateStyleHook(e,t){const i={_0x24af75:4121,_0x22337b:3893},s=_0x5e32ae;super._updateStyleHook(e,t),(Cesium__namespace.defined(t.radius)||Cesium__namespace[s(515)](t.startAngle)||Cesium__namespace.defined(t[s(i._0x24af75)])||Cesium__namespace.defined(t[s(i._0x22337b)]))&&this._updatePositionsHook()}static getOutlinePositions(e,t){const i={_0x3a8b1a:3194,_0x237fb6:3759},s=_0x5e32ae,n=t[s(i._0x3a8b1a)],o=t[s(2528)];let c=t.endAngle;c<=o&&(c+=360);const _=[];!t.noCenter&&_.push(e);for(let l=o;l<=c;l++)_[s(i._0x237fb6)](getPositionByDirectionAndLen(e,l,n));return!t.noCenter&&_.push(e),_}}register$4("sector",Sector);class StraightArrowUtil{constructor(){this.algorithmUtil=algorithmUtil}[_0x5e32ae(724)](e={}){const t={_0x4001e4:3443},i=_0x5e32ae;this[i(t._0x4001e4)]=e.tailWidthFactor||.05,this.neckWidthFactor=e.neckWidthFactor||.1,this.headWidthFactor=e.headWidthFactor||.15,this[i(3057)]=Math.PI/4,this.neckAngle=Math.PI*.17741}startCompute(e,t){const i={_0x5c3c89:3402,_0x3fda9b:3851,_0x209a30:2063,_0x46fb12:1287},s=_0x5e32ae;if(!e||e[s(i._0x5c3c89)]===0)return e;this.positions=e,this.setOptions(t);const n=cartesians2mercators(e),o=this.getMaxHeight(n),c=[n[0],n[1]],_=c[0],l=c[1],h=this.algorithmUtil.getBaseLength(n),f=h*this.tailWidthFactor,m=h*this.neckWidthFactor,g=h*this.headWidthFactor,C=this.algorithmUtil[s(2063)](l,_,Math.PI/2,f,!![]),E=this.algorithmUtil.getThirdPoint(l,_,Math.PI/2,f,![]),P=this.algorithmUtil[s(2063)](_,l,this.headAngle,g,![]),w=this.algorithmUtil.getThirdPoint(_,l,this.headAngle,g,!![]),M=this[s(i._0x3fda9b)][s(i._0x209a30)](_,l,this.neckAngle,m,![]),T=this.algorithmUtil.getThirdPoint(_,l,this[s(i._0x46fb12)],m,!![]);return mercators2cartesians([C,M,P,l,w,T,E],o)}getMaxHeight(e){let t=e[0][2]||0;for(let i=0;i<e.length;i++)e[2]>t&&(t=e[2]);return t}}function _0x564f(){const r=["MultiPolygon","tips","Bessel 1841 (Namibia)","_readNode","direction","contrast","distanceHorStr","pick3DTileset","_clock","highlightOpen","https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png","height","回调属性未覆盖更新","popupClose","color_bak","endDraw","promise","createGeometry","eva","ee24b622294b5bc659fb92fe81084776","stop","ellipsoid","BACK","_reflectorProjectionMatrix","_PointEdit_Z_TRANSLATION","getRectangle","configureNameFromProperties","editing","Scale_Factor","_primitiveBias","latColumn","_onMap_wheel","cssText","_intersectionColor","_moveDistanceStep","yHalfAngleDegree","_图上标记","checkData","_domeBackCommand","noCenter","selectedImageryProviderViewModel","_eventParents","_last_hasNull","ArcType","NONE","frameState","_filterPOIData_circle","AspectRamp","_orginCenterPosition","corridorStyleConver","esriGeometryPolyline","evenColor","getTime","showWall","addItem","_main","查询中...","smoothWidth","highDynamicRange","setOpacity","enableTilt","equalsEpsilon","Cartesian3","WMS 解析GetCapabilities有误","_normal_angle1","EPSILON7","PostProcessStage","_primitive_boxs","fromTranslationQuaternionRotationScale","_draw_holes","Route 类不支持autoSurfaceHeight方法 ！","cross","abs","mouseMoveTarget","MarsArray","clipOutSide","_修改高度","PostProcessStageSampleMode","startTime","_contextmenuMgr","_positionTexture","scaleByDistance_near","_addedBaseHook","isFormat","Geocentric","GEODETICCRS","relativeAmount","def","_unbindEvent","DOUBLE","lon","keyWord","img_z","group","options.positions","_reflectorWorldPosition","PerspectiveOffCenterFrustum","_rotateMouseMoveFunction","_fillColor","postRender","_counts","Beduaram","WFS","stringify","BoxStyleConver","updateAreaForTerrain","ModelStyleConver","_showHook","tileProvider","_createPrimitive","_jzmHeight","mars3d-popup-animation","hasEditRotate","buildings","font","longlat","_sunlight","anchor","EPSG:4491","crsy","_c/wmts?service=WMTS&version=1.0.0&request=GetTile&tilematrix={TileMatrix}&layer=","bottom","font_size","heading","_style2Json","+proj=tmerc +lat_0=0 +lon_0=108 +k=1 +x_0=36500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","lineOffset",".contextmenu-item","depthTexture","enableLighting","alt","Am5SdKm6pNdkP1P5zuUOMZwleCHeA7GD5vuQgZ3xBUbEMBeQ5cQ1WN4B8xqqV1Vt","mouseOver","_key_index","ewnsud","modelToWorld","rgba(255, 255, 255, 0.2)","LINES","_containerTime","RGBA","getSeconds","_rightLayer","u_mars3d_flood_texture","outlineOpacity","图片加载失败：","170px","ArB","showThroughEllipsoid","getOrientation","Request aborted","defaultView","width","minimumTerrainLevel","blurSamples","_startDrawHook","_hasEdit","ShaderProgram","_thingList.destroy 异常","arrayRemoveDuplicates","getByAttr","addSample","hough","Kaula 1961","duration","_单击完成绘制","iconCls","#btn-clockAnimate-start","_instanceIds",`
  <div class="mars3d-divBoderLabel" style="
  --text-font-size: `,"downGraphic","polygonC","EllipsoidSurfaceAppearance","TileProviderError","cosc0","s45","CheckerboardMaterialProperty","offsetTop",`<Intersects>
                      <PropertyName>`,"bgColor","vandg","redraw","_orginCenterPoint","_无法删除不能少于最小点数","maximumSizeX","cosrot","getExtent","_drawDelEventType","velocity","關閉日照陰影","headingPitchRollQuaternion","removeAllScanPlan","citylimit","disableEdit","BrightnessEffectYes","_highlightAll","queryText","isInPush","https://t{s}.tianditu.gov.cn/","VERTICAL","showSkyBox","esriGeometryMultipoint","mouseMove","resolve","thicknes","isPause","unit","wprd","_graphic_dragger_ing","rayPlane","index","center","_backgroundColor_alpha_bak","_map_extentChangeHandler","_minimumCollisionTerrainHeight","arrayBufferView","ZERO","lineCount","Resource","_scanPlaneVA","_czmContainerKey","clampToTerrain",`
#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif

void main() {
  out_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
}
`,"允許進入地下","WGS 60","-mars3d-contextmenu-ul","sts","Y_UP_TO_X_UP","bindUpdateEvent","_onDbClickHandler","bottomHeight","add","address","planeStyleConver","lngLatToPoint","_y_direction","_rotateStep","UNBOUNDED","heightReference",`</Literal>
            </PropertyIsEqualTo> `,"query","”相关数据！","goFirst","czm_cellular","selected","_arrowLength","_intersectionWidth","createImageryProvider","i3s","Matrix4","setPitch","number","drawRingCanvas","arc_x","Mars3DEx","dimensions_z","CGCS2000_GK_Zone_3","EPSG:4499","minHeight","html","toLowerCase","style","fromElements","translucent","_fxOnePoint","isAnimate","_updatePositionsHook","_position_inertial","endAngle","mars3d-compass-outer","postUpdate","magnitude","maxHeight 请传入有效数值！","rings","关闭亮度","YELLOW","getColorByStyle","toString","增加點","getState","enableControl","ADD","normalMap","setAttribute","_visibleColor","computePositions","fa fa-eye-slash","scanPlane","keydown","ADDED","isFlyAnimation","EncodedCartesian3","_graphicList","_points","marsJzwStyle","_getDrawEntityClass","dimensions_x","onerror","lat1","KeyboardEventModifier","今天（实际时间）","_primitives","_createGeometryInstanceItem","_billboard2DList","AspectColorContour","_addedHook","isConstant","_onPreRenderHandler","_updateMatrixRotatePosition","transparent","Enable sky atmosphere","TimeInterval","debugAxisLength","randomColor",`uniform bool u_showIntersection;
uniform bool u_showThroughEllipsoid;

uniform float u_radius;
uniform float u_xHalfAngle;
uniform float u_yHalfAngle;
uniform float u_normalDirection;
uniform float u_type;

in vec3 v_position;
in vec3 v_positionWC;
in vec3 v_positionEC;
in vec3 v_normalEC;

vec4 getColor(float sensorRadius, vec3 pointEC) {
  czm_materialInput materialInput;

  vec3 pointMC = (czm_inverseModelView * vec4(pointEC, 1.0)).xyz;
  materialInput.st = sensor2dTextureCoordinates(sensorRadius, pointMC);
  materialInput.str = pointMC / sensorRadius;

  vec3 positionToEyeEC = -v_positionEC;
  materialInput.positionToEyeEC = positionToEyeEC;

  vec3 normalEC = normalize(v_normalEC);
  materialInput.normalEC = u_normalDirection * normalEC;

  czm_material material = czm_getMaterial(materialInput);
    // czm_lightDirectionEC在cesium1.66开始加入的
  return mix(czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC), vec4(material.diffuse, material.alpha), 0.4);

}

bool isOnBoundary(float value, float epsilon) {
  float width = getIntersectionWidth();
  float tolerance = width * epsilon;

  float delta = max(abs(dFdx(value)), abs(dFdy(value)));
  float pixels = width * delta;
  float temp = abs(value);
  return temp < tolerance && temp < pixels || (delta < 10.0 * tolerance && temp - delta < tolerance && temp < pixels);
}

vec4 shade(bool isOnBoundary) {
  if(u_showIntersection && isOnBoundary) {
    return getIntersectionColor();
  }
  if(u_type == 1.0) {
    return getLineColor();
  }
  return getColor(u_radius, v_positionEC);
}

float ellipsoidSurfaceFunction(vec3 point) {
  vec3 scaled = czm_ellipsoidInverseRadii * point;
  return dot(scaled, scaled) - 1.0;
}

void main() {
  vec3 sensorVertexWC = czm_model[3].xyz;      // (0.0, 0.0, 0.0) in model coordinates

  float positionX = v_position.x;
  float positionY = v_position.y;
  float positionZ = v_position.z;

  vec3 zDir = vec3(0.0, 0.0, 1.0);
  vec3 lineX = vec3(positionX, 0, positionZ);
  vec3 lineY = vec3(0, positionY, positionZ);
  float resX = dot(normalize(lineX), zDir);
  if(resX < cos(u_xHalfAngle) - 0.00001) {
    discard;
  }
  float resY = dot(normalize(lineY), zDir);
  if(resY < cos(u_yHalfAngle) - 0.00001) {
    discard;
  }

  float ellipsoidValue = ellipsoidSurfaceFunction(v_positionWC);
  if(!u_showThroughEllipsoid) {
    if(ellipsoidValue < 0.0) {
      discard;
    }
    if(inSensorShadow(sensorVertexWC, v_positionWC)) {
      discard;
    }
  }

  bool isOnEllipsoid = isOnBoundary(ellipsoidValue, czm_epsilon3);
  out_FragColor = shade(isOnEllipsoid);
}
`,"_setCameraViewListIndex","hasMoveEdit","_entity_label","_colorCommands","contextMenuOpen","SurfacePoints: 请传入scene参数","_toOneJson_Point","roll","_modelUpAxis","some","rois","_mousMiddleUpHandler","_last_graphicsOptions","hdr","multiplyByUniformScale","enabledMoveTarget","cancel","textures","_mousMiddleDownHandler","imageryProviderViewModels","_maximumLevel","_primitive_label","_getCssText","outerHTML","debuggerPointEntity","shadows","preRender","property","_arrThing","MoveAll","fill","isDestroyed","_orbitCursorOpacity","geometries","cva","_handler","_roll_reality","startsWith","charAt","hue","_toCesiumValBefore","draggers","ImageryLayer","開啓鍵盤漫遊","_colorFramebuffer","Geometry","pixelFormat","northing","_getEventTarget","leftDown","geocoderConfig","_initEffect","+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","_update","Water","addGraphic","_cancelOutlinePositionsCallback","createElementNS","parentContainerId","enableRotate","depthRange","lodGraphic","_toOneJson","stopDraw","ClippingPlaneCollection","makeLabel","isEntity","CESIUM_3D_TILE","_globalAlpha","https://restapi.amap.com/v3/place/polygon","openContextMenu","moveUp","AREA_0","_clampToTilesetFrame","updatePass","_calculateAsynSurfacePosition","startEditing","onCreateGraphic","clone","_speed","highlightEnabled","_updateDistanceDisplayConditionByEdit","the_geom","UndergroundYes","timeRender","inverseTransformation","getElementsByTagName","default","_maximumDistance","textAlign","_formatRouteData","FormatLength","修改半徑","values","ARCGIS","_initSampledPositionProperty","_cylinderLength","pn1","_planeOptions","_minPointNum","updateGridPositions","getQBSplinePoints","_editMatrix","_labels","Translation by axis","sigma","flip_axis","flood","TOP_ROTATE","createObjectURL","ep2","south","_tileset","acos","showPlane","_menuObj","word","faceForward","_graphic_rotate_x","AZURE","EPSG:4519","moveRight","cartesianArrayToCartographicArray","_limitAngle","_rate_positions","_draggerIng","px;height: ","computeModelMatrix","getLangText","_getTileEventParams","sources3","fromRotationZ","tailorRect","onEnd","请输入地址...","_smallMap","requestImage","drawRemovePoint","_highlightOptions","topRadius","keyup","toInternalFormat","layers","_container_onMouseoutHandler","Modify the length(X direction )","RIGHT","getLayer","_shadowMap","getPoint","Tileset","dot","popupOpen","infinity_dist","TilesetBoundingVolumeNo","_useSingleColor","getProperty","_UniformState_updateFrustum_old","X_TRANSLATION","proxy","FlyToPoint","Bad character: ","planes","_tileProvider","clearRect","backToFirst","_rebindCzmContainer","img_d","location","max(contourMaterial.alpha, slopeRampMaterial.alpha)","specularMap","wgs84","_updateVirtualCamera","Soviet Geodetic System 85","dimensions_y","globeHeight","ENLARGE","_setOptionsHook","DistanceDisplayCondition","split","shaderSource","brightnessEffect","sin","_isDragger","Lat","widthRatio","imageryLayer","grid","lat","_增加点","_cacheGraphic","ENABLED","IonImageryProvider","getElevationContourMaterial","handleError","error","_getAddress_ing","datumCode","_backwardExtrapolationDuration","_last_pickedObject","_granularity","enablePickFeatures","CGCS2000_GK_CM_6","_enabledEdit","行政地标","_zoomNavigation","outlinePositions","_allowDrillPick","SlopeRamp","_hasChangeEnableInputs","hasEmptyGroup","_layerIdx","_hasLoad","resolveFramebuffers","_limitGlobe","showGroundAtmosphere","waterColor","waypoints","px bold normal","_setViewerOption","lat_ts","cacheTime","cesium-viewer-animationContainer","_data","_createPlaneByLine","_createGeometryInstance","feature","rectangleStyleConver","mill","excludedKeys","_waterPlane","pauseTime","showNextPage","paths","views","origin","fog","GeographicTilingScheme","open","Icon","getBisectorNormals","uuid","getGridKey",`</a>
                    `,"開啓下雨","leadTime","Delete","AnimationViewModel","CesiumTerrainProvider","unbindPopup","1=1",`uniform vec4 color;

void main() {
  out_FragColor = color;
}
`,"aspectRatio","image","_moveMaxHeight","defined","editStop","scaleZ","RenderState","_reflectMatrix","開啓拾取高亮","rgba(255, 255, 255, 0.0)","styleFieldOptions","positionWC","_onMouseMoveHandler",'" class="mars3d-popup-btn ',"hpr","JulianDate","LESS","translation",`in vec3 v_positionMC;
in vec3 v_positionEC;
in vec2 v_st;

void main() {
  czm_materialInput materialInput;
  vec3 normalEC = normalize(czm_normal3D * czm_geodeticSurfaceNormal(v_positionMC, vec3(0.0), vec3(1.0)));
    #ifdef FACE_FORWARD
  normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);
    #endif
  materialInput.s = v_st.s;
  materialInput.st = v_st;
  materialInput.str = vec3(v_st, 0.0);
  materialInput.normalEC = normalEC;
  materialInput.tangentToEyeMatrix = czm_eastNorthUpToEyeCoordinates(v_positionMC, materialInput.normalEC);

  vec3 positionToEyeEC = -v_positionEC;
  materialInput.positionToEyeEC = positionToEyeEC;
  czm_material material = czm_getMaterial(materialInput);

    #ifdef FLAT
  out_FragColor = vec4(material.diffuse + material.emission, material.alpha);
    #else
  out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);
    #endif
}
`,"getOutlineCoordinates","stRotation","polylineC","cesium-button cesium-toolbar-button mar3d-toolButton","_filterPOIData_polygon","_computedModelMatrix","cloud","经纬度：","editMovePoint","straightArrow","https://restapi.amap.com/v3/place/text","_wall_maximumHeights","关闭包围盒","planeC","%' ","hasChildLayer","SceneModePicker","pointGrid","then","geocentric","SurfacePoint: 请传入scene参数","FeatureCollection","_state","undergroundColorAlphaByDistance","onlyPickModelPosition","_optionsBasemapsList","WGS84","beginFrame","showFrustum","_frustumPrimitive","maximumConeDegree","_requiredResolution","_pointCollection","json","closed","_isCallbackPositions","closeHighlight","formatData","&nbsp;&nbsp;&nbsp;&nbsp;","removeMapChilds","tooltip","_colorTexture","followedZ","_last_isFireStop","show","_getDrawPointEntityClass","queryParameters","debugAxisPrimitive","cirdrawGradientCircleCanvas","_禁止编辑","_getPickIds","sceneFramebuffer","popupOptions","_drawEndEventType","_isMouseLeftButtonPressed","FrustumGeometry","TRANSLUCENT","plane_normal","targetPosition","maxPointNum","_addGraphicByArrOptions","MERIT 1983","createDepthOfFieldStage","wrapS","_updateView","_darkness","tan","_orbitIsLook","_bindExType","ESRI","_bak_startTime","black","_bindUpdateCallback","sin_p14","_高度","block","sizeInBytes","customShader","imageBasedLighting","LineThreeDash","objectid","clock_onTickHandler","unpack","ion",";z=","_second","test","PolylineVolumeOutlineGeometry","_imageryLayer","路径规划 请求失败(","luminanceAtZenith","Longitude of false origin","_getItemDataId","innerHTML","particleSize","supportsImageRenderingPixelated","_getLablePosition","rightDown","fetchJson","box","tiltEventTypes","openFlyAnimation","this.radius must be greater than or equal to zero.","animation","getImage","mouseEvent","PROJECTEDCRS","_oldPickedId","ContextLimits","_cameraMoveStartHandler","场景出图_","snowCover","#123e59","uplift","getArrowPoints","valueFD","停止编辑","_cubeMap","_isLeftDown","cartesianToCartographic","geojson","polygon","polygonMaxHeight",'". State is ',"#FF9742","_shadingType","list","vertexs","plane","_removeAreaHook","featureIndex","scanPlaneRate","lang","_createAppearance","EPSG:4493","Unknown","Type","cql_filter","measure",`<?xml version="1.0" encoding="UTF-8"?>
<svg width="20" height="20" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="48" height="48" fill="white" fill-opacity="0.01"/>
  <path d="M16 12V36" stroke="#ffffff" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M32 12V36" stroke="#ffffff" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`,"_name","BloomEffectNo","testPoint","showPointHeightLabel","entityCollection","angle1","+proj=tmerc +lat_0=0 +lon_0=84 +k=1 +x_0=28500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","to_meter","关闭夜视","call","getInMapChilds","GeometryPipeline","transform","forward","vec_e","state","_proxy","activeTexture","clustering","getRealAlt","querySelectorAll","city_limit","attributes","mars3d-mousedownview-show","defaultTimeFormatter","+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=45500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","_graphicLayer_leftDown","cartesian","entity","maxWidth","EPSG:4550","zoomTo","parameters","styleOpt","resetFloodValue","rotate","substr","_outlinePositions","updateLengthForTerrain","DigitalFlow","_unionRectangle","digVolumeStr","_getCameraFocus","addMaterial","entitys","eventParent","BillboardCollection","basemap","_last_velocity","_camera_cache","cosph0","modelStyleConver","_center","setOptions","toArray","_resetCamera","Everest 1969","BLUE","C_x","TRIANGLES","nzmg","hasChildThing","cosb1","_pitchWhenLeftClicked",`px;
  --clip-width-2: `,"label","viewer","PostProcessStageLibrary","scanPlaneMode","Drag that point","ms2","getQuadricBSplineFactor","max-forwards","css_transform_origin","_minimumLevel","arrLayer","_errorEvent","mars3d-mousedownview-img","timeTik","ArcGIS 全球地形","_enabledHook","+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=23500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","imageryLayers","hideNull","_lastMouseOverItem","DIRECTION_LEFT","destroy","PROJECTION","offsetY","_draggerMove","_dirStep","ExtrapolationType","Aerial","S_POLE","MipmapHint","MGRSPoint bad conversion from: ","fromQuaternion","MaterialUtil registerClass: ","_popupMgr","getHeight","headers","vscale","insertIndex","upperCase","maximumSize","grainFrequency","vertexFormat","LightingModel","repeat_y",".cesium-performanceDisplay-throttled","FLAT_VERTEX_FORMAT","pitPrimitive","stopEditing","Alt","_blur_comp","_zhStyle","last_highlighGraphic","geometry","_lastDynamicPosition","EPSG:4522","fromType","_rotationScratch","LabelStyle","colorOptsConver","maximumSizeY","customTags","imageBottom","修改縮放比例","_pickRS","class","authorization","createGraphic","viewport","isLoading","saturation","fa fa-send-o","coord_type","getLayerByAttr","change","getValue","like","ALL","_entity_scanPlane","_yHalfAngle",'<iframe id="ifarm" src="',"steps","reverseROI","setValue","pointStyleConver","fillRect","_createEntity","startMoveLeft","rgba(255, 255, 255, 1.0)","scale_factor","_propagateEvent","toGeoJSON","_has3dtiles","_标记面","water","UNLIT","_draw_tooltip","unproject","circle","4928120DaIDcj","angleMeasure","fa fa-download","currentTime","_修改位置","_container_rotationArc","_orientation_show","ShadowMode","_extrudedHeight","filterColor","bogota","labelCollection","updateEnvironment","GCJ02","_marsOptions","_contourColor","_tooltipMgr",`
      transform: rotate(-`,"_pickCommand","createAttributeLocations","拖動該點後","_hasUpdate","editStyle","count","inner_controlPoints","lineNumber","X_UP_TO_Z_UP","currentObject","buffer","<div>名称：","_getColorByColorMaterial","viewModel","_横切面积","_toJsonEx","hasMidPoint","slice","interpolate","_pointEx","timeoutErrorMessage","arrLX","_openByMouseEvent","removeGraphic","reflectorViewMatrix",'<li class="line"></li>',"_outlineColor_alpha_bak","_getGeoJsonGeometry","_海拔","restore","_updateTableLength","_createOK","rightLayer","_drawAddPointHandler","_orbitTickFunction","entities","关闭黑白","Cesium3DTileStyle","类型已存在","includeKeys","removeNearPoint","fa fa-codepen","tms","_textureSize","_updateAngleAndOpacity","left click add point","locationData","fromCartographicArray","getArrayRandomOne","tilingScheme","minPointNum","Transverse Mercator","_scanPlaneColor","_minHeight","fillColor","digVolume","orientation","document.getElementById(","radius_g","_containerSpeed","POSITION_ONLY","zoom","Hotine_Oblique_Mercator_Azimuth_Center","_wkid","Ray","_tileDiscardPolicy","_position","headTailFactor","_rectangularSensorMars","LineFlicker","warn","_removeMeasureLabelAndEx","YZ_TRANSLATION","trs","defaultLayer","_czmBuiltinsAndUniforms","sqrt","webearth2","primitiveCollection","data","update","_tooltipConfig","_entity_outlines","atan2","_container_onMouseMoveHandler","contourMaterial.alpha == 0.0 ? elevationRampMaterial.diffuse : contourMaterial.diffuse","_targetPoint","_onEventHook","orderIndependentTranslucency","coneTrack","isProperty","reverse","sin_phi","_framebuffer","ClassificationPrimitive","texture","fromDimensions","getTileLayers","hasThing","disableDepthTestDistance","_camera","ImageMaterialProperty","isPrototypeOf","_skyboxMatrix3","GroundPolylineGeometry","IdField","fa fa-rss","Latitude of false origin","_maxHeight","MGRSPoint coverting from nothing","_toOneCesiumVal_Point","createVertexArray","volumeMeasure","_enableDebugWireframe","_sources2","union","enabled","fa fa-connectdevelop","_highlightEnabled","application/json","rainEffect","#000000","_cache_","layerDefs","_czmContrl","objectsToExclude","currentTarget","enableInputs","setSceneOptions","hierarchy","rotateSpeed","size","Close skyBox","GRS80","flyToGraphic","雙擊完成繪制","Axis","getPickRay",`#extension GL_OES_standard_derivatives : enable
uniform sampler2D colorTexture;
uniform sampler2D depthTexture;
uniform float lineWidth;
uniform float height;
uniform bvec3 strokeType;
uniform vec3 tjxColor;
uniform vec3 bjColor;
uniform vec3 cameraPos;
uniform float mbDis;
in vec2 v_textureCoordinates;

vec4 toEye(in vec2 uv, in float depth) {
  vec2 xy = vec2((uv.x * 2.0 - 1.0), (uv.y * 2.0 - 1.0));
  vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);
  posInCamera = posInCamera / posInCamera.w;
  return posInCamera;
}
float getDepth(in vec4 depth) {
  float z_window = czm_unpackDepth(depth);
  z_window = czm_reverseLogDepth(z_window);
  float n_range = czm_depthRange.near;
  float f_range = czm_depthRange.far;
  return (2.0 * z_window - n_range - f_range) / (f_range - n_range);
}
bool isTJX(vec2 uv, float lw) {
  vec2 pixelSize = lw / czm_viewport.zw;
  float dx0 = -pixelSize.x;
  float dy0 = -pixelSize.y;
  float dx1 = pixelSize.x;
  float dy1 = pixelSize.y;

  vec2 currUV = uv + vec2(dx0, dy0);
  vec4 currDepth = texture(depthTexture, currUV);
  float depth = getDepth(currDepth);
  if(depth >= 1.0)
    return true;

  currUV = uv + vec2(0.0, dy0);
  currDepth = texture(depthTexture, currUV);
  depth = getDepth(currDepth);
  if(depth >= 1.0)
    return true;

  currUV = uv + vec2(dx1, dy0);
  currDepth = texture(depthTexture, currUV);
  depth = getDepth(currDepth);
  if(depth >= 1.0)
    return true;

  currUV = uv + vec2(dx0, 0.0);
  currDepth = texture(depthTexture, currUV);
  depth = getDepth(currDepth);
  if(depth >= 1.0)
    return true;

  currUV = uv + vec2(dx1, 0.0);
  currDepth = texture(depthTexture, currUV);
  depth = getDepth(currDepth);
  if(depth >= 1.0)
    return true;

  currUV = uv + vec2(dx0, dy1);
  currDepth = texture(depthTexture, currUV);
  depth = getDepth(currDepth);
  if(depth >= 1.0)
    return true;

  currUV = uv + vec2(0.0, dy1);
  currDepth = texture(depthTexture, currUV);
  depth = getDepth(currDepth);
  if(depth >= 1.0)
    return true;

  currUV = uv + vec2(dx1, dy1);
  currDepth = texture(depthTexture, currUV);
  depth = getDepth(currDepth);
  if(depth >= 1.0)
    return true;

  return false;
}

void main() {
  vec4 color = texture(colorTexture, v_textureCoordinates);
  if(height > 14102.0) {
    out_FragColor = color;
    return;
  }
  vec4 currD = texture(depthTexture, v_textureCoordinates);
  if(currD.r >= 1.0) {
    out_FragColor = color;
    return;
  }
  float depth = getDepth(currD);
  vec4 positionEC = toEye(v_textureCoordinates, depth);
  vec3 dx = dFdx(positionEC.xyz);
  vec3 dy = dFdy(positionEC.xyz);
  vec3 normal = normalize(cross(dx, dy));

  if(strokeType.y || strokeType.z) {
    vec4 wp = czm_inverseView * positionEC;
    if(distance(wp.xyz, cameraPos) > mbDis) {
      out_FragColor = color;
    } else {
      float dotNum = abs(dot(normal, normalize(positionEC.xyz)));
      if(dotNum < 0.05) {
        out_FragColor = vec4(bjColor, 1.0);
        return;
      }
    }
  }
  if(strokeType.x || strokeType.z) {
    bool tjx = isTJX(v_textureCoordinates, lineWidth);
    if(tjx) {
      out_FragColor = vec4(tjxColor, 1.0);
      return;
    }
  }
  out_FragColor = color;
}
`,"hasClickEvent","_distanceDisplayConditionCartesian2","_graphicLayer","czm_snoise","uniformMap","_useROI","surfaceDistance","editStart",`
  <div class="mars3d-animation-point" style="color:`,"primitives","unbindContextMenu","isWgs84","rotationDegree","arc","BaiduPOI 请求出错","_form","fillColor_bak","_stateAll","scanPlaneColor",`uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  vec4 colorImage = texture(image, vec2(fract(st.s + czm_frameNumber * speed / 1000.0), fract(st.t)));

  material.alpha = colorImage.a * color.a * globalAlpha;
  if(pure) {
    material.diffuse = diffusePower * color.rgb;
  } else {
    material.diffuse = colorImage.rgb;
  }
  return material;
}
`,"_getOutlineStyle","middle","body","lightDirection","_compassRectangle","shadingAlpha","esriSpatialRelIntersects","path","XY_TRANSLATION_COLOR","tailLeft","修改位置","LEFT","_eventResult","_promise_resolve","_primitiveCollection","ellps","specify","terrain","toFixed","multiple","MathDistance","ION","+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=17500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","_uniforms_blendColor_alpha","cesium-geocoder-input","TextureMinificationFilter","_关闭深度监测","PolygonGraphics","RED","addOuter","fields","rotateAnimation","EllipsoidGeodesic","moveCamera","showDomeSurfaces","grazingAltitudeLocation",")<br />坡向: ","toValue","ClippingPlane","shouldAnimate","polygonTexture","gamma","central_meridian","_matrixMove","moveForward","getAreaById","_last_material","capabilities","shapePositions","EPSG4326","eachGraphic","grids","2699019LHGmmw","_右击删除点","tileMatrixSetID","_layers","queryPolygon","hasAlphaChannel","rgba(255,0,0,1)","_uniforms","distanceHor","PassState","https://restapi.amap.com/v3/assistant/inputtips","gapColor","latitude_of_center","maximumSizeZ","updateControl","GaodeRoute 请求出错","_isStart","EPSG:4530","baseLayerPicker打开时，由baseLayerPicker机制决定，无法获取底图图层。","_onMorphComplete","showFillVolume","_更多功能请右击","divWidth","_cameraMoveEndHandler","move","sin_po","ground","GEOGCS","_map_preRenderHandler","light","请引入 Cesium 库","淹没分析","mars3d-contextmenu","level","clockStop","web2D","SampledProperty","10000","Primitive","_primitive_point","numberOfLevelZeroTilesX","pickFramebuffer","_map_mouseUpHandler","_mScale","updatePlane","fetchXML","_color","match","timeJulian","GeometryAttribute","_cutColor","EPSG:102113","alignmentInBytes","cosX0","ratio","scaleByDistance","_addCameraView","_getJulianDate","details","CloudStyleConver","_allPage","max","mouseDownView","maxDistance","_cancelPositionsCallback","_createPolylineOutline","停止調整比例","clip",`uniform vec4 u_color;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  float time = fract(czm_frameNumber / 90.);
  vec2 new_st = fract(st - vec2(time, time));
  vec4 color = texture(image, new_st);

  vec3 diffuse = color.rgb;
  float alpha = color.a;
  diffuse *= u_color.rgb;
  alpha *= u_color.a;
  alpha *= u_color.a;
  material.diffuse = diffuse;
  material.alpha = alpha * pow(1. - st.t, u_color.a) * globalAlpha;
  return material;
}
`,"_bindHeightDraggers","配置中的图层未处理","north","dataSources","animationSpeed","pfact","glow","_toCesiumValEnd","createMaterial：请指定mars3d.MaterialType类型","middleUp","kaula","getRequiredDataPoints","標記面","_defaultView","_setCameraViewListItem","_orbitLastTimestamp","446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894","CENTER","B_im","proj4","fontBillboard","registerTerrainProvider: ","fa fa-male","appendChild","当前浏览器不支持WebGL功能","_createCzmControl","bessel",`
      transform : rotate(-`,"SampledPositionProperty","radius_p_inv2",`px;"
                        data-type="`,"pixelOffset_original","longc","contourShow","isAutoEditing","visibleAreaColor","_axisRotation","_closeAllControl","DebugModelMatrixPrimitive","WGS7","TOP","_开启拾取高亮","bbox","scanPlaneOpacity","25px","drawAreaCommand","Oblique_Mercator","_createPostProcessStage","mars3d-divlayer","stopMoveLeft","_inverseMatrix","SCENE2D","computeNormal","_mouseMoveHandle","http://api.tianditu.gov.cn/v2/search","_performanceDisplay","_arrLayer","east","token","_开启键盘漫游","turf.","min","top","exitFullscreen","get","stRotationDegree","EditClass","totalArea","_cascadeSplits","catch","alpha","Y_TRANSLATION","_view","_showBox","titleField","DISABLED","maximumImageSize","_onKeyUp","afterquote","_纬度","_reflectorViewMatrix","clockTick","_mars3d_id","tm65","_showSectorLines","C_re","activateMouseOut","_getFlagForKeyCode","off","url","lines","_pickId","getMetadata","LineString","_pointEditElementIDs","setCameraView","now",`
            <span  class="contextmenu-arrow" >
              <svg width="20" height="20" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="48" height="48" fill="white" fill-opacity="0.01"/><path d="M20 12L32 24L20 36V12Z" fill="#ffffff" stroke="#ffffff" stroke-width="4" stroke-linejoin="round"/></svg>
            </span>  `,"addDynamicPosition","0{s}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}","tilesetLayer","_hasTerrainShadows","&nbsp;&nbsp;","_array","_updateImage_delay","LabelCollection","修改長度(X方向)","_crs","_shadowMapCamera","slopeRampMaterial","_开启日照阴影","_updateOutlineOpacity","_pitch_max","pick","closeContextMenu",'<div class="mars3d-template-content" >',"floodAll","s90","_hasZIndex","_位置信息","rgba(181, 226, 140, ","Sampler","+proj=tmerc +lat_0=0 +lon_0=102 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","enabledEvent","className","basemaps","stopMoveMatrix","_root","text","_fpsFrameCount","zIndex","#txt-clockAnimate-speed","按軸平移","#FFFFFF","fetchJson出错了",`
    uniform sampler2D colorTexture;
    uniform float direction;

    uniform float delta;
    uniform float sigma;
    uniform float stepSize;

    in vec2 v_textureCoordinates;
    void main()
    {
      vec2 st = v_textureCoordinates;
      vec2 dir = vec2(1.0 - direction, direction);
      vec2 step = vec2(stepSize * (czm_pixelRatio / czm_viewport.zw));

      vec3 g;
      g.x = 1.0 / (sqrt(czm_twoPi) * sigma);
      g.y = exp((-0.5 * delta * delta) / (sigma * sigma));
      g.z = g.y * g.y;
      vec4 result = texture(colorTexture, st) * g.x;

      for (float i = 1.0; i < float(SAMPLES); i+=1.0)
      {
        g.xy *= g.yz;
        vec2 offset = i * dir * step;
        result += texture(colorTexture, st - offset) * g.x;
        result += texture(colorTexture, st + offset) * g.x;
      }
      out_FragColor = result;
    }
    `,"toCesiumVal","showArea","sources","result_type","edgeWidth",`
        uniform sampler2D u_mars3d_flood_texture;
        uniform int u_mars3d_flood_upAxis;
        uniform int u_mars3d_flood_rangeNumber;
        uniform int u_mars3d_flood_maxRangeLength;

        uniform bool u_mars3d_isStart;
        uniform vec4 u_mars3d_flood_color;
        uniform bool u_mars3d_flood_floodAll;
        uniform float u_mars3d_flood_currentheight;
        uniform float u_mars3d_flood_min_height;
        uniform bool u_mars3d_flood_limitMin;

        vec4 restorePoint_mars3d_flood(vec4 point) {
          vec3 outpoint = point.xyz * point.w;
          return czm_inverseModel * vec4(outpoint, 1.0);
        }

        vec4 getRegions_mars3d_flood(int x, int y) {
          float u = (float(x) + 0.5) / float(u_mars3d_flood_maxRangeLength + 2);
          float v = (float(y) + 0.5) / float(u_mars3d_flood_rangeNumber);
          vec4 point = texture(u_mars3d_flood_texture, vec2(u, v));
          return point;
        }

        bool inRectangle_mars3d_flood(vec3 textPoint) {
          for(int h = 0; h < 100000; h++){
              if(h >= u_mars3d_flood_rangeNumber) break;

              vec4 first = restorePoint_mars3d_flood(getRegions_mars3d_flood(2, h));
              float currentLength = getRegions_mars3d_flood(0, h).x;
              float counter = 0.0;
              float xinters = 0.0;
              for(int w = 0; w < 100000; w++){
                  if(float(w) >= currentLength) break;
                  int nextIndex = w + 1;
                  nextIndex = float(nextIndex) == currentLength ? 0 : nextIndex;
                  vec4 p1 = restorePoint_mars3d_flood(getRegions_mars3d_flood(w + 2, h));
                  vec4 p2 = restorePoint_mars3d_flood(getRegions_mars3d_flood(nextIndex + 2, h));

                  float p1x = p1.x;
                  float p1y = p1.z;
                  float p2x = p2.x;
                  float p2y = p2.z;
                  float textPointx = textPoint.x;
                  float textPointy = textPoint.z;

                  if(u_mars3d_flood_upAxis == 0){
                      p1x = p1.y;
                      p1y = p1.z;
                      p2x = p2.y;
                      p2y = p2.z;
                      textPointx = textPoint.y;
                      textPointy = textPoint.z;
                  } else if (u_mars3d_flood_upAxis == 1) {
                      p1x = p1.x;
                      p1y = p1.z;
                      p2x = p2.x;
                      p2y = p2.z;
                      textPointx = textPoint.x;
                      textPointy = textPoint.z;
                  } else {
                      p1x = p1.x;
                      p1y = p1.y;
                      p2x = p2.x;
                      p2y = p2.y;
                      textPointx = textPoint.x;
                      textPointy = textPoint.y;
                  }


                  if(textPointx > min(p1x, p2x) && textPointx <= max(p1x, p2x)){
                      if (textPointy <= max(p1y, p2y)){
                          if (p1x != p2x){
                              xinters = ((textPointx - p1x) * (p2y - p1y)) / (p2x - p1x) + p1y;
                              if (p1y == p2y || textPointy <= xinters){
                                  counter += 1.0;
                              }
                          }
                      }
                  }
              }
              if((mod(counter, 2.0) != 0.0)) {
                  return true;
              }
          }
          return false;
        }

        void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material){
            vec3 positionMC = fsInput.attributes.positionMC;
            if(u_mars3d_isStart && (u_mars3d_flood_floodAll || inRectangle_mars3d_flood(positionMC))){
                float height = positionMC.z;
                if(u_mars3d_flood_upAxis == 0){
                    height = positionMC.x;
                } else if (u_mars3d_flood_upAxis == 1) {
                    height = positionMC.y;
                } else {
                    height = positionMC.z;
                }

                if(height<=u_mars3d_flood_currentheight && (!u_mars3d_flood_limitMin || u_mars3d_flood_min_height<=height))
                {
                  material.diffuse = mix(material.diffuse, u_mars3d_flood_color.rgb, u_mars3d_flood_color.a);
                }
            }
        }
      `,"endPosition","minPitch","BloomEffectYes","_updateControlHandler","glowOnly","_viewer.destroy异常","无地形","_radius","kilometers","content","areaMeasure","leftUp","Math","neckAngle","_updateLabelPosition","allPage","_onClickHandler","loadBefore","_shadowMapMatrix","close",'px;">',"_PointEdit_Y_TRANSLATION","#ffff00","_clearLastHighlight","addControl","fromTranslationRotationScale","defs","horizontalOrigin","cgb","_properties","offsetLabel","_移动到此处","updateMaterial","fogEffect","http://api.tianditu.gov.cn/geocoder","IAU2000:","brightness","C_y","MOUSE_MOVE","CubeMap","angle","_lng","RectangleGeometryLibrary","_fillColor_alpha_bak","getAzimuth","cacheMarsOptions","_平方公里","TimeIntervalCollection","_mouseEvent","rectangle","function","_looking","destroyDraggers","silhouetteColor","destroyCommands","globe","cesium-baseLayerPicker-dropDown","round","_conversionStyle","availability","_viewer","scaleByDistance_far","#3388ff",'<li class="contextmenu-item" data-index="',"returnIdsOnly","ArcGISTiledElevationTerrainProvider","setBasemapsOptions","getTailPoints","blendColor","mars3d-smallTooltip-rightArrow","derivedCommands","MultiLineString","northwest","_polygonTexture","_defaultColorTexture","The overall translation","lateralSurfaceMaterial","右键+拖拽，或者","u_mars3d_flood_maxRangeLength","interpolationDegree","_cascadeMatrices","limitMin","_autoStyle","handler","getOutlineColorByStyle","_initTilesetClip","queryExtent","eia","_projection","utmSouth","_map_preUpdateHandler","yyyy-MM-dd HH:mm:ss","_measureType","_toOneCesiumVal_Poly","removeEventListener","download","https://api.map.baidu.com/place/v2/search","_controlList","axis","terrainLoadSuccess","_clearDraw","Edit Scale","streetview","firefox","_style2JsonBase","rotateRight","_跟踪锁定","bloom","floor","_modelViewInfiniteProjectionDirty","_onLeftUpHandler","MultiPoint","repeat","clear","_pixelDatatype","getRange","_updateMaxMinHeights","datum_params","near","material_bak","_keys","_previousClusters","keyCode","_czmControlKey","maximumLevel","右键菜单操作出错","post","<br/>","getPickTarget","contextmenuItems","fire","formatted_address","offset","_last_clockRange","_isBindTileVisible","ImageType","dth","keyboardRoam","Lambert_Conformal_Conic_1SP","clampToTileset","getMaxHeight","+proj=tmerc +lat_0=0 +lon_0=78 +k=1 +x_0=26500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","_on","getTooltipConfig","headingPitchRollToFixedFrame","boundingSphere","_modelMatrix","processFeatureCollection","drawCreated","Material","標記矩形","Model","parse","_moveDistanceSum","_contourWidth","Tilted_Perspective","distanceDisplayCondition","baseVal","_mouseClickHandler","TerrainYes","PointStyleConver","_geoJsonLayer","glowPower","fromMercator","_getDrawEntityStyle","_bindControl","pid","FeatureDetection","NavigationHelpButton","dataSource","_hasUpdate_emitterModelMatrix","mars3d-distance-legend","interVal","swallowTailFactor","qWM3MBm5oWLI06sa3A3otnpaxGQr8jIw","pickFeatures","SceneTransforms","area","_clampToGround_reload","handleSuccess","colorHidden","toDate","_isRotateStart","fireTarget","Lambert_Azimuthal_Equal_Area","_initCollectionBy2D","onload","水平距離","_positions_circle_z","enableCollisionDetection","_removeLabel","_开启黑白","updateStatus","_labelCollection","L{arc_z}","updateDistanceDisplayCondition","createDragger","editPlane","clippingPlanes","play","_关闭日照阴影","timeline","del","WMS getMetadata请求出错","_textureTarget","_measureHorLable","zoomEventTypes","_bindMoveAllDragger","backwardExtrapolationType","highlight","holes","endDate","minorDragger","disable","120000|130000|190000","accuracy","+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=16500000 +y_0=0 +ellps=GRS80 +units=m +no_defs",`
                      data-type="`,"_createIcon","distanceStr","getContext","Fly around here","_depthStencilTexture","_enabled","_measured","spacing","getType","Airy 1830","set","openFlyAnimationEndFun","tdt","标记矩形","BOTTOM","RotatePointStart","getAllPositions","bing","_tilingScheme","dirStep","mouseover","dashPattern","addTileError","onLoadSuccess","NEAREST","openSmallTooltip","no_rot","_toOneCesiumVal","updateTimer","_outlineEx","_立方米","children","_removeCollectionBy3D","replace","_setCameraViewListOptions","onmouseover","attr","LngLatPoint","_rotateFrame","subtract","TdtPOI 请求出错","regular","varying","unbindEvent","QueryArcServer 请求出错","updateModelMatrix","layer","DrawCommand","leftPositions","div","_hasEditScale","getShowPositions","videoDepth","ready","constrainedAxis","Safari","_updatePrimitiveOpacity","_maxPitch","_graphic_move_y","u_0","lonlat","PolylineVolumeGeometryLibrary","_attributes_color_alpha","getThing","aust_SA","setView","normalY","flat","bindDraggers","_getVector","_arrLayerIdx","_tailorRect","_hiddenAreaColor","osgb_1936","shiftKey","toRadians","contourMaterial.alpha == 0.0 ? aspectRampMaterial.diffuse : contourMaterial.diffuse","cos_p12","_islosdImg","polygonWallStyle","time","GeoJsonLayer：没有传入 url 或 data 参数,请确认是否有误。","tooltipOptions","fromColor","maximumTextureSize","_silhouetteColor_alpha_bak","CorridorGeometry","_sendCount","bigfont","_getCustomShader","地图上已有","postProcessStages","_hasEditHeading","diffusePower","Proj","_labelEl","osmBuildings","DATUM","ComponentDatatype","UrlTemplateImageryProvider","shape","EPSG:4514","noAlt","isAll","templateEmptyStr","_scene","startPosition","geoJsonLayer_onClickHandler","maximumGreen","username","distanceMeasure","_packedLength","classList","createLayer","Enable Pick highlighted","setInputAction","gaodekey","HDR","fixedLight","_measureDistanceLable","_direction","crs","removeThing","_updateMatrixMovePosition","_stateOkIndex","_setPitchRange_rightDownHandler","_composites","_extent","ShaderSource","GaodePOI 请求出错","_toJSONValBefore","cesium-navigation-help-rotate","left bottom 0","Central_Meridian","defaultValue","toastr","_selectedPlane","_value","_sideRes","LINEAR_NONE","polyline","fa fa-street-view","removeTile","timeEndVal","_getEventByType","eachTilesetLayer","_pickedId","rgba(0,0,0,0)","longitude","Oblique Stereographic Alternative","settime","_cubeMap2","WebMercatorProjection","_last_stopTime","_createImageryProvider","UNIT","display","frustumCommandsList","_conventMarsOptions","scissorTest","ImageryLayerFeatureInfo","SPHEROID","distanceLegend","noTitle","_showPoly","EPSG:4517","innerRadii_z","colors","divHeight","string","Walking","isDestroy","video3D","_onMouseOver","_ready","showSectorSegmentLines","px;","_bindFun","fullscreen","easingFunction2","CornerType","_clickHandler","_updateMoveAllHook","minimumConeDegree","raiseToTop","XYZ","hostname","czmObject","setNowTime","BufferUsage","_onRightClickHandler","axisY","imageOptsConver","mercatorToLngLat","setPlanes","buildModuleUrl","_tileWidth","worldToModel","zoneNumber","formatPosition","EPSG:4540","listens","resolutions","fa fa-soundcloud","Camera","apa","_bindHierarchy","outerPositions","_showLateralSurfaces","angleBetween","skyAtmosphere","标记点","zoomOut","localStorage",`in vec3 position;
in vec3 normal;
in vec2 st;
in float batchId;
out vec3 v_positionEC;
out vec3 v_normalEC;
out vec2 v_st;

void main() {
  v_positionEC = (czm_modelView * vec4(position, 1.0)).xyz;       // position in eye coordinates
  v_normalEC = czm_normal * normal;                               // normal in eye coordinates
  v_st = st;
  gl_Position = czm_modelViewProjection * vec4(position, 1.0);
}
`,"transZ","ns0","_getTerrainHeight_ing","_editPointHandler","createPickId","expires","angleStr","_scanPlaneBackCommand","graphics","debugShowFramesPerSecond","adname","keyword","left","Cartesian4","isInPoly","setStyle","_heightDraggers","+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","setQueryParameters","_readChildNode","_createCzmContainer","face","EMPTY_OBJECT","AXIS","distanceDisplayBillboard","getCacheOrAdd","negativeX","_getItemHtml","1.3.0","_lastPickedInfo","color2","maximumRadius","hasClosure","_mars_type","PerspectiveFrustum","updateVisibleDistance","coordinates","stopEditingGrid","Buffer","onloadend","showSkirts","lngLatToMercator","+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=35500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","_graphic_drawing","_inverMatrix","_goHistoryView","defaultVisualizersCallback","_高度差"," 模型中心位置:","_mouseUpHandle","_updateDraw","_mapEx","_mergeStyleToOptions","_clipOutSide","_positions_draw","czmGeojson","upGraphic","rectangles","_maximumHeights","#00ff00","_controls","_onClockTick","cesium-navigation-help-details","onEachFeature","inverse","shaderProgram","terrainProvider","orginRotation","PolyFacet","addChildsToMap","graphicGroup","Right click menu to delete","wkid","updateStyle","undefined","_terrain_onLoadSuccess","lightColor","cos","_scaleBarEl","PolylineVolumeGeometry","_needFlyToPoint","filename","closeTooltip","_initModel","10828411SPudcY","screenSpaceEventHandler","COMPOUNDCRS","createVertexBuffer","未处理的属性","PostProcessStageComposite","img","phi","charCodeAt","fromPositions","addScanPlane","_clampToGround_last","getCurrentMousePosition: scene.pick 拾取时异常","robin","fa fa-bullseye","_terrainHeight","VertexArray","右擊菜單刪除","zh-Hans","results","radii_y","_rangeNumber","_getOutlinePositions","填方体积","updateCallback","coslat0","FIXED","locationBar","_cubeMap3","qs0","_normal","/query","destination","Mar3D 中国地形","drawShow","_drawCommand","polylineStyleConver","_停止按轴平移","orginCenterPoint","czmObjectEx","gaode","tileVisible","mouseDown",`} 
`,"startCompute","BLACK","circleStyleConver","DefaultImageId","queryGridData","_minPitch","showLateralSurfaces","_extentGraphic","sinlat0","offsetLeft","createShader","cass","convertor","CylinderOutlineGeometry","getPicked","POSITIVE_INFINITY","mapChinaCRS","originalStyle","挖方体积","selectedTerrainProviderViewModel","clampToHeightMostDetailed","REMOVED","BoundingRectangle","getUrlComponent","_oldPickPrimitive","startDraw","merge","dhEvent","EasingFunction","compass","_rotateAutoStopAngle","_objectsToExclude","userAgent","_domeLineVA","_unbindEditEvent","_boundingSphereWC","_scopeIds_last","EDATUM","_sectorVA","_noDestroy","getMinutes","far","material","resolutionScale","getTerrainHeight","ALPHA_BLEND","querySelector","_splitOptionsToStyle","AREA_3","_containerUl","_updateOutlineToCallback","MaterialSupport","sphere","removeAll","minimumHeight","_map","BoxGeometry","ReflectionWater","styleOptions","projections","toUpperCase","sources2","_cartographic","EPSILON6","_pickCommands","offscreen","_cacheGrid","_drawGrid","fromIso8601","_maxCacheCount","_tikRender","features","ionToken","getElementsByClassName","_load_data","EllipsoidGeometry","getMonth","positionsShow","_getKeywords","getAspectContourMaterial","_tileHeight","_modelEx","_onMarkerDragEnd","_updateNormal","halfFloatingPointTexture","_tilesetPlanClip","getGeometryInstanceAttributes","https://gss{s}.bdstatic.com/5LUZemja_QUU8t7mm9GUKT-xh_/tile/?udt=20150114&qt=tile&styles=pl&x={x}&y={y}&z={z}","Network Error","RADIANS_PER_DEGREE","_hasResetEnableLighting","route","_moveDelayTik","lastParameters","_scanRadialCommand","_面上","visibleDepth","flyHome","perPositionHeight","_pickIdQualifier","semiMinorAxis","RIGHT_DRAG","contrast_bias","keywords","_depthTest","_stopDrawHook"," and BBOX(","_toOneJson_Poly","contourMaterial","GeometryCollection","_isColorMaterial","fileType","eachThing","click","clock","clearPosition","customShaders","MultipleSkyBox","zoy","tileMatrixLabels","volume","cesium-viewer-toolbar","_position_draw","_domeVA","单击开始绘制","outlineCoordinates","_开启雾天气","createTypedArray","clearLastCamera","removeInputAction","setVisible","pop","_normalZ","moveLeft","EPSG:4536","_pitch_reality","onStart","asin","drawingBufferToWgs84Coordinates","lim","inverseMatrix","multiplyTransformation","S3MTilesLayer","innerRadii_y","readyEvent","viewFrom","morphComplete","log"," and INTERSECTS (","toDegrees","PRIMEM","pointP","bottomRadius","destroyObject","cylinder","flags","createPropertyDescriptor","rotateUp","bindPopup","移動到此處","interpolationAlgorithm","lat0","unpackArray","radii_x","PolylineArrowMaterialProperty","baidu","_definitionChanged","selectedIndex","status","remove","_updateStyleByEdit","EPSG:4539","_公顷","generateArc","getListByAttr","wholeDistance","显示星空背景","Hotine Oblique Mercator","Turn off keyboard roaming","_readChildNodeVal","showElseArea","setTemplateValues","getTooltip","temp","openTooltip","onTick","outlineColor","baseWaterColor","exp","hasShadows","v_pole_n","metaData","getFeatureInfoParameters","depthFailAppearance","debugWireframe","_wrapper","assign","transformCenter","hasPopup","video","_dimensions","_computedNewPos","getGridPositions","drawAddPoint","wms extent:","_空间距离","_pitch","startRate","dynamicView","pause","_graphic_editing","_sampledPositionProperty","Latitude of 2nd standard parallel","toCartesian","Extended_Transverse_Mercator","_setCameraViewListState","_sceneEvent","pixelOffsetY","_onBeforeCreate","BOTTOM_ROTATE","PolylineColorAppearance","Polygon",`<?xml version="1.0" encoding="UTF-8"?>
<svg width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="48" height="48" fill="white" fill-opacity="0.01"/>
  <path d="M24.0607 10L24.024 38" stroke="#ffffff" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M10 24L38 24" stroke="#ffffff" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`,"_updatePositionHook","Z_TRANSLATION","_command","createMaterialPropertyDescriptor","PolygonGeometry","getThirdPoint","TileCoordinatesImageryProvider","触摸手势","EPSG:","_isFlyAnimation","  like '%","LOCAL_CS","EPSG:4512","_getExcludedStyle","UNIT_Z","classificationType","abc","addColorStop","_default_tiltEventTypes","boxStyleConver","控件,请直接使用 map.controls.","_createI3SDataProvider","lune","negativeZ","_tilesetFlat","Space distance","_ellipsoid","fogByDistance_far","description","_layerList","mouseOut","_materialCache","Cesium","_drawMouseMoveHandler","color","North_American_Datum_1927","getFloat64","editMouseMove","_debugAxis","defaultTexture","crossorigin","_last_fireIndex","Rotation on axis","_startHeading","_events","logarithmicDepthBuffer","vertexShaderSource","_updateLabelStyleHook","mapbox","X_UP_TO_Y_UP","_credit","_flyok_index","_hash","_updatePointerEvents","fov","_getPositions","LEFT_DOUBLE_CLICK","Enable skyBox","removeDblClick","cbg","graphic","_drawCommands","Close rain","vertex_H","_numberOfPoints","_backFaceRS","combine","ElevationRamp","rotateMatrix","C_im","visibility","strokeStyle","depthTestAgainstTerrain","0,0,0","arcgis_wfs_single","prepareTexture","OrthographicOffCenterFrustum","_primitive3","_createFrustumPrimitive","radii","con","NaN","styleType","_destroyResource","gradations","crsDecimal","GRS 1980(IUGG, 1980)","moveDown","false_northing","Fullscreen",`precision highp float;
precision highp int;

#define pi 3.1415926535
#define PI2RAD 0.01745329252
#define TWO_PI (2. * PI)

uniform vec4 marscolor;
uniform float speed;
uniform float globalAlpha;

float time;
float rands(float p) {
  return fract(sin(p) * 10000.0);
}
float noise(vec2 p) {
  float t = time / 20000.0;
  if(t > 1.0)
    t -= floor(t);
  return rands(p.x * 14. + p.y * sin(t) * 0.5);
}
vec2 sw(vec2 p) {
  return vec2(floor(p.x), floor(p.y));
}
vec2 se(vec2 p) {
  return vec2(ceil(p.x), floor(p.y));
}
vec2 nw(vec2 p) {
  return vec2(floor(p.x), ceil(p.y));
}
vec2 ne(vec2 p) {
  return vec2(ceil(p.x), ceil(p.y));
}
float smoothNoise(vec2 p) {
  vec2 inter = smoothstep(0.0, 1.0, fract(p));
  float s = mix(noise(sw(p)), noise(se(p)), inter.x);
  float n = mix(noise(nw(p)), noise(ne(p)), inter.x);
  return mix(s, n, inter.y);
}
float fbm(vec2 p) {
  float z = 2.0;
  float rz = 0.0;
  vec2 bp = p;
  for(float i = 1.0; i < 6.0; i++) {
    rz += abs((smoothNoise(p) - 0.5) * 2.0) / z;
    z *= 2.0;
    p *= 2.0;
  }
  return rz;
}
czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 vUv = materialInput.st;
  time = czm_frameNumber * speed / 100.0;

  vec2 uv = vUv;
  vec2 uv2 = vUv;
  // if (uv.y < 0.5) {
  //     discard;
  // }
  uv *= 4.;
  float rz = fbm(uv);
  uv /= exp(mod(time * 2.0, pi));
  rz *= pow(15., 1.0);
  vec4 marscolor = mix(vec4(color.rgb, 1.0) / rz, vec4(color.rgb, 0.1), 0.5);
  if(uv2.x < 0.05) {
    marscolor = mix(vec4(color.rgb, 0.1), marscolor, uv2.x / 0.05);
  }
  if(uv2.x > 0.95) {
    marscolor = mix(marscolor, vec4(color.rgb, 0.1), (uv2.x - 0.95) / 0.05);
  }

  material.alpha = marscolor.a * 2.0 * globalAlpha;
  material.diffuse = max(marscolor.rgb + marscolor.rgb * material.alpha, marscolor.rgb);

  return material;
}
`,"_PerspectiveFrustum_clone_old","transX","convex","_zoomFactor","baseMaterialConver",`px;
        background-color: `,"greenwich","#D33038","双指按相反方向拖动","_measureExLine","sourceTarget","_autoStopAngle","Scene","city","cesium-navigation-help-button","ShadowMap","lookUp","XZ_TRANSLATION","EventType","MaterialAppearance","LineTrail","depthTest","_gaze","lighting","_sources","_updateHeight",`px;
        margin-left: calc(50% - `,"currentStyle","county","开启拾取高亮","_getModelMatrix","position","allowDrillPick","bindContextMenu","stopMoveRight","_moveHandler","fromCache","u_mars3d_clip_texture","showUp","getGraphics","entityGraphic","readPixels","PointCloud","bloomTarget","_maxTileLevel","_initTilesetFlood","all_distance","pathStyleConver","geometryInstances","_globeTranslucencyState","BD09","Color","_polylineCollection","getAllResponseHeaders","fabric","fetchJsonp","_positions_circle_y","rotation_z","_fireTarget_open","_objectsToExclude_auto","MeasureUtil","areaSurfaceMeasure","once","isPrivate","_map_cameraChanged","parentNode","uniform","createGuid","Appearance","https://restapi.amap.com/v3/direction/walking","slices","fromIonAssetId","uniforms","_关闭下雪","magnificationFilter","isEditing","_stopTime","hasDrawDelPoint","interpolation","mixt","_editing_entity","athens","_maxPointNum","granularity","send","_positions_line_z","_requestMetadata","isStart","_width","PolygonHierarchy","_显示包围盒","_addChildGraphic","显示三角网","_moveStep","updateHeightDraggers","PolylineOutlineMaterialProperty","district","_removePit","updateBox",`uniform samplerCube u_cubeMap;
uniform samplerCube u_cubeMap2;
uniform samplerCube u_cubeMap3;
uniform float u_select;
in vec3 v_texCoord;

void main() {
  vec4 fragColor;
  if(u_select <= 1.0) {
    vec4 color = czm_textureCube(u_cubeMap, normalize(v_texCoord));
    color = vec4(czm_gammaCorrect(color).rgb, czm_morphTime);
    vec4 color2 = czm_textureCube(u_cubeMap2, normalize(v_texCoord));
    color2 = vec4(czm_gammaCorrect(color2).rgb, czm_morphTime);
    fragColor = mix(color, color2, u_select);
  }
  if(u_select > 1.0) {
    vec4 color = czm_textureCube(u_cubeMap2, normalize(v_texCoord));
    color = vec4(czm_gammaCorrect(color).rgb, czm_morphTime);
    vec4 color2 = czm_textureCube(u_cubeMap3, normalize(v_texCoord));
    color2 = vec4(czm_gammaCorrect(color2).rgb, czm_morphTime);
    fragColor = mix(color, color2, u_select - 1.0);
  }
  out_FragColor = fragColor;
}
`,"ScreenSpaceEventType","setTime","contextMenuClose","_mars3d_graphicId","updateMatrix","_map_clickHandler","_maxCanvasSize","10hmJnAK","multiplyByScalar","_sources3","_updateContent","flipy","ColorGeometryInstanceAttribute","tilesetPassState","_hideFeatures","_showData","RECEIVE_ONLY","_mars3d_layerId","styleField","cesium-baseLayerPicker-selected","ConstantPositionProperty","hasCache","vertexArray","_last_clickTime","getSlope","appendForwardSlash","diffuseWall","showDigVolume","RHUMB","+proj=tmerc +lat_0=0 +lon_0=78 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","rotation","iterations","_createVideoPrimitive","開啓霧天氣","moveEnd","minificationFilter","osm","corridor","editAddPoint","has3dtiles","img_e","fa fa-ticket",`in vec3 position;
out vec3 v_texCoord;
uniform mat3 u_rotateMatrix;

void main() {
  vec3 p = czm_viewRotation * u_rotateMatrix * (czm_temeToPseudoFixed * (czm_entireFrustum.y * position));
  gl_Position = czm_projection * vec4(p, 1.0);
  v_texCoord = position.xyz;
}
`,"flyToOptions","mergeOrientation","modelMatrix","limit","pname","_wallEntity","maxHeight","leftPoints","_renderPassCache","ColorOptsConver","load","HermitePolynomialApproximation","moveVar","_addGraphic","getBoundingClientRect","popup","step","_放大","deleteTexture","terrainChange","_oneOverLog2FarDepthFromNearPlusOne","onDragEnd","_graphic_move_x","TRANSPARENT","indexOf","_corridorEx","未查询到相关结果！","getCurrentOptions","reflectorProjectionMatrix","dblClick","polylineVolume","divideByScalar","getNextLayerId","closure","all","ReferenceFrame","pickedObjects","_time","_primitive_billboard","clientY","_distance","neutral","_hasTerrain","_createBottomSurface","old_depthTestAgainstTerrain","normal","OBJECTID","SplitDirection","endItem","neckWidthFactor","stockholm","_uv","cos_p14","RELATIVE_TO_GROUND","TextureMagnificationFilter","addImageryProvider","focalDistance","innerRadii","_canrefresh","坐标解析失败，请确认参数是否无误","allCount","Camera info","CRS","readyPromise","layerY","addDays","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAEACAYAAADSoXR2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjExQTg0NDEyMDEzQjExRUFBNDhBRjhGMUMzOUUyNTU0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjExQTg0NDEzMDEzQjExRUFBNDhBRjhGMUMzOUUyNTU0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTFBODQ0MTAwMTNCMTFFQUE0OEFGOEYxQzM5RTI1NTQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MTFBODQ0MTEwMTNCMTFFQUE0OEFGOEYxQzM5RTI1NTQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz41vRwAAAAE90lEQVR42uydyW4UMRCG3T2dgYSAEGs4sp44cCJBcGUJbwCvALwWPAI8ABwAiUVwgLBdkEikJEiAGMhkZqhfU1aa1sy0g+yaJPyWSupOpPjz0uVyucrJer2eG2fJ3ZgLAQhAgC0PgN8XIlkqgGLE75oih0WmRVZEvop0rHog18rnRe6IzInsthyCXFt+TuSKyGmRXZZDgK5eFrkv8l7kiUhrxN/JSo3pigSvcNmI1bCh3b5LK2+NqHyvyEF9x3z5HgqRRViOAXhW5JrCoNdei/y20gMYxhmRSyIXRY6JTMT4DENLW+SdyD19x/NajDmwmYIW79Hnn+MA4GJEAAIQgABJbMJB+n5Sl9zWZvR9DABUfkJkVt8fi3zUldAEoKl24Y2S1fPZEmBdZFHkkb4vxTLRQ5djbyUf0ncYrD/UADUB8MZno2Q19yx7gIqIAAQgAAEIQIAtYZT+85LvRnjQCoPKR3rQUgN4Y3ZeK30g8qps0qeeAzDn4TWD9+ySG+BBS90DaGnVg9a2tgnR4il9/jkOACoiAhCAAASIZpAAFl6yulO0JACo/IDrn6CedP1zxOciv6wAYNnAP3RVBeWtJQCWzG8iL/X9g4vkqNzMctzUXtintt2KM/aS+bmQaY90rb8CF6tSKiICEIAABCAAAQiwbfcFIWVCbUcc9bZDLKiYAKj4uOv7Bb+ILLj+8W7PCgC7Jhzv44Qdh9yrru8V61jPgd645gD2io+15RiC5ZA5ENNPmGmDmtrta9YAVEQE2FlrQUM/J6efU8cSAD87ojodBaccS6kgiiErGiq/qe93XT+3oGU5BJnbyKrIUs6BQZoQUEcrQ7CYagiGqeKiMgnXLXsg5uJUm/RQJKy8fGS7PMw6SgVQPrJFGZr0kCfUL/7IFjIzrLGpemBQ0kPbehL6I9vMjUh6oEVEAAIQgAAEIAABdpyj0qcK71YrqGUJANNrv+sHOcAiRpDDM1cTY1BEHk7kqyP/2Ac5vLEEQEG8aDnIoTb5ObZRWg5ywG5o1dX4ClNYxT7IISgJPsXGpLut9MCWU0S5bqkmdAa3LQEwcZDAfkZ3tthQfkwNkVeeD6kiuaUabcp6DpS9YyalrAdQ8bT1EFQVUabarND9fNuyB2gREYAABCAAAQhAAAIQoM770UgBXARCIr/koDogVlzgrWuxemBKd0m4JnBed0+5ZQ9gn3BK5LK+P4y5ewoB8DFiKO91COLFfwVuTCZV1hSoYw1APZCsFIkbN1Haaa87wwiKQe6eT27AEX6esPVVd8/kOOdAz/oz9FE0p+uGIKUeqE5C8xgSKiICEIAABCAAAQhAAAIQgAAEIAABCECA6AA+sbkREyDUUYlKD6ggZwzRkr8tewBhusisv+0in5qE/hFchoZTE0TL4p8sTbtIpyahQ4Ag5fKpSVBmfdDECvQTZjoM0U9N6KgkwH9xY7PXpPiCmq5yuaLVldHIO7jgNi5XfOEhCqNh9udHV/RnC5YAUDTftdV4/ivvwEoRVS9XXPWa1FIT5ird8jpSB+BDN3rO8AaGMnGy0I0QRYTvdk6NkOsucuhGCMAgI8Q0isaHbmAevNMhiD4P6iZhstANGiQE2PEGCRo2NcgAsQDwKnxWFdlT17/duWU1BJmuHz6A5bwbEsCScgh+qAHit3Jr1oooOPExdRBLbeJjSpuwuy30AAH+CDAAPH5ltESNYl4AAAAASUVORK5CYII=","_point","jobScheduler","px;height:","sinX0","domToolbar","fa fa-medium","stroke-opacity","updateAttr","_map_click","enableLook","cameraChanged","AREA_1","GREEN","_maxRangeLength","scaleToGeodeticSurface","appearance","ECONNABORTED","drawingBufferWidth","getColorRamp","ZHHK","Cesium3DTileset","renderError","geodeticSurfaceNormal","xmf","hasTerrain","end","</div>","_material","_createViewer","AddMidPoint","drillPick","eventTarget","lblAddFun","prototype","双指按相同方向拖动","closeOnClick","getArcPoints","(^|\\s)","_hasChangeDepthTestAgainstTerrain","_updateDomInnerHtml","PixelFormat","strokeType","Pass","不存在graphicType无法解析数据对Graphic","gravity","_getTargetDistanceDisplayCondition","IDENTITY","_trackedEntity","BoundingSphere","ellipsoidStyleConver","clampTo3DTileset","high","_rotate_onPreRenderHandler","depthFail","autoStop","bindPickId","easingFunction3","_textureFilterAnisotropic","_addAreaHook","Dimensions","ro0","stopFlicker","second_all","_polylines","_bindEditEvent","nodeValue","_sampler","_openByClick","_updateDomAttribute","#D33B7D",".mars3d-sub-menu","ColorMaterialProperty","toBottom","_last_depthTestAgainstTerrain","datum_type","epsg","crsx","positions","updateText","requestAnimationFrame","onDrag","objects","#ffffff","_removedHook","fromGeometry","Mercator","_matrixRotate","RouteType","Azimuth","/tile/","mouseout","getDerivedResource","fromCssColorString","removeNullData","specularIntensity","multiplier","_model","onChange","_useHdr","https://gac-geo.googlecnapps.cn/maps/vt?lyrs=m&x={x}&y={y}&z={z}","edgeColor","circular_clone_topPoints","graphicOptions","getOutlinePositions","_private","DIRECTION_BACKWARD","entityAngle","video/","font_weight","invertColor","_orientation","_divHeight","amplitude","Property","_hdr","_sp","project","start","PICK","PixelDatatype",'<span  class="mars3d-popup-close-button mars3d-popup-color closeButton" >×</span>',"roiUV0","invertClassification","_wall_positions","fixedFrameTransform","_onMouseMove","_setCameraViewListArr","success","asphaltColor","configureDescriptionFromProperties","debugExtentEntity","_topHeights","zoomFactor","EditAttr","该功能需要引入mars3d修改版Cesium库(mars3d-cesium库)才支持!","updateOrientation","_log2FarDepthFromNearPlusOne","toPoints","Cartesian2","ymin","planClip","forEach","+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","updateRadii","heightVal","renderState","arcgis","units","EllipsoidOutlineGeometry","qs1","_removedBaseHook","_addLabel","_matrix3Scratch","clientHeight","_popupConfig","intl","_rotateMouseUpFunction","ssfn_","undergroundColor","maximumArr","Australian Natl & S. Amer. 1969",`rad);
      `,"ENGCRS","Enable brightness",";base64,","indices","_grids","cylinderStyleConver","stroke","startAngle","trim","addHeight","_setPitchRange_mouseMoveHandler","VerticalOrigin","passes","addSeconds","dimensions","errorEvent","radii_z","hide","ch1903+","_labelEx","createPrimitive","title","_setInsertIndex","bidirectional","sceneModePicker","rightUp","_enabledEditGrid","angle2","prepareVAO","subdomains","removeSamples","openPopup","_dataSource","setHeight","FirstPerspective","789e558be762ff832392a0393fd8a4f1","_textStyles","_positions_circle_x",`uniform vec4 color;
uniform float diffusePower;
uniform float alphaPower;
uniform float globalAlpha;
uniform vec2 center;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  float alpha = distance(st, center);
  material.alpha = color.a * alpha * alphaPower * globalAlpha;
  material.diffuse = color.rgb * diffusePower;
  return material;
}
`,"Geocoder","_templateHtml","noiseScale","OBLIQ","isContinued","_child",`in vec3 position3DHigh;
in vec3 position3DLow;
in vec3 normal;
in vec2 st;
in float batchId;
out vec2 v_st;
out vec3 v_normalEC;
out vec3 v_positionEC;

void main() {
  vec4 p = czm_translateRelativeToEye(position3DHigh, position3DLow);
  v_positionEC = (czm_modelViewRelativeToEye * p).xyz;
  v_normalEC = czm_normal * normal;
  v_st = st;
  gl_Position = czm_modelViewProjectionRelativeToEye * p;
}
`,"双击完成绘制","encoderOptions",'"  >',"contextmenu","_onAdd","INITIALIZED","addLayer:图层id存在冲突，已重新赋值id","_updatePositionsByCircleCenter","getPositionByOrginMatrix","defineProperties","_smallTooltip","getAddHeight","https://rt{s}.map.gtimg.com/tile?z={z}&x={x}&y={reverseY}&styleid=1&scene=0","TEXTURE_WRAP_R","callback","_总长","FullscreenButton","_videoPlay","drawCommand","showStop","lastPointTemporary","updateOutlinesDistanceDisplayCondition","_areaList","未知原因，导出失败!","clockRange","transY","VanDerGrinten","AREA_2","_internalFormat","icon","Ellipsoid","hasTooltip","编辑方向","DEPTH_STENCIL","orginMatrix","terrainProviderViewModels","getPickedObject","取消鎖定","outlineWidth","outer_controlPoints","extrudedHeight","createCommand","ctrlKey","israel","getDistanceByMC","timeField","speed","host","WaterType","#ffd700","_lineColor","Blur1","fireTargetEvent","UNIT_X","frequency","positionShow",`</div>
                <div class="mars3d-template-content">
                    <div><label>`,"_initLayer","pitch","_highlight_mouseOutHandler","_graphicLayer_leftUp","xmax","_pickImageryLayerFeatures","commandList","gradient","DistanceDisplayConditionGeometryInstanceAttribute","negate","hasControl","showScanPlane","secondsDifference","bloomEffect","trackedEntity","hasEdit","_removeChildGraphic","_useTiles","removeLayer","EQUIT","hasMeasure","templateValues","_angle","_container_outer","onDownloadProgress","_opacity","projName","frameRate","_startPitch","_tilesetFlood","Calculating volume","updateAttrForDrawing","moveHeight","uri","dimian.length","onlySelected","_boundingSphere","equals","data.mars3d.cn","multiply","_drawCreatedHandler","/tile/{z}/{y}/{x}","multiplyByVector","outline","addTile","mars3d-slider","_setInputAction","UniformType","Allowed to edit","setCallbackPositions","_outlineColor_alpha","parentElement","_default_zoomEventTypes","Move it over here","_fpsText","editRemovePoint","inline-block","spatialReference","clickMap","TilesetWireframeYes","PrimitiveType","getCapabilities","_enabledMoveTarget","azimuth","px;max-height:","DIRECTION_NONE","bottomPositions","sin_p12","_depthFailColor","EPSG:3857","delta","controls","azi","_removeGraphic","OutlineEffectNo","_arrPartMeasureLable","zoneLetter","_effects","goNow","easting","flyToByAnimationEnd","GlobeSurfaceTileProvider","aspect","ImageBasedLighting","RIGHT_ROTATE","GeometryInstance","_videoContainer","lat2","_修改半径","topojson","_positionsWall","intersectionColor","_停止按轴旋转","addArea","_uniforms_color_alpha","_缩小","slope","set-cookie","65892a265537810eba29eeae73649a71","circlePoints_2","PositionProperty","Viewer","headHeightFactor","showText","moveBackward","getZoomUnits","OPAQUE","INERTIAL","addEventListener",'"  class="mars3d-popup-content mars3d-popup-color" style="',"gcj02ll","fromAxisAngle","_rotationAngle","reportError","_currentHeight","_texture","getComputedStyle","wfs:","_city","Util","_last_planeGraphics","updateSectionForTerrain","total","billboard","_tilesetMatrix","bind","_scanPlaneRate","getLayers","CoplanarPolygonGeometry","showAll","enableTranslate","outlineStyle","_lat","_initTilingSchemeByCrs","Mercator_1SP",`uniform vec4 bgColor;
uniform vec4 color;
uniform float speed;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  float time = fract(czm_frameNumber * speed / 1000.0);

  vec3 fragColor = color.rgb;
  if(st.t > 0.45 && st.t < 0.55) {
    fragColor = vec3(1.0);
  }
  material.alpha = color.a * 1.5 * smoothstep(.0, 1., fract(st.s - time));
  material.diffuse = max(fragColor.rgb * material.alpha, fragColor.rgb);

  if(material.alpha < bgColor.a) {
    material.alpha = bgColor.a;
    material.diffuse = bgColor.rgb;
  }
  material.alpha = material.alpha * globalAlpha;

  return material;
}
`,"_container_inner","_onMiddleUpHandler","ShadowNo","编辑时_map不能为空,请将对象添加到图层，并且图层已添加到Map","_PointEdit_YZ_TRANSLATION","RectangleGeometry","Event","onPointTrans","fromVertices","decimal","calcVolume","debuggerTileInfo","eachChildGraphic","proceed","ceil","_idField","distance","getValueOrDefault","_positionScratch","_positions_CallbackProperty","phone","_stopEditingHook","ellipse","_lightPositionEC","startFlicker","_createGraphic","contextMenu","{s}","alignedAxis","IndexDatatype","endsWith","pickPosition","camera","fromRadians","12qFnwWz","pointCollection","pickId","unbindUpdateEvent","hasBindEvent","mousemove","CLAMPED","frustum","_colorHidden","https://restapi.amap.com/v3/geocode/regeo","PerInstanceColorAppearance","rotateLeft","wallP","toOneJson","mouseUp","_修改宽度","isPoint","getCameraView","pickedObject","updateDraggers","quoted","FILL_AND_OUTLINE","FLOAT","mapSplit",`{ 
`,"_onMap_leftUp","points","關閉星空背景","_getTargetInfo","shift","cancelFlyTo","clampToGround","_primitive1","rectangularSensorStyleConver","_onMouseOut","lineColor","關閉夜視","labelHeight","viewBox","EPSG:4513","tileset","BrA","_mousWheelHandler","fa fa-star-half-full","+proj=longlat +ellps=GRS80 +no_defs","graphicLayer","hasUpdate","morphStart","fadeFactor","analysisOptions","_processForRemoveLayer","frameNumber","_auto_availability","isTile","dashLength","tag","_frameTime","_onRemove","044b5684de2b2009a15084eb8b88f822","pixelOffset","_rectangle","floatToByte","hasOwnProperty","GridMaterialProperty","srsCode","1268466QWTqDI","PINCH","PolylineGlowMaterialProperty",`uniform vec4 evenColor;
uniform vec4 oddColor;
uniform float frequency;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);

  // From Stefan Gustavson's Procedural Textures in GLSL in OpenGL Insights
  vec2 F = czm_cellular(materialInput.st * frequency);
  float t = 0.1 + (F.y - F.x);

  vec4 color = mix(evenColor, oddColor, t);
  material.diffuse = color.rgb;
  material.alpha = color.a * globalAlpha;

  return material;
}
`,"_guid","_正在计算体积","_enabledDraw","getArrowHeadPoints","green","positionCartographic","hasEventParent",`in vec3 v_positionMC;
in vec3 v_positionEC;
in vec2 v_st;

void main() {
  czm_materialInput materialInput;

  vec3 normalEC = normalize(czm_normal3D * czm_geodeticSurfaceNormal(v_positionMC, vec3(0.0), vec3(1.0)));
    #ifdef FACE_FORWARD
  normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);
    #endif

  materialInput.s = v_st.s;
  materialInput.st = v_st;
  materialInput.str = vec3(v_st, 0.0);

    // Convert tangent space material normal to eye space
  materialInput.normalEC = normalEC;
  materialInput.tangentToEyeMatrix = czm_eastNorthUpToEyeCoordinates(v_positionMC, materialInput.normalEC);

    // Convert view vector to world space
  vec3 positionToEyeEC = -v_positionEC;
  materialInput.positionToEyeEC = positionToEyeEC;

  czm_material material = czm_getMaterial(materialInput);

    #ifdef FLAT
  out_FragColor = vec4(material.diffuse + material.emission, material.alpha);
    #else
  out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);
    #endif
}
`,"getDraggerContextMenu","county_code","_layer","EPSG:4531","createShadowReceiveFragmentShader","clrk80","https://restapi.amap.com/v4/direction/bicycling","Enable snow","更多功能請右擊","Z_TRANSLATION_COLOR","hasZIndex","sweep",`#extension GL_OES_standard_derivatives : enable
uniform sampler2D colorTexture;
uniform sampler2D depthTexture;
uniform float alpha;
in vec2 v_textureCoordinates;

vec4 toEye(in vec2 uv, in float depth) {
  vec2 xy = vec2((uv.x * 2.0 - 1.0), (uv.y * 2.0 - 1.0));
  vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);
  posInCamera = posInCamera / posInCamera.w;
  return posInCamera;
}
float getDepth(in vec4 depth) {
  float z_window = czm_unpackDepth(depth);
  z_window = czm_reverseLogDepth(z_window);
  float n_range = czm_depthRange.near;
  float f_range = czm_depthRange.far;
  return (2.0 * z_window - n_range - f_range) / (f_range - n_range);
}

void main() {
  vec4 color = texture(colorTexture, v_textureCoordinates);
  vec4 currD = texture(depthTexture, v_textureCoordinates);
  if(currD.r >= 1.0) {
    out_FragColor = color;
    return;
  }
  float depth = getDepth(currD);
  vec4 positionEC = toEye(v_textureCoordinates, depth);
  vec3 dx = dFdx(positionEC.xyz);
  vec3 dy = dFdy(positionEC.xyz);
  vec3 nor = normalize(cross(dx, dy));

  vec4 positionWC = normalize(czm_inverseView * positionEC);
  vec3 normalWC = normalize(czm_inverseViewRotation * nor);
  float dotNumWC = dot(positionWC.xyz, normalWC);
  if(dotNumWC <= 0.2) {
    out_FragColor = mix(color, vec4(1.0), alpha * 0.2);
    return;
  }
  out_FragColor = mix(color, vec4(1.0), dotNumWC * alpha);
}
`,"https://api.mapbox.com/styles/v1","afterItem","eachLayer","referenceFrame","MORPHING","splice","cameraHeight","localPos","meters","right","TilesetWireframeNo","plane_distance","showSectorLines","hiddenAreaColor","getColumn","_container","_metadataError","reflectMatrix","vec","renderPass","cylinderP","deleteEmptyLayer","场景设置","右击菜单删除","#001e0f","10px","EPSG:4518","Transforms","pointer","geometryName","selectedLayer","showDomeLines","labelHeightStyle","https://gac-geo.googlecnapps.cn/maps/vt?lyrs=t@131,r&gl=CN&x={x}&y={y}&z={z}","fa fa-spinner","setColorStyle","VertexFormat","_originalreflectorWorldPosition","drillPickFromRay",`uniform vec4 evenColor;
uniform vec4 oddColor;
uniform float frequency;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);

  vec2 st = materialInput.st;
  float noise1 = (czm_snoise(st * frequency * 1.0)) * 1.0;
  float noise2 = (czm_snoise(st * frequency * 2.0)) * 0.5;
  float noise3 = (czm_snoise(st * frequency * 4.0)) * 0.25;
  float noise = sin(noise1 + noise2 + noise3) * 0.1;

  vec4 color = mix(evenColor, oddColor, noise);

  //Make thatch patterns
  float verticalNoise = czm_snoise(vec2(st.x * 100.0, st.y * 20.0)) * 0.02;
  float horizontalNoise = czm_snoise(vec2(st.x * 20.0, st.y * 100.0)) * 0.02;
  float stripeNoise = min(verticalNoise, horizontalNoise);

  color.rgb += stripeNoise;

  material.diffuse = color.rgb;
  material.alpha = color.a * globalAlpha;

  return material;
}
`,"_updateOutlineStyle","图上量算","vrButton","model","CameraEventType","_target","_updatePosition","lineStyle","openHighlight","CheckerboardType","_updateDomAttributeByEvent","preventDefault","_frontFaceRS","getFloat32","u_mars3d_clip_maxRangeLength","depthFailColor","_default_cursor","_pitch_min","wallStyleConver","DataSourceDisplay","bjColor","_pointSize","_startMousePosition","开启键盘漫游","isCombine","multiplyByPointAsVector","getNormal","HALF_PI","_vrButton","centerPoint","offsetHeight","skyBox","圖上標記","long0","Clarke 1880 mod.","FrustumOutlineGeometry","distance_all","coordinate","stopTime","_noPickEntity","_tilesets","addLayer","highlightClose",`;"></div>
  </div> `,"_buildImageResource","middleDown","_isMouseUpdownPressed","_billboardCollection","ml1","fxaa","Delete that point","low","_postProcessStage","blackAndWhiteEffect","regeocode","pinchEnd","loadConfig","_updateEntityOpacity","viewMatrix","_sectorFrontCommand","#2747E0","apply","_downHandler","_getPolylineOutlinePositions","Quaternion","_updateLabelOpacity","sinphi","Failed to find a grid shift table for location '","headWidthFactor",`in vec3 position;

void main() {
  vec4 pos = vec4(position.xyz, 1.0);
  gl_Position = czm_projection * pos;
}
`,"tileWidth","WHITE","Title","_pointType","中键滚动","diffHeight","单指拖动","_show","_primitive","STATIC_DRAW","removeChild","chinaCRS","createLinearGradient","setRotationSvg","kml","radius_p","rightPositions","moveStart","_onClockTickHandler","CGCS2000_GK_Zone_6","types","Entity","PointCloud3DTileContent","updateFrustum","updateFrameState","提供的高精度的DEM地形服务","responseType","unbindHighlight","inverMatrix",`void main() 
`,"minimumLevel","cutVolume","Cartographic","contourUniforms",`/**
 * @license
 * Description : Array and textureless GLSL 2D/3D/4D simplex
 *               noise functions.
 *      Author : Ian McEwan, Ashima Arts.
 *  Maintainer : ijm
 *     Lastmod : 20110822 (ijm)
 *     License : Copyright (C) 2011 Ashima Arts. All rights reserved.
 *               Distributed under the MIT License. See LICENSE file.
 *               https://github.com/ashima/webgl-noise
 */

vec4 _czm_mod289(vec4 x) {
  return x - floor(x * (1.0 / 289.0)) * 289.0;
}

vec3 _czm_mod289(vec3 x) {
  return x - floor(x * (1.0 / 289.0)) * 289.0;
}

vec2 _czm_mod289(vec2 x) {
  return x - floor(x * (1.0 / 289.0)) * 289.0;
}

float _czm_mod289(float x) {
  return x - floor(x * (1.0 / 289.0)) * 289.0;
}

vec4 _czm_permute(vec4 x) {
  return _czm_mod289(((x * 34.0) + 1.0) * x);
}

vec3 _czm_permute(vec3 x) {
  return _czm_mod289(((x * 34.0) + 1.0) * x);
}

float _czm_permute(float x) {
  return _czm_mod289(((x * 34.0) + 1.0) * x);
}

vec4 _czm_taylorInvSqrt(vec4 r) {
  return 1.79284291400159 - 0.85373472095314 * r;
}

float _czm_taylorInvSqrt(float r) {
  return 1.79284291400159 - 0.85373472095314 * r;
}

vec4 _czm_grad4(float j, vec4 ip) {
  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);
  vec4 p, s;

  p.xyz = floor(fract(vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;
  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);
  s = vec4(lessThan(p, vec4(0.0)));
  p.xyz = p.xyz + (s.xyz * 2.0 - 1.0) * s.www;

  return p;
}

/**
 * DOC_TBA
 *
 * Implemented by Ian McEwan, Ashima Arts, and distributed under the MIT License.  {@link https://github.com/ashima/webgl-noise}
 *
 * @name czm_snoise
 * @glslFunction
 *
 * @see <a href="https://github.com/ashima/webgl-noise">https://github.com/ashima/webgl-noise</a>
 * @see Stefan Gustavson's paper <a href="http://www.itn.liu.se/~stegu/simplexnoise/simplexnoise.pdf">Simplex noise demystified</a>
 */
float czm_snoise(vec2 v) {
  const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0
  0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)
  -0.577350269189626,  // -1.0 + 2.0 * C.x
  0.024390243902439); // 1.0 / 41.0
    // First corner
  vec2 i = floor(v + dot(v, C.yy));
  vec2 x0 = v - i + dot(i, C.xx);

    // Other corners
  vec2 i1;
    //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0
    //i1.y = 1.0 - i1.x;
  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);
    // x0 = x0 - 0.0 + 0.0 * C.xx ;
    // x1 = x0 - i1 + 1.0 * C.xx ;
    // x2 = x0 - 1.0 + 2.0 * C.xx ;
  vec4 x12 = x0.xyxy + C.xxzz;
  x12.xy -= i1;

    // Permutations
  i = _czm_mod289(i); // Avoid truncation effects in permutation
  vec3 p = _czm_permute(_czm_permute(i.y + vec3(0.0, i1.y, 1.0)) + i.x + vec3(0.0, i1.x, 1.0));

  vec3 m = max(0.5 - vec3(dot(x0, x0), dot(x12.xy, x12.xy), dot(x12.zw, x12.zw)), 0.0);
  m = m * m;
  m = m * m;

    // Gradients: 41 points uniformly over a line, mapped onto a diamond.
    // The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)
  vec3 x = 2.0 * fract(p * C.www) - 1.0;
  vec3 h = abs(x) - 0.5;
  vec3 ox = floor(x + 0.5);
  vec3 a0 = x - ox;

    // Normalise gradients implicitly by scaling m
    // Approximation of: m *= inversesqrt( a0*a0 + h*h );
  m *= 1.79284291400159 - 0.85373472095314 * (a0 * a0 + h * h);

    // Compute final noise value at P
  vec3 g;
  g.x = a0.x * x0.x + h.x * x0.y;
  g.yz = a0.yz * x12.xz + h.yz * x12.yw;
  return 130.0 * dot(m, g);
}

float czm_snoise(vec3 v) {
  const vec2 C = vec2(1.0 / 6.0, 1.0 / 3.0);
  const vec4 D = vec4(0.0, 0.5, 1.0, 2.0);

    // First corner
  vec3 i = floor(v + dot(v, C.yyy));
  vec3 x0 = v - i + dot(i, C.xxx);

    // Other corners
  vec3 g = step(x0.yzx, x0.xyz);
  vec3 l = 1.0 - g;
  vec3 i1 = min(g.xyz, l.zxy);
  vec3 i2 = max(g.xyz, l.zxy);

  vec3 x1 = x0 - i1 + C.xxx;
  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y
  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y

    // Permutations
  i = _czm_mod289(i);
  vec4 p = _czm_permute(_czm_permute(_czm_permute(i.z + vec4(0.0, i1.z, i2.z, 1.0)) + i.y + vec4(0.0, i1.y, i2.y, 1.0)) + i.x + vec4(0.0, i1.x, i2.x, 1.0));

    // Gradients: 7x7 points over a square, mapped onto an octahedron.
    // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)
  float n_ = 0.142857142857; // 1.0/7.0
  vec3 ns = n_ * D.wyz - D.xzx;

  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)

  vec4 x_ = floor(j * ns.z);
  vec4 y_ = floor(j - 7.0 * x_);    // mod(j,N)

  vec4 x = x_ * ns.x + ns.yyyy;
  vec4 y = y_ * ns.x + ns.yyyy;
  vec4 h = 1.0 - abs(x) - abs(y);

  vec4 b0 = vec4(x.xy, y.xy);
  vec4 b1 = vec4(x.zw, y.zw);

    //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;
    //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;
  vec4 s0 = floor(b0) * 2.0 + 1.0;
  vec4 s1 = floor(b1) * 2.0 + 1.0;
  vec4 sh = -step(h, vec4(0.0));

  vec4 a0 = b0.xzyw + s0.xzyw * sh.xxyy;
  vec4 a1 = b1.xzyw + s1.xzyw * sh.zzww;

  vec3 p0 = vec3(a0.xy, h.x);
  vec3 p1 = vec3(a0.zw, h.y);
  vec3 p2 = vec3(a1.xy, h.z);
  vec3 p3 = vec3(a1.zw, h.w);

    //Normalise gradients
  vec4 norm = _czm_taylorInvSqrt(vec4(dot(p0, p0), dot(p1, p1), dot(p2, p2), dot(p3, p3)));
  p0 *= norm.x;
  p1 *= norm.y;
  p2 *= norm.z;
  p3 *= norm.w;

    // Mix final noise value
  vec4 m = max(0.6 - vec4(dot(x0, x0), dot(x1, x1), dot(x2, x2), dot(x3, x3)), 0.0);
  m = m * m;
  return 42.0 * dot(m * m, vec4(dot(p0, x0), dot(p1, x1), dot(p2, x2), dot(p3, x3)));
}

float czm_snoise(vec4 v) {
  const vec4 C = vec4(0.138196601125011,  // (5 - sqrt(5))/20  G4
  0.276393202250021,  // 2 * G4
  0.414589803375032,  // 3 * G4
  -0.447213595499958); // -1 + 4 * G4

    // (sqrt(5) - 1)/4 = F4, used once below
    #define F4 0.309016994374947451

    // First corner
  vec4 i = floor(v + dot(v, vec4(F4)));
  vec4 x0 = v - i + dot(i, C.xxxx);

    // Other corners

    // Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)
  vec4 i0;
  vec3 isX = step(x0.yzw, x0.xxx);
  vec3 isYZ = step(x0.zww, x0.yyz);
    //  i0.x = dot( isX, vec3( 1.0 ) );
  i0.x = isX.x + isX.y + isX.z;
  i0.yzw = 1.0 - isX;
    //  i0.y += dot( isYZ.xy, vec2( 1.0 ) );
  i0.y += isYZ.x + isYZ.y;
  i0.zw += 1.0 - isYZ.xy;
  i0.z += isYZ.z;
  i0.w += 1.0 - isYZ.z;

    // i0 now contains the unique values 0,1,2,3 in each channel
  vec4 i3 = clamp(i0, 0.0, 1.0);
  vec4 i2 = clamp(i0 - 1.0, 0.0, 1.0);
  vec4 i1 = clamp(i0 - 2.0, 0.0, 1.0);

    //  x0 = x0 - 0.0 + 0.0 * C.xxxx
    //  x1 = x0 - i1  + 1.0 * C.xxxx
    //  x2 = x0 - i2  + 2.0 * C.xxxx
    //  x3 = x0 - i3  + 3.0 * C.xxxx
    //  x4 = x0 - 1.0 + 4.0 * C.xxxx
  vec4 x1 = x0 - i1 + C.xxxx;
  vec4 x2 = x0 - i2 + C.yyyy;
  vec4 x3 = x0 - i3 + C.zzzz;
  vec4 x4 = x0 + C.wwww;

    // Permutations
  i = _czm_mod289(i);
  float j0 = _czm_permute(_czm_permute(_czm_permute(_czm_permute(i.w) + i.z) + i.y) + i.x);
  vec4 j1 = _czm_permute(_czm_permute(_czm_permute(_czm_permute(i.w + vec4(i1.w, i2.w, i3.w, 1.0)) + i.z + vec4(i1.z, i2.z, i3.z, 1.0)) + i.y + vec4(i1.y, i2.y, i3.y, 1.0)) + i.x + vec4(i1.x, i2.x, i3.x, 1.0));

    // Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope
    // 7*7*6 = 294, which is close to the ring size 17*17 = 289.
  vec4 ip = vec4(1.0 / 294.0, 1.0 / 49.0, 1.0 / 7.0, 0.0);

  vec4 p0 = _czm_grad4(j0, ip);
  vec4 p1 = _czm_grad4(j1.x, ip);
  vec4 p2 = _czm_grad4(j1.y, ip);
  vec4 p3 = _czm_grad4(j1.z, ip);
  vec4 p4 = _czm_grad4(j1.w, ip);

    // Normalise gradients
  vec4 norm = _czm_taylorInvSqrt(vec4(dot(p0, p0), dot(p1, p1), dot(p2, p2), dot(p3, p3)));
  p0 *= norm.x;
  p1 *= norm.y;
  p2 *= norm.z;
  p3 *= norm.w;
  p4 *= _czm_taylorInvSqrt(dot(p4, p4));

    // Mix contributions from the five corners
  vec3 m0 = max(0.6 - vec3(dot(x0, x0), dot(x1, x1), dot(x2, x2)), 0.0);
  vec2 m1 = max(0.6 - vec2(dot(x3, x3), dot(x4, x4)), 0.0);
  m0 = m0 * m0;
  m1 = m1 * m1;
  return 49.0 * (dot(m0 * m0, vec3(dot(p0, x0), dot(p1, x1), dot(p2, x2))) + dot(m1 * m1, vec2(dot(p3, x3), dot(p4, x4))));
}
`,"normalize",`
        uniform sampler2D colorTexture;
        uniform vec3 marsColor;
        uniform float marsOpacity;
        uniform float threshold;
        uniform float smoothWidth;

        in vec2 v_textureCoordinates;
        void main() {
          vec4 marstexel = texture( colorTexture, v_textureCoordinates );

          #ifdef CZM_SELECTED_FEATURE
            if (!czm_selected()) {
                marstexel = vec4(0.);
            }
          #endif

          vec3 luma = vec3( 0.299, 0.587, 0.114 );
          float marsv = dot( marstexel.xyz, luma );
          vec4 outputColor = vec4(marsColor.rgb,marsOpacity);
          float alpha = smoothstep(threshold, threshold + smoothWidth, marsv);
          out_FragColor = mix( outputColor, marstexel, alpha );
        }`,"materials","_停止调整比例","expImage","verticalOrigin","修改寬度(Y方向)","_setSceneOption",".png","source","source is required.","startDate","distanceDisplayCondition_far","xHalfAngle","domeSurfaceMaterial","floodRect","alt_offset","getInt32","flyToPoint","materialOptions","_initChildGraphic","minDistance","maximumHeights","addEventParent","DeveloperError","_updateDomByTagName","_setPositionsToCallback","out_FragColor.rgb *= visibility;","headAngle","getAttribute","hideArea","Polar_Stereographic","createTexture","getLayerById","extendedData","HeadingPitchRoll","bindVisibleDistance","_values","显示包围盒","contains",`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="53px" height="53px" viewBox="0 0 53 53" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
    <title>导航球</title>
    <desc>mars3d.cn</desc>
    <defs></defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="compass-rotation-marker">
            <path d="M52.4399986,26.2199993 C52.4399986,11.7390936 40.7009051,0 26.2199993,0 C11.7390936,0 0,11.7390936 0,26.2199993 C0,40.7009051 11.7390936,52.4399986 26.2199993,52.4399986 C40.7009051,52.4399986 52.4399986,40.7009051 52.4399986,26.2199993 Z" id="rotator" stroke-opacity="0.135841259" stroke="#E2A549" stroke-width="9" opacity="0.201434235"></path>
            <path d="M0,26.2199993 C0,11.7390936 11.7390936,0 26.2199993,0 L26.2199993,9 C16.7096563,9 9,16.7096563 9,26.2199993" id="Shape" opacity="0.634561567" fill="#4990E2"></path>
        </g>
    </g>
</svg>
`,"addEffect","PlaneGeometry","template","_velocityScratch","visibleColor","Double click to finish drawing","wireframe","ENGINEERINGCRS","_sectorBackCommand","message",'onclick="',"ymax","neckHeightFactor","measured","fa fa-road","finish","_positions_grid","_pitch_minHeight","DEFAULT_VIEW_RECTANGLE","_primitive_outline","_frameState","_startTime","sinph0","polygonStyleConver","Lang","_interpolationAlgorithm","_显示星空背景","splitDirection","createElement","inline","oslo","1652421fGnsbK","_updateForEvent","editHeight","uniformState","packedLength","minHeight 请传入有效数值！","scene","etmerc","format","_promise","VelocityOrientationProperty","_hasCache","retry-after",`);
}
`,"_updateEditDraggers","fa fa-share-alt","https://api.map.baidu.com/reverse_geocoding/v3/","_mountedHook","_onMap_mouseMove","_last_startTime","场景出图","_canvas","_hierarchy","polylineVolumeStyleConver","geometryType","isAdded","normalOffsetScale","key","_createGraphics","http://www.w3.org/2000/svg","esriGeometryPolygon","target","_primitive2","fillVolumeStr","_单击后激活编辑","semiMajorAxis","cesium-navigation-help-zoom","activate","geocent","control","arrIDS","hidden","_polyline_positions","uniqueKey","_attributes_depthFailColor_alpha","fromUrl","_frustumPlanes","alfa","isMoveing","primitive","PI_OVER_TWO","#FFFF00","&tk=","withCredentials","_postRenderHandler","updatePositionsHeightByAttr","_mars3d_config","toolbar","_last_success","fromScale","dingmian","21TWvNbw","fromCartographic","_property","BlendingState","_setColorStyleItem","_updateStyleBaseHook","postProcessStage","_onMouseMoveDraggerHandler","_pickIds","标记圆","cvs","Additive","removeControl","getCircleCenterOfThreePoints","HAS_NORMAL_MARS3D","autoCenter","EPSG:4326","70,18,134,51","_scanPlaneColor_alpha","telephone","Feature","xmin","IAU76","hasZ","用于与DIV点进行对比测试位置的点","BrightnessEffectNo","polylineCollection","editClassName","FormatAltLength","cloumn","_fxOnePointOk","setPositions","radius","flipx","updateDivPosition","maximumDistance","3857","_getWindowPosition","noPickEntity","_distanceDisplayCondition","_flipY","fromDegrees","getContextMenu","type","scale","ymf","response","clark80","loadOk","mode","DESTROY","_highlight_mouseEventHandler","_positions_show","passState","height_original","pageSize","_开启下雨","_graticuleProvider","_getPopupPosition","530px","moveTimer","morphTo2D","onDragStart",'px;overflow:hidden;margin:0;" scrolling="no" frameborder="0" ></iframe>',"fromDate","windowPosition","ids","glowStrength","rotationAngle","rgba(140,0,58,0.99)","_万立方米","_onMouseMoveMapHandler","planeAngle","<?xml","fromCartesian","tileHeight","lowerLongitude","navigationHelpButton","http://its.map.baidu.com:8002/traffic/TrafficTileService?x={x}&y={y}&level={z}&time=","lam","_element","getFactorial","toCssColorString","scaleX","getPopup","_fireAddPoint","yHalfAngle","HOLD","fromArray","inited","globalAlpha","FITTED_CS","nearValue","flyToPositions","activateEdit","_initMeasureLable","autoSurfaceHeight","autoTip","getValueOrUndefined","addressComponent","wmts:","CorridorOutlineGeometry","getDefaultContextMenu","hasOpacity",'" in number yet, index ',"CLAMP_TO_GROUND","parentContainer","hasImage2","_positions","geocode","fromTranslation","_initTilesetFlat","symbol","framebuffer","getCoordinates","baseLayerPicker","bufferSteps","_createLabel","gee","normalZ","matrix","fromCartesianArray","_graphic","onlyPickTerrainPosition","+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=21500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","_updateDiffHeight","getPopupConfig","flipY","container","_optionsLayersList","properties","Close Wireframe","getShapeForCircle","3432525JkdceK","_hasRemoveElement","_positions_line_x","Lambert Conic Conformal (1SP)","pointerEvents","canvas","rightClick","TEXTURED","centerOfMass","_drawRemovePointHandler","active","Failed to detect nadgrid endian-ness, defaulting to little-endian","auto","updateGraphic","fi0","cartographicToCartesian","_off","showAddText","lambda0","globalMsg","_scopes","fragmentShader","outlineEffect","rotatePoint","nad83","_globeMouseHandler","curve","PolylineGlow","stepSize","Rectangle","_开启地形","getHeightReference","_forPositionProperty","_updateExOpacity","_allCount","_orbitCursorAngle","_contextmenuConfig","_createWellWall","当前时间不在范围内","angleIsGreaterThanPi","Longitude_Of_Center","_mouseMoveHandler",`uniform float globalAlpha;
uniform float opacity;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  if(move) {
    float r = sqrt((st.x - 0.8) * (st.x - 0.8) + (st.y - 0.8) * (st.y - 0.8));
    float r2 = sqrt((st.x - 0.2) * (st.x - 0.2) + (st.y - 0.2) * (st.y - 0.2));
    float z = cos(moveVar.x * r + czm_frameNumber / 100.0 * moveVar.y) / moveVar.z;
    float z2 = cos(moveVar.x * r2 + czm_frameNumber / 100.0 * moveVar.y) / moveVar.z;
    st += sqrt(z * z + z2 * z2);
    st.s += direction * czm_frameNumber / 1000.0 * speed;
    st.s = mod(st.s, 1.0);
  }
  if(axisY) {
    st = vec2(st.t, st.s);
  }
  vec4 colorImage = texture(image, st);
  material.alpha = opacity * globalAlpha;
  material.diffuse = colorImage.rgb;
  return material;
}
`,"_color_alpha","commands","gunung_segara","Maupertius 1738","textarea","_customShadersKey","shadowMaps","font_family","constructor","getIntersectPoint","_isComplete","i3s_",`
                    <div><label>`,"_measureLable","_readyPromise","_setRectangleByOptions","_setFeatureProperties","interPolygonObj","ad5f8b9d03f38f8f312025c80cfff4e3","_fullscreenButton","停止按轴平移","请求出错","setColumn","getBezierPoints","deleteLayer",`uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  vec2 center = st - vec2(0.5, 0.5);
  float time = -czm_frameNumber * 3.1415926 / 180.;//扫描速度1度
  float sin_t = sin(time);
  float cos_t = cos(time);
  vec2 center_rotate = vec2(center.s * cos_t - center.t * sin_t + 0.5, center.s * sin_t + center.t * cos_t + 0.5);
  vec4 color = texture(image, center_rotate);
  vec3 tColor = color.rgb * u_color.rgb;
  tColor *= u_color.a;
  material.diffuse = tColor;
  float length = 2. - length(center) / 0.5;
  material.alpha = color.a * pow(length, 0.5) * globalAlpha;//color.r = 0 或1
  return material;
}
`,"modelP","fromRotationMatrix","Click to finish drawing","wgs84ToWindowCoordinates","positiveX","slider-splitter","fa fa-keyboard-o","_cloudCollection","distanceLastFdStr","_selectedLayer","osgb36","Access to the ground","三维视图","segment","snowEffect","_scanePlaneSP","ElevationContour","point","未处理参数","lcc","_decToSex","bern","offsetWidth","_updatEntityAlpha","getGraphicById","removeScanPlan","WHEEL","maximumZoomDistance","substring","billboardCollection","reject","circleSize","_showThroughEllipsoid","__esModule","_tilesetClip","updateVideoContainer","stopPropagation","convert","length","removed","fromString","getCoordinate","cameraMoveStart","insertBefore","clockAnimate","longitudeShift","sidesColor","lng","_onKeyDown","random","removeEffect","greaterThanOrEquals","Framebuffer","infocode","splitNum","Central_Parallel","_thingList","morphTo3D","gaze","divGraphicStyleConver","ProviderViewModel","_visibleAreaColor","pass","value","innerRadii_x","s_jtsk","result","_hasRightTilt","none","gtu","rgba(149,0,235,0.99)","開啓亮度","</label>","空间距离","stopBounce","process","paused","scaleByDistance_farValue","Plane","tailWidthFactor","Widgets/Images/TerrainProviders/CesiumWorldTerrain.png","_释放后完成修改","Mark round","_rotateAngle","city_type","_updateImage","cndesc","TEXTURE_WRAP_T","+proj=tmerc +lat_0=0 +lon_0=108 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","geoJsonLayer_onLoadHandler","getNumberOfYTilesAtLevel","toWebGLConstant","west","Texture","_farDepthFromNearPlusOne","_vertexFormat","flyToExtent","swiss","multiplyByPoint","_formatPOIData","GetCapabilities","map","_hasFX","fogByDistance","utg","dataColumn","International 1909 (Hayford)","_pageIndex","defines","roiUV","startMoveBackward","contextMenuClick","parent","unshift","homeButton","arrow","_onMouseMoveHandler_point","CylinderGeometry","_三维模型","_i3sProvider","pow","repeat_x","backgroundColor","scaleByDistance_nearValue","_toJSON_Ex","replaceMain","N_POLE","billboardStyleConver","pinchStart","distanceDisplayCondition_near","showIntersection","addThing","negativeY","parentSelected","queryCircle","_sizeInBytes","EPSG4490","fromRotationY","_clusterData","keys","_currentExtent","_setEditCursor","cesium-performanceDisplay","toCartographics","loadCubeMap","debugShowBoundingVolume","event","VERTEX_FORMAT","_关闭雾天气","pixelOffsetX","_flyTo","CircleOutlineGeometry","_pageSize","clipTarget","withAlpha","_surface","getTileCredits","context","_position_show","cos_po","Load Model…","_computedScanPlaneModelMatrix","showBox","_primitive4","_times","_defaultTerrainProvider","toCartographic","file:","cons","拖動對象後","WGS84 椭球","content-type","init","responseText","backgroundOpacity","DrawEditYes","_firingCount","custom","validDrawPosition","Inverse grid shift iterator failed to converge.","绘制时_map不能为空,请将对象添加到图层，并且图层已添加到Map","_sectorLineCommand","destroyPrimitives","_wall_minimumHeights","radius_g_1","_scanePlaneYHalfAngle","LEFT_UP","atan","LINEAR","setWhere","initialTilesLoaded","zhang","positiveZ","正在計算體積","_removeDynamicPosition","_hasMapInit","join","97258ajdcGb","upWC","updatePosition","WallGeometry","MoveHeight","terrainShadows","collectionChanged","EPSG:4500","extent","An error occurred while accessing ","texParameteri","_appendHtmlHook","positionsWall","_onMarkerDragStart","angleDecimal","flyTo","_translucent","BAIDU","_entity","三维模型","_positionWC","_handleMouseDown","czm_selectedIdTexture","_noMousePick","_视角切换","isActivate","place","mouse","render","setLayerSplitDirection","upload","fromRotationX","_last_clickPositionX","esriGeometryEnvelope","screenSpaceCameraController","field","ml0","legend-label","_contourSpacing","no_off","_updateStyleHook","drawMouseMove","reload","rgba(255, 255, 255,255)","name","开启大气渲染","intersectionWidth","EPSG:4541","_onCollectionChanged","updateExLine","concat",`
        uniform sampler2D colorTexture;
        in vec2 v_textureCoordinates;
        uniform float contrast;
        uniform float brightness;
        void main(void)
        {
            vec3 sceneColor = texture(colorTexture, v_textureCoordinates).xyz;
            sceneColor = czm_RGBToHSB(sceneColor);
            sceneColor.z += brightness;
            sceneColor = czm_HSBToRGB(sceneColor);
            float factor = (259.0 * (contrast + 255.0)) / (255.0 * (259.0 - contrast));
            sceneColor = factor * (sceneColor - vec3(0.5)) + vec3(0.5);
            out_FragColor = vec4(sceneColor, 1.0);
        }`,"_createCesium3DTileset","clearDrawing","nightVisionEffect","_virtualCamera","getBaseLength","_id","code","gauss","GroundPrimitive","_forceResize","RainEffectYes","_start",`<?xml version="1.0" encoding="UTF-8"?>
<svg width="20" height="20" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="48" height="48" fill="white" fill-opacity="0.01"/>
  <path d="M15 24V11.8756L25.5 17.9378L36 24L25.5 30.0622L15 36.1244V24Z" fill="none" stroke="#ffffff" stroke-width="5" stroke-linejoin="round"/>
</svg>`,"GEODESIC","alert","slopeStr2","maxPitch","_updateDivPosition","4kSBQBk","_fireBindDataEx","czm_pickColor","updateClock","closeSmallTooltip","Mid","CircleWave","Latitude of natural origin","_arrowInstances","_type","+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","_onRightUpHandler","rotation_x","CLAMP_TO_EDGE","WebGL发生渲染错误,渲染已经停止,请刷新页面。","datum","PolylineMaterialAppearance","frameRateHeight","pois","_bottomPrimitive","fromRotationTranslation","pickEllipsoid","valid","strokeColor","_subdomains","request","delProperties","_containerBtnStart","The location information","effect","_addChildContainer","geodeticSurfaceNormalCartographic","_getConfig","flickerEntity","removeEventParent","_heading","prevStageUpdate","_last_picked","formatNum","filter","hasContextMenu","_filterPropagateEvent","Globe","_pixelFormat","Z_UP_TO_Y_UP","max-height: ","marsOptions","_moveActive","graticule","HorizontalOrigin","shadowMap","_targetPosition","numberOfDerivatives","eastNorthUpToFixedFrame","fillVolume","czm_selectedIdTextureWidth","object","_timeTik","getAddress","UNSIGNED_SHORT","HeadingPitchRange","page","getShapeForPipeline","_attributeLocations","geocoder","src","_initByPosition","_matrix4","_updatePrimitiveForColorMaterial","_resource","latitude","setProperties","CallbackProperty","matrix(","getLoop","queryDriving","SCENE3D","_height_original","toMercator","loop","_toJSONValEnd","cosgam","fillStyle","minimumArr","imageryProvider","clientWidth","FID","_单击增加点","normalX","firstChild","Control","LineDotDash","RuntimeError","mouseup","oddColor","_poinst","one_minus_f","HeightReference","0px","PolylineGeometry","zox","EPSG3857","terrainExaggeration","Location info","sampler2D","farValue","from_greenwich","camera_changedHandler","_clampToTilesetHeight","showBackground","strokeRect","updateAttrForEditing","Point","getCache","setRequestHeader","Standard_Parallel_2","MAX_VALUE","官方ION","command","TileMatrixLimits","_terrain_onLoadError","停止按轴旋转","pageIndex","_context","_tileLayer","_onLeftDownHandler","identify","_dragger_index","push","white","BEVELED","image/jpeg","Mask","getCenter","allDistance","00000","WebGLConstants","Matrix3","changeBasemap","clrk","_drawLayer","closePopup","_toChineseLang","B_re","_contextmenuConfig_bak","opacity","BASIC","sectionMeasure","directionWC","baseOptsConver","156","avoidpolygons","toDataURL","ClockRange","getInnerHTML","textureDef","scaleY","COLUMN1ROW1","_关闭包围盒","drawStart","begin","EPSG:4533","materialType","getPickDepth","wall","heights","0.00","options","_rectangle_draw","depthFailMaterial","instances","out_FragColor.rgb = out_FragColor.rgb;","_globe","defer","depthBias","eventType",`uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec4 tColor = u_color;
  vec2 st = materialInput.st;
  vec2 center = st - vec2(0.5, 0.5);
  float length = length(center) / 0.5;
  float time = 1. - abs(czm_frameNumber / 360. - 0.5);

  float param = 1. - step(length, 0.6);//大于0.6模糊，rate = 0.6
  float scale = param * length;// 0.6< length 返回0，反之返回1.
  float alpha = param * (1.0 - abs(scale - 0.8) / 0.2);// 0.8 < length 返回0，反之返回1.

  float param1 = step(length, 0.7);//小于0.5模糊
  float scale1 = param1 * length;// 0.6< length 返回0，反之返回1.
  alpha += param1 * (1.0 - abs(scale1 - 0.35) / 0.35);// 0.8 < length 返回0，反之返回1.

  material.diffuse = u_color.rgb * vec3(u_color.a);
  material.alpha = pow(alpha, 4.0) * globalAlpha;
  return material;
}
`,"maximumRequestsPerServer","_workerName","3DTiles","_videoTexture","_normal_angle2","GroundPolylinePrimitive",`px;
  --boder-width: `,"standard_parallel_2","toCartesians","GLOBE","_bindEvent","半径：","_stat","distanceDisplayPoint","fromUniformScale","glowColor","bindHighlight","create","arcType","cartoList","} ==='","getThingById","_geocoder","Double_Stereographic","tiles","mars3d-hideDiv","_depthTestAgainstTerrain_reset","forwardExtrapolationType","tilesetMaxTotalMemory","Everest 1948","EllipsoidTerrainProvider","_maskTexture","按轴平移","rgba(241, 128, 23,  ","REPEAT","_graphic_rotate_z","_sexagesimal","isArray","info","關閉包圍盒","pipeline","offsetX","SceneMode","algorithmUtil","toJSON","startAutoForward"];return _0x564f=function(){return r},_0x564f()}const straightArrowUtil=new StraightArrowUtil;class StraightArrow extends PolygonEntity{constructor(e={}){const t={_0x515bdf:4267,_0x249522:2231},i=_0x5e32ae;super(e),this[i(t._0x515bdf)]=2,this[i(t._0x249522)]=2}getShowPositions(e){const t={_0x195f21:4114},i=_0x5e32ae;return!e||e.length<2?e:straightArrowUtil[i(1835)](e,this[i(t._0x195f21)])}static getOutlinePositions(e,t){return!e||e.length<2?e:(e=LngLatArray.toCartesians(e),straightArrowUtil.startCompute(e,t))}}register$4(_0x5e32ae(540),StraightArrow);const DEF_STYLE$l={color:_0x5e32ae(1336),pixelSize:8,outlineColor:"#ffffff",outlineWidth:2,visibleDepth:![]};class PointMeasure extends PointEntity{constructor(e={}){e.style={...DEF_STYLE$l,...e.style||{}},super(e)}[_0x5e32ae(4158)](e){const t={_0x30fedf:4114,_0x2e1fbf:3602,_0x245ced:1710},i={_0x1a5b8d:1251,_0x502e5d:2623,_0x51d3ec:3411,_0x253c97:1234,_0x347514:3436,_0xfba2b2:448,_0x469d78:569,_0x379712:4296},s=_0x5e32ae;super._addedHook(e);const n=this._map;this[s(1993)](o=>{const c=s,_=this[c(3381)];_.format();const l=degree2dms(_.lng).str,h=degree2dms(_[c(448)]).str;let f="";if(this[c(3798)].crs!==![]){const m=proj4Trans([_.lng,_[c(448)]],"EPSG:4326",this.options[c(1613)]??CRS.CGCS2000_GK_Zone_3);m[0]!==_[c(3411)]&&m[1]!==_.lat&&(f='<div title="大地2000坐标"><label>横坐标</label>'+m[0].toFixed(1)+`</div>
                   <div title="大地2000坐标"><label>纵坐标</label>`+m[1][c(1029)](1)+"</div>")}return'<div class="mars3d-template-titile">'+n[c(4296)](c(i._0x1a5b8d))+c(i._0x502e5d)+n[c(4296)]("_经度")+c(3436)+_[c(i._0x51d3ec)]+c(i._0x253c97)+l+`</div>
                    <div><label>`+n.getLangText("_纬度")+c(i._0x347514)+_[c(i._0xfba2b2)]+c(i._0x469d78)+h+`</div>
                     `+f+c(3350)+n[c(i._0x379712)](c(880))+"</label>"+_.alt+n.getLangText("_米")+`</div>
                </div>`},{autoClose:this.style.autoClose??![],closeOnClick:this[s(t._0x30fedf)][s(2394)]??![]}),this.on(EventType[s(t._0x2e1fbf)],this._drawMouseMoveHandler,this),this.once(EventType.drawCreated,this[s(2664)],this),this.on(EventType.editMovePoint,this._editPointHandler,this),this.on(EventType[s(2679)],this[s(t._0x245ced)],this),this.position&&this[s(2552)]()}_updatePositionsHook(){super._updatePositionsHook(),this.openPopup()}_removedHook(){const e=_0x5e32ae;this.off(EventType.drawMouseMove,this._drawMouseMoveHandler,this),this[e(1220)](EventType.drawCreated,this._drawCreatedHandler,this),this[e(1220)](EventType.editMovePoint,this[e(1710)],this),this.off(EventType.editRemovePoint,this._editPointHandler,this),super[e(2442)]()}[_0x5e32ae(2091)](e){this.openPopup()}_drawCreatedHandler(e){this.openPopup(),this.fire(EventType.end,{mtype:this.type,graphic:this},!![])}_editPointHandler(e){this.openPopup()}}register$4("pointMeasure",PointMeasure,!![]);const DEF_STYLE$k={materialType:_0x5e32ae(3322),glowPower:.1,color:"#ebe12c",width:9,clampToGround:![]};class DistanceMeasure extends PolylineEntity{constructor(e={}){const t={_0x2f8738:4169},i=_0x5e32ae;e[i(t._0x2f8738)]=![],e.showAddText=e.showAddText??!![],e[i(2769)]=e.decimal??2,e.style={...DEF_STYLE$k,...e.style||{}},super(e),this._measured={}}get measured(){return this._measured}[_0x5e32ae(4158)](e){const t={_0x405067:2699,_0x1befaf:2038,_0x3208a1:1422},i=_0x5e32ae;var s,n;super._addedHook(e),this[i(t._0x405067)]=[],this._measureLable=this._createLabel(this.options[i(736)]||((s=this._layer)===null||s===void 0||(n=s.options)===null||n===void 0?void 0:n[i(736)])),this._measureLable[i(575)]=![],this.on(EventType[i(t._0x1befaf)],this._drawAddPointHandler,this),this.on(EventType.drawRemovePoint,this._drawRemovePointHandler,this),this.on(EventType.drawMouseMove,this._drawMouseMoveHandler,this),this.once(EventType[i(t._0x3208a1)],this[i(2664)],this),this.on(EventType.editMovePoint,this._editPointHandler,this),this.on(EventType.editRemovePoint,this._editPointHandler,this),this.options.positions&&(this._measureLable.show=!![],this._editPointHandler())}_updatePositionsHook(){const e={_0x170f7f:3351,_0x401eb4:575},t=_0x5e32ae;super._updatePositionsHook(),this[t(e._0x170f7f)][t(e._0x401eb4)]=!![],this._editPointHandler()}[_0x5e32ae(2442)](){const e={_0x26c8c1:1220,_0x423232:1710,_0x3d5053:2679,_0x36d238:515,_0x1cf87b:3351,_0x3bc475:3402,_0x520ca9:3402},t=_0x5e32ae;if(this.off(EventType[t(2038)],this._drawAddPointHandler,this),this.off(EventType[t(3602)],this._drawMouseMoveHandler,this),this[t(e._0x26c8c1)](EventType.drawRemovePoint,this._drawRemovePointHandler,this),this.off(EventType[t(1422)],this._drawCreatedHandler,this),this.off(EventType.editMovePoint,this[t(e._0x423232)],this),this.off(EventType[t(e._0x3d5053)],this._editPointHandler,this),Cesium__namespace[t(e._0x36d238)](this[t(e._0x1cf87b)])&&(this[t(1464)](this._measureLable),delete this._measureLable),Cesium__namespace[t(515)](this._arrPartMeasureLable)&&this._arrPartMeasureLable[t(e._0x3bc475)]>0){const i=this._arrPartMeasureLable;if(i&&i[t(e._0x520ca9)]>0)for(let s=0,n=i[t(3402)];s<n;s++)this._removeLabel(i[s]);delete this._arrPartMeasureLable}super._removedHook()}_toJSON_Ex(e){e.measured=getAttrVal(this.measured,{onlySimpleType:!![]})}[_0x5e32ae(2437)](e){const t={_0xf67dfb:3798,_0x5b50b7:2769,_0x4841fb:2776,_0x4e7752:4296,_0x2fa12c:2582},i=_0x5e32ae;e&&(this.options.unit=e);const s={unit:this[i(t._0xf67dfb)].unit,lang:this._map.lang,decimal:this.options[i(t._0x5b50b7)]};if(this[i(1498)].distanceStr=formatDistance(this[i(1498)].distance,s),this._measured[i(t._0x4841fb)]!==this._measured.distanceLastFd){if(this._measureLable[i(1260)]=this._map[i(t._0x4e7752)](i(2582))+":"+this._measured[i(1493)],this[i(3798)].showAddText){const n=formatDistance(this._measured.distanceLastFd,s);this._measured[i(3372)]=n,this._measureLable.text+=`
(+`+n+")"}}else this._measureLable.text=this[i(1890)].getLangText(i(t._0x2fa12c))+":"+this._measured.distanceStr;if(e)for(let n=1,o=this._arrPartMeasureLable.length;n<o;n++){const c=this._arrPartMeasureLable[n];c.showText&&c.showText()}}_drawAddPointHandler(e){const t={_0x4dafd7:646,_0x323c7a:1498,_0x3e358f:1493},i={_0x8983e7:3798,_0x51b2dc:2769,_0x1537e6:3427,_0x34cd9e:1528,_0x106303:3798,_0x24bcd9:1528},s=_0x5e32ae;var n,o;const c=this,_=this[s(1912)],l=this[s(3279)](this.options.label||((n=this._layer)===null||n===void 0||(o=n[s(3798)])===null||o===void 0?void 0:o.label),_[_.length-1]);if(this[s(2699)].push(l),_.length===1)l.text=this._map.getLangText("_起点");else{const h=getSurfaceDistance(_),f=getSurfaceDistance([_[_.length-2],_[_[s(3402)]-1]]);l.attr={},l.attr.value=h,l.attr[s(t._0x4dafd7)]=f,l.showText=function(){const m=s,g={unit:c[m(i._0x8983e7)].unit,lang:c._map.lang,decimal:c.options[m(i._0x51b2dc)]},C=formatDistance(this[m(1528)][m(i._0x1537e6)],g);if(this[m(i._0x34cd9e)].value!==this.attr.valueFD){if(this.text=C,c[m(i._0x106303)][m(3312)]){const E=formatDistance(this[m(i._0x24bcd9)].valueFD,g);this.text+=`
(+`+E+")"}}else this.text=C},l.showText(),this[s(t._0x323c7a)][s(2776)]=h,this._measured.distanceLastFd=f,this._measured[s(t._0x3e358f)]=formatDistance(this._measured.distance,{unit:this.options.unit,lang:this._map[s(663)],decimal:this.options.decimal})}}_drawRemovePointHandler(e){const t={_0x3ff28a:2699,_0x4d06d7:3351},i=_0x5e32ae,s=this[i(t._0x3ff28a)].pop();this[i(1464)](s),this._drawMouseMoveHandler(e),this[i(t._0x4d06d7)].position=e[i(698)]}_drawMouseMoveHandler(e){const t={_0x3513bc:1912,_0x3f796f:3351,_0x1b58a5:2776},i=_0x5e32ae,s=this[i(t._0x3513bc)];if(!s||s[i(3402)]<2){this[i(3351)].show=![];return}const n=getSurfaceDistance(s);let o=getSurfaceDistance([s[s.length-2],s[s[i(3402)]-1]]);o===0&&s[i(3402)]>2&&(o=getSurfaceDistance([s[s.length-3],s[s[i(3402)]-2]])),this._measured.distance=n,this._measured.distanceLastFd=o,this.updateText(),this[i(t._0x3f796f)][i(2180)]=s[s[i(3402)]-1],this.fire(EventType.change,{mtype:this.type,value:this._measured[i(t._0x1b58a5)],label:this._measured.distanceStr},!![])}[_0x5e32ae(2664)](e,t=!![]){const i={_0x55ac62:1912,_0x39e21f:3402,_0x3ede35:2699,_0x11e9eb:2437,_0x2dcc3f:1404,_0x142285:1498},s=_0x5e32ae,n=this[s(i._0x55ac62)],o=this._arrPartMeasureLable[s(i._0x39e21f)]-n.length;if(o>=0){for(let c=this._arrPartMeasureLable.length-1;c>=n[s(i._0x39e21f)]-1;c--)this[s(1464)](this[s(i._0x3ede35)][c]);this[s(i._0x3ede35)].splice(n[s(i._0x39e21f)]-1,o+1)}this[s(i._0x11e9eb)](),this._measureLable.position=n[n.length-1],this[s(3351)].show=!![],t&&this[s(i._0x2dcc3f)](EventType.end,{mtype:this.type,value:this._measured.distance,label:this[s(i._0x142285)].distanceStr},!![])}_editPointHandler(e,t=!![]){const i={_0x3c1888:3798,_0x43d3cc:3279,_0x2112ac:736,_0x107226:575,_0x47171c:1498,_0x185f27:2776,_0x4d6f9e:1493},s={_0x1bb715:1528,_0x1ea1f6:1260},n=_0x5e32ae,o=this,c=this.positionsShow;if(!c||c.length<2)return;let _=this._arrPartMeasureLable;if(_&&_.length>0)for(let P=1,w=_.length;P<w;P++)this._removeLabel(_[P]);else{var l,h;const P=this[n(3279)](this.options.label||((l=this._layer)===null||l===void 0||(h=l[n(i._0x3c1888)])===null||h===void 0?void 0:h.label),c[0]);P.text=this[n(1890)].getLangText("_起点"),_=[P]}const f=_[0];f.position=c[0],this._arrPartMeasureLable=[f];let m=0;for(let P=1,w=c.length-1;P<w;P++){var g,C;const M=getSurfaceDistance([c[P-1],c[P]]);m+=M;const T=this[n(i._0x43d3cc)](this.options[n(i._0x2112ac)]||((g=this._layer)===null||g===void 0||(C=g.options)===null||C===void 0?void 0:C.label),c[P]);this[n(2699)].push(T),T.attr={},T.attr.value=m,T.attr.valueFD=M,T[n(2727)]=function(){const L=n,R={unit:o.options.unit,lang:o._map.lang,decimal:o.options.decimal},D=formatDistance(this.attr[L(3427)],R);if(this[L(s._0x1bb715)].value!==this[L(s._0x1bb715)].valueFD){const N=formatDistance(this.attr.valueFD,R);this.text=D,o.options.showAddText&&(this[L(s._0x1ea1f6)]+=`
(+`+N+")")}else this[L(1260)]=D},T.showText()}const E=getSurfaceDistance([c[c.length-2],c[c.length-1]]);m+=E,this._measured.distance=m,this._measured.distanceLastFd=E,this.updateText(),this._measureLable.position=c[c.length-1],this._measureLable[n(i._0x107226)]=!![],t&&this.fire(EventType.change,{mtype:this.type,value:this[n(i._0x47171c)][n(i._0x185f27)],label:this._measured[n(i._0x4d6f9e)]},!![])}}register$4(_0x5e32ae(1602),DistanceMeasure);class DistanceSurfaceMeasure extends DistanceMeasure{constructor(e={}){super(e),e._promise&&(this._promise=e._promise,delete e._promise),e.style.clampToGround=!![],e.splitNum=e.splitNum??200,this.disTerrainScale=1.2}_drawCreatedHandler(e){const t={_0x2008a4:709},i=_0x5e32ae;super._drawCreatedHandler(e,![]),this[i(t._0x2008a4)](e)}_editPointHandler(e){const t={_0xf7a919:709},i=_0x5e32ae;super._editPointHandler(e,![]),this[i(t._0xf7a919)](e)}[_0x5e32ae(709)](e){const t={_0x1db4e7:2776,_0x558b9d:1498},i={_0x1e85ff:4063,_0x70839:2195,_0x9a9add:3351,_0x5e7afa:1498},s=_0x5e32ae,n=this.positionsShow;this.fire(EventType.start,{mtype:this.type,graphic:this},!![]),getClampDistance(n,{scene:this._map.scene,splitNum:this.options.splitNum,has3dtiles:this.options.has3dtiles,exact:this[s(3798)].exact,disTerrainScale:this.disTerrainScale,endItem:o=>{const c=s;if(!this._map||!this._measureLable)return;let _=o[c(i._0x1e85ff)];const l=o[c(i._0x70839)],h=o.distance;_++;const f=this._arrPartMeasureLable[_];f?(f[c(1528)][c(3427)]=l,f.attr.valueFD=h,f.showText()):_===n.length-1&&this[c(i._0x9a9add)]&&(this[c(i._0x5e7afa)][c(2776)]=l,this._measured.distanceLastFd=h,this.updateText())},end:o=>{const c=s;var _;if(!this[c(1890)]||!this._measureLable)return;this[c(1498)][c(t._0x1db4e7)]=o;const l={mtype:this.type,graphic:this,value:this._measured.distance,label:this[c(t._0x558b9d)][c(1493)]};this.fire(EventType.change,l,!![]),this.fire(EventType[c(2384)],l,!![]),(_=this._promise)!==null&&_!==void 0&&_.resolve&&this._promise.resolve(this)}})}}register$4("distanceSurfaceMeasure",DistanceSurfaceMeasure);class SectionMeasure extends DistanceMeasure{constructor(e={}){const t={_0x29192d:3110,_0x24e1e5:3418},i=_0x5e32ae;super(e),e._promise&&(this._promise=e[i(t._0x29192d)],delete e._promise),e.style.clampToGround=!![],e[i(t._0x24e1e5)]=e.splitNum??200}_drawCreatedHandler(e){const t={_0x453027:2745},i=_0x5e32ae;super._drawCreatedHandler(e,![]),this[i(t._0x453027)](e)}_editPointHandler(e){super._editPointHandler(e,![]),this.updateSectionForTerrain(e)}[_0x5e32ae(2745)](e){const t={_0x555f67:3205},i={_0x58e001:3110,_0x168233:4056},s={_0x4f164f:3865,_0x34cd9c:2776,_0x119d9a:3759,_0x17d244:1029,_0x16f4cc:3351},n=_0x5e32ae,o=this.positionsShow;if(!o||o.length<2)return;this.fire(EventType.start,{mtype:this[n(t._0x555f67)],graphic:this},!![]);let c=0;const _=[],l=[],h=[],f=[];computeStepSurfaceLine({map:this._map,positions:o,splitNum:this[n(3798)][n(3418)],has3dtiles:this.options.has3dtiles,exact:this[n(3798)].exact,endItem:(m,g,C)=>{const E=n;var P,w;if(!this._map||!this._measureLable)return;const M=(P=Cesium__namespace.Cartographic.fromCartesian(o[C]))===null||P===void 0?void 0:P.height,T=(w=Cesium__namespace.Cartographic.fromCartesian(o[C+1]))===null||w===void 0?void 0:w[E(s._0x4f164f)],L=(T-M)/m.length;let R=0;for(let N=0;N<m.length;N++){if(N!==0){const $=Cesium__namespace.Cartesian3[E(s._0x34cd9c)](m[N],m[N-1]);c+=$,R+=$}_[E(s._0x119d9a)](Number(c.toFixed(1)));const k=LngLatPoint.fromCartesian(m[N]);l.push(k.alt),f.push(k);const B=Number((M+L*N)[E(s._0x17d244)](1));h[E(3759)](B)}C++;const D=this[E(2699)][C];D?(D.attr.value=c,D.attr.valueFD=R,D[E(2727)]()):C===o.length-1&&this[E(s._0x16f4cc)]&&(this._measured.distance=c,this._measured.distanceLastFd=R,this.updateText())},end:()=>{const m=n;var g;if(!this._map||!this._measureLable)return;this.updateText(),this._measured.arrLen=_,this[m(1498)][m(873)]=h,this[m(1498)].arrHB=l,this[m(1498)].arrPoint=f;const C={mtype:this.type,graphic:this,value:c,label:this._measured.distanceStr,...this._measured};this.fire(EventType.change,C,!![]),this.fire(EventType.end,C,!![]),(g=this[m(i._0x58e001)])!==null&&g!==void 0&&g[m(i._0x168233)]&&this._promise[m(4056)](this)}})}}register$4(_0x5e32ae(3778),SectionMeasure);const DEF_STYLE$j={materialType:"PolylineArrow",color:"#ebe967",width:9,clampToGround:!![]};class AngleMeasure extends PolylineEntity{constructor(e={}){const t={_0x25a0f2:590,_0x5111b3:1498},i=_0x5e32ae;e.hasMoveEdit=![],e[i(t._0x25a0f2)]=2,e.decimal=e.decimal??2,e.angleDecimal=e.angleDecimal??1,e.style={...DEF_STYLE$j,...e.style||{}},super(e),this[i(t._0x5111b3)]={}}get measured(){return this._measured}[_0x5e32ae(4158)](e){const t={_0x42f129:3798,_0x19a6e2:2091,_0x4f3cf0:539,_0x45a6a1:2095,_0x1569bd:3351},i=_0x5e32ae;var s,n;super._addedHook(e),this._measureLable=this._createLabel(this[i(t._0x42f129)].label||((s=this._layer)===null||s===void 0||(n=s[i(t._0x42f129)])===null||n===void 0?void 0:n.label)),this._measureLable.show=![],this.on(EventType.drawAddPoint,this[i(885)],this),this.on(EventType.drawRemovePoint,this._drawRemovePointHandler,this),this.on(EventType.drawMouseMove,this[i(t._0x19a6e2)],this),this.once(EventType.drawCreated,this._drawCreatedHandler,this),this.on(EventType[i(t._0x4f3cf0)],this[i(2091)],this),this.on(EventType.editRemovePoint,this._drawMouseMoveHandler,this),this.on(EventType[i(t._0x45a6a1)],this._drawMouseMoveHandler,this),this[i(t._0x42f129)].positions&&(this[i(t._0x1569bd)].show=!![],this._drawMouseMoveHandler())}_updatePositionsHook(){const e={_0x1da749:575,_0x3737b3:2091},t=_0x5e32ae;super._updatePositionsHook(),this._measureLable[t(e._0x1da749)]=!![],this[t(e._0x3737b3)]()}_removedHook(){const e={_0x25093c:2038,_0x7ff9b5:1220,_0x3bf4c2:2679,_0x2126b9:515},t=_0x5e32ae;this.off(EventType[t(e._0x25093c)],this._drawAddPointHandler,this),this[t(1220)](EventType.drawMouseMove,this[t(2091)],this),this[t(e._0x7ff9b5)](EventType.drawRemovePoint,this._drawRemovePointHandler,this),this.off(EventType.drawCreated,this._drawCreatedHandler,this),this[t(1220)](EventType.editMovePoint,this._drawMouseMoveHandler,this),this.off(EventType[t(e._0x3bf4c2)],this[t(2091)],this),this.off(EventType[t(2095)],this._drawMouseMoveHandler,this),Cesium__namespace[t(e._0x2126b9)](this._measureLable)&&(this._removeLabel(this._measureLable),delete this._measureLable),super._removedHook()}_toJSON_Ex(e){const t={_0x14cf1b:3083},i=_0x5e32ae;e[i(t._0x14cf1b)]=getAttrVal(this[i(3083)],{onlySimpleType:!![]})}updateText(e){const t={_0xf48a:1713,_0x59daf3:1498,_0x41afd2:1314,_0x48963b:1029,_0x4d4f7c:3575,_0x2c7930:1498,_0x517fff:2776,_0x23d163:3798,_0xe9d098:663},i=_0x5e32ae;e&&(this.options.unit=e),this._measured[i(t._0xf48a)]=this[i(t._0x59daf3)][i(t._0x41afd2)][i(t._0x48963b)](this.options[i(t._0x4d4f7c)])+"°",this[i(t._0x2c7930)].distanceStr=formatDistance(this._measured[i(t._0x517fff)],{unit:this[i(t._0x23d163)].unit,lang:this._map[i(t._0xe9d098)],decimal:this.options.decimal}),this._measureLable.text=this._map.getLangText("_角度")+":"+this._measured.angleStr+`
`+this._map.getLangText("_距离")+":"+this._measured.distanceStr}_drawAddPointHandler(e){this._drawMouseMoveHandler(e)}_drawRemovePointHandler(e){this._measureLable&&(this._measureLable.show=![])}_drawMouseMoveHandler(e){const t={_0x80cd8:3402,_0x5143af:1498,_0x53aa93:2776,_0x16924c:809},i=_0x5e32ae,s=this.positionsShow;if(!s||s[i(t._0x80cd8)]<2){this._measureLable.show=![];return}this[i(t._0x5143af)][i(t._0x53aa93)]=Cesium__namespace.Cartesian3.distance(s[0],s[1]),this._measured.angle=getAngle(s[0],s[1],!![]),this.updateText(),this._measureLable.position=s[1],this._measureLable.show=!![],this[i(1404)](EventType[i(t._0x16924c)],{mtype:this[i(3205)],value:this._measured.angle,label:this._measured.angleStr},!![])}_drawCreatedHandler(e){const t={_0x477040:3205,_0xab6122:1498},i=_0x5e32ae;this.fire(EventType.end,{mtype:this[i(t._0x477040)],value:this[i(t._0xab6122)].angle,label:this._measured.angleStr},!![])}}register$4("angleMeasure",AngleMeasure);const DEF_STYLE$i={materialType:_0x5e32ae(3322),glowPower:.1,color:"#ebe12c",width:9};class HeightMeasure extends PolylineEntity{constructor(e={}){e.hasMoveEdit=![],e.maxPointNum=2,e.decimal=e.decimal??2,e.style={...DEF_STYLE$i,...e.style||{}},super(e),this._measured={}}get[_0x5e32ae(3083)](){return this[_0x5e32ae({_0xcdefff:1498}._0xcdefff)]}_addedHook(e){const t={_0x11fd0d:2211,_0x516851:2664,_0x54022b:2095,_0x277392:2436},i=_0x5e32ae;super[i(4158)](e),this[i(3257)](),this.on(EventType[i(2038)],this._drawAddPointHandler,this),this.on(EventType[i(4305)],this._drawRemovePointHandler,this),this.on(EventType.drawMouseMove,this[i(2091)],this),this[i(t._0x11fd0d)](EventType.drawCreated,this[i(t._0x516851)],this),this.on(EventType[i(539)],this._editPointHandler,this),this.on(EventType.editRemovePoint,this[i(1710)],this),this.on(EventType[i(t._0x54022b)],this._editPointHandler,this),this.options[i(t._0x277392)]&&(this._measureLable.show=!![],this._editPointHandler())}_updatePositionsHook(){super._updatePositionsHook(),this._measureLable.show=!![],this._editPointHandler()}_removedHook(){const e={_0x43670b:2038,_0x5c8abd:1220,_0x59921d:3304,_0x14d526:1710,_0x49cfc7:2442},t=_0x5e32ae;this.off(EventType[t(e._0x43670b)],this._drawAddPointHandler,this),this.off(EventType.drawMouseMove,this._drawMouseMoveHandler,this),this[t(e._0x5c8abd)](EventType.drawRemovePoint,this[t(e._0x59921d)],this),this.off(EventType[t(1422)],this._drawCreatedHandler,this),this.off(EventType.editMovePoint,this[t(e._0x14d526)],this),this.off(EventType.editRemovePoint,this._editPointHandler,this),this.off(EventType[t(2095)],this._editPointHandler,this),this._removeMeasureLabelAndEx(),super[t(e._0x49cfc7)]()}[_0x5e32ae(3488)](e){const t=_0x5e32ae;e.measured=getAttrVal(this[t(3083)],{onlySimpleType:!![]})}[_0x5e32ae(3257)](){const e={_0x551d7b:3798},t=_0x5e32ae;var i,s;this[t(3351)]=this._createLabel(this[t(e._0x551d7b)].label||((i=this[t(2873)])===null||i===void 0||(s=i.options)===null||s===void 0?void 0:s.label)),this._measureLable.show=![]}_removeMeasureLabelAndEx(){const e=_0x5e32ae;Cesium__namespace.defined(this._measureLable)&&(this[e(1464)](this._measureLable),delete this._measureLable)}[_0x5e32ae(2437)](e){const t=_0x5e32ae;e&&(this.options.unit=e),this._measured.heightStr=formatDistance(this[t(1498)].height,{unit:this[t(3798)].unit,lang:this._map.lang,decimal:this.options[t(2769)]}),this._measureLable.text=this._map.getLangText("_高度差")+":"+this._measured.heightStr}[_0x5e32ae(885)](e){this[_0x5e32ae({_0x552415:2091}._0x552415)](e)}_drawRemovePointHandler(e){const t={_0x18c27f:3351},i=_0x5e32ae;this._measureLable&&(this[i(t._0x18c27f)].show=![])}[_0x5e32ae(2091)](e){const t={_0x56a419:1498},i=_0x5e32ae,s=this.positionsShow;if(!s||s.length<2){this._measureLable.show=![];return}const n=Cesium__namespace.Cartographic.fromCartesian(s[0]),o=Cesium__namespace.Cartographic.fromCartesian(s[1]);this._measured[i(3865)]=this._map.getRealAlt(Math.abs(o[i(3865)]-n.height)),this.updateText(),this[i(3351)].position=Cesium__namespace[i(3916)].midpoint(s[0],s[1],new Cesium__namespace.Cartesian3),this[i(3351)].show=!![],this.fire(EventType.change,{mtype:this.type,value:this[i(t._0x56a419)].height,label:this[i(1498)].heightStr},!![])}[_0x5e32ae(2664)](e){const t={_0x21cc10:1404},i=_0x5e32ae;this[i(t._0x21cc10)](EventType[i(2384)],{mtype:this.type,value:this._measured.height,label:this._measured.heightStr},!![])}[_0x5e32ae(1710)](e){this[_0x5e32ae(2091)](e)}}register$4("heightMeasure",HeightMeasure);class HeightTriangleMeasure extends HeightMeasure{_initMeasureLable(){const e={_0x51ba1f:3279,_0x4b6cd3:1611,_0x4776b8:2853,_0x28344f:1479,_0x445645:2873,_0x4d3bb4:3798},t=_0x5e32ae;var i,s,n,o;super[t(3257)](),this._measureDistanceLable=this[t(e._0x51ba1f)](this.options.label||((i=this[t(2873)])===null||i===void 0||(s=i.options)===null||s===void 0?void 0:s.label)),this[t(e._0x4b6cd3)][t(e._0x4776b8)]=new Cesium__namespace.Cartesian2(0,0),this[t(e._0x28344f)]=this._createLabel(this.options.label||((n=this[t(e._0x445645)])===null||n===void 0||(o=n[t(e._0x4d3bb4)])===null||o===void 0?void 0:o.label)),this._measureHorLable.pixelOffset=new Cesium__namespace[t(2497)](0,0)}_removeMeasureLabelAndEx(){const e={_0x1cb570:1611},t=_0x5e32ae;super[t(923)](),this._measureDistanceLable!=null&&(this._removeLabel(this._measureDistanceLable),delete this[t(e._0x1cb570)]),this._measureHorLable!=null&&(this._removeLabel(this._measureHorLable),delete this._measureHorLable),this._measureExLine!=null&&(this.dataSource[t(887)].remove(this._measureExLine),delete this[t(2158)])}updateText(e){const t={_0x421b51:4059,_0x42655c:663,_0x49c736:1498,_0x4e7eb9:1260,_0x463e99:1071,_0x81d62f:1260,_0x301481:1890},i=_0x5e32ae;super[i(2437)](e);const s={unit:this.options[i(t._0x421b51)],lang:this._map[i(t._0x42655c)],decimal:this[i(3798)].decimal};this._measured[i(1493)]=formatDistance(this[i(t._0x49c736)].distance,s),this._measureDistanceLable[i(t._0x4e7eb9)]=this._map[i(4296)](i(2040))+":"+this._measured.distanceStr,this[i(t._0x49c736)].distanceHorStr=formatDistance(this._measured[i(t._0x463e99)],s),this._measureHorLable[i(t._0x81d62f)]=this[i(t._0x301481)].getLangText("_水平距离")+":"+this._measured[i(3860)]}[_0x5e32ae(3304)](e){const t={_0x2519db:575},i=_0x5e32ae;this._measureLable&&(this[i(3351)].show=![]),this[i(1479)]&&(this._measureHorLable.show=![]),this._measureDistanceLable&&(this._measureDistanceLable[i(t._0x2519db)]=![]),this._measureExLine&&(this._measureExLine_positions=null)}[_0x5e32ae(2091)](e){const t={_0x59a262:1912,_0x5cd249:3402,_0x3e7ee4:575,_0x398b8a:2793,_0x1e25e7:1498,_0x13ad40:3926,_0x2171c1:2776,_0x3c0083:3916},i=_0x5e32ae,s=this[i(t._0x59a262)];if(!s||s[i(t._0x5cd249)]<2){this._measureLable[i(t._0x3e7ee4)]=![];return}const n=Cesium__namespace.Cartographic[i(3236)](s[0]),o=n.height,c=Cesium__namespace.Cartographic[i(3236)](s[1]),_=c.height;let l,h,f;o>_?(h=Cesium__namespace.Cartesian3[i(2793)](c.longitude,c.latitude,o),f=s[0],l=s[1]):(h=Cesium__namespace[i(3916)][i(t._0x398b8a)](n.longitude,n.latitude,_),f=s[1],l=s[0]),this[i(t._0x1e25e7)].height=this._map.getRealAlt(Math[i(t._0x13ad40)](_-o)),this._measureLable.position=Cesium__namespace.Cartesian3.midpoint(h,l,new Cesium__namespace[i(3916)]),this._measureLable.show=!![],this._measured.distance=Cesium__namespace.Cartesian3[i(t._0x2171c1)](f,l),this[i(1611)].position=Cesium__namespace[i(3916)].midpoint(f,l,new Cesium__namespace.Cartesian3),this._measureDistanceLable.show=!![],this[i(1498)].distanceHor=Cesium__namespace[i(t._0x3c0083)].distance(h,f),this._measureHorLable.position=Cesium__namespace.Cartesian3.midpoint(h,f,new Cesium__namespace.Cartesian3),this._measureHorLable.show=!![],this.updateText(),this.updateExLine([l,h,f]),this.fire(EventType.change,{mtype:this.type,value:this._measured[i(3865)],label:this._measured.heightStr},!![])}[_0x5e32ae(3610)](e){const t={_0x3cb362:1268},i=_0x5e32ae;if(this._measureExLine_positions=e,!this._measureExLine){const s={id:this.id+"-ex",polyline:PolylineStyleConver[i(t._0x3cb362)](this.options[i(4114)],{},!![])};s.polyline.positions=new Cesium__namespace.CallbackProperty(n=>this._measureExLine_positions,![]),this._measureExLine=this._createEntity(s),this.dataSource.entities.add(this[i(2158)]),this.bindPickId(this._measureExLine)}}_editPointHandler(e){this[_0x5e32ae({_0x346ca0:2091}._0x346ca0)](e)}}register$4("heightTriangleMeasure",HeightTriangleMeasure);const DEF_STYLE$h={color:"#00fff2",outline:!![],outlineColor:"#fafa5a",outlineWidth:1,opacity:.4,clampToGround:![]};class AreaMeasure extends PolygonEntity{constructor(e={}){const t={_0x3d14c8:4169,_0x1a15a9:2769,_0x1b38df:1149},i=_0x5e32ae;e[i(t._0x3d14c8)]=![],e[i(t._0x1a15a9)]=e.decimal??2,e.style={...DEF_STYLE$h,...e.style||{}},e.label&&(e.label={horizontalOrigin:Cesium__namespace.HorizontalOrigin[i(t._0x1b38df)],...e.label}),super(e),this._measured={}}get[_0x5e32ae(3083)](){return this._measured}[_0x5e32ae(4158)](e){const t={_0x4d09e2:4158,_0x3a959d:2873,_0x3a5771:575,_0x486ac6:3602,_0x400311:1422,_0x1ae07b:2436},i=_0x5e32ae;var s,n;super[i(t._0x4d09e2)](e),this._measureLable=this._createLabel(this.options.label||((s=this[i(t._0x3a959d)])===null||s===void 0||(n=s.options)===null||n===void 0?void 0:n.label)),this._measureLable[i(t._0x3a5771)]=![],this.on(EventType.drawAddPoint,this._drawAddPointHandler,this),this.on(EventType.drawRemovePoint,this._drawRemovePointHandler,this),this.on(EventType[i(t._0x486ac6)],this._drawMouseMoveHandler,this),this.once(EventType[i(t._0x400311)],this._drawCreatedHandler,this),this.on(EventType.editMovePoint,this._editPointHandler,this),this.on(EventType.editRemovePoint,this._editPointHandler,this),this.options[i(t._0x1ae07b)]&&(this._measureLable[i(575)]=!![],this[i(1710)]())}_updatePositionsHook(){const e=_0x5e32ae;super[e(4119)](),this._measureLable&&(this._measureLable.show=!![],this[e(1710)]())}_removedHook(){const e={_0x280937:1220},t=_0x5e32ae;this.off(EventType.drawAddPoint,this._drawAddPointHandler,this),this.off(EventType.drawMouseMove,this._drawMouseMoveHandler,this),this[t(e._0x280937)](EventType.drawRemovePoint,this._drawRemovePointHandler,this),this.off(EventType.drawCreated,this._drawCreatedHandler,this),this.off(EventType.editMovePoint,this._editPointHandler,this),this.off(EventType.editRemovePoint,this._editPointHandler,this),this._removeMeasureLabelAndEx(),super._removedHook()}_toJSON_Ex(e){const t=_0x5e32ae;e[t(3083)]=getAttrVal(this.measured,{onlySimpleType:!![],noArray:!![]})}_removeMeasureLabelAndEx(){Cesium__namespace.defined(this._measureLable)&&(this._removeLabel(this._measureLable),delete this._measureLable)}[_0x5e32ae(2437)](e){const t={_0x4b4192:1890,_0xac332:1498},i=_0x5e32ae;e&&(this.options.unit=e),this._measured.areaStr=formatArea(this._measured.area,{unit:this.options.unit,lang:this[i(t._0x4b4192)].lang,decimal:this.options.decimal}),this._measureLable.text=this._map.getLangText("_面积")+":"+this[i(t._0xac332)].areaStr}startDraw(e){const t=_0x5e32ae;var i;super[t(1860)](e),this._drawMouseMoveHandler(),((i=this.options[t(2436)])===null||i===void 0?void 0:i.length)>2&&this.stopDraw()}_drawAddPointHandler(e){this._drawMouseMoveHandler(e)}_drawRemovePointHandler(e){const t={_0x5611f8:1912},i=_0x5e32ae,s=this[i(t._0x5611f8)];(s==null?void 0:s.length)<3&&(this._measureLable.show=![])}[_0x5e32ae(2091)](e){const t={_0x2dd61d:3402,_0x3f414e:575,_0x2b4a03:3351,_0x14b5f7:1498},i=_0x5e32ae,s=this.positionsShow;if(s[i(t._0x2dd61d)]<3){this._measureLable&&(this._measureLable[i(t._0x3f414e)]=![]);return}this._measured.area=getArea(s),this[i(2437)]();const n=centerOfMass(s);this[i(t._0x2b4a03)].position=n,this._measureLable.show=!![],this[i(1404)](EventType.change,{mtype:this[i(3205)],value:this._measured.area,label:this[i(t._0x14b5f7)].areaStr},!![])}_drawCreatedHandler(e){const t={_0x3f1909:1404,_0x18e150:1498,_0x2c68ce:1451},i=_0x5e32ae;this[i(t._0x3f1909)](EventType.end,{mtype:this.type,value:this[i(t._0x18e150)][i(t._0x2c68ce)],label:this._measured.areaStr},!![])}_editPointHandler(e){const t=_0x5e32ae,i=this.positionsShow;!i||i[t(3402)]<3||(this._measured.area=getArea(i),this.updateText(),this._measureLable.position=centerOfMass(i),this[t(1404)](EventType[t(809)],{mtype:this.type,value:this._measured.area,label:this._measured.areaStr},!![]))}}register$4(_0x5e32ae(1284),AreaMeasure);class AreaSurfaceMeasure extends AreaMeasure{constructor(e={}){const t={_0x20feae:2825},i=_0x5e32ae;super(e),e._promise&&(this[i(3110)]=e._promise,delete e[i(3110)]),e.style[i(t._0x20feae)]=!![]}_drawCreatedHandler(e){this[_0x5e32ae(3959)](e)}_editPointHandler(e){super._editPointHandler(e),this.updateAreaForTerrain(e)}updateAreaForTerrain(e){const t={_0x25f8ea:3402,_0x2e505c:2476,_0x40feb2:1890,_0x53a083:3798},i={_0x6fe7f5:1949,_0x436297:2298,_0xfef34a:3110},s=_0x5e32ae,n=this[s(1912)];!n||n[s(t._0x25f8ea)]<3||(this.fire(EventType[s(t._0x2e505c)],{mtype:this.type,graphic:this},!![]),getClampArea(n,{scene:this[s(t._0x40feb2)].scene,splitNum:this[s(t._0x53a083)].splitNum,has3dtiles:this[s(3798)].has3dtiles,exact:this.options.exact})[s(549)](o=>{const c=s;var _,l;if(!this._map||!this._measureLable)return;const h=getPositionValue(this._measureLable[c(2180)],(_=this[c(1890)])===null||_===void 0?void 0:_[c(i._0x6fe7f5)].currentTime);h&&o!==null&&o!==void 0&&o[c(i._0x436297)]&&(this._measureLable.position=setPositionsHeight(h,o[c(2298)])),this[c(1498)].area=o.area,this.updateText();const f={...o,mtype:this.type,value:this._measured.area,label:this[c(1498)].areaStr};this.fire(EventType.change,f,!![]),this.fire(EventType.end,f,!![]),(l=this[c(i._0xfef34a)])!==null&&l!==void 0&&l.resolve&&this._promise[c(4056)](this)}))}}register$4(_0x5e32ae(2210),AreaSurfaceMeasure);class VolumeMeasure extends AreaMeasure{constructor(e={}){const t={_0x58872c:2831,_0x36934c:3703,_0x228124:1269,_0x1e386e:1083,_0x472712:2276},i=_0x5e32ae;super(e),e._promise&&(this._promise=e._promise,delete e._promise),this.labelHeightStyle={...this.options.label||{},font_size:15,background:![]},Cesium__namespace.defined(e[i(2831)])&&(this[i(2916)]={...this.labelHeightStyle,...e[i(t._0x58872c)]}),this.polygonWallStyle={color:i(1766),opacity:.3,closeTop:![],closeBottom:!![],perPositionHeight:![],height:new Cesium__namespace[i(3703)](s=>this.minHeight,![]),extrudedHeight:new Cesium__namespace[i(t._0x36934c)](s=>this[i(2298)],![])},Cesium__namespace.defined(e.polygonWall)&&(this.polygonWallStyle={...this.polygonWallStyle,...e.polygonWall}),this.heightLabel=e.heightLabel??!![],this.offsetLabel=e.offsetLabel??![],this[i(t._0x228124)]=e[i(1269)]??!![],this[i(1083)]=e[i(t._0x1e386e)]??!![],this.showDigVolume=e[i(t._0x472712)]??!![],this._hasFX=![]}get hasEdit(){return![]}get polygonMaxHeight(){return this.interPolygonObj?this.interPolygonObj.maxHeight:this.maxHeight}get height(){return this._jzmHeight}set height(e){const t={_0x5515f6:4111,_0x3baff2:1498,_0x37639d:3402},i=_0x5e32ae;if(this._jzmHeight=e,e>this.maxHeight&&(this.maxHeight=e),e<this[i(t._0x5515f6)]&&(this.minHeight=e),!this._hasFX)return;const s=updateVolume(this[i(3355)],this.height);for(const o in s)this[i(t._0x3baff2)][o]=s[o];if(this.updateText(),this._arrPartMeasureLable)for(let o=0;o<this._arrPartMeasureLable[i(t._0x37639d)];o++)this._arrPartMeasureLable[o].showText();const n={...s,sourceTarget:this,mtype:this.type,graphic:this};this[i(1404)](EventType.change,n,!![])}get minHeight(){return this._minHeight||0}set[_0x5e32ae(4111)](e){const t={_0x35b680:2437,_0x1bd868:3205},i=_0x5e32ae;if(this._minHeight=e,!this._hasFX)return;this.interPolygonObj&&(this[i(3355)].minHeight=e,this.interPolygonObj=updateVolumeByMinHeight(this.interPolygonObj));const s=updateVolume(this.interPolygonObj,this.height);for(const o in s)this._measured[o]=s[o];this[i(t._0x35b680)]();const n={...s,sourceTarget:this,mtype:this[i(t._0x1bd868)],graphic:this};this.fire(EventType[i(809)],n,!![])}get[_0x5e32ae(2298)](){return this._maxHeight||0}set maxHeight(e){this._maxHeight=e}[_0x5e32ae(3961)](e){const t={_0x141b39:2297,_0x1d322e:2699},i=_0x5e32ae;if(this[i(2297)]&&(this[i(t._0x141b39)].show=e),this._measureLable&&(this[i(3351)].show=e),this._arrPartMeasureLable)for(let s=0;s<this[i(t._0x1d322e)].length;s++)this[i(2699)][s].show=e}_removedHook(){this[_0x5e32ae({_0x4c8ca4:3834}._0x4c8ca4)]&&(this._map.scene.globe.depthTestAgainstTerrain=![],delete this._depthTestAgainstTerrain_reset),super._removedHook()}_removeMeasureLabelAndEx(){const e=_0x5e32ae;if(super._removeMeasureLabelAndEx(),Cesium__namespace.defined(this._arrPartMeasureLable)&&this._arrPartMeasureLable.length>0){const t=this._arrPartMeasureLable;if(t&&t.length>0)for(let i=0,s=t.length;i<s;i++)this._removeLabel(t[i]);delete this._arrPartMeasureLable}Cesium__namespace.defined(this._wallEntity)&&(this[e(1443)].entities.remove(this._wallEntity),delete this._wallEntity)}_drawCreatedHandler(e){const t=_0x5e32ae;this[t(3351)].text=this._map.getLangText("_正在计算体积")+"…";const i=this.positionsShow;setTimeout(()=>{this.calcVolume(i)},100)}_editPointHandler(e){this._drawCreatedHandler(e)}[_0x5e32ae(2437)](e){const t={_0x3cc4be:1083,_0x52ec83:3134,_0x561a46:1890,_0x247be4:907,_0x390a42:3798,_0x2bbf37:1498,_0x25c96b:4296,_0x47b818:3351,_0x318641:1260},i=_0x5e32ae;e&&(this.options.unit=e);const s={unit:this.options.unit,lang:this._map.lang,decimal:this.options.decimal};let n="";this[i(t._0x3cc4be)]&&this._measured.fillVolume>0&&(this._measured[i(t._0x52ec83)]=formatVolume(this[i(1498)].fillVolume,s),n+=(this.options.fillVolumeName||this[i(t._0x561a46)].getLangText("_填方体积"))+"："+this._measured[i(3134)]+`
`),this.showDigVolume&&this._measured.digVolume>0&&(this._measured[i(712)]=formatVolume(this._measured[i(t._0x247be4)],s),n+=(this[i(t._0x390a42)].digVolumeName||this[i(t._0x561a46)].getLangText("_挖方体积"))+"："+this[i(1498)].digVolumeStr+`
`),this.showArea&&this._measured.totalArea>0&&(this._measured.totalAreaStr=formatArea(this[i(t._0x2bbf37)][i(1199)],s),n+=(this.options.areaName||this._map[i(t._0x25c96b)](i(866)))+"："+this._measured.totalAreaStr),this[i(t._0x47b818)][i(t._0x318641)]=n}calcVolume(e){const t={_0x47f0a2:549},i={_0x32bcee:1329,_0x40e9b6:1890,_0x7e4361:3107},s=_0x5e32ae;!this._map||!e||e.length<3||(this.fire(EventType.start,{mtype:this.type,sourceTarget:this,positions:e},!![]),this._hasFX=!![],interPolygon({positions:e,scene:this._map.scene,exact:!![],...this.options})[s(t._0x47f0a2)](n=>{const o=s;!this._map||!this[o(3466)]||(n.has3dtiles?this._map.scene[o(i._0x32bcee)].depthTestAgainstTerrain=![]:!this._map.scene.globe.depthTestAgainstTerrain&&(this[o(i._0x40e9b6)][o(i._0x7e4361)].globe.depthTestAgainstTerrain=!![],this._depthTestAgainstTerrain_reset=!![]),this.showVolume(e,n))}))}showVolume(e,t){const i={_0x4bfa1f:4111,_0x564f5b:3964,_0xe507d4:3798,_0x5e9541:1329,_0x1421d8:1498,_0x58f40f:2180,_0x3dbed2:3584,_0x2df030:1571,_0x5a0a0c:2238,_0x970313:1443,_0xc8a18d:4084,_0x11992d:4056},s=_0x5e32ae;var n;this._jzmHeight=this.options.height??t[s(i._0x4bfa1f)],this[s(i._0x564f5b)]<t.minHeight&&(t.minHeight=this._jzmHeight),this.interPolygonObj=updateVolumeByMinHeight(t),this._minHeight=this[s(i._0xe507d4)].minHeight??this[s(3355)][s(i._0x4bfa1f)],this._maxHeight=this.options[s(2298)]??this[s(3355)].maxHeight;const o=Math[s(1382)](.3*Cesium__namespace.Math.chordLength(t.granularity,this._map.scene[s(i._0x5e9541)][s(3875)].maximumRadius));this._maxHeight-this._minHeight<o&&(this[s(960)]=this._minHeight+o);const c=updateVolume(this.interPolygonObj,this[s(3865)]);for(const h in c)this[s(i._0x1421d8)][h]=c[h];this.updateText(),this._measureLable[s(i._0x58f40f)]=centerOfMass(e,this.interPolygonObj.maxHeight),this.heightLabel&&this.showPointHeightLabel(e,this[s(3355)][s(4111)]),this[s(3579)][s(i._0x3dbed2)]=!![],this[s(2189)].perPositionHeight=![],this.entityGraphic.hierarchy=new Cesium__namespace.PolygonHierarchy(e),this.entityGraphic.height=new Cesium__namespace.CallbackProperty(h=>this.height,![]);const _=PolygonStyleConver[s(1268)](this[s(i._0x2df030)],{},!![]);_.hierarchy=new Cesium__namespace[s(i._0x5a0a0c)](e),Cesium__namespace.defined(this._wallEntity)&&this.dataSource[s(887)].remove(this._wallEntity),this._wallEntity=this[s(i._0x970313)].entities[s(i._0xc8a18d)]({polygon:_,show:this.show}),this._wallEntity._noMousePick=!![],this.bindPickId(this._wallEntity);const l={...c,sourceTarget:this,mtype:this.type,graphic:this};this.fire(EventType.change,l,!![]),this.fire(EventType[s(2384)],l,!![]),(n=this._promise)!==null&&n!==void 0&&n.resolve&&this._promise[s(i._0x11992d)](this)}[_0x5e32ae(674)](e,t){const i={_0x27100e:1890,_0x5ea6bb:3916},s={_0xd15ce:4296,_0xb61be1:1029,_0x2d509e:1890,_0x41581f:1930,_0x3ee29c:605},n=_0x5e32ae,o=this;if(Cesium__namespace.defined(this[n(2699)])&&this._arrPartMeasureLable.length>0){const _=this[n(2699)];if(_&&_.length>0)for(let l=0,h=_.length;l<h;l++)this[n(1464)](_[l]);delete this[n(2699)]}const c=[];for(let _=0;_<e.length;_++){const l=Math[n(1124)](getHeight(this[n(i._0x27100e)].scene,e[_]),t),h=Cesium__namespace.Cartographic.fromCartesian(e[_]),f=Cesium__namespace[n(i._0x5ea6bb)].fromRadians(h.longitude,h.latitude,l),m=this[n(3279)](this.labelHeightStyle,f);m.attr={value:l},c[n(3759)](m),m.showText=function(){const g=n,C=this.attr.value;let E=o._map[g(4296)](g(880))+"："+C[g(1029)](2)+o._map[g(s._0xd15ce)]("_米");if(o.offsetLabel){const P=C-o.height;P>0?E+=`
`+o._map.getLangText(g(605))+"："+P[g(s._0xb61be1)](2)+o._map.getLangText("_米")+"("+o[g(s._0x2d509e)][g(4296)](g(s._0x41581f))+")":E+=`
`+o[g(s._0x2d509e)].getLangText(g(s._0x3ee29c))+"："+Math.abs(P)[g(1029)](2)+o._map[g(4296)]("_米")+"("+o._map.getLangText("_面下")+")"}return this.text=E,E},m.showText()}this._arrPartMeasureLable=c}}register$4("volumeMeasure",VolumeMeasure);class VolumeDepthMeasure extends AreaMeasure{constructor(e={}){const t={_0x1e8efa:3110,_0x173635:2831,_0x25ee6c:2916,_0x39f16d:3952,_0x4b8318:515,_0x5460bd:2276,_0x480122:1656},i=_0x5e32ae;super(e),e._promise&&(this._promise=e[i(t._0x1e8efa)],delete e._promise),this.labelHeightStyle={...this.options.label||{},font_size:15,background:![]},Cesium__namespace.defined(e[i(t._0x173635)])&&(this.labelHeightStyle={...this[i(t._0x25ee6c)],...e.labelHeight}),this[i(1113)]=Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(getCesiumColor(e.cutColor,Cesium__namespace[i(2200)].RED.withAlpha(.5))),this[i(t._0x39f16d)]=Cesium__namespace.ColorGeometryInstanceAttribute[i(1575)](getCesiumColor(e.fillColor,Cesium__namespace.Color.YELLOW.withAlpha(.5))),this[i(3798)].offsetHeight=this.options[i(2954)]??0,this.polygonWallStyle={color:"#00ff00",opacity:.3,closeTop:![],closeBottom:!![],perPositionHeight:![],height:new Cesium__namespace.CallbackProperty(s=>this.minHeight,![]),extrudedHeight:new Cesium__namespace.CallbackProperty(s=>this.maxHeight,![])},Cesium__namespace[i(t._0x4b8318)](e.polygonWall)&&(this.polygonWallStyle={...this.polygonWallStyle,...e.polygonWall}),this.heightLabel=e.heightLabel??!![],this.offsetLabel=e.offsetLabel??![],this.showArea=e.showArea??!![],this.showFillVolume=e.showFillVolume??!![],this[i(t._0x5460bd)]=e.showDigVolume??!![],this[i(1205)]=e[i(3526)]??!![],this[i(t._0x480122)]=e.showPoly??!![],this._showWall=e[i(3907)]??![],this._hasFX=![]}get hasEdit(){return![]}get[_0x5e32ae(653)](){const e={_0x1e822e:2298,_0x474b24:2298},t=_0x5e32ae;return this._measured?this._measured[t(e._0x1e822e)]:this[t(e._0x474b24)]}get height(){return this._jzmHeight}set height(e){const t={_0x1f42bc:2699,_0x5b2d24:1498},i=_0x5e32ae;if(this._jzmHeight=e,e>this.maxHeight&&(this[i(2298)]=e),e<this[i(4111)]&&(this.minHeight=e),!this._hasFX)return;if(this.updateVolume(),this.updateText(),this._arrPartMeasureLable)for(let n=0;n<this[i(t._0x1f42bc)][i(3402)];n++)this._arrPartMeasureLable[n].showText();const s={...this[i(t._0x5b2d24)],sourceTarget:this,mtype:this.type,graphic:this};this[i(1404)](EventType.change,s,!![])}get[_0x5e32ae(4111)](){return this[_0x5e32ae(905)]||0}set[_0x5e32ae(4111)](e){const t={_0x5bf630:3205},i=_0x5e32ae;if(this._minHeight=e,!this._hasFX)return;this._measured&&(this[i(1498)].minHeight=e,this.updateVolume()),this[i(2437)]();const s={...this._measured,sourceTarget:this,mtype:this[i(t._0x5bf630)],graphic:this};this.fire(EventType.change,s,!![])}get maxHeight(){return this[_0x5e32ae({_0x52e269:960}._0x52e269)]||0}set maxHeight(e){this._maxHeight=e}get showBox(){return this._showBox}set[_0x5e32ae(3526)](e){const t={_0x362ad2:1205},i=_0x5e32ae;this[i(t._0x362ad2)]=e,this.updateVolume()}[_0x5e32ae(923)](){const e={_0x21c6fb:1443,_0x1d5650:887},t=_0x5e32ae;if(super._removeMeasureLabelAndEx(),Cesium__namespace[t(515)](this._arrPartMeasureLable)&&this._arrPartMeasureLable.length>0){const i=this[t(2699)];if(i&&i.length>0)for(let s=0,n=i.length;s<n;s++)this[t(1464)](i[s]);delete this[t(2699)]}Cesium__namespace[t(515)](this._wallEntity)&&(this[t(e._0x21c6fb)][t(e._0x1d5650)].remove(this._wallEntity),delete this._wallEntity)}_drawCreatedHandler(e){const t={_0x33f87a:4296,_0x4a2f8b:2864},i={_0x3eecb3:2770},s=_0x5e32ae;this._measureLable.text=this._map[s(t._0x33f87a)](s(t._0x4a2f8b))+"…";const n=this.positionsShow;(n==null?void 0:n.length)>3&&setTimeout(()=>{this[s(i._0x3eecb3)](n)},100)}_editPointHandler(e){this._drawCreatedHandler(e)}updateText(e){const t={_0x204633:1498,_0x5e92ef:3685,_0x26529b:907,_0x248911:1498,_0x1815a4:1199},i=_0x5e32ae;e&&(this.options[i(4059)]=e);const s={unit:this.options.unit,lang:this[i(1890)].lang,decimal:this[i(3798)].decimal};let n="";this.showFillVolume&&this._measured.fillVolume>0&&(this._measured.fillVolumeStr=formatVolume(this[i(t._0x204633)][i(t._0x5e92ef)],s),n+=(this.options.fillVolumeName||this._map.getLangText("_填方体积"))+"："+this[i(1498)].fillVolumeStr+`
`),this[i(2276)]&&this[i(1498)].digVolume>0&&(this._measured.digVolumeStr=formatVolume(this[i(1498)][i(t._0x26529b)],s),n+=(this.options.digVolumeName||this._map.getLangText("_挖方体积"))+"："+this._measured.digVolumeStr+`
`),this.showArea&&this[i(t._0x248911)][i(t._0x1815a4)]>0&&(this[i(1498)].totalAreaStr=formatArea(this._measured.totalArea,s),n+=(this.options.areaName||this._map.getLangText("_横切面积"))+"："+this._measured.totalAreaStr),this._measureLable.text=n}calcVolume(e){const t={_0x116d03:2476,_0x33d3c8:3205,_0x32ff85:934,_0x2a7bde:3107,_0x48f987:2890},i={_0x24d37c:1498,_0x54910b:575,_0x30eb13:934,_0x4da14e:3703,_0x195971:2297,_0x3d2645:887,_0x1d91c6:1404,_0x2a6879:2384,_0x3fb2c5:4056},s=_0x5e32ae;if(this._map){if(this[s(1404)](EventType[s(t._0x116d03)],{mtype:this[s(t._0x33d3c8)],sourceTarget:this,positions:e},!![]),this[s(3466)]=!![],this._measureLable.show=![],this._entity.show=![],this._entity_outlines)for(let n=0,o=this[s(t._0x32ff85)].length;n<o;n++){const c=this[s(t._0x32ff85)][n].polyline;c.show=![]}interPolygonByDepth({scene:this._map[s(t._0x2a7bde)],positions:e,splitNum:this.options.splitNum,cameraHeight:this.options[s(t._0x48f987)]}).then(n=>{const o=s;var c;if(this.isDestroy)return;if(this._measured=n,this._jzmHeight=this.options.height??n.minHeight,this._jzmHeight<n.minHeight&&(n.minHeight=this._jzmHeight),this._measured=this.updateVolume(n),this._minHeight=this.options.minHeight??this._measured.minHeight,this._maxHeight=this.options[o(2298)]??this[o(i._0x24d37c)].maxHeight,this.updateText(),this._measureLable[o(2180)]=centerOfMass(e,this[o(960)]),this._measureLable[o(i._0x54910b)]=!![],this.heightLabel&&this.showPointHeightLabel(e,this._minHeight),this._showPoly){if(this._entity.show=!![],this[o(934)])for(let l=0,h=this[o(i._0x30eb13)].length;l<h;l++){const f=this[o(934)][l].polyline;f.show=!![]}this[o(3579)]._noMousePick=!![],this.entityGraphic.perPositionHeight=![],this.entityGraphic.hierarchy=new Cesium__namespace.PolygonHierarchy(e),this.entityGraphic.height=new Cesium__namespace[o(i._0x4da14e)](l=>this.height,![])}if(this._showWall){const l=PolygonStyleConver.toCesiumVal(this.polygonWallStyle,{},!![]);l.hierarchy=new Cesium__namespace.PolygonHierarchy(e),this[o(i._0x195971)]=this[o(1443)][o(i._0x3d2645)].add({polygon:l}),this._wallEntity._noMousePick=!![],this.bindPickId(this._wallEntity)}const _={...this._measured,sourceTarget:this,mtype:this.type,graphic:this};this.fire(EventType.change,_,!![]),this[o(i._0x1d91c6)](EventType[o(i._0x2a6879)],_,!![]),(c=this._promise)!==null&&c!==void 0&&c[o(i._0x3fb2c5)]&&this._promise.resolve(this)})}}updateVolume(e){const t={_0x5f2c70:630,_0x365680:3798,_0x474e98:2709,_0x58aa35:3402},i=_0x5e32ae;!e&&(e=this._measured);const s=e.minHeight,n=this.height,o=e[i(t._0x5f2c70)].area,c=[],_=this[i(t._0x365680)].offsetHeight;let l=0,h=0;for(let f=0,m=e.count;f<m;f++){const g=e.positions[f];let C=g.height;if(C<s&&(C=s),C>n){if(l+=o*(C-n),this.showBox){const E=g.getOutline();c.push(new Cesium__namespace[i(t._0x474e98)]({geometry:new Cesium__namespace.PolygonOutlineGeometry({polygonHierarchy:new Cesium__namespace.PolygonHierarchy(E),extrudedHeight:C+_,height:n+_}),attributes:{color:this._cutColor}}))}}else if(C<n&&(h+=o*(n-C),this.showBox)){const E=g.getOutline();c.push(new Cesium__namespace.GeometryInstance({geometry:new Cesium__namespace.PolygonOutlineGeometry({polygonHierarchy:new Cesium__namespace[i(2238)](E),extrudedHeight:n+_,height:C+_}),attributes:{color:this._fillColor}}))}}return e.digVolume=l,e.fillVolume=h,this._primitive_boxs&&(this._layer.primitiveCollection.remove(this._primitive_boxs),delete this._primitive_boxs),this[i(3526)]&&c[i(t._0x58aa35)]>0&&(this[i(3921)]=new Cesium__namespace.Primitive({geometryInstances:c,appearance:new Cesium__namespace.PerInstanceColorAppearance({flat:!![],renderState:{lineWidth:1}}),asynchronous:!![]}),this._layer.primitiveCollection[i(4084)](this._primitive_boxs),this._primitive_boxs[i(3584)]=!![],this.bindPickId(this._primitive_boxs)),e}[_0x5e32ae(674)](e,t){const i={_0x4c9cee:1528},s={_0x6de13:1528,_0x1627bd:880,_0x4bf8e0:1304,_0x5430ef:1890,_0x27b70d:4296,_0x28cb6d:1029,_0x1f5590:4296,_0x68bb60:1930,_0x46ac62:1029,_0x7abb60:1260},n=_0x5e32ae,o=this,c=[];for(let _=0;_<e.length;_++){const l=Math.max(getHeight(this._map.scene,e[_]),t),h=Cesium__namespace.Cartographic.fromCartesian(e[_]),f=Cesium__namespace.Cartesian3.fromRadians(h.longitude,h.latitude,l),m=this._createLabel(this.labelHeightStyle,f);m[n(i._0x4c9cee)]={value:l},c.push(m),m.showText=function(){const g=n,C=this[g(s._0x6de13)][g(3427)];let E=o._map.getLangText(g(s._0x1627bd))+"："+C[g(1029)](2)+o[g(1890)].getLangText("_米");if(o[g(s._0x4bf8e0)]){const P=C-o[g(3865)];P>0?E+=`
`+o[g(s._0x5430ef)][g(s._0x27b70d)]("_高度")+"："+P[g(s._0x28cb6d)](2)+o._map.getLangText("_米")+"("+o._map[g(s._0x1f5590)](g(s._0x68bb60))+")":E+=`
`+o[g(1890)].getLangText("_高度")+"："+Math[g(3926)](P)[g(s._0x46ac62)](2)+o._map.getLangText("_米")+"("+o[g(1890)].getLangText("_面下")+")"}return this[g(s._0x7abb60)]=E,E},m.showText()}this._arrPartMeasureLable=c}}register$4("volumeDepthMeasure",VolumeDepthMeasure);class BillboardPrimitive extends BasePointPrimitive{get primitiveCollection(){const e=_0x5e32ae;var t;return(t=this._layer)===null||t===void 0?void 0:t[e(3393)]}get image(){return this.style.image}set image(e){this.style.image=e,this._primitive&&(this._primitive.image=e)}_showHook(e){const t=_0x5e32ae;this._primitive?this._primitive[t(575)]=e:e&&super._showHook(e)}_addedHook(e){const t={_0x20daf7:3327,_0x2ca3cb:3798,_0x1201e4:3002,_0x50c52c:736},i=_0x5e32ae;if(!this.show)return;this[i(t._0x20daf7)](this[i(t._0x2ca3cb)].position);const s=BillboardStyleConver.toCesiumVal(e,{show:this.show,position:this[i(2180)]});this[i(t._0x1201e4)]=this.primitiveCollection[i(4084)](s),this.style[i(t._0x50c52c)]&&this._addLabel()}_updateStyleHook(e,t){BillboardStyleConver.toCesiumVal(e,this.primitive)}_style2Json(e,t){return BillboardStyleConver.toJSON(e,t)}_updatePositionsHook(){const e={_0x324e5f:2788,_0x5090a4:3916},t=_0x5e32ae;this._primitive._billboardCollection&&(this._primitive.position=this.position,Cesium__namespace.defined(this.style[t(e._0x324e5f)])&&(this._primitive.alignedAxis=getCesiumValue(this.style.alignedAxis,Cesium__namespace[t(e._0x5090a4)])))}setOpacity(e){const t=_0x5e32ae;this.style.globalAlpha=e,this._primitive&&(this._primitive[t(2092)]=Cesium__namespace.Color[t(2995)][t(3518)](e)),this._updateLabelOpacity(e)}_getDrawEntityClass(e,t){return create$4(_0x5e32ae(2747),e)}}register$4("billboardP",BillboardPrimitive,!![]);class CloudPrimitive extends BasePointPrimitive{get[_0x5e32ae(930)](){const e=_0x5e32ae;var t;return(t=this[e(2873)])===null||t===void 0?void 0:t.cloudCollection}get[_0x5e32ae(775)](){return this.style.maximumSize}set maximumSize(e){const t={_0x3c44de:4114,_0x23f94e:3002},i=_0x5e32ae;this[i(t._0x3c44de)].maximumSize=e,this[i(t._0x23f94e)]&&(this[i(3002)].maximumSize=e)}get scale(){return this.style.scale}set scale(e){const t={_0xb296ed:3206},i=_0x5e32ae;this.style[i(t._0xb296ed)]=e,this._primitive&&(this._primitive.scale=e)}get[_0x5e32ae(869)](){return this.style.slice}set[_0x5e32ae(869)](e){const t=_0x5e32ae;this.style.slice=e,this._primitive&&(this[t(3002)].slice=e)}get brightness(){return this.style.brightness}set[_0x5e32ae(1310)](e){const t=_0x5e32ae;this[t(4114)].brightness=e,this._primitive&&(this._primitive.brightness=e)}get hasOpacity(){return![]}[_0x5e32ae(4158)](e){const t={_0x4dfc0f:3798,_0x114ab0:3002,_0x3b8464:930},i=_0x5e32ae;if(!this.show)return;this._forPositionProperty(this[i(t._0x4dfc0f)].position);const s=CloudStyleConver.toCesiumVal(e,{show:this[i(575)],position:this.position});this[i(t._0x114ab0)]=this[i(t._0x3b8464)].add(s),this.style[i(736)]&&this._addLabel()}_showHook(e){this._primitive?this._primitive.show=e:super._showHook(e)}_updateStyleHook(e,t){CloudStyleConver.toCesiumVal(e,this.primitive)}_style2Json(e,t){return CloudStyleConver.toJSON(e,t)}[_0x5e32ae(4119)](){this._primitive.position=this.position}_getDrawEntityClass(e,t){return this._getDrawPointEntityClass(e,t)}}register$4("cloud",CloudPrimitive,!![]);class LabelPrimitive extends BasePointPrimitive{get primitiveCollection(){var e;return(e=this._layer)===null||e===void 0?void 0:e.labelCollection}get text(){return this.style.text}set text(e){const t={_0x283d6d:3002,_0x531895:3002},i=_0x5e32ae;this.style.text=e,this[i(t._0x283d6d)]&&(this[i(t._0x531895)].text=e)}[_0x5e32ae(3961)](e){const t={_0x2528d3:3002},i=_0x5e32ae;this[i(t._0x2528d3)]?this[i(3002)][i(575)]=e:e&&super._showHook(e)}_addedHook(e){if(!this[_0x5e32ae({_0x2786f2:575}._0x2786f2)])return;const s=LabelStyleConver.toCesiumVal(this.style,{show:this.show,position:this.position},{},this.attr);this._primitive=this.primitiveCollection.add(s)}_updateStyleHook(e,t){const i={_0x5870d7:1528},s=_0x5e32ae;LabelStyleConver.toCesiumVal(e,this.primitive,this[s(i._0x5870d7)])}_style2Json(e,t){return LabelStyleConver.toJSON(e,t)}_updatePositionsHook(){this._primitive.position=this.position}[_0x5e32ae(4148)](e,t){return create$4(_0x5e32ae(736),e)}setOpacity(e){const t={_0x3bfec3:3002},i=_0x5e32ae;this[i(4114)][i(3252)]=e,this._primitive&&this.show&&LabelStyleConver[i(3913)](this[i(t._0x3bfec3)],e)}}register$4("labelP",LabelPrimitive,!![]);class ModelPrimitive extends BasePointPrimitive{constructor(e={}){super(e),this._readyPromise=Cesium__namespace.defer()}get czmObjectEx(){const e={_0x3a2dd7:4189,_0x536c93:2330},t=_0x5e32ae,i=[];return this._primitive_label&&i[t(3759)](this[t(e._0x3a2dd7)]),this._primitive_point&&i.push(this._primitive_point),this._primitive_billboard&&i.push(this[t(e._0x536c93)]),i}get scale(){const e=_0x5e32ae;return this[e(4114)][e(3206)]??1}set scale(e){const t={_0x4145b4:3206},i=_0x5e32ae;this[i(4114)][i(t._0x4145b4)]=e,this[i(3601)](this.style,{scale:e})}get[_0x5e32ae(3245)](){return this.style.scaleX??1}set[_0x5e32ae(3245)](e){const t=_0x5e32ae;this[t(4114)].scaleX=e,this.updateModelMatrix()}get[_0x5e32ae(3787)](){return this.style.scaleY??1}set scaleY(e){const t={_0xfd3798:3787},i=_0x5e32ae;this.style[i(t._0xfd3798)]=e,this.updateModelMatrix()}get scaleZ(){const e={_0x338d27:4114,_0x155ccb:517},t=_0x5e32ae;return this[t(e._0x338d27)][t(e._0x155ccb)]??1}set scaleZ(e){const t=_0x5e32ae;this.style.scaleZ=e,this[t(1537)]()}get readyPromise(){return this._readyPromise.promise}_showHook(e){const t=_0x5e32ae;this._primitive?this[t(3002)].show=e:e&&super._showHook(e)}[_0x5e32ae(4158)](e){const t={_0x315f15:2180,_0x56913d:1425,_0x364aa1:4114,_0x3af8ac:736,_0x28ec4e:575,_0x3e9229:1430,_0x415b9b:3821},i={_0x38c21f:3842,_0x377219:1404,_0x56eb7d:3352},s=_0x5e32ae;if(!this.show||!this._map)return;this._forPositionProperty(this.options[s(t._0x315f15)]);const n=ModelStyleConver.toCesiumVal(this.style);if(n[s(1221)]&&(Cesium__namespace[s(t._0x56913d)].fromGltfAsync({modelMatrix:this.modelMatrix,scene:this[s(1890)][s(3107)],marsOptions:{occlusion:this.style.marsOcclusion},...n}).then(_=>{const l=s;this.bindPickId(_),this._primitive=this.primitiveCollection.add(_),this._primitive[l(1979)].addEventListener(()=>{const h=l;var f;(this.style.runAnimations??!![])&&(f=_.activeAnimations)!==null&&f!==void 0&&f.addAll&&_.activeAnimations.addAll({loop:Cesium__namespace.ModelAnimationLoop[h(i._0x38c21f)],...this.style}),this[h(i._0x377219)](EventType.load,{drawtype:this.type,model:_,graphic:this},!![]),this[h(i._0x56eb7d)].resolve(this)})}),this[s(t._0x364aa1)][s(t._0x3af8ac)]&&this[s(2510)](),this.style.distanceDisplayCondition)){if(this.style.distanceDisplayPoint){var o;const _=PointStyleConver.toCesiumVal(this.style.distanceDisplayPoint,{show:this[s(t._0x28ec4e)],position:this.position});_[s(t._0x3e9229)]=this._getTargetDistanceDisplayCondition(this.style[s(t._0x415b9b)]),this._primitive_point=(o=this._layer)===null||o===void 0?void 0:o.pointCollection[s(4084)](_)}else if(this.style.distanceDisplayBillboard){var c;const _=BillboardStyleConver.toCesiumVal(this.style.distanceDisplayBillboard,{show:this.show,position:this.position});_.distanceDisplayCondition=this._getTargetDistanceDisplayCondition(this.style.distanceDisplayBillboard),this._primitive_billboard=(c=this._layer)===null||c===void 0?void 0:c.billboardCollection[s(4084)](_)}}}_removedHook(){const e=_0x5e32ae;if(super[e(2442)](),this._primitive_point){var t;(t=this._layer)===null||t===void 0||t[e(2795)].remove(this[e(1102)]),delete this._primitive_point}if(this._primitive_billboard){var i;(i=this[e(2873)])===null||i===void 0||i.billboardCollection.remove(this._primitive_billboard),delete this._primitive_billboard}}_updateStyleHook(e,t){const i={_0x213a2d:1221,_0x6c5b0c:515},s=_0x5e32ae;if(t[s(i._0x213a2d)]){this.redraw(e);return}ModelStyleConver.toCesiumVal(e,this[s(3150)]),(Cesium__namespace[s(515)](t[s(3977)])||Cesium__namespace.defined(t.pitch)||Cesium__namespace[s(i._0x6c5b0c)](t.roll)||Cesium__namespace.defined(t.scale)||Cesium__namespace[s(i._0x6c5b0c)](t.scaleX)||Cesium__namespace.defined(t.scaleY)||Cesium__namespace.defined(t.scaleZ))&&(this._primitive.modelMatrix=this.modelMatrix)}_style2Json(e,t){return ModelStyleConver.toJSON(e,t)}_updatePositionsHook(){const e=_0x5e32ae;this._primitive.modelMatrix=this.modelMatrix,this._primitive_point&&(this._primitive_point.position=this.position),this._primitive_billboard&&(this._primitive_billboard[e(2180)]=this.position)}_getTargetDistanceDisplayCondition(e){const t=_0x5e32ae;let i;return this.style.distanceDisplayCondition instanceof Cesium__namespace.DistanceDisplayCondition?i=this.style.distanceDisplayCondition.far:this.style[t(3041)]&&(i=this.style.distanceDisplayCondition_far),new Cesium__namespace.DistanceDisplayCondition(e.distanceDisplayCondition_near??i,e[t(3041)]??Number.MAX_VALUE)}setOpacity(e){const t={_0x57c8bd:4114},i=_0x5e32ae;this[i(t._0x57c8bd)].globalAlpha=e,this._primitive&&ModelStyleConver.setOpacity(this._primitive,e),this._updateLabelOpacity(e)}_getDrawEntityClass(e,t){return create$4("model",e)}}register$4(_0x5e32ae(3364),ModelPrimitive,!![]);class CirclePrimitive extends BasePointPrimitive{get[_0x5e32ae(2776)](){return Math.PI*2*this.radius}get[_0x5e32ae(1451)](){const e={_0x568ead:3194},t=_0x5e32ae,i=this[t(e._0x568ead)];return Math.PI*i*i}get radius(){const e={_0x42bb14:3194},t=_0x5e32ae;return this[t(4114)][t(e._0x42bb14)]}set radius(e){this.style.radius=e,this._updateStyleHook(this.style,{radius:e})}get outlinePositions(){return this[_0x5e32ae(2462)]()}[_0x5e32ae(1332)](e){return CircleStyleConver.toCesiumVal(e)}_style2Json(e,t){return CircleStyleConver.toJSON(e,t)}_createGeometryInstance(e,t){const i={_0x426c9c:3865,_0x3e2c98:3865,_0x495f88:4114,_0x1073d6:3515},s=_0x5e32ae;var n;e[s(4064)]=this.position,e[s(i._0x426c9c)]=e[s(i._0x3e2c98)]??((n=this.point)===null||n===void 0?void 0:n.alt)??0,Cesium__namespace.defined(this[s(i._0x495f88)].diffHeight)&&(e[s(2607)]=e.height+this[s(4114)].diffHeight);const o=t?Cesium__namespace[s(i._0x1073d6)]:Cesium__namespace.CircleGeometry;return new Cesium__namespace[s(2709)]({id:this.id,geometry:new o(e),attributes:this.options.attributes})}_getPolylineOutlinePositions(){return[this.getOutlinePositions(![])]}[_0x5e32ae(531)](e,t,i){return cartesians2lonlats(this.getOutlinePositions(e,t),i)}getOutlinePositions(e=!![],t){const i={_0x254cac:4114,_0x48cbe4:4005},s=_0x5e32ae,n=getEllipseOuterPositions({position:this.position,radius:this.radius,granularity:this.style.granularity,count:t});if(e&&n){var o;n.push(n[0]),(this.style.outlineWidth>4||((o=this[s(i._0x254cac)][s(2755)])===null||o===void 0?void 0:o[s(i._0x48cbe4)])>4)&&n[s(3759)](n[1])}return n}[_0x5e32ae(3576)](e={}){const t=_0x5e32ae;return this._map?(e.radius=this.radius*(e.scale||1.8),this[t(1890)].flyToPoint(this.position,e)):Promise.resolve(![])}getRectangle(e){const t=this.getOutlinePositions(![],1);return!t||t.length===0?void 0:getRectangle(t,e==null?void 0:e.isFormat)}[_0x5e32ae(1721)](e){const t={_0x48e9f7:1426,_0x580538:2048},i=_0x5e32ae;return e=LngLatPoint[i(t._0x48e9f7)](e)[i(t._0x580538)](),e=setPositionsHeight(e,this.height),Cesium__namespace.Cartesian3.distance(this.position,e)<=this.radius}_getDrawEntityClass(e,t){return create$4("circle",e)}}register$4("circleP",CirclePrimitive,!![]);class PlanePrimitive extends BasePointPrimitive{get[_0x5e32ae(2294)](){const e={_0x42c7f7:588,_0x556564:3651,_0x3e76c1:3501,_0x104265:1567,_0x349c2d:4102,_0x5cd71f:4102,_0x5a12b3:2663},t=_0x5e32ae;var i,s,n;if(this.options.modelMatrix)return this[t(3798)].modelMatrix;const o=super.modelMatrix;if(!this.position)return Cesium__namespace.Matrix4[t(2405)];const c=PlaneStyleConver[t(1268)](this[t(4114)]),_=this.style[t(e._0x42c7f7)]||((i=c[t(659)])===null||i===void 0?void 0:i[t(2337)]),l=new Cesium__namespace.Cartesian3(((s=c[t(2535)])===null||s===void 0?void 0:s.x)??1,((n=c.dimensions)===null||n===void 0?void 0:n.y)??1,1);if(_===Cesium__namespace.Cartesian3[t(2620)]||_==="x"){var h,f;const g=Cesium__namespace.Matrix4[t(e._0x556564)](Cesium__namespace.Matrix3[t(e._0x3e76c1)](Cesium__namespace.Math[t(e._0x104265)](90)));Cesium__namespace[t(e._0x349c2d)].multiply(o,g,o),l.x=((h=c[t(2535)])===null||h===void 0?void 0:h.y)??1,l.y=((f=c.dimensions)===null||f===void 0?void 0:f.x)??1,l.z=1}else if(_===Cesium__namespace.Cartesian3.UNIT_Y||_==="y"){const g=Cesium__namespace.Matrix4[t(3651)](Cesium__namespace.Matrix3.fromRotationX(Cesium__namespace.Math[t(1567)](90)));Cesium__namespace[t(e._0x349c2d)].multiply(o,g,o)}const m=Cesium__namespace.Matrix4.fromScale(l);return Cesium__namespace[t(e._0x5cd71f)][t(e._0x5a12b3)](o,m,o),o}_conversionStyle(e){return PlaneStyleConver.toCesiumVal(e)}_style2Json(e,t){return PlaneStyleConver[_0x5e32ae(3852)](e,t)}[_0x5e32ae(485)](e,t){const i={_0x4dc408:3798},s=_0x5e32ae,n=t?Cesium__namespace.PlaneOutlineGeometry:Cesium__namespace.PlaneGeometry;return new Cesium__namespace.GeometryInstance({id:this.id,geometry:new n(e),modelMatrix:this.modelMatrix,attributes:this[s(i._0x4dc408)][s(693)]})}_getDrawEntityClass(e,t){return create$4(_0x5e32ae(659),e)}}register$4("planeP",PlanePrimitive,!![]);class BoxPrimitive extends BasePointPrimitive{constructor(e={}){const t=_0x5e32ae;super(e),this.style[t(565)]=this.style[t(565)]??!![]}_conversionStyle(e){return BoxStyleConver.toCesiumVal(e)}[_0x5e32ae(3978)](e,t){return BoxStyleConver.toJSON(e,t)}_createGeometryInstance(e,t){const i={_0x38730c:2709},s=_0x5e32ae,n=t?Cesium__namespace.BoxOutlineGeometry:Cesium__namespace.BoxGeometry;return new Cesium__namespace[s(i._0x38730c)]({id:this.id,geometry:n.fromDimensions(e),modelMatrix:this.modelMatrix,attributes:this.options.attributes})}[_0x5e32ae(4148)](e,t){return create$4(_0x5e32ae(630),e)}}register$4("boxP",BoxPrimitive,!![]);class CylinderPrimitive extends BasePointPrimitive{constructor(e={}){const t={_0x2efbb7:565},i=_0x5e32ae;super(e),this.style[i(t._0x2efbb7)]=this.style.closed??!![]}_conversionStyle(e){return CylinderStyleConver.toCesiumVal(e)}_style2Json(e,t){return CylinderStyleConver.toJSON(e,t)}_createGeometryInstance(e,t){const i={_0x240fb2:1848,_0x461d05:2294},s=_0x5e32ae,n=t?Cesium__namespace[s(i._0x240fb2)]:Cesium__namespace[s(3481)];return new Cesium__namespace.GeometryInstance({id:this.id,geometry:new n(e),modelMatrix:e[s(i._0x461d05)]||this.modelMatrix,attributes:this.options[s(693)]})}_getDrawEntityClass(e,t){return create$4(_0x5e32ae(1989),e)}}register$4(_0x5e32ae(2904),CylinderPrimitive,!![]);class ConeTrackPrimitive extends CylinderPrimitive{constructor(e={}){const t=_0x5e32ae;super(e),e.targetPosition&&(this[t(589)]=e[t(589)])}get hasEdit(){return![]}get targetPosition(){return this[_0x5e32ae(3682)]}set targetPosition(e){const t={_0x5cab56:938,_0x2b8b2f:1426},i=_0x5e32ae;this[i(t._0x5cab56)]=LngLatPoint[i(t._0x2b8b2f)](e),this._targetPosition=this._targetPoint.toCartesian(),this.czmObject&&this._updatePositionsHook()}get targetPoint(){return this._targetPoint}get angle(){return this.style.angle}set[_0x5e32ae(1314)](e){this.style.angle=e}_createGeometryInstance(e,t){const i={_0x231cad:1890,_0x2f1de6:2776,_0x9dc9df:3916,_0xbf5c5:4114,_0x6a4c80:1567,_0x5e4aa3:1567,_0x525212:1286,_0x3fb30f:515},s=_0x5e32ae,n=this.position,o=getPositionValue(this[s(589)],this[s(i._0x231cad)].clock.currentTime);let c,_;return o?(e.length=Cesium__namespace[s(3916)][s(i._0x2f1de6)](n,o),_=Cesium__namespace.Cartesian3.midpoint(n,o,new Cesium__namespace[s(i._0x9dc9df)]),c=getHeadingPitchRollForLine(o,n)):(e.length=this[s(i._0xbf5c5)].length,c=new Cesium__namespace.HeadingPitchRoll(Cesium__namespace[s(1286)][s(i._0x6a4c80)](this[s(3977)]),Cesium__namespace.Math[s(i._0x5e4aa3)](this.pitch),Cesium__namespace[s(i._0x525212)][s(1567)](this.roll)),_=getPositionByHprAndLen(n,c,e.length/2)),e.modelMatrix=Cesium__namespace[s(2911)].headingPitchRollToFixedFrame(_,c),Cesium__namespace[s(i._0x3fb30f)](this.style[s(1314)])&&(e.bottomRadius=e.length*Math.cos(Cesium__namespace[s(i._0x525212)].toRadians(90-this.angle))),super._createGeometryInstance(e,t)}}register$4("coneTrackP",ConeTrackPrimitive,!![]);class EllipsoidPrimitive extends BasePointPrimitive{constructor(e={}){const t={_0x48d152:4114,_0x2f43c9:565},i=_0x5e32ae;super(e),this.style.closed=this[i(t._0x48d152)][i(t._0x2f43c9)]??!![]}[_0x5e32ae(1332)](e){return EllipsoidStyleConver.toCesiumVal(e)}_style2Json(e,t){return EllipsoidStyleConver.toJSON(e,t)}_createGeometryInstance(e,t){const i=t?Cesium__namespace.EllipsoidOutlineGeometry:Cesium__namespace.EllipsoidGeometry;return new Cesium__namespace.GeometryInstance({id:this.id,geometry:new i(e),modelMatrix:this.modelMatrix,attributes:this.options.attributes})}_getDrawEntityClass(e,t){return create$4("ellipsoid",e)}}register$4("ellipsoidP",EllipsoidPrimitive,!![]);class WallPrimitive extends BasePolyPrimitive{[_0x5e32ae(485)](e,t){const i={_0xc17e8f:2436,_0x4e5459:3984,_0x2e6460:3611},s=_0x5e32ae;var n;let o=this[s(i._0xc17e8f)];const c=this.points,_=c.length;let l=new Array(_),h=new Array(_);for(let m=0;m<_;m++){const g=c[m][s(i._0x4e5459)];l[m]=g,h[m]=g+Number(this[s(4114)].diffHeight||100)}this.style.closure&&((n=o)===null||n===void 0?void 0:n[s(3402)])>0&&(o=o.concat(o[0]),l=l[s(i._0x2e6460)](l[0]),h=h[s(i._0x2e6460)](h[0]));const f=t?Cesium__namespace.WallOutlineGeometry:Cesium__namespace.WallGeometry;return new Cesium__namespace.GeometryInstance({id:this.id,geometry:new f({...e,positions:o,maximumHeights:h,minimumHeights:l}),attributes:this.options.attributes})}[_0x5e32ae(1332)](e){return WallStyleConver.toCesiumVal(e)}_style2Json(e,t){return WallStyleConver.toJSON(e,t)}_getDrawEntityClass(e,t){return create$4(_0x5e32ae(3795),e)}}register$4(_0x5e32ae(2806),WallPrimitive);class CorridorPrimitive extends BasePolyPrimitive{_createGeometryInstance(e,t){const i={_0x2d10a8:2436,_0x193717:1578},s=_0x5e32ae;this._updateDiffHeight(e),e[s(i._0x2d10a8)]=this.positions;const n=t?Cesium__namespace.CorridorOutlineGeometry:Cesium__namespace[s(i._0x193717)];return new Cesium__namespace.GeometryInstance({id:this.id,geometry:new n(e),attributes:this.options.attributes})}[_0x5e32ae(1332)](e){return CorridorStyleConver[_0x5e32ae(1268)](e)}_style2Json(e,t){return CorridorStyleConver.toJSON(e,t)}_getDrawEntityClass(e,t){return create$4(_0x5e32ae({_0x438194:2286}._0x438194),e)}}register$4("corridorP",CorridorPrimitive);class PolylineVolumePrimitive extends BasePolyPrimitive{constructor(e={}){const t={_0x1de601:565},i=_0x5e32ae;super(e),this[i(4114)].closed=this.style[i(t._0x1de601)]??!![]}_createGeometryInstance(e,t){const i=_0x5e32ae,s=t?Cesium__namespace[i(618)]:Cesium__namespace.PolylineVolumeGeometry;return new Cesium__namespace.GeometryInstance({id:this.id,geometry:new s({...e,polylinePositions:this.positions,shapePositions:e.shape}),attributes:this[i(3798)].attributes})}[_0x5e32ae(1332)](e){return PolylineVolumeStyleConver.toCesiumVal(e)}_style2Json(e,t){return PolylineVolumeStyleConver.toJSON(e,t)}_getDrawEntityClass(e,t){return create$4("polylineVolume",e)}}register$4("polylineVolumeP",PolylineVolumePrimitive);class RectanglePrimitive extends BasePolyPrimitive{constructor(e={}){const t=_0x5e32ae;super(e),e[t(1323)]&&(this.rectangle=e.rectangle)}get rectangle(){return!this[_0x5e32ae(2854)]&&this.positions&&(this._rectangle=Cesium__namespace.Rectangle.fromCartesianArray(this.positions)),this._rectangle}set[_0x5e32ae(1323)](e){this._rectangle=e}get outlinePositions(){const e={_0x5b3273:1286,_0x32cb94:4114},t=_0x5e32ae;let i;return Cesium__namespace.defined(this.style.rotationDegree)?i=Cesium__namespace[t(e._0x5b3273)].toRadians(this[t(e._0x32cb94)].rotationDegree):Cesium__namespace.defined(this.style.rotation)&&(i=this.style.rotation),getRectangleOuterPositions({rectangle:this.rectangle,rotation:i,height:this[t(e._0x32cb94)].height})}get distance(){return getDistance(this.outlinePositions,!![])}get area(){return getSurfaceArea(this[_0x5e32ae(466)])}get center(){const e=_0x5e32ae,t=this.rectangle;return this[e(1323)]?Cesium__namespace.Cartographic.toCartesian(Cesium__namespace.Rectangle.center(t)):null}[_0x5e32ae(4119)](){const e={_0x33b748:3324},t=_0x5e32ae;return this.rectangle=Cesium__namespace[t(e._0x33b748)].fromCartesianArray(this.positions),super._updatePositionsHook()}_createGeometryInstance(e,t){const i={_0x4e6f8a:1323,_0x27d751:693},s=_0x5e32ae;this._updateDiffHeight(e,!![]),e[s(i._0x4e6f8a)]=this.rectangle;const n=t?Cesium__namespace.RectangleOutlineGeometry:Cesium__namespace.RectangleGeometry;return new Cesium__namespace[s(2709)]({id:this.id,geometry:new n(e),attributes:this.options[s(i._0x27d751)]})}_conversionStyle(e){return RectangleStyleConver[_0x5e32ae(1268)](e)}[_0x5e32ae(3978)](e,t){return RectangleStyleConver[_0x5e32ae(3852)](e,t)}[_0x5e32ae(879)](e){const t={_0x2dc3d8:1594},i=_0x5e32ae;return{type:"Polygon",coordinates:[this.getCoordinates(e==null?void 0:e[i(t._0x2dc3d8)])]}}[_0x5e32ae(2987)](){return[this.outlinePositions]}[_0x5e32ae(3879)](e){const t={_0xedf9f8:3937},i=_0x5e32ae,s=this.rectangle;return e!=null&&e[i(t._0xedf9f8)]?formatRectangle(s):s}isInPoly(e){const t={_0x3a0f44:1323},i=_0x5e32ae;return Cesium__namespace.Rectangle[i(3068)](this[i(t._0x3a0f44)],LngLatPoint.parse(e).toCartographic())}_getDrawEntityClass(e,t){return create$4("rectangle",e)}_updateDrawEntityToThis(){super._updateDrawEntityToThis(),this._updatePositionsHook()}}register$4("rectangleP",RectanglePrimitive);const nullColor=new Cesium__namespace[_0x5e32ae(2200)](0,0,0,.01);class PolygonPrimitive extends BasePolyPrimitive{get[_0x5e32ae(4064)](){return this.centerOfMass}get distance(){return getDistance(this._positions,!![])}get positions(){return this._positions}set positions(e){const t={_0x492153:4114,_0x294ee6:2530,_0x358b8b:3123,_0x32e5c3:3123},i=_0x5e32ae;if(e){if(e.length>0&&Array.isArray(e[0])&&e[0].length>0){const s=e[0][0];Array.isArray(s)&&isNumber(s[0])?(this._hierarchy=getPolygonHierarchy(e,this[i(t._0x492153)].height||this[i(4114)][i(2554)]||this.style[i(t._0x294ee6)]),e=this._hierarchy.positions):s instanceof Cesium__namespace[i(3916)]&&(this._hierarchy=getPolygonHierarchy2(e),e=this[i(t._0x358b8b)].positions)}super[i(2436)]=e,this[i(t._0x32e5c3)]&&this._positions&&(this._hierarchy[i(2436)]=this._positions)}}_createGeometryInstance(e,t){const i={_0x30f34b:2238,_0x2fb50b:693},s=_0x5e32ae;this._updateDiffHeight(e),this._hierarchy?e.polygonHierarchy=this._hierarchy:e.polygonHierarchy=new Cesium__namespace[s(i._0x30f34b)](this[s(2436)]);const n=t?Cesium__namespace.PolygonOutlineGeometry:Cesium__namespace.PolygonGeometry;return new Cesium__namespace.GeometryInstance({id:this.id,geometry:new n(e),attributes:this.options[s(i._0x2fb50b)]})}_conversionStyle(e){let t=PolygonStyleConver.toCesiumVal(e);return t=this._bindExType(t),t}_bindExType(e){const t={_0x29fe1e:4083,_0x35ba85:1528,_0x56b62e:3865},i=_0x5e32ae,s=this[i(3798)].buildings||this._layer.options.buildings;if(s&&(s.enabled??!![])){if(s.bottomHeight){let l;isNumber(s.bottomHeight)?l=s.bottomHeight:isString(s[i(t._0x29fe1e)])&&(l=Number(this.attr[s.bottomHeight]||0)),e[i(3865)]=l}const o=Number(this[i(t._0x35ba85)][s[i(3191)]]||1);let c;isNumber(s.height)?c=s.height:isString(s.height)?c=this.attr[s.height]||c:c=3.5;const _=e[i(t._0x56b62e)]||0;e[i(2607)]=_+o*c}if(this.options.dth||this._layer.options.dth){const o=this._getColorByColorMaterial(e,![]);!Cesium__namespace.defined(o)&&(e[i(2092)]=nullColor),e.classification=!![],!Cesium__namespace.defined(this.style[i(3865)])&&(e.perPositionHeight=![]),e.zIndex=99}return e}updateHeight(e){const t={_0x4d557d:4102},i=_0x5e32ae,s=6378137;for(let n=0,o=this.primitiveCollection.length;n<o;n++){const c=this.primitiveCollection.get(n),_=(s+e)/(s+this.style.height),l=Cesium__namespace[i(t._0x4d557d)][i(3160)](new Cesium__namespace[i(3916)](_,_,_));c.modelMatrix=l}}[_0x5e32ae(3978)](e,t){return PolygonStyleConver.toJSON(e,t)}_getGeoJsonGeometry(e){const t=_0x5e32ae;return{type:t(2056),coordinates:[this.getCoordinates(e==null?void 0:e[t(1594)])]}}[_0x5e32ae(2987)](){return this[_0x5e32ae(3123)]?getHierarchyVal(this._hierarchy):[this.positions]}[_0x5e32ae(4148)](e,t){return create$4("polygon",e)}_startEditingHook(e){const t={_0x1b5ead:3123},i=_0x5e32ae;this._hierarchy&&(e._hierarchy=this[i(t._0x1b5ead)])}}register$4("polygonP",PolygonPrimitive);class FrustumPrimitive extends BasePointPrimitive{constructor(e={}){const t=_0x5e32ae;super(e),this.style[t(565)]=this.style[t(565)]??!![],e[t(589)]&&(this.targetPosition=e.targetPosition)}get targetPosition(){return this[_0x5e32ae({_0x478f56:3682}._0x478f56)]}set[_0x5e32ae(589)](e){const t={_0x313a44:3682,_0x1e698a:575},i=_0x5e32ae;this._targetPoint=LngLatPoint.parse(e),this[i(t._0x313a44)]=this._targetPoint.toCartesian(),this.isAdded&&this[i(t._0x1e698a)]&&(this._removedHook(),this._addedHook(this.style))}get targetPoint(){return this._targetPoint}get angle(){return this[_0x5e32ae(4114)].angle}set angle(e){const t={_0x1111ea:1314},i=_0x5e32ae;this.style[i(t._0x1111ea)]=e}get angle2(){return this.style.angle2??this.style.angle}set angle2(e){this.style.angle2=e}get groundPosition(){return getRayEarthPosition(this[_0x5e32ae({_0x2483ae:2180}._0x2483ae)],this._orientation)}get defaultVertexFormat(){const e={_0xcead42:912},t=_0x5e32ae;return Cesium__namespace[t(2920)][t(e._0xcead42)]}updateModelMatrix(){}_conversionStyle(e){return CylinderStyleConver.toCesiumVal(e)}_style2Json(e,t){return CylinderStyleConver.toJSON(e,t)}_createGeometryInstance(e,t){const i={_0x1b7416:586,_0x4c130e:2709},s=_0x5e32ae;this._update();const n=t?Cesium__namespace.FrustumOutlineGeometry:Cesium__namespace[s(i._0x1b7416)];return new Cesium__namespace[s(i._0x4c130e)]({id:this.id,geometry:new n({...e,origin:this.position,orientation:this._orientation,frustum:this._frustum}),attributes:this.options.attributes})}_update(e){const t={_0x2c0a52:3779,_0x14bfea:3360,_0x21ee2d:2988,_0x2bbba0:1984,_0x4bb3c3:1286,_0x179377:4175,_0x147f01:3402,_0x17479f:1567,_0x18ee23:1286},i=_0x5e32ae,s=getPositionValue(this.position,e);if(!s){this._cylinderPosition=void 0;return}if(this.options[i(2792)]){const o=this[i(3798)].camera,c=new Cesium__namespace.Cartesian3,_=new Cesium__namespace[i(3768)],l=new Cesium__namespace.Quaternion,h=o[i(t._0x2c0a52)],f=o[i(3562)],m=Cesium__namespace.Cartesian3.negate(o.rightWC,c);Cesium__namespace.Matrix3.setColumn(_,0,m,_),Cesium__namespace[i(3768)][i(t._0x14bfea)](_,1,f,_),Cesium__namespace.Matrix3.setColumn(_,2,h,_),this._orientation=Cesium__namespace[i(t._0x21ee2d)].fromRotationMatrix(_,l),this._frustum=o.frustum,this.heading=Cesium__namespace.Math[i(t._0x2bbba0)](o.heading),this[i(2625)]=Cesium__namespace[i(t._0x4bb3c3)].toDegrees(o.pitch),this.roll=Cesium__namespace.Math.toDegrees(o[i(t._0x179377)]);return}const n=getPositionValue(this.targetPosition,e);if(n){this._frustumFar=Cesium__namespace.Cartesian3.distance(s,n);const o=getHeadingPitchRollForLine(s,n);this.heading=Cesium__namespace.Math.toDegrees(o.heading),this.pitch=Cesium__namespace.Math[i(1984)](o.pitch),this.roll=Cesium__namespace.Math.toDegrees(o.roll),this._orientation=Cesium__namespace[i(2911)][i(4043)](s,o)}else{this._frustumFar=-this.style[i(t._0x147f01)];const o=new Cesium__namespace.HeadingPitchRoll(Cesium__namespace.Math.toRadians(this.heading),Cesium__namespace[i(t._0x4bb3c3)][i(t._0x17479f)](this.pitch),Cesium__namespace[i(t._0x18ee23)].toRadians(this.roll));this._orientation=Cesium__namespace[i(2911)].headingPitchRollQuaternion(s,o)}this._frustum=new Cesium__namespace[i(1741)]({fov:Cesium__namespace.Math.toRadians(this[i(1314)]*2||.01),aspectRatio:this.angle2/this.angle,near:.01,far:this._frustumFar})}getRayEarthPositions(e){const t={_0x6550f7:3977,_0x37fb28:2548,_0x170dc1:1314,_0x1b3a7b:4175},i=_0x5e32ae,s=getPositionValue(this.position,e),n=Cesium__namespace.Math[i(1567)](this[i(t._0x6550f7)]),o=Cesium__namespace.Math.toRadians(this.pitch+this.angle2),c=Cesium__namespace.Math.toRadians(this.pitch-this[i(t._0x37fb28)]),_=Cesium__namespace[i(1286)][i(1567)](this.roll+this[i(t._0x170dc1)]),l=Cesium__namespace.Math.toRadians(this[i(t._0x1b3a7b)]-this.angle),h=getRayEarthPosition(s,new Cesium__namespace.HeadingPitchRoll(n,o,_),!![]),f=getRayEarthPosition(s,new Cesium__namespace.HeadingPitchRoll(n,o,l),!![]),m=getRayEarthPosition(s,new Cesium__namespace.HeadingPitchRoll(n,c,l),!![]),g=getRayEarthPosition(s,new Cesium__namespace[i(3064)](n,c,_),!![]);return[h,f,m,g]}_getDrawEntityClass(e,t){return this._getDrawPointEntityClass(e,t)}}register$4("frustum",FrustumPrimitive,!![]);var ConeGlowCircleOuterMaterial=_0x5e32ae(1131),ConeGlowCylinderGaussMaterial=`uniform vec4 u_color;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  float powerRatio = 1. / (fract(czm_frameNumber / 30.0) + 1.);
  float alpha = pow(1. - st.t, powerRatio);
  vec4 color = vec4(u_color.rgb, alpha * u_color.a);
  material.diffuse = color.rgb;
  material.alpha = color.a * globalAlpha;
  return material;
}
`,ConeGlowGradientMaterial=_0x5e32ae(3807),ConeGlowRingScanMaterial=_0x5e32ae(3363);const DEF_STYLE$g={height:1e3,radius:100,color:"#00ffff"},particleImage=new Image;particleImage.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAEACAYAAADSoXR2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjExQTg0NDEyMDEzQjExRUFBNDhBRjhGMUMzOUUyNTU0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjExQTg0NDEzMDEzQjExRUFBNDhBRjhGMUMzOUUyNTU0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTFBODQ0MTAwMTNCMTFFQUE0OEFGOEYxQzM5RTI1NTQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MTFBODQ0MTEwMTNCMTFFQUE0OEFGOEYxQzM5RTI1NTQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz41vRwAAAAE90lEQVR42uydyW4UMRCG3T2dgYSAEGs4sp44cCJBcGUJbwCvALwWPAI8ABwAiUVwgLBdkEikJEiAGMhkZqhfU1aa1sy0g+yaJPyWSupOpPjz0uVyucrJer2eG2fJ3ZgLAQhAgC0PgN8XIlkqgGLE75oih0WmRVZEvop0rHog18rnRe6IzInsthyCXFt+TuSKyGmRXZZDgK5eFrkv8l7kiUhrxN/JSo3pigSvcNmI1bCh3b5LK2+NqHyvyEF9x3z5HgqRRViOAXhW5JrCoNdei/y20gMYxhmRSyIXRY6JTMT4DENLW+SdyD19x/NajDmwmYIW79Hnn+MA4GJEAAIQgABJbMJB+n5Sl9zWZvR9DABUfkJkVt8fi3zUldAEoKl24Y2S1fPZEmBdZFHkkb4vxTLRQ5djbyUf0ncYrD/UADUB8MZno2Q19yx7gIqIAAQgAAEIQIAtYZT+85LvRnjQCoPKR3rQUgN4Y3ZeK30g8qps0qeeAzDn4TWD9+ySG+BBS90DaGnVg9a2tgnR4il9/jkOACoiAhCAAASIZpAAFl6yulO0JACo/IDrn6CedP1zxOciv6wAYNnAP3RVBeWtJQCWzG8iL/X9g4vkqNzMctzUXtintt2KM/aS+bmQaY90rb8CF6tSKiICEIAABCAAAQiwbfcFIWVCbUcc9bZDLKiYAKj4uOv7Bb+ILLj+8W7PCgC7Jhzv44Qdh9yrru8V61jPgd645gD2io+15RiC5ZA5ENNPmGmDmtrta9YAVEQE2FlrQUM/J6efU8cSAD87ojodBaccS6kgiiErGiq/qe93XT+3oGU5BJnbyKrIUs6BQZoQUEcrQ7CYagiGqeKiMgnXLXsg5uJUm/RQJKy8fGS7PMw6SgVQPrJFGZr0kCfUL/7IFjIzrLGpemBQ0kPbehL6I9vMjUh6oEVEAAIQgAAEIAABdpyj0qcK71YrqGUJANNrv+sHOcAiRpDDM1cTY1BEHk7kqyP/2Ac5vLEEQEG8aDnIoTb5ObZRWg5ywG5o1dX4ClNYxT7IISgJPsXGpLut9MCWU0S5bqkmdAa3LQEwcZDAfkZ3tthQfkwNkVeeD6kiuaUabcp6DpS9YyalrAdQ8bT1EFQVUabarND9fNuyB2gREYAABCAAAQhAAAIQoM770UgBXARCIr/koDogVlzgrWuxemBKd0m4JnBed0+5ZQ9gn3BK5LK+P4y5ewoB8DFiKO91COLFfwVuTCZV1hSoYw1APZCsFIkbN1Haaa87wwiKQe6eT27AEX6esPVVd8/kOOdAz/oz9FE0p+uGIKUeqE5C8xgSKiICEIAABCAAAQhAAAIQgAAEIAABCECA6AA+sbkREyDUUYlKD6ggZwzRkr8tewBhusisv+0in5qE/hFchoZTE0TL4p8sTbtIpyahQ4Ag5fKpSVBmfdDECvQTZjoM0U9N6KgkwH9xY7PXpPiCmq5yuaLVldHIO7jgNi5XfOEhCqNh9udHV/RnC5YAUDTftdV4/ivvwEoRVS9XXPWa1FIT5ird8jpSB+BDN3rO8AaGMnGy0I0QRYTvdk6NkOsucuhGCMAgI8Q0isaHbmAevNMhiD4P6iZhstANGiQE2PEGCRo2NcgAsQDwKnxWFdlT17/duWU1BJmuHz6A5bwbEsCScgh+qAHit3Jr1oooOPExdRBLbeJjSpuwuy30AAH+CDAAPH5ltESNYl4AAAAASUVORK5CYII=",particleImage[_0x5e32ae(1460)]=function(){};class LightCone extends BasePointPrimitive{constructor(e={}){const t=_0x5e32ae;e.style={...DEF_STYLE$g,...e[t(4114)]||{}},super(e),this._primitive1=null,this._primitive2=null,this._primitive3=null,this._primitive4=null}get czmObject(){return this._primitive1}get[_0x5e32ae(1830)](){const e=_0x5e32ae;return this._primitive2?[this[e(3133)],this._primitive3,this._primitive4]:[]}get[_0x5e32ae(2092)](){return this._color}set[_0x5e32ae(2092)](e){const t={_0x61b92f:2092},i=_0x5e32ae;this.style[i(t._0x61b92f)]=e}[_0x5e32ae(4158)](e){const t={_0x3771ba:2554,_0x1bffcb:858,_0x14018a:2723},i=_0x5e32ae;if(!this.show||!this.position)return;let s=this.position;if(Cesium__namespace.defined(e.setHeight)){let o=this.style[i(t._0x3771ba)];Cesium__namespace.defined(o)&&(isString(o)&&(o=Number(template(o,this.attr,!![])),isNaN(o)&&(o=0)),s=setPositionsHeight(s,o));const c=this.getAddHeight();c!==0&&(s=addPositionsHeight(s,c))}const n=e.radius;this.topRadius=n/100,this.topRadius=this.topRadius>1?1:this.topRadius,this[i(t._0x1bffcb)]=getCirclePosition(s,n*.7),this[i(2606)]=getCirclePosition(s,n),this.circular_clone_topPoints=getCirclePosition(s,this.topRadius),this[i(t._0x14018a)]=getCirclePosition(s,n*2),this.ringCanvas=this[i(4105)](),this.gradientCircleCanvas=this[i(579)](),this.image=this.drawCanvas(particleImage),this._color=getColorByStyle(e),this.addInner(e),this[i(1040)](e),this.addCircle(e),this.addRing(e)}[_0x5e32ae(2442)](){const e={_0xe67b27:930,_0x1fe6bc:2135,_0x516ef3:930},t=_0x5e32ae;this._primitive1&&(this.primitiveCollection.remove(this._primitive1),delete this._primitive1),this._primitive2&&(this[t(e._0xe67b27)].remove(this[t(3133)]),delete this._primitive2),this._primitive3&&(this.primitiveCollection.remove(this[t(e._0x1fe6bc)]),delete this._primitive3),this[t(3527)]&&(this[t(e._0x516ef3)].remove(this[t(3527)]),delete this._primitive4)}addInner(e){const t={_0x3d9379:2460,_0x193ffb:2092,_0x32ffb2:2826},i={_0x105d01:1202},s=_0x5e32ae,n=createCylinderInstance(this[s(858)],this[s(t._0x3d9379)],{height:e[s(3865)],color:this[s(t._0x193ffb)],distanceDisplayCondition:e[s(1430)]}),o=new Cesium__namespace.EllipsoidSurfaceAppearance({material:new Cesium__namespace.Material({fabric:{uniforms:{u_color:this._color,globalAlpha:1},source:ConeGlowCylinderGaussMaterial},translucent:function(c){const _=s;return c.uniforms.u_color[_(i._0x105d01)]<1}})});this._primitive1=new Cesium__namespace[s(1101)]({geometryInstances:n,appearance:o,asynchronous:![],show:this.show}),this.primitiveCollection.add(this[s(t._0x32ffb2)])}addOuter(e){const t={_0x53fe5a:2460,_0x50eb7d:4025,_0x55f59:575,_0x19ef40:930},i=_0x5e32ae,s=createCylinderInstance(this.outer_controlPoints,this[i(t._0x53fe5a)],{height:e[i(3865)],distanceDisplayCondition:e[i(1430)],color:new Cesium__namespace[i(2200)](.5,.8,1,2)});this._primitive2=new Cesium__namespace.Primitive({geometryInstances:s,appearance:new Cesium__namespace[i(t._0x50eb7d)]({material:new Cesium__namespace[i(1423)]({fabric:{uniforms:{u_color:this._color,image:this.image,globalAlpha:1},source:ConeGlowCircleOuterMaterial},translucent:!![]})}),asynchronous:![],show:this[i(t._0x55f59)]}),this[i(t._0x19ef40)].add(this._primitive2)}addCircle(e){const t={_0x4fc829:3026,_0x5acbf3:575},i=_0x5e32ae,s=Cesium__namespace[i(t._0x4fc829)].fromCartesian(this.position),n=createCircleInstance(this.circlePoints_2,{perPositionHeight:s.height>=1,distanceDisplayCondition:e.distanceDisplayCondition});this._primitive3=new Cesium__namespace.Primitive({geometryInstances:n,appearance:new Cesium__namespace[i(4025)]({material:new Cesium__namespace.Material({fabric:{uniforms:{u_color:this._color,image:this.gradientCircleCanvas,globalAlpha:1},source:ConeGlowGradientMaterial},translucent:!![]})}),asynchronous:![],show:this[i(t._0x5acbf3)]}),this.primitiveCollection.add(this._primitive3)}addRing(e){const t={_0x26f891:3527},i=_0x5e32ae,s=createCircleInstance(this.circlePoints_2,{perPositionHeight:this.point.alt>=1,distanceDisplayCondition:e.distanceDisplayCondition});this[i(3527)]=new Cesium__namespace.Primitive({geometryInstances:s,appearance:new Cesium__namespace.EllipsoidSurfaceAppearance({material:new Cesium__namespace.Material({fabric:{uniforms:{u_color:this[i(1109)],image:this.ringCanvas,globalAlpha:1},source:ConeGlowRingScanMaterial},translucent:!![]})}),asynchronous:![],show:this.show}),this.primitiveCollection[i(4084)](this[i(t._0x26f891)])}getParticleImage(e){const t={_0x31c148:3696,_0x355736:2358},i=_0x5e32ae,s=new Image;s[i(t._0x31c148)]=i(t._0x355736),s[i(1460)]=function(){e&&e()}}drawCanvas(e){const t={_0x4f8903:3865,_0x2ee14b:1494},i=_0x5e32ae,s=document[i(3098)]("canvas");s.width=64,s[i(t._0x4f8903)]=256;const n=s[i(t._0x2ee14b)]("2d",{willReadFrequently:!![]});return n.clearRect(0,0,64,256),n.drawImage(e,0,0),n.drawImage(e,33,0),s}drawRingCanvas(){const e={_0x4f9368:3713,_0x16cabd:1004},t=_0x5e32ae,i=document.createElement(t(3300));i[t(4005)]=512,i.height=512;const s=i.getContext("2d",{willReadFrequently:!![]});return s[t(e._0x4f9368)]="rgba(255,255,255,0)",s.strokeStyle=t(3604),s.setLineDash([50,50]),s.lineWidth=30,s.beginPath(),s[t(e._0x16cabd)](256,256,150,0,Math.PI*2,!![]),s.stroke(),s[t(881)](),i}[_0x5e32ae(579)](){const e={_0x8d0a7c:3300,_0x3a9ded:1494,_0x3a0e8b:823,_0x569838:2075},t=_0x5e32ae,i=document.createElement(t(e._0x8d0a7c));i.width=512,i.height=512;const s=i[t(e._0x3a9ded)]("2d",{willReadFrequently:!![]}),n=s.createRadialGradient(256,256,0,256,256,256);return n.addColorStop(.1,t(e._0x3a0e8b)),n.addColorStop(.2,t(521)),n.addColorStop(.3,"rgba(255, 255, 255, 0.9)"),n.addColorStop(.5,"rgba(255, 255, 255, 0.0)"),n[t(e._0x569838)](.9,t(3990)),n.addColorStop(1,"rgba(255, 255, 255, 1.0)"),s.clearRect(0,0,512,512),s.beginPath(),s.arc(256,256,256,0,Math.PI*2,!![]),s.fillStyle=n,s.fill(),s.restore(),i}setOpacity(e){const t={_0x5045e6:2826,_0x5492ec:1877,_0x2aa1bc:3133,_0x3e030c:2135,_0x29bcff:3252},i=_0x5e32ae;this.style.globalAlpha=e,this[i(t._0x5045e6)]&&(this._primitive1.appearance[i(t._0x5492ec)].uniforms.globalAlpha=e,this[i(t._0x2aa1bc)].appearance[i(t._0x5492ec)].uniforms.globalAlpha=e,this[i(t._0x3e030c)].appearance.material.uniforms.globalAlpha=e,this._primitive4.appearance.material.uniforms[i(t._0x29bcff)]=e)}_getDrawEntityClass(e,t){return this._getDrawPointEntityClass(e,t)}}register$4("lightCone",LightCone,!![]);function createCircleInstance(r,e){const t=new Cesium__namespace.PolygonGeometry({polygonHierarchy:new Cesium__namespace.PolygonHierarchy(r),perPositionHeight:e.perPositionHeight});return new Cesium__namespace.GeometryInstance({geometry:t,attributes:{distanceDisplayCondition:e.distanceDisplayCondition||new Cesium__namespace.DistanceDisplayConditionGeometryInstanceAttribute}})}function createCylinderInstance(r,e,t){const i={_0x4a7179:2062,_0x1a72e8:2524,_0xbe2586:693},s=_0x5e32ae,n=t.height,o=t.color,c=r.slice(),_=r.length,l=2*_,h=[],f=1/(_-1),m=[],g=[];for(let E=0;E<_;E++){g.push(addPositionsHeight(e[E],n)),h.push(E*f),h.push(0);const P=E+1,w=(E+1)%_,M=l-P;m.push(M-1,M,E),m.push(E,w,M-1)}for(let E=0;E<g.length;E++)c.push(g[_-E-1]),h.push(1-E*f),h.push(1);let C=new Cesium__namespace[s(i._0x4a7179)]({polygonHierarchy:new Cesium__namespace[s(2238)](c),perPositionHeight:!![]});return C=Cesium__namespace.PolygonGeometry.createGeometry(C),C[s(i._0x1a72e8)]=m,C[s(i._0xbe2586)].st.values=h,new Cesium__namespace.GeometryInstance({geometry:C,attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(o),distanceDisplayCondition:t.distanceDisplayCondition||new Cesium__namespace.DistanceDisplayConditionGeometryInstanceAttribute}})}function getCirclePosition(r,e,t=120){const i={_0x144c70:3759},s=_0x5e32ae,n=[],o=Cesium__namespace.Transforms[s(3684)](r),c=2*Math.PI/t,_=2*Math.PI*270/360;for(let l=0;l<t;l++){const h=_-c*l,f=new Cesium__namespace.Cartesian3(Math.sin(h)*e,Math.cos(h)*e,0);n[s(i._0x144c70)](Cesium__namespace.Matrix4.multiplyByPoint(o,f,new Cesium__namespace.Cartesian3))}return n.push(n[0]),n}var WaterFS=_0x5e32ae(530);class Water extends PolygonPrimitive{[_0x5e32ae(4158)](e){const t={_0x100950:1332,_0x463caf:3776,_0x5174a7:4222,_0x6de27c:643,_0x39aeb5:3518,_0x5bd7af:4084,_0x45ad5f:3089,_0x40ffab:2510},i=_0x5e32ae;if(!this.show||!this.positions||this.positions[i(3402)]===0)return;const s=this[i(t._0x100950)](e);s.vertexFormat=Cesium__namespace.EllipsoidSurfaceAppearance.VERTEX_FORMAT,e.opacity=e.opacity??.8;const n=e[i(t._0x463caf)]*(e.globalAlpha??1),o={geometryInstances:this._createGeometryInstance(s),appearance:new Cesium__namespace.EllipsoidSurfaceAppearance({aboveGround:![],material:new Cesium__namespace.Material({fabric:{type:i(t._0x5174a7),uniforms:{specularMap:s.specularMap||Cesium__namespace.Material.DefaultImageId,normalMap:s.normalMap||Cesium__namespace.Material.DefaultImageId,frequency:s.frequency||8e3,animationSpeed:s.animationSpeed||.03,amplitude:s.amplitude||5,specularIntensity:e.specularIntensity||.8,baseWaterColor:getCesiumColor(e.baseWaterColor||"#123e59")[i(3518)](e.opacity),blendColor:getCesiumColor(e.blendColor||i(t._0x6de27c))[i(t._0x39aeb5)](e.opacity)}}}),fragmentShaderSource:WaterFS,translucent:n!==1}),show:this.show};if(e.clampToGround?(o.classificationType=e.classificationType??Cesium__namespace.ClassificationType.TERRAIN,this._primitive=this.primitiveCollection.add(new Cesium__namespace.GroundPrimitive(o))):this._primitive=this.primitiveCollection[i(t._0x5bd7af)](new Cesium__namespace.Primitive(o)),this[i(t._0x45ad5f)]&&(this.primitiveCollection.remove(this._primitive_outline),delete this._primitive_outline),e.outline){const c=this._getOutlineStyle(e);this._primitive_outline=this._createPolylineOutline(c)}e.label&&this[i(t._0x40ffab)]()}[_0x5e32ae(4148)](e,t){const i={_0x16da89:3793,_0x589da1:652},s=_0x5e32ae;return e.style[s(i._0x16da89)]="Water",create$4(s(i._0x589da1),e)}}register$4(_0x5e32ae(829),Water);var DiffuseWallGlowVS=`in vec3 position3DHigh;
in vec3 position3DLow;
in vec3 normal;
in vec2 st;
in float batchId;
out vec2 v_st;
out vec3 v_normalEC;
out vec3 v_positionEC;

void main() {
  vec4 p = czm_translateRelativeToEye(position3DHigh, position3DLow);
  v_positionEC = (czm_modelViewRelativeToEye * p).xyz;
  v_normalEC = czm_normal * normal;
  v_st = st;
  gl_Position = czm_modelViewProjectionRelativeToEye * p;
}
`,DiffuseWallGlowFS=`in vec3 v_positionEC;
in vec3 v_normalEC;
in vec2 v_st;

void main() {
  out_FragColor = xh_getMaterial(v_st);
}
`;const DEF_STYLE$f={diffHeight:1e3,speed:10,maxScale:1};class DiffuseWall extends BasePolyPrimitive{constructor(e={}){const t={_0xb7d506:3822},i=_0x5e32ae;e[i(4114)]={...DEF_STYLE$f,...e.style||{}},super(e),e.positions?this[i(4064)]=this.centerOfMass:e.position&&(this[i(2180)]=e[i(2180)],this._isCircle=!![]),this._mScale=Cesium__namespace.Matrix4[i(t._0xb7d506)](1),this._maxScale=e.style.maxScale||1}get czmObject(){return this._primitive}get center(){return this._center}set[_0x5e32ae(4064)](e){const t=_0x5e32ae;this[t(723)]=e}get position(){return this._center}set position(e){const t={_0x53261c:1426},i=_0x5e32ae;this._center=LngLatPoint[i(t._0x53261c)](e).toCartesian(),this._updatePositionsByCircleCenter()}get radius(){const e=_0x5e32ae;return this[e(4114)][e(3194)]}set radius(e){this.style.radius=e,this._updatePositionsByCircleCenter()}[_0x5e32ae(4158)](e){const t={_0x2571e7:2999,_0xa3b69:3402,_0x3a2a68:3759,_0xa082ed:2816},i=_0x5e32ae,s=this.positions;if(!this.show||!s||s.length===0)return;const n=addPositionsHeight(this.positions,e[i(t._0x2571e7)]);this.center=this.centerOfMass;const o=[],c=[],_=[],l=[];for(let g=0,C=s[i(t._0xa3b69)];g<C;g++){const E=(g+1)%C;o[i(3759)](s[g].x,s[g].y,s[g].z),o.push(s[E].x,s[E].y,s[E].z),o.push(n[E].x,n[E].y,n[E].z),o.push(n[g].x,n[g].y,n[g].z),l.push(0,0,1),l.push(0,0,1),l.push(0,0,1),l.push(0,0,1),c.push(0,0,1,0,1,1,0,1);const P=g*4,w=P+1,M=P+2,T=P+3;_[i(t._0x3a2a68)](M,T,P,P,w,M)}const h=new Float64Array(o),f=new Cesium__namespace.GeometryInstance({id:this.id,geometry:new Cesium__namespace.Geometry({attributes:{position:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:h}),normal:new Cesium__namespace[i(1112)]({componentDatatype:Cesium__namespace.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:new Float32Array(l)}),st:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace.ComponentDatatype[i(t._0xa082ed)],componentsPerAttribute:2,values:new Float32Array(c)})},indices:new Uint16Array(_),primitiveType:Cesium__namespace.PrimitiveType.TRIANGLES,boundingSphere:Cesium__namespace[i(2407)].fromVertices(h)})}),m=getColorByStyle(e);this[i(3002)]=new Cesium__namespace.Primitive({geometryInstances:f,appearance:new Cesium__namespace.MaterialAppearance({material:new Cesium__namespace.Material({translucent:!![],fabric:{uniforms:{color:m,globalAlpha:1},source:`
              uniform vec4 color;
              uniform float globalAlpha;

              vec4 xh_getMaterial(vec2 st){
                float alpha = pow(1. - st.t, 1.5);
                vec4 colorNew = vec4(color.rgb * color.a, alpha*globalAlpha);
                return colorNew;
              }`}}),vertexShaderSource:DiffuseWallGlowVS,fragmentShaderSource:DiffuseWallGlowFS}),asynchronous:![],shadows:this.style.shadows,show:this[i(575)]}),this.primitiveCollection.add(this._primitive),this[i(4081)]()}_removedHook(){const e={_0x29fa00:3002},t=_0x5e32ae;this._primitive&&(this[t(930)].remove(this[t(3002)]),delete this[t(e._0x29fa00)])}update(e){const t=_0x5e32ae;if(this._primitive&&this._show){const i=e.frameNumber/1e3*this.style.speed;let s=i-Math.floor(i);s=s<.01?.01:s,this._mScale[0]=this[t(1106)][5]=s*this._maxScale,this._mScale[10]=1.1-s,this._primitive.modelMatrix=scaleXYZ(this.center,this._mScale)}}[_0x5e32ae(2574)](){const e=_0x5e32ae;this.positions=getEllipseOuterPositions({position:this._center,radius:this[e(4114)].radius??100,count:this.style.count??50})}_getDrawEntityClass(e,t){return this._isCircle?create$4("circle",e):(e.style.closure=!![],create$4("wall",e))}_updateStyleByEdit(e){const t=_0x5e32ae;this._isCircle&&Cesium__namespace.defined(e.radius)&&(this.radius=e[t(3194)]),Cesium__namespace[t(515)](e.diffHeight)&&(this[t(4114)].diffHeight=e.diffHeight)}}register$4(_0x5e32ae(2275),DiffuseWall);function scaleXYZ(r,e){const t=_0x5e32ae,i=Cesium__namespace[t(2911)].eastNorthUpToFixedFrame(r),s=Cesium__namespace.Matrix4.inverse(i,new Cesium__namespace.Matrix4),n=Cesium__namespace[t(4102)].multiply(e,s,new Cesium__namespace[t(4102)]);return Cesium__namespace.Matrix4.multiply(i,n,new Cesium__namespace.Matrix4)}var ScrollWallGlowVS=_0x5e32ae(2566),ScrollWallGlowFS=`in vec3 v_positionEC;
in vec3 v_normalEC;
in vec2 v_st;

void main() {
  vec3 positionToEyeEC = -v_positionEC;
  vec3 normalEC = normalize(v_normalEC);
    #ifdef FACE_FORWARD
  normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);
    #endif

  czm_materialInput materialInput;
  materialInput.normalEC = normalEC;
  materialInput.positionToEyeEC = positionToEyeEC;
  materialInput.st = v_st;

  czm_material material = czm_getMaterial(materialInput);
  out_FragColor = vec4(material.diffuse + material.emission, material.alpha);
}
`,ScrollWallGlowMaterial=`uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput cmi) {
  czm_material material = czm_getDefaultMaterial(cmi);
  vec2 st = cmi.st;
  float t = fract(speed * czm_frameNumber / 1000.0) * direction;
  vec2 st1 = vec2(st.s, fract(st.t - t));
  vec4 color = vec4(0., 0., 0., 0.);
  float tt = 0.5 - abs(0.5 - st1.t);
  float ss = st1.s;
  float alpha = tt * 2.;
  color = vec4(u_color.rgb * u_color.a, alpha * 1.2);
  material.diffuse = color.rgb;
  material.alpha = color.a * globalAlpha;
  return material;
}
`,ScrollWallGlowMaterial2=`uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput cmi) {
  czm_material material = czm_getDefaultMaterial(cmi);
  vec2 st = cmi.st;
  float t = fract(speed * czm_frameNumber / 1000.0) * direction;
  vec2 st1 = vec2(fract(st.s - t), st.t);
  vec4 color = vec4(0., 0., 0., 0.);
  float alpha = 1. - st.t;
  float value = fract(st1.s / 0.25);
  alpha *= sin(value * 3.1415926);
  color = vec4(u_color.rgb * u_color.a, alpha * 1.2);
  material.diffuse = color.rgb;
  material.alpha = color.a * globalAlpha;
  return material;
}
`;const DEF_STYLE$e={diffHeight:100,speed:10,style:1};class ScrollWall extends BasePolyPrimitive{constructor(e={}){e.style={...DEF_STYLE$e,...e.style||{}},super(e)}get czmObject(){return this[_0x5e32ae(3002)]}_addedHook(e){const t={_0x4cebf4:2999,_0x1bb776:3402,_0x42eff0:3759,_0x41b464:2684,_0xc1ce78:2407,_0x129042:575,_0x49b0bc:930,_0x452638:4084},i=_0x5e32ae,s=this.positions;if(!this.show||!s||s[i(3402)]===0)return;const n=addPositionsHeight(s,e[i(t._0x4cebf4)]),o=[],c=[],_=[],l=[];for(let C=0,E=s[i(t._0x1bb776)];C<E;C++){let P=C+1;P===E&&(P=0),o.push(s[C].x,s[C].y,s[C].z),o[i(t._0x42eff0)](s[P].x,s[P].y,s[P].z),o.push(n[P].x,n[P].y,n[P].z),o.push(n[C].x,n[C].y,n[C].z),l[i(3759)](0,0,1),l[i(3759)](0,0,1),l.push(0,0,1),l.push(0,0,1),c[i(t._0x42eff0)](0,0,1,0,1,1,0,1);const w=C*4,M=w+1,T=w+2,L=w+3;_[i(3759)](w,M,T,T,L,w)}const h=new Float64Array(o),f=new Cesium__namespace.GeometryInstance({id:this.id,geometry:new Cesium__namespace[i(4213)]({attributes:{position:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:h}),normal:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:new Float32Array(l)}),st:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:new Float32Array(c)})},indices:new Uint16Array(_),primitiveType:Cesium__namespace[i(t._0x41b464)].TRIANGLES,boundingSphere:Cesium__namespace[i(t._0xc1ce78)].fromVertices(h)})}),m=getColorByStyle(e),g=!![];this._primitive=new Cesium__namespace.Primitive({geometryInstances:f,appearance:new Cesium__namespace.MaterialAppearance({material:new Cesium__namespace.Material({translucent:g,fabric:{uniforms:{u_color:m,speed:e.speed,direction:e.reverse?1:-1,globalAlpha:1},source:this.createShader()}}),vertexShaderSource:ScrollWallGlowVS,fragmentShaderSource:ScrollWallGlowFS}),asynchronous:![],shadows:e[i(4193)],show:this[i(t._0x129042)]}),this[i(t._0x49b0bc)][i(t._0x452638)](this._primitive)}_removedHook(){const e={_0x1c775c:3002},t=_0x5e32ae;this[t(e._0x1c775c)]&&(this.primitiveCollection.remove(this[t(3002)]),delete this[t(3002)])}[_0x5e32ae(1845)](){const e=_0x5e32ae;return this.style[e(4114)]===1?ScrollWallGlowMaterial:ScrollWallGlowMaterial2}[_0x5e32ae(4148)](e,t){const i={_0x9ef2a0:2325},s=_0x5e32ae;return e.style[s(i._0x9ef2a0)]=!![],create$4("wall",e)}}register$4("scrollWall",ScrollWall);const Cartesian3$1=Cesium__namespace.Cartesian3,defined$1=Cesium__namespace.defined,CesiumMath$1=Cesium__namespace.Math,Matrix3=Cesium__namespace[_0x5e32ae(3768)],PolylineVolumeGeometryLibrary=Cesium__namespace[_0x5e32ae(1553)],Quaternion=Cesium__namespace.Quaternion,ThickWallGeometryLibrary={},scratch1=new Cartesian3$1,scratch2=new Cartesian3$1,scratch3=new Cartesian3$1,scratch4=new Cartesian3$1,scaleArray2=[new Cartesian3$1,new Cartesian3$1],cartesian1=new Cartesian3$1,cartesian2=new Cartesian3$1,cartesian3=new Cartesian3$1,cartesian4=new Cartesian3$1,cartesian5=new Cartesian3$1,cartesian6=new Cartesian3$1,cartesian7=new Cartesian3$1,cartesian8=new Cartesian3$1,cartesian9=new Cartesian3$1,cartesian10$1=new Cartesian3$1,quaterion=new Quaternion,rotMatrix=new Matrix3;function cartesian3ToArray(r){const e={_0x56e9d7:2500},t=_0x5e32ae,i=[];return r[t(e._0x56e9d7)](s=>{const n=t;i.push(s.x),i.push(s.y),i[n(3759)](s.z)}),i}function computeRoundCorner(r,e,t,i){const s={_0x1437cd:1701,_0x5df6ae:2735},n=_0x5e32ae,o=Cartesian3$1[n(s._0x1437cd)](Cartesian3$1[n(1531)](e,r,scratch1),Cartesian3$1.subtract(t,r,scratch2)),c=1,_=c*3,l=new Array(_);l[_-3]=t.x,l[_-2]=t.y,l[_-1]=t.z;let h;i?h=Matrix3.fromQuaternion(Quaternion.fromAxisAngle(Cartesian3$1.negate(r,scratch1),o/c,quaterion),rotMatrix):h=Matrix3.fromQuaternion(Quaternion[n(s._0x5df6ae)](r,o/c,quaterion),rotMatrix);let f=0;e=Cartesian3$1.clone(e,scratch1);for(let m=0;m<c;m++)e=Matrix3.multiplyByVector(h,e,e),l[f++]=e.x,l[f++]=e.y,l[f++]=e.z;return l}function addShiftedPositions(r,e,t,i){const s={_0x4a5001:2633,_0x45b29c:4084},n=_0x5e32ae,o=new Array(r.length),c=new Array(r.length),_=Cartesian3$1[n(2257)](e,t,scratch1),l=Cartesian3$1[n(s._0x4a5001)](_,scratch2);let h=0,f=r.length-1;for(let m=0;m<r.length;m+=3){const g=Cartesian3$1.fromArray(r,m,scratch3),C=Cartesian3$1.add(g,l,scratch4);o[h++]=C.x,o[h++]=C.y,o[h++]=C.z;const E=Cartesian3$1[n(s._0x45b29c)](g,_,scratch4);c[f--]=E.z,c[f--]=E.y,c[f--]=E.x}return i[n(3759)](o,c),i}ThickWallGeometryLibrary.addAttribute=function(r,e,t,i){const s=e.x,n=e.y,o=e.z;defined$1(t)&&(r[t]=s,r[t+1]=n,r[t+2]=o),defined$1(i)&&(r[i]=o,r[i-1]=n,r[i-2]=s)};const scratchForwardProjection=new Cartesian3$1,scratchBackwardProjection=new Cartesian3$1;ThickWallGeometryLibrary[_0x5e32ae(4138)]=function(r){const e={_0x2055f7:3875,_0x1fc59a:2381,_0x10f26f:3919,_0x3d4683:3925,_0x493e5e:3334,_0x27dd55:2257,_0x204725:4084,_0x4609b3:3925},t=_0x5e32ae,i=r.positions,s=r[t(e._0x2055f7)],n=r.width/2;let o=cartesian1,c=cartesian2,_=cartesian3,l=cartesian4,h=cartesian5,f=cartesian6,m=cartesian7,g=cartesian8,C=cartesian9,E=cartesian10$1,P=[],w=i[0],M=i[1];c=Cartesian3$1.normalize(Cartesian3$1.subtract(M,w,c),c),o=s[t(e._0x1fc59a)](w,o),l=Cartesian3$1.normalize(Cartesian3$1[t(3925)](o,c,l),l),m=Cartesian3$1[t(4246)](w,m),w=M,_=Cartesian3$1.negate(c,_);let T;const L=[];let R;const D=i.length;for(R=1;R<D-1;R++){o=s[t(2381)](w,o),M=i[R+1],c=Cartesian3$1[t(3029)](Cartesian3$1[t(1531)](M,w,c),c),h=Cartesian3$1[t(3029)](Cartesian3$1.add(c,_,h),h);const N=Cartesian3$1.multiplyByScalar(o,Cartesian3$1[t(4318)](c,o),scratchForwardProjection);Cartesian3$1.subtract(c,N,N),Cartesian3$1[t(3029)](N,N);const k=Cartesian3$1.multiplyByScalar(o,Cartesian3$1.dot(_,o),scratchBackwardProjection);if(Cartesian3$1.subtract(_,k,k),Cartesian3$1.normalize(k,k),!CesiumMath$1[t(3915)](Math.abs(Cartesian3$1.dot(N,k)),1,CesiumMath$1[t(e._0x10f26f)])){h=Cartesian3$1[t(e._0x3d4683)](h,o,h),h=Cartesian3$1.cross(o,h,h),h=Cartesian3$1.normalize(h,h);const $=n/Math.max(.25,Cartesian3$1.magnitude(Cartesian3$1.cross(h,_,scratch1))),H=PolylineVolumeGeometryLibrary[t(e._0x493e5e)](c,_,w,s);h=Cartesian3$1.multiplyByScalar(h,$,h),H?(g=Cartesian3$1.add(w,h,g),E=Cartesian3$1.add(g,Cartesian3$1.multiplyByScalar(l,n,E),E),C=Cartesian3$1.add(g,Cartesian3$1.multiplyByScalar(l,n*2,C),C),scaleArray2[0]=Cartesian3$1.clone(m,scaleArray2[0]),scaleArray2[1]=Cartesian3$1.clone(E,scaleArray2[1]),T=cartesian3ToArray(scaleArray2),P=addShiftedPositions(T,l,n,P),f=Cartesian3$1[t(4246)](C,f),l=Cartesian3$1.normalize(Cartesian3$1.cross(o,c,l),l),C=Cartesian3$1.add(g,Cartesian3$1[t(e._0x27dd55)](l,n*2,C),C),m=Cartesian3$1[t(4084)](g,Cartesian3$1.multiplyByScalar(l,n,m),m),L.push({leftPositions:computeRoundCorner(g,f,C,H)})):(C=Cartesian3$1[t(4084)](w,h,C),E=Cartesian3$1.add(C,Cartesian3$1.negate(Cartesian3$1.multiplyByScalar(l,n,E),E),E),g=Cartesian3$1[t(e._0x204725)](C,Cartesian3$1.negate(Cartesian3$1.multiplyByScalar(l,n*2,g),g),g),scaleArray2[0]=Cartesian3$1.clone(m,scaleArray2[0]),scaleArray2[1]=Cartesian3$1.clone(E,scaleArray2[1]),T=cartesian3ToArray(scaleArray2),P=addShiftedPositions(T,l,n,P),f=Cartesian3$1[t(4246)](g,f),l=Cartesian3$1.normalize(Cartesian3$1[t(e._0x4609b3)](o,c,l),l),g=Cartesian3$1.add(C,Cartesian3$1.negate(Cartesian3$1[t(e._0x27dd55)](l,n*2,g),g),g),m=Cartesian3$1.add(C,Cartesian3$1.negate(Cartesian3$1.multiplyByScalar(l,n,m),m),m),L.push({rightPositions:computeRoundCorner(C,f,g,H)})),_=Cartesian3$1.negate(c,_)}w=M}return o=s.geodeticSurfaceNormal(w,o),scaleArray2[0]=Cartesian3$1[t(4246)](m,scaleArray2[0]),scaleArray2[1]=Cartesian3$1.clone(w,scaleArray2[1]),T=cartesian3ToArray(scaleArray2),P=addShiftedPositions(T,l,n,P),{positions:P,corners:L}};const BoundingSphere=Cesium__namespace.BoundingSphere,Cartesian3=Cesium__namespace[_0x5e32ae(3916)],Cartographic=Cesium__namespace[_0x5e32ae(3026)],Check=Cesium__namespace.Check,ComponentDatatype=Cesium__namespace.ComponentDatatype,defaultValue=Cesium__namespace.defaultValue,defined=Cesium__namespace[_0x5e32ae(515)],Ellipsoid=Cesium__namespace.Ellipsoid,Geometry=Cesium__namespace.Geometry,GeometryAttribute=Cesium__namespace.GeometryAttribute,GeometryAttributes=Cesium__namespace.GeometryAttributes,IndexDatatype=Cesium__namespace.IndexDatatype,CesiumMath=Cesium__namespace[_0x5e32ae(1286)],PrimitiveType=Cesium__namespace.PrimitiveType,VertexFormat=Cesium__namespace.VertexFormat,CornerType=Cesium__namespace[_0x5e32ae(1672)],cartesian10=new Cartesian3,cartesian20=new Cartesian3,cartesian30=new Cartesian3;function combine(r,e){const t={_0x6c1020:2436,_0x2641bf:1540,_0x2da449:1531,_0x481f70:3250},i=_0x5e32ae,s=r[i(t._0x6c1020)],n=r.corners,o=new GeometryAttributes;let c,_=0,l=0,h,f=0,m;for(h=0;h<s[i(3402)];h+=2)m=s[h][i(3402)]-3,_+=m,f+=m*2,l+=s[h+1].length-3;for(_+=3,l+=3,h=0;h<n.length;h++){c=n[h];const $=n[h][i(t._0x2641bf)];defined($)?(m=$.length,_+=m,f+=m):(m=n[h][i(3010)].length,l+=m,f+=m)}const g=_+l,C=new Float64Array(g);let E=0,P=g-1,w,M,T,L;const R=IndexDatatype[i(1962)](g/3,f);let D=0,N=0,k=s[N++],B=s[N++];for(C.set(k,E),C.set(B,P-B.length+1),m=B.length-3,h=0;h<m;h+=3)M=E/3,L=M+1,w=(P-2)/3,T=w-1,R[D++]=w,R[D++]=M,R[D++]=T,R[D++]=T,R[D++]=M,R[D++]=L,E+=3,P-=3;for(h=0;h<n[i(3402)];h++){let $;c=n[h];const H=c.leftPositions,W=c.rightPositions;let J,z,fe=cartesian30,q=cartesian10,te=cartesian20;if(defined(H)){for(P-=3,J=L,z=T,$=0;$<H.length/3;$++)fe=Cartesian3.fromArray(H,$*3,fe),R[D++]=J,R[D++]=z-$-1,R[D++]=z-$,ThickWallGeometryLibrary.addAttribute(C,fe,void 0,P),q=Cartesian3.fromArray(C,(z-$-1)*3,q),te=Cartesian3.fromArray(C,J*3,te),P-=3;fe=Cartesian3.fromArray(C,J*3,fe),q=Cartesian3.subtract(Cartesian3.fromArray(C,z*3,q),fe,q),te=Cartesian3.subtract(Cartesian3[i(3250)](C,(z-$)*3,te),fe,te),E+=3}else{for(E+=3,J=T,z=L,$=0;$<W.length/3;$++)fe=Cartesian3.fromArray(W,$*3,fe),R[D++]=J,R[D++]=z+$,R[D++]=z+$+1,ThickWallGeometryLibrary.addAttribute(C,fe,E),q=Cartesian3.fromArray(C,J*3,q),te=Cartesian3.fromArray(C,(z+$)*3,te),E+=3;fe=Cartesian3.fromArray(C,J*3,fe),q=Cartesian3[i(t._0x2da449)](Cartesian3.fromArray(C,(z+$)*3,q),fe,q),te=Cartesian3[i(1531)](Cartesian3[i(t._0x481f70)](C,z*3,te),fe,te),P-=3}for(k=s[N++],B=s[N++],k.splice(0,3),B[i(2889)](B.length-3,3),C.set(k,E),C.set(B,P-B.length+1),m=B.length-3,$=0;$<B.length;$+=3)L=E/3,M=L-1,T=(P-2)/3,w=T+1,R[D++]=w,R[D++]=M,R[D++]=T,R[D++]=T,R[D++]=M,R[D++]=L,E+=3,P-=3;E-=3,P+=3}if(o.position=new GeometryAttribute({componentDatatype:ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:C}),e.st){const $=new Float32Array(g/3*2);let H=0;_/=3,l/=3;const W=1/(_-1),J=1/(l-1);for(h=0;h<l;h++)$[H++]=h*J,$[H++]=0;for(h=_;h>0;h--)$[H++]=(h-1)*W,$[H++]=1;o.st=new GeometryAttribute({componentDatatype:ComponentDatatype.FLOAT,componentsPerAttribute:2,values:$})}return{attributes:o,indices:R}}function ThickWallGeometry(r){const e={_0x591b6b:1729,_0x2cf7df:4005},t=_0x5e32ae;r=defaultValue(r,defaultValue[t(e._0x591b6b)]);const i=r.positions,s=r[t(e._0x2cf7df)];Check.defined(t(3948),i),Check.defined("options.width",s),this._positions=i,this._ellipsoid=Ellipsoid.clone(defaultValue(r.ellipsoid,Ellipsoid.WGS84)),this._vertexFormat=VertexFormat.clone(defaultValue(r.vertexFormat,VertexFormat.POSITION_AND_ST)),this._width=s,this._granularity=defaultValue(r[t(2232)],CesiumMath.RADIANS_PER_DEGREE)}ThickWallGeometry[_0x5e32ae(3871)]=function(r){const e={_0x531629:2237,_0x5cdf72:3465,_0x386553:460,_0x1ce176:3701,_0x27f43f:3701,_0x3669e2:3865,_0x2bb020:3759,_0x4e7a0f:4012},t={_0x1bf827:3010},i=_0x5e32ae,s=r[i(3270)],n=r[i(e._0x531629)],o=r._ellipsoid,c=s[i(e._0x5cdf72)](T=>Cartographic.fromCartesian(T)),_=s[i(3465)](T=>o[i(2373)](T)),l=r[i(3459)],h={ellipsoid:o,positions:_,width:n,cornerType:CornerType[i(3761)],granularity:r[i(e._0x386553)],saveAttributes:![]},f=ThickWallGeometryLibrary.computePositions(h),m=[];let g=[];const C=f.positions,E=C.length/2;for(let T=0;T<E;T++){const L=c[T],R=c[T+1],D=C[T*2],N=C[T*2+1],k=D[i(3402)]/3,B=N.length/3;for(let H=0;H<k;H++){const W=new Cesium__namespace.Cartesian3(D[H*3],D[H*3+1],D[H*3+2]),J=Cartographic.fromCartesian(W);let z;H===0?z=Cartesian3.fromRadians(J[i(1640)],J.latitude,L.height):z=Cartesian3.fromRadians(J.longitude,J.latitude,R[i(3865)]),m.push(z),D[H*3]=z.x,D[H*3+1]=z.y,D[H*3+2]=z.z}const $=[];for(let H=0;H<B;H++){const W=new Cesium__namespace.Cartesian3(N[H*3],N[H*3+1],N[H*3+2]),J=Cartographic.fromCartesian(W);let z;H===0?z=Cartesian3.fromRadians(J.longitude,J[i(e._0x1ce176)],R.height):z=Cartesian3.fromRadians(J.longitude,J[i(e._0x27f43f)],L[i(e._0x3669e2)]),$[i(3759)](z),N[H*3]=z.x,N[H*3+1]=z.y,N[H*3+2]=z.z}g[i(e._0x2bb020)](...$.reverse())}f.corners[i(2500)]((T,L)=>{const R=i;let D;defined(T[R(t._0x1bf827)])?D=T.rightPositions:D=T[R(1540)];const N=new Cesium__namespace.Cartesian3(D[0],D[1],D[2]),k=Cartographic.fromCartesian(N),B=s[L+1],$=Cartographic.fromCartesian(B),H=Cartesian3[R(2793)](k.longitude,k.latitude,$.height);D[0]=H.x,D[1]=H.y,D[2]=H.z});const P=combine(f,l),w=P.attributes,M=BoundingSphere.fromVertices(w[i(2180)].values,void 0,3);return g=Cesium__namespace[i(e._0x4e7a0f)](g,Cartesian3.equalsEpsilon),{geometry:new Geometry({attributes:w,indices:P.indices,primitiveType:PrimitiveType.TRIANGLES,boundingSphere:M}),rightPoints:g,leftPoints:m}};const DEF_STYLE$d={diffHeight:100,bottomHeight:0,width:10,flat:!![]};class ThickWall extends BasePolyPrimitive{constructor(e={}){e.style={...DEF_STYLE$d,...e.style||{}},super(e)}get czmObject(){return this[_0x5e32ae({_0x3eb2a4:3002}._0x3eb2a4)]}_createGeometryInstance(e,t){const i={_0x53b740:2500,_0x42dba2:3871,_0x306d84:2709,_0x1c32a0:788,_0x5e1486:3759,_0x37f74c:2500,_0x1d992b:2168,_0x5e3e80:2325,_0x503d78:3865,_0x32019b:2299,_0x45e6ef:3302},s={_0x13c8a3:3759},n={_0x381457:3026,_0x347640:3701},o=_0x5e32ae,c=[],_=[],l=[];this.positions[o(i._0x53b740)](M=>{const T=o,L=Cesium__namespace[T(n._0x381457)].fromCartesian(M);_.push(Cesium__namespace[T(3916)].fromRadians(L.longitude,L.latitude,L.height+e.diffHeight)),l[T(3759)](Cesium__namespace.Cartesian3.fromRadians(L.longitude,L[T(n._0x347640)],L.height-e[T(4083)]))}),e.closure&&(_.push(_[0]),l.push(l[0]));const h=ThickWallGeometry.createGeometry(new ThickWallGeometry({positions:_,width:e.width})),f=ThickWallGeometry[o(i._0x42dba2)](new ThickWallGeometry({positions:l,width:e.width})),m=new Cesium__namespace[o(2709)]({geometry:h.geometry}),g=new Cesium__namespace[o(i._0x306d84)]({geometry:f[o(i._0x1c32a0)]});c.push(m),c[o(i._0x5e1486)](g);const C=[],E=[];f.leftPoints.forEach(M=>{const T=Cesium__namespace.Cartographic.fromCartesian(M);C.push(T.height)}),f.rightPoints[o(i._0x37f74c)](M=>{const T=o,L=Cesium__namespace.Cartographic.fromCartesian(M);E[T(s._0x13c8a3)](L.height)});const P=new Cesium__namespace.GeometryInstance({geometry:new Cesium__namespace.WallGeometry({positions:h.leftPoints,minimumHeights:C,vertexFormat:Cesium__namespace[o(i._0x1d992b)].MaterialSupport.TEXTURED.vertexFormat})}),w=new Cesium__namespace.GeometryInstance({geometry:new Cesium__namespace[o(3564)]({positions:h.rightPoints,minimumHeights:E,vertexFormat:Cesium__namespace[o(i._0x1d992b)].MaterialSupport.TEXTURED.vertexFormat})});if(c.push(P),c.push(w),!e[o(i._0x5e3e80)]){const M=Cesium__namespace.Cartographic[o(3236)](f.leftPoints[0])[o(i._0x503d78)],T=new Cesium__namespace[o(2709)]({geometry:new Cesium__namespace.WallGeometry({positions:[h.leftPoints[0],h.rightPoints[0]],minimumHeights:[M,M],vertexFormat:Cesium__namespace.MaterialAppearance[o(1886)].TEXTURED[o(777)]})}),L=Cesium__namespace.Cartographic[o(3236)](f.leftPoints[f[o(i._0x32019b)].length-1]).height,R=new Cesium__namespace[o(2709)]({geometry:new Cesium__namespace.WallGeometry({positions:[h.leftPoints[h.leftPoints.length-1],h.rightPoints[h.rightPoints.length-1]],minimumHeights:[L,L],vertexFormat:Cesium__namespace.MaterialAppearance[o(1886)][o(i._0x45e6ef)].vertexFormat})});c.push(T),c.push(R)}return c}_createAppearance(e,t,i){const s={_0x42f38e:2168},n=_0x5e32ae;return new Cesium__namespace[n(s._0x42f38e)]({...e})}_conversionStyle(e){return WallStyleConver[_0x5e32ae({_0x11464f:1268}._0x11464f)](e)}_style2Json(e,t){return WallStyleConver[_0x5e32ae(3852)](e,t)}_updateStyleByEdit(e){const t={_0x4767b7:515,_0x5505c2:2999},i=_0x5e32ae;this._isCircle&&Cesium__namespace.defined(e.radius)&&(this[i(3194)]=e.radius),Cesium__namespace[i(t._0x4767b7)](e.diffHeight)&&(this.style.diffHeight=e[i(t._0x5505c2)])}_getDrawEntityClass(e,t){return create$4("wall",e)}}register$4("thickWall",ThickWall);var DynamicRiverFS=_0x5e32ae(2870),DynamicRiverVS=`in vec3 position3DHigh;
in vec3 position3DLow;
in vec2 st;
in float batchId;

out vec3 v_positionMC;
out vec3 v_positionEC;
out vec2 v_st;

void main() {
  vec4 p = czm_computePosition();

  v_positionMC = position3DHigh + position3DLow;           // position in model coordinates
  v_positionEC = (czm_modelViewRelativeToEye * p).xyz;     // position in eye coordinates
  v_st = st;

  gl_Position = czm_modelViewProjectionRelativeToEye * p;
}
`,DynamicRiverMaterial=_0x5e32ae(3337);const DEF_STYLE$c={opacity:.5,width:10,height:0,speed:10,axisY:![],move:!![],direction:!![],moveVar:new Cesium__namespace[_0x5e32ae(3916)](50,1,100)};class DynamicRiver extends BasePolyPrimitive{constructor(e={}){e.style={...DEF_STYLE$c,...e.style||{}},super(e)}get[_0x5e32ae(1679)](){return this._primitive}get image(){return this[_0x5e32ae(4114)].image}set[_0x5e32ae(513)](e){const t=_0x5e32ae;this[t(4114)][t(513)]=e,this._material.uniforms.image=e}get width(){return this.style.width}set width(e){const t=_0x5e32ae;e=Number(e)||1,this.style.width=e,this[t(4034)](this.style)}get height(){const e=_0x5e32ae;return this[e(4114)][e(3865)]}set[_0x5e32ae(3865)](e){const t={_0x31df91:4034},i=_0x5e32ae;this.style.height=e,this[i(t._0x31df91)](this.style)}get opacity(){return this.style.opacity}set opacity(e){const t={_0x50f2d6:2386,_0x5d15fd:3776},i=_0x5e32ae;this.style.opacity=Number(e),this[i(t._0x50f2d6)].uniforms[i(t._0x5d15fd)]=e}get direction(){return this.style.direction}set direction(e){const t={_0x442873:4114},i=_0x5e32ae;e=!!e,this[i(t._0x442873)].direction=e,this._material.uniforms[i(3858)]=e?-1:1}get speed(){return this[_0x5e32ae(4114)].speed}set speed(e){e=Number(e)||1,this.style.speed=e,this._material.uniforms.speed=e}get[_0x5e32ae(1087)](){const e=_0x5e32ae;return this.style[e(1087)]}set move(e){const t={_0x556d35:4114,_0x32876c:1087},i=_0x5e32ae;e=!!e,this[i(t._0x556d35)][i(1087)]=e,this._material.uniforms[i(t._0x32876c)]=e}get[_0x5e32ae(1683)](){return this.style.axisY}set[_0x5e32ae(1683)](e){const t=_0x5e32ae;e=!!e,this[t(4114)].axisY=e,this[t(2386)].uniforms.axisY=e}get moveVar(){const e={_0x3e931e:2304},t=_0x5e32ae;return this.style[t(e._0x3e931e)]}set[_0x5e32ae(2304)](e){const t=_0x5e32ae;this[t(4114)].moveVar=e,this._material.uniforms[t(2304)]=e}[_0x5e32ae(4158)](e){const t={_0x2eeab3:3402},i=_0x5e32ae;!this.show||!this.positions||this.positions[i(t._0x2eeab3)]===0||(this[i(1630)]=Lines2Plane(this.positions,this[i(4005)],this.height),this._sideRes&&(this._primitive=this.createPrimitive(),this.primitiveCollection.add(this._primitive)))}[_0x5e32ae(2442)](){const e={_0x24fc5c:1890,_0x4a31d4:1220,_0x3e1816:3002},t=_0x5e32ae;this.dhEvent&&(this[t(e._0x24fc5c)][t(e._0x4a31d4)](EventType.clockTick,this.dhEvent,this),delete this.dhEvent),this[t(e._0x3e1816)]&&(this.primitiveCollection.remove(this._primitive),delete this._primitive),this._material&&(this._material.destroy(),delete this._material)}_updateStyleHook(e,t){const i={_0x25004a:3252},s=_0x5e32ae;let n=![];for(const o in t)switch(o){case"image":case"opacity":case"moveVar":case"direction":case"speed":case"axisY":case s(i._0x25004a):this._material.uniforms[o]=t[o];break;default:n=!![];break}n&&this.redraw(e)}[_0x5e32ae(2541)](){const e={_0x53a562:658,_0x1c98c3:1112,_0x449a40:4213,_0x1074cc:2386,_0x32bf05:3776},t=_0x5e32ae,i=this._sideRes,s=new Float64Array(i[t(e._0x53a562)]),n=new Cesium__namespace.GeometryAttributes;n.position=new Cesium__namespace[t(e._0x1c98c3)]({componentDatatype:Cesium__namespace[t(1590)].DOUBLE,componentsPerAttribute:3,values:s}),n.st=new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:i.uvs});const o=new Cesium__namespace[t(e._0x449a40)]({attributes:n,indices:i.indexs,primitiveType:Cesium__namespace.PrimitiveType.TRIANGLES,boundingSphere:Cesium__namespace.BoundingSphere[t(2768)](s)}),c=new Cesium__namespace.GeometryInstance({id:this.id,geometry:o}),_=new Cesium__namespace[t(518)];return _[t(2170)].enabled=!![],this[t(e._0x1074cc)]=createMaterial(MaterialType,{image:this.image,opacity:this[t(e._0x32bf05)],moveVar:this.moveVar,direction:this.direction?-1:1,speed:this.speed,move:this.move,axisY:this.axisY,globalAlpha:1}),new Cesium__namespace.Primitive({geometryInstances:c,appearance:new Cesium__namespace.Appearance({material:this[t(e._0x1074cc)],renderState:_,vertexShaderSource:DynamicRiverVS,fragmentShaderSource:DynamicRiverFS})})}[_0x5e32ae(2954)](e,t){const i={_0x1d435b:3916,_0x51072d:3029,_0x57f628:4246},s={_0x584970:3002,_0x86698:4102},n=_0x5e32ae;if(!e||!t||!this._primitive)return;let o=0;const c=20,_=e/(t*c),l=this._sideRes.self,h=new Cesium__namespace[n(i._0x1d435b)];for(let m=0,g=l.length;m<g;m++){const C=Cesium__namespace.Cartesian3[n(i._0x51072d)](l[m],new Cesium__namespace.Cartesian3);Cesium__namespace.Cartesian3.add(h,C,h)}Cesium__namespace[n(3916)][n(3029)](h,h);const f=Cesium__namespace[n(i._0x57f628)](this._primitive.modelMatrix);this.dhEvent=function(){const m=n;if(!(!this._primitive||!this._map)){if(Math.abs(o)<=Math[m(3926)](e)){const g=Cesium__namespace[m(3916)].multiplyByScalar(h,o,new Cesium__namespace.Cartesian3);this[m(s._0x584970)].modelMatrix=Cesium__namespace[m(s._0x86698)].multiplyByTranslation(f,g,new Cesium__namespace.Matrix4)}else this.dhEvent&&(this._map[m(1220)](EventType.clockTick,this[m(1862)],this),delete this.dhEvent);o+=_}},this._map.on(EventType.clockTick,this.dhEvent,this)}setOpacity(e){const t=_0x5e32ae;this[t(4114)].globalAlpha=e,this._material&&(this._material[t(2221)].globalAlpha=e)}_getDrawEntityClass(e,t){const i={_0x2c65a5:1632},s=_0x5e32ae;return e.style[s(4005)]=5,create$4(s(i._0x2c65a5),e)}}register$4("dynamicRiver",DynamicRiver);const MaterialType="DynamicRiver";register$3(MaterialType,{fabric:{uniforms:{image:Cesium__namespace.Material[_0x5e32ae(1838)],opacity:1,moveVar:new Cesium__namespace.Cartesian3(50,1,100),direction:1,speed:1,move:!![],axisY:![],globalAlpha:1},source:DynamicRiverMaterial},translucent:!![]});function Lines2Plane(r,e,t){const i={_0x207648:3402,_0x53782a:4144,_0x2cfcb3:3759,_0x9bac6:3759,_0x556b9:2410,_0x4201ec:3236,_0x5d349b:3759,_0x3f2161:3759,_0x2d0e18:4144,_0x503611:3759,_0x3cbd41:2975},s=_0x5e32ae;if(!r||r[s(i._0x207648)]<=1||!e||e===0){logError$1("请确认参数符合规则：数组长度大于1，宽高不能为0！",r);return}const n=r.length,o=[],c=[],_=e/2;for(let P=0;P<n;P++){let w,M,T,L,R;if(P===0?(w=r[P],M=r[P],T=r[P+1]):P===n-1?(w=r[P-1],M=r[P],T=r[P-1]):(w=r[P-1],M=r[P],T=r[P+1]),t!==0&&(w=RaisePoint(w,t),M=RaisePoint(M,t),T=RaisePoint(T,t)),w&&M&&T){const D=GetSide2(w,M,T,_);L=D.left,R=D.right,o.push(R),c.push(L)}}const l=o,h=c,f=[],m=[],g=[],C=[],E=[];for(let P=0;P<n;P++){const w=Cesium__namespace[s(i._0x53782a)].fromCartesian(h[P]);m[s(i._0x2cfcb3)](h[P].x),m[s(i._0x2cfcb3)](h[P].y),m.push(h[P].z),g.push(w.high.x),g[s(i._0x9bac6)](w[s(i._0x556b9)].y),g[s(3759)](w.high.z),C.push(w.low.x),C.push(w.low.y),C.push(w[s(2975)].z),f.push(1,1),P<n-1&&(E.push(P+n*2),E[s(3759)](P+1),E.push(P+1+n),E.push(P+n*2),E.push(P+1+n),E[s(i._0x2cfcb3)](n+P+n*2))}for(let P=0;P<n;P++){const w=Cesium__namespace[s(4144)][s(i._0x4201ec)](l[P]);m[s(i._0x5d349b)](l[P].x),m.push(l[P].y),m.push(l[P].z),g.push(w.high.x),g[s(3759)](w.high.y),g[s(3759)](w.high.z),C[s(i._0x9bac6)](w.low.x),C[s(i._0x3f2161)](w.low.y),C.push(w.low.z),f.push(1,0)}for(let P=0;P<n;P++){const w=Cesium__namespace[s(i._0x2d0e18)].fromCartesian(h[P]);m.push(h[P].x),m.push(h[P].y),m[s(i._0x503611)](h[P].z),g.push(w.high.x),g.push(w.high.y),g.push(w[s(2410)].z),C.push(w.low.x),C.push(w.low.y),C.push(w[s(i._0x3cbd41)].z),f[s(i._0x9bac6)](0,1)}for(let P=0;P<n;P++){const w=Cesium__namespace.EncodedCartesian3.fromCartesian(l[P]);m.push(l[P].x),m.push(l[P].y),m.push(l[P].z),g[s(i._0x2cfcb3)](w.high.x),g.push(w.high.y),g.push(w.high.z),C.push(w[s(i._0x3cbd41)].x),C.push(w[s(2975)].y),C[s(3759)](w[s(i._0x3cbd41)].z),f.push(0,0)}return{left:l,right:h,self:r,vertexs:new Float32Array(m),vertexsH:new Float32Array(g),vertexsL:new Float32Array(C),indexs:new Uint16Array(E),uvs:new Float32Array(f)}}function RaisePoint(r,e){const t=_0x5e32ae;if(!(r instanceof Cesium__namespace.Cartesian3)){logError$1("请确认点是Cartesian3类型！");return}if(!e||e===0){logError$1("请确认高度是非零数值！");return}const i=Cesium__namespace.Cartesian3.normalize(r,new Cesium__namespace.Cartesian3),s=new Cesium__namespace.Ray(r,i);return Cesium__namespace[t(916)][t(4316)](s,e)}function GetSide2(r,e,t,i){const s={_0x52c1b8:1531,_0x34fb17:3916,_0xc110fa:3916,_0x20aa9a:3925,_0x2e6b29:3029,_0x2a804f:3916,_0x37924f:4316,_0x40269d:3029,_0x1b9f42:3916,_0x484c40:1984},n=_0x5e32ae;let o,c;if(Cesium__namespace.Cartesian3.equals(r,e)){const _=Cesium__namespace.Cartesian3.normalize(Cesium__namespace.Cartesian3[n(s._0x52c1b8)](t,e,new Cesium__namespace.Cartesian3),new Cesium__namespace.Cartesian3),l=Cesium__namespace.Cartesian3.normalize(e,new Cesium__namespace[n(3916)]),h=Cesium__namespace.Cartesian3[n(3925)](l,_,new Cesium__namespace.Cartesian3),f=Cesium__namespace.Cartesian3.cross(_,l,new Cesium__namespace.Cartesian3),m=new Cesium__namespace.Ray(e,h),g=new Cesium__namespace[n(916)](e,f);o=Cesium__namespace.Ray.getPoint(m,i),c=Cesium__namespace.Ray.getPoint(g,i)}else if(Cesium__namespace.Cartesian3.equals(t,e)){const _=Cesium__namespace[n(3916)].normalize(Cesium__namespace.Cartesian3.subtract(e,r,new Cesium__namespace.Cartesian3),new Cesium__namespace[n(s._0x34fb17)]),l=Cesium__namespace.Cartesian3.normalize(e,new Cesium__namespace[n(s._0xc110fa)]),h=Cesium__namespace[n(3916)][n(s._0x20aa9a)](l,_,new Cesium__namespace.Cartesian3),f=Cesium__namespace[n(s._0x34fb17)].cross(_,l,new Cesium__namespace[n(3916)]),m=new Cesium__namespace.Ray(e,h),g=new Cesium__namespace.Ray(e,f);o=Cesium__namespace.Ray.getPoint(m,i),c=Cesium__namespace.Ray.getPoint(g,i)}else{const _=Cesium__namespace.Cartesian3.normalize(Cesium__namespace.Cartesian3[n(1531)](e,r,new Cesium__namespace.Cartesian3),new Cesium__namespace.Cartesian3),l=Cesium__namespace.Cartesian3[n(s._0x2e6b29)](Cesium__namespace[n(3916)].subtract(t,e,new Cesium__namespace.Cartesian3),new Cesium__namespace.Cartesian3),h=Cesium__namespace[n(s._0x2a804f)].add(_,l,new Cesium__namespace[n(3916)]);if(Cesium__namespace.Cartesian3.equals(h,new Cesium__namespace.Cartesian3)){const f=Cesium__namespace.Cartesian3.normalize(Cesium__namespace.Cartesian3.subtract(e,r,new Cesium__namespace[n(3916)]),new Cesium__namespace[n(3916)]),m=Cesium__namespace.Cartesian3[n(3029)](e,new Cesium__namespace[n(3916)]),g=Cesium__namespace.Cartesian3.cross(m,f,new Cesium__namespace[n(3916)]),C=Cesium__namespace[n(3916)].cross(f,m,new Cesium__namespace[n(s._0x34fb17)]),E=new Cesium__namespace.Ray(e,g),P=new Cesium__namespace.Ray(e,C);o=Cesium__namespace.Ray.getPoint(E,i),c=Cesium__namespace.Ray[n(s._0x37924f)](P,i)}else{const f=Cesium__namespace.Cartesian3[n(s._0x40269d)](h,new Cesium__namespace.Cartesian3),m=Cesium__namespace.Cartesian3[n(3029)](e,new Cesium__namespace[n(s._0x1b9f42)]),g=Cesium__namespace[n(3916)].cross(m,f,new Cesium__namespace.Cartesian3),C=Cesium__namespace.Cartesian3.cross(f,m,new Cesium__namespace.Cartesian3),E=new Cesium__namespace.Ray(e,g),P=new Cesium__namespace.Ray(e,C),w=Cesium__namespace[n(3916)].dot(_,l),M=Cesium__namespace.Cartesian3[n(4124)](_),T=Cesium__namespace.Cartesian3.magnitude(l),L=w/M/T,R=Cesium__namespace.Math[n(s._0x484c40)](Math.acos(L)),D=R/2,N=Math.cos(Cesium__namespace[n(1286)][n(1567)](D)),k=i*2/N;o=Cesium__namespace.Ray[n(4316)](E,k/2),c=Cesium__namespace.Ray.getPoint(P,k/2)}}return{left:o,right:c}}const DEF_STYLE$b={opacity:1,move:![],axisY:!![]};class Road extends DynamicRiver{constructor(e={}){e.style={...DEF_STYLE$b,...e.style||{}},super(e)}}register$4("road",Road);class PitWallGeometry{constructor(e={}){const t={_0x1c6011:515,_0x1ceac4:3402,_0x424feb:4104,_0x5d77ae:2658,_0x467469:4246,_0x2ec02a:3809},i=_0x5e32ae,s=e[i(3714)],n=e[i(2518)];Cesium__namespace.Check.defined(i(3161),n),Cesium__namespace.Check[i(t._0x1c6011)]("dimianmian",s),Cesium__namespace.Check.typeOf.number.greaterThanOrEquals("dingmian.length",n[i(t._0x1ceac4)],3),Cesium__namespace.Check.typeOf[i(t._0x424feb)].greaterThanOrEquals(i(t._0x5d77ae),s[i(3402)],3);const o=new Cesium__namespace.VertexFormat({st:!![],position:!![],bitangent:![],normal:![],color:![],tangent:![]});this._minimumArr=Cesium__namespace.clone(s),this._maximumArr=Cesium__namespace[i(t._0x467469)](n),this[i(3459)]=o,this[i(t._0x2ec02a)]=""}createGeometry(e,t,i,s=0){const n={_0x1f88f6:515,_0x1446a6:515,_0x387abe:1590,_0x917f97:4213,_0x557c8b:2407},o=_0x5e32ae,c=e._minimumArr,_=e._maximumArr,l=e._vertexFormat,h=new Cesium__namespace.GeometryAttributes;let f,m,g,C;if(Cesium__namespace.defined(l.position)&&Cesium__namespace[o(n._0x1f88f6)](l.st)){if(Cesium__namespace[o(n._0x1446a6)](l.position)){m=new Float64Array(_.length*4*3);for(let w=0;w<_.length;w++)w===_.length-1?(m[w*12+0]=_[w].x,m[w*12+1]=_[w].y,m[w*12+2]=_[w].z,m[w*12+3]=c[w].x,m[w*12+4]=c[w].y,m[w*12+5]=c[w].z,m[w*12+9]=c[0].x,m[w*12+10]=c[0].y,m[w*12+11]=c[0].z,m[w*12+6]=_[0].x,m[w*12+7]=_[0].y,m[w*12+8]=_[0].z):(m[w*12+0]=_[w].x,m[w*12+1]=_[w].y,m[w*12+2]=_[w].z,m[w*12+3]=c[w].x,m[w*12+4]=c[w].y,m[w*12+5]=c[w].z,m[w*12+9]=c[w+1].x,m[w*12+10]=c[w+1].y,m[w*12+11]=c[w+1].z,m[w*12+6]=_[w+1].x,m[w*12+7]=_[w+1].y,m[w*12+8]=_[w+1].z);h.position=new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace[o(n._0x387abe)].DOUBLE,componentsPerAttribute:3,values:m})}if(Cesium__namespace.defined(l.st)){const w=new Float32Array(_.length*4*2),M=_.length;for(let T=0;T<_[o(3402)];T++){const L=T/M,R=t&&t[T]||0,D=(R-i)/(s-i),N=T+1,k=t&&t[N]||0,B=N/M,$=(k-i)/(s-i);w[T*8+0]=L,w[T*8+1]=D-0,w[T*8+2]=L,w[T*8+3]=D-D,w[T*8+4]=B,w[T*8+5]=$-0,w[T*8+6]=B,w[T*8+7]=$-$}h.st=new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:w})}f=new Uint16Array(_.length*2*3),g=new Cesium__namespace.Cartesian3(9999999999999,9999999999999,9999999999999),C=new Cesium__namespace.Cartesian3(-9999999999999,-9999999999999,-9999999999999);for(let w=0;w<_.length;w++)f[w*6+0]=4*w+0,f[w*6+1]=4*w+1,f[w*6+2]=4*w+2,f[w*6+3]=4*w+1,f[w*6+4]=4*w+2,f[w*6+5]=4*w+3,_[w].x>=C.x&&_[w].y>=C.y&&_[w].z>=C.z&&(C=_[w]),c[w].x<=g.x&&c[w].y<=g.y&&c[w].z<=g.z&&(g=c[w])}const E=Cesium__namespace.Cartesian3.subtract(C,g,new Cesium__namespace.Cartesian3),P=Cesium__namespace.Cartesian3.magnitude(E)*.5;return new Cesium__namespace[o(n._0x917f97)]({attributes:h,indices:f,primitiveType:Cesium__namespace.PrimitiveType.TRIANGLES,boundingSphere:new Cesium__namespace[o(n._0x557c8b)](Cesium__namespace.Cartesian3[o(4069)],P)})}}class Pit extends BasePolyPrimitive{constructor(e={}){const t={_0xe15904:4114,_0x458ccc:2999},i=_0x5e32ae;super(e),this[i(t._0xe15904)][i(t._0x458ccc)]=this.style.diffHeight??10,this[i(t._0xe15904)].splitNum=this.style[i(3418)]??50}get czmObjectEx(){const e=_0x5e32ae,t=[];return this[e(3650)]&&t.push(this[e(3650)]),this._primitive_label&&t.push(this._primitive_label),t}get center(){return this[_0x5e32ae({_0x4c0f83:3303}._0x4c0f83)]}get diffHeight(){const e={_0x16e7a8:2999},t=_0x5e32ae;return this.style[t(e._0x16e7a8)]}set[_0x5e32ae(2999)](e){const t={_0x3dc259:3827,_0x4ccac7:3916},i=_0x5e32ae;this[i(4114)].diffHeight=e;const s=[],n=this._minHeight-e,o=this.wellData[i(t._0x3dc259)];for(let c=0,_=o.length;c<_;c++){const l=o[c];s.push(Cesium__namespace[i(t._0x4ccac7)].fromRadians(l[i(1640)],l.latitude,n))}this.wellData.bottomPositions=s,this._removePit(),this._createPit(this.wellData)}_getWellData(){const e={_0x1324e5:3026,_0x1efb82:2793},t=_0x5e32ae;if(this.positions.length===0)return;this._minHeight=getMinHeight(this.positions);const i=this._minHeight-this.diffHeight,s=[],n=[],o=[],c=interPolyline({scene:this._map.scene,positions:this.positions.concat(this.positions[0]),splitNum:this.style.splitNum});for(let _=0,l=c.length;_<l;_++){const h=Cesium__namespace.Cartographic.fromCartesian(c[_]);o[t(3759)](new Cesium__namespace[t(e._0x1324e5)](h.longitude,h.latitude)),n.push(Cesium__namespace.Cartesian3[t(e._0x1efb82)](h.longitude,h[t(3701)],i)),s[t(3759)](Cesium__namespace.Cartesian3.fromRadians(h.longitude,h.latitude,0))}return{cartoList:o,bottomPositions:n,wallTopPositions:s}}[_0x5e32ae(4158)](e){const t={_0x23c07e:736},i=_0x5e32ae;if(!this.show||!this.positions||this[i(2436)].length===0)return;const s=this._getWellData();this.wellData=s,this._createPit(s),this.style[i(t._0x23c07e)]&&this._addLabel()}_removedHook(){const e=_0x5e32ae;super._removedHook(),this[e(2246)]()}_removePit(){const e={_0x3006f5:3002},t=_0x5e32ae;this._primitive&&(this.primitiveCollection.remove(this[t(e._0x3006f5)]),delete this[t(3002)]),this[t(3650)]&&(this.primitiveCollection.remove(this[t(3650)]),delete this._bottomPrimitive)}_createPit(e){const t={_0x2dad5c:2690},i={_0x3534d1:3865,_0x38bf4a:3759,_0x58db77:2793,_0x42a5a9:960,_0x5dc3b5:2490,_0x2198bc:3332},s=_0x5e32ae;this._createBottomSurface(e.bottomPositions),this._map.hasTerrain?Cesium__namespace.sampleTerrainMostDetailed(this._map[s(1773)],e.cartoList).then(n=>{const o=s;if(!this.isAdded)return;const c=[];let _=-9999;const l=[];for(let h=0,f=n.length;h<f;h++){const m=n[h];c.push(m.height),_=Math.max(m[o(i._0x3534d1)],_),l[o(i._0x38bf4a)](Cesium__namespace[o(3916)][o(i._0x58db77)](m.longitude,m.latitude,m[o(3865)]))}this[o(i._0x42a5a9)]=_,this[o(i._0x5dc3b5)]=c,this[o(i._0x2198bc)](e[o(2690)],l)}):this[s(3332)](e[s(t._0x2dad5c)],e.wallTopPositions)}[_0x5e32ae(3332)](e,t){const i={_0x8a1c46:905,_0x21cc5c:4114,_0xb89d77:3002,_0x12b320:1101,_0x494063:1409},s=_0x5e32ae,n=this[s(i._0x8a1c46)]-this.diffHeight,o=this[s(i._0x21cc5c)][s(3776)]??1;let c=new PitWallGeometry({minimumArr:e,maximumArr:t});c=c.createGeometry(c,this._topHeights,n,this[s(960)]),this[s(i._0xb89d77)]&&this[s(930)].remove(this._primitive),this[s(3002)]=new Cesium__namespace[s(i._0x12b320)]({geometryInstances:new Cesium__namespace[s(2709)]({id:this.id,geometry:c}),appearance:new Cesium__namespace.MaterialAppearance({material:Cesium__namespace.Material.fromType(Cesium__namespace.Material[s(i._0x494063)],{image:this.style.image,color:Cesium__namespace.Color.WHITE.withAlpha(o)}),translucent:o!==1,faceForward:!![],flat:!![]})}),this.primitiveCollection.add(this._primitive),this.bindPickId(this._primitive)}[_0x5e32ae(2335)](e){const t={_0x4b985c:4114,_0xb28295:2709,_0x2a3516:1800,_0x370362:2920},i=_0x5e32ae;if(!e.length)return;const s=this[i(t._0x4b985c)][i(3776)]??1;this[i(3650)]&&this.primitiveCollection.remove(this._bottomPrimitive),this._bottomPrimitive=new Cesium__namespace.Primitive({geometryInstances:new Cesium__namespace[i(t._0xb28295)]({id:this.id,geometry:Cesium__namespace.PolygonGeometry[i(t._0x2a3516)]({vertexFormat:Cesium__namespace[i(t._0x370362)][i(812)],positions:e,perPositionHeight:!![]})}),appearance:new Cesium__namespace.MaterialAppearance({material:Cesium__namespace[i(1423)].fromType(Cesium__namespace.Material.ImageType,{image:this.style.imageBottom,color:Cesium__namespace[i(2200)].WHITE.withAlpha(s)}),translucent:s!==1,faceForward:!![],flat:!![]})}),this[i(930)].add(this._bottomPrimitive),this.bindPickId(this._bottomPrimitive)}_updateExOpacity(e){this[_0x5e32ae({_0x17d8f0:1548}._0x17d8f0)](this._bottomPrimitive,e)}_getDrawEntityClass(e,t){const i=_0x5e32ae;return e.style[i(513)]=e.style[i(797)],delete e.style.diffHeight,create$4("polygon",e)}}register$4("pit",Pit);const DEF_STYLE$a={dimensions_x:100,dimensions_y:100};class DoubleSidedPlane extends BasePointPrimitive{constructor(e={}){const t={_0x3f6943:4114},i=_0x5e32ae;e.style={...DEF_STYLE$a,...e[i(t._0x3f6943)]||{}},super(e)}_addedHook(e){const t={_0x3fbfa2:1590,_0x140760:2768,_0x23b47b:3002},i=_0x5e32ae;if(!this.show)return;const s=[0,-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0,.5,-.5,0,-.5,-.5,0,-.5,.5,0,.5,.5],n=[0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1],o=[0,1,2,0,2,3,4,5,6,4,6,7],c=new Cesium__namespace[i(4213)]({attributes:{position:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace[i(t._0x3fbfa2)].DOUBLE,componentsPerAttribute:3,values:new Float64Array(s)}),st:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace[i(t._0x3fbfa2)][i(2816)],componentsPerAttribute:2,values:new Float32Array(n)})},indices:new Uint16Array(o),primitiveType:Cesium__namespace.PrimitiveType.TRIANGLES,boundingSphere:Cesium__namespace.BoundingSphere[i(t._0x140760)](s)}),_=new Cesium__namespace[i(1423)]({fabric:{type:"Image",uniforms:{image:e.image,opacity:e.opacity??1,color:Cesium__namespace.Color.WHITE,speed:e.speed||0,flipx:e.flipx??![],flipy:e.flipy??![],noWhite:e.noWhite??!![],globalAlpha:1},source:ImageMaterial}});this._primitive=new Cesium__namespace.Primitive({geometryInstances:new Cesium__namespace.GeometryInstance({geometry:c}),appearance:new Cesium__namespace.MaterialAppearance({translucent:!![],closed:!![],flat:!![],...this.style,material:_}),modelMatrix:this.modelMatrix,show:this.show}),this.primitiveCollection[i(4084)](this[i(t._0x23b47b)])}[_0x5e32ae(2179)](e,t){const i={_0x4e2c7a:2405,_0x1b48f8:4204,_0x1ce713:1418,_0x586cb0:3160,_0x666f46:4114},s=_0x5e32ae;if(!e)return Cesium__namespace.Matrix4[s(i._0x4e2c7a)];const n=Cesium__namespace.Math.toRadians(this.style.heading||0),o=Cesium__namespace.Math.toRadians(this[s(4114)].pitch||0),c=Cesium__namespace[s(1286)].toRadians(this.style.roll||0);this._heading_reality=n,this._pitch_reality=o,this[s(i._0x1b48f8)]=c;const _=Cesium__namespace.Transforms[s(i._0x1ce713)](e,new Cesium__namespace.HeadingPitchRoll(n,o,c),Cesium__namespace.Ellipsoid.WGS84,this[s(3798)].fixedFrameTransform),l=Cesium__namespace.Matrix4[s(i._0x586cb0)](new Cesium__namespace.Cartesian3(1,this.style.dimensions_x,this[s(i._0x666f46)].dimensions_y));return Cesium__namespace.Matrix4.multiply(_,l,new Cesium__namespace.Matrix4)}[_0x5e32ae(4148)](e,t){return create$4(_0x5e32ae(3381),e)}}register$4("doubleSidedPlane",DoubleSidedPlane,!![]);var ReflectionWaterFS=`uniform sampler2D reflexTexture; // 反射贴图
uniform sampler2D normalTexture; // 法线贴图
uniform float time;

uniform mat4 fixedFrameToEastNorthUpTransform; // 水面的东北天矩阵的逆矩阵

// 从顶点着色器传来的
in vec4 v_worldPosition; // 当前像素的世界坐标
in vec4 v_uv; // 原本的纹理坐标乘以贴图矩阵

// 可配置的参数
uniform float ripple; // 波纹大小（数值越大波纹越密集）
uniform vec4 waterColor; // 水面颜色
uniform float waterAlpha; // 水面透明度
uniform float reflectivity; // 水面反射率
uniform vec3 lightDirection; // 光照方向
uniform float shiny; // 光照强度
uniform float distortion; // 倒影的扭曲程度
uniform float globalAlpha;

const vec3 sunColor = vec3(1.0);

// 获取噪声
// vec4 czm_getWaterNoise(sampler2D normalMap, vec2 uv, float time, float angleInRadians)
vec4 mars3d_getNoise(sampler2D normalMap, vec2 uv) {
  vec2 uv0 = (uv / 103.0) + vec2(time / 17.0, time / 29.0);
  vec2 uv1 = uv / 107.0 - vec2(time / -19.0, time / 31.0);
  vec2 uv2 = uv / vec2(8907.0, 9803.0) + vec2(time / 101.0, time / 97.0);
  vec2 uv3 = uv / vec2(1091.0, 1027.0) - vec2(time / 109.0, time / -113.0);
  vec4 noise = texture(normalMap, uv0) +
    texture(normalMap, uv1) +
    texture(normalMap, uv2) +
    texture(normalMap, uv3);
  return noise * 0.5 - 1.0;
}

void mars3d_sunLight(const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor) {
  vec3 sunDirection = normalize(lightDirection);
  vec3 reflection = normalize(reflect(-sunDirection, surfaceNormal));  // 获得太阳对表面法线的反射向量
  float direction = max(0.0, dot(eyeDirection, reflection));  // 当太阳反射方向和眼睛的方向一致时，direction 最大，为 1，当角度大于 90度时最小，最小为 0
  specularColor += pow(direction, shiny) * sunColor * spec;
  diffuseColor += max(dot(sunDirection, surfaceNormal), 0.0) * sunColor * diffuse;
}

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);

    // 通过法线贴图计算新的表面法线
  vec2 transformedSt = materialInput.st * 2.0 - 1.0;  // [0, 1] => [-1, 1]
  vec4 noise = mars3d_getNoise(normalTexture, transformedSt * ripple);
  vec3 surfaceNormal = normalize(noise.xzy);  // [0, +1]，Y up

    // 漫反射光
  vec3 diffuseLight = vec3(0.0);
    // 高光
  vec3 specularLight = vec3(0.0);

    // 获取视线方向（世界坐标）
  vec3 eye = (czm_inverseView * vec4(vec3(0.0), 1.0)).xyz;
    // 获取视线方向（水面的本地坐标）
  eye = (fixedFrameToEastNorthUpTransform * vec4(eye, 1.0)).xyz;
    // 当前像素的本地坐标
  vec3 world = (fixedFrameToEastNorthUpTransform * vec4(v_worldPosition.xyz, 1.0)).xyz;

  vec3 worldToEye = eye - world;  // east, north, up
  worldToEye = vec3(worldToEye.x, worldToEye.z, -worldToEye.y);  // Y up
  vec3 eyeDirection = normalize(worldToEye);

  float spec = 2.0;
  float diffuse = 0.5;
  mars3d_sunLight(surfaceNormal, eyeDirection, shiny, spec, diffuse, diffuseLight, specularLight);

  float distance = length(worldToEye);
  vec2 distortion = surfaceNormal.xz * (0.001 + 1.0 / distance) * distortion;
  vec3 reflectionSample = vec3(texture(reflexTexture, (v_uv.xy / v_uv.w) * 0.5 + 0.5 + distortion));

  float theta = max(dot(eyeDirection, surfaceNormal), 0.0);
  float reflectivity = reflectivity;
  float reflectance = mix(reflectivity, 1.0, pow(1.0 - theta, 5.0));

    // surfaceNormal 是以反射平面为 X-Y 平面的，
    // 所以 eyeDirection 也得是以反射平面为 X-Y 平面。
  vec3 scatter = max(0.0, dot(surfaceNormal, eyeDirection)) * waterColor.rgb;
  vec3 albedo = mix(sunColor * diffuseLight * 0.3 + scatter, vec3(0.1) + reflectionSample * 0.9 + reflectionSample * specularLight, reflectance);
  material.diffuse = albedo.rgb;
  material.alpha = waterAlpha* globalAlpha;

  return material;
}
`,ReflectionWaterVS=`in vec3 position3DHigh;
in vec3 position3DLow;
in vec3 normal;
in vec2 st;
in float batchId;

out vec3 v_positionEC;
out vec3 v_normalEC;
out vec2 v_st;

uniform mat4 reflectorProjectionMatrix;
uniform mat4 reflectorViewMatrix;
uniform mat4 reflectMatrix;
out vec4 v_worldPosition;  // 世界坐标
out vec4 v_uv;             // 纹理坐标

void main() {
  vec4 p = czm_computePosition();

  v_positionEC = (czm_modelViewRelativeToEye * p).xyz;      // position in eye coordinates
  v_normalEC = czm_normal * normal;                         // normal in eye coordinates
  v_st = st;

  mat4 modelView = reflectorViewMatrix * reflectMatrix * czm_model;
  modelView[3][0] = 0.0;
  modelView[3][1] = 0.0;
  modelView[3][2] = 0.0;
  v_uv = reflectorProjectionMatrix * modelView * p;
  vec4 positionMC = vec4(position3DHigh + position3DLow, 1.0);
  v_worldPosition = czm_model * positionMC;

  gl_Position = czm_modelViewProjectionRelativeToEye * p;
}
`;class ReflectionWater extends PolygonPrimitive{get height(){return this._height}set[_0x5e32ae(3865)](e){const t={_0x51f605:490,_0x3639e6:2337,_0x3b80aa:490,_0x610296:490,_0x53ab8d:2337,_0x448538:490,_0x5ac789:2776},i=_0x5e32ae;this._height=e;const s=Cesium__namespace.Cartographic[i(3236)](this[i(2921)]),n=Cesium__namespace.Cartesian3.fromRadians(s.longitude,s.latitude,this._height),o=Cesium__namespace.Cartesian3.subtract(n,this._originalreflectorWorldPosition,new Cesium__namespace.Cartesian3),c=Cesium__namespace.Matrix4.fromTranslation(o);this._primitive.modelMatrix=c,this._reflectorWorldPosition=n,this[i(1821)]=Cesium__namespace.Ellipsoid.WGS84.geodeticSurfaceNormal(this._reflectorWorldPosition),this[i(t._0x51f605)]=Cesium__namespace.Plane.fromPointNormal(this._reflectorWorldPosition,this._normal),this._reflectMatrix=new Cesium__namespace[i(4102)](-2*this._waterPlane.normal.x*this[i(490)].normal.x+1,-2*this._waterPlane.normal.x*this._waterPlane[i(t._0x3639e6)].y,-2*this._waterPlane.normal.x*this[i(t._0x3b80aa)].normal.z,-2*this._waterPlane[i(2337)].x*this._waterPlane.distance,-2*this[i(490)].normal.y*this[i(t._0x610296)].normal.x,-2*this._waterPlane[i(t._0x3639e6)].y*this._waterPlane[i(t._0x3639e6)].y+1,-2*this._waterPlane.normal.y*this._waterPlane.normal.z,-2*this._waterPlane.normal.y*this._waterPlane[i(2776)],-2*this._waterPlane[i(t._0x3639e6)].z*this._waterPlane[i(t._0x3639e6)].x,-2*this._waterPlane.normal.z*this._waterPlane[i(2337)].y,-2*this._waterPlane[i(t._0x53ab8d)].z*this._waterPlane.normal.z+1,-2*this._waterPlane.normal.z*this[i(t._0x448538)][i(t._0x5ac789)],0,0,0,1)}_updateStyleHook(e,t){const i={_0x31a345:476,_0x3bea44:2386,_0x1cf0da:2386,_0x119ecf:2221,_0x328b8e:515,_0x5bf399:3865},s=_0x5e32ae;Cesium__namespace.defined(t.color)&&(this[s(2386)].uniforms[s(i._0x31a345)]=getCesiumColor(e.color,Cesium__namespace.Color.fromCssColorString("#001e0f"))),Cesium__namespace.defined(t.opacity)&&(this[s(i._0x3bea44)][s(2221)].waterAlpha=e.opacity),Cesium__namespace.defined(t.reflectivity)&&(this[s(i._0x1cf0da)][s(i._0x119ecf)].reflectivity=e.reflectivity),Cesium__namespace[s(i._0x328b8e)](t.lightDirection)&&(this._material.uniforms[s(1014)]=e.lightDirection),Cesium__namespace.defined(t.shiny)&&(this._material.uniforms.shiny=e.shiny),Cesium__namespace.defined(t.distortion)&&(this[s(2386)].uniforms.distortion=e.distortion),Cesium__namespace[s(i._0x328b8e)](t[s(3865)])&&(this[s(3865)]=t[s(i._0x5bf399)])}_addedHook(e){const t=_0x5e32ae;!this.show||!this.positions||this.positions.length===0||(this._bindFun(),this._createPrimitive(e),this[t(4081)]())}_removedHook(){const e={_0x2d96e0:3002,_0x3e6f31:2141},t=_0x5e32ae;this.unbindUpdateEvent(),this[t(e._0x2d96e0)]&&(this.primitiveCollection.remove(this[t(e._0x2d96e0)]),delete this._primitive),this[t(e._0x3e6f31)](),this._unbindFun()}_createPrimitive(e){const t={_0x5c92af:515,_0x36c7f9:3949,_0x3ee989:557,_0x55ecf4:1821,_0x22dcaf:490,_0x174c4b:2337,_0x5d4739:2337,_0x4f997a:2337,_0xf743a5:1212,_0x3a064c:4102,_0x2828db:3912,_0x365572:3842,_0x3b70ce:3735,_0x4cd354:2908,_0x3d3f1a:3776,_0x499b9f:3552,_0x1fdcf8:2386,_0x5c0fba:2221,_0xfcd8a8:519,_0xbb1ac3:2320,_0x23b2f7:4102,_0x4d19eb:4102},i=_0x5e32ae,s=this[i(1332)](e);s.vertexFormat=Cesium__namespace.EllipsoidSurfaceAppearance.POSITION_NORMAL_AND_ST;let n=0;Cesium__namespace[i(t._0x5c92af)](this[i(4114)].height)?n=this.style.height:n=getMaxHeight(this.positions),this._height=n,this[i(t._0x36c7f9)]=this[i(4064)],this._originalreflectorWorldPosition=this[i(3949)].clone(),this._normal=Cesium__namespace.Ellipsoid[i(t._0x3ee989)].geodeticSurfaceNormal(this._reflectorWorldPosition),this[i(490)]=Cesium__namespace.Plane.fromPointNormal(this._reflectorWorldPosition,this[i(t._0x55ecf4)]),this._reflectMatrix=new Cesium__namespace[i(4102)](-2*this._waterPlane.normal.x*this._waterPlane.normal.x+1,-2*this._waterPlane.normal.x*this[i(t._0x22dcaf)].normal.y,-2*this._waterPlane.normal.x*this[i(t._0x22dcaf)].normal.z,-2*this._waterPlane.normal.x*this._waterPlane[i(2776)],-2*this._waterPlane.normal.y*this[i(490)][i(t._0x174c4b)].x,-2*this._waterPlane[i(2337)].y*this._waterPlane.normal.y+1,-2*this._waterPlane.normal.y*this._waterPlane[i(t._0x5d4739)].z,-2*this._waterPlane.normal.y*this._waterPlane.distance,-2*this._waterPlane.normal.z*this._waterPlane.normal.x,-2*this._waterPlane.normal.z*this._waterPlane.normal.y,-2*this[i(t._0x22dcaf)].normal.z*this._waterPlane[i(t._0x4f997a)].z+1,-2*this[i(490)].normal.z*this[i(490)].distance,0,0,0,1),this[i(t._0xf743a5)]=Cesium__namespace.Matrix4[i(2405)][i(4246)](),this._reflectorProjectionMatrix=Cesium__namespace[i(t._0x3a064c)].IDENTITY.clone();const o=this._map.scene.context;this._createFramebuffer(o,o.drawingBufferWidth,o.drawingBufferHeight,this._map.scene[i(t._0x2828db)]);const c=new Cesium__namespace.Texture({context:o,source:{width:1,height:1,arrayBufferView:new Uint8Array([255,0,0,255])},sampler:new Cesium__namespace.Sampler({wrapS:Cesium__namespace.TextureWrap[i(t._0x365572)],wrapT:Cesium__namespace.TextureWrap.REPEAT,minificationFilter:Cesium__namespace.TextureMinificationFilter.LINEAR,magnificationFilter:Cesium__namespace.TextureMinificationFilter.LINEAR})});c.type=i(t._0x3b70ce);const _=Cesium__namespace.Texture.fromFramebuffer({context:o,framebuffer:this._colorFramebuffer});_.type="sampler2D";const l=new Cesium__namespace.Material({fabric:{type:i(1892),uniforms:{waterColor:getCesiumColor(e.color,Cesium__namespace.Color.fromCssColorString(i(t._0x4cd354))),waterAlpha:e[i(t._0x3d3f1a)]??.9,globalAlpha:1,ripple:e.ripple??50,reflectivity:e.reflectivity??.5,lightDirection:e.lightDirection??new Cesium__namespace.Cartesian3(0,0,1),shiny:e.shiny??100,distortion:e.distortion??3.7,normalTexture:c,reflexTexture:_,time:0,fixedFrameToEastNorthUpTransform:Cesium__namespace.Matrix4.toArray(this._getFixedFrameToEastNorthUpTransformFromWorldMatrix())},source:ReflectionWaterFS},translucent:![],minificationFilter:Cesium__namespace[i(1036)][i(t._0x499b9f)],magnificationFilter:Cesium__namespace.TextureMagnificationFilter[i(3552)]});addTextureUniform({material:l,context:o,uniformName:"normalTexture",image:e.normalMap??"/img/textures/waterNormals.jpg"}),this[i(t._0x1fdcf8)]=l;const h=new Cesium__namespace.MaterialAppearance({material:l,vertexShaderSource:ReflectionWaterVS,translucent:!![]});h.uniforms={},h[i(t._0x5c0fba)][i(2901)]=Cesium__namespace.Matrix4.toArray(this[i(t._0xfcd8a8)]),h[i(t._0x5c0fba)][i(t._0xbb1ac3)]=Cesium__namespace[i(t._0x23b2f7)].toArray(this._reflectorProjectionMatrix),h[i(2221)].reflectorViewMatrix=Cesium__namespace[i(t._0x4d19eb)].toArray(this._reflectorViewMatrix);const f={geometryInstances:this[i(485)](s),appearance:h,asynchronous:![],show:this[i(575)]};this._primitive=this.primitiveCollection[i(4084)](new Cesium__namespace[i(1101)](f))}[_0x5e32ae(932)](e){const t={_0x46543a:1145,_0x3f8c78:575,_0x1f66d1:2792,_0x56f57c:3521,_0xf08ee4:2374,_0x2e1e46:2386,_0x9c1ad0:2221,_0x31df58:876,_0x3a6ada:1212,_0x5b0be7:1329},i=_0x5e32ae,s=this._map.scene,n=s._defaultView.camera,o=s[i(3681)],c=s.globe.show,_=s[i(1329)].showSkirts,l=s[i(2103)];if(!this[i(432)](s[i(t._0x46543a)][i(2792)])){this._primitive.show=![];return}this._primitive[i(t._0x3f8c78)]=![],s._defaultView[i(t._0x1f66d1)]=this._virtualCamera,s.shadowMap=void 0,s.globe.show=![],s.globe.showSkirts=![],s.logarithmicDepthBuffer=![];const h=s[i(t._0x56f57c)],f=h.drawingBufferWidth,m=h.drawingBufferHeight,g=s.highDynamicRange;this._createFramebuffer(h,f,m,g),render(s,this._colorFramebuffer);const C=this._primitive[i(t._0xf08ee4)],E=Cesium__namespace.Texture.fromFramebuffer({context:h,framebuffer:this._colorFramebuffer});E[i(3205)]="sampler2D",this[i(t._0x2e1e46)].uniforms.reflexTexture=E,this._material[i(t._0x9c1ad0)][i(1572)]=performance.now()/1e3,this._material.uniforms.fixedFrameToEastNorthUpTransform=Cesium__namespace.Matrix4[i(725)](this._getFixedFrameToEastNorthUpTransformFromWorldMatrix()),C[i(2221)].reflectMatrix=Cesium__namespace.Matrix4.toArray(this[i(519)]),C[i(2221)].reflectorProjectionMatrix=Cesium__namespace.Matrix4.toArray(this._reflectorProjectionMatrix),C[i(2221)][i(t._0x31df58)]=Cesium__namespace.Matrix4.toArray(this[i(t._0x3a6ada)]),this._primitive.show=!![],s[i(1145)].camera=n,s.shadowMap=o,s.globe.show=c,s[i(t._0x5b0be7)][i(1747)]=_,s.logarithmicDepthBuffer=l}[_0x5e32ae(432)](e){const t={_0x3f9dac:3949,_0x280666:3616,_0x13669e:3029,_0x522c40:3916,_0x1b0546:3916,_0x2ba0fe:2982,_0x5b9f2d:3616},i=_0x5e32ae,s=new Cesium__namespace[i(3916)](0,0,-1);let n=new Cesium__namespace.Cartesian3;this._virtualCamera=Cesium__namespace.Camera.clone(e,this[i(3616)]);const o=e.positionWC.clone();let c=Cesium__namespace.Cartesian3[i(1531)](this._reflectorWorldPosition,o,new Cesium__namespace.Cartesian3);if(Cesium__namespace.Cartesian3.dot(c,this._normal)>0)return![];c=getReflectVector(c,this._normal),Cesium__namespace[i(3916)].negate(c,c),Cesium__namespace.Cartesian3[i(4084)](c,this._reflectorWorldPosition,c),this._virtualCamera[i(2180)]=c.clone(),Cesium__namespace[i(3916)].add(e.directionWC,o,s),Cesium__namespace.Cartesian3.subtract(this[i(t._0x3f9dac)],s,n),n=getReflectVector(n,this[i(1821)]),Cesium__namespace[i(3916)].negate(n,n),Cesium__namespace.Cartesian3.add(n,this._reflectorWorldPosition,n),this._virtualCamera.direction=Cesium__namespace.Cartesian3.subtract(n,this[i(t._0x280666)].position,new Cesium__namespace.Cartesian3),Cesium__namespace.Cartesian3[i(t._0x13669e)](this._virtualCamera[i(3858)],this._virtualCamera.direction),Cesium__namespace.Cartesian3.add(e.upWC,o,s),Cesium__namespace[i(t._0x522c40)].subtract(this[i(3949)],s,n),n=getReflectVector(n,this._normal),Cesium__namespace.Cartesian3[i(2633)](n,n),Cesium__namespace.Cartesian3.add(n,this._reflectorWorldPosition,n),this._virtualCamera.up=Cesium__namespace[i(t._0x1b0546)].subtract(n,this[i(t._0x280666)].position,new Cesium__namespace.Cartesian3),Cesium__namespace.Cartesian3[i(3029)](this._virtualCamera.up,this._virtualCamera.up),this[i(3877)]=this._virtualCamera.frustum.projectionMatrix,this._reflectorViewMatrix=this[i(3616)][i(t._0x2ba0fe)];const _=Cesium__namespace[i(3442)].fromPointNormal(this._reflectorWorldPosition,this._normal);Cesium__namespace.Plane[i(683)](_,this[i(3616)].viewMatrix,_);const l=new Cesium__namespace[i(1720)](_.normal.x,_.normal.y,_[i(2337)].z,_.distance),h=Cesium__namespace.Matrix4.clone(this._virtualCamera[i(2801)].projectionMatrix),f=new Cesium__namespace.Cartesian4((Math.sign(l.x)+h[8])/h[0],(Math.sign(l.y)+h[9])/h[5],-1,(1+h[10])/h[14]);Cesium__namespace[i(1720)].multiplyByScalar(l,2/Cesium__namespace.Cartesian4.dot(l,f),l);const m=0;return h[2]=l.x,h[6]=l.y,h[10]=l.z+1-m,h[14]=l.w,this[i(t._0x5b9f2d)].frustum.customProjectionMatrix=Cesium__namespace.Matrix4.clone(h),!![]}_getFixedFrameToEastNorthUpTransformFromWorldMatrix(){const e={_0xdbcb27:2911},t=_0x5e32ae,i=Cesium__namespace[t(e._0xdbcb27)].eastNorthUpToFixedFrame(this._reflectorWorldPosition);return Cesium__namespace[t(4102)].inverse(i,new Cesium__namespace.Matrix4)}_createFramebuffer(e,t,i,s){const n={_0x4ab9a7:2473,_0x38fc97:2473,_0xad96a:2816,_0x311484:1253,_0x426fdb:3644},o=_0x5e32ae,c=this._colorTexture;if(Cesium__namespace.defined(c)&&c.width===t&&c.height===i&&this[o(n._0x4ab9a7)]===s)return;this._destroyResource(),this[o(n._0x38fc97)]=s;let _;s?_=e[o(1919)]?Cesium__namespace.PixelDatatype.HALF_FLOAT:Cesium__namespace.PixelDatatype[o(n._0xad96a)]:_=Cesium__namespace.PixelDatatype.UNSIGNED_BYTE,this._colorTexture=new Cesium__namespace.Texture({context:e,width:t,height:i,pixelFormat:Cesium__namespace.PixelFormat.RGBA,pixelDatatype:_,sampler:new Cesium__namespace[o(n._0x311484)]({wrapS:Cesium__namespace.TextureWrap.CLAMP_TO_EDGE,wrapT:Cesium__namespace.TextureWrap[o(n._0x426fdb)],minificationFilter:Cesium__namespace.TextureMinificationFilter[o(3552)],magnificationFilter:Cesium__namespace[o(2346)].LINEAR})}),this[o(1496)]=new Cesium__namespace.Texture({context:e,width:t,height:i,pixelFormat:Cesium__namespace.PixelFormat[o(2600)],pixelDatatype:Cesium__namespace.PixelDatatype.UNSIGNED_INT_24_8}),this[o(4212)]=new Cesium__namespace.Framebuffer({context:e,colorTextures:[this._colorTexture],depthStencilTexture:this._depthStencilTexture,destroyAttachments:![]})}_destroyResource(){const e={_0x174709:1496,_0x334486:4212},t=_0x5e32ae;this._colorTexture&&this._colorTexture.destroy(),this[t(572)]=void 0,this[t(e._0x174709)]&&this._depthStencilTexture.destroy(),this[t(e._0x174709)]=void 0,this._colorFramebuffer&&this._colorFramebuffer[t(757)](),this[t(e._0x334486)]=void 0}[_0x5e32ae(1669)](){const e={_0x439a5b:515,_0x299042:4246,_0x1303cf:3458,_0xa867f8:3147,_0x289e61:2893},t=_0x5e32ae;this[t(417)]=Cesium__namespace.UniformState.prototype.updateFrustum,Cesium__namespace.UniformState.prototype.updateFrustum=function(s){const n=t;Cesium__namespace.Matrix4[n(4246)](Cesium__namespace.defaultValue(s.customProjectionMatrix,s.projectionMatrix),this._projection),this._inverseProjectionDirty=!![],this._viewProjectionDirty=!![],this._inverseViewProjectionDirty=!![],this._modelViewProjectionDirty=!![],this._modelViewProjectionRelativeToEyeDirty=!![],Cesium__namespace[n(e._0x439a5b)](s.infiniteProjectionMatrix)&&(Cesium__namespace.Matrix4[n(e._0x299042)](s.infiniteProjectionMatrix,this._infiniteProjection),this[n(1383)]=!![]),this._currentFrustum.x=s[n(1392)],this._currentFrustum.y=s.far,this._farDepthFromNearPlusOne=s[n(1876)]-s.near+1,this._log2FarDepthFromNearPlusOne=Cesium__namespace.Math.log2(this[n(e._0x1303cf)]),this[n(2312)]=1/this[n(2495)],Cesium__namespace[n(e._0x439a5b)](s._offCenterFrustum)&&(s=s._offCenterFrustum),this._frustumPlanes.x=s.top,this._frustumPlanes.y=s[n(3975)],this._frustumPlanes.z=s.left,this[n(e._0xa867f8)].w=s[n(e._0x289e61)]};const i=Cesium__namespace.PerspectiveFrustum[t(2392)].clone;Cesium__namespace.PerspectiveFrustum.prototype.clone=function(s){return s=i[t(2749)](this)(s),s.customProjectionMatrix=this.customProjectionMatrix,s},this[t(2149)]=i}_unbindFun(){Cesium__namespace.UniformState.prototype.updateFrustum=this._UniformState_updateFrustum_old,Cesium__namespace.PerspectiveFrustum.prototype.clone=this._PerspectiveFrustum_clone_old}_getDrawEntityClass(e,t){return e.style.materialType="Water",create$4("polygon",e)}}register$4("reflectionWater",ReflectionWater);const scratchBackgroundColor=new Cesium__namespace.Color,renderTilesetPassState=new Cesium__namespace.Cesium3DTilePassState({pass:Cesium__namespace.Cesium3DTilePass.RENDER});function render(r,e){const t={_0x3c7a18:3018,_0x4c8cc1:1052,_0x4a1889:496,_0x2ea6f5:1092,_0x2c37f6:4246,_0x588fe2:3344,_0x54d76c:4005,_0x2fa444:1329},i=_0x5e32ae,s=r._frameState,n=r[i(3521)],o=n.uniformState,c=r._defaultView;r._view=c,r[i(t._0x3c7a18)](),s.passes.render=!![],s.passes.postProcess=r.postProcessStages.hasSelected,s.tilesetPassState=renderTilesetPassState;let _=r.backgroundColor??Cesium__namespace.Color.BLACK;r._hdr&&(_=Cesium__namespace.Color.clone(_,scratchBackgroundColor),_.red=Math.pow(_.red,r.gamma),_.green=Math[i(3484)](_[i(2867)],r.gamma),_.blue=Math.pow(_.blue,r[i(t._0x4c8cc1)])),s.backgroundColor=_,r[i(t._0x4a1889)].update(s),o.update(s);const l=r[i(3681)];Cesium__namespace.defined(l)&&l.enabled&&(!Cesium__namespace.defined(r[i(1092)])||r[i(t._0x2ea6f5)]instanceof Cesium__namespace.SunLight?Cesium__namespace.Cartesian3[i(2633)](o.sunDirectionWC,r._shadowMapCamera.direction):Cesium__namespace[i(3916)][i(t._0x2c37f6)](r.light.direction,r[i(1240)].direction),s[i(t._0x588fe2)].push(l)),r._computeCommandList[i(3402)]=0,r._overlayCommandList[i(3402)]=0;const h=c.viewport;h.x=0,h.y=0,h[i(t._0x54d76c)]=n.drawingBufferWidth,h[i(3865)]=n.drawingBufferHeight;const f=c.passState;f.framebuffer=e,f.blendingEnabled=void 0,f[i(1651)]=void 0,f.viewport=Cesium__namespace.BoundingRectangle.clone(h,f.viewport),Cesium__namespace.defined(r.globe)&&r.globe[i(558)](s),r[i(846)](),r.updateAndExecuteCommands(f,_),r.resolveFramebuffers(f),Cesium__namespace.defined(r.globe)&&(r[i(t._0x2fa444)].endFrame(s),!r.globe.tilesLoaded&&(r._renderRequested=!![])),n.endFrame()}class EditPolygonGrid extends EditPoly{get hasClosure(){const e=_0x5e32ae;return this._graphic[e(1739)]??!![]}get clampToGround(){return![]}bindDraggers(){const e={_0x4e5d1e:4063},t=_0x5e32ae,i=this.getGridPositions(this.positions);for(let s=0,n=i.length;s<n;s++){const o=this.updatePositionsHeightByAttr(i[s]),c=this.createDragger({position:o,onDrag:(_,l)=>{const h=_0x5210;l=this.updatePositionsHeightByAttr(l),_.position=l,i[_.index]=l,this[h(4268)](l,_[h(e._0x4e5d1e)])}});c.index=s,this[t(4209)][t(3759)](c)}}}const DEF_STYLE$9={opacity:1,globalAlpha:1};class VideoPrimitive extends BasePolyPrimitive{constructor(e={}){const t={_0x428a71:902},i=_0x5e32ae;e.style={...DEF_STYLE$9,...e.style||{}},super(e),this[i(t._0x428a71)]=4,this.maxPointNum=4,this._grids=e.grids??4,this._useROI=![],this._reverseROI=![],this._roiUV=[[0,1],[1,1],[1,0],[0,0]]}get czmObject(){return this._primitive}get rois(){const e=_0x5e32ae;return this.options[e(4178)]}set rois(e){const t={_0x461dcc:3798},i={_0x1a8b7a:3611},s=_0x5e32ae;if(this[s(t._0x461dcc)].rois=e,(e==null?void 0:e.length)>0){let n=[];e.forEach(o=>{n=n[s(i._0x1a8b7a)]([o[0],o[1],0,0])}),this._roiUV=n,this._useROI=!![]}else this._roiUV=[[0,1],[1,1],[1,0],[0,0]],this._useROI=![];this.update()}_addedHook(e){const t={_0x4041ab:2281,_0x58333d:2414,_0x3c23d4:930},i=_0x5e32ae,s=this.positions;if(!this.show||!s||s.length===0)return;this.updateVideoContainer();const{positions:n,uv:o,indice:c}=getGridPositions(s,this[i(2525)]);this[i(3086)]=n,this[i(2343)]=o,this._indice=c,this[i(3002)]&&(this.primitiveCollection.remove(this[i(3002)]),delete this[i(3002)]),this._primitive=this[i(t._0x4041ab)](),this[i(t._0x58333d)](this._primitive),this[i(t._0x3c23d4)].add(this._primitive)}_removedHook(){const e=_0x5e32ae;this.stopEditingGrid(),this._primitive&&(this.primitiveCollection[e(2004)](this._primitive),delete this._primitive)}[_0x5e32ae(4034)](e){const t={_0x4404fe:4158,_0x4f1fd8:4114},i=_0x5e32ae;return this.isAdded&&this.show&&this[i(t._0x4404fe)](e||this[i(t._0x4f1fd8)]),this}update(){const e={_0x33ef38:930,_0x1ea5b9:3002},t=_0x5e32ae;this._primitive&&this[t(e._0x33ef38)].remove(this._primitive),this[t(e._0x1ea5b9)]=this._createVideoPrimitive(),this.primitiveCollection[t(4084)](this._primitive)}[_0x5e32ae(2281)](){const e={_0x1652e4:1590,_0x39c622:1112,_0x2a9466:2816,_0x1aba85:3493,_0x9dc45b:3747,_0x5bd855:1423,_0x415cec:2221,_0x4786b0:1890,_0x2ff5cb:2478,_0x5c4de0:817,_0x54d817:1070,_0x43f851:3252,_0x2a2911:2414},t={_0x31e5ef:3776},i={_0xb9b95b:996},s={_0xb132e6:3473},n=_0x5e32ae,o=this._positions_grid.length,c=new Float64Array(o*3);for(let E=0;E<o;++E)c[E*3]=this._positions_grid[E].x,c[E*3+1]=this._positions_grid[E].y,c[E*3+2]=this[n(3086)][E].z;const _=new Cesium__namespace.Geometry({attributes:{position:new Cesium__namespace[n(1112)]({componentDatatype:Cesium__namespace[n(e._0x1652e4)].DOUBLE,componentsPerAttribute:3,values:c}),st:new Cesium__namespace[n(e._0x39c622)]({componentDatatype:Cesium__namespace[n(1590)][n(e._0x2a9466)],componentsPerAttribute:2,values:new Float32Array(this._uv)})},indices:new Uint16Array(this._indice),primitiveType:Cesium__namespace.PrimitiveType.TRIANGLES,boundingSphere:Cesium__namespace[n(2407)].fromVertices(c)}),l=new Cesium__namespace[n(2709)]({id:this.id,geometry:_,attributes:{show:new Cesium__namespace.ShowGeometryInstanceAttribute(this.show),distanceDisplayCondition:new Cesium__namespace[n(2632)](Number(this.style[n(e._0x1aba85)]??0),Number(this.style[n(3041)]??Number[n(e._0x9dc45b)]))}}),h=Cesium__namespace[n(e._0x5bd855)].fromType("Image");h.uniforms.image=this._videoContainer;const f=new Float32Array(this._roiUV),m=f.length/4;h[n(e._0x415cec)].roiUV=new Cesium__namespace.Texture({context:this[n(e._0x4786b0)].scene.context,source:{width:m,height:1,arrayBufferView:f},pixelDatatype:Cesium__namespace[n(e._0x2ff5cb)].FLOAT}),h[n(1070)][n(2480)]=()=>{const E=n;return h.uniforms[E(s._0xb132e6)]},h._uniforms.useROI=()=>this[n(i._0xb9b95b)],h._uniforms[n(e._0x5c4de0)]=()=>this._reverseROI,h[n(e._0x54d817)].opacity=()=>{const E=n;return this.style[E(t._0x31e5ef)]},h._uniforms[n(e._0x43f851)]=()=>this.style.globalAlpha??1,h.shaderSource=`
      const int WIDTH = `+m+`;
      uniform sampler2D image_0;
      uniform sampler2D roiUV0;
      uniform bool useROI;
      uniform bool reverseROI;
      uniform float opacity;
      uniform float globalAlpha;

      // 获取指定的由UV坐标定义的poi边界点
      vec2 getROIuv(sampler2D roi, int index){
        vec2 poiuv = texture(roi, vec2((float(index) + 0.5) / float(WIDTH), 0)).xy;
        return poiuv;
      }

      // 判断UV坐标在不在范围内
      bool isInside(vec2 uv, sampler2D roi){
          bool ifInside = false;
          float u = uv.x;
          float v = uv.y;
          vec2 sP = getROIuv(roi, 0);
          for (int i = 0; i < 100000; i++){
              if(i >= WIDTH) break;
              int nextIndex = i + 1;
              nextIndex = nextIndex == WIDTH ? 0 : nextIndex;
              vec2 eP = getROIuv(roi, nextIndex);
              if((sP.x == u && sP.y == v) || (eP.x == u && eP.y == v)){
                  return true;
              } else if((sP.y < v && eP.y >= v) || (sP.y >= v && eP.y < v)) {
                  float x = sP.x + (v - sP.y) * (eP.x - sP.x) / (eP.y - sP.y);
                  if(x == u){
                    return true;
                  } else if(x > u) {
                    ifInside = !ifInside;
                  }
              }
            sP = eP;
          }
          return ifInside;
      }

      czm_material getMaterial(czm_materialInput materialInput){
        czm_material material = czm_getDefaultMaterial(materialInput);
        vec2 uv = materialInput.st;
        vec4 imageColor = texture(image_0, uv);
        material.diffuse = imageColor.rgb;
        material.alpha = imageColor.a * opacity * globalAlpha;
        return material;
      }

      czm_material czm_getMaterial(czm_materialInput materialInput) {
        if(useROI){
          vec2 uv = materialInput.st;
          bool inside = isInside(uv, roiUV0);
          if(inside != reverseROI) {
            return getMaterial(materialInput);
          } else {
            discard;
          }
        } else {
          return getMaterial(materialInput);
        }
      }
      `;const g={geometryInstances:l,asynchronous:![],appearance:new Cesium__namespace.MaterialAppearance({...this.style,material:h})},C=new Cesium__namespace.Primitive(g);return this[n(e._0x2a2911)](C),C}[_0x5e32ae(3399)](){const e={_0x20192d:1221,_0xdbe76e:4114},t=_0x5e32ae;var i;this._hasRemoveElement&&(i=this._videoContainer)!==null&&i!==void 0&&i.parentNode&&(this._videoContainer.parentNode.removeChild(this._videoContainer),delete this._hasRemoveElement,delete this._videoContainer),this.style.url?(this._videoContainer=createVideo(this.style[t(e._0x20192d)],this[t(e._0xdbe76e)].fileType,"",document.body),this._videoContainer.style.display="none",this._hasRemoveElement=!![]):this.style.container&&(this._videoContainer=this.style.container)}_getDrawEntityClass(e,t){const i={_0x4020db:2710},s=_0x5e32ae;return e.minPointNum=4,e.maxPointNum=4,e.style.materialType="Image",e.style.materialOptions={url:this[s(i._0x4020db)]},create$4("polygon",e)}_startEditingHook(e){this[_0x5e32ae({_0x289a46:3123}._0x289a46)]&&(e._hierarchy=this._hierarchy)}get isEditingGrid(){return this[_0x5e32ae(2547)]}startEditingGrid(){const e={_0x5f3aa6:2547,_0x5477d5:636,_0x414094:3138},t={_0x498a4a:3086,_0x1e2bc7:932},i=_0x5e32ae;if(this[i(e._0x5f3aa6)])return this;if(this._enabledEditGrid=!![],!this._map)throw new Error(i(2763));this.stopEditing(),this._map.mouseEvent.noPickEntity=this._entity,this._map[i(e._0x5477d5)].enabledMoveTarget=![],!this.editingGrid&&(this.editingGrid=new EditPolygonGrid(this),this.editingGrid[i(2037)]=s=>this[i(3086)],this.editingGrid.updateGridPositions=(s,n)=>{const o=i;this[o(t._0x498a4a)][n]=s,this[o(t._0x1e2bc7)]()}),this.editingGrid.activate&&this.editingGrid[i(e._0x414094)]()}[_0x5e32ae(1744)](){const e={_0x1dc2d4:2547,_0x40d4b3:1890,_0x42c330:636},t=_0x5e32ae;var i;if(!this[t(e._0x1dc2d4)]||!this.isAdded)return this;(i=this.editingGrid)!==null&&i!==void 0&&i.disable&&this.editingGrid.disable(),this._map&&(this[t(e._0x40d4b3)].closeSmallTooltip(),this[t(1890)].mouseEvent.noPickEntity=null,this[t(e._0x40d4b3)][t(e._0x42c330)].enabledMoveTarget=!![]),this._enabledEditGrid=![]}}register$4("videoPrimitive",VideoPrimitive);function getGridPositions(r,e){const t={_0x453b69:3916,_0x44cf3c:3916,_0x5c749f:3916,_0x4c44ef:3029,_0x461335:3759},i=_0x5e32ae,s=[],n=[],o=[],c=r[0],_=r[1],l=r[2],h=r[3],f=Cesium__namespace[i(t._0x453b69)].distance(c,h),m=Cesium__namespace[i(3916)].distance(_,l),g=f/e,C=m/e,E=Cesium__namespace[i(t._0x44cf3c)][i(3029)](Cesium__namespace[i(t._0x5c749f)].subtract(h,c,new Cesium__namespace.Cartesian3),new Cesium__namespace.Cartesian3),P=Cesium__namespace.Cartesian3.normalize(Cesium__namespace.Cartesian3[i(1531)](l,_,new Cesium__namespace[i(t._0x5c749f)]),new Cesium__namespace.Cartesian3),w=1/e;for(let M=0;M<=e;M++)for(let T=0;T<=e;T++){const L=Cesium__namespace[i(t._0x5c749f)][i(4084)](Cesium__namespace.Cartesian3.multiplyByScalar(E,M*g,new Cesium__namespace.Cartesian3),c,new Cesium__namespace.Cartesian3),R=Cesium__namespace.Cartesian3.add(Cesium__namespace.Cartesian3.multiplyByScalar(P,M*C,new Cesium__namespace.Cartesian3),_,new Cesium__namespace[i(3916)]),D=Cesium__namespace.Cartesian3[i(t._0x4c44ef)](Cesium__namespace.Cartesian3.subtract(R,L,new Cesium__namespace.Cartesian3),new Cesium__namespace[i(t._0x453b69)]),N=Cesium__namespace[i(t._0x453b69)].distance(R,L),k=N/e,B=Cesium__namespace.Cartesian3.add(Cesium__namespace.Cartesian3[i(2257)](D,T*k,new Cesium__namespace.Cartesian3),L,new Cesium__namespace.Cartesian3);s[i(3759)](T*w),s.push(1-M*w),n.push(B)}for(let M=0;M<e;M++)for(let T=0;T<e;T++){const L=M*(e+1)+T,R=(M+1)*(e+1)+T;o.push(L),o[i(t._0x461335)](L+1),o.push(R+1),o.push(R+1),o[i(t._0x461335)](R),o.push(L)}return{uv:s,indice:o,positions:n}}class BaseCombine extends BasePrimitive{get instances(){const e={_0x570099:3801},t=_0x5e32ae;return this.options[t(e._0x570099)]||[]}set instances(e){const t=_0x5e32ae;this.options[t(3801)]=e,this._rectangle=null,this.redraw()}getPickedObject(e){const t={_0x353359:439},i=_0x5e32ae,s=e[i(t._0x353359)]("#");if(s.length!==2)return null;const n=Number(s[1]);return this[i(3801)][n]}createPickId(e){return this.id+"#"+e}_createGeometryInstance(e,t){const i={_0x26b0db:2197,_0xc1c24c:3801},s=_0x5e32ae;if(this.options[s(i._0x26b0db)])return this[s(3798)].geometryInstances;const n=[],o=this[s(i._0xc1c24c)];for(let c=0;c<o.length;c++){const _=o[c];_.id=this.createPickId(c),n[s(3759)](_)}return n}getRectangle(e){const t={_0x1380a6:2180,_0x627537:2048,_0x1f2427:2436},i=_0x5e32ae;if(!this._rectangle){const s=this[i(3798)].instances||[];for(let n=0;n<s.length;n++){const o=s[n];o.position&&(o.position=LngLatPoint.parse(o[i(t._0x1380a6)])[i(t._0x627537)](),this._unionRectangle([o[i(2180)]])),o.positions&&(o[i(t._0x1f2427)]=LngLatArray[i(3816)](o.positions),this[i(711)](o.positions))}}return e!=null&&e.isFormat?formatRectangle(this._rectangle):this[i(2854)]}_unionRectangle(e){const t={_0x4f1bfc:2854,_0x4c4123:3324},i=_0x5e32ae,s=Cesium__namespace.Rectangle.fromCartesianArray(e);Cesium__namespace.defined(s)&&(Cesium__namespace.defined(this[i(t._0x4f1bfc)])?this._rectangle=Cesium__namespace[i(t._0x4c4123)][i(967)](s,this._rectangle):this._rectangle=s)}[_0x5e32ae(3852)](){const e={_0x3b293d:3798,_0x3984a8:4114,_0x37ccc0:3402,_0x162c80:3801,_0x1b97d3:2180},t=_0x5e32ae,i={...getAttrVal(this[t(e._0x3b293d)],{onlySimpleType:!![]}),type:this.type};this.options[t(e._0x3984a8)]&&(i.style=this._style2JsonBase(this[t(e._0x3b293d)].style,![]));const s=[];for(let n=0;n<this.instances[t(e._0x37ccc0)];n++){const o=this[t(e._0x162c80)][n],c={attr:o.attr,style:this._style2JsonBase(o.style,![])};o[t(e._0x1b97d3)]?c.position=LngLatPoint.toArray(o.position):o.positions&&(c.positions=LngLatArray.toArray(o.positions)),s.push(c)}return i.instances=s,this._toJSON_Ex&&this._toJSON_Ex(i),i}toGeoJSON(e){const t={_0xc2ff57:3205,_0x517b83:1378,_0x264153:4114,_0x37b1f1:1594,_0x46b4ce:3759},i=_0x5e32ae,s=[];for(let n=0;n<this.instances[i(3402)];n++){const o=this[i(3801)][n],c={type:"Feature",properties:{...o.attr,type:this[i(t._0xc2ff57)],style:this[i(t._0x517b83)](o[i(t._0x264153)],!![])}};this[i(879)]?c.geometry=this[i(879)](o,e):o[i(2180)]?c[i(788)]={type:"Point",coordinates:LngLatPoint[i(725)](o.position,e==null?void 0:e.noAlt)}:o.positions&&(c.geometry={type:"LineString",coordinates:LngLatArray.toArray(o[i(2436)],e==null?void 0:e[i(t._0x37b1f1)])}),s[i(t._0x46b4ce)](c)}return s}flyTo(e){const t={_0x458ff7:1890,_0x41c8c7:3460},i=_0x5e32ae,s=this.getRectangle();return this[i(t._0x458ff7)]&&s?this[i(t._0x458ff7)][i(t._0x41c8c7)](s,e):Promise.resolve(![])}[_0x5e32ae(2919)](e,t){const i={_0x4f198c:3166,_0x2bab26:3798},s=_0x5e32ae;if(Cesium__namespace.defined(t))this[s(i._0x4f198c)](t,e);else for(let n=0;n<this[s(i._0x2bab26)].instances.length;n++)this._setColorStyleItem(n,e)}_setColorStyleItem(e,t){const i={_0x1ce82e:1921},s=_0x5e32ae,n=this[s(i._0x1ce82e)](this.createPickId(e));if(n){const o=this.options.instances[e],c=getColorByStyle({...this.style,...o.style||{},...t});n.color=Cesium__namespace.ColorGeometryInstanceAttribute[s(1048)](c)}}}BaseCombine[_0x5e32ae(2948)]=!![];var FlatBillboardFS=`#ifdef GL_ES
precision mediump float;
#endif
uniform sampler2D mars_image;
uniform vec2 mars_distanceDisplayCondition;
uniform vec3 mars_positionWC;
in vec3 v_worldPos;
in vec2 v_st;
uniform float globalAlpha;

void main() {
  float dis = distance(mars_positionWC, v_worldPos);
  if(dis < mars_distanceDisplayCondition.x || dis > mars_distanceDisplayCondition.y) {
    discard;
  } else {
    vec4 color = texture(mars_image, v_st);
    color.a *= globalAlpha;

    // Fully transparent parts of the billboard are not pickable.
    #if !defined(OPAQUE) && !defined(TRANSLUCENT)
    if(color.a < 0.005)   // matches 0/255 and 1/255
    {
      discard;
    }
    #else
    // The billboard is rendered twice. The opaque pass discards translucent fragments
    // and the translucent pass discards opaque fragments.
    #ifdef OPAQUE
    if(color.a < 0.995)   // matches < 254/255
    {
      discard;
    }
    #else
    if(color.a >= 0.995)  // matches 254/255 and 255/255
    {
      discard;
    }
    #endif
    #endif

    out_FragColor = color;

  }
}
`,FlatBillboardVS=`in vec3 position3DHigh;
in vec3 position3DLow;
in vec3 color;
in vec2 st;
in float batchId;

uniform mat4 mars_orthographicMatrix;
uniform mat4 mars_viewMatrix;
uniform vec2 mars_resolution;
uniform float mars_pointSize;
out vec2 v_st;
out vec3 v_worldPos;

vec4 transform(mat4 m, mat4 v, vec3 coord) {
  return m * v * vec4(coord, 1.0);
}
vec2 project(vec4 device) {
  vec3 device_normal = device.xyz / device.w;
  vec2 clip_pos = (device_normal * 0.5 + 0.5).xy;
  return clip_pos * mars_resolution;
}
vec4 unproject(vec2 screen, float z, float w) {
  vec2 clip_pos = screen / mars_resolution;
  vec2 device_normal = clip_pos * 2.0 - 1.0;
  return vec4(device_normal * w, z, w);
}

void main() {
  v_st = st;
  vec3 currP = position3DHigh.xyz + position3DLow.xyz;
  v_worldPos = currP;
  vec4 eyeCurrP = transform(mars_orthographicMatrix, mars_viewMatrix, currP);
  vec2 winCurrP = project(eyeCurrP);
  vec3 dirEye = czm_viewRotation * color;
  dirEye = normalize(dirEye);

  vec2 newWinCurrP = winCurrP + dirEye.xy * mars_pointSize;
  gl_Position = unproject(newWinCurrP, eyeCurrP.z, eyeCurrP.w);
  gl_PointSize = mars_pointSize;
}
`;const DEF_STYLE$8={angle:0,width:50};class FlatBillboard extends BaseCombine{constructor(e={}){const t=_0x5e32ae;e.style={...DEF_STYLE$8,...e.style||{}},super(e),this.distanceDisplayCondition=e.distanceDisplayCondition??new Cesium__namespace[t(438)](0,5e6),this._globalAlpha=1}get billboardCollection(){var e;return(e=this._layer)===null||e===void 0?void 0:e.billboardCollection}get[_0x5e32ae(1430)](){return this._distanceDisplayCondition}set[_0x5e32ae(1430)](e){const t={_0x484cfb:2497},i=_0x5e32ae;this[i(3201)]=e,this._distanceDisplayConditionCartesian2=new Cesium__namespace[i(t._0x484cfb)](e.near,e.far)}[_0x5e32ae(4158)](e){const t={_0x2b56b7:3801,_0x2c6bb9:2945,_0x4eeaf0:4114,_0x11e1b5:4114,_0x1d8704:3786,_0x51ac09:1890,_0x26baf1:3521},i=_0x5e32ae;if(!this.show)return;const s=(this.options.scale3d??1)*this._map.viewer[i(1878)];this.options.instances.length>0&&this.options[i(t._0x2b56b7)][0].style.width?this[i(t._0x2c6bb9)]=s*this[i(3798)].instances[0][i(t._0x4eeaf0)][i(4005)]:this._pointSize=s*this.options[i(t._0x11e1b5)].width,this.textures={},this[i(t._0x1d8704)]=new Cesium__namespace[i(3457)]({context:this[i(t._0x51ac09)].scene[i(t._0x26baf1)],width:500,height:500}),this.options[i(3801)]&&this.redraw(),this._map.on(EventType.morphComplete,this[i(1082)],this),this[i(930)].add(this)}_removedHook(){const e=_0x5e32ae;this._map.off(EventType.morphComplete,this._onMorphComplete,this),this.clear(),this.textureDef.destroy(),delete this.textureDef,this._noDestroy=!![],this.primitiveCollection.remove(this),this[e(1874)]=![]}clear(){const e={_0x2c4242:1524},t=_0x5e32ae;this._removeCollectionBy2D(),this[t(e._0x2c4242)]()}redraw(){const e={_0x1400ac:3211,_0x2bd180:1459},t=_0x5e32ae;if(!this[t(1890)])return;this.clear();const i=this.instances;if(i)for(let s=0,n=i.length;s<n;s++){const o=i[s];o.position=LngLatPoint.toCartesian(o.position)}this[t(1890)].scene[t(e._0x1400ac)]===Cesium__namespace.SceneMode[t(3707)]?this._initCollectionBy3D():this[t(e._0x2bd180)]()}_onMorphComplete(e){this[_0x5e32ae(4034)]()}update(e){const t={_0x4317b7:2630},i=_0x5e32ae;if(this._map){if(!this.show){this._removeCollectionBy2D();return}e.mode===Cesium__namespace[i(3850)].SCENE3D?e.passes.render?this._drawCommands&&e[i(t._0x4317b7)].push(...this._drawCommands):this._pickCommands&&e.commandList.push(...this._pickCommands):!this.billboardCollection&&this._initCollectionBy2D()}}_initCollectionBy2D(){const e={_0x2753be:3801,_0x461c3c:1286,_0x16748d:2414},t=_0x5e32ae,i=this[t(e._0x2753be)];if(i){this._billboard2DList=[];for(let s=0,n=i.length;s<n;s++){const o=i[s],c={...this.options[t(4114)],...o.style},_=this.billboardCollection.add({id:this.createPickId(s),position:o.position,image:c[t(513)],scale:1,rotation:Cesium__namespace[t(e._0x461c3c)].toRadians(c[t(1314)]||0),width:c.width,height:c.height||c.width});this[t(e._0x16748d)](_),this._billboard2DList.push(_)}}}_removeCollectionBy2D(){const e=_0x5e32ae;if(!(!this.billboardCollection||!this[e(4156)])){for(let t=this._billboard2DList.length-1;t>=0;t--){const i=this._billboard2DList[t];this[e(3393)].remove(i)}this._billboard2DList=[]}}_initCollectionBy3D(){const e=_0x5e32ae,t=this.instances;if(!t)return;const i={};for(let o=0,c=t.length;o<c;o++){var s;const _=t[o];_.index=o;const l=(s=_[e(4114)])===null||s===void 0?void 0:s.image;l&&(!i[l]&&(i[l]=[]),i[l].push(_))}const n=[];for(const o in i){const c=i[o],_=o;this[e(2133)](_);for(const l of c){const h=this.createDrawCommand(_,l);n.push(h)}}this._drawCommands=n}[_0x5e32ae(1524)](){const e={_0x20bd61:2119,_0x5d0661:1899},t=_0x5e32ae;this[t(e._0x20bd61)]&&this._drawCommands.length>0&&(this._drawCommands.forEach(function(i){const s=t;i[s(2271)]&&i.vertexArray.destroy(),i.shaderProgram&&i.shaderProgram[s(757)]()}),delete this._drawCommands),this._pickCommands&&this._pickCommands.length>0&&(this._pickCommands.forEach(function(i){i.vertexArray&&i.vertexArray.destroy(),i.shaderProgram&&i.shaderProgram.destroy()}),delete this[t(e._0x5d0661)]);for(const i in this[t(4185)])this.textures[i]&&this.textures[i].destroy();this[t(4185)]={}}[_0x5e32ae(2133)](e){const t={_0x47aedf:1460},i=_0x5e32ae,s=new Image;s[i(t._0x47aedf)]=n=>{const o=i,c=new Cesium__namespace[o(3457)]({context:this._map.scene[o(3521)],source:s});this.textures[e]=c},s.src=e}[_0x5e32ae(2549)](e){const t={_0x5749ac:3759,_0x448bb7:2663,_0x197a28:2949,_0x597c7a:3943},i=_0x5e32ae,s=[],n=[],o=[],c=[],_=[];for(let l=0,h=e.length;l<h;l++){const f=e[l],m=f.position,g={...this.options.style,...f[i(4114)]};o.push(l*4+0),o.push(l*4+2),o.push(l*4+1),o[i(3759)](l*4+0),o[i(3759)](l*4+3),o.push(l*4+2);const C=new Float32Array(6);C[0]=m.x,C[1]=m.x-C[0],C[2]=m.y,C[3]=m.y-C[2],C[4]=m.z,C[5]=m.z-C[4],s[i(t._0x5749ac)](C[0]),s.push(C[2]),s.push(C[4]),n.push(C[1]),n.push(C[3]),n.push(C[5]),s.push(C[0]),s.push(C[2]),s.push(C[4]),n.push(C[1]),n.push(C[3]),n[i(3759)](C[5]),s.push(C[0]),s[i(3759)](C[2]),s.push(C[4]),n.push(C[1]),n.push(C[3]),n.push(C[5]),s.push(C[0]),s.push(C[2]),s.push(C[4]),n.push(C[1]),n.push(C[3]),n.push(C[5]),c[i(3759)](0,0),c[i(3759)](0,1),c.push(1,1),c.push(1,0);const E=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(m),P=g[i(1314)]||0,w=Cesium__namespace.Matrix3.fromRotationZ(Cesium__namespace.Math.toRadians(P)),M=Cesium__namespace.Matrix4.fromRotationTranslation(w),T=Cesium__namespace.Matrix4[i(t._0x448bb7)](E,M,new Cesium__namespace.Matrix4),L=1,R=(g.height||g[i(4005)])/g.width,D=new Cesium__namespace.Cartesian3(-L,-R,0);Cesium__namespace.Matrix4[i(t._0x197a28)](T,D,D),Cesium__namespace.Cartesian3.normalize(D,D),_.push(D.x,D.y,D.z);const N=new Cesium__namespace.Cartesian3(-L,R,0);Cesium__namespace.Matrix4.multiplyByPointAsVector(T,N,N),Cesium__namespace.Cartesian3.normalize(N,N),_[i(3759)](N.x,N.y,N.z);const k=new Cesium__namespace.Cartesian3(L,R,0);Cesium__namespace.Matrix4.multiplyByPointAsVector(T,k,k),Cesium__namespace.Cartesian3[i(3029)](k,k),_.push(k.x,k.y,k.z);const B=new Cesium__namespace[i(3916)](L,-R,0);Cesium__namespace.Matrix4.multiplyByPointAsVector(T,B,B),Cesium__namespace.Cartesian3.normalize(B,B),_[i(3759)](B.x,B.y,B.z)}return{index:new Uint16Array(o),vertex_H:{values:new Float32Array(s),componentDatatype:"DOUBLE",componentsPerAttribute:3},vertex_L:{values:new Float32Array(n),componentDatatype:i(t._0x597c7a),componentsPerAttribute:3},uv:{values:new Float32Array(c),componentDatatype:"FLOAT",componentsPerAttribute:2},color:{values:new Float32Array(_),componentDatatype:"FLOAT",componentsPerAttribute:3}}}createDrawCommand(e,t){const i={_0x4aa2cf:4116,_0x6513c0:528,_0x3c201a:1880,_0x4cdcc7:2185,_0x2f6cbc:3003,_0x15f31b:4261,_0x2361ff:1745,_0x5109ad:1681,_0x8918a4:2684,_0x2e1912:4063,_0xb1e2ce:1539,_0x355b2f:730,_0x1fcc9e:1620,_0x438532:995,_0x2730bf:2401},s={_0x4350d7:2796},n=_0x5e32ae,o=this._map[n(3107)].context,c=this.options[n(i._0x4aa2cf)]??![],_=Cesium__namespace.RenderState.fromCache({depthTest:{enabled:!![],func:c?Cesium__namespace.WebGLConstants.LEQUAL:Cesium__namespace[n(3767)][n(i._0x6513c0)]},depthMask:c,blending:Cesium__namespace.BlendingState[n(i._0x3c201a)]}),l={position3DHigh:0,position3DLow:1,color:2,st:3},h=Cesium__namespace.ShaderProgram[n(i._0x4cdcc7)]({context:o,vertexShaderSource:FlatBillboardVS,fragmentShaderSource:FlatBillboardFS,attributeLocations:l}),f=this.prepareVAO([t]),m=Cesium__namespace.Buffer.createIndexBuffer({context:o,typedArray:f.index,usage:Cesium__namespace.BufferUsage[n(i._0x2f6cbc)],indexDatatype:Cesium__namespace[n(2789)].UNSIGNED_SHORT}),g=new Cesium__namespace.VertexArray({context:o,attributes:[{index:0,vertexBuffer:Cesium__namespace.Buffer.createVertexBuffer({context:o,typedArray:f.vertex_H[n(i._0x15f31b)],usage:Cesium__namespace.BufferUsage[n(i._0x2f6cbc)]}),componentsPerAttribute:3},{index:1,vertexBuffer:Cesium__namespace[n(i._0x2361ff)].createVertexBuffer({context:o,typedArray:f.vertex_L[n(4261)],usage:Cesium__namespace[n(i._0x5109ad)].STATIC_DRAW}),componentsPerAttribute:3},{index:2,vertexBuffer:Cesium__namespace.Buffer.createVertexBuffer({context:o,typedArray:f[n(2092)].values,usage:Cesium__namespace[n(1681)].STATIC_DRAW}),componentsPerAttribute:3},{index:3,vertexBuffer:Cesium__namespace[n(1745)][n(1794)]({context:o,typedArray:f.uv[n(4261)],usage:Cesium__namespace[n(1681)][n(3003)]}),componentsPerAttribute:2}],indexBuffer:m}),C=this._map.scene.camera,E=o.drawingBufferWidth,P=o.drawingBufferHeight,w=new Cesium__namespace.Cartesian2(E,P),M=Cesium__namespace.BoundingSphere[n(2768)](f[n(2121)][n(i._0x15f31b)]);M.radius=1e4;const T=new Cesium__namespace[n(1539)]({primitiveType:Cesium__namespace[n(i._0x8918a4)].TRIANGLES,shaderProgram:h,vertexArray:g,modelMatrix:Cesium__namespace.Matrix4.IDENTITY,renderState:_,boundingVolume:M,uniformMap:{mars_orthographicMatrix:()=>{const D=n;if(C.frustum._offCenterFrustum){var N;return(N=C[D(2801)]._offCenterFrustum)===null||N===void 0?void 0:N._perspectiveMatrix}else return C.frustum._orthographicMatrix},mars_viewMatrix:()=>C._viewMatrix,mars_resolution:()=>w,mars_pointSize:()=>this._pointSize,mars_image:()=>this.textures[e]||this.textureDef,mars_distanceDisplayCondition:()=>this[n(992)],mars_positionWC:()=>C[n(523)],globalAlpha:()=>this[n(4236)]},castShadows:![],receiveShadows:![],pass:c?Cesium__namespace.Pass.TRANSLUCENT:Cesium__namespace[n(2401)].OPAQUE,pickOnly:!![],pickCommand:new Cesium__namespace.DrawCommand({owner:this,pickOnly:!![]})});this.bindPickId(T),T.pickId=o.createPickId({primitive:T,id:this.createPickId(t[n(i._0x2e1912)])});const L=new Cesium__namespace[n(i._0xb1e2ce)]({owner:T,primitiveType:Cesium__namespace.PrimitiveType[n(i._0x355b2f)],pickOnly:!![]});L.vertexArray=g,L.renderState=_;const R=Cesium__namespace.ShaderProgram.fromCache({context:o,vertexShaderSource:FlatBillboardVS,fragmentShaderSource:Cesium__namespace[n(i._0x1fcc9e)].createPickFragmentShaderSource(FlatBillboardFS,"uniform"),attributeLocations:l});return L[n(1772)]=R,L[n(995)]=T[n(i._0x438532)],L.uniformMap.czm_pickColor=()=>T[n(s._0x4350d7)].color,L.pass=c?Cesium__namespace[n(i._0x2730bf)].TRANSLUCENT:Cesium__namespace.Pass[n(2730)],L.boundingVolume=M,L.modelMatrix=Cesium__namespace.Matrix4.IDENTITY,!this._pickCommands&&(this._pickCommands=[]),this._pickCommands.push(L),T}[_0x5e32ae(3913)](e){const t=_0x5e32ae;this[t(4236)]=e}}register$4("flatBillboard",FlatBillboard,!![]);class BasePolyCombine extends BaseCombine{get style(){const e={_0x5749d1:3801,_0x2bf6c6:4114},t=_0x5e32ae;var i,s;return((i=this.options[t(3801)])===null||i===void 0?void 0:i[t(3402)])>0&&this.options[t(e._0x5749d1)][0].style?{...this.options.style||{},...this.options[t(3801)][0][t(e._0x2bf6c6)]}:(s=this.options)===null||s===void 0?void 0:s.style}set style(e){this[_0x5e32ae({_0x4d48ba:1722}._0x4d48ba)](e)}_createGeometryInstance(e,t){const i={_0x2da893:3801},s=_0x5e32ae;this[s(2854)]=null,this.translucent=![];const n=this[s(i._0x2da893)],o=[];for(let c=0;c<n.length;c++){const _=n[c];if(_ instanceof Cesium__namespace.GeometryInstance)_.id=this.createPickId(c),o.push(_);else{const l=this._createGeometryInstanceItem(e,t,_);l&&(l.id=this.createPickId(c),o.push(l))}}return o}_createGeometryInstanceItem(e,t,i){}[_0x5e32ae(2987)](e){const t=_0x5e32ae;return e.positions?[LngLatArray.toCartesians(e[t(2436)])]:null}_createPolylineOutline(e){const t={_0x52dd6b:4114,_0x14dd75:515,_0xbbe6b2:2755,_0x608537:2825,_0x395c9c:956,_0xe195d8:3730,_0x5012fd:3518,_0x44a769:3402,_0x27b67f:3611,_0x25b2d3:1430,_0x573f29:575,_0x3545a8:1528,_0x341528:1945,_0x345725:2055,_0x12c560:2825},i=_0x5e32ae,s=this.instances,n=[];let o;for(let l=0;l<s[i(3402)];l++){const h=s[l];let f;if(h[i(t._0x52dd6b)]&&(Cesium__namespace.defined(h.style[i(2667)])||Cesium__namespace[i(t._0x14dd75)](h.style[i(t._0xbbe6b2)])||Cesium__namespace.defined(h.style.outlineColor)||Cesium__namespace[i(t._0x14dd75)](h[i(4114)].outlineOpacity)||Cesium__namespace[i(t._0x14dd75)](h[i(t._0x52dd6b)].outlineWidth))){const E=this._getOutlineStyle(h[i(t._0x52dd6b)]);if(!E.show)continue;f={...e,...E}}else f=e;o=PolylineStyleConver.toCesiumVal(f),!o.material&&(o.vertexFormat=Cesium__namespace[i(2055)].VERTEX_FORMAT);const m=f[i(t._0x608537)]?Cesium__namespace[i(t._0x395c9c)]:Cesium__namespace[i(t._0xe195d8)],g=o.color??Cesium__namespace.Color.YELLOW[i(t._0x5012fd)](.5),C=this._getPolylineOutlinePositions(h);if(!C)return;for(let E=0,P=C.length;E<P;E++){let w=C[E];Cesium__namespace.defined(h[i(t._0x52dd6b)].height)&&(w=setPositionsHeight(w,h.style.height)),w[i(t._0x44a769)]>0&&(w=w[i(t._0x27b67f)](w[0]));const M=new Cesium__namespace.GeometryInstance({geometry:new m({...o,positions:w}),attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute[i(1575)](g),distanceDisplayCondition:o[i(t._0x25b2d3)]}});n.push(M)}}const c={...this.options,geometryInstances:n,show:this[i(t._0x573f29)]};delete c.style,delete c[i(t._0x3545a8)],this[i(t._0x341528)](e,o)?c.appearance=new Cesium__namespace[i(t._0x345725)]({...o}):c[i(2374)]=new Cesium__namespace.PolylineMaterialAppearance({...o});let _;return o[i(t._0x12c560)]?_=this.primitiveCollection[i(4084)](new Cesium__namespace[i(3813)](c)):_=this.primitiveCollection.add(new Cesium__namespace.Primitive(c)),this.bindPickId(_),_}_highlight_mouseEventHandler(e){this[_0x5e32ae({_0x326c89:1890}._0x326c89)].closeHighlight();const s=e.pickedObject;s&&(this._last_pickedObject=s,this._map.openHighlight(this,this._highlightOptions,e))}openHighlight(e,t=!![],i){const s={_0x424b07:4306,_0x1d368b:459,_0x501514:1048},n=_0x5e32ae;t&&(this._map.closeHighlight(),this._map.last_highlighGraphic=this),i&&(this._last_pickedObject=i);const o=e||this[n(s._0x424b07)];if(this[n(s._0x1d368b)]&&o){const c=PolygonStyleConver.toCesiumVal({...this._last_pickedObject.data.style,...o}),_=this._getColorByColorMaterial(c,![]);if(_){const l=this.getGeometryInstanceAttributes(this[n(459)].id);l.color=Cesium__namespace.ColorGeometryInstanceAttribute[n(s._0x501514)](_),this.fire(EventType.highlightOpen,{},!![])}}}[_0x5e32ae(567)](){const e={_0x58b6f0:3002,_0x541c38:1921,_0x199c62:1404,_0x3d3f96:2966,_0x3463b7:1297},t=_0x5e32ae;var i;if(this._last_pickedObject&&this[t(e._0x58b6f0)]){const s=PolygonStyleConver.toCesiumVal(this._last_pickedObject.data.style),n=this._getColorByColorMaterial(s,![]);if(n){const o=this[t(e._0x541c38)](this._last_pickedObject.id);o&&(o.color=Cesium__namespace.ColorGeometryInstanceAttribute.toValue(n),this[t(e._0x199c62)](EventType[t(e._0x3d3f96)],{},!![]))}delete this._last_pickedObject}((i=this._map)===null||i===void 0?void 0:i.last_highlighGraphic)===this&&this._map[t(e._0x3463b7)]()}setStyle(e){const t=this.options.instances||[];for(let i=0;i<t.length;i++){const s=t[i];s.style&&(s.style=merge(s.style,e))}return super.setStyle(e)}}class BasePointCombine extends BasePolyCombine{[_0x5e32ae(2179)](e,t){const i={_0x1f70b7:1286,_0x312c97:1567,_0x5a9b8d:3064},s=_0x5e32ae;if(e.modelMatrix)return e.modelMatrix;const n=LngLatPoint.toCartesian(e.position),o=Cesium__namespace.Math.toRadians(t.heading||0),c=Cesium__namespace[s(i._0x1f70b7)][s(i._0x312c97)](t.pitch||0),_=Cesium__namespace.Math.toRadians(t.roll||0);return Cesium__namespace.Transforms[s(1418)](n,new Cesium__namespace[s(i._0x5a9b8d)](o,c,_))}}class PlaneCombine extends BasePointCombine{_conversionStyle(e){return PlaneStyleConver.toCesiumVal(e)}_style2Json(e,t){return PlaneStyleConver.toJSON(e,t)}_createGeometryInstanceItem(e,t,i){const s={_0x1c867e:777,_0x5121a8:864,_0x535cee:4116,_0x158bf3:2709,_0x26944e:2261},n=_0x5e32ae,o=PlaneStyleConver.toCesiumVal({...this.options.style,...i.style||{}});o.vertexFormat=o[n(s._0x1c867e)]||e[n(777)];let c=this[n(s._0x5121a8)](o);t&&o.outlineColor&&(c=o.outlineColor),c.alpha!==1&&(this[n(s._0x535cee)]=!![]);const _=this._getModelMatrix(i,o),l=t?Cesium__namespace.PlaneOutlineGeometry:Cesium__namespace[n(3071)];return new Cesium__namespace[n(s._0x158bf3)]({geometry:new l(o),modelMatrix:_,attributes:{color:Cesium__namespace[n(s._0x26944e)].fromColor(c),distanceDisplayCondition:o.distanceDisplayCondition}})}[_0x5e32ae(2179)](e,t){const i={_0x3f7bf9:2294,_0x393794:3768,_0x27d1cf:1286,_0x388270:4102,_0x31b502:3501},s=_0x5e32ae;var n,o;if(e[s(i._0x3f7bf9)])return e[s(2294)];const c=super[s(2179)](e,t);if(t.plane_normal===Cesium__namespace.Cartesian3.UNIT_X){const l=Cesium__namespace.Matrix4.fromRotationTranslation(Cesium__namespace[s(i._0x393794)].fromRotationX(Cesium__namespace[s(i._0x27d1cf)].toRadians(90)));Cesium__namespace.Matrix4.multiply(c,l,c)}else if(t.plane_normal===Cesium__namespace.Cartesian3.UNIT_Y){const l=Cesium__namespace[s(i._0x388270)][s(3651)](Cesium__namespace.Matrix3[s(i._0x31b502)](Cesium__namespace.Math.toRadians(90)));Cesium__namespace.Matrix4.multiply(c,l,c)}const _=Cesium__namespace.Matrix4.fromScale(new Cesium__namespace.Cartesian3(((n=t.dimensions)===null||n===void 0?void 0:n.x)??1,((o=t.dimensions)===null||o===void 0?void 0:o.y)??1,1));return Cesium__namespace.Matrix4.multiply(c,_,c),c}}register$4(_0x5e32ae(544),PlaneCombine,!![]);class BoxCombine extends BasePointCombine{_conversionStyle(e){return e.closed=e.closed??!![],BoxStyleConver.toCesiumVal(e)}[_0x5e32ae(3978)](e,t){return BoxStyleConver[_0x5e32ae({_0x30c5d6:3852}._0x30c5d6)](e,t)}_createGeometryInstanceItem(e,t,i){const s={_0x4af342:2021,_0x56f8b9:1430},n=_0x5e32ae,o=BoxStyleConver[n(1268)]({...this[n(3798)].style,...i[n(4114)]||{}});o.vertexFormat=o.vertexFormat||e.vertexFormat;let c=this._getColorByColorMaterial(o);t&&o[n(s._0x4af342)]&&(c=o[n(2021)]),c.alpha!==1&&(this.translucent=!![]);const _=this._getModelMatrix(i,o),l=t?Cesium__namespace.BoxOutlineGeometry:Cesium__namespace.BoxGeometry;return new Cesium__namespace.GeometryInstance({geometry:l[n(948)](o),modelMatrix:_,attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(c),distanceDisplayCondition:o[n(s._0x56f8b9)]}})}}register$4("boxC",BoxCombine,!![]);class CircleCombine extends BasePointCombine{_conversionStyle(e){return CircleStyleConver[_0x5e32ae({_0x1400a7:1268}._0x1400a7)](e)}[_0x5e32ae(3978)](e,t){return CircleStyleConver[_0x5e32ae(3852)](e,t)}_createGeometryInstanceItem(e,t,i){const s={_0x4f1a6c:3798,_0x53817c:4116,_0x22ebc1:1575},n=_0x5e32ae,o=CircleStyleConver.toCesiumVal({...this[n(s._0x4f1a6c)].style,...i[n(4114)]||{}});o[n(777)]=o.vertexFormat||e.vertexFormat;let c=this._getColorByColorMaterial(o);t&&o.outlineColor&&(c=o.outlineColor),c.alpha!==1&&(this[n(s._0x53817c)]=!![]),i.position=LngLatPoint.parse(i.position).toCartesian(),o.center=i.position;const _=t?Cesium__namespace.CircleOutlineGeometry:Cesium__namespace.CircleGeometry;return new Cesium__namespace[n(2709)]({geometry:new _(o),attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute[n(s._0x22ebc1)](c),distanceDisplayCondition:o.distanceDisplayCondition}})}_getPolylineOutlinePositions(e){return[getEllipseOuterPositions({position:e.position,radius:e.style.radius,granularity:e.style.granularity})]}}register$4("circleC",CircleCombine,!![]);class CylinderCombine extends BasePointCombine{[_0x5e32ae(1332)](e){return e.closed=e.closed??!![],CylinderStyleConver.toCesiumVal(e)}[_0x5e32ae(3978)](e,t){return CylinderStyleConver.toJSON(e,t)}[_0x5e32ae(4155)](e,t,i){const s={_0x5610cd:1268,_0x5ee3f7:3798,_0xed2977:4114,_0x9c335d:1202,_0x1fffca:2261},n=_0x5e32ae,o=CylinderStyleConver[n(s._0x5610cd)]({...this[n(s._0x5ee3f7)][n(s._0xed2977)],...i[n(4114)]||{}});o.vertexFormat=o.vertexFormat||e.vertexFormat;let c=this._getColorByColorMaterial(o);t&&o.outlineColor&&(c=o.outlineColor),c[n(s._0x9c335d)]!==1&&(this.translucent=!![]);const _=this._getModelMatrix(i,o),l=t?Cesium__namespace.CylinderOutlineGeometry:Cesium__namespace.CylinderGeometry;return new Cesium__namespace.GeometryInstance({geometry:new l(o),modelMatrix:_,attributes:{color:Cesium__namespace[n(s._0x1fffca)].fromColor(c),distanceDisplayCondition:o[n(1430)]}})}}register$4("cylinderC",CylinderCombine,!![]);class FrustumCombine extends BasePointCombine{_conversionStyle(e){const t=_0x5e32ae;return e.closed=e[t(565)]??!![],CylinderStyleConver.toCesiumVal(e)}[_0x5e32ae(3978)](e,t){return CylinderStyleConver.toJSON(e,t)}[_0x5e32ae(4155)](e,t,i){const s={_0x5c1c98:3798,_0x3d0a97:4114,_0x1e7372:777,_0xf2a272:2048,_0x3ddd69:1314},n=_0x5e32ae,o=CylinderStyleConver[n(1268)]({...this[n(s._0x5c1c98)][n(s._0x3d0a97)],...i.style||{}});o.vertexFormat=o.vertexFormat||e[n(s._0x1e7372)];let c=this._getColorByColorMaterial(o);t&&o.outlineColor&&(c=o.outlineColor),c.alpha!==1&&(this.translucent=!![]);const _=i[n(2180)]=LngLatPoint.parse(i[n(2180)]).toCartesian();let l,h;if(i.targetPositio){const C=LngLatPoint.parse(i[n(589)])[n(s._0xf2a272)]();l=Cesium__namespace.Cartesian3.distance(_,C);const E=getHeadingPitchRollForLine(_,C);h=Cesium__namespace[n(2911)].headingPitchRollQuaternion(_,E)}else{l=-o.length;const C=new Cesium__namespace[n(3064)](Cesium__namespace.Math.toRadians(o.heading||0),Cesium__namespace.Math.toRadians(o.pitch||0),Cesium__namespace.Math.toRadians(o.roll||0));h=Cesium__namespace.Transforms.headingPitchRollQuaternion(_,C)}const f=new Cesium__namespace.PerspectiveFrustum({fov:Cesium__namespace.Math.toRadians(o[n(s._0x3ddd69)]*2||.01),aspectRatio:o.angle2/o.angle,near:.01,far:l}),m=t?Cesium__namespace[n(2959)]:Cesium__namespace.FrustumGeometry;return new Cesium__namespace.GeometryInstance({geometry:new m({...o,origin:_,orientation:h,frustum:f}),attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(c),distanceDisplayCondition:o.distanceDisplayCondition}})}}register$4("frustumC",FrustumCombine,!![]);class EllipsoidCombine extends BasePointCombine{[_0x5e32ae(1332)](e){return e.closed=e.closed??!![],EllipsoidStyleConver.toCesiumVal(e)}_style2Json(e,t){return EllipsoidStyleConver[_0x5e32ae({_0x4f1fd7:3852}._0x4f1fd7)](e,t)}_createGeometryInstanceItem(e,t,i){const s={_0x1363ae:2179},n=_0x5e32ae,o=EllipsoidStyleConver.toCesiumVal({...this.options[n(4114)],...i.style||{}});o.vertexFormat=o.vertexFormat||e.vertexFormat;let c=this._getColorByColorMaterial(o);t&&o.outlineColor&&(c=o.outlineColor),c.alpha!==1&&(this[n(4116)]=!![]);const _=this[n(s._0x1363ae)](i,o),l=t?Cesium__namespace.EllipsoidOutlineGeometry:Cesium__namespace.EllipsoidGeometry;return new Cesium__namespace.GeometryInstance({geometry:new l(o),modelMatrix:_,attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute[n(1575)](c),distanceDisplayCondition:o.distanceDisplayCondition}})}}register$4("ellipsoidC",EllipsoidCombine,!![]);class PolylineCombine extends BasePolyCombine{_conversionStyle(e){return PolylineStyleConver[_0x5e32ae(1268)](e)}_style2Json(e,t){return PolylineStyleConver.toJSON(e,t)}[_0x5e32ae(4155)](e,t,i){const s={_0x4e04c9:2436,_0x3df6a4:3816,_0x5a5ff8:2261},n=_0x5e32ae,o=PolylineStyleConver.toCesiumVal({...this.options.style,...i[n(4114)]||{}});e._isColorMaterial&&(o.vertexFormat=Cesium__namespace[n(2055)][n(3511)]);const c=this._getColorByColorMaterial(o),_=i[n(s._0x4e04c9)]=LngLatArray[n(s._0x3df6a4)](i.positions);o[n(2436)]=_;const l=o.clampToGround?Cesium__namespace.GroundPolylineGeometry:Cesium__namespace.PolylineGeometry;return new Cesium__namespace.GeometryInstance({geometry:new l(o),attributes:{color:Cesium__namespace[n(s._0x5a5ff8)].fromColor(c),distanceDisplayCondition:o[n(1430)]}})}_createAppearance(e,t){const i=_0x5e32ae;return e._isColorMaterial?new Cesium__namespace.PolylineColorAppearance({...e}):new Cesium__namespace[i(3647)]({...e})}}register$4("polylineCombine",PolylineCombine),register$4("polylineC",PolylineCombine);class PolylineVolumeCombine extends BasePolyCombine{_conversionStyle(e){const t={_0x401302:565},i=_0x5e32ae;return e[i(t._0x401302)]=e.closed??!![],PolylineVolumeStyleConver.toCesiumVal(e)}_style2Json(e,t){return PolylineVolumeStyleConver.toJSON(e,t)}_createGeometryInstanceItem(e,t,i){const s={_0x442783:1268,_0x425075:777,_0x5ab0ab:4116,_0xf16a53:2436,_0x531e63:618,_0x486365:1786},n=_0x5e32ae,o=PolylineVolumeStyleConver[n(s._0x442783)]({...this.options.style,...i.style||{}});o[n(s._0x425075)]=o[n(777)]||e[n(777)];let c=this._getColorByColorMaterial(o);t&&o.outlineColor&&(c=o.outlineColor),c.alpha!==1&&(this[n(s._0x5ab0ab)]=!![]);const _=i.positions=LngLatArray.toCartesians(i[n(s._0xf16a53)]),l=t?Cesium__namespace[n(s._0x531e63)]:Cesium__namespace[n(s._0x486365)];return new Cesium__namespace.GeometryInstance({geometry:new l({...o,polylinePositions:_,shapePositions:o.shape}),attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute[n(1575)](c),distanceDisplayCondition:o[n(1430)]}})}}register$4("polylineVolumeC",PolylineVolumeCombine);class CorridorCombine extends BasePolyCombine{_conversionStyle(e){return CorridorStyleConver.toCesiumVal(e)}_style2Json(e,t){return CorridorStyleConver.toJSON(e,t)}_createGeometryInstanceItem(e,t,i){const s={_0x1a60dc:1430},n=_0x5e32ae,o=CorridorStyleConver.toCesiumVal({...this.options.style,...i.style||{}});o.vertexFormat=o.vertexFormat||e.vertexFormat;let c=this._getColorByColorMaterial(o);t&&o.outlineColor&&(c=o.outlineColor),c.alpha!==1&&(this.translucent=!![]),i[n(2436)]=LngLatArray[n(3816)](i.positions),o.positions=i.positions;const _=t?Cesium__namespace[n(3263)]:Cesium__namespace.CorridorGeometry;return new Cesium__namespace.GeometryInstance({geometry:new _(o),attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute[n(1575)](c),distanceDisplayCondition:o[n(s._0x1a60dc)]}})}}register$4("corridorC",CorridorCombine);class WallCombine extends BasePolyCombine{_conversionStyle(e){return WallStyleConver[_0x5e32ae(1268)](e)}_style2Json(e,t){return WallStyleConver.toJSON(e,t)}_createGeometryInstanceItem(e,t,i){const s={_0x585bf6:1268,_0x1018c9:4114,_0x18d31b:3611,_0x6bffd5:1575,_0x26ca6e:1430},n={_0x3947e2:2999},o=_0x5e32ae;var c;const _=WallStyleConver[o(s._0x585bf6)]({...this[o(3798)][o(s._0x1018c9)],...i.style||{}});_.vertexFormat=_.vertexFormat||e[o(777)];let l=this._getColorByColorMaterial(_);t&&_.outlineColor&&(l=_.outlineColor),l.alpha!==1&&(this.translucent=!![]);const h=[];let f=[];const m=i.positions;let g=new Array(m),C=new Array(m);i.positions.forEach(function(w,M){const T=o,L=LngLatPoint[T(1426)](w);if(!L||!L.valid())return;h.push(L),f.push(L.toCartesian());const R=h[M].alt;g[M]=R,C[M]=R+Number(_[T(n._0x3947e2)]||100)}),_.closure&&((c=f)===null||c===void 0?void 0:c.length)>0&&(f=f[o(3611)](f[0]),g=g[o(3611)](g[0]),C=C[o(s._0x18d31b)](C[0]));const E=t?Cesium__namespace.WallOutlineGeometry:Cesium__namespace.WallGeometry;return new Cesium__namespace.GeometryInstance({geometry:new E({..._,positions:f,maximumHeights:C,minimumHeights:g}),attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute[o(s._0x6bffd5)](l),distanceDisplayCondition:_[o(s._0x26ca6e)]}})}}register$4("wallC",WallCombine);class PolygonCombine extends BasePolyCombine{_conversionStyle(e){return PolygonStyleConver.toCesiumVal(e)}[_0x5e32ae(3978)](e,t){return PolygonStyleConver.toJSON(e,t)}_createGeometryInstanceItem(e,t,i){const s={_0x2dc3a3:4114,_0x38459e:2021,_0x231527:1202,_0x5abebf:2436,_0x2a9510:2436},n=_0x5e32ae,o=PolygonStyleConver.toCesiumVal({...this.options[n(s._0x2dc3a3)],...i.style||{}});o.vertexFormat=o.vertexFormat||e.vertexFormat;let c=this._getColorByColorMaterial(o);t&&o[n(s._0x38459e)]&&(c=o.outlineColor),c[n(s._0x231527)]!==1&&(this.translucent=!![]);let _,l;i[n(s._0x5abebf)].length>0&&Array.isArray(i[n(s._0x2a9510)][0])&&i.positions[0].length>0&&Array.isArray(i.positions[0][0])&&isNumber(i[n(2436)][0][0][0])?(_=getPolygonHierarchy(i.positions),l=_.positions):(l=i.positions=LngLatArray.toCartesians(i.positions),_=new Cesium__namespace.PolygonHierarchy(l)),i._hierarchy=_,o.polygonHierarchy=_;const h=t?Cesium__namespace.PolygonOutlineGeometry:Cesium__namespace[n(2062)];return new Cesium__namespace.GeometryInstance({geometry:new h(o),attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(c),distanceDisplayCondition:o.distanceDisplayCondition}})}_getPolylineOutlinePositions(e){const t={_0xb44999:3123,_0x2c58d1:3816},i=_0x5e32ae;if(e._hierarchy)return getHierarchyVal(e[i(t._0xb44999)]);if(e.positions)return getHierarchyVal(LngLatArray[i(t._0x2c58d1)](e.positions))}updateHeight(e){const t={_0x5197c6:3865,_0x5d65cb:2294},i=_0x5e32ae;var s;const n=6378137,o=((s=this.style)===null||s===void 0?void 0:s[i(t._0x5197c6)])||0;for(let c=0,_=this.primitiveCollection.length;c<_;c++){const l=this.primitiveCollection.get(c),h=(n+e)/(n+o),f=Cesium__namespace.Matrix4.fromScale(new Cesium__namespace.Cartesian3(h,h,h));l[i(t._0x5d65cb)]=f}}[_0x5e32ae(879)](e,t){const i=_0x5e32ae;return{type:i(2056),coordinates:[LngLatArray.toArray(e.positions,t==null?void 0:t[i(1594)])]}}}register$4("polygonCombine",PolygonCombine),register$4(_0x5e32ae(4024),PolygonCombine);class WaterCombine extends PolygonCombine{[_0x5e32ae(4158)](e){const t={_0x40cd69:485,_0x16899f:4025,_0x385405:643,_0x228987:3002,_0x269da6:3621,_0x5a048d:930,_0x534d13:2667},i=_0x5e32ae;if(!this.show)return;const s=this._conversionStyle(e);e.opacity=e.opacity??.8;const n={geometryInstances:this[i(t._0x40cd69)](s),appearance:new Cesium__namespace[i(t._0x16899f)]({aboveGround:![],material:new Cesium__namespace.Material({fabric:{type:"Water",uniforms:{specularMap:s.specularMap||Cesium__namespace.Material.DefaultImageId,normalMap:s.normalMap||Cesium__namespace[i(1423)].DefaultImageId,frequency:s.frequency||8e3,animationSpeed:s.animationSpeed||.03,amplitude:s.amplitude||5,specularIntensity:e.specularIntensity||.8,baseWaterColor:getCesiumColor(e[i(2022)]||"#123e59").withAlpha(e.opacity),blendColor:getCesiumColor(e.blendColor||i(t._0x385405)).withAlpha(e.opacity)}}}),fragmentShaderSource:WaterFS,translucent:e[i(3776)]!==1}),show:this.show};if(e.clampToGround?(n.classificationType=e.classificationType??Cesium__namespace.ClassificationType.TERRAIN,this[i(t._0x228987)]=this.primitiveCollection.add(new Cesium__namespace[i(t._0x269da6)](n))):this._primitive=this[i(t._0x5a048d)].add(new Cesium__namespace.Primitive(n)),this._primitive_outline&&(this.primitiveCollection[i(2004)](this._primitive_outline),delete this._primitive_outline),e[i(t._0x534d13)]){const o=this._getOutlineStyle(e);this._primitive_outline=this[i(1128)](o)}}}register$4("waterCombine",WaterCombine),register$4("waterC",WaterCombine);class RectangleCombine extends BasePolyCombine{[_0x5e32ae(1332)](e){return RectangleStyleConver[_0x5e32ae(1268)](e)}_style2Json(e,t){return RectangleStyleConver.toJSON(e,t)}_createGeometryInstanceItem(e,t,i){const s={_0x450c67:777,_0x24ae8b:2436,_0x599457:2436,_0x23f6c9:3324,_0x430a38:967,_0x5bcb51:2765},n=_0x5e32ae,o=RectangleStyleConver.toCesiumVal({...this.options.style,...i.style||{}});o.vertexFormat=o[n(s._0x450c67)]||e.vertexFormat;let c=this._getColorByColorMaterial(o);t&&o.outlineColor&&(c=o[n(2021)]),c.alpha!==1&&(this.translucent=!![]);const _=i[n(s._0x24ae8b)]=LngLatArray.toCartesians(i[n(s._0x599457)]);o[n(1323)]=Cesium__namespace.Rectangle.fromCartesianArray(_),Cesium__namespace[n(515)](o.rectangle)&&(Cesium__namespace.defined(this._rectangle)?this._rectangle=Cesium__namespace[n(s._0x23f6c9)][n(s._0x430a38)](o.rectangle,this[n(2854)]):this._rectangle=o.rectangle);const l=t?Cesium__namespace.RectangleOutlineGeometry:Cesium__namespace[n(s._0x5bcb51)];return new Cesium__namespace.GeometryInstance({geometry:new l(o),attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(c),distanceDisplayCondition:o.distanceDisplayCondition}})}}register$4("rectangleC",RectangleCombine);class EditDivGraphic extends EditBase{get[_0x5e32ae(3290)](){return this._graphic._container}[_0x5e32ae(3138)](){const e={_0x391a59:1890,_0x1dee31:838,_0x1bf386:1890,_0x45cfe5:1084,_0x194c5b:3284,_0x1cecae:998},t=_0x5e32ae;return this._enabled?this:(this._enabled=!![],this[t(3290)].addEventListener(t(2799),this[t(2484)].bind(this)),this.container.addEventListener("mouseout",this._onMouseOut[t(2749)](this)),this.container.addEventListener("mousedown",this._onMarkerDragStart.bind(this)),addClass(this[t(3290)],this[t(3284)].style.editClassName||"mars3d-divGraphic-edit"),this._graphic._draw_tooltip=this[t(e._0x391a59)].getLangText("_拖动对象后")+"<br/>"+this[t(e._0x391a59)][t(4296)](t(e._0x1dee31))+t(1401)+this[t(e._0x1bf386)].getLangText(t(e._0x45cfe5)),this._graphic[t(2313)]=(i,s,n)=>{this._graphic.position=s,this.fire(EventType.editMovePoint,{mouseEvent:n,cartesian:s})},this._last_contextmenuConfig=this._graphic._contextmenuConfig,this._graphic[t(2182)](this.getDraggerContextMenu(this[t(e._0x194c5b)])),this[t(1404)](EventType[t(e._0x1cecae)]),this)}disable(){const e={_0x35eb5b:3284,_0x254fa9:3284,_0x23ddca:3284,_0x9cd402:3290,_0x4ff731:3290,_0x460819:1368,_0xce8512:3574,_0xd178bf:3189},t=_0x5e32ae;return this[t(1497)]?(this._enabled=![],this.stopMoveMatrix(),delete this[t(e._0x35eb5b)].onDragEnd,delete this[t(e._0x254fa9)]._draw_tooltip,this._graphic.unbindContextMenu(),this._last_contextmenuConfig&&(this[t(e._0x23ddca)]._contextmenuConfig=this._last_contextmenuConfig,delete this._last_contextmenuConfig),this[t(e._0x9cd402)].removeEventListener("mousemove",this._onMouseMove),this[t(e._0x4ff731)][t(e._0x460819)]("mouseout",this[t(2828)]),this.container[t(1368)]("mousedown",this[t(e._0xce8512)]),this.unbindEvent(),removeClass(this.container,this._graphic.style[t(e._0xd178bf)]||"mars3d-divGraphic-edit"),this.fire(EventType.editStop),this):this}unbindEvent(){const e={_0x51fec5:1368},t=_0x5e32ae;this[t(1185)]&&document[t(e._0x51fec5)](t(2799),this[t(1185)],![]),this._mouseUpHandle&&document.removeEventListener("mouseup",this._mouseUpHandle,![]),this._map.setCursor(![])}_onMouseMove(e){const t={_0x2e0c14:3284,_0x470481:831},i=_0x5e32ae;if(this[i(t._0x2e0c14)][i(t._0x470481)]){const s=this[i(t._0x2e0c14)][i(3199)](e);this._map.openSmallTooltip(s,this._graphic[i(t._0x470481)])}}_onMouseOut(e){this._map.closeSmallTooltip()}_onMarkerDragStart(e){const t={_0x268bf2:1185},i={_0x47b449:1917},s=_0x5e32ae;!this._enabled||e.which!==1||(e.preventDefault(),this._map.setCursor(!![]),this.fire(EventType.editMouseDown,{mouseEvent:e}),this[s(1535)](),!this._mouseMoveHandle&&(this._mouseMoveHandle=n=>{this._onMarkerDrag(n)},this._mouseUpHandle=n=>{this[s(i._0x47b449)](n)}),document.addEventListener("mousemove",this[s(t._0x268bf2)],![]),document.addEventListener("mouseup",this._mouseUpHandle,![]))}_onMarkerDrag(e){const t={_0x3370d2:3284,_0x44dd85:3199,_0x5e43c3:3445},i=_0x5e32ae;if(!this._enabled)return;e.preventDefault();const s=this[i(t._0x3370d2)][i(t._0x44dd85)](e),n=getCurrentMousePosition(this._map.scene,s);n&&(this._graphic.position=n,this._map.openSmallTooltip(s,this._map[i(4296)](i(t._0x5e43c3))),this.fire(EventType[i(2095)],{mouseEvent:e,cartesian:n,windowPosition:s}))}_onMarkerDragEnd(e){const t={_0x435085:2935,_0x3c53b8:3635,_0x44ea9f:3284,_0x1c19dd:1404},i=_0x5e32ae;if(!this[i(1497)])return;e[i(t._0x435085)](),this.unbindEvent(),this._map[i(t._0x3c53b8)]();const s=this[i(t._0x44ea9f)]._getWindowPosition(e);this[i(t._0x1c19dd)](EventType.editMovePoint,{mouseEvent:e,cartesian:this[i(3284)].position,windowPosition:s})}_updateMatrixMovePosition(e){const t={_0x1134c7:1054,_0x2fb4fd:2180},i=_0x5e32ae;!this[i(t._0x1134c7)]||!e.position||(this._matrixMove[i(t._0x2fb4fd)]=e.position)}}const isFirefox=window.navigator.userAgent[_0x5e32ae(4113)]()[_0x5e32ae(2316)](_0x5e32ae(1377))>=0;class DivGraphic extends BaseGraphic{constructor(e={}){const t={_0x346da3:3798,_0x355d55:4114,_0x440394:1250,_0x3d0331:1624,_0x1fdd24:3186,_0x13f227:1430,_0x248290:1118,_0x51aaee:2825},i=_0x5e32ae;super(e),this._hasEdit=this.options.hasEdit??this.style[i(2639)]??!![],this[i(1939)]=this[i(t._0x346da3)].depthTest??this[i(t._0x355d55)][i(2170)]??!![],this._hasCache=this.options[i(2270)]??this.style.hasCache??!![],this[i(t._0x440394)]=this.options[i(2881)]??this.style.hasZIndex??![],this._css_transform_origin=this.style[i(744)]??i(t._0x3d0331),this[i(t._0x346da3)].frameRate=this[i(3798)].frameRate??1,this[i(t._0x346da3)].testPoint=merge({name:i(t._0x1fdd24),color:"#ff0000",pixelSize:8,distanceDisplayCondition:this.style[i(t._0x13f227)],scaleByDistance:this[i(t._0x355d55)][i(t._0x248290)],clampToGround:this.style[i(t._0x51aaee)],heightReference:this.style.heightReference},this.options.testPoint),e.position&&(this.position=e[i(2180)])}get position(){return this._position}set position(e){const t={_0x107cf3:4114,_0x438b3b:2359},i=_0x5e32ae;var s;if(this._point=LngLatPoint.parse(e),this[i(2359)]){let n=this[i(t._0x107cf3)][i(2554)];Cesium__namespace[i(515)](n)&&(isString(n)&&(n=Number(template(n,this[i(1528)],!![])),isNaN(n)&&(n=0)),this[i(t._0x438b3b)].alt=n);const o=this[i(2578)]();o!==0&&(this[i(2359)].alt=this._point.alt+o)}this._position=(s=this._point)===null||s===void 0?void 0:s.toCartesian(),this[i(4192)]&&(this.debuggerPointEntity.position=this._position),this._updateDivPosition(),this[i(1404)](EventType.updatePosition,{position:this._position})}get[_0x5e32ae(3381)](){return this._point}get coordinate(){return this.getCoordinate()}get center(){return this._position}get positionShow(){return this._position_show}get[_0x5e32ae(673)](){return this[_0x5e32ae(4192)]!=null}set[_0x5e32ae(673)](e){const t={_0x5216d2:1443,_0x27c005:4192,_0x3fafd1:4084,_0x8a725a:1268},i=_0x5e32ae;this.debuggerPointEntity&&(this._layer[i(t._0x5216d2)].entities.remove(this.debuggerPointEntity),delete this.debuggerPointEntity),e&&(this[i(t._0x27c005)]=this._layer[i(1443)].entities[i(t._0x3fafd1)]({name:this.options.testPoint.name,position:this.position,point:PointStyleConver[i(t._0x8a725a)](this.options[i(673)])}))}get pointerEvents(){const e=_0x5e32ae;return this.options[e(3299)]}set pointerEvents(e){const t={_0xfdf078:2111},i=_0x5e32ae;this.options.pointerEvents=e,this[i(t._0xfdf078)](e)}get[_0x5e32ae(2224)](){return this._enabledEdit}get EditClass(){return EditDivGraphic}get depthTest(){return this._depthTest}set[_0x5e32ae(2170)](e){const t={_0x357497:1939,_0x5d374c:720},i=_0x5e32ae;this[i(t._0x357497)]=e,this[i(t._0x5d374c)]=null}get clampToGround(){return this.style.clampToGround}set clampToGround(e){const t=_0x5e32ae;this[t(4114)].clampToGround=e,this._calculateAsynSurfacePosition()}get parentContainer(){const e={_0x132341:3798},t=_0x5e32ae;return this[t(e._0x132341)].parentContainer?this[t(3798)].parentContainer:this[t(2873)].container}get[_0x5e32ae(4226)](){var e;return(e=this.parentContainer)===null||e===void 0?void 0:e.id}get container(){return this._container}get containerId(){return this[_0x5e32ae(2899)].id}get html(){return this[_0x5e32ae(2899)].innerHTML}set html(e){const t={_0x504e4a:2390,_0x543e15:4114,_0x4a1988:1528,_0x4da213:4114,_0x2e818c:1596,_0x3ec313:1404,_0x4ed471:2899,_0x167740:1155},i={_0x2c3975:3798},s={_0x2142d0:720,_0x2a6f3b:4112},n=_0x5e32ae;if(this.style.html=e,!(!this._container||!e)){if(typeof e=="function"&&(e=e(this[n(t._0x504e4a)])),e instanceof Promise){e.then(c=>{const _=n;this.options&&(this[_(s._0x2142d0)]=null,this[_(s._0x2a6f3b)]=c)});return}if(isString(e)){if(this.attr instanceof Promise){this.attr.then(c=>{this[n(i._0x2c3975)]&&(this._camera_cache=null,this.attr=c,this.html=e)});return}this[n(t._0x543e15)].template&&(e=this[n(t._0x543e15)].template.replace("{content}",e)),this._container.innerHTML=template(e,this[n(t._0x4a1988)],this[n(t._0x4da213)][n(t._0x2e818c)]??!![]),this[n(t._0x3ec313)](EventType.load)}else(e instanceof Element||e instanceof HTMLDivElement)&&(empty(this._container),e[n(t._0x4da213)].display!=="block"&&(e.style[n(1648)]="block"),this[n(t._0x4ed471)][n(t._0x167740)](e),this[n(1404)](EventType.load));if(this.style.className){var o;if(((o=this._container.children)===null||o===void 0?void 0:o.length)>0)for(let c=0,_=this._container.children.length;c<_;c++){const l=this._container.children[c];addClass(l,this.style.className)}else addClass(this._container,this.style.className)}this._appendHtmlHook&&this[n(3572)](),this._camera_cache=null}}get divWidth(){const e={_0x49ed03:3386},t=_0x5e32ae;var i;return(i=this._container)===null||i===void 0?void 0:i[t(e._0x49ed03)]}get divHeight(){const e=_0x5e32ae;var t;return(t=this[e(2899)])===null||t===void 0?void 0:t.offsetHeight}get[_0x5e32ae(2390)](){return this}_showHook(e){const t={_0xb83865:2538,_0x262cdf:4192},i=_0x5e32ae;this._container&&(e?(this._camera_cache=null,this._container.style.display=i(606)):this[i(t._0xb83865)](),this[i(4192)]&&(this[i(t._0x262cdf)].show=e))}[_0x5e32ae(2111)](e){this._container&&(e?this._container.style["pointer-events"]="all":this._container.style["pointer-events"]="none")}[_0x5e32ae(3913)](e){const t={_0xd69bf4:2899,_0x52ae78:3776},i=_0x5e32ae;this[i(4114)].globalAlpha=e,this[i(t._0xd69bf4)]&&(this._container.style[i(t._0x52ae78)]=e)}hasBindEvent(){const e={_0x5c6602:3299,_0x34f92d:1693,_0x5c7c7c:1693,_0x394a81:3986,_0x23665f:2873},t=_0x5e32ae;var i,s,n;return this.listens(EventType.click)?!![]:this.listens(EventType.mouseOver)?!![]:this[t(1693)](EventType.mouseOut)?!![]:this.hasPopup(![])?!![]:this[t(2598)](![])?!![]:Cesium__namespace.defined(this.options[t(e._0x5c6602)])?this[t(3798)].pointerEvents:(i=this._layer)!==null&&i!==void 0&&i[t(e._0x34f92d)](EventType.click)?!![]:(s=this._layer)!==null&&s!==void 0&&s[t(e._0x5c7c7c)](EventType[t(e._0x394a81)])?!![]:(n=this[t(e._0x23665f)])!==null&&n!==void 0&&n.listens(EventType[t(2088)])?!![]:this.hasPopup(!![])?!![]:this.hasTooltip(!![])?!![]:![]}_onEventHook(){this._updatePointerEvents(this.hasBindEvent())}_mountedHook(){const e={_0x3b5250:4114,_0x2c9e78:4112,_0x24fd7a:4114},t=_0x5e32ae;DivGraphicStyleConver[t(1268)](this.style,this),this[t(2899)]=create$3(t(1541),"mars3d-divGraphic ",this.parentContainer),this[t(2899)].id=this.id,this._container[t(e._0x3b5250)].opacity=this[t(4114)].globalAlpha,this.style.html&&(this[t(e._0x2c9e78)]=this[t(e._0x24fd7a)].html),this._updatePointerEvents(this.hasBindEvent())}[_0x5e32ae(4158)](e){const t={_0x198db9:2899,_0x53bb45:2749,_0x39e5a8:2799,_0xeef6e:2732},i=_0x5e32ae;this._layer.container.appendChild(this[i(t._0x198db9)]),this.hide(),this._container.addEventListener(i(1948),this._container_onClickHandler.bind(this)),this._container.addEventListener("mousedown",this._container_onMousedownHandler[i(t._0x53bb45)](this)),this._container.addEventListener(i(t._0x39e5a8),this._container_onMouseMoveHandler[i(2749)](this)),this._container[i(t._0xeef6e)](i(2449),this._container_onMouseoutHandler.bind(this)),this._calculateAsynSurfacePosition(),this.bindUpdateEvent()}[_0x5e32ae(2442)](){const e={_0x40dec4:1890,_0x490214:1220,_0x261f95:4311,_0x20d07e:2899},t=_0x5e32ae;this.stopDraw(),this[t(e._0x40dec4)][t(e._0x490214)](EventType[t(2311)],this._onTerrainChangeHandler,this),this.testPoint=![],this._container.removeEventListener("click",this._container_onClickHandler),this._container.removeEventListener("mousedown",this._container_onMousedownHandler),this._container.removeEventListener("mousemove",this._container_onMouseMoveHandler),this._container.removeEventListener("mouseout",this[t(e._0x261f95)]),remove(this[t(e._0x20d07e)])}_calculateAsynSurfacePosition(){const e={_0x397e00:720,_0x3bef6b:4091,_0x5c9ee7:3107,_0x3018b5:1890},t={_0x4c3d87:3728,_0x4aea74:3381,_0x257687:3216,_0x4dbaf0:2180},i=_0x5e32ae;this[i(e._0x397e00)]=null,this._hasAsynSurfacePosition=![];const s=this[i(2180)];s instanceof Cesium__namespace.Cartesian3&&(this[i(4114)].clampToGround||this.style.heightReference===Cesium__namespace.HeightReference[i(3267)]||this.style[i(e._0x3bef6b)]===Cesium__namespace[i(3728)].RELATIVE_TO_GROUND)&&(getSurfaceHeight(this._map[i(e._0x5c9ee7)],s,this.options).then(n=>{const o=i;this[o(1663)]||(this.style.heightReference===Cesium__namespace[o(t._0x4c3d87)].RELATIVE_TO_GROUND&&(n[o(t._0x4aea74)].alt+=n[o(t._0x257687)]),this[o(t._0x4dbaf0)]=n.point,this._hasAsynSurfacePosition=!![])}),this[i(e._0x3018b5)].on(EventType.terrainChange,this._onTerrainChangeHandler,this),this._map.on(EventType.terrainChange,this._onTerrainChangeHandler,this))}_onTerrainChangeHandler(e){const t=_0x5e32ae;this._map&&this[t(4243)]()}[_0x5e32ae(3167)](e){const t={_0x3c0980:4112,_0x2c903d:515,_0x53f279:720},i=_0x5e32ae;return e[i(t._0x3c0980)]&&(this[i(4112)]=e.html),DivGraphicStyleConver.toCesiumVal(this.style,this),(Cesium__namespace[i(t._0x2c903d)](e.setHeight)||Cesium__namespace.defined(e.addHeight))&&(this.position=this._point),this[i(t._0x53f279)]=null,this._updateDivPosition(),this}updateDivPosition(){return this._camera_cache=null,this._updateDivPosition(),this}update(e){const t={_0x57f3f0:4252,_0x100d49:3290},i=_0x5e32ae;this[i(1890)]&&(this.style[i(t._0x57f3f0)]&&this.style.html&&(this.html=this.style.html),this._updateDivPosition(),this.fire(EventType.postRender,{container:this[i(t._0x100d49)]},![]),this.fireTarget&&this[i(1457)](EventType.postRender,{container:this.container},![]))}[_0x5e32ae(3630)](){const e={_0x371539:3107,_0x8ed8d7:1890,_0x1c94fa:720,_0x311982:720,_0x17967f:720,_0x32051a:720,_0x4030b4:4114,_0x53e754:4114,_0x619613:3798,_0x4a4d78:4114,_0x133ba3:2345,_0x1d3631:3522,_0x29a89d:523,_0x1425be:2792,_0x2551fb:2899,_0x1ed0b5:1660,_0x41d0b7:1085,_0x4ab5ab:1149,_0x28c126:3680,_0x44cf27:1506,_0x5edaea:4114,_0x5d69f9:4114,_0x408744:759,_0x3542c1:1392,_0x5e3c37:1392,_0x477deb:1262,_0x5837c0:809},t=_0x5e32ae;var i;if(!this.show||!this[t(1890)])return![];const s=this._map[t(e._0x371539)],n=this._map[t(2792)];let o=getPositionValue(this.position,(i=this._map)===null||i===void 0?void 0:i.clock.currentTime);if(!Cesium__namespace.defined(o))return this[t(2538)](),![];if(this[t(3112)]){const T={x:o.x,y:o.y,z:o.z,p1:this[t(e._0x8ed8d7)].container.clientWidth,p2:this._map.container.clientHeight,p3:n.positionWC.x,p4:n[t(523)].y,p5:n[t(523)].z,p6:n.heading,p7:n.pitch,p8:n.roll};if(this[t(e._0x1c94fa)]&&T.x===this._camera_cache.x&&T.x===this._camera_cache.x&&T.y===this._camera_cache.y&&T.z===this[t(e._0x311982)].z&&T.p1===this._camera_cache.p1&&T.p2===this[t(e._0x17967f)].p2&&T.p3===this[t(720)].p3&&T.p4===this._camera_cache.p4&&T.p5===this._camera_cache.p5&&T.p6===this[t(e._0x32051a)].p6&&T.p7===this[t(720)].p7&&T.p8===this._camera_cache.p8)return!![];this._camera_cache=T}this._hasAsynSurfacePosition||(this[t(e._0x4030b4)].clampToGround||this[t(e._0x53e754)][t(4091)]===Cesium__namespace.HeightReference.CLAMP_TO_GROUND?o=getSurfacePosition(this._map.scene,o,this[t(e._0x619613)]):this[t(e._0x4a4d78)][t(4091)]===Cesium__namespace.HeightReference[t(e._0x133ba3)]&&(o=getSurfacePosition(this._map[t(3107)],o,{...this.options,relativeHeight:!![]}))),this[t(e._0x1d3631)]=o;const c=Cesium__namespace.SceneTransforms.wgs84ToWindowCoordinates(s,o),_=this[t(1430)],l=this.scaleByDistance;let h=n[t(2868)].height;if((this._hasZIndex||_||l)&&s.mode===Cesium__namespace[t(3850)].SCENE3D&&(h=Cesium__namespace[t(3916)].distance(o,n[t(e._0x29a89d)])),!c||_&&(_.near>h||_.far<h))return this._container[t(4114)].display===t(606)&&this.hide(),![];if(this.depthTest&&s.mode===Cesium__namespace.SceneMode.SCENE3D&&!new Cesium__namespace.EllipsoidalOccluder(s.globe[t(3875)],s[t(e._0x1425be)].positionWC).isPointVisible(o))return this._container.style.display==="block"&&this.hide(),![];this[t(2899)].style.display!=="block"&&(this._camera_cache=null,this[t(e._0x2551fb)].style.display=t(606));const f=this[t(e._0x1ed0b5)],m=this[t(e._0x41d0b7)];let g,C;switch(this.horizontalOrigin){case t(e._0x4ab5ab):case Cesium__namespace.HorizontalOrigin.CENTER:g=c.x-m/2;break;case"RIGHT":case Cesium__namespace.HorizontalOrigin[t(4313)]:g=c.x-m;break;case"LEFT":case Cesium__namespace[t(e._0x28c126)].LEFT:default:g=c.x;break}switch(this.verticalOrigin){case"TOP":case Cesium__namespace.VerticalOrigin.TOP:C=c.y;break;case"CENTER":case Cesium__namespace.VerticalOrigin.CENTER:C=c.y-f/2;break;case t(e._0x44cf27):case Cesium__namespace.VerticalOrigin.BOTTOM:default:C=c.y-f;break}this.style.anchor?(g+=this[t(e._0x5edaea)][t(3971)][0],C+=this[t(e._0x5d69f9)].anchor[1]):(this[t(4114)][t(3849)]&&(g+=this[t(4114)][t(3849)]),this.style[t(e._0x408744)]&&(C+=this.style[t(759)]));let E=1;l&&(h<=l[t(e._0x3542c1)]?E=l.nearValue:h>l[t(e._0x5e3c37)]&&h<l.far?E=l.nearValue+(l.farValue-l[t(3254)])*(h-l.near)/(l.far-l.near):E=l[t(3736)]);const P=t(3704)+E+",0,0,"+E+","+g+","+C+")",w=this._css_transform_origin;let M=this[t(3798)][t(e._0x477deb)]||"auto";this._hasZIndex&&(M=Math.round(9999999-h),M<=0&&(M=9999999)),merge(this._container.style,{transform:P,"transform-origin":w,"-ms-transform":P,"-ms-transform-origin":w,"-webkit-transform":P,"-webkit-transform-origin":w,"-moz-transform":P,"-moz-transform-origin":w,"-o-transform":P,"-o-transform-origin":w,"z-index":M}),this.fire(EventType[t(e._0x5837c0)],{position:o,windowPosition:c,distance:h,x:g,y:C,height:f,width:m,scale:E},!![])}hide(){const e=_0x5e32ae;this._container.style[e(1648)]="none",this._camera_cache=null}[_0x5e32ae(879)](e){return{type:"Point",coordinates:this[_0x5e32ae(3405)](e==null?void 0:e.noAlt)}}addDynamicPosition(e,t){const i={_0x3f41fa:4195,_0x35c4d7:762,_0x4a5beb:908,_0x57b878:3798,_0x41b53b:3558,_0x4136f8:527,_0x1571c9:1426,_0x7fb3e8:2046,_0x3be72e:3528,_0x426119:918,_0x106c5a:2046},s=_0x5e32ae;var n,o,c,_;if(this[s(i._0x3f41fa)])this.property!==this.position&&(this.position=this.property);else{const m=new Cesium__namespace[s(1160)](this[s(3798)].referenceFrame,this.options.numberOfDerivatives);m.forwardExtrapolationType=this.options.forwardExtrapolationType??Cesium__namespace[s(i._0x35c4d7)].HOLD,m.backwardExtrapolationType=this.options.backwardExtrapolationType??Cesium__namespace[s(762)].HOLD,!this.options[s(i._0x4a5beb)]&&(this[s(i._0x57b878)][s(908)]=new Cesium__namespace.VelocityOrientationProperty(m),this._entity&&(this._entity[s(i._0x4a5beb)]=this.getOrientation())),this[s(4195)]=m,this.position=m,this._maxCacheCount=this[s(3798)].maxCacheCount??50}this[s(i._0x41b53b)]();const l=((n=this._map)===null||n===void 0||(o=n.clock)===null||o===void 0?void 0:o.currentTime)||Cesium__namespace.JulianDate.now();t?isNumber(t)?t=Cesium__namespace.JulianDate[s(2534)](l,t,new Cesium__namespace[s(i._0x4136f8)]):isString(t)?t.indexOf("Z")===-1?t=Cesium__namespace.JulianDate.fromDate(new Date(t)):t=Cesium__namespace.JulianDate[s(1903)](t):t instanceof Date&&(t=Cesium__namespace.JulianDate.fromDate(t)):t=l,e=LngLatPoint[s(i._0x1571c9)](e);const h=(c=this[s(i._0x7fb3e8)])===null||c===void 0||(_=c._property)===null||_===void 0?void 0:_[s(i._0x3be72e)];if(this.options.autoMiddleDynamicPosition&&(h==null?void 0:h.length)>0&&this._position){const m=h[h.length-1];if(Cesium__namespace.JulianDate.secondsDifference(l,m)>.3){let g=this._position;this._lastDynamicPosition&&(g=getOnLinePointByLen(this._lastDynamicPosition,this[s(i._0x426119)],.01,!![])),g=setPositionsHeight(g,e.alt||0),this[s(i._0x106c5a)].addSample(l,g)}}const f=e.toCartesian();return this.position[s(4014)](t,f),this}[_0x5e32ae(3558)](){var e,t;if(this._maxCacheCount<1)return;const i=(e=this.property)===null||e===void 0||(t=e._property)===null||t===void 0?void 0:t._times;if(!i||i.length===0)return;const s=i.length-this._maxCacheCount-1;s>0&&this.property.removeSamples(new Cesium__namespace.TimeInterval({start:i[0],stop:i[s]}))}getCoordinate(e){const t=_0x5e32ae;return this.point?this[t(3381)].toArray(e):[]}openHighlight(e,t=!![]){const i={_0xe1d7b2:1256,_0x2d48d1:1523},s=_0x5e32ae;var n;t&&(this._map.closeHighlight(),this._map.last_highlighGraphic=this);const o=e||this._highlightOptions||((n=this._layer)===null||n===void 0?void 0:n._highlightOptions);if(o&&o[s(i._0xe1d7b2)]){for(let c=0,_=this._container[s(i._0x2d48d1)].length;c<_;c++){const l=this._container.children[c];addClass(l,o.className)}this._highlightOptions=o,this.fire(EventType.highlightOpen,{},!![])}}closeHighlight(){const e={_0xf2ba8:1297,_0x18effe:1523},t=_0x5e32ae;var i;if(!this.isAdded||((i=this[t(1890)])===null||i===void 0?void 0:i.last_highlighGraphic)!==this)return;this._map[t(e._0xf2ba8)]();const s=this._highlightOptions;if(s&&s.className){for(let n=0,o=this._container.children.length;n<o;n++){const c=this._container[t(e._0x18effe)][n];removeClass(c,s.className)}this.fire(EventType.highlightClose,{},!![])}}_getWindowPosition(e){const t={_0x5e8356:2356},i=_0x5e32ae;if(isFirefox){const s=this._map.container[i(2306)]();return new Cesium__namespace.Cartesian2(e.clientX-s.left,e.clientY-s.top)}return new Cesium__namespace.Cartesian2(e.layerX,e[i(t._0x5e8356)])}[_0x5e32ae(4216)](e){const t={_0x17f0c1:3400,_0x503510:2873,_0x22f2f9:4009,_0x222bb1:2639},i=_0x5e32ae;e.stopPropagation&&e[i(t._0x17f0c1)]();const s=this._getWindowPosition(e),n={mouseEvent:e,cartesian:this[i(2180)],windowPosition:s,sourceTarget:this,graphic:this,layer:this[i(t._0x503510)]};return this._layer&&(this._layer._graphic_drawing||this[i(2873)][i(t._0x22f2f9)]&&this[i(t._0x222bb1)])&&(n.cartesian=getCurrentMousePosition(this._map.scene,s)),n}_container_onClickHandler(e){const t={_0x5d15b6:3227,_0x10ef25:1404},i=_0x5e32ae;if(this._enabledEdit)return;const s=this._getEventTarget(e);s[i(2180)]=s[i(t._0x5d15b6)],this[i(t._0x10ef25)](EventType.click,s,!![])}_container_onMousedownHandler(e){const t={_0x56d0de:3301},i=_0x5e32ae;if(e.button!==2)return;const s=this._getEventTarget(e);s.position=s.windowPosition,this.fire(EventType[i(t._0x56d0de)],s,!![])}_container_onMouseMoveHandler(e){const t={_0x49e20f:1890},i=_0x5e32ae;if(this._enabledEdit)return;this[i(1890)][i(636)].clearMoveTargetDelay();const s=this._getEventTarget(e);s.endPosition=s[i(3227)],this._map.fire(EventType.mouseMove,s),this[i(t._0x49e20f)].fire(EventType[i(3927)],s),!this._hasMouseOver&&this.fire(EventType.mouseOver,s,!![]),this._hasMouseOver=!![]}_container_onMouseoutHandler(e){if(this[_0x5e32ae(463)])return;this._hasMouseOver=![];const i=this._getEventTarget(e);this.fire(EventType.mouseOut,i,!![])}autoSurfaceHeight(e){const t={_0x23938e:3107,_0xc486cf:3798},i=_0x5e32ae;return getSurfaceHeight(this._map[i(t._0x23938e)],this.position,e??this[i(t._0xc486cf)]).then(s=>{s.position&&(this.position=s.position)})}_style2Json(e,t){return DivGraphicStyleConver.toJSON(e,t,!![])}getRectangle(e){const t={_0x56d853:3937},i=_0x5e32ae,s=this.positionShow;return s?getRectangle([s],e==null?void 0:e[i(t._0x56d853)]):void 0}startDraw(e){const t={_0x3c1b9d:1890,_0x358cad:3205},i=_0x5e32ae;if(this._enabledDraw)return this;if(this._enabledDraw=!![],e&&this.addTo(e),!this[i(t._0x3c1b9d)])throw new Error("绘制时_map不能为空,请将对象添加到图层，并且图层已添加到Map");this._map[i(3505)](!![]),this[i(4133)](![]),this[i(4008)](),this[i(1404)](EventType.drawStart,{drawtype:this[i(t._0x358cad)],graphic:this},!![])}stopDraw(){const e=_0x5e32ae;var t,i,s;if(!this._enabledDraw)return this;this._stopDrawHook(),this[e(1890)]._setEditCursor(![]),this.enableControl(!![]),this[e(1890)].closeSmallTooltip(),this._enabledDraw=![],this.fire(EventType.drawCreated,{drawtype:this.type,graphic:this},!![]),(t=this.options)!==null&&t!==void 0&&t.success&&this.options.success(this),(i=this.options)!==null&&i!==void 0&&(s=i[e(3110)])!==null&&s!==void 0&&s.resolve&&this.options._promise.resolve(this)}[_0x5e32ae(4008)](){this._updatePointerEvents(![]),this._map.on(EventType.mouseMove,this._onMouseMoveHandler_point,this),this._map.on(EventType.click,this._onClickHandler_point,this)}_stopDrawHook(){const e={_0x3c67bd:1890,_0x1af3a3:1948,_0x584a58:2111},t=_0x5e32ae;this._map.off(EventType[t(4055)],this._onMouseMoveHandler_point,this),this[t(e._0x3c67bd)][t(1220)](EventType[t(e._0x1af3a3)],this._onClickHandler_point,this),this[t(e._0x584a58)](this.hasBindEvent())}_onMouseMoveHandler_point(e){const t={_0x72f658:831,_0x41aa83:1890,_0x43bcba:4018,_0x49bc29:1404},i=_0x5e32ae,s=e.cartesian;s&&(this.position=s),this._map.openSmallTooltip(e.endPosition,this[i(t._0x72f658)]||this[i(t._0x41aa83)].getLangText(i(t._0x43bcba))),this[i(t._0x49bc29)](EventType.drawMouseMove,{...e,drawtype:this.type,graphic:this},!![])}_onClickHandler_point(e){const t=e.cartesian;t&&(this.position=t),this.stopDraw()}_setPositionsToCallback(){}_cancelPositionsCallback(){}endDraw(){const e={_0xae2d5e:4267},t=_0x5e32ae;if(!this._enabledDraw)return this;this[t(1761)].length<this[t(e._0xae2d5e)]||(this.updateAttrForDrawing(![]),this.stopDraw())}updateAttrForDrawing(e){}enableControl(e){const t={_0x376962:4183},i=_0x5e32ae;this._map[i(636)][i(t._0x376962)]=e,this._map[i(2307)]&&(this._map.popup.enabled=e),this._map.tooltip&&(this._map.tooltip.enabled=e)}startEditing(){const e={_0x24f465:831},t=_0x5e32ae;if(this._enabledEdit)return this;if(this[t(463)]=!![],!this._map)throw new Error("编辑时_map不能为空,请将对象添加到图层，并且图层已添加到Map");this[t(e._0x24f465)]=this._map.getLangText("_释放后完成修改"),this.enableControl(![]),!this.editing&&(this.editing=new this.EditClass(this)),this.editing.activate&&this[t(3881)].activate()}stopEditing(){const e={_0x455bb2:463},t=_0x5e32ae;var i;if(!this._enabledEdit)return this;(i=this[t(3881)])!==null&&i!==void 0&&i.disable&&this.editing[t(1487)](),this.enableControl(!![]),this._map.closeSmallTooltip(),this[t(e._0x455bb2)]=![]}}register$4("div",DivGraphic,!![]);const DEF_STYLE$7={font_size:15,font_family:"楷体",color:"#ccc",boderColor:"rgb(21, 209, 242)",horizontalOrigin:Cesium__namespace.HorizontalOrigin.CENTER,verticalOrigin:Cesium__namespace.VerticalOrigin.CENTER};class DivBoderLabel extends DivGraphic{constructor(e={}){const t=_0x5e32ae;e.style={...DEF_STYLE$7,...e.style||{}},e.style.html=getHtmlByStyle$2(e.style,e.attr),super(e);const i=e.style[t(3976)],s=e.style.width||getStrLength(e.style.text)*i*.6,n=e.style.height||i*2;this._divWidth=s,this[t(2470)]=n}get divWidth(){return this._divWidth}get[_0x5e32ae(1660)](){return this[_0x5e32ae({_0xcdcfc5:2470}._0xcdcfc5)]}[_0x5e32ae(3167)](e){const t={_0x5d5943:515,_0x21056f:1260},i=_0x5e32ae;return(Cesium__namespace.defined(e.color)||Cesium__namespace[i(t._0x5d5943)](e.boderColor)||Cesium__namespace.defined(e.font_size)||Cesium__namespace[i(515)](e.font_family)||Cesium__namespace[i(515)](e[i(t._0x21056f)]))&&(this.html=getHtmlByStyle$2(this.style,this[i(1528)])),super._updateStyleBaseHook(e),this}}register$4("divBoderLabel",DivBoderLabel,!![]);function getHtmlByStyle$2(r,e){const t={_0x4ed4d8:2200,_0x7ef55e:2451,_0x16c909:4022,_0x5a5e69:3814},i=_0x5e32ae,s=r.color,n=r.boderColor,o=Cesium__namespace[i(t._0x4ed4d8)][i(t._0x7ef55e)](n).withAlpha(.5).toCssColorString(),c=r.font_size,_=r.width||getStrLength(r.text)*c*.6,l=r.height||c*2;return i(t._0x16c909)+c+i(t._0x5a5e69)+_+`px;
  --clip-width-1: `+(_+c)+i(735)+(_+c-2)+`px;
  --boder-height: `+l+`px;
  --clip-height-1: `+(l+10)+`px;
  --clip-height-2: `+(l+8)+`px;
  --text-color: `+s+`;
  --border-color: `+n+`;
  --box-shadow-color: `+o+`;">
     <div class="mars3d-divBoderLabel-boder">
       <span class="mars3d-divBoderLabel-text" style="font-family:`+r.font_family+';">'+template(r.text,e,r.templateEmptyStr??!![])+`</span>
     </div>
  </div> `}const DEF_STYLE$6={color:"#f33349",horizontalOrigin:Cesium__namespace.HorizontalOrigin.CENTER,verticalOrigin:Cesium__namespace.VerticalOrigin[_0x5e32ae(1149)]};class DivLightPoint extends DivGraphic{constructor(e={}){const t={_0x45bb25:1528},i=_0x5e32ae;e.style={...DEF_STYLE$6,...e.style||{}},e[i(4114)].html=getHtmlByStyle$1(e.style,e[i(t._0x45bb25)]),super(e)}_updateStyleBaseHook(e){const t={_0x67f992:2092,_0x104cdd:515},i=_0x5e32ae;return(Cesium__namespace.defined(e[i(t._0x67f992)])||Cesium__namespace[i(t._0x104cdd)](e[i(983)])||Cesium__namespace.defined(e.label))&&(this.html=getHtmlByStyle$1(this.style,this.attr)),super._updateStyleBaseHook(e),this}}register$4("divLightPoint",DivLightPoint,!![]);function getHtmlByStyle$1(r,e){const t={_0x4dcb49:999},i=_0x5e32ae;return i(t._0x4dcb49)+r[i(2092)]+";width: "+r.size+i(4294)+r.size+`px;">
    <p></p>
    `+(r.label?'<div class="mars3d-animation-point-lbl" style="color:'+(r.label.color||r.color)+';">'+template(r.label.text,e,r.label.templateEmptyStr??!![])+"</div>":"")+`
  </div>`}const DEF_STYLE$5={color:_0x5e32ae(3760),font_family:"楷体",font_size:15,lineHeight:100,circleSize:10,horizontalOrigin:Cesium__namespace.HorizontalOrigin.CENTER,verticalOrigin:Cesium__namespace.VerticalOrigin.BOTTOM};class DivUpLabel extends DivGraphic{constructor(e={}){const t={_0x6cbace:4114},i=_0x5e32ae;e.style={...DEF_STYLE$5,...e[i(t._0x6cbace)]||{}},e.style.html=getHtmlByStyle(e[i(4114)],e[i(1528)]),super(e)}_updateStyleBaseHook(e){const t={_0x26dac2:2092,_0x430b16:3167},i=_0x5e32ae;return(Cesium__namespace.defined(e[i(t._0x26dac2)])||Cesium__namespace.defined(e.circleSize)||Cesium__namespace.defined(e.font_size)||Cesium__namespace[i(515)](e[i(3345)])||Cesium__namespace.defined(e.lineHeight)||Cesium__namespace.defined(e.text))&&(this.html=getHtmlByStyle(this.style,this.attr)),super[i(t._0x430b16)](e),this}}register$4("divUpLabel",DivUpLabel,!![]);function getHtmlByStyle(r,e){const t={_0x4ffd80:3976,_0x433b44:2154,_0x51cdb9:2175},i=_0x5e32ae,s=r.color,n=r[i(3395)];return`
  <div class="mars3d-divUpLabel" style="color: `+s+`;">
    <div class="mars3d-divUpLabel-text" style="font-family:`+r.font_family+";font-size: "+r[i(t._0x4ffd80)]+i(1294)+template(r[i(1260)],e,!![])+`</div>
    <div class="mars3d-divUpLabel-line"  style="
        height: `+r.lineHeight+i(t._0x433b44)+s+`;"></div>
    <div style="border-radius: 50%;
        width: `+n+`px;
        height: `+n+i(t._0x51cdb9)+n/2+`px);
        background-color: `+s+i(2967)}class Popup extends DivGraphic{constructor(e={}){const t={_0x2ea627:2639,_0x4ff595:634,_0x5baef5:4114,_0x2389f1:759,_0xae09ad:3680,_0x201fe8:1301,_0x104e41:4313,_0x392df9:2170,_0x420294:4114,_0x5ca75d:4114},i=_0x5e32ae;e.eventParent=e.eventParent??![],e[i(t._0x2ea627)]=e.hasEdit??![],e.animation=e[i(t._0x4ff595)]??!![],e.zIndex=e.zIndex??1e7,e.style=e[i(t._0x5baef5)]||{},e[i(4114)].direction=e.style.direction??"top";const s={};switch(e.style.direction){case"top":s[i(t._0x2389f1)]=-8,s.horizontalOrigin=Cesium__namespace[i(t._0xae09ad)].CENTER,s.verticalOrigin=Cesium__namespace.VerticalOrigin.BOTTOM;break;case"bottom":s[i(759)]=8,s.horizontalOrigin=Cesium__namespace.HorizontalOrigin.CENTER,s.verticalOrigin=Cesium__namespace.VerticalOrigin.TOP;break;case i(4064):s.horizontalOrigin=Cesium__namespace.HorizontalOrigin.CENTER,s.verticalOrigin=Cesium__namespace.VerticalOrigin[i(1149)];break;case i(2893):s.offsetX=8,s.horizontalOrigin=Cesium__namespace.HorizontalOrigin.LEFT,s[i(3034)]=Cesium__namespace.VerticalOrigin.CENTER;break;case i(1719):s.offsetX=-8,s[i(t._0x201fe8)]=Cesium__namespace[i(t._0xae09ad)][i(t._0x104e41)],s.verticalOrigin=Cesium__namespace.VerticalOrigin.CENTER;break}e.style={...s,...e[i(4114)]},super(e),this._depthTest=this.options[i(t._0x392df9)]??this[i(t._0x420294)].depthTest??![],!Cesium__namespace.defined(this[i(t._0x5ca75d)].template)&&this.style.template!==![]&&(this[i(t._0x5ca75d)].template=this._getDefaultTemplate()),this.once(EventType[i(2302)],()=>{this[i(2207)]()})}get target(){var e;return(e=this.options)===null||e===void 0?void 0:e.target}get eventTarget(){const e=_0x5e32ae;var t,i;return(t=this.options)!==null&&t!==void 0&&t[e(3510)]?this[e(3798)][e(3510)]:(i=this[e(3798)])!==null&&i!==void 0&&i.target?this.options.target:this}_getDefaultTemplate(){const e={_0x34f2e2:2479,_0x1981bf:4114,_0x390fa4:1668,_0x4d2ff3:2298},t=_0x5e32ae;let i;this[t(4114)].closeButton??!![]?i=t(e._0x34f2e2):i="";let s="";return this[t(e._0x1981bf)].maxWidth&&(s+="max-width: "+this.style[t(700)]+"px;"),this.style.minWidth&&(s+="min-width: "+this.style.minWidth+t(e._0x390fa4)),this.style.maxHeight&&(s+=t(3676)+this.style[t(e._0x4d2ff3)]+"px;"),`
      <div class="mars3d-popup `+(!this.style.timeRender&&this[t(3798)][t(634)]?t(3965):"")+`">
        `+i+`
        <div class="mars3d-popup-content-wrapper mars3d-popup-background">
          <div id="popup-`+this.id+t(2733)+s+`">{content}</div>
        </div>
        <div class="mars3d-popup-tip-container">
          <div class="mars3d-popup-tip mars3d-popup-background"></div>
        </div>
      </div>`}[_0x5e32ae(3572)](){const e={_0x2cf7ad:2732},t=_0x5e32ae,i=this._container.querySelector(".closeButton");i&&i[t(e._0x2cf7ad)]("click",s=>{const n=t;this.target&&this.target.closeHighlight&&this[n(3132)].closeHighlight(),this.remove(!![])})}fireTarget(e,t={},i=!![]){const s={_0x46e550:1890,_0x1f04a6:1283,_0x4f9a08:3798},n=_0x5e32ae,o=this.target||this[n(s._0x46e550)];if(o){if(this.options.event)for(const c in this[n(3798)].event)c==="options"||c===n(s._0x1f04a6)||(t[c]=this[n(s._0x4f9a08)].event[c]);t[n(2159)]=o,t[n(1528)]=this.attr,t[n(3290)]=this.container,this._fireBindDataEx(t),o[n(1404)](e,t,i)}}_fireBindDataEx(e){const t=_0x5e32ae;e[t(2307)]=this}_addedHook(e){const t={_0x5df39d:1890,_0x4289d7:989,_0x5f4159:3652},i=_0x5e32ae;super._addedHook(e),this.once(EventType.change,s=>{const n=_0x5210;if(this.options[n(3177)]&&this._map&&(s.y<0||s.x<0||s.x>this._map.scene[n(3300)][n(3716)]-s.width||s.y>this._map.scene.canvas.clientHeight-s.height)){const o=s.width/2+s.x,c=s.height/2+s.y,_=new Cesium__namespace.Cartesian2(o,c),l=this[n(t._0x5df39d)].scene.camera[n(t._0x4289d7)](_);let h=this._map.scene.globe.pick(l,this[n(1890)][n(3107)]);!h&&(h=this._map[n(3107)][n(2792)][n(t._0x5f4159)](_)),this._map.flyToPoint(h)}}),this.target&&this[i(3132)].on(EventType.updatePosition,this._graphic_updatePosition,this)}_removedHook(){const e={_0x1e93bc:2442},t=_0x5e32ae;this[t(3132)]&&this[t(3132)].off(EventType.updatePosition,this._graphic_updatePosition,this),this._fireTarget_close(),super[t(e._0x1e93bc)]()}_graphic_updatePosition(e){const t={_0x250137:2118},i=_0x5e32ae;var s;(s=e[i(t._0x250137)])!==null&&s!==void 0&&s[i(3220)]&&(this.position=e.graphic[i(3220)]())}[_0x5e32ae(2207)](){const e={_0x23cc81:4319},t=_0x5e32ae;this.fireTarget(EventType[t(e._0x23cc81)])}_fireTarget_close(){this.fireTarget(EventType.popupClose)}_closeAllControl(){}_container_onClickHandler(){}_container_onMousedownHandler(){}[_0x5e32ae(936)](){}[_0x5e32ae(4311)](){}[_0x5e32ae(2798)](){const e={_0x1f6134:3299},t=_0x5e32ae;return this[t(3798)][t(e._0x1f6134)]??!![]}}register$4(_0x5e32ae(2307),Popup);class Tooltip extends Popup{_getDefaultTemplate(){const e={_0x40ff10:4114},t=_0x5e32ae;return'<div id="tooltip-'+this.id+'"  class="mars3d-tooltip mars3d-tooltip-'+this[t(e._0x40ff10)].direction+'">{content}</div>'}[_0x5e32ae(3632)](e){e.tooltip=this}[_0x5e32ae(2207)](){this[_0x5e32ae(1457)](EventType.tooltipOpen)}_fireTarget_close(){this[_0x5e32ae(1457)](EventType.tooltipClose)}}register$4("tooltip",Tooltip);const DEF_STYLE$4={startColor:Cesium__namespace[_0x5e32ae(2200)].LIGHTCYAN.withAlpha(.3),endColor:Cesium__namespace.Color[_0x5e32ae(2995)].withAlpha(0),startScale:2,endScale:4,minimumParticleLife:3,maximumParticleLife:6,minimumSpeed:1,maximumSpeed:2,emissionRate:100};class ParticleSystem extends BasePointPrimitive{constructor(e={}){const t={_0x40cdb5:4114,_0x3d91a3:529,_0x1d19fe:3916,_0x5b4df7:2279},i=_0x5e32ae;e[i(t._0x40cdb5)]={...DEF_STYLE$4,emitter:new Cesium__namespace.CircleEmitter(1),...e[i(4114)]||{}},super(e),this.emitterModelMatrix=new Cesium__namespace.Matrix4,this[i(t._0x3d91a3)]=new Cesium__namespace[i(t._0x1d19fe)],this[i(t._0x5b4df7)]=new Cesium__namespace[i(2988)],this.hpr=new Cesium__namespace[i(3064)],this[i(925)]=new Cesium__namespace.TranslationRotationScale}get[_0x5e32ae(1679)](){return this._primitive}get maxHeight(){const e={_0x393134:2298},t=_0x5e32ae;return this.style[t(e._0x393134)]}set maxHeight(e){const t=_0x5e32ae;this[t(4114)][t(2298)]=e}get gravity(){return this.style.gravity||0}set gravity(e){this.style.gravity=e}get transX(){return this[_0x5e32ae({_0x4d0dad:4114}._0x4d0dad)].transX||0}set transX(e){const t=_0x5e32ae;this.style[t(2150)]=e}get transY(){const e={_0x324ace:2592},t=_0x5e32ae;return this.style[t(e._0x324ace)]||0}set transY(e){this.style.transY=e}get transZ(){return this.style.transZ||0}set[_0x5e32ae(1707)](e){this.style.transZ=e}get particleSize(){return this.style.particleSize||25}set particleSize(e){const t={_0x3cb166:1208},i=_0x5e32ae;this.style.particleSize=e,this._primitive&&(this._primitive.minimumImageSize.x=e,this._primitive.minimumImageSize.y=e,this._primitive.maximumImageSize.x=e,this._primitive[i(t._0x3cb166)].y=e)}get hasOpacity(){return![]}_addedHook(e){const t={_0x289b0b:625,_0x197e6a:2180,_0x3fdf79:1444,_0x5edcb5:4175},i={_0x1c24a7:1572,_0x11dd5e:4246},s=_0x5e32ae;if(!this.show)return;const n=this[s(1890)][s(1949)].currentTime,o={imageSize:new Cesium__namespace.Cartesian2(this.particleSize,this[s(t._0x289b0b)]),modelMatrix:this._computeModelMatrix(n),emitterModelMatrix:this._computeEmitterModelMatrix(n),...this.style,show:this.show};this[s(3002)]=new Cesium__namespace.ParticleSystem(o),this[s(930)].add(this._primitive),this.options.position&&(this.options.position instanceof Cesium__namespace[s(3703)]||this.options[s(t._0x197e6a)]instanceof Cesium__namespace.SampledPositionProperty)&&(this._orientation=this.options.orientation||new Cesium__namespace[s(3111)](this.options[s(t._0x197e6a)]),this[s(4195)]=this.options.position),this._bindUpdateCallback(),this._hasUpdate_modelMatrix=isFunction(this.options.modelMatrix)||this.property,this[s(t._0x3fdf79)]=isFunction(this.options.emitterModelMatrix)||this.heading||this.pitch||this[s(t._0x5edcb5)]||this.transX||this.transY||this.transZ;const c=this._primitive[s(932)],_=this;this._primitive.update=function(l){const h=s;_._update(l),this._previousTime&&Cesium__namespace.JulianDate.secondsDifference(l[h(i._0x1c24a7)],this._previousTime)>10&&(this._previousTime=Cesium__namespace.JulianDate[h(i._0x11dd5e)](l.time,this._previousTime)),c.bind(this)(l)}}[_0x5e32ae(2442)](){const e={_0x3d5d43:1890},t=_0x5e32ae;this[t(e._0x3d5d43)]&&this.primitiveCollection[t(2004)](this._primitive)}_update(e){const t={_0x34bc34:575,_0x1dbf3f:575,_0x54c05a:575,_0x4af3b2:3002},i=_0x5e32ae;!this.show||!this._primitive||!this._map||(this.property&&(this._position=getPositionValue(this.property,e.time)),this._hasUpdate_modelMatrix&&(this._primitive.modelMatrix=this._computeModelMatrix(e.time)),this._hasUpdate_emitterModelMatrix&&(this._primitive.emitterModelMatrix=this._computeEmitterModelMatrix(e.time)),Cesium__namespace.defined(this[i(2298)])&&e.frameNumber%10===0&&(this._map.camera.positionCartographic.height<this.maxHeight?this[i(3002)][i(t._0x34bc34)]!==this[i(t._0x1dbf3f)]&&(this._primitive[i(t._0x54c05a)]=this[i(575)]):this[i(3002)].show&&(this[i(t._0x4af3b2)][i(575)]=![])),this._primitive[i(3348)]&&this.fire("complete"))}_computeModelMatrix(e){const t={_0x3dcb08:3798,_0x1b511e:918,_0x4da4dd:918,_0x55dcc7:4102},i=_0x5e32ae;return this.options.modelMatrix?isFunction(this.options.modelMatrix)?this[i(t._0x3dcb08)].modelMatrix(e):this.options.modelMatrix:this[i(t._0x1b511e)]?Cesium__namespace[i(2911)].eastNorthUpToFixedFrame(this[i(t._0x4da4dd)]):new Cesium__namespace[i(t._0x55dcc7)]}_computeEmitterModelMatrix(e){const t={_0x212a11:4115,_0x191fc7:526},i=_0x5e32ae;if(this.options.emitterModelMatrix)return isFunction(this[i(3798)].emitterModelMatrix)?this.options.emitterModelMatrix(e):this[i(3798)].emitterModelMatrix;const s=this.heading,n=this.pitch,o=this.roll;return this.hpr=Cesium__namespace.HeadingPitchRoll.fromDegrees(s,n,o,this.hpr),this.trs.translation=Cesium__namespace.Cartesian3[i(t._0x212a11)](this.transX,this[i(2592)],this.transZ,this[i(529)]),this.trs.rotation=Cesium__namespace.Quaternion.fromHeadingPitchRoll(this[i(t._0x191fc7)],this.rotation),Cesium__namespace.Matrix4[i(1299)](this.trs,this.emitterModelMatrix),this.emitterModelMatrix}[_0x5e32ae(603)](){const e={_0x17f9d9:2403},t={_0x1247ba:3029,_0x586933:4041},i=_0x5e32ae;if(this.options.updateCallback){this._primitive.updateCallback=this[i(3798)][i(1815)];return}if(this[i(e._0x17f9d9)]===0)this._primitive.updateCallback=void 0;else if(!this._primitive.updateCallback){const s=this,n=new Cesium__namespace.Cartesian3;this._primitive.updateCallback=function(o,c){const _=i,l=o.position;Cesium__namespace.Cartesian3[_(t._0x1247ba)](l,n),Cesium__namespace[_(3916)].multiplyByScalar(n,s.gravity*c,n),o[_(t._0x586933)]=Cesium__namespace.Cartesian3.add(o.velocity,n,o.velocity)}}}[_0x5e32ae(3601)](e,t){const i={_0x453ab6:625,_0x1233fb:625,_0x53f85b:3798,_0x1f7947:2625,_0x35dd7d:4175},s=_0x5e32ae;if(this[s(3002)]){for(const n in t)this._primitive[n]=t[n];t.particleSize&&(this[s(i._0x453ab6)]=t[s(i._0x1233fb)]),t.gravity&&this._bindUpdateCallback()}this[s(1444)]=isFunction(this[s(i._0x53f85b)].emitterModelMatrix)||this.heading||this[s(i._0x1f7947)]||this[s(i._0x35dd7d)]||this[s(2150)]||this.transY||this.transZ}[_0x5e32ae(4148)](e,t){return this._getDrawPointEntityClass(e,t)}}register$4("particleSystem",ParticleSystem,!![]);var ArcFrustumFS=_0x5e32ae(511),ArcFrustumVS=`in vec4 aPosition;

void main() {
  gl_Position = czm_modelViewProjection * vec4(aPosition.xyz, 1.0);
}
`;const DEF_STYLE$3={color:Cesium__namespace.Color.WHITE};class ArcFrustum extends BasePointPrimitive{constructor(e={}){const t={_0x4396be:4114},i=_0x5e32ae;e.style={...DEF_STYLE$3,...e[i(t._0x4396be)]||{}},super(e),delete this._position,delete this[i(2359)],this._boundingSphere=new Cesium__namespace.BoundingSphere,this._color=getCesiumColor(this.style[i(2092)])}get[_0x5e32ae(1679)](){return this}get color(){return this[_0x5e32ae({_0x232cae:1109}._0x232cae)]}set[_0x5e32ae(2092)](e){this._color=e}get angle(){const e=_0x5e32ae;return this[e(4114)][e(1314)]}set angle(e){const t={_0x40b655:1314},i=_0x5e32ae;this.style[i(t._0x40b655)]=e,this.destroyCommands()}get angle2(){const e=_0x5e32ae;return this.style.angle2??this.style[e(1314)]}set angle2(e){this.style.angle2=e,this.destroyCommands()}get modelMatrix(){const e={_0x244746:2180,_0x5d541f:1567,_0x54aa17:3107,_0xf46cae:512,_0x4209ad:1314,_0xa26ac8:1876},t=_0x5e32ae;if(this.options.modelMatrix)return this.options.modelMatrix;const i=this[t(e._0x244746)],s=new Cesium__namespace.HeadingPitchRoll(Cesium__namespace.Math[t(e._0x5d541f)](this.heading),Cesium__namespace.Math[t(1567)](this.pitch),Cesium__namespace.Math.toRadians(this.roll)),n=new Cesium__namespace.Camera(this._map[t(e._0x54aa17)]);return n.position=i,n.frustum.fov=Cesium__namespace[t(1286)][t(e._0x5d541f)](this.angle*2),n.frustum[t(e._0xf46cae)]=this[t(e._0x4209ad)]/this.angle2,n[t(2801)].near=.01,n.frustum[t(e._0xa26ac8)]=this.style.distance,n[t(1557)]({destination:i,orientation:{heading:s.heading,pitch:s.pitch,roll:s.roll}}),n.inverseViewMatrix}[_0x5e32ae(1537)](){this.destroyCommands()}_addedHook(e){const t={_0x313ff3:575},i=_0x5e32ae;this[i(t._0x313ff3)]&&this[i(930)].add(this)}_removedHook(){const e=_0x5e32ae;this.primitiveCollection.contains(this)&&(this._noDestroy=!![],this.primitiveCollection[e(2004)](this),this._noDestroy=![])}update(e){const t={_0x1c7feb:2060,_0x503a92:3759},i=_0x5e32ae;this.show&&(!Cesium__namespace.defined(this[i(t._0x1c7feb)])&&(this._command=this.createCommand(e.context)),e[i(2533)].render&&Cesium__namespace[i(515)](this._command)&&e.commandList[i(t._0x503a92)](this[i(t._0x1c7feb)]))}[_0x5e32ae(1328)](){const e={_0x14f520:515,_0x5217bf:2060,_0x2b1ca3:757},t=_0x5e32ae;Cesium__namespace[t(e._0x14f520)](this._command)&&(this._command.shaderProgram&&this._command.shaderProgram.destroy(),this[t(2060)].vertexArray&&this[t(e._0x5217bf)].vertexArray[t(e._0x2b1ca3)](),delete this._command)}[_0x5e32ae(2608)](e){const t={_0x4a18f9:3194,_0x358e3d:2180,_0x4b7bfe:4246,_0xf53e7e:2660,_0x115e97:2684,_0x202a39:4010,_0x466053:2660,_0x57eb0a:2401,_0x77c8b6:2185},i={_0x311de2:2092},s=_0x5e32ae;this.destroyCommands();const n=this.createVertices(),o={aPosition:0},c=Cesium__namespace.Buffer.createVertexBuffer({context:e,typedArray:n.vertices,usage:Cesium__namespace.BufferUsage.STATIC_DRAW}),_=[{index:o.aPosition,vertexBuffer:c,componentsPerAttribute:3,componentDatatype:Cesium__namespace.ComponentDatatype[s(2816)],offsetInBytes:0,strideInBytes:12,normalize:![]}],l=Cesium__namespace.Buffer.createIndexBuffer({context:e,typedArray:n.indices,usage:Cesium__namespace.BufferUsage.STATIC_DRAW,indexDatatype:Cesium__namespace.IndexDatatype[s(3690)]}),h=new Cesium__namespace.VertexArray({context:e,attributes:_,indexBuffer:l}),f=this[s(2294)];this[s(2660)][s(t._0x4a18f9)]=this.style.distance,this[s(t._0x358e3d)]?this._boundingSphere.position=this.position:(Cesium__namespace.Cartesian3[s(t._0x4b7bfe)](Cesium__namespace.Cartesian3.ZERO,this._boundingSphere.center),Cesium__namespace[s(2407)].transform(this._boundingSphere,f,this[s(t._0xf53e7e)]));const m=new Cesium__namespace.DrawCommand({primitiveType:Cesium__namespace[s(t._0x115e97)].LINES,shaderProgram:Cesium__namespace[s(t._0x202a39)][s(2185)]({context:e,vertexShaderSource:ArcFrustumVS,fragmentShaderSource:ArcFrustumFS,attributeLocations:o}),vertexArray:h,modelMatrix:f,boundingVolume:this[s(t._0x466053)],uniformMap:{color:()=>this[s(i._0x311de2)]},pass:Cesium__namespace[s(t._0x57eb0a)].OPAQUE,owner:this,cull:!![],renderState:Cesium__namespace.RenderState[s(t._0x77c8b6)]({cull:{enabled:!![]},depthTest:{enabled:!![]}})});return this[s(2414)](m),m}createVertices(){const e={_0x447378:2548,_0xad5f21:1784,_0x555957:1962},t=_0x5e32ae,i=this[t(4114)].distance,s=20,n=(s+1)*(s+1)+1,o=Cesium__namespace.ComponentDatatype.createTypedArray(Cesium__namespace.ComponentDatatype.FLOAT,3*n);let c=3;const _=Cesium__namespace.Math.toRadians(this.angle*2),l=Cesium__namespace.Math.toRadians(this[t(e._0x447378)]*2),h=Math.tan(.5*l),f=i*h,m=Math.PI-.5*_;let g=0,C=0;const E=_/s;for(let D=0;D<s+1;D++){g=m+D*E;const N=f/(i/Math.cos(g)),k=Math.atan(N),B=-k,$=2*k/s;for(let H=0;H<s+1;H++)C=B+H*$,o[c++]=i*Math[t(e._0xad5f21)](C)*Math.sin(g),o[c++]=i*Math.sin(C),o[c++]=i*Math.cos(C)*Math.cos(g)}const P=2*(4+5*s+2*s*3),w=Cesium__namespace.ComponentDatatype[t(e._0x555957)](Cesium__namespace.ComponentDatatype[t(3690)],P);let M=0;w[M++]=0,w[M++]=1,w[M++]=0,w[M++]=s+1,w[M++]=0,w[M++]=s*(s+1)+1,w[M++]=0,w[M++]=(s+1)*(s+1);for(let D=0;D<5;D++)for(let N=0;N<s;N++)w[M++]=1+N+5*(s+1)*D,w[M++]=1+(N+1)+5*(s+1)*D;for(let D=0;D<5;D++)for(let N=0;N<s;N++)w[M++]=1+(s+1)*N+5*D,w[M++]=1+(s+1)*(N+1)+5*D;const T=s*s*3*2+3*s*4,L=Cesium__namespace[t(1590)].createTypedArray(Cesium__namespace.ComponentDatatype.SHORT,T),R=1;for(let D=0;D<s;D++)for(let N=0;N<s;N++)L[M++]=R+D+N*(s+1),L[M++]=R+D+1+N*(s+1),L[M++]=R+D+(N+1)*(s+1),L[M++]=R+D+1+N*(s+1),L[M++]=R+D+1+(N+1)*(s+1),L[M++]=R+D+(N+1)*(s+1);for(let D=0;D<s;D++)L[M++]=D+1+R,L[M++]=D+R,L[M++]=0,L[M++]=0,L[M++]=D+s*(s+1)+R,L[M++]=D+1+s*(s+1)+R;for(let D=0;D<s;D++)L[M++]=0,L[M++]=D*(s+1)+R,L[M++]=(D+1)*(s+1)+R,L[M++]=s+(D+1)*(s+1)+R,L[M++]=s+D*(s+1)+R,L[M++]=0;return{vertices:o,indices:w}}}register$4("arcFrustum",ArcFrustum,!![]);var TetrahedronFS=`in vec3 v_positionEC;
in vec3 v_normalEC;
in vec2 v_st;
uniform vec4 color;
uniform float globalAlpha;

void main() {
  vec3 positionToEyeEC = -v_positionEC;
  vec3 normalEC = normalize(v_normalEC);
  #ifdef FACE_FORWARD
  normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);
  #endif
  czm_materialInput materialInput;
  materialInput.normalEC = normalEC;
  materialInput.positionToEyeEC = positionToEyeEC;
  materialInput.st = v_st;

  vec2 st = materialInput.st;
  czm_material material = czm_getDefaultMaterial(materialInput);

  material.alpha = (mix(0.1, 1.0, clamp((1.0 - st.t) * color.a, 0.0, 1.0)) + (1.0 - sign(st.t - czm_frameNumber * 0.001)) * 0.2 + 0.4) * globalAlpha;
  material.diffuse = color.rgb;

  #ifdef FLAT
  out_FragColor = vec4(material.diffuse + material.emission, material.alpha);
  #else
  out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);
  #endif
}
`,TetrahedronVS=_0x5e32ae(1706);const DEF_STYLE$2={width:20,height:30,color:new Cesium__namespace[_0x5e32ae(2200)](.8,.8,0,.8),animation:!![],moveHeight:30,moveDuration:2,rotationAngle:1};class Tetrahedron extends BasePointPrimitive{constructor(e={}){e.style={...DEF_STYLE$2,...e.style||{}},super(e),this._globalAlpha=1}get[_0x5e32ae(1679)](){return this}get color(){return this._color}set[_0x5e32ae(2092)](e){this._color=getCesiumColor(e)}get modelMatrix(){const e={_0x23433a:4114,_0x48950d:3865},t=_0x5e32ae;if(this.options[t(2294)])return this.options.modelMatrix;if(!this.position)return Cesium__namespace.Matrix4.IDENTITY;const i=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(this.position),s=Cesium__namespace.Matrix4[t(3160)](new Cesium__namespace.Cartesian3(this[t(e._0x23433a)][t(4005)],this.style[t(4005)],this[t(4114)][t(e._0x48950d)]));return Cesium__namespace[t(4102)][t(2663)](i,s,new Cesium__namespace.Matrix4)}_addedHook(e){const t={_0x20a63e:3601},i=_0x5e32ae;!this.show||!this.position||(this[i(t._0x20a63e)](e,e),this.primitiveCollection.add(this))}[_0x5e32ae(2442)](){const e={_0xc98c21:3068},t=_0x5e32ae;this.primitiveCollection&&this[t(930)][t(e._0xc98c21)](this)&&(this._noDestroy=!![],this.primitiveCollection.remove(this),this._noDestroy=![]),delete this._modelMatrix}_updatePositionsHook(){const e=_0x5e32ae;this._modelMatrix=this[e(2294)],this._clearDrawCommand()}[_0x5e32ae(3601)](e,t){const i={_0x566c1d:4119,_0xee6543:3230,_0x100dfc:2656,_0x58cc34:514},s=_0x5e32ae;(t[s(4005)]||t.height)&&this[s(i._0x566c1d)](),this.color=e.color,this[s(2736)]=Cesium__namespace.Math.toRadians(e[s(i._0xee6543)]),this._moveMaxHeight=e[s(i._0x100dfc)]/this.style[s(3865)],this[s(514)]!==0&&(this._moveDistanceStep=this[s(i._0x58cc34)]/(e.moveDuration*60),this._moveDistanceSum=0)}update(e){const t={_0x3f4f2d:575,_0x2a50b5:1420,_0x2e6cc1:1826,_0x27a3e3:2630,_0x5a6787:852},i=_0x5e32ae;if(this[i(t._0x3f4f2d)]){if(this.style.animation){if(this._moveMaxHeight!==0){this[i(1427)]+=this[i(3888)],(this._moveDistanceSum>=this._moveMaxHeight||this._moveDistanceSum<=0)&&(this._moveDistanceStep=-this._moveDistanceStep);const s=new Cesium__namespace.Cartesian3(0,0,this[i(3888)]);Cesium__namespace.Matrix4.multiplyByTranslation(this._modelMatrix,s,this._modelMatrix)}if(this._rotationAngle!==0){const s=Cesium__namespace.Matrix4.fromRotationTranslation(Cesium__namespace.Matrix3.fromRotationZ(this._rotationAngle));Cesium__namespace.Matrix4.multiply(this._modelMatrix,s,this[i(t._0x2a50b5)])}}!Cesium__namespace[i(515)](this[i(1826)])&&(this[i(t._0x2e6cc1)]=this.createDrawCommand(e[i(3521)])),e.passes.render?Cesium__namespace.defined(this[i(t._0x2e6cc1)])&&e.commandList.push(this._drawCommand):Cesium__namespace.defined(this._pickCommand)&&e[i(t._0x27a3e3)].push(this[i(t._0x5a6787)])}}_clearDrawCommand(){const e={_0x904278:1826,_0x5980fd:757,_0x12cec7:852,_0x57c352:2271},t=_0x5e32ae;Cesium__namespace[t(515)](this._drawCommand)&&(this[t(e._0x904278)].vertexArray&&this._drawCommand.vertexArray.destroy(),this[t(1826)].shaderProgram&&this._drawCommand.shaderProgram[t(e._0x5980fd)](),delete this._drawCommand),Cesium__namespace.defined(this[t(e._0x12cec7)])&&(this._pickCommand.vertexArray&&this[t(852)][t(e._0x57c352)].destroy(),this._pickCommand.shaderProgram&&this._pickCommand[t(1772)].destroy(),delete this._pickCommand)}createDrawCommand(e){const t={_0x14a1fd:4114,_0x1d429c:2217,_0x3d222e:4114,_0x4bb049:3865,_0x58a70b:1711,_0x4b8aa9:3633},i=_0x5e32ae,s=this.style.translucent??![],n=this[i(t._0x14a1fd)].closed??!![],o=Cesium__namespace[i(t._0x1d429c)].getDefaultRenderState(s,n,this.options.renderState),c=Cesium__namespace.RenderState.fromCache(o),_={position:0,textureCoordinates:1},l=Cesium__namespace.ShaderProgram[i(2185)]({context:e,vertexShaderSource:TetrahedronVS,fragmentShaderSource:TetrahedronFS,attributeLocations:_}),h=this.createVertexArray(e),f=new Cesium__namespace.BoundingSphere(this.position,Math.max(this[i(t._0x3d222e)].width,this[i(t._0x14a1fd)][i(t._0x4bb049)])),m=new Cesium__namespace[i(1539)]({primitiveType:Cesium__namespace[i(2684)].TRIANGLES,shaderProgram:l,vertexArray:h,modelMatrix:this[i(1420)],renderState:c,boundingVolume:f,uniformMap:{color:()=>this.color,globalAlpha:()=>this[i(4236)]},castShadows:![],receiveShadows:![],pass:Cesium__namespace.Pass.TRANSLUCENT,owner:this,pickOnly:!![],pickCommand:new Cesium__namespace.DrawCommand({owner:this,pickOnly:!![]})});this.bindPickId(m),m.pickId=e[i(t._0x58a70b)]({primitive:m,id:this.id});const g=new Cesium__namespace.DrawCommand({owner:m,primitiveType:Cesium__namespace.PrimitiveType.TRIANGLES,pickOnly:!![]});g[i(2271)]=h,g.renderState=c;const C=Cesium__namespace.ShaderProgram.fromCache({context:e,vertexShaderSource:TetrahedronVS,fragmentShaderSource:Cesium__namespace[i(1620)].createPickFragmentShaderSource(TetrahedronFS,i(2215)),attributeLocations:_});return g.shaderProgram=C,g.uniformMap=m[i(995)],g[i(995)][i(t._0x4b8aa9)]=()=>{const E=i;return m[E(2796)][E(2092)]},g.pass=Cesium__namespace[i(2401)][i(587)],g.boundingVolume=f,g.modelMatrix=this._modelMatrix,this._pickCommand=g,m}[_0x5e32ae(963)](e){const t={_0x146804:1590,_0x137335:4079,_0xdcedd8:730,_0x2da321:2768,_0x577f49:682},i=_0x5e32ae,s={position:0,textureCoordinates:1},n=this.cereatePositionsAndIndice(),o=new Cesium__namespace.Geometry({attributes:{position:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace[i(t._0x146804)].FLOAT,componentsPerAttribute:3,values:n.positions}),textureCoordinates:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:n[i(t._0x137335)]})},indices:n.indices,primitiveType:Cesium__namespace.PrimitiveType[i(t._0xdcedd8)],boundingSphere:Cesium__namespace[i(2407)][i(t._0x2da321)](n.positions)}),c=Cesium__namespace[i(t._0x577f49)][i(1184)](o);return Cesium__namespace[i(1807)].fromGeometry({context:e,geometry:c,attributeLocations:s,bufferUsage:Cesium__namespace.BufferUsage.STATIC_DRAW})}cereatePositionsAndIndice(){const e=new Float64Array(15);e[0]=0,e[1]=1,e[2]=0,e[3]=-1,e[4]=0,e[5]=0,e[6]=0,e[7]=-1,e[8]=0,e[9]=1,e[10]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=-1;const t=new Uint16Array(6*3);t[0]=4,t[1]=2,t[2]=3,t[3]=4,t[4]=3,t[5]=0,t[6]=4,t[7]=0,t[8]=1,t[9]=4,t[10]=1,t[11]=2,t[12]=1,t[13]=2,t[14]=3,t[15]=1,t[16]=3,t[17]=0;const i=new Float32Array([0,0,1,0,1,1,0,1,.5,.5]);return{indices:t,positions:e,sts:i}}setOpacity(e){this._globalAlpha=e}_getDrawEntityClass(e,t){return this[_0x5e32ae({_0x289f7f:576}._0x289f7f)](e,t)}}register$4("tetrahedron",Tetrahedron,!![]);var ViewShedFS=`uniform float mars3d_xAngle;
uniform float mars3d_yAngle;
uniform float mars3d_distance;
uniform float mars3d_opacity;

uniform vec3 mars3d_visibleAreaColor;
uniform vec3 mars3d_hiddenAreaColor;

uniform sampler2D shadowMap_texture;
uniform mat4 shadowMap_matrix;
uniform vec4 shadowMap_lightPositionEC;
uniform vec4 shadowMap_lightDirectionEC;
uniform vec3 shadowMap_lightUp;
uniform vec3 shadowMap_lightDir;
uniform vec3 shadowMap_lightRight;
uniform vec4 shadowMap_texelSizeDepthBias;
uniform vec4 shadowMap_normalOffsetScale;

uniform sampler2D colorTexture;
uniform sampler2D depthTexture;
in vec2 v_textureCoordinates;

vec4 toEye(in vec2 uv, in float depth) {
  vec2 xy = vec2((uv.x * 2.0 - 1.0), (uv.y * 2.0 - 1.0));
  vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);
  posInCamera = posInCamera / posInCamera.w;
  return posInCamera;
}

float getDepth(in vec4 depth) {
  float z_window = czm_unpackDepth(depth);
  z_window = czm_reverseLogDepth(z_window);
  float n_range = czm_depthRange.near;
  float f_range = czm_depthRange.far;
  return (2.0 * z_window - n_range - f_range) / (f_range - n_range);
}
float _czm_sampleShadowMap(sampler2D shadowMap, vec2 uv) {
  return texture(shadowMap, uv).r;
}
float _czm_shadowDepthCompare(sampler2D shadowMap, vec2 uv, float depth) {
  return step(depth, _czm_sampleShadowMap(shadowMap, uv));
}
float _czm_shadowVisibility(sampler2D shadowMap, czm_shadowParameters shadowParameters) {
  float depthBias = shadowParameters.depthBias;
  float depth = shadowParameters.depth;
  float nDotL = shadowParameters.nDotL;
  float normalShadingSmooth = shadowParameters.normalShadingSmooth;
  float darkness = shadowParameters.darkness;
  vec2 uv = shadowParameters.texCoords;
  depth -= depthBias;
  vec2 texelStepSize = shadowParameters.texelStepSize;
  float radius = 1.0;
  float dx0 = -texelStepSize.x * radius;
  float dy0 = -texelStepSize.y * radius;
  float dx1 = texelStepSize.x * radius;
  float dy1 = texelStepSize.y * radius;
  float visibility = (_czm_shadowDepthCompare(shadowMap, uv, depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, 0.0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, 0.0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy1), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy1), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy1), depth)) * (1.0 / 9.0);
  return visibility;
}

vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point) {
  vec3 v01 = point - planeOrigin;
  float d = dot(planeNormal, v01);
  return (point - planeNormal * d);
}
float ptm(vec3 pt) {
  return sqrt(pt.x * pt.x + pt.y * pt.y + pt.z * pt.z);
}

void main() {
  const float PI = 3.141592653589793;
  vec4 color = texture(colorTexture, v_textureCoordinates);
  vec4 currD = texture(depthTexture, v_textureCoordinates);
  if(currD.r >= 1.0) {
    out_FragColor = color;
    return;
  }
  float depth = getDepth(currD);
  vec4 positionEC = toEye(v_textureCoordinates, depth);
  vec3 normalEC = vec3(1.0);
  czm_shadowParameters shadowParameters;
  shadowParameters.texelStepSize = shadowMap_texelSizeDepthBias.xy;
  shadowParameters.depthBias = shadowMap_texelSizeDepthBias.z;
  shadowParameters.normalShadingSmooth = shadowMap_texelSizeDepthBias.w;
  shadowParameters.darkness = shadowMap_normalOffsetScale.w;
  shadowParameters.depthBias *= max(depth * 0.01, 1.0);

  vec3 directionEC = normalize(positionEC.xyz - shadowMap_lightPositionEC.xyz);
  float nDotL = clamp(dot(normalEC, -directionEC), 0.0, 1.0);
  vec4 shadowPosition = shadowMap_matrix * positionEC;
  shadowPosition /= shadowPosition.w;
  if(any(lessThan(shadowPosition.xyz, vec3(0.0))) || any(greaterThan(shadowPosition.xyz, vec3(1.0)))) {
    out_FragColor = color;
    return;
  }

  //坐标与视点位置距离，大于最大距离则舍弃阴影效果
  vec4 lw = czm_inverseView * vec4(shadowMap_lightPositionEC.xyz, 1.0);
  vec4 vw = czm_inverseView * vec4(positionEC.xyz, 1.0);
  if(distance(lw.xyz, vw.xyz) > mars3d_distance) {
    out_FragColor = color;
    return;
  }

  //水平夹角限制
  vec3 ptOnSP = pointProjectOnPlane(shadowMap_lightUp, lw.xyz, vw.xyz);
  directionEC = ptOnSP - lw.xyz;
  float directionECMO = ptm(directionEC.xyz);
  float shadowMap_lightDirMO = ptm(shadowMap_lightDir.xyz);
  float cosJJ = dot(directionEC, shadowMap_lightDir) / (directionECMO * shadowMap_lightDirMO);
  float degJJ = abs(acos(cosJJ) * (180.0 / PI));
  if(degJJ > mars3d_xAngle) {
    out_FragColor = color;
    return;
  }

  //垂直夹角限制
  vec3 ptOnCZ = pointProjectOnPlane(shadowMap_lightRight, lw.xyz, vw.xyz);
  vec3 dirOnCZ = ptOnCZ - lw.xyz;
  float dirOnCZMO = ptm(dirOnCZ);
  float cosJJCZ = dot(dirOnCZ, shadowMap_lightDir) / (dirOnCZMO * shadowMap_lightDirMO);
  float degJJCZ = abs(acos(cosJJCZ) * (180.0 / PI));
  if(degJJCZ > mars3d_yAngle) {
    out_FragColor = color;
    return;
  }

  shadowParameters.texCoords = shadowPosition.xy;
  shadowParameters.depth = shadowPosition.z;
  shadowParameters.nDotL = nDotL;
  float visibility = _czm_shadowVisibility(shadowMap_texture, shadowParameters);

  //可视域
  if(visibility == 1.0) {
    out_FragColor = mix(color, vec4(mars3d_visibleAreaColor, 1.0), mars3d_opacity);
  } else {
    out_FragColor = mix(color, vec4(mars3d_hiddenAreaColor, 1.0), mars3d_opacity);
  }
}
`;const DEF_STYLE$1={angle:60,angle2:45,distance:1e3,opacity:.6,addHeight:0,showFrustum:![]};class ViewShed extends BasePointPrimitive{constructor(e={},t=!![]){const i={_0x452142:1233,_0x16f7fe:4256},s=_0x5e32ae;t&&(e.style={...DEF_STYLE$1,...e.style||{}}),super(e),this[s(3425)]=getCesiumColor(this.style.visibleAreaColor,new Cesium__namespace.Color(0,1,0)),this._hiddenAreaColor=getCesiumColor(this.style.hiddenAreaColor,new Cesium__namespace.Color(1,0,0)),this[s(i._0x452142)]=this[s(3798)].terrain??!![],this[s(i._0x16f7fe)]=this.style.maximumDistance??5e3}get czmObject(){return this._postProcessStage}get angle(){const e=_0x5e32ae;return this[e(4114)][e(1314)]}set[_0x5e32ae(1314)](e){this.style.angle=e,this._updateDraw()}get angle2(){return this[_0x5e32ae({_0x5b9f87:4114}._0x5b9f87)].angle2??this.style.angle}set[_0x5e32ae(2548)](e){this.style.angle2=e,this._updateDraw()}get[_0x5e32ae(1167)](){return this._visibleAreaColor}set visibleAreaColor(e){this._visibleAreaColor=getCesiumColor(e)}get hiddenAreaColor(){return this[_0x5e32ae(1564)]}set hiddenAreaColor(e){const t={_0x13ac28:1564},i=_0x5e32ae;this[i(t._0x13ac28)]=getCesiumColor(e)}get opacity(){return this.style.opacity}set[_0x5e32ae(3776)](e){const t={_0x20c831:4114},i=_0x5e32ae;this[i(t._0x20c831)][i(3776)]=e}get showFrustum(){const e=_0x5e32ae;return this.style[e(559)]}set showFrustum(e){const t={_0x40434b:4114,_0x331ef0:575},i=_0x5e32ae;this[i(t._0x40434b)].showFrustum=e,this._frustumPrimitive[i(t._0x331ef0)]=e}get distance(){return this.style.distance}set distance(e){const t={_0x36b6a4:4114},i=_0x5e32ae;this[i(t._0x36b6a4)].distance=e,this._updateDraw()}get shadowMap(){return this._shadowMap}get camera(){var e;return(e=this._shadowMap)===null||e===void 0?void 0:e._lightCamera}get targetPosition(){return this.options.targetPosition}set targetPosition(e){const t={_0xc6d356:589,_0x3aa613:3916,_0x48f1e6:3916,_0x444d35:2625},i=_0x5e32ae;var s;if(this[i(3798)][i(t._0xc6d356)]=e,!this[i(1890)])return;const n=this[i(2180)];if(!n)return;const o=LngLatPoint.toCartesian(e,(s=this._map)===null||s===void 0?void 0:s.currentTime);this[i(2776)]=Cesium__namespace[i(3916)].distance(n,o);const c=Cesium__namespace.Cartesian3.normalize(Cesium__namespace[i(t._0x3aa613)].subtract(o,n,new Cesium__namespace[i(3916)]),new Cesium__namespace[i(t._0x48f1e6)]),_=Cesium__namespace.Cartesian3.normalize(n,new Cesium__namespace.Cartesian3),l=new Cesium__namespace.Camera(this._map.scene);l.position=n,l[i(3858)]=c,l.up=_,this.style.heading=Cesium__namespace.Math.toDegrees(l.heading),this[i(4114)][i(t._0x444d35)]=Cesium__namespace[i(1286)].toDegrees(l.pitch),this._updateDraw()}[_0x5e32ae(3961)](){this[_0x5e32ae(575)]?this._updateDraw():this._clearDraw()}_updatePositionsHook(){this._updateDraw()}_mountedHook(){const e={_0x18289e:3798},t=_0x5e32ae;this.options.targetPosition&&(this.targetPosition=this[t(e._0x18289e)].targetPosition),this._defaultColorTexture=new Cesium__namespace.Texture({context:this._map[t(3107)].context,source:{width:1,height:1,arrayBufferView:new Uint8Array([0,0,0,0])},flipY:![]})}[_0x5e32ae(4158)](e){const t={_0x1aa3b4:3566,_0x34c00d:451},i=_0x5e32ae;this._hasTerrainShadows&&(this._map.viewer[i(t._0x1aa3b4)]=Cesium__namespace[i(841)][i(t._0x34c00d)]),this[i(1757)](),this.primitiveCollection.add(this)}_removedHook(){const e={_0x2a62ad:3566,_0x5efe08:1207,_0x970994:1874},t=_0x5e32ae;this._hasTerrainShadows&&(this._map[t(e._0x2a62ad)]=Cesium__namespace.ShadowMode[t(e._0x5efe08)]),this._clearDraw(),this.primitiveCollection.contains(this)&&(this._noDestroy=!![],this[t(930)].remove(this),this[t(e._0x970994)]=![])}updateModelMatrix(){this._updateDraw()}_updateDraw(){const e={_0x43b2c0:1374,_0xba5115:3977,_0x57c1fe:1392,_0x1b540f:2801,_0x2edd24:1557,_0xff8bf:3107},t=_0x5e32ae;if(this[t(e._0x43b2c0)](),!this[t(1890)]||!this.show)return;const i=this.position;if(!i)return;const s=new Cesium__namespace.HeadingPitchRoll(Cesium__namespace.Math.toRadians(this[t(e._0xba5115)]),Cesium__namespace.Math.toRadians(this.pitch),Cesium__namespace.Math.toRadians(this.roll)),n=new Cesium__namespace.Camera(this._map.scene);n.position=i,n.frustum.fov=Cesium__namespace.Math.toRadians(this.angle*2),n.frustum[t(512)]=this[t(1314)]/this[t(2548)],n.frustum[t(e._0x57c1fe)]=.01,n[t(e._0x1b540f)].far=this.distance,n[t(e._0x2edd24)]({destination:i,orientation:{heading:s.heading,pitch:s.pitch,roll:s.roll}}),this._createFrustumPrimitive(n),this[t(4315)]=new Cesium__namespace[t(2164)]({lightCamera:n,context:this._map[t(e._0xff8bf)].context,maximumDistance:this._maximumDistance,isSpotLight:!![],cascadesEnabled:![],enabled:![],depthBiasStep:this.options.depthBiasStep}),this._createPostProcessStage()}[_0x5e32ae(1374)](){const e={_0x54908c:2976,_0x2b0756:4315,_0x467124:560},t=_0x5e32ae;this[t(1890)]&&(this[t(e._0x54908c)]&&(this[t(1890)].scene[t(1583)].remove(this[t(e._0x54908c)]),delete this._postProcessStage),this._shadowMap&&(this[t(e._0x2b0756)].destroy(),delete this._shadowMap),this._frustumPrimitive&&(this[t(2873)].removeGraphic(this[t(e._0x467124)],!![]),delete this._frustumPrimitive))}update(e){const t={_0x1527a9:4315},i=_0x5e32ae;this._shadowMap&&e.shadowMaps.push(this[i(t._0x1527a9)])}_createFrustumPrimitive(e){const t=_0x5e32ae;this[t(560)]&&this._layer.removeGraphic(this._frustumPrimitive,!![]);const i=this.distance+1;this._frustumPrimitive=new ArcFrustum({modelMatrix:e.inverseViewMatrix,style:{angle:this.angle,angle2:this[t(2548)],distance:i},show:this.showFrustum&&this.show,private:!![]}),this[t(2873)].addGraphic(this._frustumPrimitive)}[_0x5e32ae(1179)](){const e={_0x3c09f5:1720,_0x527d01:2976,_0x990f40:4084},t={_0x1f5406:3127,_0x35819c:3197,_0x450f:4315,_0x41fde7:596},i={_0x522b46:895,_0x2fca4f:3805},s={_0x27f361:4315},n={_0x2c788c:3858},o={_0x482df4:4315},c={_0x255172:3776},_=_0x5e32ae;this._postProcessStage&&(this._map[_(3107)].postProcessStages.remove(this._postProcessStage),delete this._postProcessStage);const l=new Cesium__namespace.Cartesian2,h=new Cesium__namespace[_(e._0x3c09f5)],f=new Cesium__namespace.Cartesian4,m=this._shadowMap[_(3883)];this[_(e._0x527d01)]=new Cesium__namespace.PostProcessStage({fragmentShader:ViewShedFS,uniforms:{mars3d_opacity:()=>this[_(c._0x255172)],mars3d_visibleAreaColor:()=>this.visibleAreaColor,mars3d_hiddenAreaColor:()=>this[_(2897)],mars3d_distance:()=>this.distance,mars3d_xAngle:()=>this[_(1314)],mars3d_yAngle:()=>this.angle2,shadowMap_texture:()=>this[_(o._0x482df4)]._shadowMapTexture||this._defaultColorTexture,shadowMap_matrix:()=>this._shadowMap._shadowMapMatrix,shadowMap_lightPositionEC:()=>{const g=_;return this._shadowMap[g(2783)]},shadowMap_lightDirectionEC:()=>this._shadowMap._lightDirectionEC,shadowMap_lightUp:()=>this._shadowMap._lightCamera.up,shadowMap_lightDir:()=>{const g=_;return this._shadowMap._lightCamera[g(n._0x2c788c)]},shadowMap_lightRight:()=>this[_(s._0x27f361)]._lightCamera.right,shadowMap_texelSizeDepthBias:()=>{const g=_;return l.x=1/this._shadowMap._textureSize.x,l.y=1/this._shadowMap[g(i._0x522b46)].y,Cesium__namespace.Cartesian4.fromElements(l.x,l.y,m[g(i._0x2fca4f)],m.normalShadingSmooth,h)},shadowMap_normalOffsetScale:()=>{const g=_;return Cesium__namespace.Cartesian4.fromElements(m[g(t._0x1f5406)],this._shadowMap._distance,this._shadowMap[g(t._0x35819c)],this[g(t._0x450f)][g(t._0x41fde7)],f)}}}),this[_(1890)].scene.postProcessStages[_(e._0x990f40)](this._postProcessStage)}_style2JsonBase(e,t){const i=_0x5e32ae;return e.heading=formatNum$1(this.heading,1),e.pitch=formatNum$1(this[i(2625)],1),e[i(2776)]=formatNum$1(this.distance,2),getAttrVal(e,{onlySimpleType:!![]})}setView(){const e={_0x596a65:2792,_0x34dff3:1890},t=_0x5e32ae;if(!this[t(1890)])return;const i=this.camera;i&&(this[t(1890)][t(e._0x596a65)].position=Cesium__namespace[t(4246)](this.position),this._map.camera.direction=Cesium__namespace[t(4246)](i.direction),this._map.camera.right=Cesium__namespace.clone(i.right),this[t(e._0x34dff3)].camera.up=Cesium__namespace.clone(i.up))}setOpacity(e){const t={_0x13e9ed:4114},i=_0x5e32ae;this[i(t._0x13e9ed)].opacity=e}[_0x5e32ae(1860)](e){const t={_0x5ca23e:2865,_0x21c623:1404},i=_0x5e32ae;if(this[i(t._0x5ca23e)])return this;if(this._enabledDraw=!![],e&&this.addTo(e),!this._map)throw new Error("绘制时_map不能为空,请将对象添加到图层，并且图层已添加到Map");this._map._setEditCursor(!![]),this.enableControl(![]),this[i(4008)](),this[i(t._0x21c623)](EventType.drawStart,{drawtype:this[i(3205)],graphic:this},!![])}stopDraw(){const e={_0x129ea1:1890,_0x3525da:2004,_0x765226:4056},t=_0x5e32ae;var i,s,n;if(!this._enabledDraw)return this;if(this._stopDrawHook(),this[t(e._0x129ea1)]._setEditCursor(![]),this.enableControl(!![]),this._map.closeSmallTooltip(),this._enabledDraw=![],!this.position||!this.distance){this[t(e._0x3525da)](!![]);return}this.fire(EventType.drawCreated,{drawtype:this.type,graphic:this},!![]),(i=this.options)!==null&&i!==void 0&&i.success&&this.options.success(this),(s=this[t(3798)])!==null&&s!==void 0&&(n=s._promise)!==null&&n!==void 0&&n[t(e._0x765226)]&&this.options[t(3110)].resolve(this)}_startDrawHook(){const e={_0x3d5aa6:4055},t=_0x5e32ae;this._map.on(EventType.click,this._onClickHandler,this),this._map.on(EventType[t(e._0x3d5aa6)],this._onMouseMoveHandler,this)}_stopDrawHook(){const e={_0x4598f3:1948,_0x127dc3:524},t=_0x5e32ae;this._map.off(EventType[t(e._0x4598f3)],this._onClickHandler,this),this._map.off(EventType.mouseMove,this[t(e._0x127dc3)],this)}_onClickHandler(e){const t={_0x4a65b6:698,_0x58c84d:4256,_0x573971:589},i=_0x5e32ae;let s=e[i(t._0x4a65b6)];if(!s)return;if(this.fire(EventType.drawAddPoint,{...e,drawtype:this.type,graphic:this},!![]),!this.position){this.position=addPositionsHeight(s,this.style.addHeight);return}Cesium__namespace.Cartesian3.distance(this.position,s)>this._maximumDistance&&(s=getOnLinePointByLen(this.position,s,this[i(t._0x58c84d)])),this[i(t._0x573971)]=s,this.stopDraw(),this.fire(EventType.drawCreated,e)}_onMouseMoveHandler(e){const t={_0x151470:4256},i=_0x5e32ae;let s=e.cartesian;if(!s)return;const n=this.position;n?(Cesium__namespace.Cartesian3.distance(n,s)>this[i(t._0x151470)]&&(s=getOnLinePointByLen(n,s,this._maximumDistance)),this.targetPosition=s,this.fire(EventType.drawMouseMove,{...e,drawtype:this[i(3205)],graphic:this},!![]),this._map.openSmallTooltip(e.endPosition,this._map.getLangText(i(4018)))):this._map.openSmallTooltip(e.endPosition,this._map[i(4296)]("_单击开始绘制"))}}register$4("viewShed",ViewShed,!![]);var ViewVideoFS=`uniform float mars3d_opacity;

uniform sampler2D mars3d_videoTexture;
uniform sampler2D mars3d_maskTexture;
uniform vec4 mars3d_hiddenAreaColor;

uniform sampler2D shadowMap_texture;
uniform mat4 shadowMap_matrix;
uniform vec4 shadowMap_lightPositionEC;
uniform vec4 shadowMap_texelSizeDepthBias;
uniform vec4 shadowMap_normalOffsetScale;
uniform bool mars3d_flipx;
uniform bool mars3d_flipy;

uniform sampler2D colorTexture;
uniform sampler2D depthTexture;
in vec2 v_textureCoordinates;

vec4 toEye(in vec2 uv, in float depth) {
  vec2 xy = vec2((uv.x * 2.0 - 1.0), (uv.y * 2.0 - 1.0));
  vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);
  posInCamera = posInCamera / posInCamera.w;
  return posInCamera;
}

float getDepth(in vec4 depth) {
  float z_window = czm_unpackDepth(depth);
  z_window = czm_reverseLogDepth(z_window);
  float n_range = czm_depthRange.near;
  float f_range = czm_depthRange.far;
  return (2.0 * z_window - n_range - f_range) / (f_range - n_range);
}
float _czm_sampleShadowMap(sampler2D shadowMap, vec2 uv) {
  return texture(shadowMap, uv).r;
}
float _czm_shadowDepthCompare(sampler2D shadowMap, vec2 uv, float depth) {
  return step(depth, _czm_sampleShadowMap(shadowMap, uv));
}
float _czm_shadowVisibility(sampler2D shadowMap, czm_shadowParameters shadowParameters) {
  float depthBias = shadowParameters.depthBias;
  float depth = shadowParameters.depth;
  float nDotL = shadowParameters.nDotL;
  float normalShadingSmooth = shadowParameters.normalShadingSmooth;
  float darkness = shadowParameters.darkness;
  vec2 uv = shadowParameters.texCoords;
  depth -= depthBias;
  vec2 texelStepSize = shadowParameters.texelStepSize;
  float radius = 1.0;
  float dx0 = -texelStepSize.x * radius;
  float dy0 = -texelStepSize.y * radius;
  float dx1 = texelStepSize.x * radius;
  float dy1 = texelStepSize.y * radius;
  float visibility = (_czm_shadowDepthCompare(shadowMap, uv, depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, 0.0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, 0.0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy1), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy1), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy1), depth)) * (1.0 / 9.0);
  return visibility;
}

vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point) {
  vec3 v01 = point - planeOrigin;
  float d = dot(planeNormal, v01);
  return (point - planeNormal * d);
}
float ptm(vec3 pt) {
  return sqrt(pt.x * pt.x + pt.y * pt.y + pt.z * pt.z);
}

void main() {
  const float PI = 3.141592653589793;
  vec4 color = texture(colorTexture, v_textureCoordinates);
  vec4 currD = texture(depthTexture, v_textureCoordinates);
  if(currD.r >= 1.0) {
    out_FragColor = color;
    return;
  }
  float depth = getDepth(currD);
  vec4 positionEC = toEye(v_textureCoordinates, depth);
  vec3 normalEC = vec3(1.0);
  czm_shadowParameters shadowParameters;
  shadowParameters.texelStepSize = shadowMap_texelSizeDepthBias.xy;
  shadowParameters.depthBias = shadowMap_texelSizeDepthBias.z;
  shadowParameters.normalShadingSmooth = shadowMap_texelSizeDepthBias.w;
  shadowParameters.darkness = shadowMap_normalOffsetScale.w;
  shadowParameters.depthBias *= max(depth * 0.01, 1.0);

  vec3 directionEC = normalize(positionEC.xyz - shadowMap_lightPositionEC.xyz);
  float nDotL = clamp(dot(normalEC, -directionEC), 0.0, 1.0);
  vec4 shadowPosition = shadowMap_matrix * positionEC;
  shadowPosition /= shadowPosition.w;
  if(any(lessThan(shadowPosition.xyz, vec3(0.0))) || any(greaterThan(shadowPosition.xyz, vec3(1.0)))) {
    out_FragColor = color;
    return;
  }

  shadowParameters.texCoords = shadowPosition.xy;
  shadowParameters.depth = shadowPosition.z;
  shadowParameters.nDotL = nDotL;
  float visibility = _czm_shadowVisibility(shadowMap_texture, shadowParameters);

  //视频投射
  if(visibility == 1.0) {
    if(mars3d_flipx){
      shadowPosition.x = shadowPosition.x + (0.5 - shadowPosition.x) * 2.0;
    }
    if(mars3d_flipy){
      shadowPosition.y = shadowPosition.y + (0.5 - shadowPosition.y) * 2.0;
    }

    vec4 videoColor = texture(mars3d_videoTexture, shadowPosition.xy);
    vec4 maskColor = texture(mars3d_maskTexture, shadowPosition.xy);
    videoColor *= maskColor;
    out_FragColor = mix(color, vec4(videoColor.xyz, 1.0), mars3d_opacity * videoColor.a);
  } else {
    if(abs(shadowPosition.z - 0.0) < 0.01) {
      return;
    }
    out_FragColor = vec4(mix(color.rgb, mars3d_hiddenAreaColor.rgb, mars3d_hiddenAreaColor.a), mars3d_hiddenAreaColor.a);
  }
}
`;const DEF_STYLE={angle:60,angle2:45,distance:1e3,opacity:1,showFrustum:![],hiddenAreaColor:new Cesium__namespace[_0x5e32ae(2200)](0,0,0,.5),flipx:![],flipy:![]};class Video3D extends ViewShed{constructor(e={}){const t={_0x3e79c2:4114,_0x45e92e:1028},i=_0x5e32ae;e.style={...DEF_STYLE,...e[i(t._0x3e79c2)]||{}},e[i(t._0x45e92e)]=![],super(e,![]),this._videoPlay=!![]}get container(){return this[_0x5e32ae(2710)]}get distance(){const e=_0x5e32ae;return this.style[e(2776)]}set[_0x5e32ae(2776)](e){const t=_0x5e32ae;this.style.distance=e,this[t(1757)]()}get flipx(){return this.style.flipx}set flipx(e){this.style.flipx=e}get play(){return this[_0x5e32ae({_0x35070d:2584}._0x35070d)]}set play(e){const t={_0x13f90f:1473},i=_0x5e32ae;if(this._videoPlay=!!e,this._videoContainer)try{this.videoPlay?this._videoContainer[i(t._0x13f90f)]():this._videoContainer.pause()}catch{}}[_0x5e32ae(3118)](){const e={_0x3bfd86:1460,_0x34c0ee:1946,_0x41a054:1013},t={_0x1d14d8:1890},i=_0x5e32ae;super[i(3118)]();const s=this.style.maskImage;if(s){const n=new Image;n[i(e._0x3bfd86)]=o=>{const c=i;this._maskTexture=new Cesium__namespace.Texture({context:this[c(t._0x1d14d8)].scene.context,source:n})},n.onerror=o=>{logError$1(i(3998)+s,o)},n[i(3696)]=s}else this._maskTexture=new Cesium__namespace.Texture({context:this._map[i(3107)].context,source:{width:1,height:1,arrayBufferView:new Uint8Array([255,255,255,255])},flipY:![]});this.style.container?this._videoContainer=this.style[i(3290)]:this.style.url&&(this._videoContainer=createVideo(this[i(4114)].url,this.style[i(e._0x34c0ee)],"",document[i(e._0x41a054)]),this._videoContainer[i(4114)].display=i(3432),this._hasRemoveElement=!![]),this._videoContainer&&this._map.on(EventType[i(1213)],this._onClockTickHandler,this)}_removedHook(){const e={_0x11d9b5:3296,_0x5eedd1:2214,_0x28e70e:2710,_0x5905d8:3296},t=_0x5e32ae;var i;this._map.off(EventType.clockTick,this._onClockTickHandler,this),this[t(e._0x11d9b5)]&&(i=this[t(2710)])!==null&&i!==void 0&&i[t(e._0x5eedd1)]&&(this._videoContainer.parentNode.removeChild(this[t(e._0x28e70e)]),delete this[t(e._0x5905d8)],delete this[t(2710)]),super[t(2442)]()}_onClockTickHandler(){const e={_0x159a22:3440,_0x5c4bd1:3521,_0x47848c:2399,_0x53f531:2478},t=_0x5e32ae;try{this._videoPlay&&this[t(2710)][t(e._0x159a22)]&&this._videoContainer.play()}catch{}!this._videoContainer||!this._map||(this._videoTexture&&this._videoTexture.destroy(),this._videoTexture=new Cesium__namespace.Texture({context:this._map.scene[t(e._0x5c4bd1)],source:this._videoContainer,pixelFormat:Cesium__namespace[t(e._0x47848c)].RGBA,pixelDatatype:Cesium__namespace[t(e._0x53f531)].UNSIGNED_BYTE}))}_clearDraw(){this._frustumPrimitive&&(this.primitiveCollection.remove(this._frustumPrimitive),delete this._frustumPrimitive),super._clearDraw()}[_0x5e32ae(2136)](e){const t={_0x213882:3562,_0x59e25d:3916,_0x4d7edb:3768,_0x4af4db:560,_0x326f39:2959},i=_0x5e32ae,s=e.directionWC,n=e[i(t._0x213882)];let o=e.rightWC;o=Cesium__namespace[i(t._0x59e25d)].negate(o,new Cesium__namespace.Cartesian3);const c=new Cesium__namespace.Matrix3;Cesium__namespace.Matrix3.setColumn(c,0,o,c),Cesium__namespace.Matrix3.setColumn(c,1,n,c),Cesium__namespace[i(t._0x4d7edb)].setColumn(c,2,s,c);const _=Cesium__namespace.Quaternion.fromRotationMatrix(c,new Cesium__namespace.Quaternion);this._frustumPrimitive&&this.primitiveCollection.remove(this._frustumPrimitive),this[i(t._0x4af4db)]=new Cesium__namespace.Primitive({geometryInstances:new Cesium__namespace.GeometryInstance({id:this.id,geometry:new Cesium__namespace[i(t._0x326f39)]({origin:e.position,orientation:_,frustum:e[i(2801)],_drawNearPlane:!![]}),attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute[i(1575)](Cesium__namespace.Color.AZURE)}}),appearance:new Cesium__namespace.PerInstanceColorAppearance({translucent:![],flat:!![]}),asynchronous:![],show:this.showFrustum&&this.show}),this.primitiveCollection.add(this[i(560)]),this.bindPickId(this._frustumPrimitive)}_createPostProcessStage(){const e={_0x2e0355:4315,_0x30ec06:1583},t={_0x36fb1b:4114},i={_0xe15ba2:4315},s={_0xfc499f:3811},n=_0x5e32ae;this._postProcessStage&&(this._map.scene.postProcessStages[n(2004)](this._postProcessStage),delete this._postProcessStage);const o=new Cesium__namespace[n(2497)],c=new Cesium__namespace.Cartesian4,_=new Cesium__namespace.Cartesian4,l=this[n(e._0x2e0355)]._primitiveBias;this._postProcessStage=new Cesium__namespace.PostProcessStage({fragmentShader:ViewVideoFS,uniforms:{mars3d_videoTexture:()=>{const h=n;return this[h(s._0xfc499f)]||this[h(1348)]},mars3d_maskTexture:()=>this[n(3839)],mars3d_opacity:()=>this.opacity,mars3d_hiddenAreaColor:()=>this.hiddenAreaColor,shadowMap_texture:()=>this._shadowMap._shadowMapTexture||this._defaultColorTexture,shadowMap_matrix:()=>{const h=n;return this._shadowMap[h(1292)]},shadowMap_lightPositionEC:()=>{const h=n;return this._shadowMap[h(2783)]},shadowMap_texelSizeDepthBias:()=>{const h=n;return o.x=1/this._shadowMap._textureSize.x,o.y=1/this[h(i._0xe15ba2)]._textureSize.y,Cesium__namespace.Cartesian4.fromElements(o.x,o.y,l.depthBias,l.normalShadingSmooth,c)},shadowMap_normalOffsetScale:()=>Cesium__namespace[n(1720)].fromElements(l.normalOffsetScale,this._shadowMap._distance,this._shadowMap.maximumDistance,this._shadowMap._darkness,_),mars3d_flipx:()=>this[n(t._0x36fb1b)].flipx,mars3d_flipy:()=>this.style.flipy}}),this._map.scene[n(e._0x30ec06)].add(this[n(2976)])}}register$4(_0x5e32ae(1664),Video3D,!![]);let globeLastRoam;class Route extends BasePointPrimitive{constructor(e={}){const t={_0x156292:3648,_0x568d2c:786,_0x4c4714:3798,_0x4078fc:1160,_0x23fbec:3249,_0x4b36f1:3249,_0x2332e3:3111,_0x48c363:4195},i=_0x5e32ae;super(e),this[i(3798)].frameRate=this.options.frameRate??1,this._maxCacheCount=this.options.maxCacheCount??100,this._clampToTilesetFrame=-1,this._frameRateHeight=this.options[i(t._0x156292)]??30,this[i(t._0x568d2c)](this[i(t._0x4c4714)].style),this._child={},this._position_result=new Cesium__namespace.Cartesian3,this.property=this.options.position||new Cesium__namespace[i(t._0x4078fc)](this.options.referenceFrame,this.options.numberOfDerivatives),this.property.forwardExtrapolationType=this.options.forwardExtrapolationType??Cesium__namespace.ExtrapolationType[i(t._0x23fbec)],this.property[i(1482)]=this.options.backwardExtrapolationType??Cesium__namespace[i(762)][i(t._0x4b36f1)],this._orientation=this.options.orientation||new Cesium__namespace[i(t._0x2332e3)](this[i(t._0x48c363)]),this._readyPromise=Cesium__namespace.defer()}get label(){return this[_0x5e32ae({_0x546082:2565}._0x546082)].label}set label(e){const t={_0xa39a14:3798,_0x87546e:3049},i=_0x5e32ae;this[i(t._0xa39a14)].label=e,this[i(t._0x87546e)]("label",LabelPrimitive)}get billboard(){return this._child.billboard}set[_0x5e32ae(2747)](e){const t=_0x5e32ae;this.options.billboard=e,this._initChildGraphic(t(2747),BillboardPrimitive)}get point(){return this[_0x5e32ae({_0x5a2283:2565}._0x5a2283)].point}set point(e){this.options.point=e,this._initChildGraphic("point",PointPrimitive)}get model(){return this[_0x5e32ae({_0x53912b:2565}._0x53912b)].model}set model(e){const t={_0x253c3b:2927},i=_0x5e32ae;this.options[i(t._0x253c3b)]=e,this._initChildGraphic(i(2927),ModelPrimitive)}get[_0x5e32ae(2355)](){return this._readyPromise.promise}get circle(){return this._child.circle}set[_0x5e32ae(833)](e){const t={_0x3eb23d:3049},i=_0x5e32ae;this.options[i(833)]=e,this[i(t._0x3eb23d)]("circle",CircleEntity)}get[_0x5e32ae(941)](){const e={_0x13c9a8:2565,_0x128a7e:941},t=_0x5e32ae;return this[t(e._0x13c9a8)][t(e._0x128a7e)]}set coneTrack(e){const t={_0x562ea8:941},i=_0x5e32ae;this.options[i(t._0x562ea8)]=e,this._initChildGraphic("coneTrack",ConeTrack)}get path(){return this[_0x5e32ae(2565)].path}set path(e){const t={_0x2063eb:3798},i=_0x5e32ae;this[i(t._0x2063eb)].path=e,this._initChildGraphic("path",PathEntity)}get[_0x5e32ae(1632)](){return this._child.polyline}set polyline(e){const t={_0x247af5:3798},i=_0x5e32ae;this[i(t._0x247af5)].polyline=e,this._initChildGraphic("polyline",PolylineEntity)}get wall(){return this._child.wall}set wall(e){const t=_0x5e32ae;this.options.wall=e,this[t(3049)]("wall",WallEntity)}get modelMatrix(){const e={_0x2ea893:2179,_0x5c8c5e:918},t=_0x5e32ae;return this._modelMatrix?this._modelMatrix:this[t(e._0x2ea893)](this[t(e._0x5c8c5e)],this._orientation_show)}get groundPosition(){const e={_0x11ebb0:840},t=_0x5e32ae;return getRayEarthPosition(this._position,this[t(e._0x11ebb0)])}get alt(){const e={_0x101d4d:3865},t=_0x5e32ae;return this._clampToTilesetHeight?this._clampToTilesetHeight:this._position?Cesium__namespace.Cartographic[t(3236)](this._position)[t(e._0x101d4d)]:0}get[_0x5e32ae(3932)](){const e={_0x5be14b:3528},t=_0x5e32ae;var i,s;const n=(i=this.property)===null||i===void 0||(s=i[t(3164)])===null||s===void 0?void 0:s[t(e._0x5be14b)];return n.length>0?n[0]:null}get stopTime(){var e,t;const i=(e=this.property)===null||e===void 0||(t=e._property)===null||t===void 0?void 0:t._times;return i.length>0?i[i.length-1]:null}get currIndex(){return this._flyok_index}get multiplier(){var e;return(e=this._map)===null||e===void 0?void 0:e.clock.multiplier}set multiplier(e){this._map&&(this._map.clock.multiplier=e)}get[_0x5e32ae(4058)](){const e=_0x5e32ae;var t;return!((t=this._map)!==null&&t!==void 0&&t[e(1949)].shouldAnimate)}set isPause(e){const t={_0x37847f:2773},i=_0x5e32ae;this._map&&(e?this.pause():this[i(t._0x37847f)]())}get objectsToExclude(){const e={_0x3900b0:2772,_0x1e285b:3402},t={_0x39dbd0:3759,_0x370498:1679},i=_0x5e32ae;if(this.options.objectsToExclude)return this.options.objectsToExclude;if(this._objectsToExcludee)return this._objectsToExclude;const s=[];if(this[i(e._0x3900b0)](n=>{const o=i;n.czmObject&&s[o(t._0x39dbd0)](n[o(t._0x370498)])}),s[i(e._0x1e285b)]>0)return s}set objectsToExclude(e){this._objectsToExclude=e}get style(){const e={_0x4d0fa7:1882},t=_0x5e32ae,i=getAttrVal(this.options,{onlySimpleType:!![]});return this._splitOptionsToStyle(i,"model"),this[t(e._0x4d0fa7)](i,t(736)),this._splitOptionsToStyle(i,"billboard"),this._splitOptionsToStyle(i,"point"),this._splitOptionsToStyle(i,"circle"),this._splitOptionsToStyle(i,"coneTrack"),this[t(1882)](i,"polyline"),this._splitOptionsToStyle(i,"wall"),this[t(1882)](i,"path"),delete i._promise,delete i[t(4114)],delete i.attr,i}set style(e){this.setStyle(e)}setStyle(e){return e={...e},this._zhStyle(e),this._setOptionsHook(this.options,e),this}_initSampledPositionProperty(){const e=_0x5e32ae;this[e(2046)]=this[e(4195)],this.bindUpdateEvent()}_mountedHook(){const e={_0x3fbb51:736,_0x581b05:1632},t=_0x5e32ae;this._initChildGraphic(t(e._0x3fbb51),LabelPrimitive),this._initChildGraphic(t(2747),BillboardPrimitive),this._initChildGraphic("point",PointPrimitive),this._initChildGraphic("model",ModelPrimitive),this._initChildGraphic(t(833),CircleEntity),this._initChildGraphic(t(941),ConeTrack),this._initChildGraphic("path",PathEntity),this._initChildGraphic(t(e._0x581b05),PolylineEntity),this._initChildGraphic(t(3795),WallEntity)}[_0x5e32ae(4158)](e){const t={_0x426c28:575,_0x111ebf:2927,_0x41e1da:2927,_0x3f35bc:549,_0x792313:1230,_0x3f52f0:3798,_0x31cdf4:3798,_0x272a85:1572},i=_0x5e32ae;var s;if(this[i(t._0x426c28)]&&(this._addChildGraphic(),(s=this[i(t._0x111ebf)])!==null&&s!==void 0&&s[i(2355)]&&this[i(t._0x41e1da)].readyPromise[i(t._0x3f35bc)](()=>{this._readyPromise.resolve(this)}),this.options.position&&this[i(t._0x792313)](this[i(t._0x3f52f0)].position),this.options.positions))for(let n=0;n<this[i(t._0x31cdf4)].positions.length;n++){const o=this.options.positions[n];this.addDynamicPosition(o,o[i(t._0x272a85)])}}_removedHook(e){this[_0x5e32ae(2640)](),super._removedHook(e)}_getJsonPositions(e){const t={_0x271870:4195,_0x534be7:3916,_0x4f161c:3411,_0x1a4d68:2436},i=_0x5e32ae;var s,n,o,c;const _=(s=this[i(t._0x271870)])===null||s===void 0||(n=s._property)===null||n===void 0?void 0:n._times,l=(o=this.property)===null||o===void 0||(c=o._property)===null||c===void 0?void 0:c._values;if(!_||_.length===0)return;const h=[];for(let f=0,m=_[i(3402)];f<m;f++){const g=LngLatPoint.fromCartesian(new Cesium__namespace[i(t._0x534be7)](l[f*3],l[f*3+1],l[f*3+2])),C=Cesium__namespace[i(527)].toDate(_[f]);h.push({lat:g[i(448)],lng:g[i(t._0x4f161c)],alt:g.alt,time:formatDate(C,i(1365))})}e[i(t._0x1a4d68)]=h}[_0x5e32ae(3961)](e){const t={_0x2d795e:575};e?this.eachChildGraphic(i=>{const s=_0x5210;i[s(t._0x2d795e)]=i._lastShow,delete i._lastShow}):this.eachChildGraphic(i=>{i._lastShow=i.show,i.show=![]})}_setOptionsHook(e,t){const i={_0x19a2df:4114,_0x4738cd:2747,_0x70b0ba:1632},s=_0x5e32ae;this._zhStyle(t[s(i._0x19a2df)]);for(const n in t)switch(n){case"label":this._initChildGraphic("label",LabelPrimitive);break;case s(2747):this._initChildGraphic(s(i._0x4738cd),BillboardPrimitive);break;case"point":this._initChildGraphic("point",PointPrimitive);break;case"model":this._initChildGraphic("model",ModelPrimitive);break;case"circle":this[s(3049)]("circle",CircleEntity);break;case"coneTrack":this._initChildGraphic("coneTrack",ConeTrack);break;case"path":this[s(3049)](s(1018),PathEntity);break;case s(i._0x70b0ba):this._initChildGraphic("polyline",PolylineEntity);break;case"wall":this._initChildGraphic("wall",WallEntity);break}}[_0x5e32ae(1882)](e,t){const i=e[t];if(i){delete e[t];for(const s in i)e[t+"_"+s]=i[s]}}_mergeStyleToOptions(e,t){const i={_0xb84031:3392,_0x451815:3402},s=_0x5e32ae,n=t+"_";for(const o in e){const c=e[o];o.startsWith(n)&&(!e[t]&&(e[t]={}),e[t][o[s(i._0xb84031)](n[s(i._0x451815)])]=c,delete e[o])}}_zhStyle(e){const t={_0x426098:1018},i=_0x5e32ae;if(!(!e||Object.keys(e)[i(3402)]===0)){this._mergeStyleToOptions(e,"model"),this[i(1759)](e,"label"),this._mergeStyleToOptions(e,"billboard"),this._mergeStyleToOptions(e,"point"),this._mergeStyleToOptions(e,"circle"),this._mergeStyleToOptions(e,"coneTrack"),this._mergeStyleToOptions(e,"polyline"),this._mergeStyleToOptions(e,"wall"),this._mergeStyleToOptions(e,i(t._0x426098));for(const s in e){const n=e[s];switch(s){default:{isObject(n)?this.options[s]=merge(this.options[s],n):this.options[s]=n;break}}}}}[_0x5e32ae(3049)](e,t){const i={_0x2eede3:2747,_0x4e9356:833,_0x43631f:2436,_0x2392bb:2565,_0x2ec1ff:3795},s={_0x5eff05:3547},n={_0x42c7ee:918},o={_0x2c6581:918},c=_0x5e32ae,_=this.options[e];let l=this._child[e];if(!_){l&&(l.remove(!![]),delete this._child[e]);return}if(l)l.setStyle(_),l.show=_[c(575)]??!![];else switch(l=new t({id:this.id+"-"+e,style:clone(_,["show"]),private:!![],eventParent:this,show:_.show??!![]}),l.removeEventParent(this._layer),l.addEventParent(this),this.isAdded&&this._layer[c(4223)](l),l.czmObject&&this.bindPickId(l.czmObject),l.czmObjectEx&&l.czmObjectEx.forEach(h=>{this.bindPickId(h)}),this._child[e]=l,e){case c(i._0x2eede3):{!_[c(2788)]&&(this._child.billboard.style.alignedAxis=new Cesium__namespace.VelocityVectorProperty(this[c(4195)],!![]));break}case"circle":{this._child[c(i._0x4e9356)].position=new Cesium__namespace.CallbackProperty(h=>this[c(o._0x2c6581)],![]);break}case"coneTrack":{this._child.coneTrack.position=new Cesium__namespace.CallbackProperty(h=>this[c(n._0x42c7ee)],![]);break}case"path":{this._child.path.position=this.property;break}case c(1632):{this._polyline_positions=[],this._child.polyline.positions=new Cesium__namespace.CallbackProperty(h=>this._polyline_positions,![]);break}case"wall":{this[c(2482)]=[],this[c(2565)].wall[c(i._0x43631f)]=new Cesium__namespace.CallbackProperty(h=>this._wall_positions,![]),this._wall_minimumHeights=[],this._child.wall.style.minimumHeights=new Cesium__namespace.CallbackProperty(h=>this[c(s._0x5eff05)],![]),this._wall_maximumHeights=[],this[c(i._0x2392bb)].wall.style[c(3051)]=new Cesium__namespace.CallbackProperty(h=>this[c(542)],![]),this._child[c(i._0x2ec1ff)]._heights_cache={};break}}}[_0x5e32ae(2240)](){const e={_0x48862:1679,_0x437a69:2500};this.eachChildGraphic(t=>{const i=_0x5210;this._layer.addGraphic(t),t.czmObject&&this.bindPickId(t[i(e._0x48862)]),t.czmObjectEx&&t.czmObjectEx[i(e._0x437a69)](s=>{this[i(2414)](s)})})}[_0x5e32ae(2640)](){this.eachChildGraphic(e=>{const t=_0x5210;this._layer[t(875)](e)})}[_0x5e32ae(2772)](e,t){const i={_0x24632d:3503,_0x280d25:2500},s={_0x4dd39c:2565},n=_0x5e32ae;if(this._child)return Object[n(i._0x24632d)](this._child)[n(i._0x280d25)]((o,c)=>{const _=n;e&&e.call(t||this,this[_(s._0x4dd39c)][o],c)}),this}update(e){const t={_0x3bcb38:575,_0x1915d6:918,_0x5918b0:3896,_0x185c0c:2327,_0xff6db3:918,_0x296992:2887,_0x7f9d9f:1817,_0x5c2676:1413,_0x443bc5:2298,_0x13ccba:840,_0x48ff3c:2469},i=_0x5e32ae;if(this[i(t._0x3bcb38)]){if(this._position=this.getPropertyValue(e.time,this._position_result),!this[i(t._0x1915d6)]){this[i(3896)]?this._updatePosition():(this._updatePosition(),this._updateForEvent(),this[i(t._0x5918b0)]=!![]);return}if(this._last_hasNull=![],this.property[i(2887)]===Cesium__namespace[i(t._0x185c0c)][i(2731)]&&(this[i(4120)]=this[i(t._0xff6db3)].clone(),Cesium__namespace[i(2724)].convertToReferenceFrame(e.time,this._position,this.property[i(t._0x296992)],Cesium__namespace[i(2327)][i(t._0x7f9d9f)],this[i(t._0xff6db3)])),this.options[i(t._0x5c2676)]){if(this._clampToTilesetFrame++,!this[i(3739)]||this._clampToTilesetFrame%this._frameRateHeight===0){let s=getHeight(this._map[i(3107)],this._position,{objectsToExclude:this._layer.objectsToExclude,has3dtiles:!![]});s&&(Cesium__namespace.defined(this[i(3798)][i(4111)])&&s<this.options.minHeight&&(s=this.options.minHeight),Cesium__namespace.defined(this.options[i(t._0x443bc5)])&&s>this[i(3798)].maxHeight&&(s=this.options.maxHeight),this._clampToTilesetHeight=s)}if(this._clampToTilesetHeight){const s=Cesium__namespace.Cartographic.fromCartesian(this[i(918)]);this._position=Cesium__namespace.Cartesian3.fromRadians(s[i(1640)],s.latitude,this[i(3739)])}}this[i(t._0x13ccba)]=this[i(t._0x48ff3c)].getValue(e.time),this._updatePosition(),this._updateCamera(),this._updateForEvent()}}[_0x5e32ae(2930)](){const e={_0x373e75:736,_0x4ff656:2747,_0x187ea8:2180,_0x55d3d5:1970,_0x6da4dd:1970,_0x185f62:4204,_0x5ca5a6:2927,_0x14b40d:1420,_0x596c74:2565,_0x4f2ba4:2109,_0x2be489:1997,_0x108ca3:1126,_0x2b9ea9:4195,_0x2c46ea:2109,_0x283fa0:918,_0x1eb964:1904,_0x5a3bfd:3143,_0x296ea3:3547,_0x5c4fc2:2482},t=_0x5e32ae;var i,s,n,o,c,_,l;if((i=this._child[t(e._0x373e75)])!==null&&i!==void 0&&i.show&&(this._child.label.position=this._position),(s=this._child[t(e._0x4ff656)])!==null&&s!==void 0&&s.show&&(this._child[t(2747)].position=this._position),(n=this[t(2565)].point)!==null&&n!==void 0&&n.show&&(this._child.point[t(e._0x187ea8)]=this._position),(o=this._child.model)!==null&&o!==void 0&&o.show){var h;this._modelMatrix=this._child.model._getModelMatrix(this._position,this._orientation_show),this._heading_reality=this._child.model._heading_reality,this[t(e._0x55d3d5)]=this._child[t(2927)][t(e._0x6da4dd)],this[t(e._0x185f62)]=this._child[t(e._0x5ca5a6)]._roll_reality,(h=this._child.model)!==null&&h!==void 0&&h._primitive&&(this._child.model._primitive.modelMatrix=this[t(e._0x14b40d)]),this[t(e._0x596c74)].model._position=this[t(918)]}let f=![];if((c=this._child.polyline)!==null&&c!==void 0&&c.show&&!((_=this.options.polyline)!==null&&_!==void 0&&_.showAll)){const g=this.property[t(3164)]._values.slice(0,this._flyok_index*3);if(this[t(e._0x4f2ba4)]>0){let C=Cesium__namespace.Cartesian3[t(e._0x2be489)](g);this._position&&C.push(this._position),this.options.polyline.maxDistance&&(C=sliceByMaxDistance(C,this.options.polyline[t(e._0x108ca3)]),this._maxCacheCount>0&&(this._maxCacheCount=Math.max(this._maxCacheCount,C.length*2))),this._polyline_positions=C,f=!![]}else this._polyline_positions=[]}if((l=this._child.wall)!==null&&l!==void 0&&l.show){const g=this[t(e._0x2b9ea9)]._property[t(3066)].slice(0,this[t(e._0x2c46ea)]*3);if(this._flyok_index>0){if(!f){let w=Cesium__namespace.Cartesian3.unpackArray(g);this[t(e._0x283fa0)]&&w[t(3759)](this._position),this.options.wall.maxDistance&&(w=sliceByMaxDistance(w,this.options.wall.maxDistance),this._maxCacheCount>0&&(this[t(e._0x1eb964)]=Math.max(this._maxCacheCount,w.length*2))),this[t(e._0x5a3bfd)]=w}const C=[],E=[],P=this._polyline_positions;for(let w=0;w<P.length;w++){const M=P[w],T=Cesium__namespace[t(3026)].fromCartesian(M);if(E.push(T.height),this.options.wall.surface){var m;P[w].hbgd=P[w].hbgd??getHeight((m=this._map)===null||m===void 0?void 0:m.scene,M,{has3dtiles:![]}),C.push(P[w].hbgd)}else C[t(3759)](0)}this._wall_positions=P,this[t(e._0x296ea3)]=C,this._wall_maximumHeights=E}else this[t(e._0x5c4fc2)]=[],this._wall_minimumHeights=[],this._wall_maximumHeights=[]}}_updateCamera(){const e={_0x49fa56:2638,_0x3818b4:1050,_0x468379:2638,_0x5b410d:737,_0x4aff62:1787,_0x4c6aa0:573,_0x454c49:3798,_0x1d3b02:3798,_0x323d22:2792,_0x367b6d:3798,_0x49f3ee:1890,_0x9b0a3d:573},t=_0x5e32ae;if(this.options.camera)switch(this.options.camera.type){case"gs":{const i=this[t(e._0x49fa56)];this._map.clock[t(e._0x3818b4)]&&this[t(1890)][t(e._0x468379)]!==i&&(this._map[t(2638)]=i,i[t(1787)]=!![]),i._needFlyToPoint&&!this._map[t(e._0x5b410d)]._needTrackedEntityUpdate&&(i[t(e._0x4aff62)]=![],this.flyToPoint({...this[t(3798)].camera,lock:!![],duration:0}));break}case"dy":{const i=this.trackedEntity;this._map.trackedEntity!==i&&(this._map.trackedEntity=i);let s=this.options.camera.followedX||0;const n=this.options.camera[t(e._0x4c6aa0)]||0;s===0&&n===0&&(s=.1);let o;this[t(e._0x454c49)].camera.offsetX&&(o=o||{},o.x=this[t(e._0x1d3b02)][t(e._0x323d22)].offsetX),this.options[t(2792)].offsetY&&(o=o||{},o.y=this.options.camera[t(759)]),this[t(e._0x367b6d)].camera.offsetZ&&(o=o||{},o.z=this.options.camera.offsetZ),this._map.scene.camera.lookAtTransform(this[t(4295)](o),new Cesium__namespace.Cartesian3(-s,0,n));break}case"sd":{const i=this[t(2638)];this[t(e._0x49f3ee)].trackedEntity!==i&&(this._map.trackedEntity=i),this._map.scene[t(2792)].lookAtTransform(this[t(4295)](),new Cesium__namespace[t(3916)](-1,0,this.options[t(2792)][t(e._0x9b0a3d)]));break}default:{this[t(2406)]&&this._map.trackedEntity===this._trackedEntity&&(this[t(e._0x49f3ee)].trackedEntity=void 0);break}}}computeModelMatrix(e){const t={_0x443489:4102,_0x5adeb8:2511,_0x551965:840,_0x5c1760:3064,_0x438bdd:767,_0x3c6b5e:3698},i=_0x5e32ae;!this._matrix4&&(this._matrix4=new Cesium__namespace[i(t._0x443489)],this[i(t._0x5adeb8)]=new Cesium__namespace.Matrix3);let s=this[i(918)];if(!(!Cesium__namespace[i(515)](s)||!this[i(t._0x551965)])){if(e){const n=new Cesium__namespace[i(t._0x5c1760)](this[i(3666)],this[i(2041)],this._roll);s=getPositionByHprAndOffset(s,new Cesium__namespace[i(3916)](e.x||0,e.y||0,e.z||0),n)}return this._matrix4=Cesium__namespace.Matrix4.fromRotationTranslation(Cesium__namespace.Matrix3[i(t._0x438bdd)](this._orientation_show,this._matrix3Scratch),s,this._matrix4),this[i(t._0x3c6b5e)]}}[_0x5e32ae(3102)](){const e={_0x49c794:2109,_0x4328e9:2099,_0x4c7d47:2099},t=_0x5e32ae,i=this[t(e._0x49c794)]??0;if(this.fire(EventType.change,{index:i,counts:this[t(3954)],position:this._position,orientation:this._orientation_show}),i!==this._last_fireIndex){if(Cesium__namespace[t(515)](this[t(e._0x4328e9)])&&this._last_fireIndex+1!==i)for(;++this[t(e._0x4c7d47)]<i;)this.fire(EventType[t(2340)],{counts:this._counts,index:this._last_fireIndex});this.fire(EventType.endItem,{counts:this._counts,index:i}),i===this._counts&&this.fire(EventType.end),this[t(2099)]=i}}getPropertyValue(e,t){const i={_0x22fdb5:3954,_0x2495e6:2109,_0x92f6d0:458,_0x599780:613,_0x244b76:2109,_0x198fc6:3249,_0x4e449a:1143,_0xaf5297:2122,_0x262b65:2636,_0x4e0ae7:1603,_0x52fd87:870},s=_0x5e32ae;var n;const o=(n=this[s(4195)])===null||n===void 0?void 0:n._property,c=o==null?void 0:o._times,_=c.length;if(_===0)return;this[s(i._0x22fdb5)]=_;let l;const h=Cesium__namespace.Cartesian3,f=o._values;if(this[s(2109)]=Cesium__namespace.binarySearch(c,e,Cesium__namespace.JulianDate.compare),this._flyok_index<0){if(this[s(i._0x2495e6)]=~this._flyok_index,this._flyok_index===0){const k=c[this._flyok_index];if(l=o[s(i._0x92f6d0)],o._backwardExtrapolationType===Cesium__namespace.ExtrapolationType.NONE||l!==0&&Cesium__namespace.JulianDate.secondsDifference(k,e)>l)return;if(o._backwardExtrapolationType===Cesium__namespace.ExtrapolationType.HOLD)return h[s(i._0x599780)](f,0,t)}if(this[s(i._0x244b76)]>=_){this[s(i._0x244b76)]=_-1;const k=c[this._flyok_index];if(l=o._forwardExtrapolationDuration,o._forwardExtrapolationType===Cesium__namespace[s(762)].NONE||l!==0&&Cesium__namespace.JulianDate.secondsDifference(e,k)>l)return;if(o._forwardExtrapolationType===Cesium__namespace[s(762)][s(i._0x198fc6)])return this._flyok_index=_-1,h.unpack(f,this._flyok_index*h[s(3105)],t)}const m=o._xTable,g=o._yTable,C=o[s(3095)],E=o._packedInterpolationLength,P=o._inputOrder;if(o[s(882)]){o._updateTableLength=![];const k=Math.min(C[s(i._0x4e449a)](o._interpolationDegree,P),_);k!==o._numberOfPoints&&(o[s(2122)]=k,m.length=k,g.length=k*E)}const w=o[s(i._0xaf5297)]-1;if(w<1)return;let M=0,T=_-1;if(T-M+1>=w+1){let k=this._flyok_index-(w/2|0)-1;k<M&&(k=M);let B=k+w;B>T&&(B=T,k=B-w,k<M&&(k=M)),M=k,T=B}const R=T-M+1;for(let k=0;k<R;++k)m[k]=Cesium__namespace.JulianDate[s(i._0x262b65)](c[M+k],c[T]);if(Cesium__namespace.defined(h.convertPackedArrayForInterpolation))h.convertPackedArrayForInterpolation(f,M,T,g);else{let k=0;const B=o[s(i._0x4e0ae7)];let $=M*B;const H=(T+1)*B;for(;$<H;)g[k]=f[$],$++,k++}const D=Cesium__namespace.JulianDate.secondsDifference(e,c[T]);let N;if(P===0||!Cesium__namespace.defined(C.interpolate))N=C.interpolateOrderZero(D,m,g,E,o._interpolationResult);else{const k=Math.floor(E/(P+1));N=C[s(i._0x52fd87)](D,m,g,k,P,P,o._interpolationResult)}return Cesium__namespace.defined(h.unpackInterpolationResult)?h.unpackInterpolationResult(N,f,M,T,t):h.unpack(N,0,t)}return h[s(613)](f,this._flyok_index*o._packedLength,t)}[_0x5e32ae(1950)](){const e={_0x154940:3164,_0x564d01:3528},t=_0x5e32ae;var i,s;const n=(i=this.property)===null||i===void 0||(s=i[t(e._0x154940)])===null||s===void 0?void 0:s[t(e._0x564d01)];!n||n.length===0||this.property.removeSamples(new Cesium__namespace.TimeInterval({start:n[0],stop:n[n.length-1]}))}getRectangle(e){const t={_0x1e6b9d:3066,_0x5e2636:3759,_0x51ddcb:3937},i=_0x5e32ae;var s,n,o,c;const _=(s=this.property)===null||s===void 0||(n=s._property)===null||n===void 0?void 0:n._times,l=(o=this[i(4195)])===null||o===void 0||(c=o._property)===null||c===void 0?void 0:c[i(t._0x1e6b9d)];if(!_||_.length===0)return;const h=[];for(let m=0,g=_.length;m<g;m++)h[i(t._0x5e2636)](new Cesium__namespace.Cartesian3(l[m*3],l[m*3+1],l[m*3+2]));return getRectangle(h,e==null?void 0:e[i(t._0x51ddcb)])}[_0x5e32ae(3276)](e){const t={_0x381ed3:4195,_0x410a04:3066,_0x1fa293:527},i=_0x5e32ae;var s,n,o,c;const _=(s=this[i(t._0x381ed3)])===null||s===void 0||(n=s._property)===null||n===void 0?void 0:n._times,l=(o=this[i(4195)])===null||o===void 0||(c=o._property)===null||c===void 0?void 0:c[i(t._0x410a04)];if(!_||_.length===0)return[];const h=[];for(let f=0,m=_.length;f<m;f++){const g=LngLatPoint[i(3236)](new Cesium__namespace.Cartesian3(l[f*3],l[f*3+1],l[f*3+2])),C=g.toArray(e);C.push(Cesium__namespace[i(t._0x1fa293)].toDate(_[f])[i(3906)]()),h[i(3759)](C)}return h}flyToPoint(e={}){const t={_0x2093ea:3047},i=_0x5e32ae;if(!this._map)return;const s=this._position;if(!s)return;let n;if(Cesium__namespace.defined(e.heading)){var o;n=e.heading+Cesium__namespace.Math.toDegrees(((o=this.hpr)===null||o===void 0?void 0:o.heading)||0)}this._map[i(t._0x2093ea)](s,{...e,heading:n})}static clearLastCamera(){const e={_0x4b5afb:3205},t=_0x5e32ae;var i,s,n;(i=globeLastRoam)!==null&&i!==void 0&&(s=i[t(3798)])!==null&&s!==void 0&&(n=s.camera)!==null&&n!==void 0&&n.type&&(globeLastRoam.options[t(2792)][t(e._0x4b5afb)]=""),globeLastRoam=null}setCameraOptions(e){const t={_0x3de236:1963,_0x5e859b:3798,_0x52e985:2792,_0x9c4022:3205},i=_0x5e32ae;var s;Route[i(t._0x3de236)](),this.options.camera?this.options.camera=merge(this.options.camera,e):e?this.options.camera=e:this[i(t._0x5e859b)][i(t._0x52e985)]={type:""},((s=this[i(3798)].camera)===null||s===void 0?void 0:s[i(3205)])!==""&&(globeLastRoam=this),e&&e[i(t._0x9c4022)]==="gs"&&e.radius&&this.flyToPoint({...e,duration:0})}autoSurfaceHeight(){logWarn(_0x5e32ae({_0x323e3c:3924}._0x323e3c))}pause(){const e={_0x29ddf4:1890,_0x1bafdf:1050,_0xd4ad72:2638},t=_0x5e32ae;this[t(e._0x29ddf4)]&&(this._map.clock[t(e._0x1bafdf)]=![],this._trackedEntity&&this._map[t(e._0xd4ad72)]===this._trackedEntity&&(this._map.trackedEntity=void 0))}proceed(){const e=_0x5e32ae;this._map&&(this[e(1890)][e(1949)].shouldAnimate=!![])}_getPopupPosition(){const e={_0x191a1d:3703},t={_0x449787:918},i=_0x5e32ae;return!this._popupPosition&&(this._popupPosition=new Cesium__namespace[i(e._0x191a1d)](s=>this[i(t._0x449787)],![])),this._popupPosition}destroy(e){this[_0x5e32ae(2772)](i=>{i.destroy(e)}),super.destroy(e)}}register$4(_0x5e32ae(1926),Route);class FixedRoute extends Route{constructor(e={}){const t={_0x333157:2586,_0x246c81:3798},i=_0x5e32ae;super(e),this.options.showStop=this.options[i(t._0x333157)]??!![],this[i(t._0x246c81)].updateClock=this.options.updateClock??!![]}get[_0x5e32ae(3932)](){return this[_0x5e32ae(3091)]}get[_0x5e32ae(2962)](){return this._stopTime}get points(){return this._points}set points(e){this.positions=e}get positions(){return this._points.map(e=>e[_0x5210(918)])}set[_0x5e32ae(2436)](e){const t={_0x67abab:3932,_0x45496e:527,_0x5d6217:3798,_0x11724f:2612,_0x20c5fd:3226,_0x9bcbf2:4014,_0x5e4f2d:1099,_0x2ab668:2988,_0x41339f:2625,_0x806985:4043,_0x475bda:3916,_0x6a4b57:2776,_0x117510:527,_0x2cbc05:2534,_0x4a3170:3064,_0x5699d6:4043,_0x169171:4247,_0x23135a:4014,_0x1237b7:2960,_0x1da562:2227,_0x3556c3:1995,_0x299d98:2303,_0x2b54b2:2753,_0x320022:1632},i={_0x26c97c:3984,_0x25a55a:2776},s=_0x5e32ae;if(!this._map||!e||!Array[s(3845)](e)||e.length===0)return;const n=LngLatArray.toPoints(e);this.clearPosition();let o;if(this.options[s(t._0x67abab)])isString(this.options[s(3932)])?this.options.startTime[s(2316)]("Z")===-1?o=Cesium__namespace.JulianDate.fromDate(new Date(this.options.startTime)):o=Cesium__namespace.JulianDate.fromIso8601(this.options.startTime):this.options.startTime instanceof Date?o=Cesium__namespace[s(t._0x45496e)].fromDate(this[s(t._0x5d6217)].startTime):o=this.options.startTime;else if(this.options.timeField){const D=n[0][this.options[s(t._0x11724f)]];o=Cesium__namespace.JulianDate[s(t._0x20c5fd)](new Date(D))}else o=this._map.clock.currentTime;const c=this.options.speed,_=c&&Array.isArray(c),l=100;function h(D,N){return N.speed?N.speed:N._speed?N._speed:_?(c[D]||l)/3.6:(c||l)/3.6}const f=this.options.offsetHeight??0;let m=0,g=0,C,E;const P=[];let w=![];const M=.001;function T(D,N){const k=s;for(let B=D-1;B>=0;B--){const $=n[B],H=$._position||Cesium__namespace.Cartesian3[k(3203)]($.lng,$.lat,$[k(i._0x26c97c)]+f);if($._position=H,Cesium__namespace.Cartesian3[k(i._0x25a55a)](N,H)!==0)return getOnLinePointByLen(H,N,M,!![])}for(let B=D-1,$=n.length;B<$;B++){const H=n[B],W=H._position||Cesium__namespace.Cartesian3.fromDegrees(H.lng,H.lat,H[k(i._0x26c97c)]+f);if(H._position=W,Cesium__namespace.Cartesian3.distance(N,W)!==0)return getOnLinePointByLen(N,W,M,![])}return null}for(let D=0,N=n.length;D<N;D++){let k=n[D],B=k._position||Cesium__namespace.Cartesian3.fromDegrees(k.lng,k.lat,k.alt+f);if(D===0){if(E=o.clone(),this.property[s(t._0x9bcbf2)](E,B),k._position=B,k._time=E,k._distance=g,k._second=m,k._speed=0,k._index=D,P.push(k),Cesium__namespace[s(515)](k.heading)){this._orientation=new Cesium__namespace[s(t._0x5e4f2d)](Cesium__namespace[s(t._0x2ab668)]),w=!![];const $=new Cesium__namespace.HeadingPitchRoll(Cesium__namespace.Math[s(1567)](k.heading||0),Cesium__namespace.Math.toRadians(k[s(t._0x41339f)]||0),Cesium__namespace.Math.toRadians(k.roll||0));this._orientation.addSample(E,Cesium__namespace.Transforms[s(t._0x806985)](B,$))}}else{let $=Cesium__namespace[s(t._0x475bda)][s(t._0x6a4b57)](B,C);if($===0&&($=M,B=T(D,B),!B))continue;let H,W;if(this.options.timeField){const J=new Date(k[this.options.timeField]),z=Cesium__namespace.JulianDate[s(t._0x20c5fd)](J);H=Cesium__namespace[s(t._0x45496e)].secondsDifference(z,E)||.01,E=z,W=$/H,m+=H}else W=h(D-1,k),H=$/W,H<.01&&(H=.01),m+=H,E=Cesium__namespace[s(t._0x117510)][s(t._0x2cbc05)](o,m,new Cesium__namespace.JulianDate);if(g+=$,this.property.addSample(E,B),w){const J=new Cesium__namespace[s(t._0x4a3170)](Cesium__namespace[s(1286)].toRadians(k.heading||0),Cesium__namespace.Math.toRadians(k.pitch||0),Cesium__namespace.Math.toRadians(k.roll||0));this._orientation[s(4014)](E,Cesium__namespace.Transforms[s(t._0x5699d6)](B,J))}if(k._position=B,k._time=E,k._distance=g,k._second=m,k[s(t._0x169171)]=W,k._index=D,P.push(k),this.options.pauseTime){const J=T(D,B);if(!J)continue;let z;typeof this[s(3798)].pauseTime=="function"?z=this.options.pauseTime(D,J):z=this[s(t._0x5d6217)][s(491)],z>0&&(m+=z,E=Cesium__namespace.JulianDate.addSeconds(o,m,new Cesium__namespace.JulianDate),this.property[s(t._0x23135a)](E,J),g+=M,k=clone(k),k._position=J,k._time=E,k._distance=g,k._second=m,k._speed=0,k._index=D,P.push(k))}}C=B}if(this._points=P,this[s(3091)]=o,this._stopTime=E.clone(),this[s(2421)]=m,this[s(t._0x1237b7)]=g,this.options[s(t._0x1da562)]&&this.property.setInterpolationOptions({interpolationDegree:this.options[s(1353)]??2,interpolationAlgorithm:this.options[s(t._0x3556c3)]??Cesium__namespace[s(t._0x299d98)]}),this[s(t._0x5d6217)][s(2586)]){var L,R;this.backToFirst(),(L=this.options)!==null&&L!==void 0&&(R=L.polyline)!==null&&R!==void 0&&R[s(t._0x2b54b2)]&&(this._child[s(t._0x320022)].positions=this.positions)}this.fire(EventType.updatePosition,{position:this.property})}get[_0x5e32ae(2236)](){return this[_0x5e32ae({_0x1168d3:1079}._0x1168d3)]}get[_0x5e32ae(3846)](){return this._timeinfo}[_0x5e32ae(4158)](e){const t={_0x22a0f7:2240,_0xa887ea:1018},i={_0xbad988:3352},s=_0x5e32ae;var n,o;this[s(575)]&&(this[s(t._0x22a0f7)](),(n=this[s(2927)])!==null&&n!==void 0&&n.readyPromise&&this.model.readyPromise[s(549)](()=>{this[s(i._0xbad988)].resolve(this)}),this.positions=this[s(3798)].positions,this._polyline_positions=[],(o=this._child.path)!==null&&o!==void 0&&o[s(699)]&&(this._child[s(t._0xa887ea)].entity[s(1333)]=void 0))}_setOptionsHook(e,t){const i={_0x45c021:3932},s=_0x5e32ae;for(const n in t)switch(n){case"speed":case s(i._0x45c021):this.positions=this.options[s(2436)];break;default:super._setOptionsHook(e,t);break}}start(){const e={_0x10e441:4146,_0x3ebd87:1949},t={_0x19d709:3624},i=_0x5e32ae;var s;if(!(!this[i(1890)]||this._isStart)){if(!Cesium__namespace.defined(this._points)||this._points.length===0){logError$1("没有坐标数据，漫游路线启动失败",this._points);return}this._isStart=!![],this.positions=this[i(e._0x10e441)],(s=this._child[i(2927)])!==null&&s!==void 0&&s.show&&this.options.updateClock?(this._map[i(e._0x3ebd87)].shouldAnimate=![],this._map.clock.currentTime=this.startTime.clone(),this._child.model.readyPromise.then(()=>{this[i(t._0x19d709)]()})):this._start()}}_start(){const e={_0x26daeb:3798,_0x4e9a36:1890,_0x271f41:2591,_0x59b9a3:601,_0x37ed74:1949,_0x23d37a:4195,_0x50f50f:3249,_0x32d024:1321,_0x5f730f:1404},t=_0x5e32ae;var i;if(this[t(e._0x26daeb)][t(3634)]&&(this._map.clock.shouldAnimate=!![],this[t(e._0x4e9a36)].clock.currentTime=this.startTime.clone(),!this.options.clockLoop&&this.options[t(e._0x271f41)]&&(this._bak_clockRange=this._map.clock.clockRange,this[t(e._0x59b9a3)]=this._map.clock.startTime,this._bak_stopTime=this[t(e._0x4e9a36)].clock.stopTime,this._map.clock.clockRange=this.options.clockRange??Cesium__namespace.ClockRange.LOOP_STOP,this._map.clock[t(3932)]=this[t(3932)].clone(),this[t(e._0x4e9a36)][t(e._0x37ed74)].stopTime=this.stopTime.clone(),this._map.controls.timeline&&this._map.controls.timeline.zoomTo(this.startTime,this[t(2962)]))),(i=this._child[t(1018)])!==null&&i!==void 0&&i.entity){var s;let n=this._stopTime;((s=this[t(e._0x23d37a)])===null||s===void 0?void 0:s.forwardExtrapolationType)===Cesium__namespace.ExtrapolationType[t(e._0x50f50f)]&&(n=Cesium__namespace.JulianDate.addDays(n,365,new Cesium__namespace.JulianDate)),this._child.path.entity.availability=new Cesium__namespace[t(e._0x32d024)]([new Cesium__namespace.TimeInterval({start:this._startTime,stop:n})])}this[t(e._0x5f730f)](EventType[t(2476)]),this.bindUpdateEvent()}stop(){const e={_0x224aaf:425,_0xb4f8c1:918,_0x42fd1d:699,_0x3e6fc4:1018},t=_0x5e32ae;var i;!this._isStart||!this[t(1890)]||(this[t(1890)].trackedEntity=void 0,this[t(2797)](),this.options.showStop?this[t(e._0x224aaf)]():(this[t(e._0xb4f8c1)]=void 0,this._updatePosition()),this._polyline_positions=[],(i=this._child.path)!==null&&i!==void 0&&i[t(e._0x42fd1d)]&&(this[t(2565)][t(e._0x3e6fc4)].entity.availability=void 0),this[t(1079)]=![],this.fire(EventType.end),this.fire(EventType[t(3563)],{position:this._position}))}backToFirst(){const e=_0x5e32ae;this[e(2109)]=0,this[e(918)]=this[e(4146)][0]._position,this._orientation_show=this[e(2469)].getValue(this.startTime),this._updatePosition(),this._updateForEvent(![])}_updatePositionEx(){const e=_0x5e32ae;var t,i;(t=this[e(3798)])!==null&&t!==void 0&&(i=t.polyline)!==null&&i!==void 0&&i.showAll&&(this._child.polyline.positions=this[e(2436)])}[_0x5e32ae(3102)](e=!![]){const t={_0xd5fea3:4146,_0x3518d2:918,_0x35aefb:2776,_0x33ef72:2332,_0x8c0cee:1890,_0x8dda54:3932,_0x4b61f0:3402,_0x3ac460:616,_0x5f3f0d:4247,_0x419db4:2099,_0x17b07:3954,_0x56ab83:3798,_0x32aa22:3798,_0x6da3f3:1949,_0x58ba4e:3226,_0x2fdc1a:2612,_0x1bb6f2:1455,_0x37d3eb:527,_0x227035:527,_0x28134b:762},i=_0x5e32ae;if(!this._points)return;const s=this[i(2109)],n=this._points[this[i(t._0xd5fea3)].length-1],o=this._points[Math.max(s-1,0)];if(!o)return;const c=LngLatPoint.fromCartesian(this._position);let _=o._distance+(this[i(t._0x3518d2)]?Cesium__namespace.Cartesian3[i(t._0x35aefb)](this._position,o._position):0);_>n[i(2332)]&&(_=n[i(t._0x33ef72)]);let l=0;if(s>0&&(l=Cesium__namespace.JulianDate.secondsDifference(this[i(t._0x8c0cee)].clock.currentTime,this[i(t._0x8dda54)]),l>n._second&&(l=n._second)),this._timeinfo={index:s,counts:this._counts??this._points[i(t._0x4b61f0)],point:c,position:this._position,orientation:this._orientation_show,second:l,second_all:n[i(t._0x3ac460)],distance:_,distance_all:n._distance,speed:o[i(t._0x5f3f0d)]},!!e){if(this.fire(EventType.change,this._timeinfo),s!==this[i(t._0x419db4)]){if(Cesium__namespace[i(515)](this._last_fireIndex)&&this[i(t._0x419db4)]+1!==s)for(;++this._last_fireIndex<s;)this.fire(EventType.endItem,{counts:this[i(t._0x17b07)],index:this._last_fireIndex,point:this._points[this[i(2099)]]});this.fire(EventType[i(2340)],{counts:this._counts,index:s,point:this._points[s]}),s===this._counts&&this.fire(EventType.end),this._last_fireIndex=s}if(l>=n._second){var h;if(this.options.clockLoop&&!this.options.clockRange){var f;if(this.unbindUpdateEvent(),this[i(t._0x56ab83)].startTime)delete this.options[i(3932)];else if(this[i(t._0x32aa22)].timeField){const g=this._points[0][this.options.timeField],C=Cesium__namespace.JulianDate.fromDate(new Date(g)),E=Cesium__namespace.JulianDate.secondsDifference(this[i(t._0x8c0cee)][i(t._0x6da3f3)].currentTime,C);for(let P=0;P<this._points.length;P++){const w=Cesium__namespace[i(527)][i(t._0x58ba4e)](new Date(this._points[P][this.options[i(2612)]]));this[i(4146)][P][this[i(3798)][i(t._0x2fdc1a)]]=Cesium__namespace.JulianDate[i(t._0x1bb6f2)](Cesium__namespace[i(t._0x37d3eb)].addSeconds(w,E,new Cesium__namespace[i(t._0x37d3eb)]))}}if(this.positions=this[i(4146)],(f=this._child[i(1018)])!==null&&f!==void 0&&f.entity){var m;let g=this._stopTime;((m=this[i(4195)])===null||m===void 0?void 0:m.forwardExtrapolationType)===Cesium__namespace.ExtrapolationType[i(3249)]&&(g=Cesium__namespace[i(t._0x227035)][i(2357)](g,365,new Cesium__namespace.JulianDate)),this._child.path.entity.availability=new Cesium__namespace.TimeIntervalCollection([new Cesium__namespace[i(4164)]({start:this._startTime,stop:g})])}this.bindUpdateEvent();return}(this[i(3798)][i(2413)]||((h=this[i(4195)])===null||h===void 0?void 0:h.forwardExtrapolationType)===Cesium__namespace[i(t._0x28134b)].NONE)&&this.stop()}}}autoSurfaceHeight(e={}){const t={_0x4798c3:4146},i={_0x116aa2:1890},s={_0x45d4bf:3236,_0x282974:1029},n=_0x5e32ae,o=this[n(t._0x4798c3)];let c=0;const _=[],l=[],h=[],f=[],m=[];return new Promise((g,C)=>{const E=n,P=[];o[E(2500)](w=>{P.push(w._position)}),computeStepSurfaceLine({objectsToExclude:this._layer.objectsToExclude,...e,exact:!![],scene:this[E(i._0x116aa2)].scene,positions:P,endItem:(w,M,T)=>{const L=E;var R,D;if(!this._map)return;const N=o[T];if(M)m.push(N);else for(let H=0;H<w.length;H++){const W=LngLatPoint[L(s._0x45d4bf)](w[H]);W._speed=N._speed,m.push(W)}const k=((R=o[T])===null||R===void 0?void 0:R.alt)||0,B=((D=o[T+1])===null||D===void 0?void 0:D.alt)||0,$=(B-k)/w.length;for(let H=0;H<w.length;H++){H!==0&&(c+=Cesium__namespace[L(3916)].distance(w[H],w[H-1])),_.push(Number(c.toFixed(1)));const W=LngLatPoint.fromCartesian(w[H]);f.push(W);const J=M?0:W.alt;l.push(J);const z=Number((k+$*H)[L(s._0x282974)](1));h.push(z)}},end:()=>{this._map&&(this._terrainHeight={arrLength:_,arrFxgd:h,arrHbgd:l,arrPoint:f},this.positions=m,g(m))}})})}clampToGround(e){return this[_0x5e32ae({_0xa54cbc:3258}._0xa54cbc)](e)}[_0x5e32ae(1879)](e={}){const t={_0x27f594:1806},i={_0x5b35c4:3984,_0x4431db:3402,_0x4c933f:3916,_0x15c6e9:1029,_0x471ef2:3759},s=this._points;return new Promise((n,o)=>{const c={_0x55c8da:1806},_=_0x5210;if(this[_(t._0x27f594)]){n(this._terrainHeight);return}this[_(1709)]=!![];let l=0;const h=[],f=[],m=[],g=[];computeStepSurfaceLine({objectsToExclude:this[_(2873)].objectsToExclude,...e,exact:!![],scene:this._map.scene,positions:s,endItem:(C,E,P)=>{const w=_,M=s[P][w(i._0x5b35c4)],T=s[P+1][w(i._0x5b35c4)],L=(T-M)/C[w(i._0x4431db)];for(let R=0;R<C.length;R++){R!==0&&(l+=Cesium__namespace[w(i._0x4c933f)].distance(C[R],C[R-1])),h.push(Number(l[w(i._0x15c6e9)](1)));const D=LngLatPoint.fromCartesian(C[R]);g[w(i._0x471ef2)](D);const N=E?0:D.alt;f[w(3759)](N);const k=Number((M+L*R)[w(1029)](1));m.push(k)}},end:()=>{const C=_;this._getTerrainHeight_ing=![],this[C(c._0x55c8da)]={arrLength:h,arrFxgd:m,arrHbgd:f,arrPoint:g},n(this._terrainHeight)}})})}}register$4("fixedRoute",FixedRoute);var index$6={__proto__:null,BaseGraphic,BaseEntity,BasePointEntity,BasePolyEntity,BasePrimitive,BasePointPrimitive,BasePolyPrimitive,PointEntity,BillboardEntity,FontBillboardEntity,DivBillboardEntity,LabelEntity,CanvasLabelEntity,ModelEntity,BoxEntity,PlaneEntity,CircleEntity,CylinderEntity,ConeTrack,EllipsoidEntity,PolylineEntity,CurveEntity,PolylineVolumeEntity,PathEntity,CorridorEntity,WallEntity,RectangleEntity,PolygonEntity,EllipseEntity,RectangularSensor,Video2D,PitEntity,AttackArrow,AttackArrowPW,AttackArrowYW,CloseVurve,DoubleArrow,FineArrow,FineArrowYW,GatheringPlace,IsosTriangle,Lune,Regular,Sector,StraightArrow,PointMeasure,DistanceMeasure,DistanceSurfaceMeasure,SectionMeasure,AngleMeasure,HeightMeasure,HeightTriangleMeasure,AreaMeasure,AreaSurfaceMeasure,VolumeMeasure,VolumeDepthMeasure,PointPrimitive,BillboardPrimitive,CloudPrimitive,LabelPrimitive,ModelPrimitive,CirclePrimitive,PlanePrimitive,BoxPrimitive,CylinderPrimitive,ConeTrackPrimitive,EllipsoidPrimitive,PolylinePrimitive,WallPrimitive,CorridorPrimitive,PolylineVolumePrimitive,RectanglePrimitive,PolygonPrimitive,FrustumPrimitive,LightCone,Water,DiffuseWall,ScrollWall,ThickWall,DynamicRiver,Road,Pit,DoubleSidedPlane,ReflectionWater,VideoPrimitive,BaseCombine,FlatBillboard,PlaneCombine,BoxCombine,CircleCombine,CylinderCombine,FrustumCombine,EllipsoidCombine,PolylineCombine,PolylineVolumeCombine,CorridorCombine,WallCombine,PolygonCombine,WaterCombine,RectangleCombine,DivGraphic,DivBoderLabel,DivLightPoint,DivUpLabel,Popup,Tooltip,ParticleSystem,ArcFrustum,Tetrahedron,ViewShed,Video3D,Route,FixedRoute};class XyzImageryProvider$1 extends Cesium__namespace.UrlTemplateImageryProvider{constructor(e={}){const t={_0x570676:1678},i=_0x5e32ae;e.customTags=e.customTags||{},e.customTags[i(2614)]=function(s,n,o,c){return location.host},e.customTags[i(t._0x570676)]=function(s,n,o,c){return location.hostname},e.customTags.z4490=function(s,n,o,c){return c+1},super(e),this[i(3798)]=e}}class TdtImageryProvider extends Cesium__namespace.WebMapTileServiceImageryProvider{constructor(e={}){const t={_0x4227a1:1538,_0x1f69f2:2902,_0x448c44:685,_0x303f83:1797,_0x32ba39:1361,_0x2729d4:3128,_0x9aab5d:1613,_0x7ed4b3:3832,_0x36c32e:3798},i=_0x5e32ae;let s,n=18;switch(e[i(t._0x4227a1)]){case"vec_d":s=i(t._0x1f69f2);break;case"vec_z":s=i(4202);break;case i(t._0x448c44):s=i(3872);break;case"img_d":s=i(t._0x303f83);break;case"img_z":s="cia";break;case i(2289):s=i(t._0x32ba39);break;case"ter_d":s="ter",n=14;break;case"ter_z":s="cta",n=14;break;default:s="vec";break}(e.key==null||e.key[i(3402)]===0)&&(e[i(t._0x2729d4)]=tiandituArr);const o=getArrayRandomOne(e.key);let c;!e[i(1613)]||e[i(t._0x9aab5d)]===CRS.EPSG3857?(c=i(4051)+s+"_w/wmts?service=WMTS&version=1.0.0&request=GetTile&tilematrix={TileMatrix}&layer="+s+"&style={style}&tilerow={TileRow}&tilecol={TileCol}&tilematrixset={TileMatrixSet}&format=tiles&tk="+o,(e.proxy||e.headers||e.queryParameters)&&(c=getUrlResource({url:c.replace(i(2787),"0"),proxy:e.proxy,headers:e.headers,queryParameters:e[i(577)]})),e={subdomains:["0","1","2","3","4","5","6","7"],maximumLevel:e[i(1398)]??n,...e,url:c,layer:s,style:"default",format:i(t._0x7ed4b3),tileMatrixSetID:"w",tileMatrixLabels:[...Array(20).keys()].map(_=>_.toString()),tilingScheme:new Cesium__namespace.WebMercatorTilingScheme}):(c="https://t{s}.tianditu.gov.cn/"+s+i(3974)+s+"&style={style}&tilerow={TileRow}&tilecol={TileCol}&tilematrixset={TileMatrixSet}&format=tiles&tk="+o,n=17,(e.proxy||e[i(771)]||e.queryParameters)&&(c=getUrlResource({url:c.replace("{s}","0"),proxy:e.proxy,headers:e.headers,queryParameters:e.queryParameters})),e={subdomains:["0","1","2","3","4","5","6","7"],maximumLevel:e.maximumLevel??n,...e,url:c,layer:s,style:"default",format:"tiles",tileMatrixSetID:"c",tileMatrixLabels:[...Array(20).keys()].map(_=>(_+1)[i(4130)]()),tilingScheme:new Cesium__namespace[i(497)]}),super(e),this[i(t._0x36c32e)]=e}}class GaodeImageryProvider extends XyzImageryProvider$1{constructor(e={}){const t={_0xc21c32:1580,_0x1bbd6f:4060,_0x3235bf:1231,_0x3ec5a0:419},i=_0x5e32ae;let s;switch(e.layer){case i(2902):s="https://"+(e[i(t._0xc21c32)]?i(t._0x1bbd6f):"webrd")+i(t._0x3235bf);break;case"img_d":s="https://webst0{s}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}";break;case"img_z":s="https://webst0{s}.is.autonavi.com/appmaptile?x={x}&y={y}&z={z}&lang=zh_cn&size=1&scale=1&style=8";break;case"time":{s="https://tm.amap.com/trafficengine/mapabc/traffictile?v=1.0&t=1&x={x}&y={y}&z={z}&&t="+new Date().getTime();break}default:s=e.url;break}(e[i(t._0x3ec5a0)]||e.headers||e.queryParameters)&&(s=getUrlResource({url:s.replace("{s}","1"),proxy:e.proxy,headers:e.headers,queryParameters:e.queryParameters})),super({subdomains:["1","2","3","4"],maximumLevel:18,...e,url:s})}}const EARTH_RADIUS=637099681e-2,MC_BAND=[1289059486e-2,836237787e-2,5591021,348198983e-2,167804312e-2,0],LL_BAND=[75,60,45,30,15,0],MC2LL=[[1410526172116255e-23,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,173379812e-1],[-7435856389565537e-24,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,1026014486e-2],[-3030883460898826e-23,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,685681737e-2],[-1981981304930552e-23,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,448277706e-2],[309191371068437e-23,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,25551644e-1],[2890871144776878e-24,8983055095805407e-21,-3068298e-14,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],LL2MC=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,6477955746671607e-7,-4082003173641316e-6,1077490566351142e-5,-1517187553151559e-5,1205306533862167e-5,-5124939663577472e-6,9133119359512032e-7,67.5],[.00337398766765,111320.7020202162,4481351045890365e-9,-2339375119931662e-8,7968221547186455e-8,-1159649932797253e-7,9723671115602145e-8,-4366194633752821e-8,8477230501135234e-9,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837749470245e-9,992013.7397791013,-122195221711287e-8,1340652697009075e-9,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758690035394e-9,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]];class BaiduMercatorProjection{constructor(){this.isWgs84=![]}[_0x5e32ae(2611)](e,t){const i=_0x5e32ae;if(!e||!t||(e=this.convertMC2LL(e),!e))return 0;const s=this.toRadians(e[i(3411)]),n=this.toRadians(e[i(448)]);if(t=this.convertMC2LL(t),!t)return 0;const o=this[i(1567)](t.lng),c=this.toRadians(t.lat);return this.getDistance(s,o,n,c)}getDistanceByLL(e,t){const i={_0x2d58a3:448,_0x356274:3411},s=_0x5e32ae;if(!e||!t)return 0;e.lng=this.getLoop(e[s(3411)],-180,180),e[s(i._0x2d58a3)]=this.getRange(e.lat,-74,74),t[s(i._0x356274)]=this.getLoop(t.lng,-180,180),t.lat=this.getRange(t.lat,-74,74);const n=this.toRadians(e.lng),o=this.toRadians(e.lat),c=this.toRadians(t.lng),_=this.toRadians(t.lat);return this.getDistance(n,c,o,_)}convertMC2LL(e){const t={_0x563721:448,_0x1fa06f:2023},i=_0x5e32ae;if(!e)return{lng:0,lat:0};let s={};if(this[i(1002)]){s.lng=e.lng/2003750834e-2*180;const c=e.lat/2003750834e-2*180;return s[i(t._0x563721)]=180/Math.PI*(2*Math.atan(Math[i(t._0x1fa06f)](c*Math.PI/180))-Math.PI/2),{lng:s[i(3411)].toFixed(6),lat:s.lat.toFixed(6)}}const n={lng:Math.abs(e.lng),lat:Math[i(3926)](e.lat)};let o;for(let c=0;c<MC_BAND[i(3402)];c++)if(n.lat>=MC_BAND[c]){o=MC2LL[c];break}return s=this.convertor(e,o),{lng:s.lng.toFixed(6),lat:s.lat[i(1029)](6)}}convertLL2MC(e){const t={_0x55dd7b:448,_0x170ee0:442,_0x170b5b:1389,_0x2fe11b:3402},i=_0x5e32ae;if(!e)return{lng:0,lat:0};if(e.lng>180||e.lng<-180||e.lat>90||e[i(t._0x55dd7b)]<-90)return e;if(this[i(1002)]){const c={};c.lng=e[i(3411)]*Math.PI/180*6378137;const l=e.lat*Math.PI/180;return c[i(t._0x55dd7b)]=6378137/2*Math.log((1+Math.sin(l))/(1-Math[i(t._0x170ee0)](l))),{lng:parseFloat(c.lng.toFixed(2)),lat:parseFloat(c.lat.toFixed(2))}}e.lng=this[i(3705)](e.lng,-180,180),e.lat=this[i(t._0x170b5b)](e.lat,-74,74);const s={lng:e.lng,lat:e.lat};let n;for(let c=0;c<LL_BAND[i(t._0x2fe11b)];c++)if(s[i(t._0x55dd7b)]>=LL_BAND[c]){n=LL2MC[c];break}if(!n){for(let c=0;c<LL_BAND.length;c++)if(s.lat<=-LL_BAND[c]){n=LL2MC[c];break}}const o=this.convertor(e,n);return{lng:parseFloat(o.lng[i(1029)](2)),lat:parseFloat(o.lat.toFixed(2))}}[_0x5e32ae(1847)](e,t){const i=_0x5e32ae;if(!e||!t)return{lng:0,lat:0};let s=t[0]+t[1]*Math[i(3926)](e.lng);const n=Math.abs(e[i(448)])/t[9];let o=t[2]+t[3]*n+t[4]*n*n+t[5]*n*n*n+t[6]*n*n*n*n+t[7]*n*n*n*n*n+t[8]*n*n*n*n*n*n;return s*=e[i(3411)]<0?-1:1,o*=e.lat<0?-1:1,{lng:s,lat:o}}getDistance(e,t,i,s){const n={_0x3cf8be:442,_0x31ce14:1784},o=_0x5e32ae;return EARTH_RADIUS*Math[o(4281)](Math.sin(i)*Math[o(n._0x3cf8be)](s)+Math[o(n._0x31ce14)](i)*Math[o(1784)](s)*Math.cos(t-e))}toRadians(e){return Math.PI*e/180}toDegrees(e){return 180*e/Math.PI}[_0x5e32ae(1389)](e,t,i){return t!=null&&(e=Math.max(e,t)),i!=null&&(e=Math.min(e,i)),e}getLoop(e,t,i){for(;e>i;)e-=i-t;for(;e<t;)e+=i-t;return e}[_0x5e32ae(1748)](e){return this.convertLL2MC(e)}lngLatToPoint(e){const t=this.convertLL2MC(e);return{x:t.lng,y:t.lat}}[_0x5e32ae(1685)](e){return this.convertMC2LL(e)}pointToLngLat(e){const t={lng:e.x,lat:e.y};return this.convertMC2LL(t)}pointToPixel(e,t,i,s){const n={_0x53fdfd:1331,_0x53d3c7:3411,_0x4d9003:4005},o=_0x5e32ae;if(!e)return{x:0,y:0};e=this.lngLatToMercator(e);const c=this.getZoomUnits(t),_=Math[o(n._0x53fdfd)]((e.lng-i[o(n._0x53d3c7)])/c+s[o(n._0x4d9003)]/2),l=Math.round((i.lat-e.lat)/c+s.height/2);return{x:_,y:l}}pixelToPoint(e,t,i,s){const n={_0x2ffa04:3411},o=_0x5e32ae;if(!e)return{lng:0,lat:0};const c=this.getZoomUnits(t),_=i[o(n._0x2ffa04)]+c*(e.x-s[o(4005)]/2),l=i.lat-c*(e.y-s.height/2),h={lng:_,lat:l};return this.mercatorToLngLat(h)}[_0x5e32ae(2729)](e){return Math[_0x5e32ae({_0x20c759:3484}._0x20c759)](2,18-e)}}class BaiduMercatorTilingScheme extends Cesium__namespace.WebMercatorTilingScheme{constructor(e){const t={_0x4c2c4f:1362},i={_0x3fd5f9:1685},s={_0x1b06e0:1286,_0x18f329:1193},n=_0x5e32ae;super(e);const o=e.mapChinaCRS||ChinaCRS.WGS84,c=ChinaCRS.BAIDU,_=getTransFun(o,c),l=getTransFun(c,o),h=new BaiduMercatorProjection;this[n(t._0x4c2c4f)].project=function(f,m){const g=n;return m=[Cesium__namespace[g(s._0x1b06e0)].toDegrees(f[g(1640)]),Cesium__namespace.Math[g(1984)](f.latitude)],_&&(m=_(m)),m[0]=Math[g(1193)](m[0],180),m[0]=Math.max(m[0],-180),m[1]=Math[g(s._0x18f329)](m[1],85.05112877980659),m[1]=Math.max(m[1],-85.05112877980659),m=h[g(4087)]({lng:m[0],lat:m[1]}),new Cesium__namespace.Cartesian2(m.x,m.y)},this._projection.unproject=function(f,m){const g=n;return m=h[g(i._0x3fd5f9)]({lng:f.x,lat:f.y}),m=[m.lng,m.lat],l&&(m=l(m)),new Cesium__namespace[g(3026)](Cesium__namespace.Math.toRadians(m[0]),Cesium__namespace.Math.toRadians(m[1]))},this[n(1694)]=e.resolutions||[]}tileXYToNativeRectangle(e,t,i,s){const n=_0x5e32ae,o=this[n(1694)][i],c=e*o,_=(e+1)*o,l=((t=-t)+1)*o,h=t*o;return Cesium__namespace.defined(s)?(s.west=c,s.south=h,s[n(1189)]=_,s.north=l,s):new Cesium__namespace.Rectangle(c,h,_,l)}positionToTileXY(e,t,i){const s={_0x394d54:1382},n=_0x5e32ae,o=this._rectangle;if(!Cesium__namespace[n(3324)][n(3068)](o,e))return;const c=this._projection,_=c.project(e);if(!Cesium__namespace.defined(_))return;const l=this.resolutions[t],h=Math[n(s._0x394d54)](_.x/l),f=-Math.floor(_.y/l);return Cesium__namespace.defined(i)?(i.x=h,i.y=f,i):new Cesium__namespace.Cartesian2(h,f)}}class BaiduImageryProvider{constructor(e={}){const t={_0x3f57d6:796,_0x4fa749:577,_0x3badfc:3946,_0x576990:3541,_0x2fdc43:736,_0x4ef2c2:1376,_0x57df7d:1922,_0x34dc4b:4188,_0x3f40af:747,_0x15734e:1666},i=_0x5e32ae;let s;switch(e.layer){case"vec":s="https://maponline{s}.bdimg.com/tile/?qt=vtile&x={x}&y={y}&z={z}&styles="+(e.bigfont?"ph":"pl")+"&scaler=2&udt=&from=jsapi2_0";break;case i(427):s="https://maponline{s}.bdimg.com/starpic/{s}?u={mars3d_u}",e.customTags=e.customTags||{},e[i(t._0x3f57d6)].mars3d_u=(o,c,_,l)=>{const h=i;return"x="+c+";y="+-_+h(615)+l+";v=009;type=sate"},e[i(t._0x4fa749)]={...e.queryParameters||{},qt:"satepc",app:i(929),udt:"20210830",fm:"46",v:"009"};break;case i(t._0x3badfc):s="http://online{s}.map.bdimg.com/tile/?qt=tile&x={x}&y={y}&z={z}&styles="+(e.bigfont?"sh":"sl")+"&v=020";break;case i(t._0x576990):e.style=e[i(4114)]||"midnight",s="http://api{s}.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&scale=1&customid="+e.style;break;case"time":s=i(3240)+new Date().getTime()+"&label="+(e[i(t._0x2fdc43)]||i(1098))+"&v=017";break;case i(t._0x4ef2c2):s=i(t._0x57df7d);break;default:s=e.url;break}this.options=e,this._resource=getUrlResource({...e,url:s}),this._tags=Cesium__namespace.combine(tags,this.options.customTags),this._subdomains=["0","1","2","3"],this._tileWidth=256,this._tileHeight=256,this[i(t._0x34dc4b)]=18;const n=[];for(let o=0;o<19;o++)n[o]=256*Math.pow(2,18-o);this._tilingScheme=new BaiduMercatorTilingScheme({resolutions:n,rectangleSouthwestInMeters:new Cesium__namespace[i(2497)](-2003772637e-2,-1247410417e-2),rectangleNortheastInMeters:new Cesium__namespace[i(2497)](2003772637e-2,1247410417e-2),mapChinaCRS:e[i(1851)]}),this._rectangle=this._tilingScheme[i(1323)],this._readyPromise=Cesium__namespace[i(3804)](),this[i(t._0x3f40af)]=new Cesium__namespace[i(2766)],this[i(t._0x15734e)]=!![],this._readyPromise.resolve(!![])}get[_0x5e32ae(1221)](){var e;return(e=this._resource)===null||e===void 0?void 0:e.url}get[_0x5e32ae(2994)](){return this._tileWidth}get[_0x5e32ae(3237)](){return this._tileHeight}get maximumLevel(){return this._maximumLevel}get[_0x5e32ae(3024)](){return 0}get tilingScheme(){return this._tilingScheme}get rectangle(){return this._rectangle}get[_0x5e32ae(1545)](){return this._ready}get[_0x5e32ae(2355)](){return this._readyPromise.promise}get[_0x5e32ae(2536)](){return this[_0x5e32ae(747)]}get credit(){return this[_0x5e32ae(2108)]}get[_0x5e32ae(1068)](){return!![]}getTileCredits(e,t,i){}requestImage(e,t,i,s){const n={_0x12a5bf:3700,_0x40669b:515},o=_0x5e32ae,c=this[o(n._0x12a5bf)],_=c.getUrlComponent(!![]),l=this._tags,h={},f=_.match(templateRegex);return Cesium__namespace[o(n._0x40669b)](f)&&f.forEach(m=>{const g=m.substring(1,m.length-1);Cesium__namespace.defined(l[g])&&(h[g]=l[g](this,e,t,i))}),c.getDerivedResource({request:s,templateValues:h}).fetchImage({preferImageBitmap:!![],flipY:!![]})}}const templateRegex=/{[^}]+}/g,tags={x:xTag,y:yTag,reverseY:reverseYTag,z:zTag,s:sTag};function xTag(r,e,t,i){return e}function yTag(r,e,t,i){return-t}function reverseYTag(r,e,t,i){const s={_0x30d64e:3454},n=_0x5e32ae;return r.tilingScheme[n(s._0x30d64e)](i)-t-1}function zTag(r,e,t,i){return i}function sTag(r,e,t,i){const s=_0x5e32ae,n=(e+t+i)%r._subdomains.length;return r[s(3655)][n]}class TencentImageryProvider extends XyzImageryProvider$1{constructor(e={}){const t={_0x23857c:2902,_0x3565f0:1221,_0x2358a8:2579,_0x5b0e66:796,_0x8121df:1221,_0x49f4f0:4114,_0x5b39da:2550},i=_0x5e32ae;switch(e.layer){case i(t._0x23857c):e[i(t._0x3565f0)]=i(t._0x2358a8);break;case"img_d":e.url="https://p{s}.map.gtimg.com/sateTiles/{z}/{sx}/{sy}/{x}_{reverseY}.jpg?version=400",e[i(t._0x5b0e66)]={sx:(s,n,o,c)=>n>>4,sy:(s,n,o,c)=>(1<<c)-o>>4};break;case"img_z":e[i(t._0x8121df)]="https://rt{s}.map.gtimg.com/tile?z={z}&x={x}&y={reverseY}&styleid=2&scene=0";break;case"custom":e.style=e[i(t._0x49f4f0)]||"4",e[i(1221)]="https://rt{s}.map.gtimg.com/tile?z={z}&x={x}&y={reverseY}&styleid="+e.style+"&scene=0";break}e[i(t._0x5b39da)]=e.subdomains??["0","1","2"],super(e)}}class GoogleImageryProvider extends XyzImageryProvider$1{constructor(e={}){const t={_0x349a00:2458,_0x532b8a:3946,_0x2802d2:1221,_0x4da0b7:1525},i=_0x5e32ae;let s;if(e.chinaCRS===ChinaCRS.WGS84)s=e.url||"https://gac-geo.googlecnapps.cn/maps/vt?lyrs=s&gl=us&x={x}&y={y}&z={z}";else switch(e.layer){case"vec":s=i(t._0x349a00);break;case"img_d":s="https://gac-geo.googlecnapps.cn/maps/vt?lyrs=s&gl=CN&x={x}&y={y}&z={z}";break;case i(t._0x532b8a):s="https://gac-geo.googlecnapps.cn/maps/vt?lyrs=h&gl=CN&x={x}&y={y}&z={z}";break;case"ter":s=i(2917);break;default:s=e[i(t._0x2802d2)];break}(e.proxy||e.headers||e.queryParameters)&&(s=getUrlResource({url:s[i(t._0x4da0b7)]("{s}","1"),proxy:e.proxy,headers:e.headers,queryParameters:e.queryParameters})),super({subdomains:["1","2","3"],maximumLevel:20,...e,url:s})}}class OsmImageryProvider extends XyzImageryProvider$1{constructor(e={}){const t=_0x5e32ae;let i=t(3864);(e.proxy||e[t(771)]||e.queryParameters)&&(i=getUrlResource({url:i[t(1525)](t(2787),"a"),proxy:e.proxy,headers:e.headers,queryParameters:e.queryParameters})),super({subdomains:t(2074),maximumLevel:18,...e,url:i})}}class EmptyImageryProvider extends Cesium__namespace[_0x5e32ae(2064)]{constructor(e={}){const t={_0x3660a3:3798,_0x3fa4f0:745,_0x20e886:497,_0x44709a:3875,_0x2effb4:2854,_0xd371ea:1323},i=_0x5e32ae;super(e),this[i(t._0x3660a3)]=e,this[i(t._0x3fa4f0)]=e.minimumLevel??0,this._maximumLevel=e.maximumLevel,this._tilingScheme=e.tilingScheme??new Cesium__namespace[i(t._0x20e886)]({ellipsoid:e[i(t._0x44709a)]}),e[i(1323)]?this[i(t._0x2effb4)]=Cesium__namespace.Rectangle.intersection(e.rectangle,this._tilingScheme[i(t._0xd371ea)]):this._rectangle=this._tilingScheme.rectangle,this.options=e}[_0x5e32ae(4304)](e,t,i){const s={_0x140a19:4005,_0x1c8f12:3865,_0x110a2a:4188,_0x4084f2:2771,_0x479c18:1296,_0x5d091f:4257,_0x1393ee:602};return new Promise((n,o)=>{const c=_0x5210,_=document.createElement("canvas");if(_[c(s._0x140a19)]=256,_[c(s._0x1c8f12)]=256,i<this[c(745)]||Cesium__namespace.defined(this[c(s._0x110a2a)])&&i>this._maximumLevel)return _;if(this.options[c(s._0x4084f2)]){const l=_[c(1494)]("2d",{willReadFrequently:!![]});l[c(2129)]=c(s._0x479c18),l.lineWidth=2,l[c(3741)](1,1,255,255);const h="L"+i+"X"+e+"Y"+t;l[c(3968)]="bold 25px Arial",l[c(s._0x5d091f)]="center",l.fillStyle=c(s._0x1393ee),l.fillText(h,127,127),l.fillStyle=c(1296),l.fillText(h,124,124)}n(_)})}}var index$5={__proto__:null,XyzImageryProvider:XyzImageryProvider$1,TdtImageryProvider,GaodeImageryProvider,BaiduImageryProvider,TencentImageryProvider,GoogleImageryProvider,OsmImageryProvider,EmptyImageryProvider};class GroupLayer extends BaseGraphicLayer{constructor(e={}){const t=_0x5e32ae;super(e),this[t(1188)]=[]}get layer(){return this._arrLayer}get arrLayer(){return this[_0x5e32ae({_0x570f9c:1188}._0x570f9c)]}get hasEmptyGroup(){return this.length===0}get[_0x5e32ae(546)](){return this.length>0}get length(){const e={_0x1cc9c4:4310,_0x47a55f:1188},t=_0x5e32ae;var i,s;if(((i=this.options)===null||i===void 0||(s=i[t(e._0x1cc9c4)])===null||s===void 0?void 0:s.length)>0)return this.options.layers.length;var n;return((n=this[t(e._0x47a55f)])===null||n===void 0?void 0:n.length)||0}get hasOpacity(){const e=_0x5e32ae;return this._arrLayer[e(3402)]===0?![]:this._arrLayer[0].hasOpacity}get hasZIndex(){const e=_0x5e32ae;return this._arrLayer[e(3402)]===0?![]:this._arrLayer[0].hasZIndex}get[_0x5e32ae(1262)](){return this[_0x5e32ae(3798)].zIndex}set[_0x5e32ae(1262)](e){const t={_0x589102:1262};this.options.zIndex=e,this.eachLayer(i=>{const s=_0x5210;i.hasZIndex&&(i[s(t._0x589102)]=e)},this)}[_0x5e32ae(3961)](e){this[_0x5e32ae(2886)](i=>{i.show=e},this)}_mountedHook(){const e={_0x54c8cb:3798},t=_0x5e32ae;super._mountedHook();const i=this[t(e._0x54c8cb)].layers;if(i&&i.length>0)for(let s=0;s<i[t(3402)];s++){const n=i[s];n.eventParent=this,n.private=this.isPrivate;const o=create$2(n,this[t(3798)].templateValues);o&&this.addLayer(o)}}_addedHook(){const e={_0x3b95dd:3759,_0x5a0adf:2355},t=_0x5e32ae,i=[];this[t(2886)](s=>{const n=t;s.eventParent=this,this._map[n(2965)](s),i[n(e._0x3b95dd)](s[n(e._0x5a0adf)])},this),Promise.all(i).then(s=>{this._readyPromise.resolve(this)})}_removedHook(){this.removeMapChilds()}[_0x5e32ae(1776)](){const e={_0x3df661:1890};this.eachLayer(t=>{this[_0x5210(e._0x3df661)].addLayer(t)},this)}removeMapChilds(){this[_0x5e32ae(2886)](t=>{this._map.removeLayer(t)},this)}addLayer(e){const t=_0x5e32ae;return e[t(3476)]&&(e.removeEventParent(e.parent),e.parent=null),e.pid=this.id,e.parent=this,e.options.eventParent=this,this[t(1188)][t(3759)](e),this.isAdded&&!e[t(3126)]?this._map[t(2965)](e):(e.removeEventParent(this._map),e.addEventParent(this)),this}[_0x5e32ae(2642)](e){const t={_0x51e5bf:2642},i=_0x5e32ae;return e.parent=null,e.removeEventParent(this),removeArrayItem(this._arrLayer,e),this._map&&e.isAdded&&this._map[i(t._0x51e5bf)](e),this}[_0x5e32ae(2886)](e,t){const i={_0x205640:1188,_0x42ab26:2500},s=_0x5e32ae;if(this._arrLayer)return this[s(i._0x205640)][s(i._0x42ab26)](n=>{e.call(t,n)}),this}[_0x5e32ae(2751)](){return this[_0x5e32ae(1188)]}getInMapChilds(){const e={_0x3d799d:1188},t=_0x5e32ae,i=this._arrLayer||[];return this[t(1890)].eachLayer(s=>{const n=t;s.pid===this.id&&this[n(e._0x3d799d)][n(2316)](s)===-1&&i[n(3759)](s)},this),i}getLayerById(e){const t=_0x5e32ae,i=this[t(1188)];if(!(!this._arrLayer||this._arrLayer.length===0))for(let s=0,n=i.length;s<n;s++){const o=i[s];if(o.id===e)return o}}[_0x5e32ae(4314)](e){const t={_0x36a10a:3402,_0x32bba8:1188},i=_0x5e32ae;if(!(!this._arrLayer||this._arrLayer.length===0))for(let s=0;s<this._arrLayer[i(t._0x36a10a)];s++){const n=this[i(t._0x32bba8)][s];if(n.name===e||n.id===e)return n}}hasLayer(e,t){const i={_0x54abfa:1188},s=_0x5e32ae;for(let n=0;n<this._arrLayer.length;n++){const o=this[s(i._0x54abfa)][n];if(!(t&&o===t)&&(o.name===e||o.id===e))return!![]}return![]}[_0x5e32ae(867)](e){const t=_0x5e32ae,i=[];this[t(2886)](s=>{const n=t;i[n(3759)](s[n(3852)]())},this),i.length>0&&(e[t(4310)]=i)}[_0x5e32ae(3879)](e){const t={_0x3a36a6:2500},i=_0x5e32ae;let s;return this[i(681)]()[i(t._0x3a36a6)](o=>{if(!o.getRectangle)return;const c=o.getRectangle();Cesium__namespace.defined(c)&&(s?s=Cesium__namespace.Rectangle.union(c,s):s=c)},this),e?formatRectangle(s):s}setOpacity(e){this.eachLayer(t=>{t.opacity=e},this)}toTop(){this[_0x5e32ae({_0xf2d9fd:2886}._0xf2d9fd)](i=>{i.toTop()},this)}[_0x5e32ae(2431)](){const e=_0x5e32ae,t=this._arrLayer;for(let i=t.length-1;i>=0;i--)t[i][e(2431)]()}[_0x5e32ae(757)](e){const t={_0x165eab:757},i=_0x5e32ae;this.eachLayer(s=>{s!=null&&s.destroy&&s.destroy(e)},this),super[i(t._0x165eab)](e)}}register$2(_0x5e32ae(3947),GroupLayer);class BaseTileLayer extends BaseLayer{constructor(e={}){const t={_0x27ea60:3353},i=_0x5e32ae;super(e),this[i(t._0x27ea60)](e),this[i(2847)]=!![]}get[_0x5e32ae(1538)](){return this._imageryLayer}get imageryProvider(){const e=_0x5e32ae;var t;return(t=this._imageryLayer)===null||t===void 0?void 0:t[e(3715)]}get crs(){return this[_0x5e32ae({_0x415248:3798}._0x415248)].crs||CRS.EPSG3857}get alpha(){return this[_0x5e32ae({_0x72338b:3776}._0x72338b)]}set[_0x5e32ae(1202)](e){const t={_0x9daaa9:3776},i=_0x5e32ae;this[i(t._0x9daaa9)]=e}get[_0x5e32ae(1310)](){const e={_0x5c50e5:3798},t=_0x5e32ae;var i;return this[t(e._0x5c50e5)].brightness||((i=this._imageryLayer)===null||i===void 0?void 0:i.brightness)}set brightness(e){const t={_0x451131:1310},i=_0x5e32ae;this.options[i(t._0x451131)]=e,this._imageryLayer!=null&&(this._imageryLayer.brightness=e)}get contrast(){const e={_0xa2070:3798},t=_0x5e32ae;var i;return this[t(e._0xa2070)].contrast||((i=this._imageryLayer)===null||i===void 0?void 0:i.contrast)}set contrast(e){const t={_0x58a803:619,_0x28713d:3859},i=_0x5e32ae;this.options.contrast=e,this._imageryLayer!=null&&(this[i(t._0x58a803)][i(t._0x28713d)]=e)}get hue(){const e={_0xa9c116:4207},t=_0x5e32ae;var i;return this[t(3798)][t(e._0xa9c116)]||((i=this._imageryLayer)===null||i===void 0?void 0:i.hue)}set hue(e){const t={_0x3b5e2e:4207},i=_0x5e32ae;this.options[i(t._0x3b5e2e)]=e,this[i(619)]!=null&&(this._imageryLayer.hue=e)}get saturation(){const e=_0x5e32ae;var t;return this[e(3798)].saturation||((t=this[e(619)])===null||t===void 0?void 0:t.saturation)}set[_0x5e32ae(805)](e){this.options.saturation=e,this._imageryLayer!=null&&(this._imageryLayer.saturation=e)}get[_0x5e32ae(1052)](){const e={_0xe98e00:3798,_0x44d2c4:1052},t=_0x5e32ae;var i;return this[t(e._0xe98e00)][t(e._0x44d2c4)]||((i=this._imageryLayer)===null||i===void 0?void 0:i[t(e._0x44d2c4)])}set[_0x5e32ae(1052)](e){this.options.gamma=e,this._imageryLayer!=null&&(this._imageryLayer.gamma=e)}get hasZIndex(){return!![]}get zIndex(){return this.options.zIndex}set zIndex(e){const t={_0x470143:753,_0x37bb04:1262},i=_0x5e32ae;if(this.options.zIndex=e,this[i(619)]==null||e==null)return;this[i(1890)].imageryLayers.raiseToTop(this._imageryLayer);const s=this._map[i(t._0x470143)][i(1066)];for(let n=s.length-1;n>=0;n--){const o=s[n];if(o===this._imageryLayer)continue;const c=o[i(3157)];c&&c[i(t._0x37bb04)]&&e<c.zIndex&&this._map.imageryLayers.lower(this._imageryLayer)}}get rectangle(){const e={_0x15a757:3715},t=_0x5e32ae;var i,s;return this._rectangle?this._rectangle:(i=this._imageryLayer)!==null&&i!==void 0&&(s=i.imageryProvider)!==null&&s!==void 0&&s[t(1323)]?this._imageryLayer[t(e._0x15a757)].rectangle:null}set rectangle(e){const t={_0x498b07:1323},i=_0x5e32ae;if(e){if(e instanceof Cesium__namespace[i(3324)]){var s,n;this._rectangle=e,this.options[i(t._0x498b07)]=formatRectangle(this._rectangle),(s=this._imageryLayer)!==null&&s!==void 0&&(n=s.imageryProvider)!==null&&n!==void 0&&n.rectangle&&(this[i(619)][i(3715)]._rectangle=this[i(2854)])}}else this._rectangle=void 0,delete this.options.rectangle,this[i(3603)]()}[_0x5e32ae(3353)](e){const t={_0x44df6f:1323,_0x8ee973:2498,_0x3ef44b:1174,_0x39c493:2854},i=_0x5e32ae;Cesium__namespace.defined(e[i(1323)])?Cesium__namespace.defined(e.rectangle.xmin)&&Cesium__namespace.defined(e.rectangle.xmax)&&Cesium__namespace.defined(e.rectangle.ymin)&&Cesium__namespace.defined(e.rectangle.ymax)?this[i(2854)]=Cesium__namespace.Rectangle.fromDegrees(e[i(t._0x44df6f)].xmin,e[i(1323)][i(t._0x8ee973)],e.rectangle.xmax,e.rectangle[i(3081)]):e[i(1323)]instanceof Cesium__namespace[i(3324)]?this._rectangle=e[i(t._0x44df6f)]:delete e.rectangle:Cesium__namespace.defined(e[i(1174)])&&e[i(t._0x3ef44b)].length&&e.bbox[i(3402)]===4?this._rectangle=Cesium__namespace.Rectangle.fromDegrees(e.bbox[0],e.bbox[1],e.bbox[2],e.bbox[3]):this[i(t._0x39c493)]=void 0}_setOptionsHook(e,t){this._setRectangleByOptions(e),this.reload()}async[_0x5e32ae(1646)](e){return new Cesium__namespace.UrlTemplateImageryProvider(e)}_addedHook(){const e={_0x527905:461,_0x5916af:1890,_0x51dc4e:3776,_0x9ccb48:619,_0x5eff5f:4210,_0x84719:2266,_0x30f914:3798,_0x3c64b5:1483,_0x5f1a50:3798,_0x5367c6:1483,_0x2852c7:1893,_0xad3df0:2704},t={_0x3a9358:1404},i=_0x5e32ae;var s,n,o;this.options.highlight&&(this[i(3798)][i(e._0x527905)]=!![]);const c=this[i(1646)]({...this.options,rectangle:this.rectangle,mapChinaCRS:this[i(e._0x5916af)][i(3005)]});if(!Cesium__namespace[i(515)](c))return;const _=this.options,l={show:this.show,alpha:this[i(e._0x51dc4e)],..._,rectangle:this[i(1323)],marsOptions:{onAddTile:h=>{const f=i,m=this[f(4297)](h);this.fire(EventType.addTile,m)},onAddTileSuccess:h=>{const f=i,m=this[f(4297)](h);this[f(t._0x3a9358)](EventType.addTileSuccess,m)},onAddTileError:h=>{const f=this._getTileEventParams(h);this.fire(EventType.addTileError,f)},onRemoveTile:h=>{const f=i,m=this._getTileEventParams(h);this.fire(EventType[f(1634)],m)}}};this[i(e._0x9ccb48)]=Cesium__namespace[i(e._0x5eff5f)].fromProviderAsync(c,l),this._imageryLayer[i(e._0x84719)]=this.id,this._imageryLayer._mars3d_config=this.options,this.options.clampToTileset&&this._map.imageryLayersForClamp&&l.crs!==CRS.EPSG3857?this._map.imageryLayersForClamp.add(this[i(e._0x9ccb48)]):this._map.imageryLayers[i(4084)](this._imageryLayer),this[i(e._0x30f914)].zIndex&&(this[i(1262)]=this.options[i(1262)]),this.options[i(e._0x3c64b5)]?(this.options.enablePickFeatures=!![],this[i(3824)](this.options[i(1483)])):(s=this[i(e._0x5f1a50)].symbol)!==null&&s!==void 0&&(n=s.styleOptions)!==null&&n!==void 0&&n[i(e._0x5367c6)]&&this.bindHighlight(this[i(3798)].symbol[i(e._0x2852c7)][i(1483)]),(o=this.options)!==null&&o!==void 0&&o.flyTo&&this[i(e._0xad3df0)](),this._readyPromise.resolve(this),this.fire(EventType.load,{},!![])}_getTileEventParams(e){return{x:e.x,y:e.y,level:e.level,extent:formatRectangle(e.rectangle)}}_removedHook(){const e=_0x5e32ae;var t,i;this.unbindHighlight(),(t=this._imageryLayer)!==null&&t!==void 0&&(i=t[e(3715)])!==null&&i!==void 0&&i.destroy&&this[e(619)].imageryProvider.destroy(),this._map.imageryLayers.remove(this._imageryLayer,!![]),this._imageryLayer=null}reload(){const e={_0x5656ab:4158},t=_0x5e32ae,i=this[t(3798)].flyTo??![];this[t(619)]&&this._removedHook(),this.isAdded&&(this.options.flyTo=![],this[t(2211)](EventType.load,()=>{this.options.flyTo=i}),this[t(e._0x5656ab)]())}setOpacity(e){this[_0x5e32ae(619)]&&(this._imageryLayer.alpha=e)}toTop(){if(this[_0x5e32ae(1890)])return this._map.imageryLayers.raiseToTop(this._imageryLayer)}[_0x5e32ae(2431)](){if(this._map)return this._map.imageryLayers.lowerToBottom(this._imageryLayer)}flyTo(e={}){const t={_0x108bce:3798,_0x7e2db7:1890,_0x3f3408:515,_0x2d4939:2661,_0x2f56e9:1189,_0x3766b3:2792,_0x91cf63:3576},i=_0x5e32ae;if(!this._map||!this[i(619)])return Promise.resolve(![]);if(this._map.cancelFlyTo(),this[i(3798)].flyToOptions&&(e={...this.options.flyToOptions,...e}),this.options.center)return this[i(1890)].setCameraView(this[i(t._0x108bce)].center,e);if(this.options.extent)return this[i(t._0x7e2db7)][i(3460)](this.options.extent,e);{const s=this.rectangle;if(Cesium__namespace[i(t._0x3f3408)](s)&&s[i(t._0x2d4939)]&&!s[i(t._0x2d4939)](Cesium__namespace.Rectangle.MAX_VALUE)&&s.west>0&&s.south>0&&s[i(t._0x2f56e9)]>0&&s.north>0)return this._map[i(t._0x3766b3)][i(t._0x91cf63)]({...e,destination:s})}return Promise[i(4056)](![])}bindHighlight(e){this.unbindHighlight(),this._highlightOptions=e,this.on(EventType.click,this._highlight_mouseEventHandler,this)}[_0x5e32ae(3021)](){const e={_0x296891:4306,_0x8d3287:3213},t=_0x5e32ae;this[t(e._0x296891)]&&(this.off(EventType.click,this[t(e._0x8d3287)],this),this._map.closeHighlight(),this._highlightOptions=null)}[_0x5e32ae(3213)](e){const t={_0x3ac01e:4180},i=_0x5e32ae;this[i(1890)].closeHighlight();const s=e.graphics;s&&(this[i(t._0x3ac01e)]=s,this._map.openHighlight(this,this._highlightOptions,e))}_highlight_mouseOutHandler(e){const t=_0x5e32ae;this[t(1890)][t(567)]()}openHighlight(e,t=!![]){const i={_0x2e08b8:567},s=_0x5e32ae;t&&(this[s(1890)][s(i._0x2e08b8)](),this[s(1890)].last_highlighGraphic=this);const n=e||this[s(4306)];this._last_graphicsOptions&&n&&(!this[s(993)]&&(this[s(993)]=new GraphicLayer({name:"高亮对象图层",private:!![]}),this._map.addLayer(this._graphicLayer)),this._graphicLayer.addGraphic(this._last_graphicsOptions),this.fire(EventType.highlightOpen,{},!![]))}closeHighlight(){const e=_0x5e32ae;var t;!this[e(993)]||((t=this._map)===null||t===void 0?void 0:t.last_highlighGraphic)!==this||(this._graphicLayer[e(1387)](),this._map._clearLastHighlight(),this.fire(EventType.highlightClose,{},!![]))}}class TerrainLayer extends BaseLayer{_showHook(e){e?this._addedHook():this._removedHook()}[_0x5e32ae(3118)](){this._terrainProviderPromise=createTerrainProvider(this._getTerrainOptions())}_getTerrainOptions(){const e=_0x5e32ae;return{templateValues:this.options[e(2645)],...this.options.terrain}}_addedHook(){this.show&&this._updateTerrainProvider()}_removedHook(){this._map.terrainProvider=getNoTerrainProvider()}_setOptionsHook(e,t){this._terrainProviderPromise=createTerrainProvider(this._getTerrainOptions()),this._updateTerrainProvider()}_updateTerrainProvider(){const e={_0x30a680:1220,_0x16155c:3352,_0x147ea5:3352,_0x5e4018:3394},t=_0x5e32ae,i=n=>{const o=_0x5210;this._map.off(EventType.terrainLoadSuccess,i),this._map.off(EventType.terrainLoadError,s),this[o(3352)].resolve(this),this.fire(EventType.load,{terrain:this[o(1890)].terrainProvider})},s=n=>{const o=_0x5210;var c;this._map.off(EventType.terrainLoadSuccess,i),this._map[o(e._0x30a680)](EventType.terrainLoadError,s),(c=this[o(e._0x16155c)])!==null&&c!==void 0&&c.reject&&this[o(e._0x147ea5)][o(e._0x5e4018)](n)};this[t(1890)][t(2211)](EventType.terrainLoadSuccess,i),this[t(1890)].once(EventType.terrainLoadError,s),this._terrainProviderPromise.then(i),this._map.terrainProvider=this._terrainProviderPromise}}register$2(_0x5e32ae(1028),TerrainLayer);class ArcGisCacheLayer extends BaseTileLayer{async[_0x5e32ae(1646)](e){return await createImageryProvider$j(e)}}async function createImageryProvider$j(r){const e={_0x5c2c19:1525,_0xa1b5db:796,_0x11c945:4106},t={_0x2b4f23:4130},i={_0x20202c:1895,_0x51cd28:4130},s={_0x18579c:4130},n=_0x5e32ae;r[n(1221)]=r.url[n(e._0x5c2c19)]("{x}","C{arc_x}").replace("{y}","R{arc_y}").replace("{z}",n(1468));const o=r[n(774)];return r[n(796)]=r.customTags||{},r[n(e._0xa1b5db)][n(e._0x11c945)]=function(c,_,l,h){return o?padLeft0(_.toString(16),8).toUpperCase():padLeft0(_[n(s._0x18579c)](16),8)},r.customTags.arc_y=function(c,_,l,h){return o?padLeft0(l.toString(16),8).toUpperCase():padLeft0(l.toString(16),8)},r.customTags.arc_z=function(c,_,l,h){const f=n;return o?padLeft0(h.toString(),2)[f(i._0x20202c)]():padLeft0(h[f(i._0x51cd28)](),2)},r.customTags.arc_z4490=function(c,_,l,h){const f=n;return o?padLeft0((h+1)[f(t._0x2b4f23)](),2).toUpperCase():padLeft0((h+1).toString(),2)},r=converOptions(r),new XyzImageryProvider$1(r)}ArcGisCacheLayer.createImageryProvider=createImageryProvider$j;const layerType$j="arcgis_cache";register$2(layerType$j,ArcGisCacheLayer),registerImageryProvider(layerType$j,createImageryProvider$j);class ArcGisTileLayer extends BaseTileLayer{async[_0x5e32ae(1646)](e){return await createImageryProvider$i(e)}}async function createImageryProvider$i(r){const e={_0x1bcb48:1221,_0x52917a:1221},t=_0x5e32ae;return r=converOptions(r),isString(r.url)?r.url=r[t(e._0x1bcb48)]+t(2665):r[t(e._0x52917a)]instanceof Cesium__namespace[t(4071)]&&(r.url.url=r.url.url+"/tile/{z}/{y}/{x}"),new XyzImageryProvider$1(r)}ArcGisTileLayer.createImageryProvider=createImageryProvider$i;const layerType$i="arcgis_tile";register$2(layerType$i,ArcGisTileLayer),registerImageryProvider(layerType$i,createImageryProvider$i);class ArcGisImageryProvider{constructor(e={}){const t={_0x1015c2:1190,_0x46be99:1613,_0xdd3911:461,_0x2a8d89:2641,_0x48ed81:2235,_0x56cfb6:4056},i=_0x5e32ae;this.options=e;const s=Cesium__namespace.Resource.createIfNeeded(e.url);s[i(2274)](),Cesium__namespace.defined(e[i(t._0x1015c2)])&&s[i(1725)]({token:e.token}),this._resource=s,this._tileDiscardPolicy=e.tileDiscardPolicy,this[i(1688)]=e.tileWidth??256,this._tileHeight=e.tileHeight??256,this._maximumLevel=e.maximumLevel,this._maxTileLevel=e.maxTileLevel,this._crs=e[i(t._0x46be99)],this[i(t._0xdd3911)]=e.enablePickFeatures??!![],this[i(t._0x2a8d89)]=e.usePreCachedTilesIfAvailable??!![],this._initTilingSchemeByCrs(e.crs||CRS.EPSG4326),this._errorEvent=new Cesium__namespace.Event,this._ready=![],this._readyPromise=Cesium__namespace[i(3804)](),this._useTiles?this[i(t._0x48ed81)]():(this._ready=!![],this._readyPromise[i(t._0x56cfb6)](!![]))}get url(){return this._resource._url}get[_0x5e32ae(1190)](){const e={_0x3a712b:577,_0x2048ff:1190},t=_0x5e32ae;return this[t(3700)][t(e._0x3a712b)][t(e._0x2048ff)]}get proxy(){return this._resource.proxy}get[_0x5e32ae(2994)](){return this[_0x5e32ae({_0x43ddfb:1688}._0x43ddfb)]}get tileHeight(){return this._tileHeight}get[_0x5e32ae(1398)](){return this[_0x5e32ae(4188)]}get[_0x5e32ae(3024)](){return 0}get[_0x5e32ae(901)](){return this._tilingScheme}get[_0x5e32ae(1323)](){return this._rectangle}get tileDiscardPolicy(){return this._tileDiscardPolicy}get[_0x5e32ae(2536)](){return this[_0x5e32ae({_0x40f3ca:747}._0x40f3ca)]}get ready(){return this._ready}get[_0x5e32ae(2355)](){const e=_0x5e32ae;return this._readyPromise[e(3870)]}get credit(){return this._credit}get usingPrecachedTiles(){return this[_0x5e32ae(2641)]}get hasAlphaChannel(){return!![]}get layers(){return this.options.layers}get layerDefs(){return this.options.layerDefs}[_0x5e32ae(2757)](e){const t={_0x317ffd:3732,_0x300124:3875,_0x4866ef:1323,_0x26642e:3798,_0x250fcf:1510},i=_0x5e32ae;return e===CRS[i(t._0x317ffd)]?(this._tilingScheme=this.options.tilingScheme||new Cesium__namespace.WebMercatorTilingScheme({ellipsoid:this.options[i(t._0x300124)]}),this._rectangle=this.options.rectangle??this._tilingScheme[i(t._0x4866ef)],!![]):e===CRS.EPSG4326||e===CRS.EPSG4490?(this._tilingScheme=this.options.tilingScheme||new Cesium__namespace.GeographicTilingScheme({ellipsoid:this.options[i(3875)]}),this._rectangle=this[i(t._0x26642e)].rectangle??this[i(t._0x250fcf)].rectangle,!![]):![]}_requestMetadata(){const e={_0xced43a:2450,_0x73809d:2204},t=_0x5e32ae;this._resource[t(e._0xced43a)]({queryParameters:{f:t(564)}})[t(e._0x73809d)]().then(s=>{this._metadataSuccess(s)}).catch(s=>{this._metadataFailure(s)})}_metadataSuccess(e){const t={_0x11f6b4:1058,_0x100bef:1613,_0x97858e:917,_0x6d4520:917,_0x1f690e:2497,_0x3f04e0:1323,_0x35ce88:1060,_0x1fcbec:3500,_0x39d7d0:2498,_0x8a5f2b:3081,_0x49340f:2628,_0x624836:3183,_0x4f4265:1453},i=_0x5e32ae;if(this[i(t._0x11f6b4)]=e,Cesium__namespace.defined(e.tileInfo)){this._useTiles=!![];const l=e.tileInfo;if(this[i(1688)]=l.rows,this._tileHeight=l.cols,!this[i(4188)]&&(this._maximumLevel=l.lods.length-1),!this.options.crs){var n;this._crs=getCRSByWkid((n=l.spatialReference)===null||n===void 0?void 0:n.wkid),this._useTiles=this._initTilingSchemeByCrs(this._crs)}this._useTiles&&!Cesium__namespace[i(515)](this[i(t._0x97858e)])&&(this[i(t._0x6d4520)]=new Cesium__namespace.DiscardMissingTileImagePolicy({missingImageUrl:this[i(2968)](0,0,this._maximumLevel).url,pixelsToCheck:[new Cesium__namespace.Cartesian2(0,0),new Cesium__namespace[i(t._0x1f690e)](200,20),new Cesium__namespace.Cartesian2(20,200),new Cesium__namespace.Cartesian2(80,110),new Cesium__namespace.Cartesian2(160,130)],disableCheckIfAllPixelsAreTransparent:!![]}))}else if(this._useTiles=![],!this.options[i(t._0x100bef)]){var s;this._crs=getCRSByWkid((s=e.spatialReference)===null||s===void 0?void 0:s.wkid),this[i(2757)](this._crs)}let o=e.fullExtent||e.extent;if(!this.options[i(t._0x3f04e0)]&&o){var c,_;let l=this._crs;if((c=o)!==null&&c!==void 0&&(_=c.spatialReference)!==null&&_!==void 0&&_.wkid&&(l=getCRSByWkid(o.spatialReference[i(1779)])),l){if(l!==CRS[i(t._0x35ce88)]&&l!==CRS[i(t._0x1fcbec)]){const h=proj4Trans([o.xmin,o[i(t._0x39d7d0)]],l),f=proj4Trans([o.xmax,o[i(t._0x8a5f2b)]],l);o={xmin:h[0],ymin:h[1],xmax:f[0],ymax:f[1]}}this._extent=o,o.xmin>0&&o[i(t._0x49340f)]<179&&o[i(2498)]>0&&o.ymax<85&&(this._rectangle=Cesium__namespace.Rectangle.fromDegrees(o[i(t._0x624836)],o[i(2498)],o.xmax,o.ymax))}}this._ready=!![],this._readyPromise.resolve(!![]),Cesium__namespace[i(4026)].reportSuccess?Cesium__namespace.TileProviderError.reportSuccess(this._metadataError):Cesium__namespace.TileProviderError[i(t._0x4f4265)]&&Cesium__namespace.TileProviderError[i(1453)](this._metadataError)}_metadataFailure(e){const t={_0x47594:2737,_0x133156:747,_0x2ff7f6:4026,_0x49fc3a:2900,_0x161781:2235,_0x57aa5a:3394},i=_0x5e32ae;var s;const n=i(3570)+this._resource.url+".";Cesium__namespace.TileProviderError.reportError?this._metadataError=Cesium__namespace.TileProviderError[i(t._0x47594)](this._metadataError,this,this[i(t._0x133156)],n,void 0,void 0,void 0,this[i(2235)]):Cesium__namespace[i(t._0x2ff7f6)].handleError&&(this[i(t._0x49fc3a)]=Cesium__namespace.TileProviderError[i(454)](this._metadataError,this,this._errorEvent,n,void 0,void 0,void 0,this[i(t._0x161781)])),(s=this._readyPromise)!==null&&s!==void 0&&s[i(t._0x57aa5a)]&&this._readyPromise.reject(new Cesium__namespace[i(3723)](n))}[_0x5e32ae(3520)](e,t,i){}requestImage(e,t,i,s){return Cesium__namespace.ImageryProvider.loadImage(this,this._buildImageResource(e,t,i,s))}_buildImageResource(e,t,i,s){const n={_0x37139e:2193,_0x3a0d2b:1688,_0x43b18:915,_0x5e3d75:915,_0x25ec6a:4310},o=_0x5e32ae;let c=this._useTiles;if(c&&Cesium__namespace.defined(this[o(n._0x37139e)])&&(c=i<this._maxTileLevel),c)return this._crs===CRS[o(3500)]&&(i=i+1),this._resource[o(2450)]({url:"tile/"+i+"/"+t+"/"+e,request:s});{const _=this._tilingScheme.tileXYToNativeRectangle(e,t,i),l=_.west+","+_.south+","+_.east+","+_.north,h={bbox:l,size:this[o(n._0x3a0d2b)]+","+this._tileHeight,format:"png32",transparent:!![],f:"image"};return this._tilingScheme.projection instanceof Cesium__namespace.GeographicProjection?(h.bboxSR=this[o(915)]||4326,h.imageSR=this._wkid||4326):(h.bboxSR=this[o(n._0x43b18)]||3857,h.imageSR=this[o(n._0x5e3d75)]||3857),this.layers&&(h[o(4310)]="show:"+this[o(n._0x25ec6a)]),this.layerDefs&&(h.layerDefs=this.layerDefs),this[o(3700)].getDerivedResource({url:"export",request:s,queryParameters:h})}}pickFeatures(e,t,i,s,n){const o={_0x3d32a5:1510,_0x5cf323:1189,_0x129b24:1915,_0x440278:975,_0x477c18:3757,_0x263268:629,_0x2fd152:549},c={_0x21ffe4:1652,_0x53aeac:1613,_0x1dca15:3759},_=_0x5e32ae;if(!this.enablePickFeatures)return;const l=this._tilingScheme.tileXYToNativeRectangle(e,t,i);let h,f,m;if(this[_(1510)].projection instanceof Cesium__namespace.GeographicProjection)h=Cesium__namespace.Math.toDegrees(s),f=Cesium__namespace.Math.toDegrees(n),m="4326";else{const P=this[_(o._0x3d32a5)].projection.project(new Cesium__namespace.Cartographic(s,n,0));h=P.x,f=P.y,m="3857"}let g="visible";Cesium__namespace[_(515)](this.layers)&&(g+=":"+this.layers);const C={f:"json",tolerance:2,geometryType:"esriGeometryPoint",geometry:h+","+f,mapExtent:l.west+","+l.south+","+l[_(o._0x5cf323)]+","+l.north,imageDisplay:this._tileWidth+","+this[_(o._0x129b24)]+",96",sr:m,layers:g};return Cesium__namespace.defined(this.layerDefs)&&(C[_(o._0x440278)]=this.layerDefs),this._resource.getDerivedResource({url:_(o._0x477c18),queryParameters:C})[_(o._0x263268)]()[_(o._0x2fd152)](function(P){const w=_,M=[],T=P.results;if(!Cesium__namespace[w(515)](T))return M;const L="EPSG:"+m;for(let R=0;R<T.length;++R){const D=T[R],N=new Cesium__namespace[w(c._0x21ffe4)];N[w(931)]=D,N[w(c._0x53aeac)]=L,N.name=D[w(3427)],N.properties=D.attributes,N.configureDescriptionFromProperties(D.attributes),M[w(c._0x1dca15)](N)}return M})}}function getCRSByWkid(r){const e=_0x5e32ae;switch(r){case 4326:case 4283:return CRS.EPSG4326;case 4490:return CRS.EPSG4490;case 102100:case 900913:case 3857:return CRS.EPSG3857;default:return isNumber(r)?e(2066)+r:void 0}}class ArcGisLayer extends BaseTileLayer{get crs(){const e=_0x5e32ae;var t;return((t=this.imageryProvider)===null||t===void 0?void 0:t._crs)||this[e(3798)].crs||CRS.EPSG4326}get capabilities(){const e={_0xb7c147:3715},t=_0x5e32ae;var i;return(i=this[t(e._0xb7c147)])===null||i===void 0?void 0:i.capabilities}async[_0x5e32ae(1646)](e){return await createImageryProvider$h(e)}hasPopup(){return this._popupConfig?!![]:![]}bindPopup(e,t){const i=_0x5e32ae;return this._popupConfig={content:e,options:t,layer:this},this[i(1439)](),this}unbindPopup(){return this.closePopup(),this._popupConfig=null,this}closePopup(){const e={_0x5288ce:2307},t=_0x5e32ae;return this._map&&this.hasPopup()&&this._map[t(e._0x5288ce)].close(null,this),this}}async function createImageryProvider$h(r){const e={_0x54c487:515},t=_0x5e32ae;if(Cesium__namespace[t(e._0x54c487)](r.layer)&&!Cesium__namespace[t(515)](r.url))switch(r[t(1538)]){case"vec":r.url="https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer";break;case t(427):r.url="https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer";break}return r=converOptions(r),r.czm?new Cesium__namespace.ArcGisMapServerImageryProvider(r):new ArcGisImageryProvider(r)}ArcGisLayer[_0x5e32ae(4100)]=createImageryProvider$h;const layerType$h=_0x5e32ae(2505);register$2(layerType$h,ArcGisLayer),registerImageryProvider(layerType$h,createImageryProvider$h);class BaiduLayer extends BaseTileLayer{async[_0x5e32ae(1646)](e){return await createImageryProvider$g(e)}}async function createImageryProvider$g(r){return r=converOptions(r),new BaiduImageryProvider(r)}BaiduLayer.createImageryProvider=createImageryProvider$g;const layerType$g=_0x5e32ae(2e3);register$2(layerType$g,BaiduLayer),registerImageryProvider(layerType$g,createImageryProvider$g);class BingLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider$f(e)}}async function createImageryProvider$f(r){const e={_0x30d792:1809,_0x4387e9:1538,_0x53c36f:763},t=_0x5e32ae;return r.url=r.url??"https://dev.virtualearth.net",r.culture=r.culture??t(e._0x30d792),r.key=r.key??bing,r[t(e._0x4387e9)]=r.layer??Cesium__namespace.BingMapsStyle[t(e._0x53c36f)],r=converOptions(r),new Cesium__namespace.BingMapsImageryProvider({mapStyle:r.layer,...r})}BingLayer[_0x5e32ae(4100)]=createImageryProvider$f;const layerType$f=_0x5e32ae(1509);register$2(layerType$f,BingLayer),registerImageryProvider(layerType$f,createImageryProvider$f);class GaodeLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider$e(e)}}async function createImageryProvider$e(r){const e={_0x21cd5b:847},t=_0x5e32ae;return r[t(3005)]=r.chinaCRS||ChinaCRS[t(e._0x21cd5b)],r=converOptions(r),new GaodeImageryProvider(r)}GaodeLayer.createImageryProvider=createImageryProvider$e;const layerType$e=_0x5e32ae(1831);register$2(layerType$e,GaodeLayer),registerImageryProvider(layerType$e,createImageryProvider$e);class GeeLayer extends BaseTileLayer{async[_0x5e32ae(1646)](e){return await createImageryProvider$d(e)}}async function createImageryProvider$d(r){return r=converOptions(r),new Cesium__namespace.GoogleEarthEnterpriseImageryProvider({...r,metadata:new Cesium__namespace.GoogleEarthEnterpriseMetadata(r.url)})}GeeLayer.createImageryProvider=createImageryProvider$d;const layerType$d=_0x5e32ae(3280);register$2(layerType$d,GeeLayer),registerImageryProvider(layerType$d,createImageryProvider$d);class GoogleLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider$c(e)}}async function createImageryProvider$c(r){const e={_0x424426:3005},t=_0x5e32ae;return r[t(e._0x424426)]=r.chinaCRS||ChinaCRS.GCJ02,r=converOptions(r),new GoogleImageryProvider(r)}GoogleLayer.createImageryProvider=createImageryProvider$c;const layerType$c="google";register$2(layerType$c,GoogleLayer),registerImageryProvider(layerType$c,createImageryProvider$c);class ImageLayer extends BaseTileLayer{get[_0x5e32ae(1221)](){const e=_0x5e32ae;return this.options[e(1221)]}set[_0x5e32ae(1221)](e){const t={_0x38bf40:3603},i=_0x5e32ae;this.options.url=e,this[i(t._0x38bf40)]()}async _createImageryProvider(e){return await createImageryProvider$b(e)}}async function createImageryProvider$b(r){const e={_0x5c2e8b:1323,_0x436fbe:1134},t=_0x5e32ae;if(!r.url)return null;r=converOptions(r);const i=new Cesium__namespace.SingleTileImageryProvider(r);if(r[t(1613)]===CRS.EPSG3857){let s,n;if(r.rectangle){const o=LngLatPoint[t(3163)](new Cesium__namespace[t(3026)](r[t(e._0x5c2e8b)][t(3456)],r.rectangle.south))[t(3709)](),c=LngLatPoint.fromCartographic(new Cesium__namespace.Cartographic(r.rectangle.east,r.rectangle[t(e._0x436fbe)])).toMercator();s=new Cesium__namespace.Cartesian2(o[0],o[1]),n=new Cesium__namespace.Cartesian2(c[0],c[1])}i._tilingScheme=new Cesium__namespace.WebMercatorTilingScheme({numberOfLevelZeroTilesX:r[t(1103)]||1,numberOfLevelZeroTilesY:r.numberOfLevelZeroTilesY||1,rectangleSouthwestInMeters:s,rectangleNortheastInMeters:n})}return i}ImageLayer.createImageryProvider=createImageryProvider$b;const layerType$b="image";register$2(layerType$b,ImageLayer),registerImageryProvider(layerType$b,createImageryProvider$b);class IonLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider$a(e)}}async function createImageryProvider$a(r){const e={_0x49325b:452},t=_0x5e32ae;return r.accessToken=r.accessToken??ion,r=converOptions(r),new Cesium__namespace[t(e._0x49325b)](r)}IonLayer.createImageryProvider=createImageryProvider$a;const layerType$a=_0x5e32ae(614);register$2(layerType$a,IonLayer),registerImageryProvider(layerType$a,createImageryProvider$a);class MapboxLayer extends BaseTileLayer{async[_0x5e32ae(1646)](e){return await createImageryProvider$9(e)}}async function createImageryProvider$9(r){const e={_0x4ffd66:2884,_0x3d5577:1601},t=_0x5e32ae;r.url=r.url??t(e._0x4ffd66),r.username=r[t(e._0x3d5577)]??"marsgis",r.accessToken=r.token??r.accessToken??mapbox,r.scaleFactor=r.scaleFactor??!![],r=converOptions(r);const i=new Cesium__namespace.MapboxStyleImageryProvider(r);return Promise[t(4056)](r).then(function(s){r.tilingScheme&&(i._imageryProvider._tilingScheme=r.tilingScheme)}),i}MapboxLayer[_0x5e32ae(4100)]=createImageryProvider$9;const layerType$9=_0x5e32ae(2106);register$2(layerType$9,MapboxLayer),registerImageryProvider(layerType$9,createImageryProvider$9);class OsmLayer extends BaseTileLayer{async[_0x5e32ae(1646)](e){return await createImageryProvider$8(e)}}async function createImageryProvider$8(r){return r=converOptions(r),new OsmImageryProvider(r)}OsmLayer.createImageryProvider=createImageryProvider$8;const layerType$8=_0x5e32ae(2285);register$2(layerType$8,OsmLayer),registerImageryProvider(layerType$8,createImageryProvider$8);class XyzImageryProvider extends Cesium__namespace[_0x5e32ae(1591)]{constructor(e={}){const t=_0x5e32ae;e.customTags=e.customTags||{},e.customTags.host=function(i,s,n,o){return location.host},e[t(796)].hostname=function(i,s,n,o){return location.hostname},e.customTags.z4490=function(i,s,n,o){return o+1},super(e),this.options=e}}class TdtLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider$7(e)}}async function createImageryProvider$7(r){const e=_0x5e32ae;return r=converOptions(r),r.url?(r.subdomains=r.subdomains||"01234567",r.url+=e(3153)+(r.key||tianditu),new XyzImageryProvider(r)):new TdtImageryProvider(r)}TdtLayer.createImageryProvider=createImageryProvider$7;const layerType$7=_0x5e32ae(1504);register$2(layerType$7,TdtLayer),registerImageryProvider(layerType$7,createImageryProvider$7);class TencentLayer extends BaseTileLayer{async[_0x5e32ae(1646)](e){return await createImageryProvider$6(e)}}async function createImageryProvider$6(r){const e=_0x5e32ae;return r[e(3005)]=r[e(3005)]||ChinaCRS.GCJ02,r=converOptions(r),new TencentImageryProvider(r)}TencentLayer[_0x5e32ae(4100)]=createImageryProvider$6;const layerType$6="tencent";register$2(layerType$6,TencentLayer),registerImageryProvider(layerType$6,createImageryProvider$6);class TmsLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider$5(e)}}async function createImageryProvider$5(r){const e={_0x1b6107:1221},t=_0x5e32ae;return r=converOptions(r),!r.url&&(r[t(e._0x1b6107)]=Cesium__namespace.buildModuleUrl("Assets/Textures/NaturalEarthII")),await Cesium__namespace.TileMapServiceImageryProvider.fromUrl(r[t(1221)],r)}TmsLayer[_0x5e32ae(4100)]=createImageryProvider$5;const layerType$5=_0x5e32ae(894);register$2(layerType$5,TmsLayer),registerImageryProvider(layerType$5,createImageryProvider$5);class WmsLayer extends BaseTileLayer{_addedHook(){const e={_0x37b345:549},t=_0x5e32ae;this[t(3798)].getCapabilities??!![]?this.getMetadata()[t(e._0x37b345)](()=>{super._addedHook()}):super._addedHook()}async _createImageryProvider(e){return await createImageryProvider$4(e)}[_0x5e32ae(1224)](){const e={_0x2d7d7e:3464,_0x45eb67:1735,_0x169a61:1108,_0x2dedf1:687},t={_0x279c51:1477};return new Promise((i,s)=>{const n={_0x1966fd:1663,_0x322b8e:1404,_0x72421c:2980},o=_0x5210;if(this.capabilities){i(this.capabilities);return}const c={service:"WMS",request:o(e._0x2d7d7e),version:o(e._0x45eb67)};let _=this[o(3798)][o(1221)];this[o(3798)].templateValues&&(_=template(_,this.options.templateValues)),Cesium__namespace.Resource[o(e._0x169a61)]({...this.options,url:_,queryParameters:c,proxy:this[o(e._0x2dedf1)]}).then(l=>{const h=o;if(!this[h(n._0x1966fd)]){if(l){this.capabilities=l;try{this._initByMetaData(l)}catch(f){logInfo(h(3917),f)}}i(l),this[h(n._0x322b8e)](EventType[h(n._0x72421c)],{capabilities:l})}}).catch(l=>{logInfo(o(t._0x279c51),l),i(l)})})}_initByMetaData(e){const t={_0x57097b:3798,_0x5a95c5:4310,_0x3a7e99:2014,_0x5cbf34:1193,_0xa297a1:2039,_0x266ef0:3569},i=_0x5e32ae;let s=this[i(t._0x57097b)][i(t._0x5a95c5)];s.indexOf(":")!==-1&&(s=s.split(":")[1]);const n=this._readChildNode(e,"Layer");if(!n)return;const o=this._readNode(n,"Layer");if(o)for(let c=0,_=o.length;c<_;c++){const l=o[c],h=this[i(t._0x3a7e99)](l,"Name"),f=this._readChildNodeVal(l,i(2996));if(h===s||f===s){const m=this._readChildNodeVal(l,"CRS");!this.options.crs&&m&&(this.options.crs=m);const g=this[i(1726)](l,"BoundingBox");if(!this.options.rectangle&&g){const C=Math.max(Number(g.getAttribute("minx")),-180),E=Math[i(t._0x5cbf34)](Number(g.getAttribute("maxx")),180),P=Math.max(Number(g.getAttribute("miny")),-85),w=Math.min(Number(g.getAttribute("maxy")),85);if(isNaN(C)||isNaN(E)||isNaN(P)||isNaN(w))break;const M={xmin:C,ymin:P,xmax:E,ymax:w};console.log(i(t._0xa297a1),M),this.options[i(t._0x266ef0)]=M,this._rectangle=Cesium__namespace.Rectangle.fromDegrees(M[i(3183)],M.ymin,M[i(2628)],M.ymax)}break}}}_readNode(e,t){if(!e)return null;let i=e.getElementsByTagName(t);return(!i||i.length===0)&&(i=e.getElementsByTagName("wms:"+t)),i}_readChildNode(e,t){const i={_0x3f2f18:3402},s=_0x5e32ae;if(!e)return null;const n=this[s(3857)](e,t);return n[s(i._0x3f2f18)]>0?n[0]:null}[_0x5e32ae(2014)](e,t){const i={_0x192a1b:1726},s=_0x5e32ae;var n,o;if(!e)return null;let c=this._readChildNode(e,t);return!c&&(c=this[s(i._0x192a1b)](e,"wms:"+t)),(n=c)!==null&&n!==void 0&&n.innerHTML?c.innerHTML:(o=c)!==null&&o!==void 0&&o.getInnerHTML?c.getInnerHTML():null}hasPopup(){return this._popupConfig?!![]:![]}bindPopup(e,t){const i={_0x1f1bc1:2513,_0x1d723b:1439},s=_0x5e32ae;return this[s(i._0x1f1bc1)]={content:e,options:t,layer:this},this[s(i._0x1d723b)](),this}unbindPopup(){const e=_0x5e32ae;return this.closePopup(),this[e(2513)]=null,this}closePopup(){return this._map&&this.hasPopup()&&this._map.popup.close(null,this),this}}async function createImageryProvider$4(r){return r=converOptions(r),new Cesium__namespace.WebMapServiceImageryProvider(r)}WmsLayer.createImageryProvider=createImageryProvider$4;const layerType$4="wms";register$2(layerType$4,WmsLayer),registerImageryProvider(layerType$4,createImageryProvider$4);class WmtsLayer extends BaseTileLayer{_addedHook(){const e=_0x5e32ae;this.options[e(2685)]??!![]?this.getMetadata().then(()=>{super._addedHook()}):super._addedHook()}async _createImageryProvider(e){const t={_0x94ab7e:1449},i=_0x5e32ae,s=await createImageryProvider$3(e);return e[i(1449)]?s.pickFeatures=e[i(t._0x94ab7e)]:e.pickFeaturesUrl&&(s.pickFeatures=(n,o,c,_,l)=>this.pickFeatures(n,o,c,_,l)),s}pickFeatures(e,t,i,s,n){const o={_0x4868e2:3798,_0x304795:901,_0xe4fcfb:1984,_0xbc163d:3865,_0x5823c6:2027,_0x338f81:3178,_0x20d9dc:549},c={_0x5d2119:3402,_0x451be5:3292,_0x3f27ca:2488},_=_0x5e32ae;var l;if(!this[_(o._0x4868e2)].enablePickFeatures)return;const h=this.imageryProvider,f=new Cesium__namespace.Cartesian3;if(h[_(o._0x304795)].projection instanceof Cesium__namespace.GeographicProjection)f.x=Cesium__namespace.Math.toDegrees(s),f.y=Cesium__namespace.Math[_(o._0xe4fcfb)](n);else{const E=new Cesium__namespace[_(3026)];E.longitude=s,E.latitude=n,h.tilingScheme.projection.project(E,f)}const m=new Cesium__namespace.Cartesian2,g=h[_(901)].tileXYToNativeRectangle(e,t,i,new Cesium__namespace.Rectangle);m.x=h.tileWidth*(f.x-g.west)/g.width|0,m.y=h[_(3237)]*(g.north-f.y)/g[_(o._0xbc163d)]|0;const C={...this.options[_(o._0x5823c6)]||{},service:"WMS",version:"1.1.1",request:"GetFeatureInfo",layers:this.options.layer,query_layers:this.options.layer,info_format:"application/json",srs:this[_(3798)][_(1613)]??(((l=this.options[_(901)])===null||l===void 0?void 0:l.projection)instanceof Cesium__namespace.WebMercatorProjection?"EPSG:3857":_(o._0x338f81)),bbox:g.west+","+g.south+","+g.east+","+g.north,width:h.tileWidth,height:h[_(3237)],x:m.x,y:m.y};return fetchJson({...this.options,url:this.options.pickFeaturesUrl,queryParameters:C,proxy:this._proxy})[_(o._0x20d9dc)](E=>{const P=_,w=[],M=E.features;for(let T=0;T<M[P(c._0x5d2119)];++T){const L=M[T],R=new Cesium__namespace.ImageryLayerFeatureInfo;if(R.data=L,R[P(c._0x451be5)]=L.properties,R[P(3880)](L.properties),R[P(c._0x3f27ca)](L[P(3292)]),Cesium__namespace.defined(L.geometry)&&L.geometry.type==="Point"){const D=L.geometry.coordinates[0],N=L[P(788)].coordinates[1];R.position=Cesium__namespace.Cartographic.fromDegrees(D,N)}w.push(R)}return w})}[_0x5e32ae(1224)](){const e={_0x5ccc31:1058,_0x40ba5a:1058};return new Promise((t,i)=>{const s={_0x50c83b:2980},n=_0x5210;if(this[n(e._0x5ccc31)]){t(this[n(e._0x40ba5a)]);return}const o={service:"WMTS",request:n(3464),version:"1.0.0"};Cesium__namespace[n(4071)].fetchXML({...this.options,queryParameters:o,proxy:this._proxy}).then(c=>{const _=n;if(!this.isDestroy){if(c){this.capabilities=c;try{this._initByMetaData(c)}catch(l){logInfo("解析GetCapabilities出错",l)}}t(c),this.fire(EventType[_(s._0x50c83b)],{capabilities:c})}}).catch(c=>{logInfo("WMTS GetCapabilities请求出错",c),t(c)})})}_initByMetaData(e){const t={_0x3c2460:1323,_0x3cd28e:1193,_0x521f77:2628,_0x4b0284:1065},i=_0x5e32ae,s=this._readChildNode(e,"Contents");if(!s)return;const n=this._readNode(s,"Layer");if(n)for(let o=0,c=n.length;o<c;o++){const _=n[o];if(this._readChildNodeVal(_,"ows:Identifier")===this.options.layer){const h=this._readChildNode(_,"ows:WGS84BoundingBox");if(!this.options[i(t._0x3c2460)]&&h){let m=this._readChildNodeVal(h,"ows:LowerCorner"),g=this._readChildNodeVal(h,"ows:UpperCorner");if(m&&g){m=m.split(" "),g=g.split(" ");const C=Math.max(Number(m[0]),-180),E=Math[i(t._0x3cd28e)](Number(g[0]),180),P=Math.max(Number(m[1]),-85),w=Math.min(Number(g[1]),85),M={xmin:C,ymin:P,xmax:E,ymax:w};this.options.extent=M,this._rectangle=Cesium__namespace.Rectangle.fromDegrees(M.xmin,M.ymin,M[i(t._0x521f77)],M.ymax)}}!Cesium__namespace.defined(this[i(3798)].style)&&(this.options[i(4114)]=this._readChildNodeVal(this._readChildNode(_,"Style"),"ows:Identifier"));const f=_.getElementsByTagName("TileMatrixSetLink");for(let m=0,g=f.length;m<g;m++){const C=f[m],E=this._readChildNodeVal(C,"TileMatrixSet");if(!Cesium__namespace[i(515)](this.options.tileMatrixSetID)&&(this.options.tileMatrixSetID=E),E===this.options[i(t._0x4b0284)]){if(!this[i(3798)].tileMatrixLabels){const P=this._readChildNode(C,"TileMatrixSetLimits");if(P){const w=P.getElementsByTagName(i(3750)),M=[];for(let T=0,L=w[i(3402)];T<L;T++){const R=this[i(2014)](w[T],"TileMatrix");M.push(R)}this[i(3798)][i(1954)]=M}}break}}break}}}_readNode(e,t){const i={_0x12473b:4254},s=_0x5e32ae;if(!e)return null;let n=e[s(i._0x12473b)](t);return(!n||n.length===0)&&(n=e.getElementsByTagName("wmts:"+t)),n}_readChildNode(e,t){if(!e)return null;const i=this._readNode(e,t);return i.length>0?i[0]:null}_readChildNodeVal(e,t){const i={_0x839712:3262},s=_0x5e32ae;var n,o;if(!e)return null;let c=this[s(1726)](e,t);return!c&&(c=this[s(1726)](e,s(i._0x839712)+t)),(n=c)!==null&&n!==void 0&&n.innerHTML?c.innerHTML:(o=c)!==null&&o!==void 0&&o[s(3785)]?c.getInnerHTML():null}}async function createImageryProvider$3(r){const e={_0x1d60df:1613},t=_0x5e32ae;return r=converOptions(r),r[t(e._0x1d60df)]===CRS[t(3500)]&&(r.tileMatrixLabels=[...Array(20).keys()].map(i=>(i+1).toString())),new Cesium__namespace.WebMapTileServiceImageryProvider(r)}WmtsLayer[_0x5e32ae(4100)]=createImageryProvider$3;const layerType$3="wmts";register$2(layerType$3,WmtsLayer),registerImageryProvider(layerType$3,createImageryProvider$3);class XyzLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider$2(e)}}async function createImageryProvider$2(r){const e=_0x5e32ae;return r=converOptions(r),r[e(3005)]===ChinaCRS.BAIDU?new BaiduImageryProvider(r):new XyzImageryProvider$1(r)}XyzLayer.createImageryProvider=createImageryProvider$2;const layerType$2="xyz";register$2(layerType$2,XyzLayer),registerImageryProvider(layerType$2,createImageryProvider$2);class GridLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider$1(e)}}async function createImageryProvider$1(r){const e={_0x5e0600:2200,_0x56be7a:3823},t=_0x5e32ae;return r.cells=r.cells??2,r.color=Cesium__namespace.Color.fromCssColorString(r.color??"rgba(255,255,255,1)"),r.glowWidth=r.glowWidth??3,r.glowColor?r.glowColor=Cesium__namespace[t(e._0x5e0600)].fromCssColorString(r[t(e._0x56be7a)]):r[t(3823)]=r.color.withAlpha(.3),r.backgroundColor=Cesium__namespace.Color.fromCssColorString(r.backgroundColor??t(1639)),r=converOptions(r),new Cesium__namespace.GridImageryProvider(r)}GridLayer.createImageryProvider=createImageryProvider$1;const layerType$1=_0x5e32ae(447);register$2(layerType$1,GridLayer),registerImageryProvider(layerType$1,createImageryProvider$1);class TileInfoLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider(e)}}async function createImageryProvider(r){const e={_0x5c3bba:1069},t=_0x5e32ae;return r.color=Cesium__namespace[t(2200)].fromCssColorString(r[t(2092)]||t(e._0x5c3bba)),r=converOptions(r),new Cesium__namespace.TileCoordinatesImageryProvider(r)}TileInfoLayer.createImageryProvider=createImageryProvider;const layerType="tileinfo";register$2(layerType,TileInfoLayer),registerImageryProvider(layerType,createImageryProvider);class EmptyTileLayer extends BaseTileLayer{constructor(e={}){super(e),this._minimumLevel=e.minimumLevel??0,this._maximumLevel=e.maximumLevel}async[_0x5e32ae(1646)](e){const t=_0x5e32ae;return e=converOptions(e),e[t(4006)]=this._minimumLevel,e.maximumTerrainLevel=this._maximumLevel,new EmptyImageryProvider(e)}_setOptionsHook(e,t){const i={_0x50f875:3798,_0x215f8c:745},s=_0x5e32ae;this._minimumLevel=this.options.minimumLevel??0,this._maximumLevel=this.options.maximumLevel,this[s(i._0x50f875)].minimumTerrainLevel=this[s(i._0x215f8c)],this[s(3798)].maximumTerrainLevel=this._maximumLevel,super[s(437)](e,t)}isInRange(e){const t={_0x5246af:4188},i=_0x5e32ae,s=this[i(1890)].level;return e<this[i(745)]||e<s-1||Cesium__namespace.defined(this[i(t._0x5246af)])&&e>=this._maximumLevel?![]:!![]}isAllOutRange(e){const t={_0x55880f:1096,_0x4f09d7:4188},i=_0x5e32ae;return this._map[i(t._0x55880f)]<this[i(745)]||Cesium__namespace[i(515)](this[i(4188)])&&e>=this[i(t._0x4f09d7)]}}new Cesium__namespace[_0x5e32ae(2200)](0,0,0,.01);function config2Entity(r,e,t){const i=_0x5e32ae;for(let s=r[i(3402)]-1;s>=0;s--){const n=r[s],o=e.symbol;o&&(typeof o=="function"?o(n,n._attr):setConfigSymbol(n,e,t))}return r}function getStyleBySymbolConfig(r,e,t){const i={_0x36a7dd:2581},s=_0x5e32ae;let n=r.styleOptions;if(r[s(2267)]&&e){const o=e[r.styleField],c=r.styleFieldOptions[o];c!=null&&(n=clone(n),n={...n,...c})}if(typeof r.callback=="function"){n=clone(n);const o=r[s(i._0x36a7dd)](e,t,n);o&&(n={...n,...o})}return n=n||{},n}function setConfigSymbol(r,e,t){const i={_0x685292:3205,_0x9b7863:1632,_0x1b3016:2286,_0x133b0b:2092,_0x23ea6c:736,_0x49e444:736,_0x10755b:652,_0x4b9670:1521,_0x5146b9:2540,_0x4d6589:2266,_0x1d84d0:4091,_0x56048d:3267,_0x212058:2927,_0x6cbe0f:2266,_0x17c124:1916,_0x5dd851:1268,_0x83d5a2:871,_0x4a0b13:704},s={_0x3e6525:3728,_0x25b607:3267},n={_0x4555b3:4084},o=_0x5e32ae;let c=r._attr;c&&c[o(i._0x685292)]&&c.attr&&(c=c[o(1528)]);const _=r[o(675)],l=getStyleBySymbolConfig(e.symbol,c,r);function h(m,g,C){const E=o;return g.text===""?null:(Cesium__namespace[E(515)](g.height)&&(m=setPositionsHeight(m,g.height)),_[E(n._0x4555b3)]({position:m,label:g,_attr:C}))}if(t=t||h,r.polyline){if(PolylineStyleConver.toCesiumVal(l,r[o(i._0x9b7863)],!![]),l[o(i._0x1b3016)]){const m={color:l[o(i._0x133b0b)],opacity:l.opacity,...l.corridor};if(isString(l[o(2286)].width)&&(m.width=template(l.corridor[o(4005)],c)),r._corridorEx)CorridorStyleConver.toCesiumVal(m,r._corridorEx[o(2286)],!![]);else{const g=CorridorStyleConver.toCesiumVal(m,{},!![]);g.positions=getCesiumValue(r.polyline[o(2436)]);const C=_.add({corridor:g,_attr:c});C._mars3d_layerId=e.id,r[o(2317)]=C}}if(l[o(i._0x23ea6c)]&&l.label.text)if(r._labelEx)LabelStyleConver.toCesiumVal(l[o(i._0x49e444)],r._labelEx[o(736)],c);else{const m=getCesiumValue(r[o(i._0x9b7863)].positions);let g=m[Math.floor(m.length/2)];l[o(736)].position&&(l.label.position==="center"?g=centerOfMass(m,l.label[o(3865)]):isNumber(l.label.position)&&(g=m[l[o(i._0x23ea6c)].position]));const C=LabelStyleConver.toCesiumVal(l.label,{},c);C[o(4091)]=C.heightReference??Cesium__namespace.HeightReference.CLAMP_TO_GROUND;const E=t(g,C,c);E&&(E._mars3d_layerId=e.id),r._labelEx=E}}if(r[o(652)]){var f;if(PolygonStyleConver.toCesiumVal(l,r[o(652)],!![]),l.outline&&(l.outlineWidth>1||((f=l.outlineStyle)===null||f===void 0?void 0:f.width)>1)){r[o(i._0x10755b)].outline=![];const m={...l,outline:![],color:l.outlineColor,width:l.outlineWidth,opacity:l.outlineOpacity,...l.outlineStyle||{}};if(r._outlineEx)for(let g=0,C=r._outlineEx.length;g<C;g++)PolylineStyleConver.toCesiumVal(m,r._outlineEx[g].polyline,!![]);else{const g=getAllPositions(r);r._outlineEx=[];for(let C=0,E=g[o(3402)];C<E;C++){const P=PolylineStyleConver.toCesiumVal(m,{},!![]);P.positions=g[C];const w=_.add({polyline:P,_attr:c});w._mars3d_layerId=e.id,r[o(i._0x4b9670)].push(w)}}}if(l.label&&l.label.text)if(r._labelEx)LabelStyleConver.toCesiumVal(l.label,r[o(i._0x5146b9)].label,c);else{const m=centerOfMass(getPositions(r),l[o(736)].height),g=LabelStyleConver[o(1268)](l.label,{},c);g.heightReference=g.heightReference??Cesium__namespace.HeightReference[o(3267)];const C=t(m,g,c);C&&(C[o(i._0x4d6589)]=e.id),r._labelEx=C}}if(r[o(i._0x49e444)]?(l.label=l.label||l||{},!Cesium__namespace.defined(l.label.clampToGround)&&!Cesium__namespace.defined(l.label.heightReference)&&(l.label.heightReference=l[o(736)].heightReference??Cesium__namespace.HeightReference[o(3267)]),LabelStyleConver.toCesiumVal(l[o(736)],r[o(736)],c)):l[o(736)]&&typeof l.label=="function"&&l[o(736)](r,c,function(m,g){const C=o,E=LabelStyleConver.toCesiumVal(g,{},c);E.heightReference=(E[C(4091)],Cesium__namespace[C(s._0x3e6525)][C(s._0x25b607)]);const P=t(m,E,c);P&&(P._mars3d_layerId=e.id)}),r.billboard){if(!Cesium__namespace.defined(l[o(2825)])&&!Cesium__namespace.defined(l[o(i._0x1d84d0)])&&(l.heightReference=l[o(i._0x1d84d0)]??Cesium__namespace.HeightReference[o(i._0x56048d)]),l[o(513)]=template(l.image,c),BillboardStyleConver.toCesiumVal(l,r.billboard,!![]),l.model)if(r._modelEx)ModelStyleConver[o(1268)](l[o(i._0x212058)],r._modelEx.model,!![]);else{const m=ModelStyleConver.toCesiumVal(l.model,!![]);m[o(4091)]=(m[o(4091)],Cesium__namespace.HeightReference.CLAMP_TO_GROUND);const g=_[o(4084)]({position:r[o(2180)],model:m,_attr:c});g[o(i._0x6cbe0f)]=e.id,r[o(i._0x17c124)]=g}if(l.point)if(r._pointEx)PointStyleConver.toCesiumVal(l.point,r[o(871)].point,!![]);else{const m=PointStyleConver[o(i._0x5dd851)](l.point,{},!![]);m.heightReference=m.heightReference??Cesium__namespace[o(3728)].CLAMP_TO_GROUND;const g=_.add({position:r.position,point:m,_attr:c});g[o(2266)]=e.id,r[o(i._0x83d5a2)]=g}if(l.label&&l.label.text&&!r.label)if(r._labelEx)LabelStyleConver.toCesiumVal(l.label,r._labelEx.label,c);else{const m=r.position,g=LabelStyleConver[o(1268)](l[o(736)],{},c);g.heightReference=g.heightReference??Cesium__namespace.HeightReference.CLAMP_TO_GROUND;const C=t(m,g,c);C&&(C._mars3d_layerId=e.id),r._labelEx=C}}r[o(i._0x4a0b13)]=l}class CzmGeoJsonLayer extends BaseGraphicLayer{constructor(e={}){super(e),this._setOptionsHook(e,e)}get layer(){return this._dataSource}get entities(){const e={_0x3399b4:2553},t=_0x5e32ae;return this._dataSource?this[t(e._0x3399b4)].entities:null}get labelCollection(){const e={_0x2d5289:1237,_0x2e479d:1890,_0x238b85:3107,_0x8b4549:1e3,_0xaf4e7a:4084},t=_0x5e32ae;return!this._labelCollection&&(this._labelCollection=new Cesium__namespace[t(e._0x2d5289)]({scene:this[t(e._0x2e479d)].scene}),this._state===State.ADDED&&this._map[t(e._0x238b85)][t(e._0x8b4549)][t(e._0xaf4e7a)](this._labelCollection)),this._labelCollection}get hasZIndex(){return!![]}get zIndex(){return this.options.zIndex}set zIndex(e){const t={_0x4336da:3798,_0xd21cdd:1890,_0x28a890:1262,_0x4cbfef:2553,_0x5011b8:1890,_0x50bd6c:1196},i=_0x5e32ae;if(this[i(t._0x4336da)].zIndex=e,this._dataSource==null||e==null||!this[i(t._0xd21cdd)].dataSources.contains(this._dataSource))return;this._dataSource[i(t._0x28a890)]=e,this._map.dataSources[i(1676)](this[i(t._0x4cbfef)]);const s=this[i(t._0x5011b8)].dataSources;for(let n=s.length-1;n>=0;n--){const o=s[i(t._0x50bd6c)](n);o!==this._dataSource&&Cesium__namespace.defined(o.zIndex)&&e<o[i(1262)]&&this._map.dataSources.lower(this[i(2553)])}}get clampToGround(){const e={_0x1a7e77:2825,_0x502a90:3274},t=_0x5e32ae;return this.options[t(e._0x1a7e77)]?!![]:this.options[t(3274)]&&this.options[t(e._0x502a90)].styleOptions&&this.options.symbol.styleOptions[t(2825)]?!![]:![]}[_0x5e32ae(437)](e,t){const i={_0x5721c6:2200,_0x3c697a:2451,_0xeff78b:3776,_0x471a84:3798,_0xd8190f:1265,_0x4d3c91:3997,_0x23a070:2527,_0x1b742b:3798,_0x315ece:2605},s=_0x5e32ae;var n;if(super[s(437)](e,t),(n=this.options.symbol)!==null&&n!==void 0&&n.styleOptions){const o=this.options.symbol.styleOptions;if(Cesium__namespace.defined(o.clampToGround)&&(this.options.clampToGround=o[s(2825)]),Cesium__namespace.defined(o[s(2092)])){const c=Cesium__namespace[s(i._0x5721c6)][s(i._0x3c697a)](o.color??s(3152))[s(3518)](Number(o[s(i._0xeff78b)]??.5));this[s(i._0x471a84)].fill=c}if(Cesium__namespace.defined(o.outlineColor)){const c=Cesium__namespace.Color.fromCssColorString(o.outlineColor??o.color??s(i._0xd8190f)).withAlpha(o[s(i._0x4d3c91)]??(o.opacity,1));this.options[s(i._0x23a070)]=c}Cesium__namespace.defined(o.outlineWidth)&&(this[s(i._0x1b742b)].strokeWidth=o[s(i._0x315ece)])}}_showHook(e){super._showHook(e),this._labelCollection&&(this._labelCollection.show=e)}_mountedHook(){const e=_0x5e32ae;super[e(3118)](),this.load()}_addedHook(){const e={_0x4f36dd:1467},t=_0x5e32ae;super._addedHook(),this[t(2553)]&&this._map[t(1135)].add(this._dataSource),this[t(e._0x4f36dd)]&&this._map.scene[t(1e3)].add(this[t(1467)])}_removedHook(){const e={_0x55cd48:1e3,_0x1a83dd:1467,_0x379d1c:2004},t=_0x5e32ae;super[t(2442)](),this._labelCollection&&(this._map.scene[t(e._0x55cd48)].remove(this._labelCollection),this[t(e._0x1a83dd)]=null),this._dataSource&&this[t(1890)].dataSources[t(e._0x379d1c)](this._dataSource)}[_0x5e32ae(3576)](e){const t={_0x17ccf8:1890,_0x5449cd:3798,_0x51558d:4064,_0x18a4af:1227},i=_0x5e32ae;return this[i(t._0x17ccf8)]?(this._map.cancelFlyTo(),this[i(t._0x5449cd)][i(t._0x51558d)]?this[i(t._0x17ccf8)][i(t._0x18a4af)](this[i(3798)][i(t._0x51558d)],e):this.options.extent?this._map[i(3460)](this[i(3798)].extent,e):this._dataSource?this._map.viewer.flyTo(this._dataSource,e):Promise.resolve(![])):Promise.resolve(![])}[_0x5e32ae(2302)](e){const t={_0x2014ee:1387,_0x3a1331:3798},i={_0x2a29f6:3394},s={_0x52534d:1909},n=_0x5e32ae;return e&&((e[n(t._0x2014ee)]??!![])&&(delete this.options.url,delete this.options.data),this[n(t._0x2014ee)](),this[n(3798)]={...this.options,...e}),this.options[n(1221)]?fetchJson({...this[n(t._0x3a1331)],proxy:this._proxy})[n(549)](o=>{const c=n;!this._map||!this.isAdded||this[c(s._0x52534d)](o)}).catch(o=>{const c=n;var _;logError$1(c(1266),o),(_=this._readyPromise)!==null&&_!==void 0&&_.reject&&this._readyPromise[c(i._0x2a29f6)](o)}):this.options.data?this._load_data(this.options.data):e&&logWarn("CzmGeoJsonLayer：没有传入 url 或 data 参数,请确认是否有误。"),this}_load_data(e){const t=_0x5e32ae;this.options[t(3109)]&&(e=this.options[t(3109)](e)),Cesium__namespace.GeoJsonDataSource.load(e,this.options)[t(549)](s=>{this.showResult(s)})}showResult(e){const t={_0x1644fb:1890,_0x2437ba:575,_0x5b77b7:1135,_0x53e005:3798,_0x336049:1262,_0x1643e7:887,_0x3d4620:3913},i=_0x5e32ae;if(this._dataSource&&(this[i(t._0x1644fb)].dataSources.remove(this[i(2553)]),delete this._dataSource),!e||this._state===State.REMOVED)return;e.show=this[i(t._0x2437ba)],this._map[i(t._0x5b77b7)].add(e),this._readyPromise.resolve(this),this._dataSource=e,this[i(t._0x53e005)].zIndex&&(this.zIndex=this[i(3798)][i(t._0x336049)]);const s=e[i(t._0x1643e7)].values,n=this.bindEntities(s);this._opacity!==1&&this[i(t._0x3d4620)](this._opacity),this[i(t._0x53e005)].flyTo&&this.flyToByAnimationEnd(),this.fire(EventType.load,{dataSource:e,entities:s,list:n})}bindEntities(e){const t={_0x3bdcfe:4223},i=_0x5e32ae,s=[];for(let n=0,o=e[i(3402)];n<o;n++){const c=e[n];c._mars3d_layerId=this.id;const _=this.getEntityAttr(c);c._attr=_||{},this.fire(EventType[i(t._0x3bdcfe)],{czmObject:c,attr:_}),s[i(3759)]({..._,_entity:c})}return this[i(3798)].id=this.id,config2Entity(e,this.options,(n,o,c)=>this[i(2391)](n,o,c)),s}updateStyle(e){const t={_0x325cc9:3274},i={_0x4dc789:2391},s=_0x5e32ae;if(!this[s(2553)])return;e&&(this.options[s(t._0x325cc9)]={...this.options.symbol,...e});const n=this._dataSource.entities.values;return this[s(3798)].id=this.id,config2Entity(n,this.options,(o,c,_)=>this[s(i._0x4dc789)](o,c,_)),this}[_0x5e32ae(2391)](e,t,i){const s={_0x5eae92:1237},n=_0x5e32ae;if(t[n(1260)]==="")return null;Cesium__namespace.defined(t.height)&&(e=setPositionsHeight(e,t.height)),!this.labelCollection&&(this.labelCollection=new Cesium__namespace[n(s._0x5eae92)]({scene:this[n(737)].scene}),this.viewer.scene.primitives.add(this.labelCollection)),t.position=getPositionValue(e);const o=this.labelCollection.add(t);return o.properties=i,o._mars3d_layerId=this.id,o}setOpacity(e){const t={_0x4601fb:4261,_0x30f47e:2092,_0x1c0b7c:3387,_0x5ba7f6:2747,_0x241bca:2649,_0xbf23a7:736,_0x27a4b1:3776,_0x577eba:736},i=_0x5e32ae;if(this._opacity=e,!this._dataSource)return;const s=this._dataSource.entities[i(t._0x4601fb)];for(let n=0,o=s.length;n<o;n++){const c=s[n];if(c.polygon&&c.polygon.material&&c.polygon[i(1877)][i(t._0x30f47e)]&&(this[i(t._0x1c0b7c)](c.polygon[i(1877)].color,this._opacity),c[i(652)][i(2021)]&&this[i(3387)](c[i(652)][i(2021)],this._opacity)),c[i(1632)]&&c.polyline.material&&c.polyline[i(1877)].color&&this[i(3387)](c.polyline[i(1877)].color,this._opacity),c.billboard&&(c[i(t._0x5ba7f6)].color=Cesium__namespace.Color.WHITE.withAlpha(this._opacity)),c[i(2927)]&&(c[i(2927)][i(t._0x30f47e)]=Cesium__namespace.Color[i(2995)].withAlpha(this[i(2649)])),c.label){let _=this[i(t._0x241bca)];c.styleOpt&&c[i(704)][i(t._0xbf23a7)]&&c[i(704)][i(736)].opacity&&(_=c.styleOpt[i(736)][i(t._0x27a4b1)]),c.label[i(906)]&&this._updatEntityAlpha(c.label.fillColor,_),c[i(t._0x577eba)].outlineColor&&this._updatEntityAlpha(c[i(736)].outlineColor,_),c.label.backgroundColor&&this._updatEntityAlpha(c[i(t._0x577eba)].backgroundColor,_)}}}_updatEntityAlpha(e,t){const i=_0x5e32ae;if(!e)return;let s=getCesiumValue(e,Cesium__namespace.Color,this._map.clock[i(837)]);if(!s||!s.withAlpha)return e;s=s.withAlpha(t),e.setValue(s)}getEntityAttr(e){return getAttrVal(e[_0x5e32ae(3292)])}clear(){const e={_0x2807fe:2553},t=_0x5e32ae;return this._labelCollection&&this._labelCollection.removeAll(),this[t(e._0x2807fe)]&&this[t(e._0x2807fe)].entities.removeAll(),this._closeAllControl(),this}[_0x5e32ae(3439)](e,t){const i={_0x3892fa:549},s={_0x38ce72:2553},n=_0x5e32ae;return this.readyPromise[n(i._0x3892fa)](o=>{const c=n;return this[c(s._0x38ce72)][c(3439)](e,t).then(l=>{const h=c,f=l[h(887)][h(4261)],m=this.bindEntities(f);return{entities:f,list:m}})})}}register$2(_0x5e32ae(1762),CzmGeoJsonLayer);class KmlLayer extends CzmGeoJsonLayer{[_0x5e32ae(2302)](e={}){const t={_0x1353e8:1221,_0x54e2f2:3107,_0x513039:2792,_0x40712b:2825,_0x2cbc9b:931,_0x3ab423:3107},i=_0x5e32ae;this.options={...this.options,...e};let s;if(this.options[i(t._0x1353e8)]){const n=getUrlResource(this.options);s=Cesium__namespace.KmlDataSource[i(2302)](n,{camera:this._map[i(t._0x54e2f2)][i(t._0x513039)],canvas:this._map.scene.canvas,clampToGround:this.options[i(t._0x40712b)]})}else this.options[i(t._0x2cbc9b)]&&(s=Cesium__namespace.KmlDataSource[i(2302)](this.options.data,{camera:this[i(1890)][i(t._0x3ab423)].camera,canvas:this._map.scene.canvas,clampToGround:this.options.clampToGround}),logError$1("KmlLayer：请必须传入 url 或 data 参数"));s.then(n=>{this.showResult(n)})}getEntityAttr(e){const t={_0x11a432:3605,_0x326c8e:3063,_0x30b7bd:3427},i=_0x5e32ae;let s={name:e[i(t._0x11a432)],description:e.description};const n=e._kml[i(t._0x326c8e)];for(const o in n)s[o]=n[o][i(t._0x30b7bd)];return s=getAttrVal(s),s.description&&(s.description=s.description[i(1525)](/<div[^>]+>/g,"")),s}}register$2(_0x5e32ae(3008),KmlLayer);class CzmlLayer extends CzmGeoJsonLayer{_showHook(e){const t=_0x5e32ae;super._showHook(e),(this[t(3798)].updateClock??!![])&&(e?this.setCzmlTime():this[t(1680)]())}setCzmlTime(){const e={_0x1ef4b2:2454,_0x3d301b:1890,_0x3a2f7d:1949,_0x41a835:2553,_0x235327:1949},t=_0x5e32ae;var i;(i=this._dataSource)!==null&&i!==void 0&&i[t(1949)]&&(this._map.clock[t(2591)]=this._dataSource.clock.clockRange,this._map.clock[t(e._0x1ef4b2)]=this._dataSource.clock.multiplier,this[t(e._0x3d301b)].clock.startTime=this._dataSource[t(1949)].startTime,this._map[t(1949)][t(2962)]=this._dataSource.clock.stopTime,this[t(1890)][t(e._0x3a2f7d)].currentTime=this[t(e._0x41a835)][t(e._0x235327)].startTime)}setNowTime(){const e={_0x1bc2ec:2591,_0x176b58:1949},t=_0x5e32ae;this[t(1890)].clock[t(e._0x1bc2ec)]=Cesium__namespace[t(3784)][t(4090)],this._map[t(e._0x176b58)].multiplier=1;const i=Cesium__namespace[t(527)].fromDate(new Date);this._map[t(1949)].startTime=i[t(4246)](),this._map[t(1949)].stopTime=Cesium__namespace.JulianDate.addDays(i,1,new Cesium__namespace.JulianDate),this[t(1890)][t(e._0x176b58)].currentTime=i.clone()}_removedHook(){const e=_0x5e32ae;super[e(2442)](),(this.options.updateClock??!![])&&this.setNowTime()}load(e={}){const t={_0x532b69:3798,_0x10eeca:931,_0x469f87:2302},i=_0x5e32ae;this.options={...this[i(t._0x532b69)],...e};let s;if(this.options.url){const n=getUrlResource(this.options);s=Cesium__namespace.CzmlDataSource[i(2302)](n,this.options)}else this.options[i(t._0x10eeca)]?s=Cesium__namespace.CzmlDataSource[i(t._0x469f87)](this[i(3798)][i(931)],this[i(3798)]):logError$1("CzmlLayer：请必须传入 url 或 data 参数");s.then(n=>{this.showResult(n)})}getEntityAttr(e){const t={_0x5b9f9d:2086},i=_0x5e32ae;if(e.properties)return getAttrVal(e.properties);if(e[i(t._0x5b9f9d)])return{description:getCesiumValue(e.description)}}}register$2("czml",CzmlLayer);class GraphicGroupLayer extends GroupLayer{get[_0x5e32ae(2639)](){return this._hasEdit}set[_0x5e32ae(2639)](e){const t={_0x5b644b:3256},i=_0x5e32ae;this._hasEdit=e,this._selectedLayer&&(e?this._selectedLayer[i(t._0x5b644b)]():this._selectedLayer.disableEdit())}get isAutoEditing(){const e=_0x5e32ae;return this.options[e(1166)]}set isAutoEditing(e){this.options.isAutoEditing=e,this.eachLayer(t=>{const i=_0x5210;t[i(1166)]=e},this)}get selectedLayer(){return this._selectedLayer}set[_0x5e32ae(2914)](e){const t={_0x5b83f4:4046},i=_0x5e32ae;this._selectedLayer&&(delete this._selectedLayer.isActivate,this._selectedLayer[i(t._0x5b83f4)]()),!(e instanceof GraphicLayer)&&(e=this.getLayer(e)),this._selectedLayer=e,this[i(3373)]&&(this._selectedLayer.isActivate=!![],this._hasEdit&&this._selectedLayer.activateEdit())}isActivate(e){return e[_0x5e32ae({_0x21c1b1:3586}._0x21c1b1)]}_mountedHook(){const e=_0x5e32ae;super[e(3118)](),this.options[e(651)]&&this.loadGeoJSON(this[e(3798)].geojson)}[_0x5e32ae(4158)](){super._addedHook(),this._processForRemoveLayer()}_getOrCreateLayer(e){const t={_0x3d8c39:1605},i=_0x5e32ae;if(!e)return this.selectedLayer;if(isObject(e)){const s=this.getLayer(e[i(3605)]);if(s)return Cesium__namespace.defined(e.id)&&(s.id=e.id),Cesium__namespace.defined(e.show)&&(s.show=e.show),s}else{const s=this[i(4314)](e);if(s)return s}return this[i(t._0x3d8c39)](e)}createLayer(e){const t={_0x1e3003:1440,_0x11f370:575},i=_0x5e32ae,s=clone(this.options,["id",i(t._0x1e3003),i(651),"data"]);s.pid=this.id,isObject(e)?(s.name=e.name,Cesium__namespace.defined(e.id)&&(s.id=e.id),Cesium__namespace.defined(e[i(t._0x11f370)])&&(s.show=e[i(575)])):s.name=e;const n=new GraphicLayer(s);return this._events&&(n._events={...this[i(2102)]}),this._map.addLayer(n),this.addLayer(n),n}[_0x5e32ae(3362)](e){const t={_0x4a93fb:2914},i=_0x5e32ae;let s;return e instanceof GraphicLayer?s=e:s=this.getLayer(e),s?(this[i(t._0x4a93fb)]===s&&(this.selectedLayer=null),removeArrayItem(this[i(1188)],s),this[i(1890)][i(2642)](s,!![]),this._processForRemoveLayer(),!![]):![]}[_0x5e32ae(2905)](){const e={_0x1d8093:1188,_0x589e30:1188},t=_0x5e32ae;for(let i=this[t(e._0x1d8093)].length-1;i>=0;i--){const s=this[t(e._0x589e30)][i];s.length===0&&(this.selectedLayer===s&&(this.selectedLayer=null),this._arrLayer[t(2889)](i,1),this._map.removeLayer(s,!![]))}return this._processForRemoveLayer(),this}[_0x5e32ae(2844)](){const e={_0x20c8cf:3402,_0x4b14bf:1605,_0xe42a9c:926,_0xc99653:1188},t=_0x5e32ae;this._arrLayer[t(e._0x20c8cf)]===0&&this.options[t(926)]&&(this.selectedLayer=this[t(e._0x4b14bf)](this.options[t(e._0xe42a9c)])),this.selectedLayer==null&&this[t(e._0xc99653)].length>0&&(this.selectedLayer=this._arrLayer[0])}moveToLayer(e,t){!(t instanceof GraphicLayer)&&(t=this.getLayer(t)),e.remove(),t.addGraphic(e)}[_0x5e32ae(2188)](){const e=[];return this.eachGraphic(t=>{t.isPrivate||e.push(t)},this),e}[_0x5e32ae(3388)](e){const t={_0x3cf791:3388},i=_0x5e32ae;if(e)for(let s=this[i(1188)].length-1;s>=0;s--){const n=this._arrLayer[s],o=n[i(t._0x3cf791)](e);if(o)return o}}eachGraphic(e,t){const i={_0x2bcd67:1061};return this.eachLayer(s=>{s[_0x5210(i._0x2bcd67)](e,t)},this),this}[_0x5e32ae(1387)](e){this.eachLayer(t=>{t.clear(e)},this)}[_0x5e32ae(826)](e){const t={_0x54309d:2886},i={_0x3b4061:3759},s={_0x4c4532:3759},n=_0x5e32ae;e!=null&&e.stopEdit&&this.stopDraw();const o=[],c=[];return this[n(t._0x54309d)](_=>{const l=n;c[l(i._0x3b4061)]({id:_.id,name:_.name,show:_.show}),_.eachGraphic(h=>{const f=l;if(h.isPrivate)return;const m=h.toGeoJSON(e);m.properties._layer=_.name,o[f(s._0x4c4532)](m)},this)},this),{type:"FeatureCollection",layer:{id:this.id,name:this.name,layers:c,selected:this.selectedLayer.id},features:o}}loadGeoJSON(e,t={}){const i={_0x6e4a27:4097},s=_0x5e32ae;try{isString(e)&&(e=JSON.parse(e))}catch(E){alert(E.name+": "+E.message+` 
请确认json文件格式正确!!!`);return}t.clear&&this[s(1387)](!![]);let n;if(t.layer)n=this.getLayer(t.layer);else{var o,c;const E={},P=(o=e)===null||o===void 0||(c=o[s(1538)])===null||c===void 0?void 0:c[s(4310)];if(P){var _,l;for(let w=0;w<P.length;w++){const M=this._getOrCreateLayer(P[w]);E[M.id]=M}if((_=e)!==null&&_!==void 0&&(l=_.layer)!==null&&l!==void 0&&l[s(i._0x6e4a27)]){var h,f;const w=E[(h=e)===null||h===void 0||(f=h.layer)===null||f===void 0?void 0:f[s(4097)]];w&&(this.selectedLayer=w)}}}const m=getGeoJsonFeatures(e);let g=[];for(let E=0,P=m.length;E<P;E++){const w=m[E];let M;if(n)M=n;else{var C;const L=w==null||(C=w.properties)===null||C===void 0?void 0:C._layer;M=L?this[s(4314)](L):null,!M&&(M=this.selectedLayer)}const T=M.loadGeoJSON(w,{...t,clear:![],flyTo:![]});g=g.concat(T)}return t.flyTo&&this._map[s(986)](g),g}_toJsonEx(e){const t=_0x5e32ae;e.geojson=this[t(826)]()}[_0x5e32ae(3879)](e){const t={_0x3ac8f2:3879};let i;return this.eachGraphic(s=>{const n=_0x5210;if(s.isPrivate||!s[n(t._0x3ac8f2)])return;const o=s.getRectangle();Cesium__namespace.defined(o)&&(i?i=Cesium__namespace.Rectangle.union(o,i):i=o)},this),e?formatRectangle(i):i}startDraw(e){const t=_0x5e32ae;return this._selectedLayer[t(1860)](e)}stopDraw(){return this._selectedLayer.stopDraw()}activateEdit(){return this._selectedLayer.activateEdit()}disableEdit(){return this[_0x5e32ae(3373)].disableEdit()}}register$2(_0x5e32ae(1777),GraphicGroupLayer);class GeoJsonLayer extends GraphicLayer{[_0x5e32ae(3961)](e){const t=_0x5e32ae;super[t(3961)](e),e&&this._hasLoad&&(this[t(472)]=![],this.load())}[_0x5e32ae(4158)](){const e={_0x1a9c6b:2302},t=_0x5e32ae;super._addedHook(),this.show?this[t(e._0x1a9c6b)]():this._hasLoad=!![]}_removedHook(){super._removedHook(),this.clear()}load(e){const t={_0x572ee6:3798,_0x3e11c0:931,_0x514837:1573},i=_0x5e32ae;e&&(Cesium__namespace.defaultValue(e[i(1387)],!![])&&(delete this.options[i(1221)],delete this[i(t._0x572ee6)].data),this.clear(),this.options={...this[i(t._0x572ee6)],...e}),this.options[i(1221)]?sendAjax({...this.options,proxy:this._proxy}).then(s=>{!this._map||this._state!==State.ADDED||this._load_data(s)}).catch(s=>{const n=i;var o;logError$1("fetchJson出错了",s),(o=this[n(3352)])!==null&&o!==void 0&&o.reject&&this._readyPromise.reject(s)}):this.options.data?this._load_data(this.options[i(t._0x3e11c0)]):e&&logWarn(i(t._0x514837))}_load_data(e){const t={_0x32268b:3798},i=_0x5e32ae;this[i(t._0x32268b)].format&&(e=this.options.format(e)),e=this._formatForMask(e);const s=this.loadGeoJSON(e,{clear:!![],enabledEvent:![]}),n=[];s.forEach(o=>{n.push({...o.attr,graphic:o})}),this.fire(EventType.load,{geojson:e,list:n,graphics:s}),this[i(3798)][i(3576)]&&this.flyToByAnimationEnd(),this._readyPromise.resolve(this)}_formatForMask(e){const t={_0x216090:1906,_0x51a034:3183,_0xbe64ce:515,_0x4f4ddf:3081,_0x265f86:3205,_0x439a80:2056,_0x4d2ccd:3205,_0x47ec02:788,_0x522d5f:2056},i=_0x5e32ae,s=this.options.mask;if(!s||!e.features||e.features[i(3402)]===0)return e;e=clone(e),e[i(1906)][i(2889)](1,e[i(t._0x216090)][i(3402)]-1),this._extent=getExtentByGeoJSON(e);let n={xmin:73,xmax:136,ymin:3,ymax:59};isObject(s)&&Cesium__namespace.defined(s[i(t._0x51a034)])&&Cesium__namespace[i(515)](s[i(2628)])&&Cesium__namespace[i(t._0xbe64ce)](s.ymin)&&Cesium__namespace.defined(s.ymax)&&(n=s);const o=[[n[i(t._0x51a034)],n.ymax],[n.xmin,n.ymin],[n.xmax,n.ymin],[n[i(2628)],n.ymax],[n.xmin,n[i(t._0x4f4ddf)]]],c=e[i(t._0x216090)][0];if(c.geometry[i(t._0x265f86)]===i(2056))c.geometry={type:i(t._0x439a80),coordinates:[o,c.geometry.coordinates[0]]};else if(c.geometry[i(t._0x4d2ccd)]==="MultiPolygon"){const _=[o];for(let l=0,h=c.geometry.coordinates.length;l<h;l++){const f=c[i(788)][i(1743)][l];f.length>0&&_[i(3759)](f[0])}c.geometry={type:"Polygon",coordinates:[_]}}else if(c[i(t._0x47ec02)].type===i(1944)){const _=[o];for(let l=0,h=c[i(t._0x47ec02)].geometries.length;l<h;l++){const f=c.geometry.geometries[l].coordinates;f.length>0&&_[i(3759)](f[0])}c.geometry={type:i(t._0x522d5f),coordinates:[_]}}return e}[_0x5e32ae(867)](e){}_setOptionsHook(e,t){const i=_0x5e32ae;var s;super._setOptionsHook(e,t),this._map&&(t.symbol&&!((s=t.symbol)!==null&&s!==void 0&&s[i(3205)])?this.eachGraphic(n=>{const o=i,c=getSymbolStyle(e.symbol,n.attr);delete c[o(1483)],n[o(4114)]=c}):(this.clear(),this.load()))}}register$2(_0x5e32ae(651),GeoJsonLayer);class BusineDataLayer extends GraphicLayer{_showHook(e){const t={_0x5d5a4c:472},i=_0x5e32ae;super._showHook(e),e&&this[i(t._0x5d5a4c)]&&(this[i(t._0x5d5a4c)]=![],this.load())}[_0x5e32ae(4158)](){const e={_0x21d104:4158},t=_0x5e32ae;super[t(e._0x21d104)](),this[t(575)]?this.load():this._hasLoad=!![]}_removedHook(){super._removedHook(),this.clear()}load(e){const t={_0x493838:1387,_0x4918af:1221,_0x3f06b9:1909,_0x31f05a:3798,_0x5a4a84:1573},i={_0x133bd1:3394},s=_0x5e32ae;e&&(Cesium__namespace.defaultValue(e[s(t._0x493838)],!![])&&(delete this.options.url,delete this[s(3798)].data),this.clear(),this.options={...this[s(3798)],...e}),this.options[s(t._0x4918af)]?fetchJson({...this[s(3798)],proxy:this._proxy}).then(n=>{!this._map||!this.isAdded||this._load_data(n)})[s(1201)](n=>{const o=s;var c;logError$1("fetchJson出错了",n),(c=this._readyPromise)!==null&&c!==void 0&&c[o(i._0x133bd1)]&&this._readyPromise.reject(n)}):this[s(3798)].data?this[s(t._0x3f06b9)](this[s(t._0x31f05a)].data):e&&logWarn(s(t._0x5a4a84))}_load_data(e){const t={_0x40ae07:3469,_0x71ec0e:3274,_0x54300c:2402,_0x5b9599:2180,_0x23aab0:3884,_0x13887e:3984,_0x5dbd32:1691,_0x12642e:1404},i=_0x5e32ae;this.options[i(t._0x40ae07)]&&this.options.dataColumn.split(".").forEach(_=>{e=e[_]}),this[i(3798)].formatData&&(e=this.options.formatData(e));const s=[];for(let c=0,_=e[i(3402)];c<_;c++){const l=e[c];let h={};l[i(4114)]&&(h={...l.style});const f=this.options[i(t._0x71ec0e)];let m=l.type&&hasType(l[i(3205)])?l.type:"point";if(f)if(isFunction(f))h=f(l,h)||h,h.type&&(m=h.type);else{m=f[i(3205)]||m;const C=getSymbolStyle(f,l||{});f.merge?h={...C,...h}:h=C}if(!hasType(m)){logError$1(i(t._0x54300c),l);continue}const g={type:m,style:h,attr:l};if(isPointType(m)){if(l.position)g.position=l[i(t._0x5b9599)];else if(this.options.formatPosition)g[i(2180)]=this.options.formatPosition(l,g);else if(this.options[i(t._0x23aab0)]||this.options.lngColumn){const C=l[this[i(3798)].latColumn||"lat"],E=l[this[i(3798)].lngColumn||"lng"],P=l[this.options.altColumn||"alt"]||0;g.position=[E,C,P]}else l.lat&&l.lng&&(g.position=[l.lng,l.lat,l[i(t._0x13887e)]||0]);if(!g.position){logError$1("无法解析数据position坐标位置",l);continue}}else if(l.positions?g.positions=l.positions:this[i(3798)].formatPosition&&(g.positions=this.options[i(t._0x5dbd32)](l,g)),!g.positions){logError$1("无法解析数据positions坐标位置",l);continue}s.push(g)}const n=this._addGraphicByArrOptions(s,{enabledEvent:![]}),o=[];n.forEach(c=>{o.push({...c.attr,graphic:c})}),this[i(t._0x12642e)](EventType.load,{jsonData:e,list:o,graphics:n}),this.options[i(3576)]&&this.flyToByAnimationEnd(),this._readyPromise[i(4056)](this)}_toJsonEx(e){}[_0x5e32ae(437)](e,t){const i={_0x4f5382:1387},s={_0x5a9ff3:3274},n=_0x5e32ae;var o;super._setOptionsHook(e,t),this._map&&(t.symbol&&!((o=t.symbol)!==null&&o!==void 0&&o.type)?this.eachGraphic(c=>{const _=_0x5210,l=getSymbolStyle(e[_(s._0x5a9ff3)],c[_(1528)]);c.style=l}):(this[n(i._0x4f5382)](),this.load()))}}register$2("busineData",BusineDataLayer);class EditTileset extends EditBase{get layer(){return this._graphic}get[_0x5e32ae(4114)](){return this[_0x5e32ae({_0x41e804:3284}._0x41e804)].options}bindDraggers(){const e=_0x5e32ae;this._contextmenuConfig_bak=this.layer._contextmenuConfig,this.createDragger({dragger:this[e(3284)],onDrag:(t,i)=>{this._graphic.position=i}})}finish(){const e={_0x4df2f9:2439,_0x5c2470:1538,_0x12af68:3331,_0x29e07:3775},t=_0x5e32ae;delete this[t(3284)]._draw_tooltip,delete this._graphic._isDragger,delete this._graphic._noMousePick,delete this._graphic[t(2997)],delete this[t(3284)][t(e._0x4df2f9)],this[t(3284)].unbindContextMenu(),this._contextmenuConfig_bak&&(this[t(e._0x5c2470)][t(e._0x12af68)]=this._contextmenuConfig_bak,delete this[t(e._0x29e07)])}_onLeftDownHandler(e){const t={_0x1cb46e:2180,_0x1403d5:1538,_0x1882ab:3595},i=_0x5e32ae,s=this._map.mouseEvent.getPickTarget(e[i(t._0x1cb46e)],e);if(s.layer!==this[i(t._0x1403d5)])return;const n=s==null?void 0:s.layer;!n||!n._isDragger||(this._map.scene.screenSpaceCameraController.enableInputs&&(this._map.scene[i(t._0x1882ab)].enableInputs=![],this._hasChangeEnableInputs=!![]),this._map._setEditCursor(!![]),n._closeAllControl(),this._draggerIng=n,this.fire(EventType.editMouseDown,{...e,...s,index:this[i(4293)].index}))}[_0x5e32ae(3169)](e){const t={_0x2a22c8:4296,_0x44edd0:3107},i=_0x5e32ae;this._map.openSmallTooltip(e.endPosition,this._map[i(t._0x2a22c8)]("_释放后完成修改"));const s=getCurrentMouseTerrainPosition(this._map[i(t._0x44edd0)],e.endPosition);s&&this._draggerIng.onDrag&&this._draggerIng[i(2439)](this._draggerIng,s),this.fire(EventType.editMouseMove,{...e,index:this._draggerIng[i(4063)],cartesian:s,windowPosition:e[i(1274)]})}[_0x5e32ae(3233)](e){const t={_0x22c28e:1890,_0x12077e:831},i=_0x5e32ae,s=this._map.mouseEvent.getPickTarget(e.endPosition,e),n=s==null?void 0:s.layer;if(n==null){this._map.closeSmallTooltip();return}if(s.layer!==this.layer||!n._isDragger||this._map.contextmenu[i(575)]&&this[i(t._0x22c28e)].contextmenu.target===n)return;const o=n[i(t._0x12077e)];o&&this._map.openSmallTooltip(e.endPosition,o)}getDraggerContextMenu(e){const t={_0x2b18a9:3966,_0x8c61e9:1890},i={_0x5accf0:3758},s=_0x5e32ae,n=super.getDraggerContextMenu(e);return Cesium__namespace.defaultValue(this[s(4114)][s(t._0x2b18a9)],!![])&&(n[s(3759)]({text:this[s(t._0x8c61e9)].getLangText("_按轴旋转"),icon:Icon.BloomEffectYes,show:o=>{const c=s;return!this._matrixRotate||this._matrixRotate._dragger_index!==e[c(4063)]},callback:o=>{const c=s;var _;const l=(_=o.graphic)!==null&&_!==void 0&&_.position?o[c(2118)]:o.layer;this.startRotateMatrix(l,o)}}),n.push({text:this._map.getLangText("_停止按轴旋转"),icon:Icon[s(672)],show:o=>{const c=s;return this._matrixRotate&&this._matrixRotate[c(i._0x5accf0)]===e.index},callback:o=>{this.stopRotateMatrix()}})),n}startRotateMatrix(e,t){const i={_0x220085:1538,_0x1f4fcb:2445,_0x33e474:2445,_0x147c73:3563},s=_0x5e32ae;!e&&(e=this[s(i._0x220085)]),this[s(1258)](),this.stopRotateMatrix(),this[s(i._0x1f4fcb)]=new MatrixRotate({map:this[s(1890)],position:e.position,roll:e.rotation_x,pitch:e.rotation_y,heading:e.rotation_z}),this._map.addThing(this[s(i._0x33e474)]),this._matrixRotate.on(EventType.change,n=>{e.rotation={x:formatNum$1(n.roll,2),y:formatNum$1(n.pitch,2),z:formatNum$1(n.heading,2)}}),e.off(EventType.updatePosition,this._updateMatrixMovePosition,this),e[s(1220)](EventType[s(3563)],this._updateMatrixRotatePosition,this),e.on(EventType[s(i._0x147c73)],this._updateMatrixRotatePosition,this)}}class TilesetEditBase extends BaseThing{constructor(e={}){super(e),!isMars3DCesium&&logError$1("该功能需要引入mars3d修改版Cesium库(mars3d-cesium库)才支持!",this),this._rangeNumber=0,this._maxRangeLength=0,this._areaList=[]}get list(){return this._areaList}get[_0x5e32ae(1538)](){return this._layer}set layer(e){const t={_0x36a733:3530,_0x49d7c8:3798};this._layer=e,e.readyPromise.then(i=>{const s=_0x5210;this[s(4176)]=e.upAxis,this._center=e.center[s(t._0x36a733)](),this[s(2624)](e.tileset),this[s(t._0x49d7c8)][s(1451)]&&this.options.area.forEach(n=>{const o=s;this[o(2717)](n[o(2436)],n)})})}get editHeight(){const e=_0x5e32ae;var t,i;const s=this.layer;return s!=null&&(t=s[e(3798)])!==null&&t!==void 0&&t.editHeight?s.options.editHeight:this[e(3798)].editHeight?this.options.editHeight:s!=null&&(i=s[e(3798)])!==null&&i!==void 0&&i.flatHeight?s.options.flatHeight:this.options.flatHeight?this[e(3798)].flatHeight:0}get tileset(){const e={_0x271982:1232,_0x141e79:2834},t=_0x5e32ae;return this[t(e._0x271982)][t(e._0x141e79)]}get length(){const e={_0x75148e:2589},t=_0x5e32ae;if(this._areaList){var i;return(i=this[t(e._0x75148e)])===null||i===void 0?void 0:i.length}else return 0}[_0x5e32ae(4158)](){this.options.layer&&(this.layer=this.options.layer)}[_0x5e32ae(2442)](){const e={_0x5d901b:1319},t=_0x5e32ae;this[t(1387)](),this[t(e._0x5d901b)]&&this.cacheMarsOptions()}[_0x5e32ae(1387)](){const e={_0x42c4c0:2589,_0x399c1e:2372},t=_0x5e32ae;this[t(e._0x42c4c0)]=[],this._rangeNumber=0,this[t(e._0x399c1e)]=0,Cesium__namespace.defined(this[t(2739)])&&(this[t(2739)][t(757)](),this[t(2739)]=void 0)}addArea(e,t={}){const i=_0x5e32ae;if(!e||e.length<3)return;e=LngLatArray.toCartesians(e),this._maxRangeLength=Math.max(this._maxRangeLength,e[i(3402)]);const s={id:getGlobalId(),show:!![],height:t[i(3865)]||0,positions:e};return this._areaList.push(s),this[i(855)]=!![],this[i(1404)](EventType[i(3908)],{area:s}),s}getAreaById(e){const t={_0x4d8801:3402},i=_0x5e32ae;if(isNumber(e)){for(let s=0;s<this._areaList[i(t._0x4d8801)];s++){const n=this._areaList[s];if(n.id===e)return n}return null}}[_0x5e32ae(3059)](e){const t=_0x5e32ae,i=this.getAreaById(e);i&&(i.show=![],this[t(855)]=!![])}[_0x5e32ae(1269)](e){const t=_0x5e32ae,i=this[t(1056)](e);i&&(i[t(575)]=!![],this[t(855)]=!![])}removeArea(e){const t=_0x5e32ae;isNumber(e)&&(e=this[t(1056)](e)),e&&(removeArrayItem(this._areaList,e),this._hasUpdate=!![],this.fire(EventType.removeItem,{area:e}))}_initLayer(e){const t={_0x130c51:932,_0x298168:1581,_0x20aa35:1538},i=_0x5e32ae;var s;const n=e[i(t._0x130c51)],o=this;e.update=function(_){o._hasUpdate&&o._update(_),n.bind(this)(_)};const c=this[i(t._0x298168)](!this.layer[i(683)]);if((s=Cesium__namespace.Mars3DEx)!==null&&s!==void 0&&s.getCacheOrAdd){const _=Cesium__namespace.Mars3DEx[i(1732)](this[i(t._0x20aa35)].id);_[this._customShadersKey]=c,this.cacheMarsOptions=function(){const l=i;e.update=n,delete _[o[l(3343)]]}}}_update(e){const t={_0x2ffdfa:2372},i={_0x2dd382:3103,_0x3ff219:3759,_0x19f7fd:3759},s={_0x1bf745:3916,_0x173c97:3759},n={_0x84fa51:3402,_0x10b44c:2436},o=_0x5e32ae;if(Cesium__namespace.defined(this._texture)&&(this._texture.destroy(),this[o(2739)]=void 0),this._maxRangeLength=0,this._rangeNumber=this[o(2589)].length,this[o(1812)]===0)return;let c=0;this._areaList.forEach(l=>{const h=o;l.show&&c<l.positions[h(n._0x84fa51)]&&(c=l[h(n._0x10b44c)].length)}),this[o(t._0x2ffdfa)]=c;const _=[];this._areaList.forEach((l,h)=>{const f=o;if(!l.show)return;const m=l.positions,g=m.length,C=Cesium__namespace.Cartesian3.fromRadians(this._center[f(1640)],this._center.latitude,this._center.height+l[f(3865)]+this[f(i._0x2dd382)]),E=Cesium__namespace.Cartesian3.normalize(C,new Cesium__namespace[f(3916)]);if(_.push(g),_.push(g),_.push(g),_.push(g),_.push(E.x),_.push(E.y),_[f(i._0x3ff219)](E.z),_[f(3759)](C.x/E.x),m.forEach(P=>{const w=f,M=P,T=Cesium__namespace.Cartesian3.normalize(M,new Cesium__namespace[w(s._0x1bf745)]);_.push(T.x),_.push(T.y),_[w(s._0x173c97)](T.z),_.push(M.x/T.x)}),g<c)for(let P=0;P<c-g;P++)_[f(i._0x3ff219)](0),_[f(i._0x3ff219)](0),_[f(i._0x19f7fd)](0),_[f(i._0x19f7fd)](0)}),this._texture=new Cesium__namespace.Texture({context:this._map.scene._context,pixelFormat:Cesium__namespace.PixelFormat.RGBA,pixelDatatype:Cesium__namespace.PixelDatatype.FLOAT,sampler:new Cesium__namespace[o(1253)]({wrapS:Cesium__namespace.TextureWrap.CLAMP_TO_EDGE,wrapT:Cesium__namespace.TextureWrap.CLAMP_TO_EDGE,minificationFilter:Cesium__namespace.TextureMinificationFilter[o(1516)],magnificationFilter:Cesium__namespace.TextureMagnificationFilter.NEAREST}),flipY:![],source:{width:c+2,height:this._rangeNumber,arrayBufferView:new Float32Array(_)}})}_getCustomShader(e=![]){return null}toJSON(){const e={_0x402fc9:1451},t=clone(this.options,["layer","eventParent"]);return t.area=[],this._areaList.forEach(i=>{const s=_0x5210;t[s(e._0x402fc9)].push({positions:LngLatArray[s(725)](i.positions)})}),t}}class TilesetClip extends TilesetEditBase{constructor(e={}){const t=_0x5e32ae;super(e),this._customShadersKey=t(1130)}_getCustomShader(e=![]){const t={_0x4b9519:2097},i=_0x5e32ae,s=new Cesium__namespace.CustomShader({fragmentShaderText:`
        uniform sampler2D u_mars3d_clip_texture;
        uniform int u_mars3d_clip_upAxis;
        uniform int u_mars3d_clip_rangeNumber;
        uniform int u_mars3d_clip_maxRangeLength;

        vec4 restorePoint_mars3d_clip(vec4 point) {
          vec3 outpoint = point.xyz * point.w;
          return czm_inverseModel * vec4(outpoint, 1.0);
        }

        vec4 getRegions_mars3d_clip(int x, int y) {
          float u = (float(x) + 0.5) / float(u_mars3d_clip_maxRangeLength + 2);
          float v = (float(y) + 0.5) / float(u_mars3d_clip_rangeNumber);
          vec4 point = texture(u_mars3d_clip_texture, vec2(u, v));
          return point;
        }

        bool inRectangle_mars3d_clip(vec3 textPoint) {
          for(int h = 0; h < 100000; h++){
              if(h >= u_mars3d_clip_rangeNumber) break;

              vec4 first = restorePoint_mars3d_clip(getRegions_mars3d_clip(2, h));
              float currentLength = getRegions_mars3d_clip(0, h).x;
              float counter = 0.0;
              float xinters = 0.0;
              for(int w = 0; w < 100000; w++){
                  if(float(w) >= currentLength) break;
                  int nextIndex = w + 1;
                  nextIndex = float(nextIndex) == currentLength ? 0 : nextIndex;
                  vec4 p1 = restorePoint_mars3d_clip(getRegions_mars3d_clip(w + 2, h));
                  vec4 p2 = restorePoint_mars3d_clip(getRegions_mars3d_clip(nextIndex + 2, h));

                  float p1x = p1.x;
                  float p1y = p1.z;
                  float p2x = p2.x;
                  float p2y = p2.z;
                  float textPointx = textPoint.x;
                  float textPointy = textPoint.z;

                  if(u_mars3d_clip_upAxis == 0){
                      p1x = p1.y;
                      p1y = p1.z;
                      p2x = p2.y;
                      p2y = p2.z;
                      textPointx = textPoint.y;
                      textPointy = textPoint.z;
                  } else if (u_mars3d_clip_upAxis == 1) {
                      p1x = p1.x;
                      p1y = p1.z;
                      p2x = p2.x;
                      p2y = p2.z;
                      textPointx = textPoint.x;
                      textPointy = textPoint.z;
                  } else {
                      p1x = p1.x;
                      p1y = p1.y;
                      p2x = p2.x;
                      p2y = p2.y;
                      textPointx = textPoint.x;
                      textPointy = textPoint.y;
                  }


                  if(textPointx > min(p1x, p2x) && textPointx <= max(p1x, p2x)){
                      if (textPointy <= max(p1y, p2y)){
                          if (p1x != p2x){
                              xinters = ((textPointx - p1x) * (p2y - p1y)) / (p2x - p1x) + p1y;
                              if (p1y == p2y || textPointy <= xinters){
                                  counter += 1.0;
                              }
                          }
                      }
                  }
              }
              if((mod(counter, 2.0) != 0.0)) {
                  return true;
              }
          }
          return false;
        }

        void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material){
            vec3 positionMC = fsInput.attributes.positionMC;
            if(inRectangle_mars3d_clip(positionMC)){
                discard;
            }
        }
      `});return s.uniformMap[i(2186)]=()=>{const n=i;return Cesium__namespace.defined(this._texture)?this._texture:this._map.scene._context[n(t._0x4b9519)]},s.uniformMap.u_mars3d_clip_upAxis=()=>this._modelUpAxis,s.uniformMap.u_mars3d_clip_rangeNumber=()=>this._rangeNumber,s.uniformMap[i(2938)]=()=>this._maxRangeLength,s}}class TilesetFlat extends TilesetEditBase{constructor(e={}){super(e),this._customShadersKey="flat"}_getCustomShader(e=![]){const t={_0x1cf7d2:995},i={_0x484e92:3107,_0x5d77f:2097},s=_0x5e32ae,n=new Cesium__namespace.CustomShader({vertexShaderText:`
          uniform sampler2D u_mars3d_flat_texture;
          uniform int u_mars3d_flat_upAxis;
          uniform int u_mars3d_flat_rangeNumber;
          uniform int u_mars3d_flat_maxRangeLength;

          vec4 restorePoint_mars3d_flat(vec4 point) {
            vec3 outpoint = point.xyz * point.w;
            return czm_inverseModel * vec4(outpoint, 1.0);
          }

          vec4 getRegions_mars3d_flat(int x, int y) {
            float u = (float(x) + 0.5) / float(u_mars3d_flat_maxRangeLength + 2);
            float v = (float(y) + 0.5) / float(u_mars3d_flat_rangeNumber);
            vec4 point = texture(u_mars3d_flat_texture, vec2(u, v));
            return point;
          }

          int inRectangle_mars3d_flat(vec3 textPoint) {
            for(int h = 0; h < 100000; h++){
                if(h >= u_mars3d_flat_rangeNumber) break;

                vec4 first = restorePoint_mars3d_flat(getRegions_mars3d_flat(2, h));
                float currentLength = getRegions_mars3d_flat(0, h).x;
                float counter = 0.0;
                float xinters = 0.0;
                for(int w = 0; w < 100000; w++){
                    if(float(w) >= currentLength) break;
                    int nextIndex = w + 1;
                    nextIndex = float(nextIndex) == currentLength ? 0 : nextIndex;
                    vec4 p1 = restorePoint_mars3d_flat(getRegions_mars3d_flat(w + 2, h));
                    vec4 p2 = restorePoint_mars3d_flat(getRegions_mars3d_flat(nextIndex + 2, h));

                    float p1x = p1.x;
                    float p1y = p1.z;
                    float p2x = p2.x;
                    float p2y = p2.z;
                    float textPointx = textPoint.x;
                    float textPointy = textPoint.z;

                    if(u_mars3d_flat_upAxis == 0){
                        p1x = p1.y;
                        p1y = p1.z;
                        p2x = p2.y;
                        p2y = p2.z;
                        textPointx = textPoint.y;
                        textPointy = textPoint.z;
                    } else if (u_mars3d_flat_upAxis == 1) {
                        p1x = p1.x;
                        p1y = p1.z;
                        p2x = p2.x;
                        p2y = p2.z;
                        textPointx = textPoint.x;
                        textPointy = textPoint.z;
                    } else {
                        p1x = p1.x;
                        p1y = p1.y;
                        p2x = p2.x;
                        p2y = p2.y;
                        textPointx = textPoint.x;
                        textPointy = textPoint.y;
                    }


                    if(textPointx > min(p1x, p2x) && textPointx <= max(p1x, p2x)){
                        if (textPointy <= max(p1y, p2y)){
                            if (p1x != p2x){
                                xinters = ((textPointx - p1x) * (p2y - p1y)) / (p2x - p1x) + p1y;
                                if (p1y == p2y || textPointy <= xinters){
                                    counter += 1.0;
                                }
                            }
                        }
                    }
                }
                if((mod(counter, 2.0) != 0.0)) {
                    return h;
                }
            }
            return 99999;
          }

          void vertexMain(VertexInput vsInput, inout czm_modelVertexOutput vsOutput) {
              vec3 positionMC = vsInput.attributes.positionMC;
              int rectangleIndex = inRectangle_mars3d_flat(positionMC);
              if(rectangleIndex != 99999){
                vec4 modelDatumPoint = restorePoint_mars3d_flat(getRegions_mars3d_flat(1, rectangleIndex));
                if(u_mars3d_flat_upAxis == 0){
                    vsOutput.positionMC = vec3(modelDatumPoint.x + positionMC.x * 0.0005, positionMC.y, positionMC.z);
                } else if (u_mars3d_flat_upAxis == 1){
                    vsOutput.positionMC = vec3(positionMC.x, modelDatumPoint.y + positionMC.y * 0.0005, positionMC.z);
                } else {
                    vsOutput.positionMC = vec3(positionMC.x, positionMC.y, modelDatumPoint.z + positionMC.z * 0.0005);
                }
              }
          }`});return n[s(995)].u_mars3d_flat_texture=()=>{const o=s;return Cesium__namespace.defined(this._texture)?this._texture:this._map[o(i._0x484e92)]._context[o(i._0x5d77f)]},n.uniformMap.u_mars3d_flat_upAxis=()=>this._modelUpAxis,n[s(t._0x1cf7d2)].u_mars3d_flat_rangeNumber=()=>this._rangeNumber,n[s(t._0x1cf7d2)].u_mars3d_flat_maxRangeLength=()=>this._maxRangeLength,n}updateHeight(e,t){const i=_0x5e32ae;if(Cesium__namespace.defined(t)){const s=this.getAreaById(t);s&&(s[i(3865)]=e,this._hasUpdate=!![])}else{for(let s=0;s<this._areaList.length;s++){const n=this[i(2589)][s];n.height=e}this._hasUpdate=!![]}}}class TilesetFlood extends TilesetEditBase{constructor(e={}){const t={_0x19f4eb:4275,_0x119381:2613,_0x1adc24:3798,_0x5c7731:2092,_0x2964c9:1355},i=_0x5e32ae;super(e),this._customShadersKey=i(t._0x19f4eb),this.options[i(t._0x119381)]=this[i(t._0x1adc24)].speed??5,this.color=this.options[i(t._0x5c7731)]||new Cesium__namespace.Color(.15,.7,.95,.5),this._limitMin=this.options[i(t._0x2964c9)]??![]}get speed(){const e=_0x5e32ae;return this[e(3798)][e(2613)]}set[_0x5e32ae(2613)](e){const t={_0x1fbfaa:3798},i=_0x5e32ae;this[i(t._0x1fbfaa)].speed=e}get floodAll(){return this.options.floodAll??![]}set floodAll(e){const t={_0xb455dc:1248},i=_0x5e32ae;this.options[i(t._0xb455dc)]=e}get height(){return this.options.height}set height(e){const t={_0x1bc322:2738,_0x1c3075:3103},i=_0x5e32ae;this.options.height=e,this[i(t._0x1bc322)]=e+this[i(t._0x1c3075)]}get color(){return this[_0x5e32ae(1109)]}set color(e){const t={_0x13b1ba:2200},i=_0x5e32ae;this._color=getCesiumColor(e,new Cesium__namespace[i(t._0x13b1ba)](.15,.7,.95,.5))}start(){const e={_0x3e8563:4111,_0x2c51e2:905,_0x43d2f8:3865},t=_0x5e32ae;this.stop(),Cesium__namespace.defined(this[t(3798)][t(e._0x3e8563)])?(this[t(e._0x2c51e2)]=this.options.minHeight+this.editHeight,this[t(e._0x43d2f8)]=this.options.minHeight):(this[t(905)]=-9999,this.height=0),this.isStart=!![],this.fire(EventType[t(2476)]),this[t(1890)].on(EventType.clockTick,this._onClockTickHandler,this)}_onClockTickHandler(e){const t={_0x450b65:3865,_0x344946:4111},i=_0x5e32ae;if(this[i(3865)]+=this.speed/50,this[i(t._0x450b65)]>this.options.maxHeight){this.height=this.options.maxHeight,this.stop();return}if(this[i(3865)]<this.options[i(t._0x344946)]){this[i(3865)]=this.options.minHeight,this[i(3874)]();return}this.fire(EventType.change,{height:this.height})}stop(){const e=_0x5e32ae;this[e(2236)]&&(this._map.off(EventType[e(1213)],this._onClockTickHandler,this),this[e(2236)]=![],this.fire(EventType[e(2384)]))}restart(){this[_0x5e32ae(2476)]()}clear(){const e=_0x5e32ae;this.stop(),super.clear(),delete this[e(905)],delete this._currentHeight}_getCustomShader(e=![]){const t={_0x52931a:1273,_0x293564:3996},i={_0x41d020:4176},s={_0x4442b0:2739},n=_0x5e32ae,o=new Cesium__namespace.CustomShader({fragmentShaderText:n(t._0x52931a)});return o.uniformMap[n(t._0x293564)]=()=>{const c=n;return Cesium__namespace.defined(this._texture)?this[c(s._0x4442b0)]:this._map.scene._context.defaultTexture},o.uniformMap.u_mars3d_flood_upAxis=()=>this[n(i._0x41d020)],o[n(995)].u_mars3d_flood_rangeNumber=()=>this._rangeNumber,o[n(995)][n(1352)]=()=>this[n(2372)],o.uniformMap.u_mars3d_isStart=()=>Cesium__namespace.defined(this._currentHeight),o.uniformMap.u_mars3d_flood_floodAll=()=>this[n(1248)],o.uniformMap.u_mars3d_flood_color=()=>this.color,o[n(995)].u_mars3d_flood_currentheight=()=>this[n(2738)],o.uniformMap.u_mars3d_flood_min_height=()=>this[n(905)],o.uniformMap.u_mars3d_flood_limitMin=()=>this._limitMin,this.uniformMap=o[n(995)],o}}class TilesetPlanClip extends BaseThing{get clipTarget(){return this._tileset}set clipTarget(e){const t={_0x3caf07:2436,_0x315082:3798},i=_0x5e32ae;this[i(4280)]=e,this._inverseMatrix=null,Cesium__namespace[i(515)](this.options.positions)&&(this[i(t._0x3caf07)]=this[i(t._0x315082)].positions),Cesium__namespace.defined(this.options.type)&&(this[i(3205)]=this.options[i(3205)]),Cesium__namespace.defined(this.options.distance)&&(this[i(2776)]=this.options[i(2776)])}get layer(){return this[_0x5e32ae({_0x547d59:2873}._0x547d59)]}set[_0x5e32ae(1538)](e){this._layer=e,e.loadOk?this.clipTarget=e.tileset:e.on(EventType.load,t=>{this.clipTarget=e.tileset})}get[_0x5e32ae(422)](){return this[_0x5e32ae(1472)]}get inverseMatrix(){const e={_0xf1bd4e:3250,_0x2bbaa1:4280,_0x2b1e43:683},t=_0x5e32ae;if(!this._inverseMatrix){let i;const s=this._tileset.root.transform;s&&s[t(2661)](Cesium__namespace.Matrix4.IDENTITY)||!s?i=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(this._tileset.boundingSphere.center):i=Cesium__namespace.Matrix4[t(e._0xf1bd4e)](this[t(e._0x2bbaa1)].root[t(e._0x2b1e43)]),this._inverseMatrix=Cesium__namespace.Matrix4.inverseTransformation(i,new Cesium__namespace.Matrix4)}return this._inverseMatrix}get center(){const e={_0x41b845:4064},t=_0x5e32ae;return this._layer?this._layer.position:this._tileset.boundingSphere[t(e._0x41b845)]}get[_0x5e32ae(2776)](){return this._distance}set[_0x5e32ae(2776)](e){const t=_0x5e32ae;if(this._distance=e,this[t(1472)]&&this.clippingPlanes.length>0){const i=this.clippingPlanes.get(this.clippingPlanes.length-1);i.distance=e}}get[_0x5e32ae(676)](){return this._normal_angle1||0}set angle1(e){const t=_0x5e32ae;if(this._normal_angle1=e,this.clippingPlanes&&this.clippingPlanes.length>0){const i=this[t(1472)].get(this.clippingPlanes.length-1);this[t(1918)](i,e,this.angle2)}}get angle2(){return this._normal_angle2||0}set angle2(e){const t={_0x22e7ed:3402,_0x59e0ce:1918},i=_0x5e32ae;if(this._normal_angle2=e,this.clippingPlanes&&this.clippingPlanes.length>0){const s=this.clippingPlanes.get(this[i(1472)][i(t._0x22e7ed)]-1);this[i(t._0x59e0ce)](s,this.angle1,e)}}get[_0x5e32ae(3281)](){return this[_0x5e32ae({_0x63373f:1967}._0x63373f)]||0}set[_0x5e32ae(3281)](e){const t={_0x4eb15f:1196},i=_0x5e32ae;if(this._normalZ=e,this.clippingPlanes&&this.clippingPlanes.length>0){const s=this[i(1472)][i(t._0x4eb15f)](this[i(1472)].length-1);s.normal.z=e}}get type(){return this[_0x5e32ae({_0x48a29c:3640}._0x48a29c)]}set[_0x5e32ae(3205)](e){const t={_0x14a2d5:1686},i=_0x5e32ae;this._type=e;let s;switch(e){case ClipType.Z:s=[new Cesium__namespace[i(1049)](new Cesium__namespace.Cartesian3(0,0,1),1)];break;case ClipType.ZR:s=[new Cesium__namespace.ClippingPlane(new Cesium__namespace.Cartesian3(0,0,-1),1)];break;case ClipType.X:s=[new Cesium__namespace.ClippingPlane(new Cesium__namespace[i(3916)](1,0,0),1)];break;case ClipType.XR:s=[new Cesium__namespace.ClippingPlane(new Cesium__namespace.Cartesian3(-1,0,0),1)];break;case ClipType.Y:s=[new Cesium__namespace.ClippingPlane(new Cesium__namespace.Cartesian3(0,1,0),1)];break;case ClipType.YR:s=[new Cesium__namespace.ClippingPlane(new Cesium__namespace[i(3916)](0,-1,0),1)];break}this[i(t._0x14a2d5)](s)}get positions(){return this._positions}set[_0x5e32ae(2436)](e){const t={_0x3329c5:3270},i=_0x5e32ae;this._positions=LngLatArray.toCartesians(e),this._setPositions(this[i(t._0x3329c5)])}get clipOutSide(){return this.options.clipOutSide}set[_0x5e32ae(3929)](e){const t={_0x488e31:3270},i=_0x5e32ae;this.options[i(3929)]=e,this[i(1890)]&&this._positions&&this._setPositions(this[i(t._0x488e31)])}_mountedHook(){const e={_0x1f0aaf:3798,_0x36d558:1471,_0x11a423:3798},t={_0x1b336f:2004},i=_0x5e32ae;this.options.showPlane&&(this[i(993)]=new GraphicLayer({...this[i(e._0x1f0aaf)],private:!![]}),this.options[i(e._0x36d558)]&&this._graphicLayer.bindContextMenu([{text:this._map[i(4296)]("_删除"),icon:Icon[i(506)],callback:s=>{const n=i,o=s.graphic;o&&(this[n(993)].removeGraphic(o),this.fire(EventType[n(t._0x1b336f)],s))}}])),this.options.layer?this.layer=this.options[i(1538)]:this[i(e._0x11a423)].tileset&&(this.clipTarget=this.options.tileset)}_map_click(e){const t=_0x5e32ae;this._last_planeGraphics&&(this._last_planeGraphics.hasEdit=![],this[t(2744)].material.color=this[t(2744)].material.color_bak,delete this[t(2744)]),this[t(2627)](e)}_graphicLayer_click(e){const t={_0x21cfeb:2367,_0x42e41c:1877},i=_0x5e32ae;var s,n;const o=(s=e.graphic)===null||s===void 0||(n=s.entity)===null||n===void 0?void 0:n[i(659)];Cesium__namespace[i(515)](o)&&(this[i(t._0x21cfeb)](),o.hasEdit=!o[i(2639)],o.material.color_bak=o[i(t._0x42e41c)].color,o.material.color=e.graphic.style.editColor,o.hasEdit&&(this[i(2744)]=o),e.stopPropagation())}[_0x5e32ae(697)](e){const t={_0x3e4037:1890},i=_0x5e32ae;var s,n;const o=(s=e.graphic)===null||s===void 0||(n=s.entity)===null||n===void 0?void 0:n.plane;Cesium__namespace.defined(o)&&o.hasEdit&&(this._selectedPlane=o.plane.getValue(),this._map[i(3107)].screenSpaceCameraController.enableInputs&&(this[i(t._0x3e4037)].scene.screenSpaceCameraController.enableInputs=![],this._hasChangeEnableInputs=!![]))}_graphicLayer_leftUp(e){const t={_0x21a5d3:515},i=_0x5e32ae;Cesium__namespace[i(t._0x21a5d3)](this[i(1628)])&&(delete this._selectedPlane,this._hasChangeEnableInputs&&(this._map.scene.screenSpaceCameraController.enableInputs=!![],delete this._hasChangeEnableInputs))}_map_mouseMove(e){const t={_0x44cfde:2776,_0x233af5:1890},i=_0x5e32ae;if(Cesium__namespace.defined(this[i(1628)])){const s=e.startPosition.x-e.endPosition.x,n=e.startPosition.y-e[i(1274)].y,o=(s+n)/2;this._selectedPlane[i(2776)]=(this._selectedPlane[i(t._0x44cfde)]||0)+o,this._map.openSmallTooltip(e[i(1274)],this._map.getLangText("_释放后完成修改"))}else this[i(t._0x233af5)][i(3635)]()}_addedHook(){const e={_0x385664:1890,_0x3fa4fc:1948,_0x57bfe1:993,_0x107a2e:697,_0x57569a:3798,_0x2340bf:515,_0x33544c:3798,_0x108b69:515,_0x2ad76b:3798,_0x3e9822:2776},t=_0x5e32ae;this._graphicLayer&&(this[t(1890)].addLayer(this._graphicLayer),this.options[t(1471)]&&(this[t(e._0x385664)].on(EventType[t(e._0x3fa4fc)],this._map_click,this),this._graphicLayer.on(EventType[t(1948)],this._graphicLayer_click,this),this[t(e._0x57bfe1)].on(EventType.leftDown,this[t(e._0x107a2e)],this),this._graphicLayer.on(EventType.leftUp,this._graphicLayer_leftUp,this),this[t(1890)].on(EventType.mouseMove,this._map_mouseMove,this))),this.clipTarget&&(Cesium__namespace.defined(this.options.positions)&&(this.positions=this[t(e._0x57569a)].positions),Cesium__namespace[t(e._0x2340bf)](this[t(e._0x33544c)].type)&&(this.type=this.options.type),Cesium__namespace[t(e._0x108b69)](this.options[t(2776)])&&(this.distance=this[t(e._0x2ad76b)][t(e._0x3e9822)]))}_removedHook(){const e={_0x2c35d2:3798,_0x4c9476:1471,_0x23787c:1220,_0x2e5272:1220,_0x523adf:2627,_0x4d27f3:4055,_0x5c9d05:2642},t=_0x5e32ae;this.clear(),this._graphicLayer&&(this[t(e._0x2c35d2)][t(e._0x4c9476)]&&(this._map.off(EventType.click,this[t(2367)],this),this._graphicLayer.off(EventType[t(1948)],this._graphicLayer_click,this),this._graphicLayer[t(e._0x23787c)](EventType.leftDown,this._graphicLayer_leftDown,this),this._graphicLayer[t(e._0x2e5272)](EventType.leftUp,this[t(e._0x523adf)],this),this._map.off(EventType[t(e._0x4d27f3)],this._map_mouseMove,this)),this._map[t(e._0x5c9d05)](this._graphicLayer))}_setPositions(e){const t={_0x58d47d:484,_0x38f4cc:515,_0x3bb4a1:3759,_0x23958c:3916},i=_0x5e32ae;if(e.length<2)return;const s=[];if(e.length===2){const n=this._createPlaneByLine(e[0],e[1]);n&&s[i(3759)](n)}else{let n;const o=formatNum$1(getAngle(e[0],e[1]),2);if(o>-.02&&o<.02)n=![];else{const _=formatNum$1(getAngle(e[0],e[2]),2);n=o<_}this.clipOutSide&&(n=!n);let c;for(let _=0,l=e.length;_<l;++_){const h=(_+1)%l;n?c=this._createPlaneByLine(e[h],e[_]):c=this[i(t._0x58d47d)](e[_],e[h]),c&&((Cesium__namespace[i(t._0x38f4cc)](this._normal_angle1)||Cesium__namespace.defined(this._normal_angle2))&&this._updateNormal(c,this.angle1,this[i(2548)]),s[i(t._0x3bb4a1)](c))}Cesium__namespace[i(515)](this.options.height)&&(c=new Cesium__namespace.ClippingPlane(new Cesium__namespace[i(t._0x23958c)](0,0,-1),this.options.height),s.push(c))}this.setPlanes(s)}_createPlaneByLine(e,t){const i={_0xa35d01:1975,_0xef89fe:3916},s=_0x5e32ae;if(Cesium__namespace.Cartesian3.distance(e,t)<.1)return null;const n=this[s(i._0xa35d01)],o=Cesium__namespace.Matrix4.multiplyByPoint(n,e,new Cesium__namespace[s(i._0xef89fe)]),c=Cesium__namespace.Matrix4.multiplyByPoint(n,t,new Cesium__namespace.Cartesian3),_=new Cesium__namespace.Cartesian3(0,0,10),l=Cesium__namespace.Cartesian3.subtract(c,o,new Cesium__namespace[s(i._0xef89fe)]);let h=Cesium__namespace.Cartesian3.cross(l,_,new Cesium__namespace.Cartesian3);h=Cesium__namespace.Cartesian3.normalize(h,h);const f=Cesium__namespace.Plane.fromPointNormal(o,h);return Cesium__namespace.ClippingPlane.fromPlane(f)}setPlanes(e){const t={_0x597b75:1472,_0xa4d070:3798,_0x31b4a8:1387,_0x474e9b:3194,_0x2e4995:2873,_0xa96cd4:3703},i=_0x5e32ae;if(!e)return;const s=new Cesium__namespace[i(4232)]({planes:e,edgeWidth:this.options.edgeWidth??0,edgeColor:this.options.edgeColor??Cesium__namespace.Color.WHITE,unionClippingRegions:this.clipOutSide??![]});if(this[i(1472)]=s,this.clipTarget&&(this.clipTarget[i(t._0x597b75)]=s),this[i(t._0xa4d070)].showPlane){this._graphicLayer[i(t._0x31b4a8)]();const o=this._tileset.boundingSphere[i(t._0x474e9b)];for(let c=0;c<s.length;++c){var n;const _=s.get(c),l=new PlaneEntity({position:this[i(4064)],style:{heading:360-(((n=this[i(t._0x2e4995)])===null||n===void 0?void 0:n.rotation_z)??0),dimensions:new Cesium__namespace.Cartesian2(o,o),color:Cesium__namespace.Color[i(2995)][i(3518)](.2),editColor:Cesium__namespace.Color.WHITE.withAlpha(.5),outline:!![],outlineColor:Cesium__namespace[i(2200)].WHITE,...this.options.planeStyle||{},plane:new Cesium__namespace[i(t._0xa96cd4)](createPlaneUpdateFunction(_),![])}});this._graphicLayer.addGraphic(l)}}}clear(){const e={_0x52d90e:1387,_0xa80095:3918,_0x5d1542:1472,_0x1490f5:3517},t=_0x5e32ae;if(this._graphicLayer&&this._graphicLayer[t(e._0x52d90e)](),delete this._normalZ,delete this[t(e._0xa80095)],delete this[t(3812)],delete this._positions,this[t(3798)][t(3929)]=![],this.clippingPlanes&&delete this[t(e._0x5d1542)],this.clipTarget){var i;(i=this.clipTarget[t(1472)])!==null&&i!==void 0&&i.enabled&&(this.clipTarget[t(1472)][t(968)]=![]),this[t(e._0x1490f5)].clippingPlanes=void 0}}updateAllDistance(e){const t={_0x4408d7:1472},i=_0x5e32ae;if(this[i(1472)]!=null)for(let s=0;s<this.clippingPlanes.length;s++){const n=this[i(t._0x4408d7)].get(s);n.distance=e}}updateAllNormal(e,t){if(this.clippingPlanes!=null)for(let i=0;i<this.clippingPlanes.length;i++){const s=this.clippingPlanes.get(i);this._updateNormal(s,e,t)}}[_0x5e32ae(1918)](e,t,i){const s={_0x401bb1:1286,_0x26bb5c:1567,_0x3d19e8:442,_0x21cc92:442},n=_0x5e32ae,o=Cesium__namespace[n(s._0x401bb1)][n(s._0x26bb5c)](t),c=Cesium__namespace.Math[n(s._0x26bb5c)](i),_=Math[n(s._0x3d19e8)](o)*Math.cos(c),l=Math.sin(o)*Math[n(s._0x21cc92)](c),h=Math[n(1784)](o);e.normal.x=_,e[n(2337)].y=l,e.normal.z=h}toJSON(){const e=clone(this.options,["layer","eventParent"]);return this._positions&&(e.positions=LngLatArray.toArray(this.positions)),e}}TilesetPlanClip[_0x5e32ae(667)]=ClipType;function createPlaneUpdateFunction(r){return function(){return r}}class TilesetLayer extends BaseGraphicLayer{constructor(e={}){const t={_0x37755c:4009},i=_0x5e32ae;super(e),this.orginRotation={x:0,y:0,z:0},this[i(4035)]=new LngLatPoint,this[i(t._0x37755c)]=e.hasEdit??!![],this._marsOptions={}}get layer(){return this._tileset}get tileset(){return this._tileset}get modelMatrix(){const e={_0x545a46:2748},t=_0x5e32ae;return this.loadOk?(!this._tilesetMatrix&&(this.transform?this._tilesetMatrix=this._tileset.root.transform:this[t(e._0x545a46)]=Cesium__namespace.Transforms[t(3684)](this._tileset.boundingSphere.center)),this[t(2748)]):Cesium__namespace.Matrix4.ZERO}get[_0x5e32ae(1975)](){const e={_0x2d93fd:1182},t=_0x5e32ae;return this.loadOk?(!this._inverseMatrix&&(this._inverseMatrix=Cesium__namespace.Matrix4.inverse(this.modelMatrix,new Cesium__namespace.Matrix4)),this[t(e._0x2d93fd)]):Cesium__namespace.Matrix4.ZERO}get highlight(){const e=_0x5e32ae;return this.options[e(1483)]}set[_0x5e32ae(1483)](e){const t={_0x5c0420:3021},i=_0x5e32ae;this.options.highlight=e,e?this.bindHighlight(this.options[i(1483)]):this[i(t._0x5c0420)]()}get marsJzwStyle(){const e={_0x4dff1a:4147},t=_0x5e32ae;return this.options[t(e._0x4dff1a)]}set marsJzwStyle(e){this.options.marsJzwStyle=e,this._conventMarsOptions()}get style(){return this[_0x5e32ae({_0x175144:3798}._0x175144)].style}set style(e){const t={_0x14dc4d:889,_0x332d65:4280},i={_0x38f991:4246},s=_0x5e32ae;this.options.style=e,this._tileset&&(e instanceof Cesium__namespace[s(t._0x14dc4d)]?this[s(t._0x332d65)].style=e:typeof e=="function"?this._tileset.style=new Cesium__namespace.Cesium3DTileStyle({color:{evaluateColor:function(n,o){const c=s,_=e(n);return _?Cesium__namespace.Color[c(i._0x38f991)](Cesium__namespace.Color.fromCssColorString(_),o):o}}}):this._tileset.style=new Cesium__namespace[s(t._0x14dc4d)](e))}get customShader(){const e={_0x13d4a8:608},t=_0x5e32ae;return this.options[t(e._0x13d4a8)]}set customShader(e){const t={_0x2ea81e:608},i=_0x5e32ae;this.options.customShader=e,this._tileset&&(this[i(4280)][i(t._0x2ea81e)]=e)}get[_0x5e32ae(1829)](){return this._orginCenterPoint}get orginCenterPosition(){return this._orginCenterPosition}get[_0x5e32ae(2180)](){return this._center.toCartesian()}set position(e){this.center=e}get[_0x5e32ae(4064)](){return this._center}set[_0x5e32ae(4064)](e){const t={_0x38f735:723},i=_0x5e32ae;this[i(t._0x38f735)]=LngLatPoint[i(1426)](e),this[i(2253)]()}get[_0x5e32ae(3865)](){return this.alt}set height(e){this.alt=e}get alt(){const e={_0x52b1d0:3984},t=_0x5e32ae;if(this.center)return this.center[t(e._0x52b1d0)]}set alt(e){const t=_0x5e32ae;this._tileset&&(this.center[t(3984)]=e,this.updateMatrix())}get boundingSphere(){var e;return(e=this._tileset)===null||e===void 0?void 0:e.boundingSphere}get upAxis(){const e={_0x2a2d9b:4280},t=_0x5e32ae;var i,s;if(Cesium__namespace.defined((i=this._tileset)===null||i===void 0?void 0:i._modelUpAxis)){var n;return(n=this._tileset)===null||n===void 0?void 0:n._modelUpAxis}if(Cesium__namespace.defined((s=this._tileset)===null||s===void 0?void 0:s._gltfUpAxis)){var o;return(o=this[t(e._0x2a2d9b)])===null||o===void 0?void 0:o._gltfUpAxis}}get[_0x5e32ae(2279)](){const e=_0x5e32ae;return this.options.rotation?this.options.rotation:this[e(1774)]}set rotation(e){const t={_0x4a0c6d:2279},i=_0x5e32ae;this.options[i(t._0x4a0c6d)]=e,this[i(2253)]()}get rotation_x(){const e={_0x3dfb67:515,_0x2cf1e8:2279},t=_0x5e32ae;return this.options.rotation&&Cesium__namespace[t(e._0x3dfb67)](this.options[t(2279)].x)?this[t(3798)][t(e._0x2cf1e8)].x:this.orginRotation.x}set[_0x5e32ae(3643)](e){const t={_0xcceb97:3798,_0x36dd19:2279},i=_0x5e32ae;this[i(t._0xcceb97)][i(t._0x36dd19)]=this.options.rotation||{},this.options.rotation.x=e,this.updateMatrix()}get rotation_y(){const e=_0x5e32ae;return this[e(3798)].rotation&&Cesium__namespace.defined(this.options[e(2279)].y)?this.options.rotation.y:this.orginRotation.y}set rotation_y(e){const t={_0x5f3b09:3798},i=_0x5e32ae;this.options.rotation=this[i(t._0x5f3b09)].rotation||{},this.options.rotation.y=e,this.updateMatrix()}get[_0x5e32ae(2206)](){const e={_0xc8de25:3798},t=_0x5e32ae;return this.options.rotation&&Cesium__namespace.defined(this[t(e._0xc8de25)].rotation.z)?this.options[t(2279)].z:this.orginRotation.z}set[_0x5e32ae(2206)](e){const t={_0x13c43f:3798,_0x268822:2279},i=_0x5e32ae;this[i(t._0x13c43f)].rotation=this[i(t._0x13c43f)].rotation||{},this.options[i(t._0x268822)].z=e,this.updateMatrix()}get[_0x5e32ae(1372)](){return this.options.axis||""}set axis(e){const t={_0x362429:1372},i=_0x5e32ae;this.options[i(t._0x362429)]=e,this.updateMatrix()}get[_0x5e32ae(3206)](){return this[_0x5e32ae({_0x4ff4e5:3798}._0x4ff4e5)].scale||1}set[_0x5e32ae(3206)](e){const t={_0x5364ba:3206},i=_0x5e32ae;this.options[i(t._0x5364ba)]=e,this.updateMatrix()}get allowDrillPick(){return this.options.allowDrillPick}set allowDrillPick(e){const t={_0x508bcf:3798},i=_0x5e32ae;this[i(t._0x508bcf)].allowDrillPick=e}get luminanceAtZenith(){const e=_0x5e32ae;return this.options[e(621)]}set luminanceAtZenith(e){const t={_0x1d2cb5:609},i=_0x5e32ae;this[i(3798)][i(621)]=e,!this._tileset.imageBasedLighting&&(this._tileset[i(t._0x1d2cb5)]=new Cesium__namespace[i(2707)]({luminanceAtZenith:e})),this[i(4280)].imageBasedLighting.luminanceAtZenith=e}get planClip(){return this._map&&!this._tilesetPlanClip&&this._initTilesetPlanClip(),this._tilesetPlanClip}get hasEdit(){return this._hasEdit&&this.transform}set hasEdit(e){const t={_0x284c1c:4009},i=_0x5e32ae;this[i(t._0x284c1c)]=e}_initTilesetPlanClip(){const e={_0x2a9b5e:1920},t=_0x5e32ae;this._tilesetPlanClip&&this._tilesetPlanClip.destroy(),this[t(e._0x2a9b5e)]=new TilesetPlanClip({...this.options.planClip,layer:this}),this._map.addThing(this[t(1920)])}get clip(){const e={_0x46a330:3398,_0x18edcd:3603,_0x5d9959:1359},t=_0x5e32ae;return this._map&&!this[t(e._0x46a330)]&&(this[t(e._0x18edcd)](),this[t(e._0x5d9959)]()),this._tilesetClip}_initTilesetClip(){this[_0x5e32ae({_0x1dcf2d:3398}._0x1dcf2d)]&&this._tilesetClip.destroy(),this._tilesetClip=new TilesetClip({...this.options.clip,layer:this}),this._map.addThing(this._tilesetClip)}get flat(){const e=_0x5e32ae;return this._map&&!this._tilesetFlat&&(this.reload(),this._initTilesetFlat()),this[e(2082)]}[_0x5e32ae(3273)](){const e={_0x4587c5:2082,_0x51ba65:3798},t=_0x5e32ae;this._tilesetFlat&&this[t(e._0x4587c5)].destroy(),this[t(e._0x4587c5)]=new TilesetFlat({...this[t(e._0x51ba65)][t(1559)],layer:this}),this._map[t(3495)](this._tilesetFlat)}get flood(){const e={_0x37458b:2653},t=_0x5e32ae;return this._map&&!this[t(2653)]&&(this.reload(),this._initTilesetFlood()),this[t(e._0x37458b)]}[_0x5e32ae(2194)](){const e=_0x5e32ae;this._tilesetFlood&&this._tilesetFlood[e(757)](),this._tilesetFlood=new TilesetFlood({...this.options.flood,layer:this}),this._map.addThing(this._tilesetFlood)}get isEditing(){return this._enabledEdit}async[_0x5e32ae(3613)](){const e={_0x33bf3f:848,_0x4e86e6:1221,_0x21d542:3146},t=_0x5e32ae,i={...this.options,marsOptions:this[t(e._0x33bf3f)]};return delete i[t(e._0x4e86e6)],await Cesium__namespace.Cesium3DTileset[t(e._0x21d542)](getUrlResource(this[t(3798)]),i)}_addedHook(){const e={_0x4b9dae:4275,_0xd1b756:3798},t={_0x35b289:1291},i=_0x5e32ae;var s,n,o,c,_,l,h,f,m,g,C,E;this[i(3210)]=![],super[i(4158)](),this._conventMarsOptions(),(((s=this.options.flat)===null||s===void 0||(n=s[i(1451)])===null||n===void 0?void 0:n.length)>0||(o=this.options.flat)!==null&&o!==void 0&&o[i(968)])&&this._initTilesetFlat(),(((c=this.options[i(e._0x4b9dae)])===null||c===void 0||(_=c.area)===null||_===void 0?void 0:_[i(3402)])>0||(l=this.options.flood)!==null&&l!==void 0&&l.enabled)&&this._initTilesetFlood(),(((h=this[i(e._0xd1b756)].clip)===null||h===void 0||(f=h.area)===null||f===void 0?void 0:f.length)>0||(m=this.options.clip)!==null&&m!==void 0&&m[i(968)])&&this._initTilesetClip(),(((g=this[i(e._0xd1b756)].planClip)===null||g===void 0||(C=g.positions)===null||C===void 0?void 0:C[i(3402)])>0||(E=this.options[i(2499)])!==null&&E!==void 0&&E.enabled)&&this._initTilesetPlanClip(),this._createCesium3DTileset().then(P=>{const w=i;this[w(1404)](EventType[w(t._0x35b289)],{tileset:P}),this[w(1790)](P),this.loadOk=!![],this._readyPromise.resolve(this),this.fire(EventType.load,{tileset:P})})}[_0x5e32ae(2442)](){const e={_0x142cf0:1614,_0x38a2ba:2653,_0x3f817c:1890,_0x5e1ce7:1920,_0x1b6002:1890,_0x21f416:1368,_0x20e1f6:1742},t=_0x5e32ae;this[t(3398)]&&(this[t(1890)][t(1614)](this._tilesetClip,!![]),delete this[t(3398)]),this._tilesetFlat&&(this._map[t(e._0x142cf0)](this._tilesetFlat,!![]),delete this._tilesetFlat),this[t(e._0x38a2ba)]&&(this._map.removeThing(this._tilesetFlood,!![]),delete this._tilesetFlood),this[t(1920)]&&(this[t(e._0x3f817c)][t(1614)](this[t(e._0x5e1ce7)],!![]),delete this._tilesetPlanClip),Cesium__namespace.defined(this[t(1890)].tilesetMaxTotalMemory)&&(delete this[t(e._0x1b6002)]._tilesets[this.id],this._tileset.tileLoad[t(e._0x21f416)](this._tileset_tileLoadHandler,this)),super._removedHook(),Cesium__namespace.defined(this.options.distanceDisplayCondition_far)&&this[t(1890)][t(1220)](EventType.cameraChanged,this[t(e._0x20e1f6)],this),this._tileset&&(this._map.scene.primitives.remove(this._tileset),delete this._tileset)}reload(){this._readyPromise=Cesium__namespace.defer(),this._removedHook(),this._addedHook()}_mergePostion(e){const t={_0x6cfd50:723,_0x10fc92:3984},i=_0x5e32ae;e&&((Array.isArray(e)||isString(e))&&(e=LngLatPoint.parse(e)),!this[i(t._0x6cfd50)]&&(this._center=new LngLatPoint),e.lat&&(this.center.lat=e[i(448)]),e.lng&&(this.center.lng=e.lng),Cesium__namespace.defined(e[i(3045)])&&(this[i(4064)][i(t._0x10fc92)]=this._orginCenterPoint.alt+e.alt_offset),Cesium__namespace.defined(e.alt)&&(this.center.alt=e.alt))}_setOptionsHook(e,t){const i={_0x3a6fcc:3205,_0x4e8f94:2253},s=_0x5e32ae;if(!this._tileset)return;let n;for(const _ in t){const l=e[_];switch(_){case s(1483):{var o,c;(o=this._last_picked)!==null&&o!==void 0&&o.event&&!((c=t.highlight)!==null&&c!==void 0&&c[s(i._0x3a6fcc)])?this._highlight_mouseEventHandler(this._last_picked.event):super[s(437)](e,t);return}case s(2073):case"chinaCRS":case s(1559):case"flood":case"clip":case"planClip":{this.reload();return}case"position":case s(2279):case"scale":case s(1372):n=!![];break;case"opacity":case"luminanceAtZenith":case"style":case"marsJzwStyle":case"customShader":this[_]=l;break;default:{try{this[s(2834)][_]=l}catch{this[s(3603)]()}break}}}n&&(this._mergePostion(this.options.position),this[s(i._0x4e8f94)]())}[_0x5e32ae(1790)](e){const t={_0x58d907:1890,_0x13b2fa:2732,_0x2dfcf9:3902,_0x221cb3:4102,_0x27239e:3768,_0x43f982:2898,_0x35601c:3768,_0x29a1e7:3916,_0x14a983:3916,_0x1291f1:1755,_0x474bbd:4035,_0x834e7e:3798,_0x2ee551:3576},i=_0x5e32ae;var s,n;this._tileset=e,this._tileset.name=this.name,this._tileset.show=this[i(575)],this[i(4280)]._mars3d_layerId=this.id,this[i(t._0x58d907)][i(3107)].primitives.add(this._tileset),this[i(4280)].initialTilesLoaded.addEventListener(c=>{this.fire(EventType.initialTilesLoaded,c)}),this._tileset.allTilesLoaded[i(2732)](c=>{this[i(1404)](EventType.allTilesLoaded,c)}),Cesium__namespace.defined(this[i(1890)].tilesetMaxTotalMemory)&&(this[i(t._0x58d907)]._tilesets=this._map[i(2964)]||{},this._map._tilesets[this.id]=this._tileset,this[i(4280)].tileLoad[i(t._0x13b2fa)](this._tileset_tileLoadHandler,this)),this[i(t._0x2dfcf9)]=Cesium__namespace.clone(this._tileset.boundingSphere[i(4064)]);const o=(s=this._tileset.root)===null||s===void 0?void 0:s.transform;if(this.transform=this.options.transform??!!(o&&!o.equals(Cesium__namespace.Matrix4[i(2405)])),this.transform){this.orginMatrix=Cesium__namespace.Matrix4.inverse(Cesium__namespace[i(4102)].fromArray(this._tileset._root.transform),new Cesium__namespace.Matrix4);const c=Cesium__namespace.Matrix4.fromArray(this._tileset._root.transform),_=Cesium__namespace.Matrix4.getTranslation(c,new Cesium__namespace.Cartesian3);if(Cesium__namespace[i(515)](_)&&Cesium__namespace.Cartographic.fromCartesian(_)){this._orginCenterPosition=_;const l=Cesium__namespace[i(t._0x221cb3)].getMatrix3(c,new Cesium__namespace.Matrix3),h=Cesium__namespace[i(t._0x221cb3)].getMatrix3(Cesium__namespace[i(2911)].eastNorthUpToFixedFrame(_),new Cesium__namespace[i(t._0x27239e)]),f=Cesium__namespace.Matrix3[i(t._0x43f982)](h,0,new Cesium__namespace.Cartesian3),m=Cesium__namespace.Matrix3.getColumn(h,1,new Cesium__namespace.Cartesian3),g=Cesium__namespace[i(t._0x35601c)].getColumn(h,2,new Cesium__namespace[i(t._0x29a1e7)]);let C=Cesium__namespace.Matrix3.getColumn(l,0,new Cesium__namespace.Cartesian3);C=Cesium__namespace.Cartesian3.cross(C,g,C),C=Cesium__namespace.Cartesian3.cross(g,C,C),C=Cesium__namespace[i(t._0x14a983)].normalize(C,C);let E=Cesium__namespace.Cartesian3.angleBetween(f,C);Cesium__namespace.Cartesian3.angleBetween(m,C)>Math.PI*.5&&(E=2*Math.PI-E),this.orginRotation={x:0,y:0,z:Number(Cesium__namespace.Math[i(1984)](E).toFixed(1))}}else this.transform=![]}if(this[i(4035)]=LngLatPoint.fromCartesian(this._orginCenterPosition),logInfo((this[i(3605)]||"TilesetLayer")+i(t._0x1291f1)+this._orginCenterPoint.toString()),(n=Cesium__namespace.Mars3DEx)!==null&&n!==void 0&&n.getCache){const c=Cesium__namespace.Mars3DEx.getCache(this.id);c!=null&&c.marsJzwStyle&&c.marsJzwStyle.setUniform("u_mars3d_jzw_upz",this.upAxis===Cesium__namespace.Axis.Z)}if(Cesium__namespace.defined(this.options.style)&&(this.style=this[i(3798)].style),this[i(2649)]!==1&&this.setOpacity(this._opacity),this._center=this[i(t._0x474bbd)].clone(),this._mergePostion(this[i(t._0x834e7e)].position),this.options.chinaCRS){const c=this[i(2032)](this.center);this._mergePostion(c)}this._hasUpdateMater()&&this.updateMatrix(),Cesium__namespace.defined(this.options.distanceDisplayCondition_far)&&this[i(3065)](),this.options.clampToGround&&this.clampToGround(),this[i(t._0x834e7e)][i(t._0x2ee551)]&&this.flyToByAnimationEnd()}[_0x5e32ae(2825)](e=1){const t={_0x4694e6:3984},i=_0x5e32ae;this._map&&this._map.hasTerrain?getSurfaceTerrainHeight(this._map.scene,this._orginCenterPosition).then(s=>{const n=_0x5210;Cesium__namespace[n(515)](s.height)&&(this.alt=s.height-this._orginCenterPoint[n(3984)]+e)}):this.alt=-this._orginCenterPoint[i(t._0x4694e6)]+e}_hasUpdateMater(){const e={_0x20e7ee:515},t=_0x5e32ae;return this.center.equals(this[t(4035)])?this.options.rotation?!![]:this.options.scale>0&&this.options[t(3206)]!==1?!![]:Cesium__namespace[t(e._0x20e7ee)](this[t(3798)].axis)?!![]:![]:!![]}updateMatrix(){const e={_0x1b5e18:3798,_0x1ca10a:3684,_0x54ff1d:3768,_0x1f1556:1286,_0x1e0d5e:4299,_0x4a88d1:4102,_0x16ed4c:4102,_0x4c1010:3675,_0x367dea:860,_0x332780:2107,_0x3dbf6a:1372,_0x5c8806:1976,_0x12310e:1259},t=_0x5e32ae;if(!this._tileset)return;if(this.options.updateMatrix){const s=this[t(e._0x1b5e18)].updateMatrix(this.position,this);return this._tileset.modelMatrix=s,s}if(!this.transform)return this.updateMatrix2();let i=Cesium__namespace.Transforms[t(e._0x1ca10a)](this.position);if(this.options.rotation){const s=Cesium__namespace[t(e._0x54ff1d)][t(3592)](Cesium__namespace[t(e._0x1f1556)][t(1567)](this.rotation_x)),n=Cesium__namespace[t(3768)].fromRotationY(Cesium__namespace.Math.toRadians(this.rotation_y)),o=Cesium__namespace.Matrix3[t(e._0x1e0d5e)](Cesium__namespace.Math.toRadians(360-this.rotation_z)),c=Cesium__namespace.Matrix4.fromRotationTranslation(s),_=Cesium__namespace.Matrix4.fromRotationTranslation(n),l=Cesium__namespace[t(e._0x4a88d1)].fromRotationTranslation(o);Cesium__namespace.Matrix4.multiply(i,c,i),Cesium__namespace.Matrix4.multiply(i,_,i),Cesium__namespace[t(e._0x4a88d1)][t(2663)](i,l,i)}if(this.options.scale>0&&this.options.scale!==1&&Cesium__namespace[t(e._0x16ed4c)].multiplyByUniformScale(i,this[t(3798)].scale,i),Cesium__namespace.defined(this.options[t(1372)])){let s;if(isString(this.options.axis))switch(this.options.axis.toUpperCase()){case"Y_UP_TO_Z_UP":s=Cesium__namespace.Axis.Y_UP_TO_Z_UP;break;case"Z_UP_TO_Y_UP":s=Cesium__namespace.Axis[t(e._0x4c1010)];break;case"X_UP_TO_Z_UP":s=Cesium__namespace.Axis[t(e._0x367dea)];break;case"Z_UP_TO_X_UP":s=Cesium__namespace.Axis.Z_UP_TO_X_UP;break;case"X_UP_TO_Y_UP":s=Cesium__namespace.Axis[t(e._0x332780)];break;case t(4080):s=Cesium__namespace.Axis.Y_UP_TO_X_UP;break}else this.options[t(e._0x3dbf6a)]instanceof Cesium__namespace[t(988)]&&(s=this[t(e._0x1b5e18)].axis);s&&(i=Cesium__namespace.Matrix4[t(e._0x5c8806)](i,s,i))}return this[t(4280)][t(e._0x12310e)].transform=i,this[t(1404)](EventType.updatePosition,{position:this.position}),i}updateMatrix2(){const e={_0x2d3834:3236,_0x97bfeb:1531,_0xd131a7:3272},t=_0x5e32ae;if(!this._tileset||!this._tileset[t(1259)])return;const i=Cesium__namespace.Cartographic[t(e._0x2d3834)](this[t(4280)].boundingSphere.center),s=Cesium__namespace.Cartesian3.fromRadians(i[t(1640)],i.latitude,0),n=this.position,o=Cesium__namespace.Cartesian3[t(e._0x97bfeb)](n,s,new Cesium__namespace.Cartesian3),c=Cesium__namespace.Matrix4[t(e._0xd131a7)](o);return this._tileset[t(2294)]=c,this.fire(EventType[t(3563)],{position:this[t(2180)]}),c}[_0x5e32ae(2575)](e){const t={_0x4d54d0:2601},i=_0x5e32ae;if(this[i(t._0x4d54d0)]){const s=Cesium__namespace.Matrix4[i(2663)](this._tileset._root.transform,this.orginMatrix,new Cesium__namespace[i(4102)]);return Cesium__namespace.Matrix4.multiplyByPoint(s,e,new Cesium__namespace.Cartesian3)}return e}setOpacity(e){const t=_0x5e32ae;this.options.onSetOpacity?this[t(3798)].onSetOpacity(e):this[t(4280)]&&(this._tileset.style=new Cesium__namespace.Cesium3DTileStyle({color:"color() *vec4(1,1,1,"+e+")"}))}[_0x5e32ae(3576)](e={}){const t={_0x2dce65:1890,_0x28b81c:4056,_0x8b52ac:3798,_0x20fee3:3569,_0x24a837:1259},i={_0x4f6484:1890,_0x331504:4280,_0x33cfc9:3194},s=_0x5e32ae;return this[s(t._0x2dce65)]?(this[s(1890)].cancelFlyTo(),this.options.flyToOptions&&(e={...this[s(t._0x8b52ac)].flyToOptions,...e}),this.options.center?this._map.setCameraView(this.options.center,e):this[s(3798)].extent?this._map.flyToExtent(this.options[s(t._0x20fee3)],e):this.loadOk&&this[s(4280)][s(t._0x24a837)]?this._map.flyToPoint(this._tileset.boundingSphere[s(4064)],{radius:this._tileset.boundingSphere.radius*2,maxPitch:-45,...e}):this.readyPromise.then(n=>{const o=s;return this[o(i._0x4f6484)].flyToPoint(this[o(i._0x331504)].boundingSphere.center,{radius:this[o(4280)].boundingSphere[o(i._0x33cfc9)]*2,maxPitch:-45,...e})})):Promise[s(t._0x28b81c)](![])}_toJsonEx(e){const t={_0x53f00d:1920,_0x5e0a53:2499,_0x55bd8c:2082},i=_0x5e32ae;!this._tileset||!this[i(3210)]||(e[i(2180)]=this[i(4064)].toArray(),this[i(t._0x53f00d)]&&(e[i(t._0x5e0a53)]=this._tilesetPlanClip.toJSON()),this._tilesetClip&&(e.clip=this._tilesetClip.toJSON()),this._tilesetFlat&&(e.flat=this[i(t._0x55bd8c)].toJSON()),this._tilesetFlood&&(e[i(4275)]=this._tilesetFlood.toJSON()))}[_0x5e32ae(3702)](e,t){const i={_0x3242d9:1303};return this._idField=e,this._properties={},t.forEach(s=>{const n=_0x5210,o=s[e];this[n(i._0x3242d9)][o]=s}),this._bindVisibleEvent(),this}[_0x5e32ae(3657)](e,t){const i={_0x2ea26d:1408,_0x5be04e:2500},s=_0x5e32ae;if(!e||!t){delete this._properties,this._isBindTileVisible&&(this._tileset.tileVisible.removeEventListener(this._updateTile,this),this[s(i._0x2ea26d)]=![]);return}return t[s(i._0x5be04e)](n=>{const o=n[e];delete this._properties[o]}),this}_bindVisibleEvent(){const e=_0x5e32ae;!this._isBindTileVisible&&this[e(2355)].then(()=>{const t=e;this._tileset[t(1832)][t(2732)](this._updateTile,this),this._isBindTileVisible=!![]})}_updateTile(e){const t={_0x40ac5b:4323,_0x4e6fab:3354},i=_0x5e32ae,s=e.content;for(let n=0;n<s.featuresLength;n++){const o=s.getFeature(n);if(this._properties){const c=o[i(t._0x40ac5b)](this[i(2775)]);c&&this[i(t._0x4e6fab)](o,this._properties[c])}}this.fire(EventType.update)}_setFeatureProperties(e,t){if(!(!e||!t))for(const i in t){const s=t[i];e.hasProperty(i)&&e.getProperty(i)===s||e.setProperty(i,s)}}_tileset_tileLoadHandler(){const e=_0x5e32ae;let t=0;const i=this._map._tilesets;for(const s in i)t+=i[s].totalMemoryUsageInBytes/1024/1024;if(t>this._map[e(3836)])for(const s in i)i[s].trimLoadedTiles()}transformCenter(e){const t={_0x52b3c8:1890,_0x11aed7:3005},i=_0x5e32ae;if(!e)return![];const s=this[i(t._0x52b3c8)][i(t._0x11aed7)],n=this.options[i(3005)],o=getTransFun(n,s);if(!o)return![];const c=o([e[i(3411)],e.lat]);return{lng:c[0],lat:c[1],alt:e.alt}}bindVisibleDistance(){this._map.on(EventType.cameraChanged,this.updateVisibleDistance,this)}updateVisibleDistance(){const e={_0x2a0db7:4280,_0x5bbd95:3107,_0xf13d12:3707,_0x11ea96:3041},t=_0x5e32ae;if(!this._show||!this[t(e._0x2a0db7)]||!this.loadOk||this._map[t(e._0x5bbd95)].mode!==Cesium__namespace[t(3850)][t(e._0xf13d12)])return;const i=Cesium__namespace.Cartesian3.distance(this[t(2180)],this._map.camera.positionWC);this._tileset.show=i<this.options[t(e._0x11ea96)]}_highlight_mouseEventHandler(e){const t={_0xe03957:2812,_0x33f9be:567},i=_0x5e32ae;this._map.closeHighlight();const s=e[i(t._0xe03957)];if(s||this._highlightOptions.all){if(isFunction(this[i(4306)].filter)&&this._highlightOptions[i(3670)](e)===![])return;const n=this.allowDrillPick;if(isFunction(n)&&n(e)===!![])return;this._last_picked={feature:s,event:e},this._map.openHighlight(this,this._highlightOptions,e)}else this._map[i(t._0x33f9be)]()}openHighlight(e,t=!![],i){const s={_0x3ab470:1890,_0x248d24:567,_0x263176:787,_0x403dd7:3144,_0x34aa17:3510,_0x292e88:2092,_0x330fdf:2200},n=_0x5e32ae;t&&(this[n(s._0x3ab470)][n(s._0x248d24)](),this._map[n(s._0x263176)]=this),this._last_picked=this[n(3668)]||{event:{layer:this}},i&&(this._last_picked.feature=i);const o=e||this._highlightOptions;if(o){var c,_;if((c=this._last_picked)!==null&&c!==void 0&&c.feature&&!o.all&&!o[n(s._0x403dd7)]){var l;const f=this._last_picked.feature;if(f!=null&&f.color&&o.color)if(this[n(3668)].originalColor=f.color.clone(),isFunction(o.color)){var h;f.color=getCesiumColor(o.color((h=this._last_picked)===null||h===void 0?void 0:h[n(s._0x34aa17)]))}else f[n(s._0x292e88)]=getColorByStyle(o);f!=null&&(l=f.content)!==null&&l!==void 0&&l._model&&o.model&&(this._last_picked.originalStyle=ModelStyleConver.toJSON(f.content._model),ModelStyleConver.toCesiumVal(o.model,f.content._model,![]))}else{const f=Cesium__namespace[n(s._0x330fdf)].fromCssColorString(o.color).toCssColorString();if(o.uniqueKey){const m=this._last_picked.feature.getProperty(o.uniqueKey);this._tileset.style=new Cesium__namespace.Cesium3DTileStyle({color:{conditions:[["${"+o[n(3144)]+n(3828)+m+"'",f]]}})}else this._tileset[n(4114)]=new Cesium__namespace.Cesium3DTileStyle({color:{conditions:[["true",f]]}});this._highlightAll=!![]}this.fire(EventType.highlightOpen,(_=this._last_picked)===null||_===void 0?void 0:_.event,!![])}}closeHighlight(){const e={_0xae3e34:3668,_0x3a4496:486},t=_0x5e32ae;var i,s;if(this[t(e._0xae3e34)]){if(this[t(4048)])this[t(4048)]=![],this._tileset.style=this.style;else if((i=this._last_picked)!==null&&i!==void 0&&i[t(e._0x3a4496)]){var n;const o=this._last_picked.feature;this._last_picked.originalColor&&(o.color=this._last_picked.originalColor),o!=null&&(n=o.content)!==null&&n!==void 0&&n[t(2455)]&&this._last_picked[t(1852)]&&ModelStyleConver.toCesiumVal(this._last_picked.originalStyle,o.content._model,![])}this._map[t(1297)](),this.fire(EventType.highlightClose,(s=this[t(3668)])===null||s===void 0?void 0:s.event,!![]),delete this._last_picked}}hasPopup(){return this._popupConfig?!![]:![]}bindPopup(e,t){const i=_0x5e32ae;return this[i(2513)]={content:e,options:t,layer:this},this._bindControl(),this}unbindPopup(){return this.closePopup(),this._popupConfig=null,this}[_0x5e32ae(3772)](){const e=_0x5e32ae;return this._map&&this.hasPopup()&&this._map.popup[e(1293)](null,this),this}_conventMarsOptions(){const e={_0x517c17:4107,_0x24b139:778,_0x5f4b4e:2671,_0x53901f:4147},t=_0x5e32ae;var i;if(!((i=Cesium__namespace.Mars3DEx)!==null&&i!==void 0&&i.getCacheOrAdd))return;this._marsOptions[t(1951)]=this.id;const s=Cesium__namespace[t(e._0x517c17)].getCacheOrAdd(this.id);this.marsJzwStyle?s.marsJzwStyle=new Cesium__namespace.CustomShader({lightingModel:Cesium__namespace[t(e._0x24b139)][t(830)],uniforms:{u_mars3d_jzw_upz:{type:Cesium__namespace[t(e._0x5f4b4e)].BOOL,value:!![]}},fragmentShaderText:isString(this[t(e._0x53901f)])?this[t(4147)]:`
          void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material)
          {
            vec4 position = czm_inverseModelView * vec4(fsInput.attributes.positionEC,1); // 位置

            // 注意shader中写浮点数是，一定要带小数点，否则会报错，比如0需要写成0.0，1要写成1.0
            float _baseHeight = 0.0; // 物体的基础高度，需要修改成一个合适的建筑基础高度
            float _heightRange = 80.0; // 高亮的范围(_baseHeight ~ _baseHeight + _heightRange)
            float _glowRange = 100.0; // 光环的移动范围(高度)

            // 建筑基础色
            float mars_height = (u_mars3d_jzw_upz ? position.z : position.y) - _baseHeight;
            float mars_a11 = fract(czm_frameNumber / 120.0) * 3.14159265 * 2.0;
            float mars_a12 = mars_height / _heightRange + sin(mars_a11) * 0.1;

            material.diffuse = mix(material.diffuse, vec3(0.0, 0.0, 1.0), 0.5); // 颜色
            material.diffuse *= vec3(mars_a12);// 渐变

            // 动态光环
            float time = fract(czm_frameNumber / 360.0);
            time = abs(time - 0.5) * 2.0;
            float mars_h = clamp(mars_height / _glowRange, 0.0, 1.0);
            float mars_diff = step(0.005, abs(mars_h - time));
            material.diffuse += material.diffuse * (1.0 - mars_diff);
          } `}):delete s.marsJzwStyle}startEditing(){const e={_0x265799:4183,_0x2a97a1:3881},t=_0x5e32ae;if(this[t(463)]||!this.hasEdit)return this;if(this._enabledEdit=!![],!this._map)throw new Error("编辑时_map不能为空,请将对象添加到Map");this._map[t(636)].noPickEntity=this._entity,this._map.mouseEvent[t(e._0x265799)]=![],!this[t(e._0x2a97a1)]&&(this.editing=new EditTileset(this)),this.editing.activate&&this.editing.activate()}stopEditing(){const e={_0x516877:3881,_0x2d0a6f:1890},t=_0x5e32ae;var i;if(!this[t(463)])return this;(i=this[t(e._0x516877)])!==null&&i!==void 0&&i.disable&&this[t(3881)].disable(),this._map&&(this._map.closeSmallTooltip(),this._map.mouseEvent.noPickEntity=null,this[t(e._0x2d0a6f)].mouseEvent.enabledMoveTarget=!![]),this[t(463)]=![]}}register$2("tileset",TilesetLayer),register$2("3dtiles",TilesetLayer);class OsmBuildingsLayer extends TilesetLayer{async _createCesium3DTileset(){return await Cesium__namespace.createOsmBuildingsAsync(this.options)}}register$2(_0x5e32ae(1588),OsmBuildingsLayer);class I3SLayer extends BaseGraphicLayer{constructor(e={}){super(e),this._marsOptions={}}get layer(){return this[_0x5e32ae({_0xded271:3483}._0xded271)]}get[_0x5e32ae(4147)](){const e={_0x39016b:4147},t=_0x5e32ae;return this[t(3798)][t(e._0x39016b)]}set marsJzwStyle(e){const t={_0x4318d1:1650},i=_0x5e32ae;this[i(3798)].marsJzwStyle=e,this[i(t._0x4318d1)]()}get upAxis(){const e={_0x2c30f4:515},t=_0x5e32ae,i=this[t(3483)]._layers;for(let s=0;s<i[t(3402)];s++){const n=i[s]._tileset;if(Cesium__namespace[t(e._0x2c30f4)](n))return n==null?void 0:n._modelUpAxis}}[_0x5e32ae(1637)](e,t){const i={_0x1308ab:515},s=_0x5e32ae;if(!this._i3sProvider)return;const n=this[s(3483)]._layers;for(let o=0;o<n.length;o++){const c=n[o]._tileset;Cesium__namespace[s(i._0x1308ab)](c)&&e[s(680)](t,c)}return this}async[_0x5e32ae(2079)](){const e={_0xdc4a8e:3798,_0x4e1195:3798},t=_0x5e32ae;let i;this[t(e._0xdc4a8e)].geoidTiledTerrainProvider&&(this.options.geoidTiledTerrainProvider instanceof Cesium__namespace.ArcGISTiledElevationTerrainProvider?i=this.options.geoidTiledTerrainProvider:i=await Cesium__namespace.ArcGISTiledElevationTerrainProvider.fromUrl(this[t(3798)].geoidTiledTerrainProvider.url,this[t(e._0x4e1195)].geoidTiledTerrainProvider)),this._marsOptions._mars3d_layerId=this.id;const s={...this[t(3798)],geoidTiledTerrainProvider:i,cesium3dTilesetOptions:{...this[t(3798)],marsOptions:this._marsOptions}};return delete s[t(1221)],await Cesium__namespace.I3SDataProvider.fromUrl(getUrlResource(this[t(e._0xdc4a8e)]),s)}_addedHook(){const e={_0x67b970:4158},t={_0x2e20ec:1291,_0x17ec69:3352},i=_0x5e32ae;this.loadOk=![],super[i(e._0x67b970)](),this._conventMarsOptions(),this._createI3SDataProvider().then(s=>{const n=i;this.fire(EventType[n(t._0x2e20ec)],{provider:s}),this._initModel(s),this.loadOk=!![],this[n(t._0x17ec69)].resolve(this),this.fire(EventType.load,{provider:s,layers:s._layers})})}_removedHook(){super._removedHook(),this._i3sProvider&&(this._map.scene.primitives.remove(this._i3sProvider),delete this._i3sProvider)}reload(){const e={_0x4e7c1a:4158},t=_0x5e32ae;this._removedHook(),this[t(e._0x4e7c1a)]()}[_0x5e32ae(1790)](e){const t={_0x413a72:3483,_0x56cbcb:4064,_0x1dd5d2:1619,_0xc611dc:1755},i=_0x5e32ae;this[i(3483)]=e,this[i(t._0x413a72)]._mars3d_layerId=this.id,this._i3sProvider.show=this.show,this._map.scene.primitives[i(4084)](this._i3sProvider),this[i(1619)]=this._i3sProvider.extent,this._orginCenterPoint=LngLatPoint.fromCartographic(Cesium__namespace.Rectangle[i(t._0x56cbcb)](this[i(t._0x1dd5d2)])),this._orginCenterPosition=this._orginCenterPoint.toCartesian(),logInfo((this[i(3605)]||"I3SLayer")+i(t._0xc611dc)+this._orginCenterPoint.toString()),this._center=this._orginCenterPoint.clone(),this.options.flyTo&&this.flyToByAnimationEnd()}flyTo(e={}){const t={_0x1f0162:1890,_0x4ce7df:3798,_0x4e6f26:1890,_0x2eb73c:723},i=_0x5e32ae;if(!this._map)return Promise.resolve(![]);if(this[i(1890)][i(2824)](),this.options.flyToOptions&&(e={...this.options.flyToOptions,...e}),this.options.center)return this[i(t._0x1f0162)].setCameraView(this.options.center,e);if(this[i(t._0x4ce7df)].extent)return this._map.flyToExtent(this[i(t._0x4ce7df)].extent,e);if(this[i(723)])return this[i(t._0x4e6f26)].flyToPoint(this[i(t._0x2eb73c)],{maxPitch:-45,...e})}[_0x5e32ae(1650)](){const e={_0xaa6152:4147},t=_0x5e32ae;var i;if(!((i=Cesium__namespace.Mars3DEx)!==null&&i!==void 0&&i.getCacheOrAdd))return;this[t(848)][t(1951)]=this.id;const s=Cesium__namespace.Mars3DEx.getCacheOrAdd(this.id);this.marsJzwStyle?s.marsJzwStyle=new Cesium__namespace.CustomShader({lightingModel:Cesium__namespace.LightingModel.UNLIT,uniforms:{u_mars3d_jzw_upz:{type:Cesium__namespace.UniformType.BOOL,value:![]}},fragmentShaderText:isString(this.marsJzwStyle)?this[t(e._0xaa6152)]:`
            void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material)
            {
              vec4 position = czm_inverseModelView * vec4(fsInput.attributes.positionEC,1); // 位置

              // 注意shader中写浮点数是，一定要带小数点，否则会报错，比如0需要写成0.0，1要写成1.0
              float _baseHeight = 0.0; // 物体的基础高度，需要修改成一个合适的建筑基础高度
              float _heightRange = 80.0; // 高亮的范围(_baseHeight ~ _baseHeight + _heightRange)
              float _glowRange = 100.0; // 光环的移动范围(高度)

              // 建筑基础色
              float mars_height = (u_mars3d_jzw_upz ? position.z : position.y) - _baseHeight;
              float mars_a11 = fract(czm_frameNumber / 120.0) * 3.14159265 * 2.0;
              float mars_a12 = mars_height / _heightRange + sin(mars_a11) * 0.1;

              material.diffuse = mix(material.diffuse, vec3(0.0, 0.0, 1.0), 0.5); // 颜色
              material.diffuse *= vec3(mars_a12);// 渐变

              // 动态光环
              float time = fract(czm_frameNumber / 360.0);
              time = abs(time - 0.5) * 2.0;
              float mars_h = clamp(mars_height / _glowRange, 0.0, 1.0);
              float mars_diff = step(0.005, abs(mars_h - time));
              material.diffuse += material.diffuse * (1.0 - mars_diff);
            } `}):delete s.marsJzwStyle}}register$2(_0x5e32ae(4101),I3SLayer);const mins=[Cesium__namespace.Math.toRadians(.05),Cesium__namespace.Math.toRadians(.1),Cesium__namespace[_0x5e32ae(1286)].toRadians(.2),Cesium__namespace.Math[_0x5e32ae(1567)](.5),Cesium__namespace.Math.toRadians(1),Cesium__namespace.Math[_0x5e32ae(1567)](2),Cesium__namespace.Math[_0x5e32ae(1567)](5),Cesium__namespace.Math.toRadians(10)];function gridPrecision(r){return r<.01?2:r<.1?1:(r<1,0)}function GraticuleProvider(r){const e={_0x1b1936:1688,_0x145977:2084,_0x46fcce:4271,_0x181987:3865,_0x47ab9d:2347},t=_0x5e32ae;this[t(3798)]=r,this._tilingScheme=r.tilingScheme||new Cesium__namespace.GeographicTilingScheme,this[t(e._0x1b1936)]=r.tileWidth||256,this._tileHeight=r[t(3237)]||256,this._ready=!![],this._sexagesimal=r.sexagesimal||![],this._numLines=r.numLines||50,this[t(1597)]=r.scene,this[t(e._0x145977)]=this[t(1597)].globe.ellipsoid,this[t(e._0x46fcce)]=new Cesium__namespace[t(1237)],this._scene[t(1e3)].add(this[t(4271)]),this._polylines=new Cesium__namespace.PolylineCollection,this._scene.primitives.add(this[t(2422)]);const i=document[t(3098)]("canvas");i.width=256,i[t(e._0x181987)]=256,this._canvas=i;const s=this;this._scene.camera.moveEnd.addEventListener(function(){s._show&&(s._polylines.removeAll(),s._labels.removeAll(),s._currentExtent=null,s._drawGrid(s._getExtentView()))}),this._scene.imageryLayers[t(e._0x47ab9d)](this)}Object.defineProperties(GraticuleProvider.prototype,{url:{get:function(){}},proxy:{get:function(){}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return 18}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!![]}}}),GraticuleProvider.prototype[_0x5e32ae(4233)]=function(r,e,t,i,s){const n={_0x2c4559:2497,_0x2527f7:4069,_0x23ff3b:3680,_0x4d2eae:1022,_0x58c6de:2084,_0x4e98d1:3026,_0x3af9cc:1260},o=_0x5e32ae,c=LabelStyleConver[o(1268)](this.options.labelStyle||{},{style:Cesium__namespace.LabelStyle.FILL_AND_OUTLINE,fillColor:Cesium__namespace.Color.AZURE,outlineColor:Cesium__namespace.Color.BLACK,outlineWidth:2,pixelOffset:new Cesium__namespace[o(n._0x2c4559)](5,i?5:-5),eyeOffset:Cesium__namespace.Cartesian3[o(n._0x2527f7)],horizontalOrigin:Cesium__namespace[o(n._0x23ff3b)][o(n._0x4d2eae)],verticalOrigin:i?Cesium__namespace.VerticalOrigin.BOTTOM:Cesium__namespace.VerticalOrigin[o(1172)],scale:1});c[o(2180)]=this[o(n._0x58c6de)].cartographicToCartesian(new Cesium__namespace[o(n._0x4e98d1)](r,e,10)),c[o(n._0x3af9cc)]=t,this._labels.add(c)},GraticuleProvider[_0x5e32ae(2392)]._drawGrid=function(r){const e={_0x11f463:3504,_0x5af2a5:4279,_0x20b8ac:3456,_0x373ec0:1382,_0x361f91:2774,_0x2471b7:2084,_0x4cfea9:3759,_0x4e6923:2422,_0x3bb43f:3798,_0x382655:2931,_0x3b97d5:4233,_0x3f7ba8:3844,_0x170156:4084,_0x5b276d:3798,_0xef23e6:1029},t=_0x5e32ae;if(this._currentExtent&&this[t(e._0x11f463)].equals(r))return;this._currentExtent=r,this._polylines.removeAll(),this._labels.removeAll();let i=0,s=0,n;for(n=0;n<mins.length&&i<(r.north-r[t(e._0x5af2a5)])/10;n++)i=mins[n];for(n=0;n<mins.length&&s<(r[t(1189)]-r.west)/10;n++)s=mins[n];let o=(r[t(e._0x20b8ac)]<0?Math.ceil(r.west/s):Math[t(e._0x373ec0)](r[t(3456)]/s))*s,c=(r.south<0?Math.ceil(r.south/i):Math[t(1382)](r.south/i))*i,_=(r.east<0?Math[t(e._0x361f91)](r.east/i):Math.floor(r.east/i))*i,l=(r.north<0?Math.ceil(r.north/s):Math[t(e._0x373ec0)](r.north/s))*s;o=Math.max(o-2*s,-Math.PI),_=Math.min(_+2*s,Math.PI),c=Math.max(c-2*i,-Math.PI/2),l=Math.min(l+2*s,Math.PI/2);const h=this[t(e._0x2471b7)];let f,m;const g=Cesium__namespace.Math[t(1567)](1),C=c+Math.floor((l-c)/i/2)*i;for(m=o;m<_;m+=s){const P=[];for(f=c;f<l;f+=g)P[t(e._0x4cfea9)](new Cesium__namespace[t(3026)](m,f));P.push(new Cesium__namespace.Cartographic(m,l)),this[t(e._0x4e6923)].add(PolylineStyleConver.toCesiumVal(this[t(e._0x3bb43f)][t(e._0x382655)]||{},{positions:h.cartographicArrayToCartesianArray(P),width:1}));const w=Cesium__namespace.Math.toDegrees(m);this[t(e._0x3b97d5)](m,C,this[t(e._0x3f7ba8)]?this._decToSex(w):w.toFixed(gridPrecision(s)),![])}const E=o+Math.floor((_-o)/s/2)*s;for(f=c;f<l;f+=i){const P=[];for(m=o;m<_;m+=g)P.push(new Cesium__namespace.Cartographic(m,f));P.push(new Cesium__namespace.Cartographic(_,f)),this._polylines[t(e._0x170156)](PolylineStyleConver[t(1268)](this[t(e._0x5b276d)].lineStyle||{},{positions:h.cartographicArrayToCartesianArray(P),width:1}));const w=Cesium__namespace.Math.toDegrees(f);this.makeLabel(E,f,this._sexagesimal?this._decToSex(w):w[t(e._0xef23e6)](gridPrecision(i)),!![])}},GraticuleProvider.prototype.requestImage=function(r,e,t){const i={_0x534f2d:1902};return new Promise((s,n)=>{const o=_0x5210;this._show&&this[o(i._0x534f2d)](this._getExtentView()),s(this[o(3122)])})},GraticuleProvider[_0x5e32ae(2392)][_0x5e32ae(1965)]=function(r){const e={_0x13f8e2:3001},t=_0x5e32ae;this[t(e._0x13f8e2)]=r,r?(this._currentExtent=null,this[t(1902)](this._getExtentView())):(this._polylines.removeAll(),this._labels.removeAll())},GraticuleProvider.prototype.isVisible=function(){return this._show},GraticuleProvider[_0x5e32ae(2392)][_0x5e32ae(3384)]=function(r){const e={_0x178eda:3797,_0x4e2df2:3560},t=_0x5e32ae;let i=Math.floor(r),s=((Math.abs(r)-i)*60).toFixed(2);return s==="60.00"&&(i+=1,s=t(e._0x178eda)),[i,":",s][t(e._0x4e2df2)]("")},GraticuleProvider.prototype._getExtentView=function(){const r={_0x1f91f5:4005,_0x2eb65f:2084,_0x3e94d0:3652,_0x40256e:3324},e=_0x5e32ae,t=this._scene.camera,i=this._scene.canvas,s=[t.pickEllipsoid(new Cesium__namespace[e(2497)](0,0),this._ellipsoid),t.pickEllipsoid(new Cesium__namespace.Cartesian2(i[e(r._0x1f91f5)],0),this[e(r._0x2eb65f)]),t.pickEllipsoid(new Cesium__namespace.Cartesian2(0,i.height),this._ellipsoid),t[e(r._0x3e94d0)](new Cesium__namespace.Cartesian2(i.width,i[e(3865)]),this[e(r._0x2eb65f)])];for(let n=0;n<4;n++)if(s[n]===void 0)return Cesium__namespace[e(3324)].MAX_VALUE;return Cesium__namespace[e(r._0x40256e)].fromCartographicArray(this._ellipsoid.cartesianArrayToCartographicArray(s))};class GraticuleLayer extends BaseLayer{get[_0x5e32ae(1538)](){return this._graticuleProvider}_showHook(e){this._graticuleProvider&&this._graticuleProvider.setVisible(e)}[_0x5e32ae(3118)](){this._graticuleProvider=new GraticuleProvider({scene:this._map.scene,numLines:10,...this.options})}_addedHook(){const e=_0x5e32ae;this._graticuleProvider[e(1965)](this[e(575)])}[_0x5e32ae(2442)](){this[_0x5e32ae(3219)].setVisible(![])}}register$2(_0x5e32ae(3679),GraticuleLayer);class LodGraphicLayer extends GraphicLayer{constructor(e={}){const t={_0x469102:2493,_0x468f77:3798,_0x5b2ee2:1901},i=_0x5e32ae;super(e),!isMars3DCesium&&logError$1(i(t._0x469102),this),this[i(t._0x468f77)].IdField=this[i(3798)].IdField||"id",this.options.debuggerTileInfo&&this.bindPopup(function(s){var n;return((s==null||(n=s.graphic)===null||n===void 0?void 0:n.gridList)||[]).join("<br/>")}),this[i(t._0x5b2ee2)]={},this._cacheGraphic={}}get[_0x5e32ae(804)](){const e={_0x273030:1901},t=_0x5e32ae;for(const i in this[t(e._0x273030)]){const s=this._cacheGrid[i];if(!(!s||!s.grid)&&s.isLoading)return!![]}return![]}_showHook(e){const t={_0x9e5692:3755},i=_0x5e32ae;super._showHook(e),this[i(t._0x9e5692)]&&(this._tileLayer.show=e)}_mountedHook(){super._mountedHook();const e={...this.options,private:!![]};delete e.id,delete e.name,delete e.url,delete e.type,this._tileLayer=new EmptyTileLayer(e),this._tileLayer.readyPromise.then(()=>{this._readyPromise.resolve(this)})}[_0x5e32ae(4158)](){const e={_0x1bf5b1:2355},t={_0x2710d6:2965},i=_0x5e32ae;super._addedHook(),this._tileLayer.on(EventType.addTile,this._tileLayer_addTileHandler,this),this._tileLayer.on(EventType.removeTile,this._tileLayer_removeTileHandler,this);const s=this._map;Promise.all([new Promise((n,o)=>{function c(_){_===0&&(s.off(EventType.tileLoadProgress,c),n(!![]))}s.on(EventType.tileLoadProgress,c)}),this._map.terrainProvider[i(e._0x1bf5b1)]]).then(n=>{const o=i;this._map[o(t._0x2710d6)](this[o(3755)])})}_removedHook(){const e={_0x87893f:3755,_0x293bda:1387},t=_0x5e32ae;super[t(2442)](),this._tileLayer[t(1220)](EventType.addTile,this._tileLayer_addTileHandler,this),this._tileLayer[t(1220)](EventType.removeTile,this._tileLayer_removeTileHandler,this),this._map.removeLayer(this[t(e._0x87893f)]),this[t(e._0x293bda)]()}[_0x5e32ae(502)](e){return e[_0x5e32ae({_0x4188f4:1096}._0x4188f4)]+"_x"+e.x+"_y"+e.y}checkHasBreak(e){return!this.show||!this._cacheGrid[e]?!![]:![]}_tileLayer_addTileHandler(e){const t={_0x387a84:3128},i=_0x5e32ae;if(!this._tileLayer.isInRange(e.level))return;const s=this.getGridKey(e);e[i(t._0x387a84)]=s,this._cacheGrid[s]={grid:e,isLoading:!![]},this.queryGridData(e)[i(549)](n=>{const o=i;this.show&&this[o(2264)](n)})}[_0x5e32ae(623)](e){const t={_0x5a1659:3182},i=_0x5e32ae;return e.id?e.id:(e.type===i(t._0x5a1659)&&(e=e.properties),e[this.options.IdField]?e[this.options[i(957)]]:null)}[_0x5e32ae(2264)](e){const t={_0x2d9624:3759,_0x2d765b:1901},i=_0x5e32ae,s=e.list,n=e.key;if(this.checkHasBreak[n])return;const o=[],c=[];for(let _=0,l=s.length;_<l;_++){const h=s[_],f=this[i(623)](h);!f&&logWarn("LodGraphicLayer: 数据的ID识别失败",h);const m=this._cacheGraphic[f];if(m)m.gridList.push(n),this.updateGraphic(m,h);else{const g=this.createGraphic(e,h);if(!g)continue;g.gridList=[n],this._cacheGraphic[f]=g,c[i(t._0x2d9624)](g)}o[i(3759)](f)}this._cacheGrid[n]=this._cacheGrid[n]||{},this[i(1901)][n].ids=o,this[i(t._0x2d765b)][n][i(804)]=![],this.fire(EventType.update,{graphics:c})}_tileLayer_removeTileHandler(e){const t={_0xf29d50:3228},i=_0x5e32ae;if(this[i(3755)].isAllOutRange(e.level)){this.clear();return}const s=this[i(502)](e),n=this._cacheGrid[s];if(n){if(n[i(t._0xf29d50)])for(let o=0;o<n[i(t._0xf29d50)].length;o++){const c=n.ids[o],_=this._cacheGraphic[c];_&&(removeArrayItem(_.gridList,s),_.gridList.length===0&&(this.removeGraphic(_),delete this._cacheGraphic[c]))}delete this._cacheGrid[s]}}queryGridData(e){const t={_0x2a699b:1839},i=_0x5e32ae;if(this.options.queryGridData)return this[i(3798)][i(t._0x2a699b)](e)}createGraphic(e,t){const i={_0x58fcbb:3798,_0x5a6081:802},s=_0x5e32ae;return this.options.createGraphic?this[s(i._0x58fcbb)][s(i._0x5a6081)](e,t):null}updateGraphic(e,t){const i=_0x5e32ae;this.options[i(3308)]&&this.options.updateGraphic(e,t)}clear(e){const t=_0x5e32ae;super.clear(e),this[t(450)]={},this._cacheGrid={}}[_0x5e32ae(3603)](){const e={_0x407c45:3755},t=_0x5e32ae;this.clear(!![]),this._tileLayer&&this[t(e._0x407c45)].reload()}_setOptionsHook(e,t){const i=_0x5e32ae;if(super[i(437)](e,t),this.clear(!![]),this._tileLayer){const s={...t,private:!![]};delete s.id,delete s.name,delete s.url,delete s.type,this._tileLayer.setOptions(s)}}_toJsonEx(e){}}register$2(_0x5e32ae(4229),LodGraphicLayer);class GeodePoiLayer extends LodGraphicLayer{constructor(e={}){const t={_0x3613ec:1394},i={_0x642280:863,_0x12e209:2296},s=_0x5e32ae;super(e),this._key_index=0,this[s(t._0x3613ec)]=this[s(3798)].key||gaodeArr,this[s(1993)](function(n){const o=s;var c;const _=n==null||(c=n.graphic)===null||c===void 0?void 0:c.attr;return _?o(i._0x642280)+_.name+"</div><div>地址："+_.address+"</div><div>区域："+_[o(i._0x12e209)]+_.cityname+_.adname+"</div><div>类别："+_.type+"</div>":void 0},{anchor:[0,-10]})}get[_0x5e32ae(3128)](){const e=_0x5e32ae,t=this._key_index++%this._keys[e(3402)];return this._keys[t]}queryGridData(e){const t={_0x472e32:2628,_0xd3f38c:3128},i=_0x5e32ae,s=wgs2gcj([e.extent[i(3183)],e[i(3569)].ymax]),n=wgs2gcj([e[i(3569)][i(t._0x472e32)],e.extent.ymin]),o=s[0]+","+s[1]+"|"+n[0]+","+n[1],c=this.options[i(3670)]||{};return c.output="json",c.key=this[i(t._0xd3f38c)],c[i(652)]=o,!c[i(1406)]&&(c.offset=25),!c.types&&(c.types="120000|130000|190000"),new Promise((_,l)=>{const h={_0x23b747:1100};fetchJson({url:"https://restapi.amap.com/v3/place/polygon",...this.options,queryParameters:c,proxy:this._proxy}).then(f=>{const m=_0x5210;if(f.infocode!==m(h._0x23b747)){logError$1("POI 请求失败",f),e.list=[],_(e);return}e.list=f.pois,_(e)})})}createGraphic(e,t){const i={_0x3b7434:439,_0x2b19e4:3274,_0x7d9978:3798,_0x313ba9:513},s=_0x5e32ae;var n;let o=t.location[s(i._0x3b7434)](",");o=gcj2wgs(o);const c=getSymbolStyle(this.options[s(i._0x2b19e4)],t);c.clampToGround=c.clampToGround??!![];let _;return(n=this[s(i._0x7d9978)].clustering)!==null&&n!==void 0&&n.enabled?c[s(i._0x313ba9)]?_=new BillboardEntity({position:[o[0],o[1],this.options.height||0],style:c,attr:t}):_=new PointEntity({position:[o[0],o[1],this.options.height||0],style:c,attr:t}):c.image?_=new BillboardPrimitive({position:[o[0],o[1],this.options.height||0],style:c,attr:t}):_=new PointPrimitive({position:[o[0],o[1],this.options.height||0],style:c,attr:t}),this.addGraphic(_),_}}register$2("gaodePOI",GeodePoiLayer);class WfsLayer extends LodGraphicLayer{[_0x5e32ae(3118)](){const e={_0x3ee86d:1404},t=_0x5e32ae;this[t(3798)].geometryName=this.options.geometryName||t(4250),super._mountedHook(),Cesium__namespace.defaultValue(this.options.getCapabilities,!![])&&this.getMetadata(),this[t(e._0x3ee86d)](EventType.load)}[_0x5e32ae(1224)](){const e={_0x169862:3464},t={_0x26c67e:1663},i=_0x5e32ae,s={service:i(3956),request:i(e._0x169862),version:"1.0.0"};let n=this.options.url;this.options.templateValues&&(n=template(n,this.options.templateValues)),Cesium__namespace[i(4071)].fetchXML({...this.options,url:n,queryParameters:s,proxy:this._proxy}).then(o=>{const c=i;if(!(!o||this[c(t._0x26c67e)])){this.capabilities=o;try{this._initByMetaData(o)}catch(_){logInfo("解析GetCapabilities出错",_)}this.fire(EventType[c(2980)],{capabilities:o})}}).catch(o=>{logInfo("wfs请求GetCapabilities出错",o)})}_initByMetaData(e){const t={_0x3ca506:1613,_0x23473f:3798,_0xcb247f:3058,_0x5054d2:3798,_0x161ca5:2628},i=_0x5e32ae,s=this._readChildNode(e,"FeatureTypeList");if(!s)return;const n=this._readNode(s,"FeatureType");if(n)for(let o=0,c=n.length;o<c;o++){const _=n[o];if(this._readChildNodeVal(_,"Name")===this.options.layer){const h=this._readChildNodeVal(_,"SRS");!this.options[i(1613)]&&h&&(this[i(3798)][i(t._0x3ca506)]=h);const f=this._readChildNode(_,"LatLongBoundingBox");if(!this[i(t._0x23473f)].rectangle&&f){const m=Number(f.getAttribute("minx")),g=Number(f[i(t._0xcb247f)]("miny")),C=Number(f.getAttribute("maxx")),E=Number(f.getAttribute("maxy"));let P={xmin:m,ymin:g,xmax:C,ymax:E};if(this[i(t._0x5054d2)].crs!==CRS.EPSG4326&&this.options.crs!==CRS.EPSG4490){const w=proj4Trans([P.xmin,P.ymin],this[i(3798)][i(t._0x3ca506)]),M=proj4Trans([P[i(t._0x161ca5)],P.ymax],this[i(3798)][i(t._0x3ca506)]);P={xmin:w[0],ymin:w[1],xmax:M[0],ymax:M[1]}}this[i(t._0x23473f)].extent=P,this._rectangle=Cesium__namespace[i(3324)][i(3203)](P.xmin,P.ymin,P.xmax,P.ymax),this._tileLayer&&(this._tileLayer.rectangle=this._rectangle),this.options.flyTo&&this.flyToByAnimationEnd()}break}}}[_0x5e32ae(3857)](e,t){const i={_0x5adac1:4254},s=_0x5e32ae;if(!e)return null;let n=e.getElementsByTagName(t);return(!n||n.length===0)&&(n=e[s(i._0x5adac1)](s(2741)+t)),n}_readChildNode(e,t){const i={_0x4f9899:3857,_0x30dc89:3402},s=_0x5e32ae;if(!e)return null;const n=this[s(i._0x4f9899)](e,t);return n[s(i._0x30dc89)]>0?n[0]:null}[_0x5e32ae(2014)](e,t){const i={_0x3ede9:3785},s=_0x5e32ae;var n,o;if(!e)return null;let c=this._readChildNode(e,t);return!c&&(c=this._readChildNode(e,s(2741)+t)),(n=c)!==null&&n!==void 0&&n.innerHTML?c.innerHTML:(o=c)!==null&&o!==void 0&&o.getInnerHTML?c[s(i._0x3ede9)]():null}queryGridData(e){const t={_0x1c50cc:3183,_0x2d260c:1613,_0x5aff12:2628,_0x33db4b:703,_0x827567:1174,_0x50cb60:2913},i=_0x5e32ae;let s;if(this.options.crs!==CRS.EPSG4326&&this.options.crs!==CRS.EPSG4490){const c=proj4Trans([e.extent[i(t._0x1c50cc)],e.extent[i(2498)]],"EPSG:4326",this.options[i(t._0x2d260c)]),_=proj4Trans([e.extent.xmax,e.extent.ymax],"EPSG:4326",this.options.crs);s=c[0]+","+c[1]+","+_[0]+","+_[1]}else s=e[i(3569)].xmin+","+e.extent.ymin+","+e.extent[i(t._0x5aff12)]+","+e.extent.ymax;const n={service:"WFS",request:"GetFeature",typeName:this[i(3798)].layer||this.options.typeName,version:"1.0.0",outputFormat:i(971),srsName:this[i(3798)].crs||"EPSG:4326",bbox:s};if(Cesium__namespace[i(515)](this[i(3798)][i(t._0x33db4b)]))for(const c in this.options.parameters)c.toLowerCase()==="cql_filter"?(delete n[i(t._0x827567)],n[c]=this.options.parameters[c]+" and BBOX("+this.options[i(t._0x50cb60)]+", "+s+")"):n[c]=this.options.parameters[c];let o=this.options.url;return this.options[i(2645)]&&(o=template(o,this.options[i(2645)])),new Promise((c,_)=>{const l={_0x30e6ce:3128,_0x2b5d78:3182,_0x22adb3:552,_0x3aad2b:657};fetchJson({...this.options,url:o,queryParameters:n,proxy:this._proxy}).then(h=>{const f=_0x5210;if(e.list=[],!this[f(3001)]||!this._cacheGrid[e[f(l._0x30e6ce)]]){c(e);return}if(h===void 0||h==null){c(e);return}h.type===f(l._0x2b5d78)&&(h={type:f(l._0x22adb3),features:[h]}),e[f(l._0x3aad2b)]=h.features,c(e)}).catch(h=>{logError$1("wfs请求GetFeature出错",h)})})}createGraphic(e,t){const i=this.loadGeoJSON(t,{clear:![],flyTo:![]});return(i==null?void 0:i.length)>0?i[0]:null}}register$2("wfs",WfsLayer);class ArcGisWfsLayer extends LodGraphicLayer{[_0x5e32ae(3118)](){super._mountedHook(),this.getMetadata()}getMetadata(){const e={_0x3ebd08:3798},t={_0x52031c:1663},i=_0x5e32ae;let s=this[i(e._0x3ebd08)].url;this[i(3798)].layers&&this[i(3798)].layers.length>0&&(s+="/"+this.options.layers[0]);const n={f:"json"};this[i(e._0x3ebd08)][i(1190)]&&(n.token=this.options.token),sendAjax({...this[i(3798)],url:s,queryParameters:n,proxy:this[i(687)]}).then(o=>{!o||this[i(t._0x52031c)]||(this._initByMetaData(o),this.fire(EventType.loadConfig,o))}).catch(o=>{logInfo("wfs请求getMetadata出错",o)})}_initByMetaData(e){const t={_0x55ca52:2026,_0x261969:2498,_0x3eac36:2628,_0x49551d:3324,_0x1b4009:3183},i=_0x5e32ae;this[i(t._0x55ca52)]=e;let s=e.fullExtent||e[i(3569)];if(!this.options[i(1323)]&&s){var n,o;const c=((n=s)===null||n===void 0||(o=n[i(2681)])===null||o===void 0?void 0:o.wkid)||this.options.wkid;if(c&&!this.options.wkid&&(this.options.wkid=c),this[i(3798)][i(1779)]){const _=i(2066)+this.options.wkid;if(_!==CRS[i(1060)]&&_!==CRS.EPSG4490){const l=proj4Trans([s[i(3183)],s[i(t._0x261969)]],_),h=proj4Trans([s[i(t._0x3eac36)],s.ymax],_);s={xmin:l[0],ymin:l[1],xmax:h[0],ymax:h[1]}}this.options.extent=s,this._rectangle=Cesium__namespace[i(t._0x49551d)].fromDegrees(s[i(t._0x1b4009)],s.ymin,s.xmax,s.ymax),this._tileLayer&&(this._tileLayer.rectangle=this._rectangle),this.options.flyTo&&this.flyToByAnimationEnd()}}}[_0x5e32ae(1839)](e){const t={_0x5e2ddd:3798,_0x2ec5ad:3569,_0x49302d:2628},i={_0x2e7531:549},s=_0x5e32ae;let n=this[s(t._0x5e2ddd)][s(1221)];this.options.layers&&this.options[s(4310)].length>0&&(n+="/"+this.options[s(4310)][0]);const o={f:this.options.f||"json",inSr:4326,outSR:4326,outFields:"*",returnGeometry:!![],where:this.options.where||"1=1",geometry:JSON.stringify({xmin:e[s(t._0x2ec5ad)].xmin,ymin:e.extent.ymin,xmax:e.extent[s(t._0x49302d)],ymax:e.extent.ymax,spatialReference:{wkid:4326}}),geometryType:"esriGeometryEnvelope",spatialRel:"esriSpatialRelIntersects"};return this.options.token&&(o.token=this[s(t._0x5e2ddd)].token),new Promise((c,_)=>{const l={_0x72b630:575},h=s;sendAjax({...this.options,url:n+"/query",queryParameters:o,proxy:this._proxy})[h(i._0x2e7531)](f=>{const m=h;if(e[m(657)]=[],!this[m(l._0x72b630)]||!this._cacheGrid[e.key]){c(e);return}if(f===void 0||f==null){c(e);return}let g=arcgisToGeoJSON$1(f);g.type==="Feature"&&(g={type:m(552),features:[g]}),e[m(657)]=g.features,c(e)}).catch(f=>{logError$1("wfs请求出错",f)})})}_getItemDataId(e){const t={_0x448892:3402,_0x3fa294:1041},i=_0x5e32ae;var s,n;if(e.id)return e.id;if(e.type==="Feature"&&(e=e[i(3292)]),e[this.options.IdField])return e[this.options.IdField];if(e[i(2338)])return e.OBJECTID;if(e[i(611)])return e[i(611)];if(((s=this.metaData)===null||s===void 0||(n=s[i(1041)])===null||n===void 0?void 0:n[i(t._0x448892)])>0){const o=this[i(2026)][i(t._0x3fa294)][0].name;if(e[o])return e[o]}return null}createGraphic(e,t){const i={_0x3f5e23:802},s=_0x5e32ae;if(this[s(3798)].createGraphic)return this.options[s(i._0x3f5e23)](e,t);const n=this.loadGeoJSON(t,{clear:![],flyTo:![]});return(n==null?void 0:n.length)>0?n[0]:null}[_0x5e32ae(3553)](e){const t={_0x4e73e7:3603},i=_0x5e32ae;this.options.where=e,this[i(t._0x4e73e7)]()}}register$2("arcgis_wfs",ArcGisWfsLayer);class ArcGisWfsSingleLayer extends GeoJsonLayer{load(e={}){const t={_0x564725:1221,_0x4f8272:4310,_0x147d63:3798,_0x4f4a24:1201},i=_0x5e32ae;this.options={...this[i(3798)],...e};let s=this.options[i(t._0x564725)];this.options.layers&&this[i(3798)][i(t._0x4f8272)].length>0&&(s+="/"+this[i(3798)].layers[0]);const n={f:i(564),inSr:4326,outSR:4326,outFields:"*",returnGeometry:!![],where:this[i(3798)].where||"1=1"};this[i(t._0x147d63)].token&&(n.token=this.options[i(1190)]),fetchJson({...this[i(t._0x147d63)],url:s+"/query",queryParameters:n,proxy:this._proxy})[i(549)](o=>{if(!o){this.fire(EventType.load);return}const c=arcgisToGeoJSON$1(o);this._load_data(c)})[i(t._0x4f4a24)](o=>{logError$1("wfs请求出错",o)})}setWhere(e){this[_0x5e32ae(2302)]({where:e})}}register$2(_0x5e32ae(2132),ArcGisWfsSingleLayer);var index$4={__proto__:null,BaseLayer,GroupLayer,BaseTileLayer,BaseGraphicLayer,TerrainLayer,ArcGisCacheLayer,ArcGisTileLayer,ArcGisLayer,BaiduLayer,BingLayer,GaodeLayer,GeeLayer,GoogleLayer,ImageLayer,IonLayer,MapboxLayer,OsmLayer,TdtLayer,TencentLayer,TmsLayer,WmsLayer,WmtsLayer,XyzLayer,GridLayer,TileInfoLayer,EmptyTileLayer,CzmGeoJsonLayer,KmlLayer,CzmlLayer,GraphicLayer,GraphicGroupLayer,GeoJsonLayer,BusineDataLayer,TilesetLayer,OsmBuildingsLayer,I3SLayer,GraticuleLayer,LodGraphicLayer,GeodePoiLayer,WfsLayer,ArcGisWfsLayer,ArcGisWfsSingleLayer,register:register$2,create:create$2,createTerrainProvider,createImageryProvider:createImageryProvider$k};class Underground extends BaseThing{get translucency(){return this[_0x5e32ae(1890)].scene.globe.translucency}get alpha(){return this._alpha}set alpha(e){const t={_0x12226d:1890},i=_0x5e32ae;this._alpha=e,this[i(t._0x12226d)]&&(this.translucency.frontFaceAlpha=this._alpha)}get[_0x5e32ae(2092)](){const e={_0x471bd2:1329},t=_0x5e32ae;return this._map.scene[t(e._0x471bd2)].undergroundColor}set color(e){const t={_0x419929:1890,_0x3c036d:2517},i=_0x5e32ae;this[i(t._0x419929)].scene.globe[i(t._0x3c036d)]=e}get colorAlphaByDistance(){const e=_0x5e32ae;return this._map.scene.globe[e(554)]}set colorAlphaByDistance(e){this._map.scene.globe.undergroundColorAlphaByDistance=e}[_0x5e32ae(751)](e){const t={_0x484461:1890,_0x5d3fdb:2130,_0x377a96:1463},i=_0x5e32ae;this._map&&(this[i(t._0x484461)].scene[i(1329)][i(t._0x5d3fdb)]=e?!![]:this.depthTestOld,this[i(1890)].scene.screenSpaceCameraController[i(t._0x377a96)]=!e,this.translucency.enabled=e)}_mountedHook(){const e=_0x5e32ae;this.translucency.frontFaceAlpha=1,this.translucency.backFaceAlpha=0,this[e(1202)]=this[e(3798)].alpha??.5,this.color=this.options.color??Cesium__namespace.Color.BLACK}[_0x5e32ae(4158)](){const e={_0x46494c:2130},t=_0x5e32ae;this.depthTestOld=Cesium__namespace.clone(this._map.scene.globe[t(e._0x46494c)]),this._enabledHook(this[t(968)])}_removedHook(){const e=_0x5e32ae;this._map.scene.globe.depthTestAgainstTerrain=this.depthTestOld,this[e(751)](![])}}class Sightline extends BaseThing{constructor(e={}){const t={_0xeafec2:2939,_0x5bde7b:1222},i=_0x5e32ae;super(e),this._visibleColor=e.visibleColor??new Cesium__namespace.Color(0,1,0,.5),this._hiddenColor=e.hiddenColor??new Cesium__namespace.Color(1,0,0,.5),this._depthFailColor=e[i(t._0xeafec2)],this[i(t._0x5bde7b)]=[]}get[_0x5e32ae(3074)](){return this[_0x5e32ae(4137)]}set visibleColor(e){const t={_0xa2baf8:4137},i=_0x5e32ae;this[i(t._0xa2baf8)]=e}get hiddenColor(){return this._hiddenColor}set hiddenColor(e){this._hiddenColor=e}get depthFailColor(){return this._depthFailColor}set depthFailColor(e){const t=_0x5e32ae;this[t(2692)]=e}_mountedHook(){}_addedHook(){}_removedHook(){}add(e,t,i={}){const s={_0x44feda:2476,_0x21107b:1329,_0x2b9375:2130,_0x424ec3:2336,_0x38a011:1222,_0x4b7d4e:515,_0x55044d:1404},n=_0x5e32ae;i.offsetHeight&&(e=addPositionsHeight(e,i.offsetHeight)),this[n(1404)](EventType[n(s._0x44feda)]),!this._map.scene[n(s._0x21107b)][n(s._0x2b9375)]&&(this._map[n(3107)].globe.depthTestAgainstTerrain=!![],this[n(s._0x424ec3)]=this._map.scene.globe.depthTestAgainstTerrain),this._map.scene.requestRender();const o=Cesium__namespace.Cartesian3.normalize(Cesium__namespace[n(3916)].subtract(t,e,new Cesium__namespace.Cartesian3),new Cesium__namespace.Cartesian3),c=new Cesium__namespace.Ray(e,o),_=this[n(1890)].scene[n(2922)](c,2,this[n(s._0x38a011)]);if(Cesium__namespace[n(s._0x4b7d4e)](_)&&_.length>0&&Cesium__namespace[n(s._0x4b7d4e)](_[0])&&Cesium__namespace[n(515)](_[0].position)){const f=_[0].position,m=Cesium__namespace.Cartesian3.distance(e,t);if(Cesium__namespace.Cartesian3.distance(e,f)<m){const C=this._showPolyline(e,t,f),E={block:!![],position:f,entity:C};return this.fire(EventType.end,E),E}}const l=this._showPolyline(e,t),h={block:![],entity:l};return Cesium__namespace.defined(this.old_depthTestAgainstTerrain)&&(this._map.scene.globe.depthTestAgainstTerrain=this.old_depthTestAgainstTerrain,delete this.old_depthTestAgainstTerrain),this[n(s._0x55044d)](EventType.end,h),h}addAsync(e,t,i={}){i.offsetHeight&&(e=addPositionsHeight(e,i.offsetHeight));const s=interLine([e,t],{splitNum:i.splitNum||50,minDistance:i.minDistance});return this.fire(EventType.start),new Promise((n,o)=>{const c={_0x23aa43:3865};computeSurfacePoints({map:this._map,positions:s}).then(_=>{const l=_0x5210;if(!_.noHeight)for(let m=0;m<s.length;m++){const g=s[m],C=Cesium__namespace.Cartographic.fromCartesian(g)[l(c._0x23aa43)],E=Cesium__namespace.Cartographic.fromCartesian(_.positions[m]).height;if(C<=E){const P=this._showPolyline(e,t,g),w={block:!![],position:g,entity:P};this.fire(EventType[l(2384)],w),n(w);return}}const h=this._showPolyline(e,t),f={block:![],entity:h};this[l(1404)](EventType.end,f),n(f)})})}_showPolyline(e,t,i){const s={_0x3ffb75:4084,_0x5f024a:2692,_0xc171c1:4084},n=_0x5e32ae;if(i){const o=this._map.entities.add(new Cesium__namespace.Entity({polyline:{positions:[e,i],width:2,material:this._visibleColor,depthFailMaterial:this._depthFailColor}}));this.lines.push(o);const c=this._map.entities[n(s._0x3ffb75)](new Cesium__namespace.Entity({polyline:{positions:[i,t],width:2,material:this._hiddenColor,depthFailMaterial:this[n(s._0x5f024a)]}}));return this[n(1222)].push(c),[o,c]}else{const o=this[n(1890)].entities[n(s._0xc171c1)](new Cesium__namespace.Entity({polyline:{positions:[e,t],width:2,material:this._visibleColor,depthFailMaterial:this._depthFailColor}}));return this.lines[n(3759)](o),[o]}}[_0x5e32ae(1387)](){const e={_0x31e97c:2004},t=_0x5e32ae;for(let i=0,s=this.lines.length;i<s;i++)this[t(1890)].entities[t(e._0x31e97c)](this.lines[i]);this[t(1222)]=[]}}var fragmentShaderSource$1=_0x5e32ae(990);class Skyline extends BaseThing{constructor(e={}){const t={_0x1caecc:2776},i=_0x5e32ae;super(e),this[i(2092)]=e[i(2092)]??new Cesium__namespace[i(2200)](1,0,0),this.width=e.width??2,this[i(2400)]=e.strokeType??new Cesium__namespace.Cartesian3(!![],![],![]),this.bjColor=e[i(2944)]??new Cesium__namespace.Color(0,0,1),this.distance=e[i(t._0x1caecc)]??500}_enabledHook(e){const t={_0x2ae4c6:3168,_0x2dab38:4158,_0x2aaadf:2442},i=_0x5e32ae;e?!this[i(t._0x2ae4c6)]&&this[i(t._0x2dab38)]():this.postProcessStage&&this[i(t._0x2aaadf)]()}[_0x5e32ae(4158)](){const e={_0x15a2d8:2944},t=_0x5e32ae,i=this._map.camera;this.postProcessStage=new Cesium__namespace.PostProcessStage({fragmentShader:fragmentShaderSource$1,uniforms:{height:()=>{const s=_0x5210;return i.positionCartographic[s(3865)]},lineWidth:()=>this.width,strokeType:()=>this.strokeType,tjxColor:()=>this.color,bjColor:()=>this[_0x5210(e._0x15a2d8)],cameraPos:()=>i.position,mbDis:()=>this.distance}}),this._map[t(3107)][t(1583)][t(4084)](this[t(3168)])}_removedHook(){const e={_0x47c116:2004},t=_0x5e32ae;this.postProcessStage&&(this._map.scene.postProcessStages[t(e._0x47c116)](this[t(3168)]),this.postProcessStage.destroy(),delete this.postProcessStage)}}const fragmentShaderSource=`
    precision highp float;
    uniform sampler2D u_positionTexture;
    uniform sampler2D shadowMap_texture;

    in vec2 v_textureCoordinates;

    vec4 getPositionEC(vec2 uv)
    {
      vec4 positionEC =  texture(u_positionTexture, uv);
      return vec4(positionEC.xyz, 1.0);
    }

    void main() {
      vec2 uv = v_textureCoordinates;
      float maxDepth = shadowMap_cascadeSplits[1].w;
      vec4 positionEC = getPositionEC(uv);
      vec3 normalEC = vec3(1.0);
      float depth = -positionEC.z;

      if (depth > maxDepth){
        out_FragColor = vec4(0.0);
      } else {
        vec4 weights = czm_cascadeWeights(depth);
        vec4 shadowPosition = czm_cascadeMatrix(weights) * positionEC;
        float deptha = czm_unpackDepth(texture(shadowMap_texture, shadowPosition.xy));
        out_FragColor = vec4(step(shadowPosition.z,deptha), 0.0, 1.0, 2.0);
        // out_FragColor = vec4(uv, 1.0, 2.0);
      }
    }
    `,vertexShaderSource=`
    in vec4 position;
    in vec2 textureCoordinates;
    out vec2 v_textureCoordinates;
    void main()
    {
        gl_Position = position;
        v_textureCoordinates = textureCoordinates;
    }
  `,texturePositions=new Float32Array([-1,-1,1,-1,1,1,-1,1]),textureUVs=new Float32Array([0,0,1,0,1,1,0,1]),textureIndices=new Uint16Array([0,1,2,0,2,3]);function createTextureVA(r){const e=_0x5e32ae,t=Cesium__namespace.Buffer.createVertexBuffer({context:r,typedArray:texturePositions,usage:Cesium__namespace.BufferUsage.STATIC_DRAW}),i=Cesium__namespace.Buffer.createVertexBuffer({context:r,typedArray:textureUVs,usage:Cesium__namespace[e(1681)].STATIC_DRAW}),s=Cesium__namespace.Buffer.createIndexBuffer({context:r,typedArray:textureIndices,usage:Cesium__namespace.BufferUsage.STATIC_DRAW,indexDatatype:Cesium__namespace.IndexDatatype.UNSIGNED_SHORT}),n=[{index:0,vertexBuffer:t,componentsPerAttribute:2,componentDatatype:Cesium__namespace[e(1590)].FLOAT},{index:1,vertexBuffer:i,componentsPerAttribute:2,componentDatatype:Cesium__namespace.ComponentDatatype.FLOAT}];return new Cesium__namespace[e(1807)]({context:r,attributes:n,indexBuffer:s})}function createFramebuffer(r,e){const t={_0x51e49e:3416},i=_0x5e32ae;return new Cesium__namespace[i(t._0x51e49e)]({context:r,colorTextures:[e],destroyAttachments:![]})}function computeTextureResolution(r){const e=Cesium__namespace.ContextLimits.maximumTextureSize,t=Math.min(r,e),i=Math.ceil(r/t);return{x:t,y:i}}function completionBuffer(r,e){const t=_0x5e32ae,i=e.x*e.y,s=r[t(3402)]/4;for(let n=s;n<i;n++)r.push(0),r.push(0),r.push(0),r.push(0)}class ShadowRateDrawCommand{constructor(e,t){const i={_0x5262ad:3402,_0x515f71:562,_0xf5bfb:3521,_0x23b20b:2585},s={_0x2de2e0:3521,_0x42e0d5:3521},n={_0xa7fc57:3934},o={_0x59a2f1:3681,_0x3e61c9:1354},c=_0x5e32ae;this._event=new Cesium__namespace.Event,this._scene=e,this[c(3270)]=t,this._stat=![];const _=t[c(i._0x5262ad)];this._requiredResolution=computeTextureResolution(_);const l=new Cesium__namespace.Texture({context:e.context,source:{arrayBufferView:new Float32Array(this[c(562)].x*this._requiredResolution.y*4),width:this[c(i._0x515f71)].x,height:this._requiredResolution.y},pixelDatatype:Cesium__namespace.PixelDatatype.FLOAT,pixelFormat:Cesium__namespace.PixelFormat.RGBA,flipY:![]}),h=createTextureVA(e[c(i._0xf5bfb)]),f=Cesium__namespace.ShaderProgram[c(2185)]({context:e.context,vertexShaderSource,fragmentShaderSource,attributeLocations:{position:0,textureCoordinates:1}});this[c(i._0x23b20b)]=new Cesium__namespace.ComputeCommand({vertexArray:h,shaderProgram:f,outputTexture:l,uniformMap:{shadowMap_cascadeSplits:()=>{const m=c;return e.shadowMap[m(1200)]},shadowMap_cascadeMatrices:()=>{const m=c;return e[m(o._0x59a2f1)][m(o._0x3e61c9)]},shadowMap_texture:()=>e.shadowMap._shadowMapTexture,u_positionTexture:()=>this[c(n._0xa7fc57)]},persists:!![],owner:this,postExecute:m=>{const g=c,C=createFramebuffer(e[g(s._0x2de2e0)],m),E=e[g(s._0x42e0d5)].readPixels({framebuffer:C,width:this._requiredResolution.x,height:this._requiredResolution.y});this._event.raiseEvent(E.slice(0,_*4))}})}get event(){return this._event}start(){const e={_0x5256d7:3465,_0x2ea234:2500,_0x16eef3:1597,_0x299314:3820},t=_0x5e32ae,i=this._scene.camera.viewMatrix,s=this._positions[t(e._0x5256d7)](o=>Cesium__namespace[t(4102)].multiplyByPoint(i,o,new Cesium__namespace.Cartesian3)),n=[];s[t(e._0x2ea234)](o=>{const c=t;n.push(o.x),n.push(o.y),n.push(o.z),n[c(3759)](0)}),this[t(3934)]&&this._positionTexture.destroy(),completionBuffer(n,this._requiredResolution),this[t(3934)]=new Cesium__namespace.Texture({context:this[t(e._0x16eef3)].context,source:{width:this[t(562)].x,height:this._requiredResolution.y,arrayBufferView:new Float32Array(n)},pixelDatatype:Cesium__namespace[t(2478)].FLOAT,flipY:![]}),this[t(e._0x299314)]=!![]}update(e){const t=_0x5e32ae;this.drawCommand&&this._stat&&(e[t(2630)].push(this.drawCommand),this[t(3820)]=![])}destroy(){const e={_0xe9e6ce:757},t=_0x5e32ae;this[t(3934)]&&this._positionTexture[t(e._0xe9e6ce)](),Cesium__namespace.destroyObject(this)}}class Shadows extends BaseThing{get shadowMap(){const e={_0x5780ca:3107},t=_0x5e32ae;return this._map[t(e._0x5780ca)].shadowMap}get time(){const e=_0x5e32ae,t=this[e(1890)].clock.currentTime;return Cesium__namespace.JulianDate.toDate(t)}set time(e){const t=_0x5e32ae;this[t(1890)].clock.currentTime=Cesium__namespace.JulianDate.fromDate(e),this.stop()}get isStart(){const e={_0x176e85:1949},t=_0x5e32ae;return this._map[t(e._0x176e85)].shouldAnimate}get multiplier(){var e;return(e=this._map)===null||e===void 0?void 0:e.clock.multiplier}set multiplier(e){this.options.multiplier=e,this._map&&(this._map.clock.multiplier=e)}_enabledHook(e){const t={_0x58723e:1890,_0x326695:3566,_0x4fbf4b:451,_0x467013:2172,_0x3be3a8:1329,_0x42a527:3983},i=_0x5e32ae;this._map&&(this[i(t._0x58723e)].viewer.shadows=e,(this.options.terrain??!![])&&(this[i(1890)][i(737)][i(t._0x326695)]=e?Cesium__namespace.ShadowMode[i(t._0x4fbf4b)]:Cesium__namespace.ShadowMode.DISABLED),(this.options[i(t._0x467013)]??!![])&&(this._map.scene[i(t._0x3be3a8)][i(t._0x42a527)]=e))}_mountedHook(){}[_0x5e32ae(4158)](){const e={_0x51dafb:3120,_0x2dc72b:3932,_0x3e7eb2:1645,_0x48028e:1890,_0x2aa497:1949,_0x4a2019:1890,_0x8ea90e:751,_0x5a71d1:2591,_0x474c59:3798,_0x3c5578:2800,_0x371d67:1572,_0x469e6a:1213},t=_0x5e32ae;this[t(e._0x51dafb)]=this._map.clock[t(e._0x2dc72b)],this[t(e._0x3e7eb2)]=this[t(e._0x48028e)][t(e._0x2aa497)].stopTime,this._last_shouldAnimate=this[t(1890)].clock.shouldAnimate,this._last_clockRange=this[t(e._0x4a2019)][t(1949)].clockRange,this._last_multiplier=this._map.clock.multiplier,this._last_shadows=this._map.viewer[t(4193)],this[t(e._0x8ea90e)](this.enabled),this[t(1890)].clock.shouldAnimate=![],this._map.clock[t(e._0x5a71d1)]=this[t(e._0x474c59)].clockRange??Cesium__namespace.ClockRange[t(e._0x3c5578)],this[t(1890)].clock.multiplier=this[t(3798)].multiplier??1600,this.options.time&&(this.time=this[t(3798)][t(e._0x371d67)]),this._map.on(EventType[t(e._0x469e6a)],this._onClockTickHanlder,this)}[_0x5e32ae(2442)](){const e=_0x5e32ae;this._map.off(EventType.clockTick,this._onClockTickHanlder,this),this.clear(),this._enabledHook(![]),this[e(1890)].viewer[e(4193)]=this._last_shadows,this._map.clock[e(2591)]=this[e(1407)],this._map.clock.multiplier=this._last_multiplier,this._map[e(1949)].shouldAnimate=this._last_shouldAnimate}_onClockTickHanlder(){const e={_0x26b961:1949,_0x28b0bc:1050,_0x4ec235:1826},t=_0x5e32ae;this._map[t(e._0x26b961)][t(e._0x28b0bc)]&&(this[t(e._0x4ec235)]&&(this._drawCommand.start(),this._rate_total+=1),this.fire(EventType[t(809)]))}[_0x5e32ae(2476)](e,t,i){const s={_0x4d11c5:527,_0x1c3ff7:1050},n=_0x5e32ae;this._map&&(!e||!t||e>=t||(this[n(1890)].clock.startTime=Cesium__namespace.JulianDate.fromDate(e),this._map.clock.currentTime=Cesium__namespace[n(527)].fromDate(i||e),this[n(1890)].clock.stopTime=Cesium__namespace[n(s._0x4d11c5)].fromDate(t),this._map.clock[n(s._0x1c3ff7)]=!![]))}[_0x5e32ae(2044)](){this._map&&(this._map.clock.shouldAnimate=![])}proceed(){const e=_0x5e32ae;this._map&&(this[e(1890)].clock.shouldAnimate=!![])}stop(){const e={_0x316835:1949},t=_0x5e32ae;this._map&&(this[t(1890)][t(e._0x316835)].shouldAnimate=![])}[_0x5e32ae(1387)](){const e={_0x522188:3932,_0xc8ec80:1220,_0x235d8c:1374},t=_0x5e32ae;this.stop(),this.currentTime=new Date,this[t(1890)].clock[t(e._0x522188)]=this._last_startTime,this._map.clock.stopTime=this._last_stopTime,this[t(1890)][t(e._0xc8ec80)](EventType.clockStop,this._map_clockStopTickHandler,this),this[t(e._0x235d8c)]()}[_0x5e32ae(2042)](e){const t={_0xb40b04:2436,_0x119f00:2298,_0x26e793:1826,_0x2f64dc:1485},i={_0x2cf2fb:2746};return new Promise((s,n)=>{const o=_0x5210;if(!this[o(1890)]||!e.positions||e[o(t._0xb40b04)].length===0||!e[o(3040)]||!e.endDate||e[o(3040)]>=e[o(1485)])return s();this[o(1024)]=s;const c=getGridPointsByPoly(e.positions,e[o(2308)],e.minHeight),_=[];if(Cesium__namespace.defined(e.minHeight)&&Cesium__namespace.defined(e[o(t._0x119f00)])&&e.minHeight!==e[o(2298)])for(let l=e.minHeight;l<e.maxHeight;l+=e.step)c[o(2500)](h=>{const f=o,m=Cesium__namespace.Cartesian3.fromDegrees(h.lng,h.lat,l);m.lng=h.lng,m.lat=h.lat,m.alt=l,m.total=0,_[f(3759)](m)});else c.forEach(l=>{const h=o,f=Cesium__namespace.Cartesian3.fromDegrees(l.lng,l.lat,l.alt);f.lng=l.lng,f.lat=l.lat,f[h(3984)]=l.alt,f[h(2746)]=0,_[h(3759)](f)});this[o(4292)]=_,this._clearDraw(),this[o(1826)]=new ShadowRateDrawCommand(this[o(1890)].scene,this._rate_positions),this._map.scene.primitives.add(this[o(1826)]),this[o(t._0x26e793)].event[o(2732)](l=>{const h=o,f=l.length;let m=0;for(let g=0;g<f;g+=4)this._rate_positions[m][h(i._0x2cf2fb)]+=l[g],m+=1}),this._map.on(EventType.clockStop,this._map_clockStopTickHandler,this),this.start(e.startDate,e[o(t._0x2f64dc)]),this[o(1404)](EventType.start)})}[_0x5e32ae(1374)](){const e={_0x25b71d:4292,_0x377977:1826},t=_0x5e32ae;if(this._rate_total=0,this[t(4292)])for(let i=0,s=this._rate_positions.length;i<s;i++)this[t(e._0x25b71d)][i].total=0;this._drawCommand&&(this._map.scene[t(1e3)].remove(this[t(1826)]),this[t(e._0x377977)].destroy(),delete this._drawCommand)}_map_clockStopTickHandler(e){const t={_0x49de55:1890,_0x5a2d1d:3402},i=_0x5e32ae;this._map.off(EventType.clockStop,this._map_clockStopTickHandler,this),this[i(1826)]&&(this[i(t._0x49de55)][i(3107)].primitives[i(2004)](this._drawCommand),this._drawCommand[i(757)](),delete this._drawCommand);for(let n=0,o=this._rate_positions[i(t._0x5a2d1d)];n<o;n++)this._rate_positions[n].rate=1-this._rate_positions[n].total/this._rate_total;const s={total:this._rate_total,positions:this._rate_positions};this._promise_resolve&&(this[i(1024)](s),delete this._promise_resolve),this.fire(EventType.stop,s)}}class Measure extends BaseThing{get graphicLayer(){return this._graphicLayer}get graphics(){const e=_0x5e32ae;return this._graphicLayer[e(1715)]}get[_0x5e32ae(2644)](){const e={_0x551645:3402},t=_0x5e32ae;return this._graphicLayer[t(e._0x551645)]>0}_enabledHook(e){}[_0x5e32ae(3118)](){const e={_0x4e19ce:3798,_0x52171c:993,_0x24c865:506},t={_0x19e3ad:1404},i=_0x5e32ae;this._graphicLayer=new GraphicLayer({hasEdit:!![],eventParent:this,isContinued:this.options.isContinued,isAutoEditing:!this[i(e._0x4e19ce)].isContinued,...this[i(3798)],private:!![]}),this._graphicLayer.hasEdit&&this[i(e._0x52171c)][i(2182)]([{text:this._map.getLangText("_删除测量"),icon:Icon[i(e._0x24c865)],show:s=>{const n=s.graphic;return n!=null&&n.inProgress&&!n.editing?![]:!![]},callback:s=>{const n=i,o=s.graphic;if(!o)return;const c=o.parent;this._graphicLayer.removeGraphic(o),c&&this._graphicLayer.removeGraphic(c),this[n(t._0x19e3ad)](EventType.remove,{mtype:this[n(1366)],graphic:o})}}])}_addedHook(){const e={_0xbc9655:993},t=_0x5e32ae;this._map.addLayer(this[t(e._0xbc9655)])}[_0x5e32ae(2442)](){const e={_0x107ae3:1890},t=_0x5e32ae;this[t(e._0x107ae3)][t(2642)](this[t(993)])}distance(e={}){return this.stopDraw(),e.type="distanceMeasure",this._graphicLayer.startDraw(e)}distanceSurface(e={}){return this.stopDraw(),e.type="distanceSurfaceMeasure",this._graphicLayer.startDraw(e)}section(e={}){const t={_0x10f138:4231},i=_0x5e32ae;return this[i(t._0x10f138)](),e.type=i(3778),this._graphicLayer.startDraw(e)}area(e={}){return this.stopDraw(),e.type="areaMeasure",this._graphicLayer.startDraw(e)}areaSurface(e={}){const t={_0x24bc87:993},i=_0x5e32ae;return this[i(4231)](),e.type=i(2210),this[i(t._0x24bc87)].startDraw(e)}[_0x5e32ae(1955)](e={}){const t={_0xe96e:4231},i=_0x5e32ae;return this[i(t._0xe96e)](),e.type=e.depth?"volumeDepthMeasure":i(964),this._graphicLayer.startDraw(e)}height(e={}){const t=_0x5e32ae;return this.stopDraw(),e.type="heightMeasure",this._graphicLayer[t(1860)](e)}heightTriangle(e={}){const t={_0x2e961d:3205},i=_0x5e32ae;return this.stopDraw(),e[i(t._0x2e961d)]="heightTriangleMeasure",this._graphicLayer.startDraw(e)}angle(e={}){const t={_0x2b5b9c:835},i=_0x5e32ae;return this.stopDraw(),e.type=i(t._0x2b5b9c),this._graphicLayer.startDraw(e)}point(e={}){const t={_0x7ed356:4231,_0x502f1d:3205},i=_0x5e32ae;return this[i(t._0x7ed356)](),e[i(t._0x502f1d)]="pointMeasure",this._graphicLayer.startDraw(e)}stopDraw(){const e={_0xdc9a85:4231},t=_0x5e32ae;return this._graphicLayer[t(e._0xdc9a85)]()}[_0x5e32ae(3614)](){const e={_0x36e41b:3614},t=_0x5e32ae;return this._graphicLayer[t(e._0x36e41b)]()}endDraw(){return this._graphicLayer.endDraw()}clear(){return this._graphicLayer.clear()}updateUnit(e){this[_0x5e32ae({_0x1922b3:993}._0x1922b3)].eachGraphic(s=>{s.options.unit=e,s.showText&&s.showText(e)})}destroy(e){const t=_0x5e32ae;this._graphicLayer.destroy(e),super[t(757)](e)}}class FloodByGraphic extends BaseThing{get positions(){return this.options.positions}set positions(e){const t={_0x369a68:1890,_0x4b06bc:3107},i=_0x5e32ae;if(this.options.positions=e,e){const s=[],n=[];e.forEach(o=>{const c=_0x5210,_=LngLatPoint.parse(o);!_||!_.valid()||(_._alt_bak=_[c(3984)],n.push(_),s.push(_.toCartesian(!![])))}),this._poinst=n,this._hierarchyPositions=s,this._map&&!(this.options[i(2288)]??Cesium__namespace.defined(this._map.pick3DTileset(s)))&&(!Cesium__namespace.defined(this._last_depthTestAgainstTerrain)&&(this._last_depthTestAgainstTerrain=this[i(t._0x369a68)][i(t._0x4b06bc)].globe.depthTestAgainstTerrain),this._map.scene.globe.depthTestAgainstTerrain=!![])}else this._hierarchyPositions=null}get height(){const e={_0x3a92d6:4111},t=_0x5e32ae;return this._extrudedHeight??this.options[t(e._0x3a92d6)]}set height(e){const t={_0xe6bedc:3798,_0x12820e:3726},i={_0x29e260:3653,_0x2a5143:2048},s=_0x5e32ae;if(this._extrudedHeight=e,this[s(3798)].perPositionHeight&&(!this._poinst&&this[s(t._0xe6bedc)].positions&&(this.positions=this.options.positions),this._poinst)){const n=[];this[s(t._0x12820e)].forEach(o=>{const c=s,_=LngLatPoint.parse(o);!_||!_[c(i._0x29e260)]()||(_.alt=_._alt_bak+e,n.push(_[c(i._0x2a5143)](!![])))}),this._hierarchyPositions=n}this.fire(EventType.change,{height:this[s(842)]})}get[_0x5e32ae(2613)](){return this.options.speed}set speed(e){this.options.speed=e}_mountedHook(){const e={_0x18fac5:2839,_0x5b1c77:842},t={_0x49f82b:842},i=_0x5e32ae;this[i(e._0x18fac5)]=new GraphicLayer({name:i(1094),private:!![]}),this[i(e._0x5b1c77)]=0;const s=new Cesium__namespace.PolygonHierarchy,n={color:"#007be6",opacity:.5,outline:![],...this.options.style||{},perPositionHeight:!![]};!this.options.perPositionHeight&&(n.height=this._extrudedHeight,n.extrudedHeight=new Cesium__namespace.CallbackProperty(c=>this[i(t._0x49f82b)],![]));const o=new PolygonEntity({positions:new Cesium__namespace.CallbackProperty(c=>this._hierarchyPositions?(s.positions=this._hierarchyPositions,s):null,![]),style:n});this.graphic=o,Cesium__namespace[i(515)](this.options.minHeight)&&Cesium__namespace.defined(this.options.maxHeight)&&Cesium__namespace[i(515)](this.options[i(2436)])&&this.setOptions()}_addedHook(){const e={_0x512e80:1890},t=_0x5e32ae;this[t(e._0x512e80)][t(2965)](this.graphicLayer),this.graphicLayer.addGraphic(this.graphic)}_removedHook(){const e={_0x5659d5:1387},t=_0x5e32ae;this[t(1890)].removeLayer(this.graphicLayer),this[t(e._0x5659d5)]()}[_0x5e32ae(724)](e){const t={_0x370233:4111,_0x4d21cf:3106,_0x299441:4125,_0x570737:2436},i=_0x5e32ae;e&&(this.options={...this.options,...e}),this.stop();let s=this.options[i(t._0x370233)],n=this.options.maxHeight;if(!Cesium__namespace.defined(s)){logError$1(i(t._0x4d21cf),s);return}if(!Cesium__namespace.defined(n)){logError$1(i(t._0x299441),n);return}if(s>n){const o=s;s=n,n=o}return this[i(842)]=s,this._maxHeight=n,this.positions=this.options[i(t._0x570737)],this}start(){const e={_0x424cc9:842};if(!this._hierarchyPositions){logError$1("请传入淹没区域才能开始分析");return}this.stop(),this.isStart=!![],this.fire(EventType.start),this._timeTik=setInterval(()=>{const t=_0x5210;if(this[t(842)]>=this[t(960)]){this.stop();return}const i=this[t(e._0x424cc9)]+this.speed;i>this._maxHeight?this.height=this._maxHeight:this.height=i},100)}[_0x5e32ae(3874)](){const e={_0x461851:2384},t=_0x5e32ae;this.isStart&&(this[t(3688)]&&(clearInterval(this._timeTik),delete this._timeTik),this.isStart=![],this.fire(EventType[t(e._0x461851)]))}restart(){this[_0x5e32ae(724)](),this.start()}[_0x5e32ae(1387)](){const e={_0x3c65eb:1890},t=_0x5e32ae;this.positions=null,this[t(2432)]!=null&&(this[t(e._0x3c65eb)].scene.globe.depthTestAgainstTerrain=this._last_depthTestAgainstTerrain,delete this._last_depthTestAgainstTerrain),this.stop()}destroy(e){const t={_0x997bb4:757},i=_0x5e32ae;this.graphicLayer&&this.graphicLayer.destroy(e),super[i(t._0x997bb4)](e)}}class Slope extends BaseThing{constructor(e={}){const t={_0x58b184:3798,_0x2287a8:3479,_0x56da70:3479,_0x206636:3206},i=_0x5e32ae;super(e),this[i(t._0x58b184)].arrow=this.options.arrow||{},this.options[i(t._0x2287a8)].show=this[i(3798)].arrow.show??!![],this[i(3798)].arrow.color=this.options.arrow.color??Cesium__namespace.Color.YELLOW,this.options.arrow[i(4005)]=this.options[i(t._0x56da70)].width??15,this.options.arrow[i(t._0x206636)]=this.options.arrow.scale??.3}_mountedHook(){const e={_0x684261:3628},t=_0x5e32ae;this[t(2839)]=new GraphicLayer({name:"坡度坡向",tooltip:function(i){const s=t;var n;const o=(n=i[s(2118)])===null||n===void 0?void 0:n.attr;if(o)return"坡度: "+o.slopeStr1+"  ("+o[s(e._0x684261)]+s(1047)+o.direction+"°"},...this.options,private:!![]})}_addedHook(){const e=_0x5e32ae;this._map.addLayer(this.graphicLayer),this.options.positions&&this.options[e(2436)].length>0&&this[e(4084)](this.options.positions,this.options)}_removedHook(){const e={_0x1d1301:2839,_0xc3ce4f:1387},t=_0x5e32ae;this[t(1890)].removeLayer(this[t(e._0x1d1301)]),this[t(e._0xc3ce4f)]()}[_0x5e32ae(4084)](e,t={}){const i={_0x59d362:1023,_0x38ada9:1616,_0x46d4ad:3479},s={_0x58af11:3402,_0x288f5f:1890,_0x29294e:3107,_0xca4a28:2298,_0x1bb558:2298,_0x7a260c:1023,_0x298645:3759,_0x1cecf6:4117},n=_0x5e32ae;if(!e||e.length<1)return;e=LngLatArray.toCartesians(e),this[n(i._0x59d362)]={positions:e},this[n(i._0x38ada9)]=0,this[n(3639)]=[],this._arrData=[];const o=t.splitNum??8;if(e.length>2&&o>1)interPolygon({scene:this._map.scene,positions:e,has3dtiles:![],onlyPoint:!![],splitNum:o}).then(c=>{const _=n;this.options.arrow.length?this._arrowLength=this.options.arrow[_(s._0x58af11)]:this._arrowLength=Cesium__namespace.Math.chordLength(c.granularity,this[_(s._0x288f5f)][_(s._0x29294e)].globe.ellipsoid[_(1738)])*this.options.arrow.scale,this._eventResult[_(s._0xca4a28)]=c[_(s._0x1bb558)],this[_(s._0x7a260c)].minHeight=c[_(4111)],e=[];for(let l=0;l<c.list.length;l++)e[_(s._0x298645)](c.list[l].pointDM);this._stateAll=e.length;for(let l=0;l<this._stateAll;l++)this[_(s._0x1cecf6)](e[l],t)});else{this._arrowLength=this.options[n(i._0x46d4ad)].length??40,this[n(1008)]=e.length;for(let c=0;c<this._stateAll;c++)this._fxOnePoint(e[c],t)}}_fxOnePoint(e,t){const i={_0x5f5b80:3107,_0x5d2594:549},s={_0x44fb7c:1008,_0x592757:3865},n=_0x5e32ae;if(!e)return;const o=getEllipseOuterPositions({position:e,radius:t.radius??2,count:t.count??4});o.push(e);const c=this._map.scene[n(1329)].ellipsoid;computeSurfacePoints({scene:this[n(1890)][n(i._0x5f5b80)],positions:o,has3dtiles:t.has3dtiles})[n(i._0x5d2594)](_=>{const l=n;if(this[l(s._0x44fb7c)]===0)return;_.noHeight&&logWarn("未获取到高度值，贴地高度计算存在误差");const h=c[l(4290)](_.positions),f=h.pop();let m=0,g=h[0].height,C=0,E=h[0].height;for(let L=1;L<h.length-1;L++){const R=h[L];R[l(s._0x592757)]>g&&(g=R.height,m=L),R.height<E&&(E=R.height,C=L)}const P=h[m],w=h[C],M=this.getSlope(f,P),T=this.getSlope(f,w);M>T?this._fxOnePointOk(e,f,P,M):this._fxOnePointOk(e,f,w,T)})}[_0x5e32ae(3192)](e,t,i,s){const n={_0x16b6d0:2048,_0x33e9bf:575,_0xb242c9:1008},o=_0x5e32ae,c=Cesium__namespace.Cartographic[o(n._0x16b6d0)](t);let _=Cesium__namespace[o(3026)].toCartesian(i);_=getOnLinePointByLen(c,_,this[o(4098)]);let l;t[o(3865)]>i[o(3865)]?l=[c,_]:l=[_,c];const h=getAngle(l[0],l[1],!![]);let f=Math.atan(s)*180/Math.PI;f=Number(f[o(1029)](2));const m=f+"°",g=(s*100)[o(1029)](2)+"%",C={position:e,slope:f,slopeStr1:m,slopeStr2:g,direction:h};if(!this._arrData&&(this._arrData=[]),this._arrData[o(3759)](C),this.fire(EventType.endItem,{data:C,index:this[o(1616)]}),this.options.arrow[o(n._0x33e9bf)]&&this._arrowInstances.push({positions:l,attr:C}),this._stateOkIndex++,this[o(1616)]>=this[o(n._0xb242c9)]){if(this.options.arrow.show&&this._arrowInstances.length>0){const E=new PolylineCombine({instances:this._arrowInstances,style:{materialType:PolylineArrow,...this.options.arrow}});this.graphicLayer.addGraphic(E)}this.fire(EventType.end,{...this[o(1023)]||{},data:this._arrData})}}getSlope(e,t){const i=_0x5e32ae;if(!e||!t)return;const s=Math.abs(e.height-t.height),n=Cesium__namespace.Cartesian3[i(2776)](Cesium__namespace.Cartographic.toCartesian(e),Cesium__namespace[i(3916)].fromRadians(t.longitude,t[i(3701)],e[i(3865)]));return s/n}clear(){const e=_0x5e32ae;this.graphicLayer.clear(),this._arrowInstances=[],this._arrData=[],this[e(1008)]=0,this._stateOkIndex=0}static[_0x5e32ae(2273)](e){const t={_0x5d3bb7:857,_0x3b29f6:2340};return new Promise((i,s)=>{const n={_0xb68205:757,_0x48d982:2581},o=_0x5210,c=new Slope({positions:e.positions,splitNum:1,radius:e[o(3194)],count:e[o(t._0x5d3bb7)],has3dtiles:e.has3dtiles,point:{show:![]},arrow:{show:![]}});c.addTo(e.map),e.endItem&&c.on(EventType[o(2340)],e[o(t._0x3b29f6)]),c.on(EventType.end,_=>{const l=o;c[l(n._0xb68205)](),e.callback&&e[l(n._0x48d982)](_),i(_)})})}}class TerrainPlanClip extends BaseThing{get positions(){return this._positions}set[_0x5e32ae(2436)](e){const t=_0x5e32ae;this[t(1387)](),this._positions=e,this[t(3193)](e)}get[_0x5e32ae(2999)](){const e=_0x5e32ae;return this.options[e(2999)]}set[_0x5e32ae(2999)](e){const t={_0x2eb726:1061},i=_0x5e32ae;this.options.diffHeight=e,this._graphicLayer&&this._graphicLayer[i(t._0x2eb726)](s=>{s.diffHeight=e})}get clipOutSide(){return this.options.clipOutSide}set[_0x5e32ae(3929)](e){const t={_0x128b46:3798,_0x3d3244:3193},i=_0x5e32ae;this[i(t._0x128b46)].clipOutSide=e,this._map&&this._positions&&this[i(t._0x3d3244)](this._positions)}[_0x5e32ae(751)](e){const t={_0x373d17:3107,_0x3f6f5a:993},i=_0x5e32ae;this._map[i(t._0x373d17)].globe.clippingPlanes&&(this[i(1890)].scene.globe.clippingPlanes.enabled=e),this._graphicLayer&&(this[i(t._0x3f6f5a)].show=e)}_mountedHook(){}[_0x5e32ae(4158)](){const e={_0x5ccf5a:993,_0x1fc02d:993},t=_0x5e32ae;this[t(e._0x5ccf5a)]=new GraphicLayer({...this.options,private:!![]}),this._map[t(2965)](this[t(e._0x1fc02d)]),this.options.positions&&this.options.positions.length>0&&this.setPositions(this.options.positions)}_removedHook(){const e=_0x5e32ae;this.clear(),this._graphicLayer&&(this[e(1890)].removeLayer(this._graphicLayer),delete this[e(993)])}setPositions(e){const t={_0x26965c:3402,_0x5067d7:3916,_0x4c78b5:1531,_0x40d17f:3916,_0xeaa45a:3925,_0x4f6216:3029,_0x323d4b:2995,_0x1ec34f:993},i=_0x5e32ae;if(this.clear(),!e||e.length<3){logError$1("挖地坐标数据存在问题！",e);return}e=LngLatArray.toCartesians(e),this[i(3270)]=e;const s=[],n=e[i(t._0x26965c)];let o;const c=formatNum$1(getAngle(e[0],e[1]),2);if(c>-.02&&c<.02)o=![];else{const _=formatNum$1(getAngle(e[0],e[2]),2);o=c<_}this.clipOutSide&&(o=!o);for(let _=0;_<n;++_){const l=(_+1)%n,h=Cesium__namespace[i(t._0x5067d7)].midpoint(e[_],e[l],new Cesium__namespace[i(t._0x5067d7)]),f=Cesium__namespace.Cartesian3.normalize(h,new Cesium__namespace.Cartesian3);let m;o?m=Cesium__namespace[i(3916)].subtract(e[_],h,new Cesium__namespace[i(3916)]):m=Cesium__namespace.Cartesian3[i(t._0x4c78b5)](e[l],h,new Cesium__namespace.Cartesian3),m=Cesium__namespace[i(t._0x40d17f)].normalize(m,m);let g=Cesium__namespace.Cartesian3[i(t._0xeaa45a)](m,f,new Cesium__namespace.Cartesian3);g=Cesium__namespace[i(3916)][i(t._0x4f6216)](g,g);const C=new Cesium__namespace.Plane(g,0),E=Cesium__namespace.Plane.getPointDistance(C,h);s[i(3759)](new Cesium__namespace.ClippingPlane(g,E))}if(this._map.scene.globe[i(1472)]=new Cesium__namespace.ClippingPlaneCollection({planes:s,edgeWidth:this.options.edgeWidth??1,edgeColor:this.options.edgeColor??Cesium__namespace[i(2200)][i(t._0x323d4b)],unionClippingRegions:this.clipOutSide,enabled:!![]}),this.options.image){const _=new Pit({style:this.options,positions:e});this[i(t._0x1ec34f)].addGraphic(_)}}[_0x5e32ae(1387)](){const e={_0x5daffe:968,_0x533bca:1472,_0x43a515:968,_0x4182e6:1890},t=_0x5e32ae;var i,s;this._map&&(this._positions=null,this._graphicLayer&&this._graphicLayer[t(1387)](),(i=this._map[t(3107)].globe)!==null&&i!==void 0&&(s=i[t(1472)])!==null&&s!==void 0&&s[t(e._0x5daffe)]&&(this[t(1890)].scene.globe[t(e._0x533bca)][t(e._0x43a515)]=![]),this[t(e._0x4182e6)][t(3107)].globe[t(1472)]=void 0)}}var TerrainEditVS=_0x5e32ae(2993),TerrainEditFS=_0x5e32ae(4075);class TerrainOldEditBase extends BaseThing{constructor(e={}){const t=_0x5e32ae;super(e),!isMars3DCesium&&logError$1("该功能需要引入mars3d修改版Cesium库(mars3d-cesium库)才支持!",this),this.heightVal=e.heightVal??new Cesium__namespace[t(1720)](0,0,0,500),this._maxCanvasSize=e.maxCanvasSize??4096,this._areaList=[]}get analysisOptions(){const e=_0x5e32ae;var t,i,s,n,o,c;return(t=this._map)===null||t===void 0||(i=t[e(3107)])===null||i===void 0||(s=i.globe)===null||s===void 0||(n=s[e(3519)])===null||n===void 0||(o=n.tileProvider)===null||o===void 0||(c=o.marsOptions)===null||c===void 0?void 0:c[e(4275)]}get list(){return this._areaList}get showElseArea(){var e;return((e=this.analysisOptions)===null||e===void 0?void 0:e.showElseArea)??!![]}set showElseArea(e){this.analysisOptions.showElseArea=e}get positions(){const e=_0x5e32ae;return this.length>0?this._areaList[0][e(2436)]:null}set positions(e){this[_0x5e32ae(1387)](),this.addArea(e)}get length(){const e={_0xde4648:2589},t=_0x5e32ae;if(this._areaList){var i;return(i=this[t(e._0xde4648)])===null||i===void 0?void 0:i.length}else return 0}[_0x5e32ae(751)](e){const t=_0x5e32ae;this.analysisOptions[t(968)]=e}[_0x5e32ae(4158)](){const e={_0x347422:2843,_0x5694d6:2043,_0x480ef2:1890},t=_0x5e32ae;this[t(e._0x347422)][t(2015)]=this[t(3798)].showElseArea??!![],this.options.positions&&this.addArea(this.options.positions),this.options[t(e._0x5694d6)]&&(this._scopeIds_last=[],this[t(e._0x480ef2)].on(EventType.preUpdate,this._map_preUpdateHandler,this))}_removedHook(){const e={_0x4ad502:3798,_0x45f21b:2043,_0x404878:1890,_0x569e61:1387},t=_0x5e32ae;this[t(e._0x4ad502)][t(e._0x45f21b)]&&(this[t(e._0x404878)].off(EventType.preUpdate,this._map_preUpdateHandler,this),this._scopeIds_last=[]),this[t(e._0x569e61)](),this.analysisOptions.enabled=![],this.analysisOptions.inverMatrix=Cesium__namespace.Matrix4.IDENTITY,this.analysisOptions.polygonTexture=void 0}[_0x5e32ae(1387)](){this._areaList=[],this._clearDraw()}_clearDraw(){const e={_0x29cc17:2405,_0x263423:945},t=_0x5e32ae;this[t(2843)].inverMatrix=Cesium__namespace.Matrix4[t(e._0x29cc17)],this.analysisOptions.polygonTexture=void 0,this._polygonTexture&&(this[t(1347)].destroy(),delete this._polygonTexture),this._framebuffer&&(this[t(e._0x263423)].destroy(),delete this._framebuffer)}getAreaById(e){const t={_0x4df0b7:3402},i=_0x5e32ae;if(!isNumber(e))return e;for(let s=0;s<this[i(2589)][i(t._0x4df0b7)];s++){const n=this._areaList[s];if(n.id===e)return n}return null}[_0x5e32ae(3059)](e){const t={_0x40ee89:1056,_0x2bde81:782},i=_0x5e32ae,s=this[i(t._0x40ee89)](e);s&&(s.show=![],s[i(t._0x2bde81)]&&(s[i(t._0x2bde81)].show=![]),this._update())}showArea(e){const t={_0x1a3a13:575},i=_0x5e32ae,s=this.getAreaById(e);s&&(s[i(t._0x1a3a13)]=!![],s.pitPrimitive&&(s.pitPrimitive.show=!![]),this._update())}_removeAreaHook(e){}removeArea(e){const t={_0x3a25fe:1056},i=_0x5e32ae;isNumber(e)&&(e=this[i(t._0x3a25fe)](e)),e&&(this._removeAreaHook(e),removeArrayItem(this._areaList,e),this[i(4221)]())}[_0x5e32ae(2417)](e){}addArea(e,t){const i={_0x400020:3759},s=_0x5e32ae;if(!e||e[s(3402)]===0)return;const n={show:!![],scope:!![],id:getGlobalId(),positions_original:e,positions:LngLatArray.toCartesians(e,!![])};return this._areaList[s(i._0x400020)](n),logInfo("添加地形处理区域",LngLatArray[s(725)](e)),this._addAreaHook(n,t),this._update(),n}_update(){const e={_0x37f0c4:2500,_0x1d256d:2134,_0x2f5ee8:3916,_0x43ae0a:4102,_0x3d8be2:1194,_0x42dab2:1876,_0x480dd3:2399,_0x4e7582:1072,_0x50f446:1857},t={_0x3f3268:1177,_0x8f27e0:3426,_0x3b5b04:3275,_0xd97a10:945},i={_0x36d1bb:3402,_0x3f085a:3916,_0x3544b7:2891,_0x164e13:2407,_0x236eab:1539,_0x438f09:730},s={_0x5d4d8e:575},n=_0x5e32ae;this._clearDraw();const o=new Cesium__namespace.Cartesian3,c=[];this[n(2589)][n(e._0x37f0c4)](B=>{if(!B[n(s._0x5d4d8e)]||!B.scope||!B.positions)return;const H=Cesium__namespace.BoundingSphere.fromPoints(B.positions);Cesium__namespace.Cartesian3.add(o,H.center,o),c.push(B)});const _=this._map.scene.context;if(c.length===0)return;const l=Cesium__namespace.Cartesian3.multiplyByScalar(o,1/c.length,new Cesium__namespace.Cartesian3),h=Cesium__namespace[n(2911)].eastNorthUpToFixedFrame(l);this._inverMatrix=Cesium__namespace[n(4102)].inverse(h,new Cesium__namespace[n(4102)]);let f=99999999,m=99999999,g=-99999999,C=-99999999;c.forEach(B=>{const $=n;let H=new Cesium__namespace.PolygonGeometry({polygonHierarchy:new Cesium__namespace.PolygonHierarchy(B.positions)});H=Cesium__namespace.PolygonGeometry.createGeometry(H);const W=H.indices,J=H[$(693)].position.values,z=J[$(i._0x36d1bb)],fe=[],q=[];for(let he=0;he<z;he+=3){const Se=new Cesium__namespace.Cartesian3(J[he],J[he+1],J[he+2]),Te=Cesium__namespace.Matrix4.multiplyByPoint(this._inverMatrix,Se,new Cesium__namespace[$(i._0x3f085a)]);Te.z=0,fe.push(Te),q.push(Te.x),q[$(3759)](Te.y),q.push(Te.z),f>=Te.x&&(f=Te.x),m>=Te.y&&(m=Te.y),g<=Te.x&&(g=Te.x),C<=Te.y&&(C=Te.y)}B[$(i._0x3544b7)]=fe;const te=new Float64Array(q),ie=Cesium__namespace[$(i._0x164e13)].fromVertices(te),xe=new Cesium__namespace.Geometry({attributes:{position:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:te})},indices:W,primitiveType:Cesium__namespace[$(2684)].TRIANGLES,boundingSphere:ie}),oe=Cesium__namespace[$(4010)].fromCache({context:_,vertexShaderSource:TerrainEditVS,fragmentShaderSource:TerrainEditFS,attributeLocations:{position:0}}),de=Cesium__namespace.VertexArray.fromGeometry({context:_,geometry:xe,attributeLocations:oe._attributeLocations,bufferUsage:Cesium__namespace.BufferUsage[$(3003)],interleave:!![]}),X=new Cesium__namespace.RenderState;X[$(4228)].near=-1e6,X.depthRange.far=1e6,B.drawAreaCommand=new Cesium__namespace[$(i._0x236eab)]({boundingVolume:ie,primitiveType:Cesium__namespace[$(2684)][$(i._0x438f09)],vertexArray:de,shaderProgram:oe,renderState:X,pass:Cesium__namespace.Pass.TRANSLUCENT})});const E=(C-m)/(g-f),P=[f,m,g,C],w=12e4,M={viewMatrix:Cesium__namespace.Matrix4.IDENTITY,inverseViewMatrix:Cesium__namespace.Matrix4.IDENTITY,frustum:new Cesium__namespace[n(e._0x1d256d)],positionCartographic:{height:0,latitude:0,longitude:0},positionWC:new Cesium__namespace.Cartesian3(0,0,w/2),directionWC:new Cesium__namespace.Cartesian3(0,0,-1),upWC:new Cesium__namespace[n(e._0x2f5ee8)](0,1,0),rightWC:new Cesium__namespace.Cartesian3(1,0,0),viewProjectionMatrix:Cesium__namespace[n(e._0x43ae0a)].IDENTITY};M.frustum.left=P[0],M[n(2801)][n(e._0x3d8be2)]=P[3],M.frustum[n(2893)]=P[2],M.frustum.bottom=P[1],M.frustum[n(1392)]=.1,M.frustum[n(e._0x42dab2)]=-w,this[n(1563)]=new Cesium__namespace.Cartesian4(P[0],P[1],P[2]-P[0],P[3]-P[1]);let T,L;E>1?(T=this._maxCanvasSize/E,L=this[n(2255)]):(T=this._maxCanvasSize,L=T*E);const R=new Cesium__namespace.Texture({context:_,width:T,height:L,pixelFormat:Cesium__namespace[n(e._0x480dd3)][n(3993)],pixelDatatype:Cesium__namespace.PixelDatatype.HALF_FLOAT,flipY:![]});this._polygonTexture=R,this.analysisOptions.polygonTexture=this._polygonTexture,this._framebuffer=new Cesium__namespace.Framebuffer({context:_,colorTextures:[R],destroyAttachments:![]});const D=new Cesium__namespace.ClearCommand({color:new Cesium__namespace.Color(0,0,0,0),framebuffer:this[n(945)]}),N=new Cesium__namespace[n(e._0x4e7582)](_);N.viewport=new Cesium__namespace[n(e._0x50f446)](0,0,T,L);const k=_.uniformState;k.updateCamera(M),D.execute(_),c.forEach(B=>{const $=n,H=B[$(t._0x3f3268)];H&&(k.updatePass(H[$(t._0x8f27e0)]),H[$(t._0x3b5b04)]=this[$(t._0xd97a10)],H.execute(_,N))}),this._beginAnalysis()}_beginAnalysis(){const e={_0x2ecc62:1347,_0xaeae9e:3044},t=_0x5e32ae;this.analysisOptions.inverMatrix=this._inverMatrix,this[t(2843)].polygonTexture=this[t(e._0x2ecc62)],this.analysisOptions.enabled=!![],this.analysisOptions[t(e._0xaeae9e)]=this._tailorRect,this.analysisOptions.globe=![]}[_0x5e32ae(1364)](){const e={_0x47c5b2:1871},t=_0x5e32ae;if(!this[t(1890)]||!this[t(2589)]||this[t(2589)].length===0&&this[t(e._0x47c5b2)].length===0)return;const i=[];this._areaList.forEach(n=>{n.show&&(n.scope=this._isInSceneCamera(n.positions),n.scope&&i.push(n.id))});let s=i.length!==this[t(e._0x47c5b2)].length;if(!s){for(let n=0;n<i.length;n++)if(this[t(e._0x47c5b2)][n]!==i[n]){s=!![];break}}s&&(this._update(),this._scopeIds_last=Cesium__namespace.clone(i))}_isInSceneCamera(e){const t={_0x1c0ec9:1890,_0x3a060a:3764,_0x45384e:2376},i=_0x5e32ae;if(!e||e.length===0)return![];const s=this._map.scene,n=this[i(t._0x1c0ec9)][i(t._0x3a060a)](),o=s.camera[i(523)];for(let c=0;c<e.length;c++){const _=e[c],l=Cesium__namespace.SceneTransforms[i(3367)](s,_,new Cesium__namespace.Cartesian2);if(l&&l.x>=0&&l.x<=s.context[i(t._0x45384e)]&&l.y>=0&&l.y<=s[i(3521)].drawingBufferHeight)return!![];if(o&&o.x>=0&&Cesium__namespace.Cartesian3.distance(_,o)<2e5)return!![];if(n&&n.x>=0&&Cesium__namespace.Cartesian3.distance(_,n)<2e5)return!![]}return![]}}var GlobeFlodByMaterial=`uniform vec4 u_mars_flood_val;//（基础淹没高度，当前淹没高度，最大淹没高度,默认高度差(最大淹没高度 - 基础淹没高度)）
uniform vec4 u_mars_flood_color;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  material.alpha = (materialInput.height < u_mars_flood_val.y) ? u_mars_flood_color.a : 0.0;
  material.diffuse = u_mars_flood_color.rgb;
  return material;
}
`;const FloodByMaterialType="FlodByMaterial";class FloodByMaterial extends TerrainOldEditBase{constructor(e={}){const t={_0x17414d:3798},i=_0x5e32ae;super(e),this.color=this[i(t._0x17414d)].color??new Cesium__namespace.Color(.15,.7,.95,.5)}get height(){const e=_0x5e32ae;return this.heightVal.y??this[e(905)]}set height(e){const t={_0x5cebd7:2503},i=_0x5e32ae;this[i(t._0x5cebd7)].y=e,this[i(2843)][i(2503)].y=e}get speed(){const e={_0x3ce5f4:2613},t=_0x5e32ae;return this.options[t(e._0x3ce5f4)]||1}set speed(e){this.options.speed=Number(e)}get[_0x5e32ae(2092)](){return this._color}set color(e){this._color=getCesiumColor(e),this.analysisOptions&&(this.analysisOptions.color=this._color)}addArea(e,t){return e=setPositionsHeight(e,0),super.addArea(e,t)}setOptions(e){const t={_0x2aeeb0:2298,_0x54ba80:515,_0x189b66:960,_0x5a2aa0:2503,_0x13aac4:2503,_0x14336c:2015},i=_0x5e32ae;e&&(this.options={...this.options,...e}),this.stop();let s=this.options.minHeight,n=this.options[i(t._0x2aeeb0)];if(!Cesium__namespace[i(t._0x54ba80)](s)){logError$1("minHeight 请传入有效数值！",s);return}if(!Cesium__namespace.defined(n)){logError$1("maxHeight 请传入有效数值！",n);return}if(s>n){const o=s;s=n,n=o}return this._minHeight=s,this._maxHeight=n,this.heightVal=new Cesium__namespace.Cartesian4(this._minHeight,this[i(905)],this[i(t._0x189b66)],this._maxHeight-this._minHeight),this[i(2843)][i(2503)].x=this.heightVal.x,this.analysisOptions[i(t._0x5a2aa0)].y=this[i(t._0x13aac4)].y,this.analysisOptions[i(2092)]=this.color,this.analysisOptions.globe=![],this.analysisOptions[i(t._0x14336c)]=this.options.showElseArea??!![],this._map.scene.globe[i(1877)]=Cesium__namespace.Material.fromType(FloodByMaterialType),this}_enabledHook(e){const t={_0x3d1231:1329,_0x2ab329:3107},i=_0x5e32ae;var s;super._enabledHook(e),e?this._map[i(3107)][i(t._0x3d1231)].material=Cesium__namespace[i(1423)][i(791)](FloodByMaterialType):((s=this._map.scene.globe.material)===null||s===void 0?void 0:s.type)===FloodByMaterialType&&(this._map[i(t._0x2ab329)].globe.material=null)}[_0x5e32ae(2476)](){const e={_0x24d525:2236,_0x914152:1404},t=_0x5e32ae;this.stop(),this[t(e._0x24d525)]=!![],this[t(e._0x914152)](EventType.start),this._map.on(EventType.clockTick,this._onClockTickHandler,this)}[_0x5e32ae(3012)](e){const t={_0x297660:2503,_0xb37012:809},i=_0x5e32ae;if(this.heightVal.y+=this.speed/50,this[i(t._0x297660)].y>this.heightVal.z){this[i(2503)].y=this.heightVal.z,this.stop();return}if(this.heightVal.y<this.heightVal.x){this[i(2503)].y=this.heightVal.x,this.stop();return}this.analysisOptions[i(2503)].y=this.heightVal.y,this.fire(EventType[i(t._0xb37012)],{height:this.heightVal.y})}[_0x5e32ae(3874)](){const e={_0x5a878b:1890,_0x2a984c:1213},t=_0x5e32ae;this.isStart&&(this[t(e._0x5a878b)].off(EventType[t(e._0x2a984c)],this._onClockTickHandler,this),this.isStart=![],this.fire(EventType.end))}restart(){this.setOptions(),this.start()}clear(){const e={_0x298e0a:705},t=_0x5e32ae;var i;this.stop(),((i=this._map.scene.globe.material)===null||i===void 0?void 0:i.type)===FloodByMaterialType&&(this[t(1890)].scene[t(1329)].material=null),this._map.scene.globe[t(3519)].tileProvider.marsOptions[t(e._0x298e0a)](),super.clear()}}Cesium__namespace.Material.FloodByMaterialType=FloodByMaterialType,Cesium__namespace.Material[_0x5e32ae(2089)][_0x5e32ae(714)](FloodByMaterialType,{fabric:{type:FloodByMaterialType,source:GlobeFlodByMaterial},translucent:![]});class TerrainClip extends TerrainOldEditBase{constructor(e={}){const t={_0x3086cd:1760},i=_0x5e32ae;e.dynamicView=e[i(2043)]??!![],super(e),this[i(t._0x3086cd)]=e.clipOutSide??![]}get analysisOptions(){const e={_0x44b2e7:3962},t=_0x5e32ae;var i,s,n,o,c,_;return(i=this[t(1890)])===null||i===void 0||(s=i.scene)===null||s===void 0||(n=s.globe)===null||n===void 0||(o=n[t(3519)])===null||o===void 0||(c=o[t(e._0x44b2e7)])===null||c===void 0||(_=c.marsOptions)===null||_===void 0?void 0:_[t(1130)]}get clipOutSide(){var e;return(e=this.analysisOptions)===null||e===void 0?void 0:e.clipOutSide}set clipOutSide(e){const t=_0x5e32ae;this[t(2843)].clipOutSide=e}get diffHeight(){return this.options.diffHeight}set diffHeight(e){const t={_0x179eea:993},i=_0x5e32ae;this[i(3798)].diffHeight=e,this._graphicLayer&&this[i(t._0x179eea)][i(1061)](s=>{const n=i;s[n(2999)]=e})}_enabledHook(e){const t=_0x5e32ae;this.analysisOptions[t(968)]=e,this._graphicLayer&&(this._graphicLayer.show=e)}_addedHook(){const e={_0x2f04c0:1890,_0x35029a:2843},t=_0x5e32ae;!this._map.scene[t(1329)][t(2130)]&&(this[t(e._0x2f04c0)].scene.globe.depthTestAgainstTerrain=!![],this[t(2397)]=!![]),this[t(e._0x35029a)].enabled=!![],this._graphicLayer=new GraphicLayer({...this.options,private:!![]}),this._map[t(2965)](this._graphicLayer),super._addedHook()}[_0x5e32ae(2442)](){const e={_0x2dd63:1051},t=_0x5e32ae;this.clear(),this.analysisOptions.enabled=![],this.analysisOptions.inverMatrix=Cesium__namespace.Matrix4.IDENTITY,this.analysisOptions[t(e._0x2dd63)]=void 0,this._map[t(2642)](this._graphicLayer,!![]),delete this._graphicLayer,this[t(2397)]&&(this._map.scene.globe.depthTestAgainstTerrain=![],this._hasChangeDepthTestAgainstTerrain=![])}[_0x5e32ae(1387)](){const e={_0x2db3d8:3677},t=_0x5e32ae;this._map.scene.globe[t(3519)].tileProvider[t(e._0x2db3d8)].resetClipValue(),super.clear(),this._graphicLayer.clear()}_addAreaHook(e,t){const i={_0x4a842a:782,_0x146bdf:3798},s=_0x5e32ae;this.options.image&&(e[s(i._0x4a842a)]=new Pit({style:{...this[s(i._0x146bdf)],...t},positions:e.positions_original}),this._graphicLayer.addGraphic(e[s(782)]))}[_0x5e32ae(660)](e){const t={_0x308d0e:782},i=_0x5e32ae;e!=null&&e.pitPrimitive&&(this._graphicLayer.removeGraphic(e[i(t._0x308d0e)],!![]),delete e[i(t._0x308d0e)])}_beginAnalysis(){const e={_0x29ef69:2843,_0x1106ad:1347},t=_0x5e32ae;this[t(e._0x29ef69)].enabled=!![],this.analysisOptions.inverMatrix=this[t(1751)],this[t(2843)][t(1051)]=this[t(e._0x1106ad)],this.analysisOptions.tailorRect=this._tailorRect}}class ContourLine extends TerrainOldEditBase{constructor(e={}){const t={_0x4d01e0:3599,_0x4464b5:2092,_0x3892c6:1039,_0x3a65e8:2984,_0x894f8b:2156,_0x5b8e2c:2616,_0x2e822e:4111},i=_0x5e32ae;super(e),this._contourShow=e.contourShow??!![],this[i(t._0x4d01e0)]=e[i(1499)]??100,this._contourWidth=e.width??1.5,this._contourColor=getCesiumColor(e[i(t._0x4464b5)],Cesium__namespace.Color[i(t._0x3892c6)]),this._shadingType=e.shadingType??"none",this._shadingAlpha=e[i(1016)]??.6,this.colorScheme=e.colorScheme||{elevation:{step:[0,.045,.1,.15,.37,.54,1],color:["#000000",i(t._0x3a65e8),"#D33B7D",i(t._0x894f8b),"#FF9742","#FF9742",i(2616)]},slope:{step:[0,.29,.5,Math.sqrt(2)/2,.87,.91,1],color:[i(973),"#2747E0","#D33B7D","#D33038","#FF9742","#FF9742",i(t._0x5b8e2c)]},aspect:{step:[0,.2,.4,.6,.8,.9,1],color:["#000000","#2747E0",i(2428),"#D33038",i(655),"#FF9742","#ffd700"]}},this.minHeight=e[i(t._0x2e822e)]??-414,this.maxHeight=e.maxHeight??8777}get[_0x5e32ae(1165)](){return this._contourShow}set contourShow(e){this._contourShow=e,this.updateMaterial()}get shadingType(){return this._shadingType}set shadingType(e){this._shadingType=e,this.updateMaterial()}get shadingAlpha(){return this._shadingAlpha}set shadingAlpha(e){const t={_0x24dee5:1306},i=_0x5e32ae;this._shadingAlpha=e,this[i(t._0x24dee5)]()}get[_0x5e32ae(4005)](){return this._contourWidth}set width(e){const t={_0x2388a8:4005},i=_0x5e32ae;this._contourWidth=e,this.contourUniforms&&(this.contourUniforms[i(t._0x2388a8)]=e)}get[_0x5e32ae(1499)](){return this[_0x5e32ae(3599)]}set[_0x5e32ae(1499)](e){const t=_0x5e32ae;this._contourSpacing=e,this.contourUniforms&&(this[t(3027)].spacing=e)}get color(){return this._contourColor}set color(e){const t={_0x20fb90:3027},i=_0x5e32ae;this[i(849)]=getCesiumColor(e),this.contourUniforms&&(this[i(t._0x20fb90)][i(2092)]=e)}_enabledHook(e){const t={_0x1f0d53:1306},i=_0x5e32ae;super[i(751)](e),this[i(t._0x1f0d53)]()}[_0x5e32ae(1387)](){const e={_0x3ffd57:1057,_0x41751c:1890,_0x1df66d:1057,_0x3d27f3:3027,_0x490be7:3962,_0x3bea2f:3677,_0x13834e:837},t=_0x5e32ae;super.clear(),this[t(e._0x3ffd57)]&&(this[t(e._0x41751c)].scene.globe.material=this[t(e._0x1df66d)],delete this._last_material),this[t(e._0x3d27f3)]=null,this[t(1890)].scene.globe._surface[t(e._0x490be7)][t(e._0x3bea2f)].resetFloodValue(),this._hasResetEnableLighting&&(this._map.scene.globe.enableLighting=![],this._map.clock[t(e._0x13834e)]=Cesium__namespace.JulianDate.now(),delete this._hasResetEnableLighting)}[_0x5e32ae(2417)](){const e={_0x49c23b:1720},t=_0x5e32ae;this.heightVal=new Cesium__namespace[t(e._0x49c23b)](this.minHeight,this.minHeight,this.maxHeight,this[t(2298)]-this.minHeight),this.updateMaterial()}updateMaterial(){const e={_0x6e268a:656,_0x14b2d3:453,_0x247a98:4111,_0x2e48e7:2720,_0x61a81a:1241,_0x188d8d:3031,_0x123214:2221,_0x1c9c55:1914,_0x2e1bc4:791,_0x2d80bb:1428,_0x427cfe:3599,_0x294053:2125,_0x18d787:1889,_0x1c61c7:1423,_0x3f305f:3901,_0x4560a3:1890,_0x5b5710:1949,_0xbdc57e:837,_0x5d67c0:527,_0x128fe8:3107,_0x2e260f:1329},t=_0x5e32ae;let i,s,n;const o=this[t(e._0x6e268a)];if(this[t(1165)]?(o==="elevation"?(i=this[t(e._0x14b2d3)](),n=i.materials.elevationRampMaterial.uniforms,n.minimumHeight=this[t(e._0x247a98)],n.maximumHeight=this.maxHeight,s=i.materials[t(1943)].uniforms):o===t(e._0x2e48e7)?(i=this.getSlopeContourMaterial(),n=i.materials[t(e._0x61a81a)].uniforms,s=i[t(e._0x188d8d)].contourMaterial[t(e._0x123214)]):o===t(2706)?(i=this[t(e._0x1c9c55)](),n=i.materials.aspectRampMaterial.uniforms,s=i[t(3031)].contourMaterial[t(2221)]):(i=Cesium__namespace.Material[t(e._0x2e1bc4)]("ElevationContour"),s=i.uniforms),s.width=this[t(e._0x2d80bb)],s.spacing=this[t(e._0x427cfe)],s.color=this._contourColor):o==="elevation"?(i=Cesium__namespace.Material.fromType(t(e._0x294053)),n=i.uniforms,n[t(e._0x18d787)]=this.minHeight,n.maximumHeight=this[t(2298)]):o==="slope"?(i=Cesium__namespace[t(e._0x1c61c7)].fromType("SlopeRamp"),n=i.uniforms):o==="aspect"&&(i=Cesium__namespace.Material[t(791)](t(e._0x3f305f)),n=i.uniforms),o!=="none"&&(n[t(513)]=this.getColorRamp(o)),o==="slope"||o==="aspect"){if(!this[t(1890)].scene.globe.enableLighting){this[t(e._0x4560a3)][t(3107)].globe.enableLighting=!![];const c=new Date;c.setHours(10),this[t(1890)][t(e._0x5b5710)][t(e._0xbdc57e)]=Cesium__namespace[t(e._0x5d67c0)].fromDate(new Date(c)),this[t(1925)]=!![]}}else this._hasResetEnableLighting&&(this._map[t(e._0x128fe8)].globe[t(3983)]=![],this[t(e._0x4560a3)][t(1949)][t(837)]=Cesium__namespace[t(527)][t(1228)](),delete this._hasResetEnableLighting);this.contourUniforms=s,(!this._last_material||this[t(e._0x4560a3)].scene.globe.material)&&(this._last_material=this._map[t(3107)].globe.material),this[t(e._0x4560a3)].scene[t(e._0x2e260f)][t(1877)]=i}[_0x5e32ae(2377)](e){const t={_0x3ee554:3252,_0x578698:3006,_0xfb5ef4:3402,_0x35cf49:2075},i=_0x5e32ae;var s;const n=document.createElement("canvas");n.width=100,n.height=1;const o=n[i(1494)]("2d",{willReadFrequently:!![]});o[i(t._0x3ee554)]=this.shadingAlpha;const c=o[i(t._0x578698)](0,0,100,0),_=this.colorScheme[e];if((_==null||(s=_.step)===null||s===void 0?void 0:s.length)>0)for(let l=0,h=_.step[i(t._0xfb5ef4)];l<h;l++)c[i(t._0x35cf49)](_.step[l],_.color[l]);return o.fillStyle=c,o[i(820)](0,0,100,1),n}getElevationContourMaterial(){const e={_0xdcc96a:1423,_0x146177:2125},t=_0x5e32ae;return new Cesium__namespace[t(e._0xdcc96a)]({fabric:{type:"ElevationColorContour",materials:{contourMaterial:{type:"ElevationContour"},elevationRampMaterial:{type:t(e._0x146177)}},components:{diffuse:t(937),alpha:"max(contourMaterial.alpha, elevationRampMaterial.alpha)"}},translucent:![]})}getSlopeContourMaterial(){const e={_0x595a7d:429},t=_0x5e32ae;return new Cesium__namespace[t(1423)]({fabric:{type:"SlopeColorContour",materials:{contourMaterial:{type:"ElevationContour"},slopeRampMaterial:{type:t(468)}},components:{diffuse:"contourMaterial.alpha == 0.0 ? slopeRampMaterial.diffuse : contourMaterial.diffuse",alpha:t(e._0x595a7d)}},translucent:![]})}[_0x5e32ae(1914)](){const e={_0x79a310:4157,_0xb0bfe1:3380,_0xcc77bb:3901},t=_0x5e32ae;return new Cesium__namespace.Material({fabric:{type:t(e._0x79a310),materials:{contourMaterial:{type:t(e._0xb0bfe1)},aspectRampMaterial:{type:t(e._0xcc77bb)}},components:{diffuse:t(1568),alpha:"max(contourMaterial.alpha, aspectRampMaterial.alpha)"}},translucent:![]})}}class TerrainEditBase extends BaseThing{constructor(e={}){const t={_0x5e6367:2493},i=_0x5e32ae;super(e),!isMars3DCesium&&logError$1(i(t._0x5e6367),this),this[i(2589)]=[]}get list(){return this._areaList}get length(){const e={_0x5535e2:3402},t=_0x5e32ae;if(this._areaList){var i;return(i=this[t(2589)])===null||i===void 0?void 0:i[t(e._0x5535e2)]}else return 0}_enabledHook(e){this.analysisOptions.enabled=e}_addedHook(){const e=_0x5e32ae;this.options[e(1451)]&&this.options[e(1451)].forEach(t=>{this.addArea(t.positions,t)})}_removedHook(){this.analysisOptions.enabled=![]}clear(){this._areaList=[]}getAreaById(e){if(!isNumber(e))return e;for(let t=0;t<this._areaList.length;t++){const i=this._areaList[t];if(i.id===e)return i}return null}hideArea(e){const t=_0x5e32ae,i=this.getAreaById(e);i&&(i.show=![],i.downGraphic&&(i.downGraphic.show=![]),i.upGraphic&&(i.upGraphic[t(575)]=![]),this._update())}showArea(e){const t=_0x5e32ae,i=this.getAreaById(e);i&&(i.show=!![],i.downGraphic&&(i[t(4023)][t(575)]=!![]),i[t(1763)]&&(i.upGraphic.show=!![]),this._update())}_removeAreaHook(e){}removeArea(e){const t={_0x451431:4221},i=_0x5e32ae;isNumber(e)&&(e=this.getAreaById(e)),e&&(this._removeAreaHook(e),removeArrayItem(this._areaList,e),this[i(t._0x451431)]())}_addAreaHook(e){}[_0x5e32ae(2717)](e,t){const i={_0x3a3d1e:3402},s=_0x5e32ae;if(!e||e[s(i._0x3a3d1e)]===0)return;const n={show:!![],id:getGlobalId(),...t,positions:LngLatArray.toCartesians(e)};return this._areaList[s(3759)](n),this[s(2417)](n,t),this[s(4221)](),n}_update(){}}class TerrainFlat extends TerrainEditBase{get[_0x5e32ae(2843)](){const e={_0x4642c9:3107,_0x44e26a:1559},t=_0x5e32ae;var i,s,n,o,c,_;return(i=this._map)===null||i===void 0||(s=i[t(e._0x4642c9)])===null||s===void 0||(n=s.globe)===null||n===void 0||(o=n._surface)===null||o===void 0||(c=o.tileProvider)===null||c===void 0||(_=c.marsOptions)===null||_===void 0?void 0:_[t(e._0x44e26a)]}_enabledHook(e){const t={_0x5586e0:968},i=_0x5e32ae;this[i(2843)][i(t._0x5586e0)]=e}[_0x5e32ae(4158)](){const e={_0x171c47:2843},t=_0x5e32ae;super._addedHook(),this[t(e._0x171c47)][t(968)]=this.enabled}_removedHook(){this[_0x5e32ae({_0x14e4e8:1387}._0x14e4e8)](),this.analysisOptions.enabled=![]}clear(){const e={_0x2afb42:3519,_0x39b9b0:3677},t=_0x5e32ae;this._map.scene.globe[t(e._0x2afb42)].tileProvider[t(e._0x39b9b0)].resetFlatValue(),this[t(2843)].enabled=this.enabled,super.clear()}_update(){const e={_0x3ebbe5:2589},t={_0x55da75:2436,_0xb62119:4290,_0x460bd4:3865,_0x1f82cc:3759},i=_0x5e32ae,s=this.analysisOptions;if(this[i(e._0x3ebbe5)][i(3402)]>0){const n=this._map.scene.globe[i(3875)],o=[],c=[],_=[];this._areaList[i(2500)](l=>{const h=i;if(!l.show||!l[h(t._0x55da75)])return;const f=n[h(t._0xb62119)](l.positions);let m=f[0][h(t._0x460bd4)];f[h(2500)](g=>{m=Math.min(m,g.height)}),o.push(m-(l.height||0)),c[h(t._0x1f82cc)](f),_.push(Cesium__namespace.Rectangle[h(899)](f))}),s.heights=o,s.rectangles=_,s.areas=c}else s.heights=void 0,s.rectangles=void 0,s.areas=void 0;s.hasUpdate=!![]}}class TerrainUplift extends TerrainEditBase{get[_0x5e32ae(2843)](){const e=_0x5e32ae;var t,i,s,n,o,c;return(t=this[e(1890)])===null||t===void 0||(i=t.scene)===null||i===void 0||(s=i[e(1329)])===null||s===void 0||(n=s._surface)===null||n===void 0||(o=n.tileProvider)===null||o===void 0||(c=o.marsOptions)===null||c===void 0?void 0:c.uplift}get showUp(){const e={_0x4c6146:2187},t=_0x5e32ae;var i;return(i=this.analysisOptions)===null||i===void 0?void 0:i[t(e._0x4c6146)]}set showUp(e){this.analysisOptions.showUp=e}get upHeight(){return this.options.upHeight??0}set upHeight(e){const t={_0x3e198f:3798,_0x3c344f:3402},i=_0x5e32ae;if(this[i(t._0x3e198f)].upHeight=e,this._areaList[i(t._0x3c344f)]>0){this[i(2843)].height=e,this.analysisOptions.hasUpdate=!![];for(let s=0;s<this._areaList.length;s++){const n=this._areaList[s];n.upGraphic&&n.upGraphic.setUpHeight(e)}}}[_0x5e32ae(751)](e){const t={_0x4e0b59:993},i=_0x5e32ae;this.analysisOptions.enabled=e,this._graphicLayer&&(this[i(t._0x4e0b59)].show=e)}_addedHook(){const e={_0x24027b:1890,_0x2f67a6:993,_0x1ae4a9:2843,_0x1ec0ad:968},t=_0x5e32ae;this._map.scene.globe.terrainExaggeration===1&&(this._map.scene.globe.terrainExaggeration=1.001),!this._map[t(3107)].globe.depthTestAgainstTerrain&&(this[t(e._0x24027b)].scene.globe[t(2130)]=!![],this._hasChangeDepthTestAgainstTerrain=!![]),this._graphicLayer=new GraphicLayer({...this.options,private:!![]}),this[t(e._0x24027b)].addLayer(this[t(e._0x2f67a6)]),super._addedHook(),this[t(e._0x1ae4a9)].enabled=this[t(e._0x1ec0ad)]}[_0x5e32ae(2442)](){const e={_0x46f18a:1329},t=_0x5e32ae;this.clear(),this.analysisOptions.enabled=![],this._map.removeLayer(this._graphicLayer,!![]),delete this._graphicLayer,this._hasChangeDepthTestAgainstTerrain&&(this._map.scene[t(e._0x46f18a)][t(2130)]=![],this._hasChangeDepthTestAgainstTerrain=![])}[_0x5e32ae(1387)](){this._map.scene.globe._surface.tileProvider.marsOptions.resetUpliftValue(),this.analysisOptions.enabled=this.enabled,super.clear(),this._graphicLayer.clear()}_addAreaHook(e,t){const i={_0x3d7846:549},s=_0x5e32ae;t={...this.options,...t},t.image&&t.diffHeight&&computeSurfaceLine({map:this._map,positions:e[s(2436)].concat(e.positions[0]),has3dtiles:![],splitNum:t.splitNum??30})[s(i._0x3d7846)](n=>{const o=s;e.positionsNew=n[o(2436)],this._addPitGraphic(e,t)})}_addPitGraphic(e,t){const i={_0x4320bd:1193,_0x1caa06:4111,_0x3c2ca9:2436,_0x6d583c:4023,_0x2cfebe:4223},s=_0x5e32ae,n=e.positionsNew,o=[];let c=Number.MAX_VALUE;for(let f=0,m=n.length;f<m;f++){const g=Cesium__namespace[s(3026)].fromCartesian(n[f]);c=Math[s(i._0x4320bd)](c,g[s(3865)]),o.push(g[s(3865)])}const _=c-t.diffHeight,l=Array(n[s(3402)])[s(4198)](_);e[s(i._0x1caa06)]=c,e[s(2999)]=t.diffHeight,e.downGraphic=new PitEntity({style:t,data:{height:_,minHeight:c,positionsWall:n,minimumHeights:l,maximumHeights:o},positions:e[s(i._0x3c2ca9)]}),this._graphicLayer.addGraphic(e[s(i._0x6d583c)]);const h=this.upHeight;this.showUp&&h!==0&&(e.upGraphic=new PitEntity({style:t,data:{height:_,minHeight:c,positionsWall:n,minimumHeights:l,maximumHeights:o},positions:e.positions}),this[s(993)][s(i._0x2cfebe)](e.upGraphic),e.upGraphic.setUpHeight(h))}_removeAreaHook(e){const t={_0x2acbed:4023,_0x24e7f8:875},i=_0x5e32ae;e!=null&&e.downGraphic&&(this._graphicLayer.removeGraphic(e.downGraphic,!![]),delete e[i(t._0x2acbed)]),e!=null&&e.upGraphic&&(this._graphicLayer[i(t._0x24e7f8)](e.upGraphic,!![]),delete e.upGraphic)}_update(){const e={_0x3b4d68:3402},t={_0x2c4fb5:899},i=_0x5e32ae,s=this.analysisOptions;if(this[i(2589)][i(e._0x3b4d68)]>0){const n=this[i(1890)].scene.globe[i(3875)],o=[],c=[];this._areaList.forEach(_=>{const l=i;if(!_.show||!_.positions)return;const h=n.cartesianArrayToCartographicArray(_.positions);o.push(h),c.push(Cesium__namespace.Rectangle[l(t._0x2c4fb5)](h))}),s[i(3865)]=this.upHeight,s[i(1764)]=c,s.areas=o}else s[i(3865)]=void 0,s.rectangles=void 0,s.areas=void 0;s[i(2840)]=!![]}}class LimitHeight extends BaseThing{get layer(){return this._layer}get[_0x5e32ae(2436)](){return this.options.positions}set[_0x5e32ae(2436)](e){const t={_0x48d0fc:2785},i=_0x5e32ae;this.options.positions=e,this[i(t._0x48d0fc)]()}get height(){return this.options.height||0}set[_0x5e32ae(3865)](e){this.options.height=e,this._createGraphic()}get bottomHeight(){const e=_0x5e32ae;return this.options[e(4083)]||0}set[_0x5e32ae(4083)](e){const t=_0x5e32ae;this[t(3798)].bottomHeight=e,this._createGraphic()}[_0x5e32ae(3118)](){this._layer=new GraphicLayer({private:!![]})}[_0x5e32ae(4158)](){const e={_0x373868:2436,_0x160edf:2436},t=_0x5e32ae;this._map.addLayer(this._layer),this.options.positions&&(this[t(e._0x373868)]=this.options[t(e._0x160edf)])}_removedHook(){const e={_0x37c9e7:2642},t=_0x5e32ae;this._graphic&&(this._layer.removeGraphic(this._graphic),delete this._graphic),this._map[t(e._0x37c9e7)](this._layer)}[_0x5e32ae(2785)](){const e={_0x105071:3284,_0x168ad7:3284},t=_0x5e32ae;if(this[t(3284)]&&(this._layer[t(875)](this._graphic),delete this._graphic),!this.options.positions)return;const i=LngLatArray.toCartesians(this.options.positions);this[t(e._0x105071)]=new PolygonPrimitive({positions:i,style:{...this.options,height:this.bottomHeight+this.height,diffHeight:1e4,perPositionHeight:![],classification:!![],classificationType:Cesium__namespace.ClassificationType.CESIUM_3D_TILE},asynchronous:![]}),this._layer.addGraphic(this[t(e._0x168ad7)])}clear(){this.options.positions=null,this._graphic&&(this._layer.removeGraphic(this._graphic),delete this._graphic)}}class ModelPlanClip extends TilesetPlanClip{get[_0x5e32ae(3517)](){return this._model}set clipTarget(e){const t={_0x4e8c39:2455},i=_0x5e32ae;this[i(t._0x4e8c39)]=e,this._inverseMatrix=null,this.clippingPlanes&&(this._model.clippingPlanes=this.clippingPlanes)}get graphic(){return this._graphic}set[_0x5e32ae(2118)](e){const t={_0x3676c8:2455,_0x2d2b7e:2180,_0x180461:3150,_0x372131:2294},i=_0x5e32ae;if(e.readyPromise){e[i(2355)][i(549)](s=>{this._model=e.primitive,this._modelMatrix=e.modelMatrix});return}this[i(3284)]=e,e[i(699)]?(this[i(t._0x3676c8)]=e.entity.model,this._modelMatrix=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(getPositionValue(e[i(t._0x2d2b7e)]))):e instanceof Cesium__namespace.Entity?(this._model=e.model,this._modelMatrix=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(getPositionValue(e.position))):e.primitive?(this._model=e[i(t._0x180461)],this[i(1420)]=e.modelMatrix):e instanceof Cesium__namespace.Model&&(this._model=e,this._modelMatrix=e[i(t._0x372131)])}get[_0x5e32ae(1975)](){const e={_0x59d117:1182,_0x4140ed:4102,_0x317739:1420},t=_0x5e32ae;return!this[t(e._0x59d117)]&&this._modelMatrix&&(this._inverseMatrix=Cesium__namespace[t(e._0x4140ed)].inverseTransformation(this[t(e._0x317739)],new Cesium__namespace.Matrix4)),this[t(1182)]}_mountedHook(){const e=_0x5e32ae;this.options.graphic&&(this.graphic=this[e(3798)][e(2118)])}}ModelPlanClip[_0x5e32ae(667)]=ClipType;class TilesetBoxClip extends BaseThing{get[_0x5e32ae(3517)](){return this._tileset}set clipTarget(e){const t={_0x35b9da:1182,_0x5e68aa:2180},i=_0x5e32ae;this._tileset=e,this[i(t._0x35b9da)]=null,Cesium__namespace.defined(this.options[i(t._0x5e68aa)])&&(this[i(t._0x5e68aa)]=this.options.position)}get layer(){return this[_0x5e32ae({_0x4ca491:2873}._0x4ca491)]}set[_0x5e32ae(1538)](e){this._layer=e,e.loadOk?this.clipTarget=e.tileset:e.on(EventType.load,t=>{const i=_0x5210;this.clipTarget=e[i(2834)]})}get planes(){return this.clippingPlanes}get inverseMatrix(){const e={_0x4185f8:1182,_0x4ba822:4102},t=_0x5e32ae;if(!this[t(e._0x4185f8)]){let i;const s=this._tileset.root.transform;s&&s[t(2661)](Cesium__namespace[t(4102)][t(2405)])||!s?i=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(this._tileset.boundingSphere.center):i=Cesium__namespace[t(e._0x4ba822)].fromArray(this._tileset.root[t(683)]),this._inverseMatrix=Cesium__namespace.Matrix4[t(4253)](i,new Cesium__namespace.Matrix4)}return this._inverseMatrix}get center(){const e={_0x573a2d:1419},t=_0x5e32ae;return this._layer?this._layer.position:this._tileset[t(e._0x573a2d)].center}get[_0x5e32ae(2180)](){return this._position}set position(e){const t=_0x5e32ae;this._position=LngLatPoint.toCartesian(e),this[t(4034)]()}get dimensions(){return this[_0x5e32ae({_0x35915a:3798}._0x35915a)].dimensions}set dimensions(e){this.options.dimensions=e,this.redraw()}get showBox(){return this.options.showBox}set showBox(e){const t={_0x25a7a1:575,_0x32cf8a:4034},i=_0x5e32ae;this[i(3798)].showBox=e,this.options.showBox?(!this._graphicLayer&&(this[i(993)]=new GraphicLayer({...this.options,private:!![]})),this._graphicLayer[i(t._0x25a7a1)]=!![]):this._graphicLayer&&(this._graphicLayer[i(575)]=![]),this[i(t._0x32cf8a)]()}_mountedHook(){const e={_0x181144:3517},t=_0x5e32ae;this.options.showBox&&(this._graphicLayer=new GraphicLayer({...this[t(3798)],private:!![]})),this.options.layer?this.layer=this.options.layer:this.options.tileset&&(this[t(e._0x181144)]=this.options[t(2834)])}_addedHook(){const e={_0x152df4:515,_0x54748f:2180},t=_0x5e32ae;this._graphicLayer&&this._map.addLayer(this[t(993)]),this.clipTarget&&Cesium__namespace[t(e._0x152df4)](this.options[t(e._0x54748f)])&&(this.position=this.options.position)}_removedHook(){const e={_0x39c35b:1387,_0x32324e:993},t=_0x5e32ae;this[t(e._0x39c35b)](),this._graphicLayer&&this._map[t(2642)](this[t(e._0x32324e)])}redraw(){const e={_0x312a99:1975,_0xfcef0a:3916,_0x3bf420:1049,_0x4f0a87:2459,_0x4d9af1:3517,_0x45d94d:993},t=_0x5e32ae;if(!this.position||!this.dimensions)return;const i=this.dimensions.x/2,s=this[t(2535)].y/2,n=this.dimensions.z/2,o=this[t(e._0x312a99)],c=Cesium__namespace.Matrix4.multiplyByPoint(o,this.center,new Cesium__namespace.Cartesian3),_=Cesium__namespace.Matrix4.multiplyByPoint(o,this.position,new Cesium__namespace.Cartesian3),l=c.x-_.x,h=c.y-_.y,f=c.z-_.z,m=[new Cesium__namespace.ClippingPlane(new Cesium__namespace.Cartesian3(0,0,1),-n+f),new Cesium__namespace.ClippingPlane(new Cesium__namespace[t(e._0xfcef0a)](0,0,-1),-n-f),new Cesium__namespace[t(1049)](new Cesium__namespace.Cartesian3(1,0,0),-i+l),new Cesium__namespace[t(e._0x3bf420)](new Cesium__namespace.Cartesian3(-1,0,0),-i-l),new Cesium__namespace.ClippingPlane(new Cesium__namespace.Cartesian3(0,1,0),-s+h),new Cesium__namespace.ClippingPlane(new Cesium__namespace.Cartesian3(0,-1,0),-s-h)],g=new Cesium__namespace.ClippingPlaneCollection({planes:m,edgeWidth:this.options[t(1272)]??0,edgeColor:this.options[t(e._0x4f0a87)]??Cesium__namespace.Color[t(2995)],unionClippingRegions:this[t(3798)].clipOutSide??![]});if(this.clippingPlanes=g,this[t(e._0x4d9af1)]&&(this.clipTarget[t(1472)]=g),this.options.showBox){this[t(e._0x45d94d)].clear();const C=new BoxEntity({position:this.position,style:{dimensions:this.options.dimensions,color:Cesium__namespace.Color.WHITE.withAlpha(.2),...this.options.boxStyle||{}}});this._graphicLayer.addGraphic(C)}}[_0x5e32ae(1387)](){const e={_0x513f36:1387,_0x2efb79:968},t=_0x5e32ae;var i,s;this._graphicLayer&&this._graphicLayer[t(e._0x513f36)](),this.clippingPlanes&&delete this.clippingPlanes,(i=this[t(3517)])!==null&&i!==void 0&&(s=i.clippingPlanes)!==null&&s!==void 0&&s[t(e._0x2efb79)]&&(this.clipTarget.clippingPlanes.enabled=![]),this.clipTarget.clippingPlanes=void 0}}const scratchCurrentDirection=new Cesium__namespace[_0x5e32ae(3916)],scratchDeltaPosition=new Cesium__namespace.Cartesian3,scratchNextPosition=new Cesium__namespace.Cartesian3,scratchTerrainConsideredNextPosition=new Cesium__namespace[_0x5e32ae(3916)],scratchNextCartographic=new Cesium__namespace.Cartographic,RoamType={DIRECTION_NONE:0,DIRECTION_FORWARD:1,DIRECTION_BACKWARD:2,DIRECTION_LEFT:3,DIRECTION_RIGHT:4};class FirstPersonRoam extends BaseThing{constructor(e={}){const t={_0x27c1ab:982,_0x5d1e76:3629},i=_0x5e32ae;super(e),this.speed=this.options.speed??1.5,this.rotateSpeed=this.options[i(t._0x27c1ab)]??-5,this.height=this.options[i(3865)]??10,this[i(t._0x5d1e76)]=this.options.maxPitch??88}_enabledHook(e){e?this[_0x5e32ae({_0x82fe2a:3138}._0x82fe2a)]():this.disable()}[_0x5e32ae(3118)](){}[_0x5e32ae(4158)](){const e={_0x32eaeb:3756,_0xf673aa:1213},t=_0x5e32ae;this.enabled&&this.activate(),this[t(1890)].on(EventType.leftDown,this[t(e._0x32eaeb)],this),this._map.on(EventType.leftUp,this._onLeftUpHandler,this),this._map.on(EventType.mouseMove,this._onMouseMoveHandler,this),this[t(1890)].on(EventType.dblClick,this._onDbClickHandler,this),this._map.on(EventType.keydown,this._onKeyDown,this),this[t(1890)].on(EventType.keyup,this._onKeyUp,this),this._map.on(EventType[t(e._0xf673aa)],this._onClockTick,this)}[_0x5e32ae(2442)](){const e={_0x51acc9:1890,_0x1f0697:1220,_0x5f4fce:1890,_0x44237d:4055,_0x2f4be6:524,_0x2569bf:4082,_0x3fcfcd:1890,_0x400ebf:1220},t=_0x5e32ae;this.disable(),this[t(e._0x51acc9)][t(e._0x1f0697)](EventType.leftDown,this._onLeftDownHandler,this),this._map.off(EventType[t(1285)],this._onLeftUpHandler,this),this[t(e._0x5f4fce)].off(EventType[t(e._0x44237d)],this[t(e._0x2f4be6)],this),this._map.off(EventType[t(2321)],this[t(e._0x2569bf)],this),this[t(e._0x3fcfcd)][t(e._0x400ebf)](EventType.keydown,this._onKeyDown,this),this[t(e._0x51acc9)].off(EventType.keyup,this._onKeyUp,this),this[t(1890)][t(e._0x400ebf)](EventType.clockTick,this[t(1768)],this)}[_0x5e32ae(3756)](e){const t={_0x3af16c:2946},i=_0x5e32ae;this[i(968)]&&(this._looking=!![],this[i(t._0x3af16c)]=Cesium__namespace.Cartesian3.clone(e.position),this._mousePosition=this._startMousePosition)}[_0x5e32ae(4082)](e){this.enabled&&(this._looking=!![],this._startMousePosition=Cesium__namespace.Cartesian3.clone(e.position),this._mousePosition=this._startMousePosition)}_onLeftUpHandler(e){this._looking=![]}_onMouseMoveHandler(e){const t=_0x5e32ae;this._mousePosition=e[t(1274)]}[_0x5e32ae(3412)](e){const t={_0x39cb10:1396,_0x568dcf:756},i=_0x5e32ae;if(!this.enabled)return;const s=e[i(t._0x39cb10)];switch(this._direction=RoamType[i(2689)],s){case"W".charCodeAt(0):this[i(1612)]=RoamType.DIRECTION_FORWARD;break;case"S"[i(1799)](0):this._direction=RoamType.DIRECTION_BACKWARD;break;case"D"[i(1799)](0):this._direction=RoamType.DIRECTION_RIGHT;break;case"A"[i(1799)](0):this[i(1612)]=RoamType[i(t._0x568dcf)];break}}[_0x5e32ae(1209)](){const e=_0x5e32ae;this.enabled&&(this._direction=RoamType[e(2689)])}_onClockTick(e){const t={_0x587d9a:1325,_0x520c07:3916,_0x39487b:1612,_0x3ed095:1890,_0x17fd5d:2792,_0x1f2e9b:1612,_0x498d85:756,_0x7d08a1:1890,_0x323258:3865,_0x2ab821:2792,_0x4418d3:2792,_0x5551be:4175,_0x549001:4102},i=_0x5e32ae;if(!this.enabled)return;const s=e._clockStep;if(this[i(t._0x587d9a)]&&this._changeHeadingPitch(s),this._direction===RoamType[i(2689)])return;const n=this.speed*s;this._direction===RoamType.DIRECTION_FORWARD?Cesium__namespace[i(t._0x520c07)].multiplyByScalar(this[i(1890)].camera.direction,1,scratchCurrentDirection):this[i(t._0x39487b)]===RoamType[i(2464)]?Cesium__namespace.Cartesian3.multiplyByScalar(this[i(t._0x3ed095)][i(t._0x17fd5d)].direction,-1,scratchCurrentDirection):this[i(t._0x1f2e9b)]===RoamType[i(t._0x498d85)]?Cesium__namespace.Cartesian3.multiplyByScalar(this[i(t._0x7d08a1)].camera.right,-1,scratchCurrentDirection):this._direction===RoamType.DIRECTION_RIGHT&&Cesium__namespace.Cartesian3.multiplyByScalar(this._map[i(2792)].right,1,scratchCurrentDirection),Cesium__namespace.Cartesian3.multiplyByScalar(scratchCurrentDirection,n,scratchDeltaPosition);const o=this[i(1890)][i(2792)].position;Cesium__namespace.Cartesian3.add(o,scratchDeltaPosition,scratchNextPosition);const c=this._map.scene.globe,_=c.ellipsoid;_[i(650)](scratchNextPosition,scratchNextCartographic);const l=c.getHeight(scratchNextCartographic);l!==void 0&&(scratchNextCartographic[i(t._0x323258)]=l+this[i(t._0x323258)],_[i(3310)](scratchNextCartographic,scratchTerrainConsideredNextPosition),this._map.camera[i(1557)]({destination:scratchTerrainConsideredNextPosition,orientation:new Cesium__namespace.HeadingPitchRoll(this._map[i(t._0x2ab821)].heading,this._map.camera[i(2625)],this._map[i(t._0x4418d3)][i(t._0x5551be)]),endTransform:Cesium__namespace[i(t._0x549001)][i(2405)]}))}_changeHeadingPitch(e){const t={_0x573b64:3300,_0x50b42d:3716,_0x52d0cf:2946,_0x2ebfc0:3977,_0x20bbb8:2625,_0x5f3331:982,_0x218037:3629,_0x11a791:2792,_0x48ad39:1557,_0x2c561f:4175},i=_0x5e32ae,s=this._map[i(t._0x573b64)][i(t._0x50b42d)],n=this._map.canvas[i(2512)],o=(this._mousePosition.x-this[i(t._0x52d0cf)].x)/s,c=-(this._mousePosition.y-this._startMousePosition.y)/n,_=Cesium__namespace.Math.toDegrees(this._map.camera[i(t._0x2ebfc0)]),l=o*this.rotateSpeed,h=_+l,f=Cesium__namespace.Math.toDegrees(this[i(1890)].camera[i(t._0x20bbb8)]),m=c*this[i(t._0x5f3331)];let g=f+m;g>this.maxPitch*2&&g<360-this.maxPitch?g=360-this.maxPitch:g>this[i(t._0x218037)]&&g<360-this[i(3629)]&&(g=this.maxPitch),this._map[i(t._0x11a791)][i(t._0x48ad39)]({orientation:{heading:Cesium__namespace.Math.toRadians(h),pitch:Cesium__namespace.Math.toRadians(g),roll:this._map.camera[i(t._0x2c561f)]}})}_enableScreenSpaceCameraController(e){const t={_0x491bae:3595},i=_0x5e32ae,s=this._map.scene;s.screenSpaceCameraController.enableRotate=e,s.screenSpaceCameraController.enableTranslate=e,s.screenSpaceCameraController.enableZoom=e,s[i(t._0x491bae)].enableTilt=e,s[i(t._0x491bae)].enableLook=e}activate(){const e={_0x5696fc:3576,_0x3dab76:1286},t=_0x5e32ae;this._enabled=!![],this._enableScreenSpaceCameraController(![]);const i=this[t(1890)].camera.position,s=new Cesium__namespace.Cartographic,n=this._map.scene.globe;n.ellipsoid[t(650)](i,s);const o=n[t(770)](s);if(o===void 0)return![];s.height=o+this.height;const c=new Cesium__namespace[t(3916)];n[t(3875)].cartographicToCartesian(s,c);const _=this._map.camera[t(3977)];return this._heading=_,this._map.camera[t(e._0x5696fc)]({destination:c,orientation:{heading:_,pitch:Cesium__namespace[t(e._0x3dab76)].toRadians(0),roll:0}}),!![]}disable(){this._enabled=![],this._enableScreenSpaceCameraController(!![])}[_0x5e32ae(3853)](){const e={_0x5338a2:3138,_0x3172e1:1612},t=_0x5e32ae;!this.enabled&&this[t(e._0x5338a2)](),this[t(e._0x3172e1)]=RoamType.DIRECTION_FORWARD}stopAutoForward(){const e=_0x5e32ae;this[e(1612)]=RoamType.DIRECTION_NONE}}class RotatePoint extends BaseThing{constructor(e={}){const t={_0x123082:2160},i=_0x5e32ae;super(e),this._direction=this.options.direction?1:-1,this._angle=360/(60*(this.options.time||60)),this[i(t._0x123082)]=this.options.autoStopAngle}get isStart(){return this[_0x5e32ae(1079)]}_enabledHook(e){e?this[_0x5e32ae({_0x26a3bc:2476}._0x26a3bc)]():this.stop()}[_0x5e32ae(3118)](){}[_0x5e32ae(4158)](){const e=_0x5e32ae;this._map.on(EventType.mouseDown,this._map_mouseDownHandler,this),this._map.on(EventType.mouseUp,this[e(1105)],this),this._mouseDown=![]}_map_mouseDownHandler(e){this._mouseDown=!![]}[_0x5e32ae(1105)](e){const t={_0x1d991f:1905,_0x45ddc3:2776},i=_0x5e32ae;this._mouseDown=![];const s=this._map.getCenter();!s||s[i(3984)]>5e5||(this[i(t._0x1d991f)]=0,this._center=s.toCartesian(),this._startHeading=this._map.camera.heading,this._startPitch=this._map.camera.pitch,this._distance=Cesium__namespace.Cartesian3[i(t._0x45ddc3)](this._center,this[i(1890)].camera.positionWC))}_removedHook(){const e={_0x1a227f:1890,_0x446733:2808},t=_0x5e32ae;this[t(e._0x1a227f)].off(EventType.mouseDown,this._map_mouseDownHandler,this),this._map.off(EventType[t(e._0x446733)],this[t(1105)],this),this[t(3874)]()}[_0x5e32ae(2476)](e){const t={_0x95e22b:1079,_0x118812:2332,_0x6bb081:2776,_0x4b59b4:723},i={_0x44b260:1079,_0x290044:4194},s=_0x5e32ae;var n;this[s(t._0x95e22b)]&&this[s(3874)](),this._isStart=!![];const o=(n=this._map.getCenter())===null||n===void 0?void 0:n.toCartesian();e?e instanceof Cesium__namespace.Cartesian3?this._center=e:this[s(723)]=LngLatPoint.parse(e)[s(2048)]():this._center=o,this[s(t._0x118812)]=this.options[s(t._0x6bb081)]||Cesium__namespace[s(3916)].distance(this._center,this._map.camera.positionWC),this[s(2101)]=this._map.camera.heading,this._startPitch=this[s(1890)].camera.pitch;let c=2;Cesium__namespace.Cartesian3.distance(o,this[s(t._0x4b59b4)])<this[s(2332)]*.01&&(c=0),this.fire(EventType.start),this[s(1890)].flyToPoint(this._center,{radius:this._distance,duration:c,complete:_=>{const l=s;this[l(i._0x44b260)]=!![],this._tikRender=0,this._map.on(EventType[l(i._0x290044)],this._onPreRenderHandler,this)}})}[_0x5e32ae(4160)](e){const t={_0x1cb2da:1905,_0x5a8d95:2646,_0x905d85:2160,_0x2697f2:1567,_0x4d2b4c:1890,_0x48f627:1557,_0x5a79b9:2792},i=_0x5e32ae;if(this._mouseDown)return;this._tikRender++;const s=this[i(t._0x1cb2da)]*this[i(t._0x5a8d95)];this._autoStopAngle&&s>=this[i(t._0x905d85)]&&this.stop();const n=Cesium__namespace[i(1286)][i(t._0x2697f2)](s*this._direction)+this._startHeading;this[i(t._0x4d2b4c)].scene.camera[i(t._0x48f627)]({destination:this._center,orientation:{heading:n,pitch:this[i(2652)]}}),this._map.scene[i(t._0x5a79b9)].moveBackward(this[i(2332)]),this.fire(EventType.change)}[_0x5e32ae(3874)](){const e=_0x5e32ae;this._isStart&&(this[e(1079)]=![],this._map.off(EventType.preRender,this._onPreRenderHandler,this),this[e(1404)](EventType[e(3874)]))}}const MAX_PITCH_IN_DEGREE=88;class StreetView extends BaseThing{constructor(e={}){const t=_0x5e32ae;super(e),this[t(982)]=e.rotateSpeed??30,this.heightStep=e.heightStep??.2,this.moveStep=e.moveStep??.1}_enabledHook(e){const t={_0x2cacea:3107,_0x21594e:3595,_0x14e7a9:1480,_0x4bb176:2928,_0x463800:2076},i=_0x5e32ae;this._map.mouseZoom&&(this._map.mouseZoom.enabled=!e),e?(this._default_zoomEventTypes=this._map[i(t._0x2cacea)][i(t._0x21594e)].zoomEventTypes,this._default_tiltEventTypes=this._map[i(3107)].screenSpaceCameraController[i(631)],this._map.scene.screenSpaceCameraController[i(t._0x14e7a9)]=[Cesium__namespace[i(t._0x4bb176)][i(3390)],Cesium__namespace[i(t._0x4bb176)].PINCH,{eventType:Cesium__namespace[i(2928)].RIGHT_DRAG,modifier:Cesium__namespace.KeyboardEventModifier.CTRL}],this[i(1890)].scene.screenSpaceCameraController.tiltEventTypes=[{eventType:Cesium__namespace.CameraEventType.MIDDLE_DRAG,modifier:Cesium__namespace.KeyboardEventModifier.CTRL}]):(this[i(2676)]&&(this._map.scene.screenSpaceCameraController.zoomEventTypes=this._default_zoomEventTypes,delete this._default_zoomEventTypes),this._default_tiltEventTypes&&(this._map.scene.screenSpaceCameraController.tiltEventTypes=this[i(t._0x463800)],delete this._default_tiltEventTypes))}_mountedHook(){}[_0x5e32ae(4158)](){const e={_0x508c98:2484,_0x42de77:2546,_0x298fe5:2761,_0x355443:1890,_0x1363c6:1290},t=_0x5e32ae;this._enabledHook(this.enabled),this._map.on(EventType.rightDown,this._onRightDownHandler,this),this._map.on(EventType.mouseMove,this[t(e._0x508c98)],this),this[t(1890)].on(EventType[t(e._0x42de77)],this._onRightUpHandler,this),this._map.on(EventType.middleDown,this._onMiddleDownHandler,this),this[t(1890)].on(EventType.middleUp,this[t(e._0x298fe5)],this),this[t(e._0x355443)].on(EventType[t(1948)],this[t(e._0x1363c6)],this),this._map.on(EventType.dblClick,this._onDbClickHandler,this),this[t(1890)].on(EventType.rightClick,this._onRightClickHandler,this)}_removedHook(){const e={_0x3bb1f4:1220,_0x2f0514:1890,_0x2b70ac:1890,_0x44450a:2969,_0x399994:1890,_0x223e44:1890},t=_0x5e32ae;this._enabledHook(![]),this._map.off(EventType.rightDown,this._onRightDownHandler,this),this._map[t(e._0x3bb1f4)](EventType.mouseMove,this[t(2484)],this),this[t(e._0x2f0514)].off(EventType.rightUp,this._onRightUpHandler,this),this[t(e._0x2b70ac)].off(EventType[t(e._0x44450a)],this._onMiddleDownHandler,this),this._map.off(EventType[t(1141)],this._onMiddleUpHandler,this),this[t(e._0x399994)].off(EventType.click,this._onClickHandler,this),this._map.off(EventType.dblClick,this._onDbClickHandler,this),this._map.off(EventType.rightClick,this._onRightClickHandler,this),this.rotatePoint&&(this[t(e._0x223e44)].removeThing(this.rotatePoint,!![]),delete this.rotatePoint)}_onRightDownHandler(e){const t={_0x1cd23b:3874,_0x48ef8f:2180,_0x54a946:734},i=_0x5e32ae;this.enabled&&(this.rotatePoint&&this.rotatePoint[i(t._0x1cd23b)](),this._isMouseLeftButtonPressed=!![],this._mousePosition=this._startMousePosition=Cesium__namespace.Cartesian3.clone(e[i(t._0x48ef8f)]),this._headingWhenLeftClicked=Cesium__namespace.Math[i(1984)](this._map.camera[i(3977)]),this[i(t._0x54a946)]=Cesium__namespace.Math.toDegrees(this._map[i(2792)].pitch))}[_0x5e32ae(2484)](e){const t={_0x40a0d4:1890,_0x3006bd:1286,_0x1e49c7:1286,_0x359cc5:1898,_0x369e56:2970},i=_0x5e32ae;if(this.enabled){if(this._mousePosition=e[i(1274)],this[i(585)]){const s=this[i(t._0x40a0d4)][i(3300)][i(3716)],n=this[i(1890)].canvas.clientHeight,o=(this._mousePosition.x-this._startMousePosition.x)/s,c=-(this._mousePosition.y-this._startMousePosition.y)/n;if(Cesium__namespace[i(t._0x3006bd)].equalsEpsilon(o,0,Cesium__namespace.Math.EPSILON6)&&Cesium__namespace[i(t._0x1e49c7)].equalsEpsilon(c,0,Cesium__namespace.Math[i(t._0x359cc5)]))return;const _=o*this[i(982)],l=this._headingWhenLeftClicked+_,h=c*this[i(982)];let f=this._pitchWhenLeftClicked+h;f>MAX_PITCH_IN_DEGREE*2&&f<360-MAX_PITCH_IN_DEGREE?f=360-MAX_PITCH_IN_DEGREE:f>MAX_PITCH_IN_DEGREE&&f<360-MAX_PITCH_IN_DEGREE&&(f=MAX_PITCH_IN_DEGREE),this[i(1890)].camera.setView({orientation:{heading:Cesium__namespace[i(1286)].toRadians(l),pitch:Cesium__namespace.Math[i(1567)](f),roll:this._map.camera.roll}})}else if(this[i(t._0x369e56)]){const s=-(this._mousePosition.y-this._startMousePosition.y)/this._map.canvas.clientHeight,n=this._map.camera.positionCartographic.height*this.heightStep;this._map.camera.moveDown(s*n)}}}[_0x5e32ae(3642)](e){this._isMouseLeftButtonPressed=![]}_onMiddleDownHandler(e){const t={_0x1f85e8:3874,_0x16ae7e:3916},i=_0x5e32ae;this.enabled&&(this.rotatePoint&&this.rotatePoint[i(t._0x1f85e8)](),this._isMouseUpdownPressed=!![],this._startMousePosition=Cesium__namespace[i(t._0x16ae7e)].clone(e.position),this._mousePosition=this._startMousePosition)}[_0x5e32ae(2761)](e){this._isMouseUpdownPressed=![]}_onClickHandler(e){const t=_0x5e32ae;this.enabled&&this.rotatePoint&&this.rotatePoint[t(3874)]()}_onDbClickHandler(e){const t={_0x2017df:3318,_0x8a0093:2792},i=_0x5e32ae;if(!this[i(968)])return;this.rotatePoint&&this[i(t._0x2017df)].stop();const s=getCurrentMousePosition(this._map.scene,e[i(2180)]);if(s){const n=Cesium__namespace.Cartesian3.distance(s,this._map[i(t._0x8a0093)].positionWC)*this.moveStep;this._map.flyToPoint(s,{radius:n,maximumHeight:this._map[i(2792)].positionCartographic.height,duration:this[i(3798)].moveDuration})}}[_0x5e32ae(1682)](e){const t={_0x4b7cb9:837,_0x47deba:698,_0x5d9a07:1890},i=_0x5e32ae;this.enabled&&(this.time&&Cesium__namespace.JulianDate[i(2636)](this._map.clock[i(t._0x4b7cb9)],this.time)<.5&&(this._map.closeContextMenu(),!this.rotatePoint&&(this.rotatePoint=new RotatePoint(this.options[i(3318)]),this._map.addThing(this.rotatePoint)),this.rotatePoint[i(2476)](e[i(t._0x47deba)])),this[i(1572)]=this[i(t._0x5d9a07)].clock.currentTime.clone())}}class CameraHistory extends BaseThing{constructor(e={}){const t=_0x5e32ae;super(e),this.step=0,this.views=[],this.maxCacheCount=this[t(3798)].maxCacheCount??99}get debugExtent(){return this.options.limit&&this.options.limit.debugExtent}set debugExtent(e){const t={_0x4660c8:3798,_0x586f9f:4084,_0x1a2778:3916,_0x433304:2200},i=_0x5e32ae;if(this[i(t._0x4660c8)].limit){if(this[i(3798)].limit.debugExtent=e,!this.debugExtentEntity){const s=this[i(3798)].limit.radius,n=this.options.limit.position;this.debugExtentEntity=this._map.entities[i(t._0x586f9f)]({name:"限定的范围",position:n,ellipsoid:{radii:new Cesium__namespace[i(t._0x1a2778)](s,s,s),maximumCone:Cesium__namespace.Math.PI_OVER_TWO,slicePartitions:45,stackPartitions:45,material:new Cesium__namespace.Color(0,1,1,0),outline:!![],outlineColor:new Cesium__namespace[i(t._0x433304)](0,1,1,1)}})}this.debugExtentEntity.show=e}}[_0x5e32ae(3118)](){const e={_0x496875:3798,_0x2bfc3a:2295},t=_0x5e32ae;this.options.limit&&this[t(e._0x496875)].limit.debugExtent&&(this.debugExtent=this.options[t(e._0x2bfc3a)].debugExtent),this._limitGlobe()}_addedHook(){const e=_0x5e32ae;this[e(1890)].on(EventType.cameraMoveStart,this[e(640)],this),this[e(1890)].on(EventType.cameraMoveEnd,this._cameraMoveEndHandler,this)}[_0x5e32ae(2442)](){const e={_0x3972e1:1086,_0x360154:887,_0x1dd5bc:2489},t=_0x5e32ae;this._map.off(EventType.cameraMoveStart,this._cameraMoveStartHandler,this),this._map.off(EventType.cameraMoveEnd,this[t(e._0x3972e1)],this),this[t(494)]=[],this[t(2489)]&&(this._map[t(e._0x360154)].remove(this.debugExtentEntity),delete this[t(e._0x1dd5bc)])}_cameraMoveStartHandler(){this._map&&(this.isInPush=!![],this.lastCameraView=this._map.getCameraView())}[_0x5e32ae(1086)](){const e=_0x5e32ae;this[e(474)](),this[e(4050)]&&this._addCameraView()}_limitGlobe(){const e={_0x7b89ff:3194,_0xbabd4e:3916,_0x1fe9e9:2295},t=_0x5e32ae;if(!this.options.limit)return;const i=this.options.limit.position,s=this.options.limit[t(e._0x7b89ff)],n=Cesium__namespace[t(e._0xbabd4e)].distance(i,this._map.camera.position);this.options[t(e._0x1fe9e9)].debugExtent,!(n<=s)&&(this.isInPush=![],this.lastCameraView?this._map[t(1227)](this.lastCameraView,{duration:.5,complete:()=>{this.lastCameraView=null,this.isInPush=!![]}}):this._map.flyToPoint(i,{radius:s*.6,pitch:-60,duration:.5,complete:()=>{this.lastCameraView=null,this.isInPush=!![]}}))}[_0x5e32ae(1119)](){const e={_0x2591e8:809,_0x1717dd:2308},t=_0x5e32ae,i=this._map.getCameraView();this.views.push(i),this.views.length>this.maxCacheCount&&this.views.splice(0,1),this.step=this[t(494)].length-1,this.fire(EventType[t(e._0x2591e8)],{index:this[t(e._0x1717dd)],count:this[t(494)].length})}_goHistoryView(){const e={_0x2bda3f:2792,_0x3bbf1d:1368,_0x6109c9:4050},t={_0x3bc9ab:1890,_0x5ad316:2792,_0x4235c7:2732,_0x109960:1404},i=_0x5e32ae;this._map[i(e._0x2bda3f)][i(3011)][i(e._0x3bbf1d)](this._cameraMoveStartHandler,this),this[i(1890)].camera.moveEnd.removeEventListener(this._cameraMoveEndHandler,this),this[i(e._0x6109c9)]=![],this._map.setCameraView(this[i(494)][this.step],{complete:()=>{const s=i;this[s(t._0x3bc9ab)][s(t._0x5ad316)].moveStart[s(t._0x4235c7)](this._cameraMoveStartHandler,this),this[s(1890)].camera.moveEnd.addEventListener(this._cameraMoveEndHandler,this),this[s(t._0x109960)](EventType.change,{index:this[s(2308)],count:this.views.length})}})}goNext(){const e=_0x5e32ae;return this.step>=this[e(494)][e(3402)]-1?![]:(this.step++,this._goHistoryView(),!![])}goLast(){return this.step<=0?![]:(this.step--,this._goHistoryView(),!![])}[_0x5e32ae(2702)](){const e={_0xea5224:3402},t=_0x5e32ae;return this.step===this.views[t(e._0xea5224)]-1?![]:(this.step=this.views.length-1,this._goHistoryView(),!![])}[_0x5e32ae(4095)](){const e={_0x365ef0:2308,_0x22ab08:2308},t=_0x5e32ae;return this[t(e._0x365ef0)]<=0?![]:(this[t(e._0x22ab08)]=0,this[t(1752)](),!![])}}class RotateOut extends BaseThing{constructor(e={}){const t={_0x361b86:3858},i=_0x5e32ae;super(e),this[i(2646)]=360/(60*this.options.time||60),this._direction=this.options[i(t._0x361b86)]?-1:1,this._autoStopAngle=this.options.autoStopAngle}get[_0x5e32ae(2236)](){return this._isStart}[_0x5e32ae(751)](e){e?this[_0x5e32ae({_0x3350d5:2476}._0x3350d5)]():this.stop()}[_0x5e32ae(3118)](){}_addedHook(){}_removedHook(){this.stop()}start(){const e={_0x1b658c:2101},t=_0x5e32ae;this._isStart&&this[t(3874)](),this._isStart=!![],this[t(1905)]=0,this[t(e._0x1b658c)]=this._map.camera.heading,this._startPitch=this._map.camera.pitch,this._map.on(EventType.preRender,this._onPreRenderHandler,this),this.fire(EventType.start)}_onPreRenderHandler(e){const t={_0x502e78:1905,_0x52f224:1905,_0x4e5b67:809},i=_0x5e32ae;this[i(t._0x502e78)]++;const s=this[i(t._0x52f224)]*this._angle;this._autoStopAngle&&s>=this._autoStopAngle&&this.stop();const n=Cesium__namespace.Math.toRadians(s*this._direction)+this._startHeading;this._map.scene.camera[i(1557)]({orientation:{heading:n,pitch:this._startPitch}}),this[i(1404)](EventType[i(t._0x4e5b67)])}[_0x5e32ae(3874)](){const e={_0x47ad15:1079,_0x2767b1:1220,_0x2dd7ab:3874},t=_0x5e32ae;this._isStart&&(this[t(e._0x47ad15)]=![],this._map[t(e._0x2767b1)](EventType.preRender,this[t(4160)],this),this[t(1404)](EventType[t(e._0x2dd7ab)]))}}const PointEditElementColors={X_TRANSLATION_COLOR:Cesium__namespace.Color.RED.withAlpha(.6),Y_TRANSLATION_COLOR:Cesium__namespace.Color[_0x5e32ae(2371)].withAlpha(.6),Z_TRANSLATION_COLOR:Cesium__namespace.Color[_0x5e32ae(728)][_0x5e32ae(3518)](.6),XY_TRANSLATION_COLOR:Cesium__namespace.Color.BLUE.withAlpha(.6),YZ_TRANSLATION_COLOR:Cesium__namespace.Color.RED[_0x5e32ae(3518)](.6),XZ_TRANSLATION_COLOR:Cesium__namespace.Color[_0x5e32ae(2371)].withAlpha(.6)},HighlightColor=Cesium__namespace.Color.YELLOW;class MatrixMove2 extends BaseThing{constructor(e={}){const t={_0x17dc13:2764,_0x80e6ab:638,_0x2ad7c2:1859},i=_0x5e32ae;super(e),this._pointEditElementIDs={X_TRANSLATION:this.id+"_PointEdit_X_TRANSLATION",Y_TRANSLATION:this.id+i(1295),Z_TRANSLATION:this.id+i(3878),XY_TRANSLATION:this.id+"_PointEdit_XY_TRANSLATION",YZ_TRANSLATION:this.id+i(t._0x17dc13),XZ_TRANSLATION:this.id+"_PointEdit_XZ_TRANSLATION"},this._hideFeatures={X_TRANSLATION:!![],Y_TRANSLATION:!![],Z_TRANSLATION:!![],XY_TRANSLATION:!![],XZ_TRANSLATION:!![],YZ_TRANSLATION:!![]},this._radius=Cesium__namespace.defaultValue(e.radius,100),this[i(4270)]=new Cesium__namespace.Matrix4,this._isLeftDown=![],this._pickedId="",this[i(t._0x80e6ab)]="",this[i(t._0x2ad7c2)]=void 0,e.position&&(this.position=e[i(2180)])}get position(){return this._position}set position(e){const t={_0x47ef76:4270},i=_0x5e32ae;this[i(918)]=LngLatPoint.toCartesian(e),this[i(t._0x47ef76)]=Cesium__namespace.Matrix4[i(4182)](Cesium__namespace[i(2911)].eastNorthUpToFixedFrame(this._position),this._radius,this._editMatrix),this._createGraphics()}get radius(){return this._radius}set radius(e){const t={_0x2f530a:4182},i=_0x5e32ae;this._radius=e,this._editMatrix=Cesium__namespace.Matrix4[i(t._0x2f530a)](Cesium__namespace.Transforms[i(3684)](this._position),this._radius,this._editMatrix),this._createGraphics()}get[_0x5e32ae(3149)](){const e=_0x5e32ae;return this._map?this[e(469)]:![]}_enabledHook(e){const t={_0x1791d3:3818},i=_0x5e32ae;this._drawLayer.show=e,e?this[i(t._0x1791d3)]():this._unbindEvent()}_mountedHook(){const e={_0x3f17f0:3771},t=_0x5e32ae;this[t(e._0x3f17f0)]=new Cesium__namespace.PrimitiveCollection,this._drawLayer.show=this[t(575)]??!![]}_addedHook(){this._map.scene.primitives.add(this._drawLayer),this._createGraphics(),this._bindEvent()}_removedHook(){const e=_0x5e32ae;this._unbindEvent(),this._drawLayer[e(1888)](),this._map.scene.primitives.remove(this._drawLayer)}_createGraphics(){const e={_0x4f8083:4270,_0x12da59:2263,_0x211646:2620,_0x238776:2263,_0x331cda:4084,_0x5d55d9:4069,_0x4f6151:3916,_0x20c26e:4084,_0x23ca8f:1019,_0x1cf035:924,_0x220e37:1226},t=_0x5e32ae;if(!this[t(3771)]||(this._drawLayer.removeAll(),!this._position))return;const i=Cesium__namespace.Matrix4.clone(this[t(e._0x4f8083)]);this[t(e._0x12da59)].X_TRANSLATION&&this._drawLayer.add(createPolylinePrimitive({positions:[Cesium__namespace.Cartesian3.ZERO,Cesium__namespace[t(3916)][t(e._0x211646)]],modelMatrix:i,id:this._pointEditElementIDs[t(418)],color:PointEditElementColors.X_TRANSLATION_COLOR})),this._hideFeatures[t(1203)]&&this._drawLayer.add(createPolylinePrimitive({positions:[Cesium__namespace.Cartesian3.ZERO,Cesium__namespace[t(3916)].UNIT_Y],modelMatrix:i,id:this._pointEditElementIDs.Y_TRANSLATION,color:PointEditElementColors.Y_TRANSLATION_COLOR})),this[t(e._0x238776)].Z_TRANSLATION&&this[t(3771)][t(e._0x331cda)](createPolylinePrimitive({positions:[Cesium__namespace.Cartesian3[t(e._0x5d55d9)],Cesium__namespace[t(e._0x4f6151)].UNIT_Z],modelMatrix:i,id:this[t(1226)].Z_TRANSLATION,color:PointEditElementColors.Z_TRANSLATION_COLOR})),this._hideFeatures.XY_TRANSLATION&&this._drawLayer[t(e._0x20c26e)](createPlanePrimitive({positions:[.1,.1,0,.1,.3,0,.3,.3,0,.3,.1,0],normals:[0,0,1,0,0,1,0,0,1,0,0,1],modelMatrix:i,id:this._pointEditElementIDs.XY_TRANSLATION,color:PointEditElementColors[t(e._0x23ca8f)]})),this[t(e._0x238776)][t(e._0x1cf035)]&&this._drawLayer[t(4084)](createPlanePrimitive({positions:[0,.1,.1,0,.1,.3,0,.3,.3,0,.3,.1],normals:[1,0,0,1,0,0,1,0,0,1,0,0],modelMatrix:i,id:this[t(e._0x220e37)].YZ_TRANSLATION,color:PointEditElementColors.YZ_TRANSLATION_COLOR})),this[t(2263)].XZ_TRANSLATION&&this._drawLayer.add(createPlanePrimitive({positions:[.1,0,.1,.1,0,.3,.3,0,.3,.3,0,.1],normals:[0,1,0,0,1,0,0,1,0,0,1,0],modelMatrix:i,id:this._pointEditElementIDs.XZ_TRANSLATION,color:PointEditElementColors.XZ_TRANSLATION_COLOR}))}_bindEvent(){const e={_0x31906c:4203,_0x1d757c:1607},t={_0x31ca28:515,_0x2d583d:4021,_0x382273:1638,_0x8a1d03:3107,_0x28253b:1598,_0x46ba9d:1598,_0x13b3f8:4270,_0x6fd399:2456},i={_0x48b26d:3107,_0x3d5af7:649},s=_0x5e32ae;this._unbindEvent(),this[s(e._0x31906c)]=new Cesium__namespace.ScreenSpaceEventHandler(this._map.canvas),this._handler.setInputAction(n=>{const o=s,c=drillPickTransformHelperComponent(this._map.scene,n.position,this._pointEditElementIDs);c&&(this._map[o(i._0x48b26d)].screenSpaceCameraController.enableInputs=![],this[o(i._0x3d5af7)]=!![],this[o(1638)]=c.id)},Cesium__namespace[s(2249)].LEFT_DOWN),this._handler[s(e._0x1d757c)](()=>{const n=s;this._map.scene.screenSpaceCameraController.enableInputs=!![],this._isLeftDown=![],this[n(1638)]="",Cesium__namespace.defined(this._oldPickedId)&&this._oldPickedId!==""&&(setPointEditElementColorsForId(this._oldPickedId,getPointEditElementColorsForId(this._oldPickedId,this[n(1226)]),this._pointEditElementIDs),this._oldPickedId="",this[n(3129)]())},Cesium__namespace.ScreenSpaceEventType.LEFT_UP),this._handler.setInputAction(n=>{const o=s;let c=![];if(Cesium__namespace[o(t._0x31ca28)](this._oldPickPrimitive)){var _;const l=(_=this._oldPickPrimitive)===null||_===void 0?void 0:_[o(t._0x2d583d)];if(l&&l[0]){const h=this._oldPickPrimitive.appearance[o(1877)].uniforms;h.color=getPointEditElementColorsForId(l[0],this._pointEditElementIDs),this._oldPickPrimitive=void 0}}if(this._isLeftDown){Cesium__namespace[o(t._0x31ca28)](this._pickedId)&&this[o(t._0x382273)]!==""&&(setPointEditElementColorsForId(this._pickedId,HighlightColor,this[o(1226)]),this._oldPickedId=this[o(1638)],c=!![]);const l=this._map[o(t._0x8a1d03)];let h=l.pickPosition(n[o(t._0x28253b)]),f=l.pickPosition(n.endPosition);const m=new Cesium__namespace.Cartesian2;if(!Cesium__namespace.defined(h)&&(m.x=n.startPosition.x,m.y=l[o(3300)].clientHeight-n[o(t._0x46ba9d)].y,h=getWorldPositionFromWindowPosition(l,m)),!Cesium__namespace.defined(f)&&(m.x=n.endPosition.x,m.y=l[o(3300)].clientHeight-n.endPosition.y,f=getWorldPositionFromWindowPosition(l,m)),Cesium__namespace.defined(h)&&Cesium__namespace.defined(f)){const g=getChangeMatrixByMovingMouse(this,h,f,this._pointEditElementIDs);Cesium__namespace.defined(g)&&(this[o(4270)]=Cesium__namespace[o(4102)][o(2663)](this[o(t._0x13b3f8)],g,new Cesium__namespace.Matrix4),this._position=Cesium__namespace.Matrix4.getTranslation(this._editMatrix,this._position),this[o(t._0x6fd399)]({position:this[o(918)]}),c=!![])}c&&this._createGraphics()}else{const l=drillPickTransformHelperComponent(this[o(1890)].scene,n.endPosition,this._pointEditElementIDs);if(l){const h=l.primitive.appearance.material.uniforms;h[o(2092)]=HighlightColor,this._oldPickPrimitive=l.primitive}}},Cesium__namespace.ScreenSpaceEventType.MOUSE_MOVE)}_unbindEvent(){this._handler&&(this._handler.destroy(),delete this._handler)}onChange(e){const t={_0x2cbfc3:3798,_0x3f6833:809},i=_0x5e32ae;this[i(t._0x2cbfc3)].onChange&&this.options.onChange(e),this.fire(EventType[i(t._0x3f6833)],e,!![])}}function createPolylinePrimitive(r){const e={_0x28c5b4:791},t=_0x5e32ae,{positions:i,modelMatrix:s,color:n,id:o}=r,c=new Cesium__namespace.PolylineMaterialAppearance({material:Cesium__namespace.Material[t(e._0x28c5b4)](Cesium__namespace.Material.PolylineArrowType,{color:n})});return new Cesium__namespace[t(1101)]({geometryInstances:new Cesium__namespace.GeometryInstance({geometry:new Cesium__namespace.PolylineGeometry({positions:i,width:15,vertexFormat:Cesium__namespace[t(3647)].VERTEX_FORMAT,arcType:Cesium__namespace.ArcType.NONE}),modelMatrix:s,id:o}),appearance:c,depthFailAppearance:c,asynchronous:![]})}function createPlanePrimitive(r){const e={_0x2b0c35:1886,_0x289832:2816},t=_0x5e32ae,{positions:i,modelMatrix:s,normals:n,color:o,id:c}=r,_=new Cesium__namespace.MaterialAppearance({closed:![],flat:!![],materialSupport:Cesium__namespace[t(2168)][t(e._0x2b0c35)][t(3777)],material:Cesium__namespace.Material.fromType(Cesium__namespace.Material.ColorType,{color:o})});return new Cesium__namespace.Primitive({geometryInstances:new Cesium__namespace.GeometryInstance({geometry:new Cesium__namespace.Geometry({attributes:{position:new Cesium__namespace[t(1112)]({componentDatatype:Cesium__namespace.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:new Float64Array(i)}),normal:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace.ComponentDatatype[t(e._0x289832)],componentsPerAttribute:3,values:new Float32Array(n)})},indices:new Uint16Array([0,1,2,0,2,3]),primitiveType:Cesium__namespace[t(2684)][t(730)],boundingSphere:Cesium__namespace[t(2407)][t(2768)](i)}),modelMatrix:s,id:c}),appearance:_,depthFailAppearance:_,asynchronous:![]})}function isTransformHelperComponent(r,e){const t={_0x4ab42b:2856},i=_0x5e32ae;for(const s in e)if(Object[i(t._0x4ab42b)].call(e,s)){const n=e[s];if(r===n)return!![]}return![]}function getWorldPositionFromWindowPosition(r,e){const t={_0x50bf39:1450},i=_0x5e32ae,s=.1,n=Cesium__namespace[i(t._0x50bf39)].transformWindowToDrawingBuffer(r,e,new Cesium__namespace.Cartesian2);return Cesium__namespace.SceneTransforms[i(1973)](r,n,s)}function getChangeMatrixByMovingMouse(r,e,t,i){const s={_0x5d0be3:4270,_0x78c7cd:4102,_0x3d5191:3916,_0x84d35a:2620,_0x361e37:418,_0x14c003:418,_0x3ce272:3916,_0x4ecbde:683,_0x3fcc7c:515,_0x3bcc45:2166},n=_0x5e32ae,o=r._pickedId,c=Cesium__namespace.Matrix4.clone(r[n(s._0x5d0be3)]),_=Cesium__namespace.Matrix4.inverse(c,new Cesium__namespace[n(s._0x78c7cd)]),l=r._map.camera.positionWC,h=Cesium__namespace.Matrix4.multiplyByPoint(_,l,new Cesium__namespace.Cartesian3);Cesium__namespace.Cartesian3.normalize(h,h);const f=Cesium__namespace.Cartesian3.subtract(e,l,new Cesium__namespace[n(3916)]),m=Cesium__namespace[n(s._0x3d5191)].subtract(t,l,new Cesium__namespace.Cartesian3),g=new Cesium__namespace.Ray(l,f),C=new Cesium__namespace.Ray(l,m),E=new Cesium__namespace.Cartesian3;if(o===i.XY_TRANSLATION)Cesium__namespace.Cartesian3[n(4246)](Cesium__namespace.Cartesian3.UNIT_Z,E);else if(o===i.YZ_TRANSLATION)Cesium__namespace.Cartesian3[n(4246)](Cesium__namespace.Cartesian3[n(s._0x84d35a)],E);else if(o===i.XZ_TRANSLATION)Cesium__namespace[n(3916)].clone(Cesium__namespace.Cartesian3.UNIT_Y,E);else if(o===i[n(s._0x361e37)]||o===i[n(1203)]||o===i.Z_TRANSLATION){let D=Cesium__namespace.Cartesian3.ZERO;o===i[n(s._0x14c003)]?D=Cesium__namespace[n(3916)].UNIT_X:o===i.Y_TRANSLATION?D=Cesium__namespace.Cartesian3.UNIT_Y:o===i[n(2059)]&&(D=Cesium__namespace.Cartesian3.UNIT_Z);const N=new Cesium__namespace.Cartesian3;Cesium__namespace[n(s._0x3ce272)].cross(h,D,N),Cesium__namespace.Cartesian3.cross(D,N,E),Cesium__namespace.Cartesian3.normalize(E,E)}const P=new Cesium__namespace.Plane(E,0);Cesium__namespace.Plane[n(s._0x4ecbde)](P,c,P);const w=Cesium__namespace.IntersectionTests[n(4062)](g,P),M=Cesium__namespace.IntersectionTests.rayPlane(C,P);if(!Cesium__namespace.defined(w)||!Cesium__namespace[n(s._0x3fcc7c)](M))return;const T=Cesium__namespace.Matrix4.multiplyByPoint(_,w,new Cesium__namespace.Cartesian3),L=Cesium__namespace.Matrix4.multiplyByPoint(_,M,new Cesium__namespace.Cartesian3),R=new Cesium__namespace.Cartesian3;return Cesium__namespace.Cartesian3[n(1531)](L,T,R),o===i.X_TRANSLATION?(R.y=0,R.z=0):o===i.Y_TRANSLATION?(R.x=0,R.z=0):o===i.Z_TRANSLATION?(R.x=0,R.y=0):o===i.XY_TRANSLATION?R.z=0:o===i.YZ_TRANSLATION?R.x=0:o===i[n(s._0x3bcc45)]&&(R.y=0),Cesium__namespace.Matrix4.fromTranslation(R,new Cesium__namespace[n(4102)])}function setPointEditElementColorsForId(r,e,t){const i={_0x57c931:2059,_0x1e9f7e:2880,_0x372ef2:1019},s=_0x5e32ae;switch(r){case t.X_TRANSLATION:PointEditElementColors.X_TRANSLATION_COLOR=e;break;case t.Y_TRANSLATION:PointEditElementColors.Y_TRANSLATION_COLOR=e;break;case t[s(i._0x57c931)]:PointEditElementColors[s(i._0x1e9f7e)]=e;break;case t.XZ_TRANSLATION:PointEditElementColors.XZ_TRANSLATION_COLOR=e;break;case t.XY_TRANSLATION:PointEditElementColors[s(i._0x372ef2)]=e;break;case t.YZ_TRANSLATION:PointEditElementColors.YZ_TRANSLATION_COLOR=e;break}}function getPointEditElementColorsForId(r,e){const t={_0x1262c4:924},i=_0x5e32ae;let s;switch(r){case e.X_TRANSLATION:case e[i(t._0x1262c4)]:s=Cesium__namespace.Color.RED.withAlpha(.6);break;case e.Y_TRANSLATION:case e[i(2166)]:s=Cesium__namespace.Color[i(2371)].withAlpha(.6);break;case e.Z_TRANSLATION:case e.XY_TRANSLATION:s=Cesium__namespace.Color.BLUE.withAlpha(.6);break}return s}function drillPickTransformHelperComponent(r,e,t){const i={_0x9d90ee:2389},s=_0x5e32ae,n=r[s(i._0x9d90ee)](e),o=n.length;let c;for(let _=0;_<o;_++){const l=n[_];if(l&&l.id&&isTransformHelperComponent(l.id,t)){c=l;break}}return c}var index$3={__proto__:null,Underground,Sightline,Skyline,Shadows,Measure,FloodByGraphic,Slope,TerrainPlanClip,FloodByMaterial,TerrainClip,ContourLine,TerrainFlat,TerrainUplift,LimitHeight,TilesetPlanClip,ModelPlanClip,TilesetBoxClip,TilesetClip,TilesetFlood,TilesetFlat,FirstPersonRoam,StreetView,CameraHistory,RotatePoint,RotateOut,MatrixMove,MatrixRotate,MatrixMove2};class BaseEffect extends BaseThing{get[_0x5e32ae(3205)](){return this._type}get target(){return this._postProcessStage}get[_0x5e32ae(2221)](){const e=_0x5e32ae;var t;return(t=this[e(2976)])===null||t===void 0?void 0:t.uniforms}addTo(e){return e&&e[_0x5e32ae(3070)]&&e.addEffect(this),this}remove(e){const t=_0x5e32ae;this._map&&this[t(1890)].removeEffect(this,e)}_enabledHook(e){this[_0x5e32ae({_0x29afaa:2976}._0x29afaa)]&&(this._postProcessStage.enabled=e)}[_0x5e32ae(437)](e,t){for(const i in t)i!=="enabled"&&(this[i]=t[i])}_addedBaseHook(){const e={_0x3c8db6:968,_0x5bb44d:2976,_0x5bd26b:1890},t=_0x5e32ae;!this._postProcessStage&&this._mountedHook(),this._enabledHook(this[t(e._0x3c8db6)]),this[t(e._0x5bb44d)]&&this[t(e._0x5bd26b)].scene.postProcessStages.add(this._postProcessStage)}_removedBaseHook(){const e={_0x5c451d:1890,_0x502c79:1583,_0x2712b0:2976},t=_0x5e32ae;this._postProcessStage&&(this[t(e._0x5c451d)].scene[t(e._0x502c79)].remove(this._postProcessStage),this._postProcessStage.isDestroyed()&&delete this[t(e._0x2712b0)])}fire(e,t={},i){return!t.effect&&(t.effect=this),super.fire(e,t,i)}_getPickIds(e){const t={_0x47526f:3170,_0x5b6758:3170,_0xf06a9a:2796,_0x46770d:3759};let i=[];return e.forEach(s=>{const n=_0x5210;s.czmObject&&(s=s.czmObject),s[n(t._0x47526f)]?i=i[n(3611)](this._getPickIds(s[n(t._0x5b6758)])):s[n(2796)]?i=i.concat(this._getPickIds([s[n(t._0xf06a9a)]])):i[n(t._0x46770d)]({pickId:s})}),i}}var FogFS=`float getDistance(sampler2D depthTexture, vec2 texCoords) {
  float depth = czm_unpackDepth(texture(depthTexture, texCoords));
  if(depth == 0.0) {
    return czm_infinity;
  }
  vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, depth);
  return -eyeCoordinate.z / eyeCoordinate.w;
}
float interpolateByDistance(vec4 nearFarScalar, float distance) {
  float startDistance = nearFarScalar.x;
  float startValue = nearFarScalar.y;
  float endDistance = nearFarScalar.z;
  float endValue = nearFarScalar.w;
  float t = clamp((distance - startDistance) / (endDistance - startDistance), 0.0, 1.0);
  return mix(startValue, endValue, t);
}
vec4 alphaBlend(vec4 sourceColor, vec4 destinationColor) {
  return sourceColor * vec4(sourceColor.aaa, 1.0) + destinationColor * (1.0 - sourceColor.a);
}
uniform sampler2D colorTexture;
uniform sampler2D depthTexture;
uniform vec4 fogByDistance;
uniform vec4 fogColor;
in vec2 v_textureCoordinates;
void main(void) {
  float distance = getDistance(depthTexture, v_textureCoordinates);
  vec4 sceneColor = texture(colorTexture, v_textureCoordinates);
  float blendAmount = interpolateByDistance(fogByDistance, distance);
  vec4 finalFogColor = vec4(fogColor.rgb, fogColor.a * blendAmount);
  out_FragColor = alphaBlend(finalFogColor, sceneColor);
}
`;class FogEffect extends BaseEffect{constructor(e={}){const t=_0x5e32ae;super(e),this[t(3467)]=e[t(3467)]??new Cesium__namespace.Cartesian4(10,0,1e3,.9),this.color=getCesiumColor(e.color,Cesium__namespace.Color.WHITE),this.maxHeight=e.maxHeight??9e3,this._setOptionsHook(e)}_setOptionsHook(e,t){const i={_0x93df6e:515},s=_0x5e32ae;Cesium__namespace.defined(e.fogByDistance_near)&&(this.fogByDistance.x=e.fogByDistance_near),Cesium__namespace[s(i._0x93df6e)](e.fogByDistance_nearValue)&&(this.fogByDistance.y=e.fogByDistance_nearValue),Cesium__namespace.defined(e.fogByDistance_far)&&(this.fogByDistance.z=e[s(2085)]),Cesium__namespace.defined(e.fogByDistance_farValue)&&(this.fogByDistance.w=e.fogByDistance_farValue),Cesium__namespace.defined(t==null?void 0:t.color)&&(this.color=getCesiumColor(e.color,Cesium__namespace.Color.WHITE)),this.maxHeight=e.maxHeight??9e3}_mountedHook(){const e={_0x27a4db:3467};this._postProcessStage=new Cesium__namespace.PostProcessStage({name:this._id,fragmentShader:FogFS,uniforms:{fogByDistance:()=>this[_0x5210(e._0x27a4db)],fogColor:()=>this.color},enabled:this.enabled})}_addedHook(){const e={_0x4cc271:2732},t=_0x5e32ae;this._map.scene.camera.changed[t(e._0x4cc271)](this.camera_changedHandler,this)}_removedHook(){this._map.scene.camera.changed.removeEventListener(this.camera_changedHandler,this)}camera_changedHandler(e){const t={_0x180331:968},i=_0x5e32ae;this._map.camera[i(2868)][i(3865)]<this.maxHeight?this[i(2976)][i(t._0x180331)]=this[i(968)]:this._postProcessStage.enabled=![]}}register(_0x5e32ae(496),FogEffect);var RainShader=`uniform sampler2D colorTexture;//下雨前输入的场景渲染照片
in vec2 v_textureCoordinates;
uniform float speed;
uniform float size;
uniform float direction;

float hash(float x) {
  return fract(sin(x * 23.3) * 13.13);
}

void main(void) {

  float time = czm_frameNumber * speed / 1000.0;
  vec2 resolution = czm_viewport.zw;

  vec2 uv = (gl_FragCoord.xy * 2. - resolution.xy) / min(resolution.x, resolution.y);
  vec3 finalColor = vec3(0.1, 0.2, 0.3);//粒子的颜色

  float si = sin(direction), co = cos(direction);
  uv *= mat2(co, -si, si, co);
  uv *= length(uv + vec2(0, 4.9)) * 0.3 + 1.0;

  float v = 1. - sin(hash(floor(uv.x * 100.0)) * 2.0);
  float b = clamp(abs(sin(20.0 * time * v + uv.y * (5. / (2.0 + v)))) - .95, 0.0, 1.0) * size;
  finalColor *= v * b; //屏幕上雨的颜色

  out_FragColor = mix(texture(colorTexture, v_textureCoordinates), vec4(finalColor, 1.0), 0.5); //将雨和三维场景融合
}
`;class RainEffect extends BaseEffect{get[_0x5e32ae(2613)](){const e={_0x5d1278:2976},t=_0x5e32ae;var i;return(i=this[t(e._0x5d1278)])===null||i===void 0?void 0:i.uniforms.speed}set speed(e){const t={_0x531ba1:2976},i=_0x5e32ae;this._postProcessStage&&(this[i(t._0x531ba1)].uniforms[i(2613)]=e)}get size(){var e;return(e=this._postProcessStage)===null||e===void 0?void 0:e.uniforms.size}set size(e){const t=_0x5e32ae;this._postProcessStage&&(this[t(2976)].uniforms.size=e)}get[_0x5e32ae(3858)](){const e=_0x5e32ae;var t;return(t=this[e(2976)])===null||t===void 0?void 0:t.uniforms[e(3858)]}set direction(e){const t={_0x105917:2976,_0x164224:1286},i=_0x5e32ae;this[i(t._0x105917)]&&(this._postProcessStage.uniforms.direction=Cesium__namespace[i(t._0x164224)].toRadians(e))}[_0x5e32ae(3118)](){const e={_0x3372a4:3798,_0x149a70:1286,_0x361c09:3798},t=_0x5e32ae;this._postProcessStage=new Cesium__namespace.PostProcessStage({fragmentShader:RainShader,uniforms:{speed:this[t(e._0x3372a4)][t(2613)]??10,size:this.options.size??20,direction:Cesium__namespace[t(e._0x149a70)].toRadians(this[t(e._0x361c09)].direction??-30)},enabled:this.enabled})}}register("rain",RainEffect);var SnowShader=`uniform sampler2D colorTexture; //输入的场景渲染照片
in vec2 v_textureCoordinates;
uniform float speed;

float snow(vec2 uv, float scale) {
  float time = czm_frameNumber * speed / 1000.0;
  float w = smoothstep(1.0, 0.0, -uv.y * (scale / 10.0));
  if(w < 0.1)
    return 0.0;
  uv += time / scale;
  uv.y += time * 2.0 / scale;
  uv.x += sin(uv.y + time * 0.5) / scale;
  uv *= scale;

  vec2 s = floor(uv), f = fract(uv), p;
  float k = 3.0, d;
  p = 0.5 + 0.35 * sin(11.0 * fract(sin((s + p + scale) * mat2(7, 3, 6, 5)) * 5.0)) - f;
  d = length(p);
  k = min(d, k);
  k = smoothstep(0.0, k, sin(f.x + f.y) * 0.01);
  return k * w;
}

void main(void) {
  vec2 resolution = czm_viewport.zw;
  vec2 uv = (gl_FragCoord.xy * 2. - resolution.xy) / min(resolution.x, resolution.y);

  float c = 0.0;
  c += snow(uv, 15.);
  c += snow(uv, 10.);
  c += snow(uv, 9.);
  c += snow(uv, 8.);
  c += snow(uv, 7.);
  c += snow(uv, 6.);
  c += snow(uv, 5.);
  c += snow(uv, 4.);

  vec3 finalColor = (vec3(c)); //屏幕上雪的颜色

  out_FragColor = mix(texture(colorTexture, v_textureCoordinates), vec4(finalColor, 1.0), 0.5);  //将雪和三维场景融合

}
`;class SnowEffect extends BaseEffect{get speed(){var e;return(e=this._postProcessStage)===null||e===void 0?void 0:e.uniforms.speed}set speed(e){const t=_0x5e32ae;this._postProcessStage&&(this._postProcessStage.uniforms[t(2613)]=e)}[_0x5e32ae(3118)](){const e={_0x49d829:3798},t=_0x5e32ae;this[t(2976)]=new Cesium__namespace.PostProcessStage({fragmentShader:SnowShader,uniforms:{speed:this[t(e._0x49d829)][t(2613)]??10},enabled:this.enabled})}}register("snow",SnowEffect);var SnowCoverFS=_0x5e32ae(2883);class SnowCoverEffect extends BaseEffect{constructor(e={}){const t=_0x5e32ae;super(e),this.maxHeight=e[t(2298)]??9e3}get alpha(){const e={_0x2a9f2a:2976,_0x5056e2:1202},t=_0x5e32ae;if(this[t(e._0x2a9f2a)]){var i,s;return(i=this._postProcessStage)===null||i===void 0||(s=i.uniforms)===null||s===void 0?void 0:s[t(e._0x5056e2)]}if(this._uniforms){var n;return(n=this._uniforms)===null||n===void 0?void 0:n.alpha.value}}set alpha(e){const t={_0x399291:2221},i=_0x5e32ae;this._postProcessStage&&(this._postProcessStage[i(t._0x399291)][i(1202)]=e),this[i(1070)]&&(this[i(1070)].alpha.value=e)}[_0x5e32ae(751)](e){const t={_0x54c9ad:1070},i=_0x5e32ae;this._postProcessStage&&(this._postProcessStage.enabled=e),this[i(t._0x54c9ad)]&&(this._uniforms.enabled.value=e)}[_0x5e32ae(3118)](){const e={_0xe2cb28:3618,_0xf0a301:968},t=_0x5e32ae;this[t(3798)].layer?this._bindToLayer(this.options.layer):this._postProcessStage=new Cesium__namespace.PostProcessStage({name:this[t(e._0xe2cb28)],fragmentShader:SnowCoverFS,uniforms:{alpha:this.options.alpha??1},enabled:this[t(e._0xf0a301)]})}[_0x5e32ae(4158)](){const e={_0x4dbf9f:2792,_0x1aca1b:3738},t=_0x5e32ae;this._map.scene[t(e._0x4dbf9f)].changed.addEventListener(this[t(e._0x1aca1b)],this)}_removedHook(){const e={_0xaf03ab:1890,_0x25f20f:2792},t=_0x5e32ae;this[t(e._0xaf03ab)].scene[t(e._0x25f20f)].changed.removeEventListener(this.camera_changedHandler,this)}[_0x5e32ae(3738)](e){const t={_0x595703:1070,_0x5a6e0f:3427,_0x4244bd:2976},i=_0x5e32ae;this._map[i(2792)][i(2868)].height<this.maxHeight?(this._postProcessStage&&(this._postProcessStage.enabled=this.enabled),this._uniforms&&(this[i(t._0x595703)].enabled[i(t._0x5a6e0f)]=this.enabled)):(this._postProcessStage&&(this[i(t._0x4244bd)].enabled=![]),this._uniforms&&(this._uniforms.enabled.value=![]))}_bindToLayer(e){const t={_0x24eab0:4107,_0x11da6c:968,_0xc8eb35:2816,_0x127773:4107,_0x5e21f6:642},i=_0x5e32ae;var s;if((s=Cesium__namespace[i(t._0x24eab0)])!==null&&s!==void 0&&s.getCacheOrAdd)if(this[i(t._0x11da6c)]){const n=new Cesium__namespace.CustomShader({lightingModel:Cesium__namespace[i(778)][i(830)],uniforms:{alpha:{value:1,type:Cesium__namespace[i(2671)][i(t._0xc8eb35)]},enabled:{value:!![],type:Cesium__namespace.UniformType.BOOL}},fragmentShaderText:`
        #extension GL_OES_standard_derivatives : enable
        void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material){
          if(enabled){
            vec3 positionEC = fsInput.attributes.positionEC;
            vec4 positionWC = normalize(czm_inverseView * vec4(positionEC, 1.0));

            vec3 dx = dFdx(fsInput.attributes.positionEC);
            vec3 dy = dFdy(fsInput.attributes.positionEC);
            vec3 nor = normalize(cross(dx, dy));
            vec3 normalWC = normalize(czm_inverseViewRotation * nor);
            float dotNumWC = dot(positionWC.xyz, normalWC);
            if(dotNumWC <= 0.2) {
              material.diffuse = mix(material.diffuse, vec3(1.0), alpha*0.2);
            } else {
              material.diffuse = mix(material.diffuse, vec3(1.0), dotNumWC*alpha);
            }
          }
        }`});this[i(1070)]=n.uniforms;const o=Cesium__namespace.Mars3DEx.getCacheOrAdd(e.id);o.snowCover=n}else{delete this._uniforms;const n=Cesium__namespace[i(t._0x127773)][i(3744)](e.id);n&&delete n[i(t._0x5e21f6)]}}}register("snowCover",SnowCoverEffect);var InvertedSceneFS=`#extension GL_OES_standard_derivatives : enable
uniform sampler2D colorTexture;
uniform sampler2D depthTexture;
in vec2 v_textureCoordinates;
vec4 toEye(in vec2 uv, in float depth) {
  vec2 xy = vec2((uv.x * 2.0 - 1.0), (uv.y * 2.0 - 1.0));
  vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);
  posInCamera = posInCamera / posInCamera.w;
  return posInCamera;
}
float getDepth(in vec4 depth) {
  float z_window = czm_unpackDepth(depth);
  z_window = czm_reverseLogDepth(z_window);
  float n_range = czm_depthRange.near;
  float f_range = czm_depthRange.far;
  return (2.0 * z_window - n_range - f_range) / (f_range - n_range);
}
vec3 guussColor(vec2 uv) {
  vec2 pixelSize = 1.0 / czm_viewport.zw;
  float dx0 = -pixelSize.x;
  float dy0 = -pixelSize.y;
  float dx1 = pixelSize.x;
  float dy1 = pixelSize.y;
  vec4 gc = (texture(colorTexture, uv) +
    texture(colorTexture, uv + vec2(dx0, dy0)) +
    texture(colorTexture, uv + vec2(0.0, dy0)) +
    texture(colorTexture, uv + vec2(dx1, dy0)) +
    texture(colorTexture, uv + vec2(dx0, 0.0)) +
    texture(colorTexture, uv + vec2(dx1, 0.0)) +
    texture(colorTexture, uv + vec2(dx0, dy1)) +
    texture(colorTexture, uv + vec2(0.0, dy1)) +
    texture(colorTexture, uv + vec2(dx1, dy1))) * (1.0 / 9.0);
  return gc.rgb;
}
void main() {
    // mat4 dither = mat4(
    //     0,       0.5,    0.125,  0.625,
    //     0.75,    0.25,   0.875,  0.375,
    //     0.1875,  0.6875, 0.0625, 0.5625,
    //     0.9375,  0.4375, 0.8125, 0.3125
    // );
    // int sampleCoordX = int(mod((gl_FragCoord.x * v_textureCoordinates.x),4.0));
    // int sampleCoordY = int(mod((gl_FragCoord.y * v_textureCoordinates.y),4.0));
  float offset = 0.0;

  vec4 color = texture(colorTexture, v_textureCoordinates);
  vec4 currD = texture(depthTexture, v_textureCoordinates);
    // out_FragColor = currD;
    // return;
  if(currD.r >= 1.0) {
    out_FragColor = color;
    return;
  }
  float depth = getDepth(currD);
    // out_FragColor = vec4(depth,0.0,0.0,1.0);
    // return;

  vec4 positionEC = toEye(v_textureCoordinates, depth);
  vec3 dx = dFdx(positionEC.xyz);
  vec3 dy = dFdy(positionEC.xyz);
  vec3 normal = normalize(cross(dx, dy));

  vec4 positionWC = normalize(czm_inverseView * positionEC);
  vec3 normalWC = normalize(czm_inverseViewRotation * normal);
  float fotNumWC = dot(positionWC.xyz, normalWC);
  if(fotNumWC <= 0.5) {
    out_FragColor = color;
    return;
  }

    // float dotNum = dot(normal,vec3(0.0,1.0,0.0));
    // out_FragColor = mix(color,vec4(1.0),dotNum*0.8);
    // return;

  vec3 viewDir = normalize(positionEC.xyz);
  vec3 reflectDir = reflect(viewDir, normal);
    // vec3 viewReflectDir = czm_viewRotation * reflectDir;
  vec3 viewReflectDir = reflectDir;

  float step = 0.05;
  int stepNum = int(20.0 / step);
  vec3 pos;
  vec3 albedo;
  bool jd = false;
  for(float i = 1.0; i <= 400.0; i+=1.0) {
    float delta = step * i + offset;
    pos = positionEC.xyz + viewReflectDir * delta;
    float d = -pos.z;

    vec4 tmp = czm_projection * vec4(pos, 1.0);
    vec3 screenPos = tmp.xyz / tmp.w;
    vec2 uv = vec2(screenPos.x, screenPos.y) * 0.5 + vec2(0.5, 0.5);

    if(uv.x > 0.0 && uv.x < 1.0 && uv.y > 0.0 && uv.y < 1.0) {
      float dd = getDepth(texture(depthTexture, uv));
      vec4 jzc = toEye(uv, dd);
      dd = -jzc.z;
      if(d > dd) {
        if(abs(abs(d) - abs(dd)) <= step) {
          jd = true;
                    // albedo = texture(colorTexture, uv).rgb;
          albedo = guussColor(uv);
        }
        break;
      }
    }
  }
  if(jd) {
    out_FragColor = vec4(mix(color.xyz, albedo, 0.5), 1.0);
  } else {
    out_FragColor = color;
  }
}
`;class InvertedEffect extends BaseEffect{_mountedHook(){const e=_0x5e32ae;this._postProcessStage=new Cesium__namespace[e(3920)]({fragmentShader:InvertedSceneFS,enabled:this.enabled})}}register("inverted",InvertedEffect);class NightVisionEffect extends BaseEffect{[_0x5e32ae(3118)](){const e=_0x5e32ae;this[e(2976)]=Cesium__namespace.PostProcessStageLibrary.createNightVisionStage()}}register("nightVision",NightVisionEffect);class BloomEffect extends BaseEffect{get[_0x5e32ae(3859)](){const e={_0x27b984:2976},t=_0x5e32ae;var i;return(i=this[t(e._0x27b984)])===null||i===void 0?void 0:i.uniforms.contrast}set[_0x5e32ae(3859)](e){const t={_0x1cfc72:2976},i=_0x5e32ae;this._postProcessStage&&(this[i(t._0x1cfc72)][i(2221)].contrast=e)}get brightness(){const e={_0x2a3bab:2976,_0x5808e0:2221},t=_0x5e32ae;var i;return(i=this[t(e._0x2a3bab)])===null||i===void 0?void 0:i[t(e._0x5808e0)].brightness}set[_0x5e32ae(1310)](e){const t={_0x4f66af:2976},i=_0x5e32ae;this[i(2976)]&&(this[i(t._0x4f66af)].uniforms[i(1310)]=e)}get delta(){const e={_0x3a5f87:2221},t=_0x5e32ae;var i;return(i=this._postProcessStage)===null||i===void 0?void 0:i[t(e._0x3a5f87)][t(2694)]}set delta(e){const t=_0x5e32ae;this._postProcessStage&&(this[t(2976)].uniforms.delta=e)}get sigma(){const e=_0x5e32ae;var t;return(t=this._postProcessStage)===null||t===void 0?void 0:t[e(2221)].sigma}set[_0x5e32ae(4273)](e){const t={_0x2d340e:2976},i=_0x5e32ae;this[i(t._0x2d340e)]&&(this[i(2976)].uniforms.sigma=e)}get stepSize(){const e={_0x268a56:3323},t=_0x5e32ae;var i;return(i=this._postProcessStage)===null||i===void 0?void 0:i[t(2221)][t(e._0x268a56)]}set stepSize(e){this._postProcessStage&&(this._postProcessStage.uniforms.stepSize=e)}_mountedHook(){const e={_0xa93c8a:2221,_0x26582d:3798},t=_0x5e32ae;this[t(2976)]=this._map.scene.postProcessStages.bloom,this._postProcessStage.uniforms[t(1278)]=![],this._postProcessStage.uniforms.contrast=this.options.contrast??128,this._postProcessStage.uniforms.brightness=this[t(3798)].brightness??-.3,this._postProcessStage[t(e._0xa93c8a)].delta=this[t(3798)].delta??1,this[t(2976)][t(2221)].sigma=this[t(3798)].sigma??3.78,this._postProcessStage[t(e._0xa93c8a)].stepSize=this[t(e._0x26582d)].stepSize??5}_addedBaseHook(e){const t={_0x34d536:2976},i=_0x5e32ae;this[i(t._0x34d536)].enabled=this.enabled}[_0x5e32ae(2509)](){this._postProcessStage.enabled=![]}}register(_0x5e32ae(1381),BloomEffect);class BrightnessEffect extends BaseEffect{get brightness(){var e;return(e=this._postProcessStage)===null||e===void 0?void 0:e.uniforms.brightness}set brightness(e){const t={_0x3fbfd6:2976,_0x2b3cee:2221},i=_0x5e32ae;this._postProcessStage&&(this[i(t._0x3fbfd6)][i(t._0x2b3cee)].brightness=e)}_mountedHook(){const e={_0x268b58:3798},t=_0x5e32ae;this._postProcessStage=Cesium__namespace.PostProcessStageLibrary.createBrightnessStage(),this._postProcessStage.uniforms[t(1310)]=this[t(e._0x268b58)].brightness??2}}register("brightness",BrightnessEffect);class BlackAndWhiteEffect extends BaseEffect{get[_0x5e32ae(2142)](){const e=_0x5e32ae;var t;return(t=this[e(2976)])===null||t===void 0?void 0:t.uniforms[e(2142)]}set[_0x5e32ae(2142)](e){const t={_0x93190b:2976},i=_0x5e32ae;this._postProcessStage&&(this[i(t._0x93190b)].uniforms.gradations=e)}_mountedHook(){const e={_0x5c9b27:2976,_0x364dcf:738,_0xf75f04:2221,_0x5b2055:2142},t=_0x5e32ae;this[t(e._0x5c9b27)]=Cesium__namespace[t(e._0x364dcf)].createBlackAndWhiteStage(),this._postProcessStage[t(e._0xf75f04)].gradations=this[t(3798)][t(e._0x5b2055)]??4}}register("blackAndWhite",BlackAndWhiteEffect);var MosaicShader=`uniform sampler2D colorTexture;
in vec2 v_textureCoordinates;
const int KERNEL_WIDTH = 16;
void main(void) {
  vec2 step = 1.0 / czm_viewport.zw;
  vec2 integralPos = v_textureCoordinates - mod(v_textureCoordinates, 8.0 * step);
  vec3 averageValue = vec3(0.0);
  for(int i = 0; i < KERNEL_WIDTH; i++) {
    for(int j = 0; j < KERNEL_WIDTH; j++) {
      averageValue += texture(colorTexture, integralPos + step * vec2(i, j)).rgb;
    }
  }
  averageValue /= float(KERNEL_WIDTH * KERNEL_WIDTH);
  out_FragColor = vec4(averageValue, 1.0);
}
`;class MosaicEffect extends BaseEffect{_mountedHook(){const e={_0x3d23ce:3920},t=_0x5e32ae;this[t(2976)]=new Cesium__namespace[t(e._0x3d23ce)]({fragmentShader:MosaicShader,enabled:this.enabled})}}register("mosaic",MosaicEffect);class DepthOfFieldEffect extends BaseEffect{get focalDistance(){const e=_0x5e32ae;var t;return(t=this[e(2976)])===null||t===void 0?void 0:t.uniforms.focalDistance}set focalDistance(e){this._postProcessStage&&(this._postProcessStage.uniforms.focalDistance=e)}get delta(){var e;return(e=this._postProcessStage)===null||e===void 0?void 0:e.uniforms.delta}set[_0x5e32ae(2694)](e){const t=_0x5e32ae;this[t(2976)]&&(this[t(2976)][t(2221)].delta=e)}get sigma(){var e;return(e=this._postProcessStage)===null||e===void 0?void 0:e.uniforms.sigma}set sigma(e){const t=_0x5e32ae;this._postProcessStage&&(this[t(2976)][t(2221)].sigma=e)}get[_0x5e32ae(3323)](){var e;return(e=this._postProcessStage)===null||e===void 0?void 0:e.uniforms.stepSize}set[_0x5e32ae(3323)](e){const t={_0x4e21d0:2976},i=_0x5e32ae;this[i(t._0x4e21d0)]&&(this[i(t._0x4e21d0)].uniforms.stepSize=e)}[_0x5e32ae(3118)](){const e={_0x1914d4:738,_0x4bf9c8:593,_0x55a19c:2221},t=_0x5e32ae;this._postProcessStage=Cesium__namespace[t(e._0x1914d4)][t(e._0x4bf9c8)](),this._postProcessStage[t(e._0x55a19c)][t(2348)]=this.options.focalDistance??87,this._postProcessStage.uniforms.delta=this.options.delta??1,this._postProcessStage.uniforms.sigma=this.options.sigma??3.78,this._postProcessStage.uniforms.stepSize=this.options[t(3323)]??2.46}}register("depthOfField",DepthOfFieldEffect);const packing_glsl=`
vec3 packNormalToRGB(const in vec3 normal) {
  return normalize(normal) * 0.5 + 0.5;
}

vec3 unpackRGBToNormal(const in vec3 rgb) {
  return 2.0 * rgb.xyz - 1.0;
}

const float PackUpscale = 256. / 255.;
const float UnpackDownscale = 255. / 256.;

const vec3 PackFactors = vec3(256. * 256. * 256., 256. * 256., 256.);
const vec4 UnpackFactors = UnpackDownscale / vec4(PackFactors, 1.);

const float ShiftRight8 = 1. / 256.;

vec4 packDepthToRGBA(const in float v) {
  vec4 r = vec4(fract(v * PackFactors), v);
  r.yzw -= r.xyz * ShiftRight8;
  return r * PackUpscale;
}

float unpackRGBAToDepth(const in vec4 v) {
  return dot(v, UnpackFactors);
}

vec4 pack2HalfToRGBA(vec2 v) {
  vec4 r = vec4(v.x, fract(v.x * 255.0), v.y, fract(v.y * 255.0));
  return vec4(r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half(vec4 v) {
  return vec2(v.x + (v.y / 255.0), v.z + (v.w / 255.0));
}

float viewZToOrthographicDepth(const in float viewZ, const in float near, const in float far) {
  return (viewZ + near) / (near - far);
}
float orthographicDepthToViewZ(const in float linearClipZ, const in float near, const in float far) {
  return linearClipZ * (near - far) - near;
}

float viewZToPerspectiveDepth(const in float viewZ, const in float near, const in float far) {
  return ((near + viewZ) * far) / ((far - near) * viewZ);
}
float perspectiveDepthToViewZ(const in float invClipZ, const in float near, const in float far) {
  return (near * far) / ((far - near) * invClipZ - far);
}
`,cmz_selected_glsl=`
#define CZM_SELECTED_FEATURE
uniform sampler2D czm_selectedIdTexture;
uniform float czm_selectedIdTextureStep;
uniform float czm_selectedIdTextureWidth;

bool czm_selected(vec4 id) {
  bool selected = false;
  for(int i = 0; i < 1024000; i++) {
    vec4 selectedId = texture(czm_selectedIdTexture, vec2((float(i) + 0.5) * czm_selectedIdTextureStep, 0.5));
    if(all(equal(id, selectedId))) {
      return true;
    }
    if(float(i) > czm_selectedIdTextureWidth)
      break;
  }
  return false;
}

`;function CesiumRenderPass(r){const e={_0x248dac:974,_0x427baa:2315},t={_0x3a38ef:2792,_0x3c277f:1204,_0x2d0fe7:3215},i={_0x143bdb:2796,_0x597645:4097,_0x4ceb43:995,_0x5796f8:2661},s={_0x3452e8:4181,_0x5b1003:582},n={_0x53d0d8:1516,_0x3e93f5:1516},o={_0x5a9a46:2401,_0x481c9a:3754},c={_0x11588a:3583,_0x4dea7f:2856},_={_0x2e1937:1344,_0x51dc10:515,_0x15f1a5:2903},l={_0x32b30c:2300,_0x5d9def:515},h={_0x1fe95a:515,_0x551d78:2104,_0x5b00ad:3114,_0x34a48e:3489,_0x5d3522:3023,_0x6f8ecc:2818,_0x32bead:3176,_0x368d7d:3402,_0xe52fd6:1534,_0xd59c18:3472,_0x2ff63c:1620,_0x3b5024:3489,_0x205cf6:1834},f=_0x5e32ae;let{name:m,vertexShader:g,fragmentShader:C,uniforms:E,renderStateProcess:P,beforeUpdate:w,renderType:M,textureScale:T,pixelFormat:L,pixelDatatype:R,sampler:D,shaderRedefine:N,overrideViewport:k}=r;this._selectedIdTexture=null;const B="renderPass_"+m.replace(/[\.\\\/\-]/g,"_"),$="czm_non_"+B+f(3909),H="czm_"+B+"_main",W=f(e._0x248dac)+B,J=B+"Command";let z=null,fe=null,q=null,te=null,ie;const xe=this,oe=new Cesium__namespace.ClearCommand({color:Cesium__namespace.Color[f(e._0x427baa)],depth:1});let de=new Cesium__namespace.BoundingRectangle;if(k&&Cesium__namespace.BoundingRectangle.clone(k,de),N=N||f(4084),M=M||"all",T=T||1,T<0||T>8)throw new Cesium__namespace.DeveloperError("CesiumRenderPass：textureScale必须大于0小于等于8");function X(Ee,Oe,le,Y){const j=f;let U=Ee.shaderCache.getDerivedShaderProgram(Oe,B);if(!Cesium__namespace[j(h._0x1fe95a)](U)){const re=Oe[j(3694)];let ce=Oe.fragmentShaderSource,be=Oe[j(h._0x551d78)];const Ae=Oe._vertexShaderText;let Pe=ce.sources,Je=Pe.length,Ue=!!te&&Q(),qe=cmz_selected_glsl;const ct=/texture\s?\(\s?model_pickTexture\s?,\s?selectedFeature.st\s?\)/.test(le);Y==="varying"&&!ct?qe+=`
in float me_isSelected;
bool czm_selected(){
    bool isSelected= me_isSelected>0.0000001;
    if(!isSelected){
        isSelected= czm_selected(`+le+`);
    }
    return isSelected;
}
    `:qe+=`
bool czm_selected(){
    return czm_selected(`+le+`);
}`;const vt=cmz_selected_glsl+(`
out float me_isSelected;
bool czm_selected(){
    return czm_selected(`+le+j(h._0x5b00ad));let Mt=![],pt=![];if(/in\s?vec3\s?normal\s?;/.test(Ae)||/\n\s?vec3\s?normal\s?;/.test(Ae)?Mt=!![]:/out\s?vec3\s?v_normal\s?;/.test(Ae)&&(pt=!![]),C){let Lt=![];for(let Rt=0;Rt<Je;++Rt)if(/vec4\s?packDepthToRGBA\s?\(/[j(617)](Pe[Rt])){Lt=!![];break}const At=(Lt?"":packing_glsl)+(Ue?qe:"")+Cesium__namespace[j(1620)][j(h._0x34a48e)](C,H)+j(h._0x5d3522)+j(h._0x6f8ecc)+(N!=="replace"?"    "+$+`(); 
`:"")+("    "+H+`(); 
`)+j(1834),It=new Array(Je+1);for(let Rt=0;Rt<Je;++Rt)It[Rt]=Cesium__namespace.ShaderSource.replaceMain(Pe[Rt],$);It[Je]=At,Mt?ce.defines[j(3759)](j(h._0x32bead)):pt&&ce.defines[j(3759)]("HAS_V_NORMAL_MARS3D"),ce=new Cesium__namespace.ShaderSource({sources:It,defines:ce.defines})}if(g||C){Pe=be.sources,Je=Pe[j(h._0x368d7d)];let Lt=![];for(let Rt=0;Rt<Je;++Rt)if(/vec4\s?packDepthToRGBA\s?\(/.test(Pe[Rt])){Lt=!![];break}Ue=Ue&&Y===j(h._0xe52fd6)&&!ct,Mt?be.defines.push("HAS_NORMAL_MARS3D"):pt&&be[j(h._0xd59c18)].push("HAS_V_NORMAL_MARS3D");const At=(Lt?"":packing_glsl)+(Ue?vt:"")+Cesium__namespace[j(h._0x2ff63c)][j(h._0x3b5024)](g||"void main(){}",H)+j(h._0x5d3522)+`{ 
`+(N!=="replace"?"    "+$+`(); 
`:"")+(Ue?` me_isSelected = 0.0;
 #ifdef CZM_SELECTED_FEATURE
   me_isSelected=czm_selected()?1.0:0.0;
 #endif
`:"")+("    "+H+`(); 
`)+j(h._0x205cf6),It=new Array(Je+1);for(let Rt=0;Rt<Je;++Rt)It[Rt]=Cesium__namespace.ShaderSource.replaceMain(Pe[Rt],$);It[Je]=At,be=new Cesium__namespace.ShaderSource({sources:It,defines:be.defines})}U=Ee.shaderCache.createDerivedShaderProgram(Oe,B,{vertexShaderSource:be,fragmentShaderSource:ce,attributeLocations:re})}return U}function he(Ee,Oe){const le=f;Ee._renderPassCache=Ee._renderPassCache||{},Ee._renderPassCache[W]=Ee._renderPassCache[W]||{};const Y=Ee[le(l._0x32b30c)][W];let j=Y[Oe.id];if(!Cesium__namespace[le(l._0x5d9def)](j)){const U=Cesium__namespace.RenderState[le(4132)](Oe);typeof P=="function"&&P.call(xe,U),j=Cesium__namespace.RenderState.fromCache(U),Y[Oe.id]=j}return j}function Se(Ee,Oe,le){const Y=f,j=Ee,U=Oe[Y(3090)];let re=Ee[Y(_._0x2e1937)];if(!Cesium__namespace.defined(re))return;U.useLogDepth&&Cesium__namespace.defined(re.logDepth)&&(Ee=re.logDepth.command),re=Ee.derivedCommands;let ce=re.renderPass;!Cesium__namespace[Y(_._0x51dc10)](re[Y(_._0x15f1a5)])&&(ce=re.renderPass={});let be,Ae;if(Cesium__namespace[Y(515)](ce[J])&&(be=ce[J].shaderProgram,Ae=ce[J].renderState),ce[J]=Cesium__namespace.DrawCommand.shallowClone(Ee,ce[J]),!Cesium__namespace.defined(be)||ce.shaderProgramId!==Ee.shaderProgram.id){const Je=Ee.shaderProgram,Ue=j[Y(1934)]=new RegExp("uniform\\s?vec4\\s?"+Ee.pickId,"g")[Y(617)](Je._fragmentShaderText)?"uniform":"varying";ce[J].shaderProgram=X(le,Je,Ee.pickId,Ue),ce[J].renderState=he(Oe,Ee.renderState),ce.shaderProgramId=Ee.shaderProgram.id}else ce[J].shaderProgram=be,ce[J].renderState=Ae;const Pe=ce[J].uniformMap;Be(Pe)}function Te(Ee){return function(){const Oe=_0x5210,le=E[Ee];return typeof le===Oe(1324)?le():le}}function Re(Ee,Oe){return function(){const le=Ee[Oe]();if(Cesium__namespace.defined(le))return le.dimensions}}function Be(Ee){const Oe=f;if(!Ee.__created&&(Ee[Oe(c._0x11588a)]=function(){return te._selectedIdTexture},Ee[Oe(3686)]=function(){var le;return((le=te._selectedIdTexture)===null||le===void 0?void 0:le.width)??0},Ee.czm_selectedIdTextureStep=function(){var le;return(le=te._selectedIdTexture)!==null&&le!==void 0&&le.width?1/te._selectedIdTexture.width:-1},!!E)){Ee.__created=!![];for(const le in E)if(E[Oe(c._0x4dea7f)](le)){typeof E[le]!="function"?Ee[le]=Te(le):Ee[le]=E[le];const Y=Ee[le]();(typeof Y=="string"||Y instanceof Cesium__namespace.Texture||Y instanceof HTMLImageElement||Y instanceof HTMLCanvasElement||Y instanceof HTMLVideoElement)&&(Ee[le+Oe(2418)]=Re(Ee,le))}}}function ze(Ee){const Oe=f,le=Ee._view,Y=le.frustumCommandsList,j=Y.length;let U,re,ce;for(let be=0;be<j;++be){const Ae=j-be-1,Pe=Y[Ae];for(re=0;re<Pe.commands.length;re++){const Je=Pe[Oe(3339)][re];if(ce=Pe.indices[re],!(te&&re===Cesium__namespace[Oe(o._0x5a9a46)][Oe(3817)]))for(U=0;U<ce;++U){const Ue=Je[U];Se(Ue,Ee,Ee[Oe(o._0x481c9a)])}}}}function Ve(){fe&&(fe.destroy(),z.destroy(),z=void 0,fe=void 0),q&&(q.destroy(),q=void 0)}function ye(Ee,Oe,le,Y){const j=f,U=Oe.width,re=Oe.height;fe&&fe.width===U&&fe.height===re&&le===ie||(ie=le,Ve(),fe=new Cesium__namespace.Texture({context:Ee,width:U,height:re,pixelFormat:L??Cesium__namespace.PixelFormat.RGBA,pixelDatatype:R??Cesium__namespace.PixelDatatype.FLOAT,sampler:D??Cesium__namespace[j(1253)][j(n._0x53d0d8)]}),q=new Cesium__namespace.Texture({context:Ee,width:U,height:re,pixelFormat:Cesium__namespace.PixelFormat.DEPTH_COMPONENT,pixelDatatype:Cesium__namespace.PixelDatatype.UNSIGNED_SHORT,sampler:Cesium__namespace.Sampler[j(n._0x3e93f5)]}),z=new Cesium__namespace.Framebuffer({colorTextures:[fe],context:Ee,destroyAttachments:![],depthTexture:q}))}function Fe(Ee){const Oe=f;de=Cesium__namespace.BoundingRectangle.clone(Ee[Oe(803)],de);const le=Object[Oe(2031)]({},Ee[Oe(3215)]);return le.viewport=de,le}function Ce(Ee,Oe){const le=f,Y=Ee._us._frameState,j=Y.camera,U=j._scene,re=U._view;try{if(!g&&!C){const ce=Fe(re);typeof w=="function"&&w.call(xe,U,Oe),ye(Ee,de,U[le(s._0x3452e8)],re[le(s._0x5b1003)]),executeDerivedCommandList(Ee,z,ce)}else{const ce=Fe(re);typeof w=="function"&&w.call(xe,U,Oe),ye(Ee,de,U.hdr,re.sceneFramebuffer),ze(U),executeDerivedCommandList(Ee,z,ce,"renderPass",J,M==="all"||!te||!te._selectedIdTexture?null:me)}}catch{}}function Q(){if(!te)return;const Ee=te.selected||te.parentSelected;if(Ee.length)return Ee}function me(Ee,Oe){const le=f,Y=te&&(te.selected||te.parentSelected);if(!te||!Y||!Y.length)return![];if(!Ee[le(i._0x143bdb)]||Ee._pickIdQualifier!=="uniform")return!![];let j=!![];const U=Ee.owner,re=M===le(i._0x597645);if(U&&U.isObject3D){for(let be=0;be<Y.length;be++)if(Y[be]===U)return re;return!re}const ce=Ee[le(i._0x4ceb43)];if(ce[Ee.pickId]){const be=ce[Ee.pickId]();j=!re;for(let Ae=0;Ae<Y.length;Ae++){const Pe=Y[Ae],Je=Pe.pickId?[Pe[le(2796)]]:Pe.pickIds||Pe._pickIds;for(let Ue=0;Ue<Je.length;Ue++){const qe=Je[Ue];if(qe.color===be||Cesium__namespace.Color[le(i._0x5796f8)](qe.color,be))return re}}}return j}function Ie(Ee){const Oe=f;if(z){const le=Ee._us[Oe(3090)][Oe(t._0x3a38ef)][Oe(1597)][Oe(t._0x3c277f)];oe.framebuffer=z,oe.execute(Ee,le[Oe(t._0x2d0fe7)]),oe.framebuffer=void 0}}function De(Ee){const Oe={_0x23d3f0:3497,_0x2d2cfa:3402},le=f;if(te&&xe[le(3667)]&&(te[le(932)]=xe.prevStageUpdate,xe.prevStageUpdate=null,xe.prevStageExecute=null),te=Ee,!te)return;const Y=te.update;xe.prevStageUpdate=Y,te.update=function(j,U){const re=le;if(Ie(j),Y.call(te,j,U),!!te.enabled)if(!g&&!C)Ce(j,U);else{const ce=te.selected||te[re(Oe._0x23d3f0)];ce&&ce[re(Oe._0x2d2cfa)]&&Ce(j,U)}}}this.update=Ce,this[f(1387)]=Ie,Object.defineProperties(this,{texture:{get(){return fe}},depthTexture:{get(){return q}},stage:{get(){return te},set(Ee){te!==Ee&&De(Ee)}}})}let scratchPerspectiveFrustum,scratchPerspectiveOffCenterFrustum,scratchOrthographicFrustum,scratchOrthographicOffCenterFrustum;function executeDerivedCommand(r,e,t,i,s,n){const o=_0x5e32ae,c=Cesium__namespace[o(515)],_=i._frameState;let l=r.derivedCommands;c(l)&&(_.useLogDepth&&c(l.logDepth)&&(r=l.logDepth.command),l=r[o(1344)],c(l[e])&&(r=l[e][t],r.execute(s,n)))}function executeDerivedCommandList(r,e,t,i,s,n){const o={_0x42d28e:1204,_0x8f5f44:3402,_0x846cb2:2198,_0x2c2399:4116,_0x123686:2801,_0x261d55:4246,_0x409ad1:1876,_0x524296:3817,_0x3d637b:3339,_0x53bd47:4235,_0x485f38:3275},c=_0x5e32ae,{Pass:_,defined:l,PerspectiveFrustum:h,PerspectiveOffCenterFrustum:f,OrthographicFrustum:m,OrthographicOffCenterFrustum:g}=Cesium__namespace;scratchPerspectiveFrustum=scratchPerspectiveFrustum||new h,scratchPerspectiveOffCenterFrustum=scratchPerspectiveOffCenterFrustum||new f,scratchOrthographicFrustum=scratchOrthographicFrustum||new m,scratchOrthographicOffCenterFrustum=scratchOrthographicOffCenterFrustum||new g;const C=r._us,E=C._frameState,P=E[c(2792)],w=P._scene,M=w[c(o._0x42d28e)],T=M[c(1649)],L=T[c(o._0x8f5f44)],R=w[c(o._0x846cb2)],D=R[c(o._0x2c2399)],N=w._view.globeTranslucencyFramebuffer;let k;l(P.frustum.fov)?k=P.frustum[c(4246)](scratchPerspectiveFrustum):l(P.frustum.infiniteProjectionMatrix)?k=P.frustum.clone(scratchPerspectiveOffCenterFrustum):l(P.frustum.width)?k=P[c(o._0x123686)][c(o._0x261d55)](scratchOrthographicFrustum):k=P.frustum.clone(scratchOrthographicOffCenterFrustum);function B(J,z,fe,q){if(n?n(J,z):!![])try{i&&s?executeDerivedCommand(J,i,s,z,fe,q):J.execute(fe,q)}catch{}}let $,H,W;for(let J=0;J<L;++J){const z=L-J-1,fe=T[z],q=t.framebuffer;if(t[c(3275)]=e,k.near=z!==0?fe.near*w.opaqueFrustumNearOffset:fe.near,k[c(o._0x409ad1)]=fe.far,C[c(3017)](k),C.updatePass(_[c(o._0x524296)]),W=fe.commands[_.GLOBE],H=fe.indices[_[c(3817)]],D)R.executeGlobeCommands(fe,B,N,w,t);else for($=0;$<H;++$)B(W[$],w,r,t);for(C[c(4242)](_[c(4235)]),W=fe[c(o._0x3d637b)][_[c(o._0x53bd47)]],H=fe.indices[_[c(4235)]],$=0;$<H;++$)B(W[$],w,r,t);for(C.updatePass(_.OPAQUE),W=fe[c(o._0x3d637b)][_.OPAQUE],H=fe.indices[_.OPAQUE],$=0;$<H;++$)B(W[$],w,r,t);for(C[c(4242)](_.TRANSLUCENT),W=fe.commands[_.TRANSLUCENT],H=fe.indices[_[c(587)]],$=0;$<H;++$)B(W[$],w,r,t);t[c(o._0x485f38)]=q}}class OutlineEffect extends BaseEffect{constructor(e={}){super(e),this._setOptionsHook(e)}get[_0x5e32ae(4097)](){const e=_0x5e32ae;var t;return(t=this._postProcessStage)===null||t===void 0?void 0:t[e(4097)]}set[_0x5e32ae(4097)](e){const t={_0x32edb7:3845,_0x11906e:581,_0x186e2d:581,_0x4e4430:2976,_0x2d49c8:3402},i=_0x5e32ae;let s=[];e&&(Array[i(t._0x32edb7)](e)?s=this[i(t._0x186e2d)](e):s=this[i(t._0x11906e)]([e])),this._postProcessStage&&(this._postProcessStage.selected=s,this[i(t._0x4e4430)].enabled=this[i(968)]&&this.selected[i(t._0x2d49c8)]>0)}get[_0x5e32ae(2092)](){return this._color}set[_0x5e32ae(2092)](e){const t=_0x5e32ae;this._color=getCesiumColor(e),this._useSingleColor=!this[t(2802)]||this._color[t(2661)](this._colorHidden)}get colorHidden(){const e={_0x23deb3:2802},t=_0x5e32ae;return Cesium__namespace.defined(this[t(2802)])?this[t(e._0x23deb3)]:this._color}set colorHidden(e){const t=_0x5e32ae;this[t(2802)]=getCesiumColor(e),this._useSingleColor=!this[t(2802)]||this._color.equals(this._colorHidden)}get planeAngle(){return this._planeAngle}set planeAngle(e){this._planeAngle=e,this._planeAngleRadians=Cesium__namespace.Math.toRadians(e)}_enabledHook(e){const t=_0x5e32ae;this._postProcessStage&&(this._postProcessStage.enabled=e&&this[t(4097)].length>0)}_setOptionsHook(e,t){const i={_0x424916:2200,_0x3dfd7b:4282,_0x19c785:3234,_0x3fb2dd:1436,_0x5f568e:3229},s=_0x5e32ae;this.eventType=e.eventType??EventType.click,this.width=e.width??6,this.color=getCesiumColor(e.color,Cesium__namespace[s(i._0x424916)].WHITE),this.colorHidden=e.colorHidden,this.showPlane=e[s(i._0x3dfd7b)]??![],this.planeAngle=e[s(i._0x19c785)]??10,this[s(1138)]=e.glow??![],this[s(i._0x3fb2dd)]=e.glowPower??1,this[s(i._0x5f568e)]=e.glowStrength??3,this[s(2659)]=e.onlySelected??![]}_mountedHook(){const e={_0x135dd3:1036,_0x5e7d78:3920,_0x5e2a81:3763,_0x16c35c:3920,_0x53f46f:3173,_0x3a58d1:3605},t={_0x13d02f:1454},i={_0x56264a:2092},s=_0x5e32ae,n=this,o=this[s(3605)]||this.type||"",c=new CesiumRenderPass({name:o+"Pass",vertexShader:`
          out vec3 vOutlineNormal_mars3d;
          void main(){
              #ifdef HAS_NORMAL_MARS3D
                  vOutlineNormal_mars3d = normal;
              #else
                  #ifdef HAS_V_NORMAL_MARS3D
                      vOutlineNormal_mars3d = v_normal;
                  #else
                      vOutlineNormal_mars3d=vec3(0.0);
                  #endif
              #endif
          } `,fragmentShader:`
        in vec3 vOutlineNormal_mars3d;
        void main(){
            #ifdef CZM_SELECTED_FEATURE
            if(!czm_selected())discard;
            #endif

            if(length(vOutlineNormal_mars3d)>0.0)
              out_FragColor=vec4( vOutlineNormal_mars3d ,out_FragColor.a);
        }`,sampler:new Cesium__namespace[s(1253)]({minificationFilter:Cesium__namespace[s(e._0x135dd3)].LINEAR,magnificationFilter:Cesium__namespace[s(2346)].LINEAR})}),_=new Cesium__namespace[s(e._0x5e7d78)]({name:o+s(e._0x5e2a81),uniforms:{outlineWidth(){return n.width},devicePixelRatio,thresholdAngle:function(){return n._planeAngleRadians},useSingleColor:function(){return n._useSingleColor},showOutlineOnly:function(){return!n.showPlane},visibleEdgeColor:function(){return n.color},hiddenEdgeColor:function(){return n.colorHidden},maskTexture(){return c.texture},maskDepthTexture(){return c.depthTexture}},fragmentShader:`
    uniform sampler2D colorTexture;
    uniform vec2 colorTextureDimensions;
    uniform sampler2D depthTexture;

    uniform sampler2D maskTexture;
    uniform sampler2D maskDepthTexture;
    uniform float thresholdAngle;
    uniform bool showOutlineOnly;

    uniform float outlineWidth;
    uniform float devicePixelRatio;
    uniform vec3 visibleEdgeColor;
    uniform vec3 hiddenEdgeColor;
    uniform bool useSingleColor;

    in vec2 v_textureCoordinates;

    float lengthSq(vec3 v){
        return v.x * v.x + v.y * v.y + v.z * v.z;
    }
    float normal_angleTo(vec3 a,vec3 b){
        float denominator =  sqrt(  lengthSq(a) * lengthSq(b) );
        if ( denominator == 0. ) return czm_pi / 2.;
        float theta = dot(a, b ) / denominator;
        // clamp, to handle numerical problems
        return  acos(  clamp( theta, - 1., 1. ) );
    }

    float compareNormal(vec4 n1,vec4 n2){
          if(  abs (  normal_angleTo( n1.xyz , n2.xyz ) ) < thresholdAngle ){
              return 0.;
          }else{
              return 1.;
          }
    }

    float compareDepth(const in vec2 uv){
        float maskDepth = czm_readDepth( maskDepthTexture, uv);
        float nonDepth = czm_readDepth( depthTexture, uv);
        return maskDepth>nonDepth?1.:0.;
    }

    void main(){

        vec2 vUv=v_textureCoordinates;

        // vec4 color = texture( colorTexture, vUv);
        vec4 maskColor = texture( maskTexture, vUv);

        if( maskColor.a < 0.0001){
            // out_FragColor =color;
            discard;
            return;
        }

        vec2 invSize = outlineWidth / colorTextureDimensions;
        vec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);

        vec4 c1 = texture( maskTexture, vUv + uvOffset.xy);
        vec4 c2 = texture( maskTexture, vUv - uvOffset.xy);
        vec4 c3 = texture( maskTexture, vUv + uvOffset.yw);
        vec4 c4 = texture( maskTexture, vUv - uvOffset.yw);

        float d;
        if(showOutlineOnly){
            float diff1 = (c1.a - c2.a)*0.5;
            float diff2 = (c3.a - c4.a)*0.5;
            d = length( vec2(diff1, diff2) );
        }
        else{
            float diff1 = compareNormal(c1,c2)*0.5;
            float diff2 = compareNormal(c3,c4)*0.5;
            d = length( vec2(diff1, diff2) );
        }

        if(useSingleColor==false){
            float dp1 = compareDepth( vUv + uvOffset.xy);
            float dp2 = compareDepth( vUv - uvOffset.xy);
            float dp3 = compareDepth( vUv + uvOffset.yw);
            float dp4 = compareDepth( vUv - uvOffset.yw);

            float a1 = min(dp1, dp2);
            float a2 = min(dp3, dp4);
            float visibilityFactor = min(a1, a2);
            vec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;

            // out_FragColor =color+ vec4( edgeColor , 1. ) * vec4(d);
            out_FragColor = vec4( edgeColor , 1. ) * vec4(d);
        }else{
            // out_FragColor =color+ vec4( visibleEdgeColor , 1. ) * vec4(d);
            out_FragColor =  vec4( visibleEdgeColor , 1. ) * vec4(d);
        }
    }
    `});c.stage=_;const l=createBlurStage(o+s(2618),4,1,.75),h=createBlurStage(o+"Blur2",4,4,.5),f=new Cesium__namespace.PostProcessStageComposite({name:o+"BlurComposite",stages:[_,l,h],inputPreviousStageTexture:!![]}),m=new Cesium__namespace[s(e._0x16c35c)]({name:o+s(e._0x53f46f),uniforms:{showGlow:function(){return n[s(1138)]},edgeGlow:function(){return n.glowPower},edgeStrength:function(){return n.glowStrength},edgeOnly(){return n.onlySelected},maskTexture(){return c.texture},lineTexture:_[s(e._0x3a58d1)],edgeTexture1:l.name,edgeTexture2:f.name},fragmentShader:`
    uniform sampler2D colorTexture;
    uniform sampler2D edgeTexture1;
    uniform sampler2D edgeTexture2;
    uniform sampler2D lineTexture;
    uniform sampler2D maskTexture;
    uniform bool showGlow;
    uniform float edgeGlow;
    uniform bool edgeOnly;
    uniform float edgeStrength;

    in vec2 v_textureCoordinates;
    void main(){

        vec2 vUv =v_textureCoordinates;
        vec4 edgeColor=texture( lineTexture, vUv);
        vec4 color=texture( colorTexture, vUv);
        float opacity=1.;
        if(edgeOnly){
            vec4 maskColor=texture( maskTexture, vUv);
            opacity=1.-maskColor.a;
            out_FragColor = maskColor;
            return;
        }

        if(showGlow){
            vec4 edgeValue1 = texture(edgeTexture1, vUv);
            vec4 edgeValue2 = texture(edgeTexture2, vUv);
            vec4 glowColor = edgeValue1 + edgeValue2 * edgeGlow;
            out_FragColor = opacity * color + edgeColor + edgeStrength * (1. - edgeColor.r) * glowColor;
        }
        else{
            out_FragColor = opacity * color + edgeColor;
        }
    }
    `}),g=new Cesium__namespace.PostProcessStageComposite({name:o+"Composite",stages:[f,m],inputPreviousStageTexture:![]});function C(E){const P={_0x51cfa0:4322},w={_0x35da38:2659};Object.defineProperties(E,{showGlow:{get(){return n.glow},set(M){n.glow=M}},edgeGlow:{get(){return n.glowPower},set(M){const T=_0x5210;n[T(1436)]=M}},edgeStrength:{get(){return n.glowStrength},set(M){n.glowStrength=M}},thresholdAngle:{get(){return n._planeAngleRadians},set(M){n._planeAngleRadians=M}},showOutlineOnly:{get(){return!n.showPlane},set(M){n.showPlane=!M}},edgeOnly:{get(){return n[_0x5210(2659)]},set(M){const T=_0x5210;n[T(w._0x35da38)]=M}},useSingleColor:{get(){return n[_0x5210(P._0x51cfa0)]}},outlineWidth:{get(){return n.width},set(M){n.width=M}},visibleEdgeColor:{get(){return n[_0x5210(i._0x56264a)]},set(M){const T=_0x5210;n[T(2092)]=M}},hiddenEdgeColor:{get(){return n[_0x5210(t._0x13d02f)]},set(M){n.colorHidden=M}}})}C(g),g._uniforms=g._uniforms||{},C(g._uniforms),g[s(4097)]=[],g.enabled=![],this._postProcessStage=g}[_0x5e32ae(4158)](){this[_0x5e32ae(3806)]&&this._map.on(this.eventType,this._map_clickHandler,this)}[_0x5e32ae(2442)](){const e={_0x227f1f:3806},t=_0x5e32ae;this[t(e._0x227f1f)]&&this._map.off(this.eventType,this[t(2254)],this)}[_0x5e32ae(2254)](e){const t={_0x1dfefe:3402,_0x1c48bd:1849},i=_0x5e32ae,s=this.options.objectsToExclude;if(s)for(let o=0,c=s[i(t._0x1dfefe)];o<c;o++){const _=s[o];if(e[i(2118)]===_||e.layer===_)return}const n=this._map.mouseEvent[i(t._0x1c48bd)](e);this.selected=n}}register("outline",OutlineEffect);function createBlurStage(r,e,t,i){const s={_0x2e1629:3552,_0xf5b218:2497,_0x2d04b0:3931},n=_0x5e32ae,o={fragmentShader:`
    #define MAX_RADIUS `+e+`
    in vec2 v_textureCoordinates;
    uniform sampler2D colorTexture;
    uniform vec2 colorTextureDimensions;
    uniform vec2 direction;
    uniform float kernelRadius;

    float gaussianPdf(in float x, in float sigma) {
        return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
    }
    void main() {
        vec2 vUv=v_textureCoordinates;
        vec2 invSize = 1.0 / colorTextureDimensions;
        float weightSum = gaussianPdf(0.0, kernelRadius);
        vec4 diffuseSum = texture( colorTexture, vUv) * weightSum;
        vec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);
        vec2 uvOffset = delta;
        for( int i = 1; i <= MAX_RADIUS; i ++ ) {
            float w = gaussianPdf(uvOffset.x, kernelRadius);
            vec4 sample1 = texture( colorTexture, vUv + uvOffset);
            vec4 sample2 = texture( colorTexture, vUv - uvOffset);
            diffuseSum += ((sample1 + sample2) * w);
            weightSum += (2.0 * w);
            uvOffset += delta;
        }
        out_FragColor = diffuseSum/weightSum;
    }`},c=new Cesium__namespace.PostProcessStage({name:r+"_x_direction",fragmentShader:o.fragmentShader,textureScale:i,forcePowerOfTwo:!![],uniforms:{kernelRadius:t,direction:new Cesium__namespace.Cartesian2(1,0)},sampleMode:Cesium__namespace.PostProcessStageSampleMode[n(s._0x2e1629)]}),_=new Cesium__namespace[n(3920)]({name:r+n(4088),fragmentShader:o[n(3316)],textureScale:i,forcePowerOfTwo:!![],uniforms:{kernelRadius:t,direction:new Cesium__namespace[n(s._0xf5b218)](0,1)},sampleMode:Cesium__namespace[n(s._0x2d04b0)][n(s._0x2e1629)]});return new Cesium__namespace.PostProcessStageComposite({name:r,stages:[c,_],inputPreviousStageTexture:!![]})}class BloomTargetEffect extends BaseEffect{constructor(e={}){const t={_0x4818f9:2200,_0x380c97:1948},i=_0x5e32ae;e={contrast:128,brightness:-.3,blurSamples:32,delta:1,sigma:3.78,stepSize:5,ratio:2,threshold:0,smoothWidth:.01,...e},super(e),this.color=getCesiumColor(e[i(2092)],Cesium__namespace[i(t._0x4818f9)].WHITE),this.eventType=e.eventType??EventType[i(t._0x380c97)]}get selected(){const e=_0x5e32ae;var t;return(t=this._postProcessStage)===null||t===void 0?void 0:t[e(4097)]}set[_0x5e32ae(4097)](e){const t={_0x5ceced:581},i=_0x5e32ae;let s=[];e&&(Array.isArray(e)?s=this[i(t._0x5ceced)](e):s=this[i(581)]([e])),this._postProcessStage&&(this._postProcessStage.selected=s,this._postProcessStage.enabled=this[i(968)]&&this.selected.length>0)}_enabledHook(e){const t={_0x38416a:3402},i=_0x5e32ae;this._postProcessStage&&(this._postProcessStage.enabled=e&&this.selected[i(t._0x38416a)]>0)}_mountedHook(){const e={_0x4cbb45:2410,_0x357e18:3030,_0x4ad5c9:2200,_0x3a1acc:1836,_0x3fe826:3920,_0x1a5340:1796,_0x534d36:3605},t={_0x21ea03:1117},i={_0x386bc5:3859},s={_0x1bcd51:4273},n={_0x3dc842:4273},o={_0x4c3ba5:3798,_0x447806:2694},c=_0x5e32ae,_=new Cesium__namespace.PostProcessStage({name:this.name+c(e._0x4cbb45),fragmentShader:c(e._0x357e18),uniforms:{marsColor:Cesium__namespace[c(e._0x4ad5c9)][c(e._0x3a1acc)],marsOpacity:1,smoothWidth:()=>{const w=c;return this.options[w(3911)]},threshold:()=>this.options.threshold}}),l=`
    #define SAMPLES `+this.options[c(4007)]+c(1267),h=new Cesium__namespace[c(e._0x3fe826)]({name:this.name+"blur_x",fragmentShader:l,uniforms:{delta:()=>{const w=c;return this[w(o._0x4c3ba5)][w(o._0x447806)]},sigma:()=>{const w=c;return this[w(3798)][w(n._0x3dc842)]},stepSize:()=>this[c(3798)].stepSize,direction:0},sampleMode:Cesium__namespace.PostProcessStageSampleMode[c(3552)]}),f=new Cesium__namespace.PostProcessStage({name:this[c(3605)]+"blur_y",fragmentShader:l,uniforms:{delta:()=>this.options.delta,sigma:()=>{const w=c;return this.options[w(s._0x1bcd51)]},stepSize:()=>{const w=c;return this.options[w(3323)]},direction:1},sampleMode:Cesium__namespace.PostProcessStageSampleMode[c(3552)]}),m=new Cesium__namespace[c(1796)]({name:this.name+"blur",stages:[h,f]}),g=new Cesium__namespace[c(e._0x1a5340)]({name:this.name+c(785),stages:[_,m],inputPreviousStageTexture:!![]}),C=new Cesium__namespace.PostProcessStage({name:this[c(e._0x534d36)]+c(1937),fragmentShader:c(3612),uniforms:{contrast:()=>{const w=c;return this.options[w(i._0x386bc5)]},brightness:()=>{const w=c;return this.options[w(1310)]}}}),E=new Cesium__namespace.PostProcessStageComposite({name:this.name+"contrast_bias_blur",stages:[C,g]}),P=new Cesium__namespace.PostProcessStage({name:this.name+"generate_composite",fragmentShader:`
      uniform sampler2D colorTexture;
      uniform sampler2D bloomTexture;
      uniform float ratio;
      uniform vec4 color;
      in vec2 v_textureCoordinates;
      void main(void)
      {
        vec4 color1 = texture(colorTexture, v_textureCoordinates);
        vec4 bloom = texture(bloomTexture, v_textureCoordinates);
        bloom *= color ;
        #ifdef CZM_SELECTED_FEATURE
          if (czm_selected()) {
            bloom *= ratio;
          }
        #endif
        out_FragColor = bloom + color1;
      }`,uniforms:{bloomTexture:E[c(3605)],ratio:()=>{const w=c;return this.options[w(t._0x21ea03)]},color:()=>this.color}});this._postProcessStage=new Cesium__namespace.PostProcessStageComposite({name:this.name,stages:[E,P],inputPreviousStageTexture:![]}),this._postProcessStage.selected=[]}[_0x5e32ae(4158)](){const e=_0x5e32ae;this.eventType&&this._map.on(this.eventType,this[e(2254)],this)}_removedHook(){const e={_0x10c554:3806},t=_0x5e32ae;this[t(e._0x10c554)]&&this[t(1890)].off(this.eventType,this[t(2254)],this)}_map_clickHandler(e){const t={_0x1def32:1890,_0x39d4ca:636},i=_0x5e32ae,s=this.options[i(977)];if(s)for(let o=0,c=s.length;o<c;o++){const _=s[o];if(e.graphic===_||e.layer===_)return}const n=this[i(t._0x1def32)][i(t._0x39d4ca)].getPicked(e);this.selected=n}}register(_0x5e32ae(2192),BloomTargetEffect);var index$2={__proto__:null,BaseEffect,FogEffect,RainEffect,SnowEffect,SnowCoverEffect,InvertedEffect,NightVisionEffect,BloomEffect,BrightnessEffect,BlackAndWhiteEffect,MosaicEffect,DepthOfFieldEffect,OutlineEffect,BloomTargetEffect};class BaseControl extends BaseThing{constructor(e={}){const t=_0x5e32ae;super(e),this._show=e[t(575)]??!![]}get[_0x5e32ae(575)](){return this._show}set show(e){const t={_0x3ea430:1648,_0xb8b872:606},i=_0x5e32ae;this[i(3001)]!==e&&(this[i(3001)]=e,this._container&&(this._container.style[i(t._0x3ea430)]=e?i(t._0xb8b872):"none"),this._showHook&&this._showHook(e),this._map[i(1404)](EventType.updateControl,{control:this}))}get type(){return this._type}get container(){return this[_0x5e32ae(2899)]}get parentContainer(){var e;return this.options.parentContainer?this.options.parentContainer:(e=this._map)===null||e===void 0?void 0:e.container}get parentContainerId(){const e=_0x5e32ae;var t;return(t=this[e(3268)])===null||t===void 0?void 0:t.id}_enabledHook(e){const t=_0x5e32ae;this._container&&(this[t(2899)].style.display=e?"block":t(3432)),this._showHook&&this._showHook(e)}setOptions(e){const t=_0x5e32ae;if(!isBoolean(e))return this.options=merge(this.options,e),this[t(3603)](),this}reload(){const e=_0x5e32ae,t=this[e(1890)];t&&(this._onRemove(),delete this._container,this._onAdd(t))}addTo(e){const t=_0x5e32ae;return e&&e.addControl&&e[t(1298)](this),this}remove(e){const t={_0x385c2f:1890},i=_0x5e32ae;this[i(t._0x385c2f)]&&this[i(1890)].removeControl(this,e)}_onAdd(e){const t={_0x14beae:2899,_0xd5dc75:553},i=_0x5e32ae;this.isAdded||this._state===State.ADD||(this._state=State.ADD,this._map=e,this._container?!this._container.parentNode&&this._addChildContainer(this._container):(this._mountedHook&&this._mountedHook(),this._container&&this[i(3661)](this._container)),this._addedHook&&this._addedHook(),this[i(t._0x14beae)]&&this._container.addEventListener(i(1948),this._container_onClickHandler.bind(this)),this[i(t._0xd5dc75)]=State.ADDED)}_addChildContainer(e){const t={_0x3703ec:3407,_0x104835:773,_0x1a3bf7:3268,_0xb7e286:3798},i=_0x5e32ae;if(this.options[i(t._0x3703ec)])this[i(3268)][i(3407)](e,this.options.insertBefore);else if(Cesium__namespace.defined(this.options.insertIndex)){const s=this.parentContainer.childNodes;s.length<this.options.insertIndex&&(this.options[i(t._0x104835)]=0),this[i(t._0x1a3bf7)].insertBefore(e,s[this[i(t._0xb7e286)].insertIndex])}else this[i(3268)].appendChild(e)}_onRemove(){const e={_0x313191:2214,_0x19f4de:2899,_0xd7f46a:1890,_0x501d38:1856},t=_0x5e32ae;this._state===State.ADDED&&this._map&&(this._removedBeforeHook&&this._removedBeforeHook(),this._container&&this._container[t(e._0x313191)]&&(this[t(2899)][t(1368)](t(1948),this._container_onClickHandler),this._container[t(e._0x313191)].removeChild(this[t(e._0x19f4de)])),this[t(2442)]&&this[t(2442)](),this[t(e._0xd7f46a)]=null,this[t(553)]=State[t(e._0x501d38)])}[_0x5e32ae(3118)](){}_addedHook(){}_removedHook(){}_container_onClickHandler(e){const t=_0x5e32ae;this.enabled&&(this.options.click&&this[t(3798)].click(this.options),this[t(1404)](EventType.click,{...this.options,mouseEvent:e}))}setStyle(e){const t={_0x4b513a:4114},i=_0x5e32ae;return this._container&&merge(this._container[i(t._0x4b513a)],e),this}_createIcon(e,t,i=""){const s={_0x1fe85d:3235},n=_0x5e32ae;return e?(!t&&(t=create$3("div")),e=trim(e),e.startsWith(n(s._0x1fe85d))||e.startsWith("<svg")?t.appendChild(parseDom(e,!![],i)):e.startsWith("data:image")||e[n(2790)](".svg")||e.endsWith(n(3037))||e.endsWith(".jpg")?create$3("img",i,t).setAttribute("src",e):create$3("i",i+" "+e,t),t.innerHTML):""}fire(e,t={},i){const s=_0x5e32ae;return!t.control&&(t[s(3140)]=this),super.fire(e,t,i)}[_0x5e32ae(757)](e){this.enabled=![],super.destroy(e)}}class BaseCzmControl extends BaseControl{get viewer(){return this[_0x5e32ae(1890)].viewer}_mountedHook(){const e={_0x5800df:1397,_0x335b67:1727},t=_0x5e32ae,i=this._map.viewer[this[t(e._0x5800df)]];if(i){if(this._rebindCzmContainer)try{this._rebindCzmContainer(i[this._czmContainerKey]),delete this._rebindCzmContainer}catch{}}else this._container=this[t(e._0x335b67)](),this.options.style&&this.setStyle(this.options.style)}_addedHook(){const e={_0x54784f:737,_0x71aebb:2899,_0x587a99:2378,_0x373cf7:773,_0x19d04d:2543,_0x38bdd3:773},t=_0x5e32ae;let i=this[t(1890)][t(e._0x54784f)][this._czmControlKey];!i&&(i=this[t(1157)](this._container)),this._czmContrl=i,this._container=i[this._czmContainerKey],this[t(e._0x71aebb)].style.display=this.show?"block":t(3432),this._toChineseLang&&(this._map.lang===LangType.ZH||this._map.lang===LangType[t(e._0x587a99)])&&this._toChineseLang(this._map[t(3290)]),this.options[t(e._0x373cf7)]&&this[t(e._0x19d04d)](this.options[t(e._0x38bdd3)])}_removedHook(){const e={_0xf79dc3:757,_0x491802:737},t=_0x5e32ae;if(this.options.destroyCzm??!![]){try{this._czmContrl[t(e._0xf79dc3)]()}catch{}delete this._map[t(e._0x491802)][this._czmControlKey],delete this[t(976)]}else this._container.style[t(1648)]="none"}_setInsertIndex(e=0){const t={_0x2e9331:2899},i=_0x5e32ae,s=this.parentContainer.childNodes;s.length<e&&(e=0),this.parentContainer.removeChild(this[i(t._0x2e9331)]),this.parentContainer.insertBefore(this[i(t._0x2e9331)],s[e])}[_0x5e32ae(426)](e){}_createCzmContainer(){return null}_createCzmControl(){return null}_updateDomInnerHtml(e,t,i){const s={_0x1e0410:624},n=_0x5e32ae,o=e.getElementsByClassName(i);for(let c=0;c<o.length;c++)t[o[c][n(s._0x1e0410)]]&&(o[c][n(s._0x1e0410)]=t[o[c].innerHTML])}[_0x5e32ae(3054)](e,t,i){const s={_0x161639:624},n=_0x5e32ae,o=e[n(4254)](i);for(let c=0;c<o.length;c++)t[o[c].innerHTML]&&(o[c].innerHTML=t[o[c][n(s._0x161639)]])}[_0x5e32ae(2427)](e,t,i,s){const n={_0x130bff:3058},o=_0x5e32ae;!e&&(e=document);const c=e.getElementsByClassName(i);for(let _=0;_<c.length;_++)t[c[_][o(n._0x130bff)](s)]&&c[_].setAttribute(s,t[c[_][o(3058)](s)])}_updateDomAttributeByEvent(e,t,i,s,n){const o={_0x525b99:4136},c=e.getElementsByClassName(i);if(c.length>0)for(let _=0;_<c.length;_++)c[_][n]=function(l){const h=_0x5210,f=l.currentTarget.getAttribute(s);t[f]&&l.currentTarget[h(o._0x525b99)](s,t[f])}}}class Animation extends BaseCzmControl{constructor(e={}){super(e),this._czmControlKey="_animation",this._czmContainerKey="_container"}_createCzmContainer(){const e={_0x4a2c5a:1541},t=_0x5e32ae;return create$3(t(e._0x4a2c5a),t(482))}_createCzmControl(){return new Cesium__namespace.Animation(this._container,new Cesium__namespace.AnimationViewModel(this.viewer.clockViewModel))}_toChineseLang(e){const t={_0x356e83:4153,_0x1f034d:3333},i=_0x5e32ae;let s=e.getElementsByClassName("cesium-viewer-animationContainer");if(s.length>0){s=s[0];const n={Today:"今天","Today (real-time)":i(t._0x356e83),Pause:"暂停","Play Reverse":"后退播放","Play Forward":"前进播放","Current time not in range":i(t._0x1f034d)};this._updateDomByTagName(s,n,"title")}}}register$1(_0x5e32ae(634),Animation);class BaseLayerPicker extends BaseCzmControl{constructor(e={}){const t={_0x3f9b87:3798,_0x345920:773},i=_0x5e32ae;super(e),this._czmControlKey="_baseLayerPicker",this._czmContainerKey=i(3242),this[i(t._0x3f9b87)].insertIndex=this.options[i(t._0x345920)]??1}get parentContainer(){const e=_0x5e32ae;return this.options.parentContainer?this[e(3798)].parentContainer:this._map[e(3158)]}_createCzmControl(){const e={_0x377dfb:3107,_0x262dae:1854,_0x1eeb24:4187,_0x43d0a4:2002,_0xbb2808:2002,_0x2f992d:1028,_0x47d8c0:1890},t=_0x5e32ae;var i;const s=this[t(1890)].options[t(3140)]||{},n=this.options,o={map:this._map,globe:this._map[t(e._0x377dfb)].globe,imageryProviderViewModels:n[t(4187)]||s.imageryProviderViewModels,selectedImageryProviderViewModel:n.selectedImageryProviderViewModel||s.selectedImageryProviderViewModel,terrainProviderViewModels:n.terrainProviderViewModels||s.terrainProviderViewModels,selectedTerrainProviderViewModel:n.selectedTerrainProviderViewModel||s[t(e._0x262dae)]};if(!o.imageryProviderViewModels&&((i=this._map.options.basemaps)===null||i===void 0?void 0:i.length)>0){const _=getImageryProviderViewModels(this[t(1890)][t(3798)].basemaps,this._map.options.templateValues);o.imageryProviderViewModels=_[t(e._0x1eeb24)],_[t(e._0x43d0a4)]!==-1&&(o.selectedImageryProviderViewModel=_[t(4187)][_[t(e._0xbb2808)]])}if(!o.terrainProviderViewModels){var c;o.terrainProviderViewModels=getTerrainProviderViewModels(this._map._getTerrainOptions()),o.selectedTerrainProviderViewModel=o.terrainProviderViewModels[(c=this[t(1890)][t(3798)][t(e._0x2f992d)])!==null&&c!==void 0&&c[t(575)]?1:0]}return new Cesium__namespace.BaseLayerPicker(this[t(e._0x47d8c0)].toolbar,o)}_toChineseLang(e){const t={_0x4e89d5:1330,_0x13bbac:3748,_0xbbb0e4:3534,_0x522d39:2398,_0x245ccc:2268},i={_0x29fb47:978},s=_0x5e32ae;let n=e.getElementsByClassName(s(t._0x4e89d5));if(n[s(3402)]>0){n=n[0];const o={Imagery:"影像","Cesium ion":s(t._0x13bbac),Other:"其他",Terrain:"地形服务","WGS84 Ellipsoid":s(t._0xbbb0e4),"Cesium World Terrain":"Cesium 世界地形图","WGS84 standard ellipsoid, also known as EPSG:4326":"WGS84标准椭球，又称EPSG：4326","High-resolution global terrain tileset curated from several datasources and hosted by Cesium ion":"高分辨率全球地形图块集由几个数据源组成，由Cesium ion托管"};this[s(2398)](n,o,"cesium-baseLayerPicker-sectionTitle"),this[s(t._0x522d39)](n,o,"cesium-baseLayerPicker-categoryTitle"),this._updateDomInnerHtml(n,o,"cesium-baseLayerPicker-itemLabel"),this._updateDomAttribute(n,o,"cesium-baseLayerPicker-item",s(2542));const c=e.getElementsByClassName(s(t._0x245ccc));c[s(3402)]>0&&(c[0].parentElement.onmouseover=function(_){const l=s,h=_[l(i._0x29fb47)].getAttribute("title"),f=h[l(439)](`
`);let m="",g="";o[f[0]]?m+=o[f[0]]:m+=f[0],o[f[0]]?g+=o[f[1]]:g+=f[1],_.currentTarget.setAttribute("title",m+`
`+g)})}}}register$1("baseLayerPicker",BaseLayerPicker);class FullscreenButton extends BaseCzmControl{constructor(e={}){const t={_0x4a0942:3357},i=_0x5e32ae;super(e),this[i(1397)]=i(t._0x4a0942),this[i(4073)]="_container"}get parentContainer(){const e=_0x5e32ae;return this.options.parentContainer?this.options.parentContainer:this._map[e(3158)]}[_0x5e32ae(1727)](){const e={_0x2ce843:1648,_0xe86f69:2680},t=_0x5e32ae,i=create$3("div","cesium-button cesium-toolbar-button");return i.style[t(e._0x2ce843)]=t(e._0xe86f69),i}_createCzmControl(){const e={_0x1a5db7:2583},t=_0x5e32ae;return new Cesium__namespace[t(e._0x1a5db7)](this._container,this.options.fullscreenElement)}_rebindCzmContainer(e){const t={_0x4e84f6:3239},i=_0x5e32ae;var s;removeClass(e,"cesium-viewer-fullscreenContainer"),addClass(e,"cesium-button cesium-toolbar-button"),e.style.display="inline-block",e[i(2214)].removeChild(e);const n=(s=this.viewer[i(t._0x4e84f6)])===null||s===void 0?void 0:s._wrapper;n?this.parentContainer.insertBefore(e,n):this.parentContainer[i(1155)](e)}_toChineseLang(e){const t=_0x5e32ae,i={"Full screen":"全屏","Exit full screen":"退出全屏","Full screen unavailable":"全屏不可用"};this._updateDomAttributeByEvent(e,i,"cesium-fullscreenButton","title",t(1527))}}register$1("fullscreenButton",FullscreenButton);class GaodePOIGeocoder{constructor(e={}){this.options=e,this.gaodekey=e.key||gaodeArr}[_0x5e32ae(900)](){const e={_0x2f1a92:1608},t=_0x5e32ae,i=this[t(e._0x2f1a92)],s=Math.floor(Math.random()*i.length+1)-1;return i[s]}[_0x5e32ae(3271)](e){const t={_0xa796d6:541,_0x3932cb:3798},i={_0x168fe4:3417,_0x486ed1:3465,_0x23b19b:2792,_0x1f07af:3649},s=_0x5e32ae,n=this.getArrayRandomOne(),o=new Cesium__namespace.Resource({url:s(t._0xa796d6),queryParameters:{count:20,key:n,keywords:e,types:"110000|120000|130000|140000|180000|190000|",...this[s(t._0x3932cb)][s(703)]||{}}}),c=this;return o.fetchJson().then(function(_){const l={_0x168fab:3605},h=s;if(_.infocode!=="10000")return logError$1("请求失败("+_[h(i._0x168fe4)]+")："+_.info),{};if(_.pois.length===0)return logInfo("未查询到“"+e+h(4094)),{};let f=3e3;return c[h(i._0x486ed1)].camera[h(2868)].height<f&&(f=c.map[h(i._0x23b19b)].positionCartographic.height),_[h(i._0x1f07af)].map(function(m){const g=h;let C=m.location.split(",");return C=gcj2wgs(C),{displayName:m[g(l._0x168fab)],destination:Cesium__namespace.Cartesian3[g(3203)](C[0],C[1],f)}})})}}class Geocoder extends BaseCzmControl{constructor(e={}){const t={_0x38d365:1397,_0x2ee208:3830},i=_0x5e32ae;super(e),this[i(t._0x38d365)]=i(t._0x2ee208),this._czmContainerKey=i(1006)}get[_0x5e32ae(3268)](){return this.options.parentContainer?this.options.parentContainer:this._map.toolbar}_createCzmContainer(){return create$3("div","cesium-viewer-geocoderContainer")}_createCzmControl(){const e={_0x29022c:2560,_0xd79df2:3107},t=_0x5e32ae;let i=this.options.service;if(!i){const s=new GaodePOIGeocoder(this.options.geocoderConfig);s.map=this,i=[s]}return new Cesium__namespace[t(e._0x29022c)]({container:this._container,geocoderServices:i,scene:this._map[t(e._0xd79df2)]})}_toChineseLang(e){const t=_0x5e32ae,i={"Enter an address or landmark...":t(4302),"Searching...":t(3910)};this._updateDomAttribute(e,i,t(1035),"placeholder")}}register$1(_0x5e32ae(3695),Geocoder);class HomeButton extends BaseCzmControl{constructor(e={}){const t=_0x5e32ae;super(e),this._czmControlKey="_homeButton",this._czmContainerKey="_element",this[t(3798)].insertIndex=this.options.insertIndex??0}get parentContainer(){const e=_0x5e32ae;return this[e(3798)][e(3268)]?this.options.parentContainer:this._map.toolbar}_createCzmControl(){const e={_0x11c9ac:1890,_0x2e828b:3107},t=_0x5e32ae;return new Cesium__namespace.HomeButton(this._map.toolbar,this[t(e._0x11c9ac)][t(e._0x2e828b)])}_toChineseLang(e){this._updateDomAttribute(e,{"View Home":"初始视图"},"cesium-home-button","title")}}register$1("homeButton",HomeButton);class NavigationHelpButton extends BaseCzmControl{constructor(e={}){super(e),this._czmControlKey="_navigationHelpButton",this._czmContainerKey="_wrapper"}get[_0x5e32ae(3268)](){return this.options.parentContainer?this.options.parentContainer:this._map.toolbar}_createCzmControl(){const e={_0x2dfec9:1442},t=_0x5e32ae;let i=!![];try{if(Cesium__namespace.defined(window.localStorage)){const s=window[t(1705)].getItem("cesium-hasSeenNavHelp");Cesium__namespace.defined(s)&&s?i=![]:window.localStorage.setItem("cesium-hasSeenNavHelp","true")}}catch{}return new Cesium__namespace[t(e._0x2dfec9)]({container:this._map.toolbar,instructionsInitiallyVisible:Cesium__namespace.defaultValue(this.options.navigationInstructionsInitiallyVisible,i)})}_toChineseLang(e){const t={_0x413d15:2163,_0x22a9f2:2542,_0x415ef2:2065,_0x4b85f7:1351,_0x408a06:2998,_0x4dfe99:3e3,_0x4e1a39:2157,_0xa0a00d:624,_0x229162:1523,_0x2eadef:1769,_0x3f3029:3137,_0x1b36bd:1623,_0x25a020:2398},i=_0x5e32ae;this._updateDomAttribute(e,{"Navigation Instructions":"帮助"},i(t._0x413d15),i(t._0x22a9f2));const s={Mouse:"鼠标操作",Touch:i(t._0x415ef2),"Pan view":"平移视图","Left click + drag":"鼠标左键+拖拽","Zoom view":"缩放视图","Right click + drag, or":i(t._0x4b85f7),"Mouse wheel scroll":i(t._0x408a06),"Rotate view":"旋转视图","Middle click + drag, or":"中键按下拖拽，或者","CTRL + Left/Right click + drag":"按Ctrl键 同时 左/右键拖拽","One finger drag":i(t._0x4dfe99),"Two finger pinch":"双指向内或向外滑动","Tilt view":"倾斜视图","Two finger drag, same direction":i(2393),"Two finger drag, opposite direction":i(t._0x4e1a39)};let n=e.getElementsByClassName("cesium-navigation-button-left");n.length>0&&(n=n[0],s[n.textContent]&&(n[i(t._0xa0a00d)]=n[i(t._0x229162)][0].outerHTML+s[n.textContent]));let o=e[i(1908)]("cesium-navigation-button-right");o.length>0&&(o=o[0],s[o.textContent]&&(o.innerHTML=o[i(t._0x229162)][0][i(4191)]+s[o.textContent])),this._updateDomInnerHtml(e,s,"cesium-navigation-help-pan"),this._updateDomInnerHtml(e,s,i(t._0x2eadef)),this._updateDomInnerHtml(e,s,i(t._0x3f3029)),this[i(2398)](e,s,i(t._0x1b36bd)),this[i(t._0x25a020)](e,s,"cesium-navigation-help-tilt")}}register$1(_0x5e32ae(3239),NavigationHelpButton);class ProjectionPicker extends BaseCzmControl{constructor(e={}){const t={_0x2b59c2:1397},i=_0x5e32ae;super(e),this[i(t._0x2b59c2)]="_projectionPicker",this._czmContainerKey="_wrapper"}get[_0x5e32ae(3268)](){return this.options.parentContainer?this.options.parentContainer:this._map.toolbar}_createCzmControl(){return new Cesium__namespace.ProjectionPicker(this._map.toolbar,this._map.scene)}[_0x5e32ae(3773)](e){const t={_0x29370f:2542},i=_0x5e32ae,s={"Perspective Projection":"透视投影","Orthographic Projection":"正射投影"};this._updateDomAttribute(e,s,"cesium-projectionPicker-buttonPerspective","title"),this._updateDomAttribute(e,s,"cesium-projectionPicker-dropDown-icon",i(t._0x29370f))}}register$1("projectionPicker",ProjectionPicker);class SceneModePicker extends BaseCzmControl{constructor(e={}){const t=_0x5e32ae;super(e),this._czmControlKey="_sceneModePicker",this._czmContainerKey=t(2030)}get parentContainer(){return this.options.parentContainer?this.options.parentContainer:this._map.toolbar}[_0x5e32ae(1157)](){const e={_0x4577d5:547,_0x1cf4b6:3107},t=_0x5e32ae;return new Cesium__namespace[t(e._0x4577d5)](this[t(1890)].toolbar,this[t(1890)][t(e._0x1cf4b6)])}_toChineseLang(e){const t={_0x13b066:3376,_0x10c1be:2934,_0xa3e298:1527,_0x2d14f2:2542},i=_0x5e32ae,s={"2D":"二维视图","3D":i(t._0x13b066),"Columbus View":"哥伦布2.5D视图"};this[i(t._0x10c1be)](e,s,"cesium-sceneModePicker-button3D",i(2542),i(t._0xa3e298)),this[i(2427)](e,s,"cesium-sceneModePicker-dropDown-icon",i(t._0x2d14f2))}}register$1("sceneModePicker",SceneModePicker);class Timeline extends BaseCzmControl{constructor(e={}){super(e),this._czmControlKey="_timeline",this._czmContainerKey="container"}[_0x5e32ae(1727)](){const e=_0x5e32ae,t=create$3(e(1541),"cesium-viewer-timelineContainer");return t.style.right=e(3729),t}_createCzmControl(){const e={_0x3f0999:1890,_0x190a17:1949},t=_0x5e32ae;return new Cesium__namespace.Timeline(this._container,this[t(e._0x3f0999)][t(e._0x190a17)])}_addedHook(){const e={_0x35c211:702,_0x5d9c0b:976},t={_0x1a5a57:2636,_0x58b45d:2749},i=_0x5e32ae;super[i(4158)]();const s=(this.options.maxSpan??1)*10,n=this[i(976)][i(e._0x35c211)];this._czmContrl.zoomTo=function(o,c){const _=i;if(Cesium__namespace.JulianDate[_(t._0x1a5a57)](c,o)>s)return n[_(t._0x58b45d)](this)(o,c)},this[i(e._0x5d9c0b)][i(2732)](i(1642),this.onTimelineScrubfunction,![]),this._czmContrl.zoomTo(this[i(1890)].clock.startTime,this._map.clock.stopTime)}onTimelineScrubfunction(e){const t=_0x5e32ae,i=e.clock;i.currentTime=e[t(1111)],i.shouldAnimate=![]}zoomTo(e,t){return this[_0x5e32ae(976)].zoomTo(e,t)}_removedHook(){const e=_0x5e32ae;this._czmContrl[e(1368)]("settime",this.onTimelineScrubfunction,![]),super._removedHook()}_rebindCzmContainer(e){const t={_0x3485a3:3729},i=_0x5e32ae;e.style.right=i(t._0x3485a3)}}register$1(_0x5e32ae(1475),Timeline);class VRButton extends BaseCzmControl{constructor(e={}){const t={_0x138834:2952},i=_0x5e32ae;super(e),this._czmControlKey=i(t._0x138834),this._czmContainerKey="_container"}get[_0x5e32ae(3268)](){const e={_0x4f0756:3798},t=_0x5e32ae;return this.options[t(3268)]?this[t(e._0x4f0756)][t(3268)]:this._map.toolbar}_createCzmContainer(){return create$3("div","cesium-button cesium-toolbar-button mars3d-vrButton")}[_0x5e32ae(1157)](){return new Cesium__namespace.VRButton(this._container,this._map.scene,this.options.fullscreenElement)}_rebindCzmContainer(e){const t=_0x5e32ae;var i;removeClass(e,"cesium-viewer-vrContainer"),addClass(e,"cesium-button cesium-toolbar-button mars3d-vrButton"),e.parentNode[t(3004)](e);const s=(i=this[t(737)].navigationHelpButton)===null||i===void 0?void 0:i._wrapper;s?this.parentContainer.insertBefore(e,s):this.parentContainer.appendChild(e)}[_0x5e32ae(3773)](e){const t={_0x110d7a:2934},i=_0x5e32ae,s={"Enter VR mode":"进入VR模式","Exit VR mode":"退出VR模式","VR mode is unavailable":"VR模式不可用"};this[i(t._0x110d7a)](e,s,"cesium-vrButton","title","onmouseover")}}register$1(_0x5e32ae(2926),VRButton);class LocationBar extends BaseControl{constructor(e={}){const t={_0x12e22e:481},i=_0x5e32ae;super(e),this.options.cacheTime=this[i(3798)][i(t._0x12e22e)]??50,this.locationData={}}[_0x5e32ae(3118)](){const e={_0x4fe667:3798,_0x13ee19:4109,_0x4d8e30:2899,_0x15de72:1356,_0x2624f4:1890,_0xe5b42e:1716},t={_0x39d7c7:3107,_0x1deaec:3506,_0x40cc09:3004},i=_0x5e32ae;if(Cesium__namespace.defined(this.options.template)?Array.isArray(this.options.template)?this.template=this[i(e._0x4fe667)][i(3072)][this._map.lang]:this.template=this.options.template:this.template="<div>经度:{lng}</div> <div>纬度:{lat}</div><div>海拔：{alt}米</div> <div class='hide700'>层级：{level}</div><div>方向：{heading}°</div> <div>俯仰角：{pitch}°</div><div class='hide700'>视高：{cameraHeight}米</div>",Cesium__namespace[i(515)](this.options.crs)?isString(this.options.crs)?this[i(1239)]=this[i(3798)].crs:this.options.crs&&(this._crs=CRS[i(e._0x13ee19)]):isString(this[i(3072)])&&this.template[i(2316)]("{crsx}")!==-1&&(this._crs=CRS.CGCS2000_GK_Zone_3),this[i(e._0x4d8e30)]=create$3("div","mars3d-locationbar no-print"),this._containerCon=create$3("div","mars3d-locationbar-content",this._container),this.options.style?this.setStyle(this.options.style):(this[i(e._0x15de72)]=!![],this._updateControlHandler()),this.options.fps){this[i(e._0x2624f4)].scene[i(1716)]=!![];const s=setInterval(()=>{const n=i;if(!this._map||!this._map[n(t._0x39d7c7)]._performanceDisplay)return;clearInterval(s),this.timeTik=null;const o=this._map.container[n(1881)](".cesium-performanceDisplay");if(o){addClass(o,"mars3d-locationbar-content"),removeClass(o,n(t._0x1deaec));const c=o.querySelector(n(780));remove(c),o.parentNode[n(t._0x40cc09)](o),this._container.insertBefore(o,this._containerCon)}},100);this[i(749)]=s}else this.timeTik&&(clearInterval(this.timeTik),this[i(749)]=null),this._map.scene[i(e._0xe5b42e)]=![]}_addedHook(){const e=_0x5e32ae;this._map.on(EventType.mouseMove,this._mouseMoveHandler,this),this[e(1890)].on(EventType.cameraMoveEnd,this._cameraHandler,this),this._map.on(EventType[e(1298)],this._updateControlHandler,this),this._map.on(EventType.updateControl,this._updateControlHandler,this),this._cameraHandler()}_removedHook(){const e={_0x5af7a5:1220,_0x343730:1298,_0x1da987:3107,_0x1253f7:1187},t=_0x5e32ae;this._map.off(EventType.mouseMove,this[t(3336)],this),this._map[t(e._0x5af7a5)](EventType.cameraMoveEnd,this._cameraHandler,this),this._map[t(1220)](EventType[t(e._0x343730)],this._updateControlHandler,this),this._map.off(EventType[t(1077)],this[t(1277)],this),this.timeTik&&(clearInterval(this.timeTik),this.timeTik=null),this.options.fps&&(this._map[t(e._0x1da987)].debugShowFramesPerSecond=![],this._map.scene._performanceDisplay&&(this._map.scene._performanceDisplay[t(757)](),this._map.scene[t(e._0x1253f7)]=void 0))}_cameraHandler(){const e=_0x5e32ae;if(!this[e(968)])return;const t=this._map[e(3764)]();t&&this._templateHtml(t)}_mouseMoveHandler(e){const t={_0x18fcd7:3222,_0x427bea:481},i=_0x5e32ae;this[i(t._0x18fcd7)]&&(clearTimeout(this[i(t._0x18fcd7)]),delete this.moveTimer),this[i(t._0x18fcd7)]=setTimeout(()=>{const s=i;if(delete this.moveTimer,!this.enabled)return;const n=e.cartesian;n&&this[s(2561)](LngLatPoint.fromCartesian(n))},this.options[i(t._0x427bea)])}_templateHtml(e){const t={_0x1f3d7d:898,_0x2bcc60:2792,_0x1dda7e:1286,_0x3bc645:1029,_0x5bc15a:3984,_0xf168cf:448,_0x3a8b0e:898,_0x1c34eb:3973,_0x3dc638:3072,_0x4d48f6:3798},i=_0x5e32ae;this[i(t._0x1f3d7d)].cameraHeight=this._map[i(t._0x2bcc60)].positionCartographic.height.toFixed(LngLatPoint.FormatAltLength),this.locationData.heading=Cesium__namespace[i(t._0x1dda7e)].toDegrees(this._map.camera.heading).toFixed(0),this.locationData.pitch=Cesium__namespace.Math.toDegrees(this._map.camera.pitch)[i(t._0x3bc645)](0),this[i(t._0x1f3d7d)][i(1096)]=this._map.level,this.locationData[i(t._0x5bc15a)]=formatNum$1(this._map.getRealAlt(e.alt),LngLatPoint.FormatAltLength);const s=this.options.latDecimal??LngLatPoint.FormatLength;if(this.locationData.lng=e.lng.toFixed(s),this.locationData.lat=e.lat.toFixed(s),this._crs){const o=this.options[i(2143)]??1,c=proj4Trans([e[i(3411)],e[i(t._0xf168cf)]],"EPSG:4326",this._crs);c[0]===e[i(3411)]?this[i(898)][i(2435)]="":this.locationData.crsx=c[0].toFixed(o),c[1]===e[i(448)]?this.locationData.crsy="":this[i(t._0x3a8b0e)][i(t._0x1c34eb)]=c[1][i(1029)](o)}let n;typeof this[i(t._0x3dc638)]=="function"?n=this.template(this[i(t._0x3a8b0e)]):(this[i(t._0x4d48f6)].formatData&&(this[i(t._0x1f3d7d)]=this.options[i(568)](this[i(898)])),n=template(this[i(t._0x3dc638)],this.locationData)),this._containerCon.innerHTML=n,this.fire(EventType[i(809)])}_updateControlHandler(e){const t={_0x2f07d0:2695,_0x538613:634,_0x384abb:575},i=_0x5e32ae;var s,n;if(this._autoStyle&&(!e||((s=e[i(3140)])===null||s===void 0?void 0:s.type)==="animation"||((n=e.control)===null||n===void 0?void 0:n.type)==="timeline")){var o,c,_;this[i(1722)]({left:(o=this._map[i(t._0x2f07d0)][i(t._0x538613)])!==null&&o!==void 0&&o.show||(c=this._map.controls.clockAnimate)!==null&&c!==void 0&&c[i(t._0x384abb)]?"170px":"0",right:"0",bottom:(_=this._map[i(t._0x2f07d0)].timeline)!==null&&_!==void 0&&_.show?i(1176):"0"})}}}register$1(_0x5e32ae(1818),LocationBar);class MouseDownView extends BaseControl{_mountedHook(){const e={_0x5ac347:2899},t=_0x5e32ae;this[t(e._0x5ac347)]=create$3("div","mars3d-mousedownview"),this._container.id=this.parentContainerId+"-mars3d-mousedownview",create$3("div",t(748),this._container)}changeMouseModel(){this.isAdded&&(this._removedHook(),this._addedHook())}_addedHook(){const e={_0x88bb3:1890,_0x18cf5c:4179,_0x32677a:4179},t=_0x5e32ae;isPCBroswer()&&(this[t(e._0x88bb3)].on(EventType.wheel,this._mousWheelHandler,this),this[t(e._0x88bb3)]._hasRightTilt?(this[t(1890)].on(EventType.rightDown,this._mousMiddleDownHandler,this),this[t(1890)].on(EventType.rightUp,this._mousMiddleUpHandler,this)):(this._map.on(EventType.middleDown,this._mousMiddleDownHandler,this),this[t(e._0x88bb3)].on(EventType.middleUp,this[t(e._0x18cf5c)],this)),this[t(e._0x32677a)]())}_removedHook(){const e={_0x3333d0:1890,_0xb8b83e:1220,_0x44148f:1220,_0x441c37:1141},t=_0x5e32ae;isPCBroswer()&&(this._map.off(EventType.wheel,this._mousWheelHandler,this),this._map._hasRightTilt?(this[t(e._0x3333d0)][t(e._0xb8b83e)](EventType.rightDown,this[t(4186)],this),this._map.off(EventType.rightUp,this._mousMiddleUpHandler,this)):(this._map.off(EventType.middleDown,this._mousMiddleDownHandler,this),this._map[t(e._0x44148f)](EventType[t(e._0x441c37)],this._mousMiddleUpHandler,this)),this[t(e._0x3333d0)].off(EventType.mouseMove,this[t(3336)],this),clearTimeout(this.timetik))}[_0x5e32ae(2836)](e){const t={_0x1bd9e5:2899},i=_0x5e32ae;this[i(968)]&&(addClass(this._container,i(694)),clearTimeout(this.timetik),this.timetik=setTimeout(()=>{removeClass(this[i(t._0x1bd9e5)],"mars3d-mousedownview-show")},200))}[_0x5e32ae(4186)](e){const t={_0x26ab5b:3107,_0x54dd4f:1890,_0x218da5:1890,_0x5085cb:3107,_0x2231bc:4055,_0x5ef264:3336},i=_0x5e32ae;!this.enabled||!getCurrentMousePosition(this[i(1890)][i(t._0x26ab5b)],e.position)||this[i(t._0x54dd4f)].camera.positionCartographic[i(3865)]>this[i(t._0x218da5)][i(t._0x5085cb)].screenSpaceCameraController.minimumCollisionTerrainHeight||(this._map.off(EventType[i(t._0x2231bc)],this[i(t._0x5ef264)],this),clearTimeout(this.timetik),this._container.style.top=e.position.y+"px",this._container.style.left=e.position.x+"px",addClass(this._container,i(694)))}_mousMiddleUpHandler(e){const t={_0x4b2ec0:2899,_0xd81436:1890},i=_0x5e32ae;removeClass(this[i(t._0x4b2ec0)],"mars3d-mousedownview-show"),this[i(t._0xd81436)].on(EventType.mouseMove,this[i(3336)],this)}_mouseMoveHandler(e){const t=_0x5e32ae;this._container.style.top=e[t(1274)].y+"px",this._container.style.left=e.endPosition.x+"px"}}register$1(_0x5e32ae(1125),MouseDownView);const icon$7=_0x5e32ae(2057),icon$6=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="48" height="48" fill="white" fill-opacity="0.01"/>
  <path d="M10.5 24L38.5 24" stroke="#ffffff" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`;class Zoom extends BaseControl{get parentContainer(){const e={_0x3d374b:1890},t=_0x5e32ae;return this._map?this[t(e._0x3d374b)].toolbar:document.getElementsByClassName("cesium-viewer-toolbar")[0]}[_0x5e32ae(3961)](e){const t={_0x4488c1:3432},i=_0x5e32ae;this._container2&&(this._container2.style.display=e?"block":i(t._0x4488c1))}_mountedHook(){const e={_0x1a6921:534,_0xb5fc4d:2719,_0x231fd4:1541},t={_0x1c3659:3798},i=_0x5e32ae;this[i(2899)]=create$3("div",i(e._0x1a6921)),this._container.style.display="inline-block",this._container[i(4136)]("title",this._map.getLangText(i(e._0xb5fc4d))),this._createIcon(this[i(3798)].zoomOutIcon||icon$6,this._container),this._container.addEventListener("click",s=>{this.enabled&&this._map.zoomOut(this.options.relativeAmount)}),this._container2=create$3(i(e._0x231fd4),"cesium-button cesium-toolbar-button mar3d-toolButton"),this._container2.style.display="inline-block",this._container2.setAttribute(i(2542),this._map[i(4296)](i(2309))),this._createIcon(this.options.zoomInIcon||icon$7,this._container2),this._container2.addEventListener(i(1948),s=>{const n=i;this.enabled&&this._map.zoomIn(this[n(t._0x1c3659)][n(3940)])})}_addedHook(){const e={_0x4613fe:2899},t=_0x5e32ae;this.parentContainer.insertBefore(this._container2,this[t(e._0x4613fe)])}_removedHook(){const e=_0x5e32ae;this.parentContainer[e(3004)](this._container2)}}register$1("zoom",Zoom);class ToolButton extends BaseControl{constructor(e={}){const t={_0x58fc86:3640},i=_0x5e32ae;super(e),this[i(t._0x58fc86)]="toolButton"+getGlobalId()}get parentContainer(){const e=_0x5e32ae;return this[e(1890)]?this[e(1890)][e(3158)]:document.getElementsByClassName(e(1956))[0]}_mountedHook(){const e={_0x77ea4a:1648,_0x49f9b8:2542},t={_0x4a3bb4:968},i={_0x2b5fc1:3798},s=_0x5e32ae;this._container=create$3("div",s(534)),this._container.id=this.id,this._container.style[s(e._0x77ea4a)]="inline-block",this[s(2899)].setAttribute(s(e._0x49f9b8),this.options.title||""),this[s(1492)](this.options.icon,this._container);let n;this._container[s(2732)]("mouseover",o=>{const c=s;this.enabled&&n!==this.id&&(n=this.id,this.options.mouseOver&&this.options.mouseOver(this.options),this.fire(EventType.mouseOver,{...this[c(i._0x2b5fc1)]}))}),this._container.addEventListener("mouseout",o=>{const c=s;n=null,this[c(t._0x4a3bb4)]&&(this.options.mouseOut&&this.options.mouseOut(this.options),this[c(1404)](EventType.mouseOut,{...this.options}))})}setIcon(e){const t=_0x5e32ae;this.options.icon=e,empty(this._container),this[t(1492)](e,this._container)}}register$1("toolButton",ToolButton);const icon$5=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="162px" height="162px" viewBox="0 0 162 162" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>拖拽调整四周方向角，双击回正北</title>
    <desc>mars3d.cn</desc>
    <defs></defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill-rule="evenodd">
        <g id="compass-outer" fill-rule="nonzero">
            <path d="M80.8410544,161.682109 C36.1937731,161.682109 0,125.488336 0,80.8410544 C0,36.1937731 36.1937731,0 80.8410544,0 C125.488336,0 161.682109,36.1937731 161.682109,80.8410544 C161.682109,125.488336 125.488336,161.682109 80.8410544,161.682109 Z M81.1836011,134.620909 C110.696211,134.620909 134.620909,110.696211 134.620909,81.1836011 C134.620909,51.6709916 110.696211,27.7462941 81.1836011,27.7462941 C51.6709916,27.7462941 27.7462941,51.6709916 27.7462941,81.1836011 C27.7462941,110.696211 51.6709916,134.620909 81.1836011,134.620909 Z" id="Oval-108"></path>
            <circle id="Oval-74" fill="#FFFFFF" cx="129.493683" cy="127.952092" r="1.54159147"></circle>
            <circle id="Oval-74-Copy-3" fill="#FFFFFF" cx="129.493683" cy="35.4566038" r="1.54159147"></circle>
            <circle id="Oval-74-Copy-5" fill="#FFFFFF" cx="30.8318294" cy="127.952092" r="1.54159147"></circle>
            <circle id="Oval-74-Copy-4" fill="#FFFFFF" cx="30.8318294" cy="35.4566038" r="1.54159147"></circle>
            <polygon id="N" fill="#FFFFFF" points="84.9318072 23.1238721 84.9318072 13.1321362 82.5623385 13.1321362 82.5623385 19.2984646 77.951866 13.1321362 75.7108625 13.1321362 75.7108625 23.1238721 78.0946053 23.1238721 78.0946053 16.9718176 82.6908037 23.1238721"></polygon>
            <polygon id="Line" fill="#FFFFFF" points="143.368007 82.1093476 152.617555 82.1093476 152.617555 81.2993476 143.368007 81.2993476"></polygon>
            <polygon id="Line-Copy-8" fill="#FFFFFF" points="9.24954884 82.1093476 18.4990976 82.1093476 18.4990976 81.2993476 9.24954884 81.2993476"></polygon>
            <polygon id="Line" fill="#FFFFFF" points="81.2993476 143.368007 81.2993476 152.617555 82.1093476 152.617555 82.1093476 143.368007"></polygon>
        </g>
    </g>
</svg>
`,icon$4=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="17px" height="17px" viewBox="0 0 17 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>拖拽调整俯仰角</title>
    <desc>mars3d.cn</desc>
    <defs></defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill-rule="evenodd">
        <g id="compass-inner" fill-rule="nonzero">
            <path d="M8.5,16.5 C4.081722,16.5 0.5,12.918278 0.5,8.5 C0.5,4.081722 4.081722,0.5 8.5,0.5 C12.918278,0.5 16.5,4.081722 16.5,8.5 C16.5,12.918278 12.918278,16.5 8.5,16.5 Z M8.5,15.5 C12.3659932,15.5 15.5,12.3659932 15.5,8.5 C15.5,4.63400675 12.3659932,1.5 8.5,1.5 C4.63400675,1.5 1.5,4.63400675 1.5,8.5 C1.5,12.3659932 4.63400675,15.5 8.5,15.5 Z" id="Oval-96"></path>
            <path d="M9.92599835,7.09066832 C12.7122872,9.87695712 14.3709388,12.5452228 13.4497471,13.4664145 C12.5285555,14.3876061 9.86028979,12.7289545 7.074001,9.94266568 C4.2877122,7.15637688 2.62906055,4.48811119 3.55025221,3.56691953 C4.47144386,2.64572788 7.13970955,4.30437952 9.92599835,7.09066832 Z M9.21889157,7.7977751 C6.92836458,5.50724811 4.52075769,4.01062761 4.25735899,4.27402631 C3.99396029,4.53742501 5.49058078,6.9450319 7.78110778,9.2355589 C10.0716348,11.5260859 12.4792417,13.0227064 12.7426404,12.7593077 C13.0060391,12.495909 11.5094186,10.0883021 9.21889157,7.7977751 Z" id="Oval-96-Copy-2"></path>
            <path d="M9.92599835,9.94266568 C7.13970955,12.7289545 4.47144386,14.3876061 3.55025221,13.4664145 C2.62906055,12.5452228 4.2877122,9.87695712 7.074001,7.09066832 C9.86028979,4.30437952 12.5285555,2.64572788 13.4497471,3.56691953 C14.3709388,4.48811119 12.7122872,7.15637688 9.92599835,9.94266568 Z M9.21889157,9.2355589 C11.5094186,6.9450319 13.0060391,4.53742501 12.7426404,4.27402631 C12.4792417,4.01062761 10.0716348,5.50724811 7.78110778,7.7977751 C5.49058078,10.0883021 3.99396029,12.495909 4.25735899,12.7593077 C4.52075769,13.0227064 6.92836458,11.5260859 9.21889157,9.2355589 Z" id="Oval-96-Copy-3"></path>
            <path d="M15.1464466,1.1464466 L14.3453364,1.94755684 L13.9608692,2.33202401 L14.667976,3.03913077 L15.0524431,2.65466362 L15.8535534,1.8535534 L15.1464466,1.1464466 Z M2.29760014,13.995293 L1.85311902,14.4397742 L1.004311,15.2885822 L1.71141776,15.995689 L2.56022581,15.146881 L3.00470698,14.7023998 L2.29760014,13.995293 Z" id="Line"></path>
            <circle id="Oval-432" cx="16" cy="1" r="1"></circle>
            <circle id="Oval-432-Copy" cx="1" cy="16" r="1"></circle>
        </g>
    </g>
</svg>
`,icon$3=_0x5e32ae(3069);class Compass extends BaseControl{constructor(e={}){const t={_0x460cee:3330,_0xe9f82a:3798,_0x183751:2279},i=_0x5e32ae;super(e),this[i(t._0x460cee)]=0,this._orbitCursorOpacity=0,this._orbitLastTimestamp=0,this[i(t._0xe9f82a)][i(t._0x183751)]=this.options.rotation??!![]}_getCssText(){const e={_0x4cd1ed:1194,_0x12d9cc:3798,_0x477015:515},t=_0x5e32ae,i={};if(Cesium__namespace.defined(this.options[t(1194)])&&this[t(3798)].top!=="")i.top=this.options[t(e._0x4cd1ed)];else if(Cesium__namespace.defined(this.options.bottom)&&this.options.bottom!==""&&(i.bottom=this[t(e._0x12d9cc)].bottom,i.bottom==="toolbar")){const n=this[t(1890)].toolbar;if(n){const o=n[t(2954)]+40;i.bottom=o+"px",this[t(2363)]=n}}Cesium__namespace.defined(this[t(e._0x12d9cc)].left)&&this.options.left!==""?i[t(1719)]=this.options.left:Cesium__namespace[t(e._0x477015)](this[t(3798)].right)&&this.options.right!==""&&(i.right=this[t(3798)].right);let s="";for(const n in i)s+=n+": "+i[n]+";";return s||"top: 10px;right: 10px;"}[_0x5e32ae(3118)](){const e={_0x5382d1:2899,_0x58a28d:3798,_0x4148c6:4122,_0x49070f:1155,_0x4ec13d:2760,_0xb843d3:2899,_0x295360:839},t={_0x53d44f:3582},i=_0x5e32ae;this._container=create$3("div",this.options[i(1256)]||"mars3d-compass"),this._container[i(4114)].cssText=this._getCssText(),this[i(e._0x5382d1)].onmousedown=s=>{this[i(t._0x53d44f)](s)},this._container_outer=parseDom(this[i(e._0x58a28d)].outerSvg||icon$5,!![],i(e._0x4148c6)),this._container.appendChild(this._container_outer),this._container_outer.ondblclick=s=>{const n=i;this._map.camera[n(1557)]({orientation:{heading:0}})},this._container_inner=parseDom(this.options.innerSvg||icon$4,!![],"mars3d-compass-inner"),this._container[i(e._0x49070f)](this._container_inner),this[i(e._0x4ec13d)].ondblclick=s=>{this._map.flyHome()},this.options.rotation&&(this._container_rotationArc=parseDom(this.options.rotationArcSvg||icon$3,!![],"mars3d-compass-rotation-arc"),this[i(e._0xb843d3)].appendChild(this[i(e._0x295360)]),this._container_rotationArc.style[i(2128)]="hidden")}setOuterSvg(e){const t=_0x5e32ae;this[t(2647)].innerHTML=e}setInnerSvg(e){const t=_0x5e32ae;this._container_inner[t(624)]=e}[_0x5e32ae(3007)](e){const t={_0x766153:624},i=_0x5e32ae;this._container_rotationArc[i(t._0x766153)]=e}[_0x5e32ae(4158)](){const e=_0x5e32ae;this[e(1890)].on(EventType[e(3953)],this._postRenderHandler,this),this._map.on(EventType.addControl,this._updateControlHandler,this),this._map.on(EventType.updateControl,this._updateControlHandler,this)}[_0x5e32ae(2442)](){const e={_0x5854e8:3155},t=_0x5e32ae;this._map.off(EventType.postRender,this[t(e._0x5854e8)],this),this._map.off(EventType.addControl,this._updateControlHandler,this),this._map.off(EventType.addControl,this._updateControlHandler,this),this._map.off(EventType.updateControl,this._updateControlHandler,this)}[_0x5e32ae(1277)](){const e=_0x5e32ae;if(this.domToolbar){const t=this.domToolbar.offsetHeight+40;this._container[e(4114)].bottom=t+"px"}}[_0x5e32ae(3155)](){const e=_0x5e32ae,t=this._map.camera.heading;this._container_outer&&(this._container_outer.style.cssText=e(1159)+t+`rad);
      -webkit-transform : rotate(-`+t+e(2520))}_handleMouseDown(e){const t={_0x129043:1890,_0x5b434e:3107,_0x90af43:1015,_0x4b408c:1561},i=_0x5e32ae;if(this[i(t._0x129043)][i(t._0x5b434e)][i(3211)]===Cesium__namespace[i(3850)].MORPHING)return!![];this[i(t._0x90af43)]=e.currentTarget.getBoundingClientRect();const n=this._compassRectangle.width/2,o=this[i(t._0x4b408c)](e),c=Cesium__namespace.Cartesian2.magnitude(o)/n;if(this[i(3798)].rotation&&c<50/145)this._orbit(o);else if(c<1)this._rotate(o);else return!![]}_getCameraFocus(e){const t={_0x24e8f5:3916,_0x1c97ca:837,_0x820212:3858,_0x354af7:3779,_0x5e59e6:1329,_0xb9a6f7:3875},i=_0x5e32ae;let s=new Cesium__namespace[i(t._0x24e8f5)];const n=this._map.scene,o=n.camera;if(n.mode!==Cesium__namespace[i(3850)].MORPHING){if(this._map[i(2638)])s=this._map[i(2638)].position.getValue(this._map.clock[i(t._0x1c97ca)]);else{const c=new Cesium__namespace[i(916)];c.origin=o.positionWC,c[i(t._0x820212)]=o[i(t._0x354af7)],s=n.globe.pick(c,n)}if(s){if(n.mode===Cesium__namespace[i(3850)].SCENE2D||n.mode===Cesium__namespace[i(3850)].COLUMBUS_VIEW){s=o.worldToCameraCoordinatesPoint(s);const c=new Cesium__namespace.Cartographic;e&&(s=n[i(t._0x5e59e6)][i(t._0xb9a6f7)].cartographicToCartesian(n.mapProjection.unproject(s,c)))}else!e&&(s=o.worldToCameraCoordinatesPoint(s));return s}}}_orbit(e){const t={_0x27b468:3850,_0x16a90d:2754,_0x205b0f:1756,_0x24933c:2911,_0x53dac6:839,_0x584a2a:2760,_0x189315:2799,_0x328016:2732,_0x2aab1e:896},i=_0x5e32ae,s=this._map.scene,n=s.screenSpaceCameraController,o=s.camera;if(!(s.mode===Cesium__namespace[i(t._0x27b468)].MORPHING||!n.enableInputs)){switch(s.mode){case Cesium__namespace.SceneMode.SCENE2D:if(!n[i(t._0x16a90d)])return;break;case Cesium__namespace[i(3850)].COLUMBUS_VIEW:if(n.enableLook)break;if(!n.enableTranslate||!n.enableTilt)return;break;case Cesium__namespace[i(3850)].SCENE3D:default:if(n.enableLook)break;if(!n[i(3914)]||!n.enableRotate)return;break}if(this[i(1185)]=c=>{this._orbitMouseMoveFunction(c)},this._mouseUpHandle=()=>{this._orbitMouseUpFunction()},document.removeEventListener("mousemove",this[i(1185)],![]),document.removeEventListener("mouseup",this[i(t._0x205b0f)],![]),this._orbitLastTimestamp=Cesium__namespace.getTimestamp(),this._map[i(2638)])this._orbitFrame=void 0,this._orbitIsLook=![];else{const c=this[i(713)](!![]);c?(this._orbitFrame=Cesium__namespace[i(t._0x24933c)].eastNorthUpToFixedFrame(c,s.globe.ellipsoid),this._orbitIsLook=![]):(this._orbitFrame=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(o.positionWC,s[i(1329)].ellipsoid),this._orbitIsLook=!![])}this[i(t._0x53dac6)].style.visibility="visible",this[i(t._0x584a2a)].className+=" compass-inner-active",document[i(2732)](i(t._0x189315),this._mouseMoveHandle,![]),document[i(t._0x328016)]("mouseup",this._mouseUpHandle,![]),this._map.on(EventType.clockTick,this._orbitTickFunction,this),this[i(t._0x2aab1e)](e,this._compassRectangle[i(4005)])}}[_0x5e32ae(886)](e){const t={_0x541ed6:2792,_0xccb73f:3850,_0x3af7a9:3300,_0x1c74cf:598,_0xb72dd0:1992},i=_0x5e32ae,s=this._map.scene,n=this._map[i(t._0x541ed6)],o=Cesium__namespace.getTimestamp(),c=o-this[i(1147)],_=(this._orbitCursorOpacity-.5)*2.5/1e3,l=c*_,h=this._orbitCursorAngle+Cesium__namespace.Math.PI_OVER_TWO,f=Math.cos(h)*l,m=Math.sin(h)*l;let g;this._orbitFrame&&(g=Cesium__namespace.Matrix4.clone(n.transform),n.lookAtTransform(this._orbitFrame)),s.mode===Cesium__namespace[i(t._0xccb73f)].SCENE2D?n.move(new Cesium__namespace.Cartesian3(f,m,0),Math[i(1124)](s[i(t._0x3af7a9)].clientWidth,s.canvas[i(2512)])/100*n.positionCartographic.height*l):this[i(t._0x1c74cf)]?(n.look(Cesium__namespace.Cartesian3.UNIT_Z,-f),n.look(n.right,-m)):(n[i(2805)](f),n[i(t._0xb72dd0)](m)),this._orbitFrame&&g&&n.lookAtTransform(g),this[i(1147)]=o}_updateAngleAndOpacity(e,t){const i={_0x1aa811:935,_0x390453:3330,_0x47aff0:851,_0x5a7609:4200},s=_0x5e32ae,n=Math[s(i._0x1aa811)](-e.y,e.x);this[s(i._0x390453)]=Cesium__namespace.Math.zeroToTwoPi(n-Cesium__namespace[s(1286)].PI_OVER_TWO);const o=Cesium__namespace.Cartesian2[s(4124)](e),c=t/2,_=Math.min(o/c,1);this[s(4200)]=.5*_*_+.5,this._container_rotationArc.style.cssText=s(i._0x47aff0)+this[s(i._0x390453)]+`rad);
      opacity: `+this[s(i._0x5a7609)]}_orbitMouseMoveFunction(e){const t=_0x5e32ae;this._updateAngleAndOpacity(this[t(1561)](e),this[t(1015)][t(4005)])}_orbitMouseUpFunction(){const e={_0x4549c1:2799,_0x33e740:1368,_0x346d44:1756,_0x10505a:2128,_0x1be69c:1256},t=_0x5e32ae;document.removeEventListener(t(e._0x4549c1),this._mouseMoveHandle,![]),document[t(e._0x33e740)]("mouseup",this._mouseUpHandle,![]),this._map[t(1220)](EventType.clockTick,this._orbitTickFunction,this),this[t(1185)]=void 0,this[t(e._0x346d44)]=void 0,this._container_rotationArc.style[t(e._0x10505a)]=t(3142),this._container_inner.className=this._container_inner[t(e._0x1be69c)].replace("compass-inner-active","")}_rotate(e){const t={_0x5c6c77:1890,_0xa5be9e:979,_0xfd5949:3211,_0x23766e:4227,_0x48da26:1756,_0x274f46:1185,_0x57e660:3724,_0x384c0a:2911,_0x23ebeb:3875,_0x5a9883:683},i={_0x3b5063:3951},s=_0x5e32ae,n=this[s(t._0x5c6c77)].scene,o=n[s(2792)],c=n[s(3595)];if(n.mode===Cesium__namespace.SceneMode[s(2888)]||n.mode===Cesium__namespace.SceneMode.SCENE2D||!c[s(t._0xa5be9e)]||!c[s(2368)]&&(n[s(t._0xfd5949)]===Cesium__namespace.SceneMode.COLUMBUS_VIEW||n[s(t._0xfd5949)]===Cesium__namespace.SceneMode.SCENE3D&&!c[s(t._0x23766e)]))return;if(this._mouseMoveHandle=l=>{this[s(i._0x3b5063)](l)},this[s(t._0x48da26)]=()=>{this._rotateMouseUpFunction()},document.removeEventListener("mousemove",this[s(t._0x274f46)],![]),document.removeEventListener(s(t._0x57e660),this._mouseUpHandle,![]),this._rotateInitialCursorAngle=Math.atan2(-e.y,e.x),this._map.trackedEntity)this._rotateFrame=void 0;else{const l=this._getCameraFocus(!![]);!l||n.mode===Cesium__namespace.SceneMode.COLUMBUS_VIEW&&!c.enableLook&&!c[s(2754)]?this._rotateFrame=Cesium__namespace.Transforms[s(3684)](o.positionWC,n.globe.ellipsoid):this._rotateFrame=Cesium__namespace[s(t._0x384c0a)].eastNorthUpToFixedFrame(l,n.globe[s(t._0x23ebeb)])}let _;this._rotateFrame&&(_=Cesium__namespace.Matrix4.clone(o[s(t._0x5a9883)]),o.lookAtTransform(this._rotateFrame)),this._rotateInitialCameraAngle=-o.heading,this._rotateFrame&&_&&o.lookAtTransform(_),document.addEventListener("mousemove",this._mouseMoveHandle,![]),document.addEventListener("mouseup",this._mouseUpHandle,![])}_rotateMouseMoveFunction(e){const t={_0x4584ac:1530,_0x48d44f:1379},i=_0x5e32ae,s=this._map.camera,n=this._getVector(e),o=Math.atan2(-n.y,n.x),c=o-this._rotateInitialCursorAngle,_=Cesium__namespace.Math.zeroToTwoPi(this._rotateInitialCameraAngle-c);let l;this._rotateFrame&&(l=Cesium__namespace.Matrix4[i(4246)](s[i(683)]),s.lookAtTransform(this[i(t._0x4584ac)]));const h=-s.heading;s[i(t._0x48d44f)](_-h),this._rotateFrame&&l&&s.lookAtTransform(l)}[_0x5e32ae(2515)](){const e={_0x398ee7:1756},t=_0x5e32ae;document.removeEventListener("mousemove",this._mouseMoveHandle,![]),document.removeEventListener("mouseup",this._mouseUpHandle,![]),this._mouseMoveHandle=void 0,this[t(e._0x398ee7)]=void 0}_getVector(e){const t={_0x51ab44:2497},i=_0x5e32ae,s=this._compassRectangle,n=new Cesium__namespace.Cartesian2((s.right-s.left)/2,(s[i(3975)]-s.top)/2),o=new Cesium__namespace[i(t._0x51ab44)](e.clientX-s[i(1719)],e[i(2331)]-s.top),c=new Cesium__namespace[i(2497)];return Cesium__namespace[i(2497)].subtract(o,n,c),c}}register$1(_0x5e32ae(1864),Compass);const geodesic=new Cesium__namespace.EllipsoidGeodesic,BASE=[1,2,3,5],DIS=[...BASE,...BASE.map(r=>r*10),...BASE[_0x5e32ae(3465)](r=>r*100),...BASE.map(r=>r*1e3),...BASE.map(r=>r*1e4),...BASE.map(r=>r*1e5),...BASE[_0x5e32ae(3465)](r=>r*1e6)];class DistanceLegend extends BaseControl{get distance(){return this._currDistance}[_0x5e32ae(3118)](){const e={_0x18102c:2899,_0xfbdad:3886,_0x4969b9:4190,_0x305de5:1541,_0x4065c1:3598},t=_0x5e32ae;this._container=create$3("div",t(1445)),this[t(e._0x18102c)].style[t(e._0xfbdad)]=this[t(e._0x4969b9)](),this._labelEl=create$3(t(e._0x305de5),t(e._0x4065c1),this._container),this._scaleBarEl=create$3("div","legend-scale-bar",this._container),this._container.style.visibility=t(3142),this._lastUpdate=Cesium__namespace.getTimestamp()}[_0x5e32ae(4190)](){const e={_0x43c7d2:515,_0x3d960d:3798,_0x57b158:1194,_0x4d4bb0:3975,_0x3c011e:1719,_0x355048:3798,_0x38d0ef:1719,_0x3ed3a6:2893},t=_0x5e32ae;var i;const s={};Cesium__namespace[t(e._0x43c7d2)](this.options.top)&&this[t(e._0x3d960d)][t(1194)]!==""?s[t(e._0x57b158)]=this.options.top:Cesium__namespace.defined(this[t(3798)][t(e._0x4d4bb0)])&&this.options.bottom!==""&&(s.bottom=this.options[t(3975)]),Cesium__namespace.defined(this.options[t(e._0x3c011e)])&&this[t(e._0x355048)].left!==""?s.left=this.options[t(e._0x38d0ef)]:Cesium__namespace.defined(this.options[t(2893)])&&this[t(e._0x355048)][t(e._0x3ed3a6)]!==""&&(s.right=this.options.right);let n="";for(const o in s)n+=o+": "+s[o]+";";return n||"left: 120px; bottom: "+((i=this._map[t(2695)][t(1475)])!==null&&i!==void 0&&i.show?"27":"2")+t(1668)}[_0x5e32ae(4158)](){const e=_0x5e32ae;this._map.on(EventType.postRender,this[e(2259)],this)}_removedHook(){const e={_0x3435be:2259},t=_0x5e32ae;this._map.off(EventType.postRender,this[t(e._0x3435be)],this)}_updateContent(e,t){const i={_0x25c89e:1785,_0x4aa0fd:650,_0x3942e6:2899},s=_0x5e32ae,n=Cesium__namespace.getTimestamp();if(n<this._lastUpdate+250||!this._labelEl||!this[s(i._0x25c89e)])return;this._lastUpdate=n;const o=e.canvas.clientWidth,c=e.canvas.clientHeight,_=e.camera.getPickRay(new Cesium__namespace.Cartesian2(o/2|0,c-1)),l=e.camera.getPickRay(new Cesium__namespace.Cartesian2(1+o/2|0,c-1)),h=e[s(1329)].pick(_,e),f=e[s(1329)].pick(l,e);if(!h||!f)return;geodesic.setEndPoints(e.globe.ellipsoid.cartesianToCartographic(h),e.globe.ellipsoid[s(i._0x4aa0fd)](f));const m=geodesic[s(997)],g=100;let C=0;for(let E=DIS[s(3402)]-1;E>=0;--E)if(DIS[E]/m<g){C=DIS[E];break}if(C){this._currDistance!==C&&(this._currDistance=C,this.fire(EventType.change,{distance:C})),this[s(i._0x3942e6)][s(4114)].visibility="visible",this[s(1587)].innerHTML=C>=1e3?C/1e3+" km":C+" m";const E=C/m|0;this._scaleBarEl[s(4114)].cssText="width: "+E+"px; left: "+(125-E)/2+"px;"}}}register$1("distanceLegend",DistanceLegend);const icon$2=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="10px" height="20px" viewBox="0 0 19 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <path d="M0.6551724,2.3448276 L0.6551724,25.6551724 C0.6551724,26.6454761 1.4579722,27.4482759 2.4482759,27.4482759 C3.4385796,27.4482759 4.2413793,26.6454761 4.2413793,25.6551724 L4.2413793,2.3448276 C4.2413793,1.3545239 3.4385796,0.5517241 2.4482759,0.5517241 C1.4579722,0.5517241 0.6551724,1.3545239 0.6551724,2.3448276 L0.6551724,2.3448276 Z M7.6551724,2.3448276 L7.6551724,25.6551724 C7.6551724,26.6454761 8.4579722,27.4482759 9.4482759,27.4482759 C10.4385796,27.4482759 11.2413793,26.6454761 11.2413793,25.6551724 L11.2413793,2.3448276 C11.2413793,1.3545239 10.4385796,0.5517241 9.4482759,0.5517241 C8.4579722,0.5517241 7.6551724,1.3545239 7.6551724,2.3448276 L7.6551724,2.3448276 Z M14.6551724,2.3448276 L14.6551724,25.6551724 C14.6551724,26.6454761 15.4579722,27.4482759 16.4482759,27.4482759 C17.4385796,27.4482759 18.2413793,26.6454761 18.2413793,25.6551724 L18.2413793,2.3448276 C18.2413793,1.3545239 17.4385796,0.5517241 16.4482759,0.5517241 C15.4579722,0.5517241 14.6551724,1.3545239 14.6551724,2.3448276 L14.6551724,2.3448276 Z" id="splitter"></path>
</svg>
`;class MapSplit extends BaseControl{get type(){return"mapSplit"}get leftLayer(){return this._leftLayer}set leftLayer(e){const t={_0x2e0cec:2339,_0x229a07:1022};this._leftLayer&&(this._leftLayer.forEach(i=>{i._hasRemoveByMapSplit&&i.remove()}),this._leftLayer=null),e&&(!Array.isArray(e)&&(e=[e]),this._leftLayer=[],e.forEach(i=>{const s=_0x5210;i=this.setLayerSplitDirection(i,Cesium__namespace[s(t._0x2e0cec)][s(t._0x229a07)]),this._leftLayer[s(3759)](i)}))}get rightLayer(){return this[_0x5e32ae(3995)]}set[_0x5e32ae(884)](e){const t={_0x420b66:3995,_0xdfcc45:3845},i={_0x3d577f:3590,_0x4332ac:3759},s={_0x4a7f9c:2004},n=_0x5e32ae;this._rightLayer&&(this._rightLayer.forEach(o=>{const c=_0x5210;o._hasRemoveByMapSplit&&o[c(s._0x4a7f9c)]()}),this[n(t._0x420b66)]=null),e&&(!Array[n(t._0xdfcc45)](e)&&(e=[e]),this._rightLayer=[],e.forEach(o=>{const c=n;o=this[c(i._0x3d577f)](o,Cesium__namespace.SplitDirection[c(4313)]),this._rightLayer[c(i._0x4332ac)](o)}))}_mountedHook(){const e={_0x4e4166:2669,_0x142102:3369,_0x31e5ce:2899,_0x2f9ae7:1607,_0x4612da:2249},t={_0x577b8d:3678},i=_0x5e32ae;this[i(2899)]=create$3("div",i(e._0x4e4166));const s=parseDom(icon$2,!![],i(e._0x142102));this[i(e._0x31e5ce)].appendChild(s);const n=new Cesium__namespace.ScreenSpaceEventHandler(s),o=this;n[i(1607)](()=>{o._moveActive=!![]},Cesium__namespace.ScreenSpaceEventType.LEFT_DOWN),n.setInputAction(()=>{o._moveActive=!![]},Cesium__namespace.ScreenSpaceEventType.PINCH_START),n.setInputAction(c=>{o[i(2184)](c)},Cesium__namespace.ScreenSpaceEventType[i(1312)]),n[i(e._0x2f9ae7)](c=>{o[i(2184)](c)},Cesium__namespace.ScreenSpaceEventType.PINCH_MOVE),n.setInputAction(()=>{o._moveActive=![]},Cesium__namespace[i(e._0x4612da)].LEFT_UP),n.setInputAction(()=>{const c=i;o[c(t._0x577b8d)]=![]},Cesium__namespace.ScreenSpaceEventType.PINCH_END)}[_0x5e32ae(4158)](){const e={_0x2873b5:2899,_0x7af3fa:2184,_0x1b8d73:3798},t=_0x5e32ae;this._map.scene.splitPosition=.5,this[t(e._0x2873b5)].style.left="50%",this[t(e._0x7af3fa)](),this.options.leftLayer&&(this.leftLayer=this[t(3798)].leftLayer),this[t(e._0x1b8d73)][t(884)]&&(this.rightLayer=this.options[t(884)])}[_0x5e32ae(2442)](){const e={_0x3184eb:3107},t=_0x5e32ae;this._map[t(e._0x3184eb)].splitPosition=0,this.leftLayer=null,this[t(884)]=null}_moveHandler(e){const t={_0x3423f8:1890},i=_0x5e32ae;if(!this[i(3678)]||!this.enabled)return;const s=e?e.endPosition.x:0,n=(this._container[i(1844)]+s)/this[i(2899)][i(2675)].offsetWidth;n<0||n>1||(this._container.style.left=100*n+"%",this[i(t._0x3423f8)][i(3107)].splitPosition=n,this.fire(EventType.mouseMove,{splitPosition:n}))}setLayerSplitDirection(e,t){const i={_0x12e88b:3126},s={_0x5e2dca:746,_0x2ee1a9:3097},n=_0x5e32ae;return!e[n(i._0x12e88b)]&&this._map&&(e.type&&!e._onAdd&&(e=create$2(e)),this._map.addLayer(e),e._hasRemoveByMapSplit=!![]),e.readyPromise[n(549)](o=>{const c=n;if(o.hasChildLayer)for(let _=0;_<o.arrLayer[c(3402)];_++){const l=o[c(s._0x5e2dca)][_].layer;l&&(l[c(s._0x2ee1a9)]=t)}else{const _=o.layer;_&&(_.splitDirection=t)}}),e}}register$1(_0x5e32ae(2817),MapSplit);class SceneEvent{constructor(e){const t={_0x3f22c2:3107},i=_0x5e32ae;this._map=e,this._camera=e.camera,this[i(1597)]=e[i(t._0x3f22c2)],this[i(3803)]=e.scene.globe,this._clock=e[i(1949)]}_getEventByType(e){const t={_0x57480b:3406,_0x13b969:3011,_0x354490:2369,_0x4ab418:1597,_0x42b8e7:1597,_0x3b9c29:2841,_0x1fc74b:1597,_0x3aaab8:1097},i=_0x5e32ae;switch(e){case EventType[i(t._0x57480b)]:return this[i(952)][i(t._0x13b969)];case EventType.cameraMoveEnd:return this._camera[i(2283)];case EventType[i(t._0x354490)]:return this._camera.changed;case EventType.preUpdate:return this._scene.preUpdate;case EventType.postUpdate:return this[i(1597)][i(4123)];case EventType.preRender:return this[i(1597)].preRender;case EventType.postRender:return this[i(t._0x4ab418)].postRender;case EventType.renderError:return this[i(t._0x42b8e7)].renderError;case EventType[i(t._0x3b9c29)]:return this._scene.morphStart;case EventType.morphComplete:return this[i(t._0x1fc74b)].morphComplete;case EventType.clockTick:return this._clock[i(2020)];case EventType[i(t._0x3aaab8)]:return this[i(3862)].onStop;case EventType.terrainChange:return this._globe.terrainProviderChanged;case EventType.tileLoadProgress:return this._globe.tileLoadProgressEvent;default:return null}}hasType(e){return!!this._getEventByType(e)}on(e,t,i){if(!t)return;const s=this._getEventByType(e);if(s)return s.addEventListener(t,i||this)}off(e,t,i){const s={_0x43277d:1636},n=_0x5e32ae,o=this[n(s._0x43277d)](e);if(o)return o.removeEventListener(t,i||this)}listens(e){const t=_0x5e32ae,i=this[t(1636)](e);if(!i||i.numberOfListeners===0)return![];for(let s=0;s<i[t(3315)].length;s++)if(i[t(3315)][s]===this._map)return!![];return![]}}const DEF_OPTIONS={enabledMoveTarget:!![],moveDelay:30,pickWidth:4,pickHeight:4,pickLimit:9};class MouseEvent{constructor(e,t={}){t={...DEF_OPTIONS,...t},this._map=e,this._viewer=e.viewer,this.options=t,this.moveDelay=t.moveDelay,this._enabledMoveTarget=t.enabledMoveTarget,this._selected=void 0,this._setInputAction()}get enabledMoveTarget(){return this[_0x5e32ae(2686)]}set enabledMoveTarget(e){this._enabledMoveTarget=e,this.clearMoveTargetDelay()}get[_0x5e32ae(3200)](){return this[_0x5e32ae({_0x34fdcb:2963}._0x34fdcb)]}set[_0x5e32ae(3200)](e){this._noPickEntity=e}setOptions(e){const t={_0x27146d:3402,_0x3f4326:2686},i=_0x5e32ae;return!e||Object.keys(e)[i(t._0x27146d)]===0?this:(this.options=merge(this[i(3798)],e),this.moveDelay=this.options.moveDelay,this[i(t._0x3f4326)]=this[i(3798)].enabledMoveTarget,this)}clearMoveTargetDelay(){const e={_0x3d75c8:1927},t=_0x5e32ae;this[t(e._0x3d75c8)]&&(clearTimeout(this._moveDelayTik),this[t(1927)]=null)}[_0x5e32ae(2670)](){const e={_0x41fd88:2114,_0x914ffa:1607,_0x5b44c8:1357,_0x4c46e5:1607,_0x46929c:3412,_0x5149df:1512,_0x278110:1890},t={_0x462427:3320},i={_0x76819d:3492},s={_0x302101:3320,_0x3e17a8:2808},n={_0x197e81:3320,_0x96825c:628},o={_0x4969ba:4217},c=_0x5e32ae;this.handler=new Cesium__namespace.ScreenSpaceEventHandler(this._viewer.canvas),this.handler[c(1607)](_=>{this._clickHandler(_)},Cesium__namespace.ScreenSpaceEventType.LEFT_CLICK),this.handler.setInputAction(_=>{this[c(3320)](_,EventType.dblClick)},Cesium__namespace.ScreenSpaceEventType[c(e._0x41fd88)]),this.handler.setInputAction(_=>{const l=c;this._globeMouseHandler(_,[EventType[l(o._0x4969ba)],EventType[l(1833)]])},Cesium__namespace[c(2249)].LEFT_DOWN),this[c(1357)][c(1607)](_=>{this._globeMouseHandler(_,[EventType.leftUp,EventType.mouseUp])},Cesium__namespace.ScreenSpaceEventType[c(3550)]),this.handler[c(1607)](_=>{const l=c,h=_.endPosition,f=getCurrentMousePosition(this[l(1334)].scene,h,this.noPickEntity);_.cartesian=f,this.enabledMoveTarget&&(this.clearMoveTargetDelay(),this.moveDelay>0?this._moveDelayTik=setTimeout(m=>{this._moveDelayTik=null,this._mouseMoveHandler(_)},this.moveDelay):this._mouseMoveHandler(_)),this._map.fire(EventType.mouseMove,{..._,cartesian:f,windowPosition:h})},Cesium__namespace.ScreenSpaceEventType.MOUSE_MOVE),this.handler.setInputAction(_=>{this._map.fire(EventType.wheel,_)},Cesium__namespace[c(2249)].WHEEL),this[c(1357)].setInputAction(_=>{this._globeMouseHandler(_,EventType.rightClick)},Cesium__namespace.ScreenSpaceEventType.RIGHT_CLICK),this[c(1357)][c(e._0x914ffa)](_=>{const l=c;this[l(n._0x197e81)](_,[EventType[l(n._0x96825c)],EventType.mouseDown])},Cesium__namespace[c(2249)].RIGHT_DOWN),this[c(1357)].setInputAction(_=>{const l=c;this[l(s._0x302101)](_,[EventType[l(2546)],EventType[l(s._0x3e17a8)]])},Cesium__namespace[c(2249)].RIGHT_UP),this.handler[c(1607)](_=>{this._globeMouseHandler(_,EventType.middleClick)},Cesium__namespace.ScreenSpaceEventType.MIDDLE_CLICK),this[c(e._0x5b44c8)].setInputAction(_=>{this._globeMouseHandler(_,[EventType.middleDown,EventType.mouseDown])},Cesium__namespace[c(2249)].MIDDLE_DOWN),this.handler[c(e._0x4c46e5)](_=>{this._globeMouseHandler(_,[EventType.middleUp,EventType.mouseUp])},Cesium__namespace.ScreenSpaceEventType.MIDDLE_UP),this.handler.setInputAction(_=>{const l=c;this._globeMouseHandler(_,EventType[l(i._0x76819d)])},Cesium__namespace.ScreenSpaceEventType.PINCH_START),this.handler.setInputAction(_=>{const l=c;this[l(t._0x462427)](_,EventType[l(2979)])},Cesium__namespace.ScreenSpaceEventType.PINCH_END),this.handler.setInputAction(_=>{this[c(1890)].fire(EventType.pinchMove,_)},Cesium__namespace.ScreenSpaceEventType.PINCH_MOVE),this._map.canvas.addEventListener(c(4141),this[c(e._0x46929c)].bind(this)),this._map[c(3300)].addEventListener(c(4308),this._onKeyUp.bind(this)),this._map.canvas[c(2732)](c(e._0x5149df),this._onMouseOver.bind(this)),this[c(e._0x278110)].canvas.addEventListener("mouseout",this._onMouseOut.bind(this))}[_0x5e32ae(1665)](e){this._map.fire(EventType.mouseOver,{mouseEvent:e})}_onMouseOut(e){const t={_0x386217:1404},i=_0x5e32ae;this._map[i(t._0x386217)](EventType.mouseOut,{mouseEvent:e})}_onKeyDown(e){const t={_0x23030c:3128},i=_0x5e32ae;this[i(1890)].fire(EventType[i(4141)],{mouseEvent:e,ctrlKey:e[i(2609)],altKey:e.altKey,metaKey:e.metaKey,shiftKey:e.shiftKey,code:e.code,key:e[i(t._0x23030c)],keyCode:e.keyCode})}_onKeyUp(e){const t=_0x5e32ae;this._map.fire(EventType.keyup,{mouseEvent:e,ctrlKey:e.ctrlKey,altKey:e.altKey,metaKey:e.metaKey,shiftKey:e[t(1566)],code:e.code,key:e.key,keyCode:e[t(1396)]})}getPickTarget(e,t){const i={_0x34fcd8:1334,_0x41b5b3:2812,_0x5a6ea6:1334,_0x37d78f:555,_0x4fae6d:3107,_0x16914e:3798,_0x350a70:2822,_0x38609e:3759,_0x293021:2328,_0x4badfc:1736,_0x161bfc:3200},s=_0x5e32ae;if(t!=null&&t.graphic)return t;let n;try{n=this[s(i._0x34fcd8)].scene.pick(e,this.options.pickWidth,this.options.pickHeight)}catch{}if(this._lastPickedInfo&&n&&this._lastPickedInfo[s(i._0x41b5b3)]===n){let f=t==null?void 0:t.cartesian;if(!f){var o,c;if(((o=this[s(1736)])===null||o===void 0||(c=o.layer)===null||c===void 0?void 0:c.type)==="3dtiles"){const m=this[s(i._0x5a6ea6)].scene[s(i._0x37d78f)];this._viewer.scene.onlyPickModelPosition=!![],f=getCurrentMousePosition(this._viewer.scene,e,this.noPickEntity),this._viewer.scene[s(555)]=m}else f=getCurrentMousePosition(this._viewer[s(3107)],e,this.noPickEntity)}return{...t,...this._lastPickedInfo,cartesian:f,windowPosition:e}}let _=this._getTargetInfo(n,e);if(n&&this[s(467)](_)){const f=this[s(i._0x5a6ea6)][s(i._0x4fae6d)].drillPick(e,this.options.pickLimit,this[s(i._0x16914e)].pickWidth,this.options.pickHeight),m=[];if(f&&f.length>0)for(let g=0,C=f.length;g<C;g++){const E=f[g];if(n===E){var l;m.push((l=_)===null||l===void 0?void 0:l.graphic);continue}const P=this[s(i._0x350a70)](E,e);if(m[s(i._0x38609e)](P==null?void 0:P.graphic),!(this._allowDrillPick(P)&&g!==C-1)){_=P,_[s(i._0x293021)]=f,_.graphics=m;break}}}else this[s(i._0x4badfc)]=_;let h=t==null?void 0:t.cartesian;return!h&&(h=getCurrentMousePosition(this[s(1334)][s(3107)],e,this[s(i._0x161bfc)])),{...t,..._,cartesian:h,windowPosition:e}}_allowDrillPick(e){const t=_0x5e32ae;var i,s;let n=(i=e[t(2118)])===null||i===void 0?void 0:i.allowDrillPick;return n?isFunction(n)?n(e):!![]:(n=(s=e.layer)===null||s===void 0?void 0:s.allowDrillPick,n?isFunction(n)?n(e):!![]:![])}_getTargetInfo(e,t){const i={_0x473f45:2266,_0x37c90b:2266,_0x31fb19:3062,_0x36af57:931},s={_0x4f3429:2033,_0x5403be:1538,_0x47d7f3:1538,_0x2553cd:1538,_0x2296cb:2033},n=_0x5e32ae;var o,c;if(!Cesium__namespace[n(515)](e))return{};let _,l,h,f;if(Cesium__namespace.defined(e.id)&&e.id instanceof Cesium__namespace.Entity)_=e.id,f=_.id;else if(e instanceof Cesium__namespace.Cesium3DTileFeature){_=e,f="3dtile_feature_"+e._batchId;const P=e[n(2834)];l=this._map.getLayerById(P[n(i._0x473f45)]),h={attr:get3DTileFeatureAttr(e),feature:e}}else if(e[n(1283)]&&e.content instanceof(Cesium__namespace[n(3016)]||Cesium__namespace.PointCloud)){var m,g;_=e[n(1283)],f="3dtile_pnts_"+((m=e.content)===null||m===void 0||(g=m[n(1223)])===null||g===void 0?void 0:g.key)||0;const P=e.primitive;l=this._map.getLayerById(P[n(i._0x37c90b)]),e.batchTable}else if((o=e[n(1283)])!==null&&o!==void 0&&(c=o.tile)!==null&&c!==void 0&&c.i3sNode){const P=e.content.tile.i3sNode,w=this._viewer.scene.pickPosition(t);w&&(h={attr:P.loadFields().then(function(){return P.getFieldsForPickedPosition(w)}),feature:P}),_=P,f=n(3349)+P._nodeIndex||0,l=this._map[n(i._0x31fb19)](P._dataProvider._mars3d_layerId)}else Cesium__namespace.defined(e.primitive)?(_=e.primitive,f=e.id):logInfo("getPickTarget:拾取到了对象，请确认是否要做处理",e);if(_&&(l=l||this._map.getLayerById(_._mars3d_layerId),l&&l.getGraphicById))if(h=h||l[n(3388)](_._mars3d_graphicId),h){if(f=h.id,h[n(2603)]){const P=e.id||e.instanceId;if(P){var C;f=P,e.data=h.getPickedObject(P),h.attr=(C=e[n(i._0x36af57)])===null||C===void 0?void 0:C.attr}}}else{var E;(E=_)!==null&&E!==void 0&&E._clusterData&&(h=_._clusterData)}return{id:f,pickedObject:e,sourceTarget:_,czmObject:_,layer:l,graphic:h,hasClickEvent:function(){const P=n;if(this[P(2118)]){if(isFunction(this.graphic.listens)&&this.graphic.listens(EventType.click))return!![];if(isFunction(this.graphic[P(s._0x4f3429)])&&h.hasPopup())return!![]}if(this[P(s._0x5403be)]){var w;if(isFunction(this[P(s._0x47d7f3)].listens)&&this.layer.listens(EventType.click))return!![];if(isFunction(this[P(s._0x2553cd)].hasPopup)&&(w=l)!==null&&w!==void 0&&w[P(s._0x2296cb)]())return!![]}return![]}}}getPicked(e){const t={_0x130bfd:2812,_0x1d32be:2796,_0x4ffb36:3150},i=_0x5e32ae;if(!e||!e[i(2812)])return;const s=e[i(t._0x130bfd)],n=e.czmObject;if(n instanceof Cesium__namespace.Entity){const f=s.primitive._pickIds;if((f==null?void 0:f.length)>0)return f.find(g=>g.object===s)}else if(n instanceof Cesium__namespace.Cesium3DTileFeature){if(s[i(t._0x1d32be)])return s[i(t._0x1d32be)]}else if(s.content&&s.content instanceof(Cesium__namespace.PointCloud3DTileContent||Cesium__namespace[i(2191)])){var o;return(o=s[i(1283)])===null||o===void 0?void 0:o._pickId}else{var c,_;if(s.primitive.pickId)return s[i(t._0x4ffb36)].pickId;if(s.primitive._pickIds)return s.primitive[i(3170)];if((c=s.content)!==null&&c!==void 0&&(_=c._model)!==null&&_!==void 0&&_[i(3170)]){var l,h;return(l=s.content)===null||l===void 0||(h=l._model)===null||h===void 0?void 0:h._pickIds}}}pickImageryLayerFeatures(e){const t={_0x280b91:3367},i=_0x5e32ae,s=LngLatPoint.toCartesian(e),n=Cesium__namespace[i(1450)][i(t._0x280b91)](this[i(1334)].scene,s);return this._pickImageryLayerFeatures(n,{cartesian:s})}_pickImageryLayerFeatures(e,t){const i={_0xfabeb:1334,_0x252a96:989},s=_0x5e32ae,n=this[s(i._0xfabeb)].scene,o=n.camera[s(i._0x252a96)](e),c=n[s(753)].pickImageryLayerFeatures(o,n);return c&&c.then?c[s(549)](_=>this._clickTileGraphic(_,e,t==null?void 0:t.cartesian)):Promise.resolve()}_clickTileGraphic(e,t,i){const s={_0x3a7ffa:515,_0x20239e:3402,_0x535fd9:446,_0x4ed5b5:3798,_0x4c5cc4:3292,_0x57cf43:931,_0x3bc318:1715,_0x22eebf:931,_0xa1d9b5:1948},n=_0x5e32ae;var o,c,_;if(!Cesium__namespace[n(s._0x3a7ffa)](e)||e[n(s._0x20239e)]===0)return;let l=e[0];const h=l[n(s._0x535fd9)],f=this[n(1890)].getLayerById(h._mars3d_layerId);if(f&&(o=f.options)!==null&&o!==void 0&&o[n(661)]){var m;const M=f[n(s._0x4ed5b5)].featureIndex;((m=f.options)===null||m===void 0?void 0:m.featureIndex)==="end"?l=e[e.length-1]:isNumber(M)?l=e[M]||l:isFunction(M)&&(l=M(e)||l)}const g={sourceTarget:h,layer:f,features:e,attr:l[n(s._0x4c5cc4)]||((c=l.data)===null||c===void 0?void 0:c.properties),cartesian:i,windowPosition:t};if(l[n(s._0x57cf43)]&&f&&((_=f.options)!==null&&_!==void 0&&_.highlight||f[n(1693)](EventType[n(1948)])))if(f.options.featureToGraphic){const M=f[n(3798)].featureToGraphic(l,g);if(M){var C;Array[n(3845)](M)?(g[n(2118)]=M.length>0?M[0]:null,g.graphics=M):(g.graphic=M,g.graphics=[M]),(C=g.graphic)!==null&&C!==void 0&&C.attr&&(g.attr=g[n(2118)].attr)}}else{const M=f.options.hasToGraphic??5e3;let T=!![];if(isBoolean(M))T=M;else if(isNumber(M)){var E;T=JSON.stringify(((E=l.data)===null||E===void 0?void 0:E.geometry)||{})[n(3402)]<M}else isFunction(M)&&(T=M(l));if(T){var P;const L=f==null||(P=f.options)===null||P===void 0?void 0:P[n(1483)],R=geoJsonToGraphics(l.data,{type:L==null?void 0:L.type,crs:l.crs||(f==null?void 0:f.crs),style:L});g.graphic=R.length>0?R[0]:null,g[n(s._0x3bc318)]=R}else{var w;logInfo("_clickTileGraphic: 当前数据太大，避免卡顿未进行解析，如需展示矢量对象，请在图层配置加 hasToGraphic:true 参数 ",f==null?void 0:f.options,(w=l[n(s._0x22eebf)])===null||w===void 0?void 0:w.geometry)}}return f&&f.fire(EventType[n(s._0xa1d9b5)],g,![]),this._map.fire(EventType.clickTileGraphic,g),g}[_0x5e32ae(1673)](e){const t={_0x124c4a:1402,_0x3c55b4:2682},i=_0x5e32ae;if(!e||!e.position)return![];const s=e.position,n=this[i(t._0x124c4a)](s,e);if(this._map.closeHighlight(n),n.sourceTarget){var o;this[i(2619)](EventType.click,n),this[i(1890)].fire(EventType.clickGraphic,n),(o=n.layer)!==null&&o!==void 0&&o.allowDrillPick&&this._pickImageryLayerFeatures(s,n)}else this._map.fire(EventType.click,n),this[i(1890)][i(1404)](EventType[i(t._0x3c55b4)],n),this[i(2629)](s,n)}_mouseMoveHandler(e){const t={_0xad6ec3:1274,_0x5ca1f6:1402},i=_0x5e32ae;if(!e||!e[i(t._0xad6ec3)])return![];const s=e[i(1274)],n=this[i(t._0x5ca1f6)](s,e),o=n.sourceTarget;o&&!o.noMouseMove?this.activateMouseOver(n):this[i(1218)](),this._map.fire(EventType.mouseMoveTarget,{czmObject:o,...e,...n})}activateMouseOver(e){const t={_0x34b3fd:2912,_0x3d6596:2118},i=_0x5e32ae;if(!(this._lastMouseOverItem&&e.id&&e.id===this._lastMouseOverItem.id)){if(this.activateMouseOut(),e[i(991)]&&e.hasClickEvent()){var s,n;let o=i(t._0x34b3fd);(s=e.graphic)!==null&&s!==void 0&&(n=s.style)!==null&&n!==void 0&&n.cursorCSS&&(o=e[i(t._0x3d6596)][i(4114)].cursorCSS),this._map.container[i(4114)].cursor=o}this[i(2619)](EventType[i(3986)],e),this._lastMouseOverItem=e}}activateMouseOut(){const e={_0x3c5f82:2619,_0x5489fc:755},t=_0x5e32ae;this[t(755)]!=null&&(this._map._setEditCursor(![]),this[t(e._0x3c5f82)](EventType[t(2088)],this._lastMouseOverItem),this[t(e._0x5489fc)]=null)}_globeMouseHandler(e,t){const i={_0xe828e2:2159},s=_0x5e32ae;if(!e||!e.position)return![];const n=e.position,o=this[s(1402)](n,e);Array.isArray(t)?t.forEach(c=>{const _=s;o.sourceTarget?this[_(2619)](c,o):this._map[_(1404)](c,o)}):o[s(i._0xe828e2)]?this.fireTargetEvent(t,o):this._map.fire(t,o)}[_0x5e32ae(2619)](e,t){const i={_0x47dedd:1404,_0x4b6ae9:1890},s=_0x5e32ae;var n,o,c;const _=t.sourceTarget[e];_&&typeof _=="function"&&_(t),(n=t.czmObject.eventTarget)===null||n===void 0||n[s(i._0x47dedd)](e,t),(o=t.graphic)!==null&&o!==void 0&&o.fire?t.graphic[s(i._0x47dedd)](e,t,!![]):(c=t[s(1538)])!==null&&c!==void 0&&c.fire?t.layer.fire(e,t,!![]):this[s(i._0x4b6ae9)].fire(e,t)}destroy(){const e={_0x1481ab:1357,_0x3198f7:757},t=_0x5e32ae;!this._graphicLayer&&(this._map.removeLayer(this._graphicLayer,!![]),delete this._graphicLayer),this[t(e._0x1481ab)][t(e._0x3198f7)](),delete this[t(1357)],this._map.canvas.removeEventListener(t(4141),this[t(3412)]),this[t(1890)].canvas[t(1368)](t(4308),this._onKeyUp)}}new Cesium__namespace.Cartographic;const rayScratch=new Cesium__namespace.Ray,cartesian3Scratch=new Cesium__namespace.Cartesian3;class ZoomNavigation{constructor(e){this.viewer=e}zoomIn(e=2,t){return e=1/e,this.zoom(e,t)}[_0x5e32ae(1704)](e=2,t){return this.zoom(e,t)}[_0x5e32ae(913)](e,t){const i={_0x1484d6:737,_0x438e54:3391,_0x1b72e7:4067,_0x194ab5:1597,_0x59a615:1704,_0xd06cc7:3875,_0x552541:3310,_0x2ad19c:1046,_0x41471b:3875,_0x11fc79:515,_0x5eaee9:435},s=_0x5e32ae,n=this[s(i._0x1484d6)].scene,o=n.screenSpaceCameraController;if(!t&&(!o.enableInputs||!o.enableZoom))return![];const c=n.camera;let _;switch(n.mode){case Cesium__namespace.SceneMode.COLUMBUS_VIEW:case Cesium__namespace.SceneMode[s(2888)]:case Cesium__namespace.SceneMode.SCENE2D:{const l=c.positionCartographic.height*(1-e);c.zoomIn(l);const h=o.minimumZoomDistance,f=o[s(i._0x438e54)],m=c.positionCartographic.height;if(m<h)return c.zoomOut(l),![];if(m<o[s(i._0x1b72e7)]){const g=o[s(i._0x194ab5)][s(435)];if(Cesium__namespace.defined(g)&&m<=g+h)return c.zoomOut(l),![]}return f&&m>f?(c[s(i._0x59a615)](l),![]):!![]}default:{let l;if(Cesium__namespace.defined(this.viewer.trackedEntity)?l=new Cesium__namespace.Cartesian3:(rayScratch.origin=c.positionWC,rayScratch.direction=c.directionWC,l=n.globe.pick(rayScratch,n,new Cesium__namespace.Cartesian3),Cesium__namespace.defined(l)&&(l=c.worldToCameraCoordinatesPoint(l,l))),Cesium__namespace.defined(l))_={direction:c.direction,up:c.up};else{const P=new Cesium__namespace.Ray(c.worldToCameraCoordinatesPoint(n.globe[s(i._0xd06cc7)][s(i._0x552541)](c.positionCartographic)),c[s(3779)]);if(l=Cesium__namespace.IntersectionTests[s(i._0x2ad19c)](P,n.globe[s(i._0x41471b)]),!Cesium__namespace[s(i._0x11fc79)](l))return![];_={heading:c.heading,pitch:c.pitch,roll:c.roll}}const h=Cesium__namespace.Cartesian3.subtract(c[s(2180)],l,cartesian3Scratch),f=Cesium__namespace.Cartesian3.multiplyByScalar(h,e,h),m=Cesium__namespace.Cartesian3.add(l,f,l);if(!Cesium__namespace.defined(m))return![];const g=o.minimumZoomDistance,C=o[s(i._0x438e54)],E=Cesium__namespace.Cartographic.fromCartesian(m).height;if(E<g)return![];if(E<o._minimumCollisionTerrainHeight){const P=o[s(1597)][s(i._0x5eaee9)];if(Cesium__namespace[s(i._0x11fc79)](P)&&E<=P+g)return![]}return C&&E>C?![]:(Cesium__namespace.defined(this[s(737)][s(2638)])||n[s(3211)]===Cesium__namespace.SceneMode.COLUMBUS_VIEW?c.position=m:c.flyTo({destination:m,orientation:_,duration:.5,convert:![]}),!![])}}}}class SceneOption{constructor(e){this._map=e,this._viewer=e.viewer,this.options={},this._init()}_init(){const e={_0x4ee52f:3107,_0x45fa6f:3478,_0x59fcb5:3622},t=_0x5e32ae;var i,s;if(this._viewer.cesiumWidget.creditContainer.style.display="none",this._viewer[t(3107)].screenSpaceCameraController.maximumZoomDistance=5e7,this._viewer[t(e._0x4ee52f)].backgroundColor=Cesium__namespace[t(2200)].TRANSPARENT,this[t(1334)].sceneModePicker&&(this._viewer.sceneModePicker.viewModel.duration=0),(i=this[t(1334)])===null||i===void 0||(s=i[t(e._0x45fa6f)])===null||s===void 0||s.viewModel[t(3749)].beforeExecute.addEventListener(n=>{const o=t;this._map[o(1932)](),n.cancel=!![]}),this._viewer._cesiumWidget._supportsImageRenderingPixelated=Cesium__namespace[t(1441)][t(626)](),this._viewer._cesiumWidget[t(e._0x59fcb5)]=!![],Cesium__namespace.FeatureDetection.supportsImageRenderingPixelated()){let n=window.devicePixelRatio;for(;n>=2;)n/=2;this[t(1334)].resolutionScale=n}}setOptions(e,t){return e=e||{},t=t||{},this.options=e,this._setViewerOption(t)._setCanvasOption(t)._setSceneOption(t)._setGlobeOption(t)._setCameraOption(t)._setClockOption(t),this}[_0x5e32ae(479)](e){const t={_0x436ca8:3798,_0x5af40a:1334},i=_0x5e32ae;return e.center?this._map[i(1227)](this.options.center,{duration:0}):e.extent&&this[i(1890)].flyToExtent(this.options[i(3569)],{duration:0}),this._viewer[i(4193)]=this[i(t._0x436ca8)][i(4193)]??![],(this.options[i(2116)]??!![])&&this._viewer[i(1792)][i(1964)](Cesium__namespace.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),this.options.resolutionScale&&(this._viewer.resolutionScale=this.options.resolutionScale),Cesium__namespace.defined(this[i(3798)].terrainShadows)&&(isBoolean(this.options.terrainShadows)?this._viewer.terrainShadows=this[i(t._0x436ca8)].terrainShadows?Cesium__namespace.ShadowMode.ENABLED:Cesium__namespace.ShadowMode.DISABLED:this[i(t._0x5af40a)].terrainShadows=this.options.terrainShadows),this}_setCanvasOption(e){const t=_0x5e32ae,i=this._viewer.canvas;return i[t(4136)]("tabindex",this.options.tabIndex??0),i.onclick=s=>{i.focus()},this}[_0x5e32ae(3036)](e){const t={_0x390867:575,_0x5f0309:4053,_0x6a9ab3:2973,_0x45591a:3223,_0x1f08e3:3707,_0x565e12:3421},i=_0x5e32ae,s=this._viewer.scene,n=this[i(3798)];switch(s.sun.show=n.showSun??!![],s.moon[i(t._0x390867)]=n.showMoon??!![],s.skyBox[i(575)]=n[i(t._0x5f0309)]??!![],s.skyAtmosphere.show=!!(n.showSkyAtmosphere??!![]),s.fog[i(968)]=n.fog??!![],s.postProcessStages.fxaa[i(968)]=n[i(t._0x6a9ab3)]??!![],s.highDynamicRange=n.highDynamicRange??![],n.backgroundColor&&(s.backgroundColor=Cesium__namespace[i(2200)].fromCssColorString(n.backgroundColor)),Cesium__namespace.defined(n[i(940)])&&(s._useOIT=n.orderIndependentTranslucency),n.sceneMode){case Cesium__namespace[i(3850)][i(1183)]:s[i(t._0x45591a)](0);break;case Cesium__namespace.SceneMode.COLUMBUS_VIEW:s.morphToColumbusView(0);break;case Cesium__namespace[i(3850)][i(t._0x1f08e3)]:s[i(t._0x565e12)](0);break}return this}_setGlobeOption(e){const t={_0x1af406:575},i=_0x5e32ae,s=this._viewer.scene.globe,n=this.options.globe??{};return merge(s,{...n,show:n[i(t._0x1af406)]??!![],depthTestAgainstTerrain:n.depthTestAgainstTerrain??![],baseColor:Cesium__namespace.Color.fromCssColorString(n.baseColor||"#546a53"),showGroundAtmosphere:n[i(475)]??!![],enableLighting:n.enableLighting??![]}),this}_setCameraOption(e){const t={_0x2bd98b:1546},i=_0x5e32ae,s=this._viewer.scene[i(3595)],n=this.options.cameraController??{};return merge(s,{...n,_zoomFactor:n.zoomFactor||3,minimumZoomDistance:n.minimumZoomDistance??1,maximumZoomDistance:n.maximumZoomDistance??5e7,minimumCollisionTerrainHeight:n.minimumCollisionTerrainHeight??15e3,enableRotate:n.enableRotate??!![],enableTranslate:n.enableTranslate??!![],enableTilt:n.enableTilt??!![],enableZoom:n.enableZoom??!![],enableCollisionDetection:n.enableCollisionDetection??!![]}),n[i(1546)]===![]&&(this._viewer.camera[i(t._0x2bd98b)]=void 0),this}_setClockOption(e){const t={_0x1d2215:1050,_0x23a92f:1050,_0x242034:3932,_0x1f13ea:1120,_0x4ec0a0:837,_0x5133da:2962,_0x4bea82:527,_0x210b06:2454},i=_0x5e32ae,s=this[i(1334)].clock,n=this.options.clock??{};return n[i(t._0x1d2215)]=n.shouldAnimate??this.options.shouldAnimate??!![],s[i(t._0x23a92f)]=n.shouldAnimate,n.startTime&&(s.startTime=this._getJulianDate(n[i(t._0x242034)]),s.currentTime=s.startTime),n.stopTime&&(s.stopTime=this[i(t._0x1f13ea)](n.stopTime)),n.currentTime&&(s[i(837)]=this._getJulianDate(n[i(t._0x4ec0a0)]),!n.startTime&&(s.startTime=s.currentTime[i(4246)]()),!n.stopTime&&(s[i(t._0x5133da)]=Cesium__namespace[i(t._0x4bea82)][i(2357)](s[i(837)],1,new Cesium__namespace.JulianDate))),n[i(2454)]&&(s[i(t._0x210b06)]=n.multiplier),this}_getJulianDate(e){return isString(e)?e.indexOf("Z")===-1?Cesium__namespace.JulianDate.fromDate(new Date(e)):Cesium__namespace.JulianDate.fromIso8601(e):e}}function initBeforeCreateDefaultValue(r){const e={_0x19b5e5:3140,_0x50747a:3088,_0x3f511c:3808},t=_0x5e32ae;var i,s;Cesium__namespace.Ion.defaultAccessToken=(r==null||(i=r[t(3107)])===null||i===void 0?void 0:i[t(1907)])||ion,Cesium__namespace.AnimationViewModel.defaultTicks=(r==null||(s=r[t(e._0x19b5e5)])===null||s===void 0?void 0:s.animationTicks)||[.1,.25,.5,1,2,5,10,15,30,60,120,300,600,900,1800,3600],Cesium__namespace.Camera[t(e._0x50747a)]=Cesium__namespace.Rectangle.fromDegrees(89.5,20.4,110.4,61.2),Cesium__namespace.RequestScheduler.maximumRequests=100,Cesium__namespace.RequestScheduler[t(e._0x3f511c)]=20}class PopupMgr extends BaseControl{constructor(e={}){super(e),this._depthTest=e.depthTest??!![]}get[_0x5e32ae(2170)](){return this._depthTest}set[_0x5e32ae(2170)](e){this._depthTest=e}_mountedHook(){const e=_0x5e32ae;this[e(2873)]=new GraphicLayer({private:!![]}),this[e(2873)]._closeAllControl=function(){}}_enabledHook(e){this._layer.show=e}_addedHook(){const e={_0x3aa4c1:1890,_0x4010e6:2965},t=_0x5e32ae;this[t(e._0x3aa4c1)][t(e._0x4010e6)](this._layer),this[t(3818)]()}_removedHook(){const e={_0x23910d:2642},t=_0x5e32ae;this._unbindEvent(),this[t(1890)][t(e._0x23910d)](this._layer)}[_0x5e32ae(3818)](){const e={_0x11c9da:1432},t=_0x5e32ae;this._map.on(EventType.click,this[t(e._0x11c9da)],this),this._map.on(EventType.clickTileGraphic,this._mouseClickHandler,this)}_unbindEvent(){const e={_0x5cb269:1432},t=_0x5e32ae;this._map.off(EventType.click,this[t(e._0x5cb269)],this),this._map[t(1220)](EventType.clickTileGraphic,this._mouseClickHandler,this)}_mouseClickHandler(e){const t={_0x86afb1:874,_0x451808:3798},i=_0x5e32ae;var s,n;if(!this.enabled||this._openByMouseEvent(e.czmObject,e)||this._openByMouseEvent(e.graphic,e)||this[i(t._0x86afb1)]((s=e.graphic)===null||s===void 0?void 0:s[i(3476)],e)||this[i(t._0x86afb1)](e.layer,e)||this._openByMouseEvent((n=e.layer)===null||n===void 0?void 0:n.parent,e))return;const o=this._layer.getGraphics();for(let c=0,_=o.length;c<_;c++){const l=o[c];l[i(t._0x451808)].closeOnClick!==![]&&l.remove(!![])}}_getConfig(e){return e._popupConfig||e.getPopupConfig&&e.getPopupConfig()}[_0x5e32ae(874)](e,t){const i={_0xe9be25:3663},s=_0x5e32ae;if(!e)return![];let n=this[s(i._0xe9be25)](e);return n===![]?!![]:n?(n={...n,...t},this[s(498)](t.cartesian,n),!![]):![]}close(e,t){const i={_0x2b8bb0:3798,_0x371c87:3798},s=_0x5e32ae;if(!this._layer)return;if(e){const g=this._layer.getGraphics();for(let C=0,E=g.length;C<E;C++){var n,o;const P=g[C];if(P[s(i._0x2b8bb0)][s(3891)]){var c;P.options.checkData((c=P.options)===null||c===void 0?void 0:c.attr,e)&&P.remove(!![])}else e===((n=P.options)===null||n===void 0||(o=n.event)===null||o===void 0?void 0:o.graphic)&&P.remove(!![])}return}if(t){const g=this._layer[s(2188)]();for(let C=0,E=g.length;C<E;C++){var _,l;const P=g[C];if(P.options.checkData){var h;P.options.checkData((h=P[s(i._0x371c87)])===null||h===void 0?void 0:h[s(1528)],t)&&P.remove(!![])}else t===((_=P.options)===null||_===void 0||(l=_.event)===null||l===void 0?void 0:l.layer)&&P[s(2004)](!![])}return}const f=this._layer.getGraphics();for(let g=0,C=f.length;g<C;g++){var m;const E=f[g];(((m=E[s(3798)])===null||m===void 0?void 0:m.autoClose)??!![])&&E.remove(!![])}}closeAll(){this[_0x5e32ae({_0x29098b:2873}._0x29098b)]&&this._layer.clear()}[_0x5e32ae(498)](e,t={}){const i={_0x5ddd4a:2118,_0x5b496d:2269,_0x28b722:4091,_0xaef488:2873},s=_0x5e32ae;var n;const o=t.options||{};(o==null?void 0:o.autoClose)??!![]?this[s(1293)]():t!=null&&t.graphic&&this.close(t[s(i._0x5ddd4a)]);let c=t.target;t.layer&&t.layer.fire&&(c=t.layer),t[s(2118)]&&t.graphic.fire&&(c=t.graphic);let _=Cesium__namespace.HeightReference[s(3898)];if(t.czmObject){const g=t.czmObject;_=this[s(3326)](g,_),g[s(2747)]||g[s(3381)]?e=g.position:g.position&&!(g.position instanceof Cesium__namespace[s(i._0x5b496d)])&&(e=g[s(2180)])}if(t.graphic){if(t[s(2118)][s(2810)]){var l,h;_=(l=t.graphic.style)===null||l===void 0?void 0:l[s(i._0x28b722)],(h=t.graphic.style)!==null&&h!==void 0&&h[s(2825)]&&(_=Cesium__namespace.HeightReference.CLAMP_TO_GROUND)}t.target&&t.graphic.property&&(e=t.graphic._getPopupPosition())}const f={...o,heightReference:_,html:t.content},m=this._createDivGraphic({depthTest:this.depthTest,...o,position:e,style:f,attr:(n=t[s(2118)])===null||n===void 0?void 0:n.attr,target:c,event:t},c);this[s(i._0xaef488)].addGraphic(m)}[_0x5e32ae(3246)](e){const t=_0x5e32ae;return this._layer[t(3388)](e._popupId)}_createDivGraphic(e,t){const i=new Popup(e);return t&&(t._popupId=i.id),i}getHeightReference(e,t){const i={_0x2c5a09:4091},s=_0x5e32ae;if(!e)return t;if(Cesium__namespace.defined(e._heightReference))return e._heightReference;const n=e.billboard||e.point||e.model||e.label;return Cesium__namespace.defined(n==null?void 0:n.heightReference)?n[s(i._0x2c5a09)]._value:t}}register$1(_0x5e32ae(2307),PopupMgr);class TooltipMgr extends PopupMgr{constructor(e={}){const t=_0x5e32ae;super(e),this.options[t(481)]=this.options.cacheTime??20}_enabledHook(e){super._enabledHook(e),this.moveTimer&&!e&&(clearTimeout(this.moveTimer),delete this.moveTimer)}[_0x5e32ae(3818)](){const e={_0x35bbea:3927},t=_0x5e32ae;this._map.on(EventType[t(e._0x35bbea)],this._mouseMoveHandler,this),this._map.on(EventType.mouseDown,this._mouseDownHandler,this),this._map.on(EventType.mouseUp,this._mouseUpHandler,this)}_unbindEvent(){const e={_0x5c0e6f:1890},t=_0x5e32ae;this._map.off(EventType.mouseMoveTarget,this._mouseMoveHandler,this),this[t(e._0x5c0e6f)][t(1220)](EventType[t(1833)],this._mouseDownHandler,this),this._map[t(1220)](EventType.mouseUp,this._mouseUpHandler,this)}_mouseDownHandler(e){const t={_0x2e3208:2970},i=_0x5e32ae;this[i(968)]&&(this[i(t._0x2e3208)]=!![],this.close())}_mouseUpHandler(e){this.enabled&&(this._isMouseUpdownPressed=![])}[_0x5e32ae(3336)](e){const t={_0x5afd94:481},i=_0x5e32ae;if(this.enabled){if(this[i(3222)]&&(clearTimeout(this.moveTimer),delete this.moveTimer),this[i(2970)]||!this._enabled){this.close();return}this.moveTimer=setTimeout(()=>{delete this.moveTimer,this._mouseClickHandler(e)},this.options[i(t._0x5afd94)])}}_getConfig(e){const t=_0x5e32ae;return e[t(933)]||e[t(1417)]&&e.getTooltipConfig()}_createDivGraphic(e,t){const i=new Tooltip(e);return t&&(t._tooltipId=i.id),i}[_0x5e32ae(2017)](e){return this._layer.getGraphicById(e._tooltipId)}}register$1("tooltip",TooltipMgr);class SmallTooltip extends BaseControl{get direction(){const e={_0x421b15:3798,_0x55406a:3858},t=_0x5e32ae;return this[t(e._0x421b15)][t(e._0x55406a)]}set direction(e){const t={_0x56bc7d:3798,_0x2254e6:1343},i=_0x5e32ae;this[i(t._0x56bc7d)].direction=e,e?(addClass(this._containerArrow,"mars3d-smallTooltip-leftArrow"),removeClass(this._containerArrow,i(t._0x2254e6))):(addClass(this._containerArrow,i(1343)),removeClass(this._containerArrow,"mars3d-smallTooltip-leftArrow"))}_enabledHook(e){this.show=e}_mountedHook(){const e={_0x777db9:1293},t=_0x5e32ae;this._container=create$3("div","mars3d-smallTooltip"),this._container.style.display="none",this._containerArrow=create$3("div","mars3d-smallTooltip-arrow mars3d-smallTooltip-rightArrow",this._container),this._containerContent=create$3("div","mars3d-smallTooltip-inner",this._container),this._container.addEventListener(t(1948),i=>{this[t(e._0x777db9)]()})}close(){const e={_0x1bd67f:2899},t=_0x5e32ae;this._container&&(this[t(e._0x1bd67f)].style.display="none")}open(e,t){const i={_0x5173ef:1450,_0x45a851:2899,_0x5c61fd:1648,_0x1e6b85:4114,_0x2be520:2899,_0x227893:2899},s=_0x5e32ae;this.enabled&&(t&&(this._containerContent.innerHTML=t),e?(e instanceof Cesium__namespace[s(3916)]&&(e=Cesium__namespace[s(i._0x5173ef)].wgs84ToWindowCoordinates(this._map[s(3107)],e)),this[s(i._0x45a851)].style[s(i._0x5c61fd)]="block",this._container[s(i._0x1e6b85)][s(1194)]=e.y-this._container.clientHeight/2+"px",this.options[s(3858)]?this._container[s(4114)].left=e.x-this[s(i._0x2be520)].clientWidth-25+"px":this[s(i._0x227893)].style.left=e.x+25+"px"):this[s(i._0x45a851)].style.display="none")}}register$1("smallTooltip",SmallTooltip);class ContextMenu extends BaseControl{constructor(r={}){super(r),this._menuIndex=0,this._menuObj={}}get target(){return this[_0x5e32ae(2929)]}[_0x5e32ae(751)](){this._target=null}[_0x5e32ae(3118)](){const r={_0xcdeec0:1095,_0x27d4a5:2899,_0x47401c:4078},e=_0x5e32ae;Cesium__namespace.defaultValue(this[e(3798)].preventDefault,!![])&&(this._map.container.oncontextmenu=function(t){t.preventDefault()}),this._container=create$3("div",e(r._0xcdeec0)),this[e(r._0x27d4a5)].style.display="none",this[e(1884)]=create$3("ul","mars3d-contextmenu-ul",this._container),this._containerUl.id=this.parentContainerId+e(r._0x47401c)}_addedHook(){const r={_0x52f6a5:2986},e=_0x5e32ae;this._map.on(EventType.leftDown,this._downHandler,this),this._map.on(EventType.middleDown,this[e(r._0x52f6a5)],this),this[e(1890)].on(EventType.wheel,this._downHandler,this),this._map.on(EventType[e(3301)],this._rightClickHandler,this)}_removedHook(){const r={_0x5d2131:1890},e=_0x5e32ae;this._map.off(EventType.leftDown,this._downHandler,this),this[e(r._0x5d2131)].off(EventType.middleDown,this._downHandler,this),this._map[e(1220)](EventType.wheel,this._downHandler,this),this._map.off(EventType[e(3301)],this._rightClickHandler,this),this._target=null,this._eventResult=null}_downHandler(r){this.close()}_rightClickHandler(r){const e={_0x3eace5:2426},t=_0x5e32ae;var i,s;this.close(),this.enabled&&(this._openByClick(r.czmObject,r)||this[t(e._0x3eace5)](r.graphic,r)||this._openByClick((i=r.graphic)===null||i===void 0?void 0:i[t(3476)],r)||this._openByClick(r.layer,r)||this._openByClick((s=r.layer)===null||s===void 0?void 0:s.parent,r)||this._openByClick(this._map,r))}[_0x5e32ae(2426)](r,e){const t={_0x47891e:3204},i=_0x5e32ae;if(!r)return![];let s=r._contextmenuConfig||r[i(t._0x47891e)]&&r[i(t._0x47891e)]();return s===![]?!![]:s?(s={...s,...e},this[i(498)](e.cartesian,s),!![]):![]}close(r,e){const t={_0x350675:3132,_0xf55987:2251,_0x143284:1890,_0x57122e:2251},i=_0x5e32ae;var s,n,o;this._show!==![]&&(r&&r!==((s=this[i(1023)])===null||s===void 0?void 0:s.graphic)||e&&e!==((n=this._eventResult)===null||n===void 0?void 0:n.layer)||(this[i(575)]=![],(o=this[i(t._0x350675)])!==null&&o!==void 0&&o.fire?this.target.fire(EventType[i(t._0xf55987)],{},!![]):this[i(t._0x143284)].fire(EventType[i(t._0x57122e)])))}open(_0x443d20,_0x2db069={}){const _0x294fcc={_0x1937f0:2118,_0x1e31ba:1404,_0x484357:1023,_0x2bf5b7:1884,_0x4003d6:1948,_0x384616:2732,_0x3c3acc:3300,_0x12577b:2899,_0x5f1567:1194,_0x340dc1:691,_0x13ec14:2429,_0x3c5c96:3058,_0x4a9104:2675,_0x28dfde:4114,_0x21d5a4:3975,_0x579984:3307,_0x38c863:1719,_0x18c2d3:1890},_0x5e8a5e={_0x538864:3402,_0x21b12f:4114,_0x3c859a:1884},_0x90ac22={_0x468ba4:3058,_0x225de8:3475},_0x290053=_0x5e32ae;var _0x41e7aa;const _0x2d8f6e=_0x2db069.options||{},_0x10c79b=_0x2db069.content;if(!_0x10c79b||_0x10c79b.length===0){this.close();return}const _0x422608=_0x2db069.windowPosition||Cesium__namespace.SceneTransforms.wgs84ToWindowCoordinates(this._map.scene,_0x443d20),_0xbd3922={..._0x2db069,windowPosition:_0x422608,position:_0x443d20};if(_0x2db069.layer&&_0x2db069.layer.fire&&(_0xbd3922.target=_0x2db069.layer),_0x2db069[_0x290053(2118)]&&_0x2db069[_0x290053(_0x294fcc._0x1937f0)].fire){_0xbd3922[_0x290053(3132)]=_0x2db069.graphic;const r=_0x2db069.graphic.parent;r&&r[_0x290053(_0x294fcc._0x1e31ba)]&&(_0xbd3922.graphic_parent=r)}this[_0x290053(_0x294fcc._0x484357)]=_0xbd3922;let _0x35b17f="";for(let r=0,e=_0x10c79b.length;r<e;r++){const t=_0x10c79b[r],i=this._getItemHtml(t,_0xbd3922);i&&(_0x35b17f+=i)}if(_0x35b17f===""){this.close();return}this._containerUl.innerHTML=_0x35b17f;const _0x2bf6fd=this[_0x290053(_0x294fcc._0x2bf5b7)].querySelectorAll(_0x290053(3981)),_0x2fe7b6=this;for(let _0x1c038c=0;_0x1c038c<_0x2bf6fd.length;_0x1c038c++){const _0x535728=_0x2bf6fd[_0x1c038c];_0x535728.addEventListener(_0x290053(_0x294fcc._0x4003d6),function(_0x587e45){const _0x1f0cfc=_0x290053;var _0x191e34;_0x587e45.stopPropagation&&_0x587e45.stopPropagation();const _0x3a98d7=Number(this[_0x1f0cfc(_0x90ac22._0x468ba4)]("data-index")),_0xdec4d4=_0x2fe7b6[_0x1f0cfc(4283)][_0x3a98d7],_0x3f7859={..._0xbd3922,data:_0xdec4d4},_0xfcccf1=_0xdec4d4.callback;_0xfcccf1&&(isFunction(_0xfcccf1)?_0xfcccf1(_0x3f7859):isString(_0xfcccf1)&&(window._contextmenuItemClickResult=_0x3f7859,eval(_0xfcccf1+"(window._contextmenuItemClickResult)"),delete window._contextmenuItemClickResult)),(_0x191e34=_0x2fe7b6[_0x1f0cfc(3132)])!==null&&_0x191e34!==void 0&&_0x191e34[_0x1f0cfc(1404)]?_0x2fe7b6.target.fire(EventType[_0x1f0cfc(_0x90ac22._0x225de8)],_0x3f7859,!![]):_0x2fe7b6._map.fire(EventType.contextMenuClick,_0x3f7859);const _0x1dca65=Number(this.getAttribute("data-count")||0);_0x1dca65===0&&_0x2fe7b6.close()}),_0x535728[_0x290053(_0x294fcc._0x384616)]("mouseover",function(r){const e=_0x290053,t=_0x2fe7b6._container[e(691)](".mars3d-sub-menu");for(let s=0;s<t[e(_0x5e8a5e._0x538864)];s++)t[s][e(_0x5e8a5e._0x21b12f)].display="none";const i=this[e(1881)](".mars3d-sub-menu");i&&(i.style.display="block"),removeClass(_0x2fe7b6[e(_0x5e8a5e._0x3c859a)][e(1881)](".active"),e(3305)),addClass(this,"active")})}this[_0x290053(575)]=!![],this._target=_0xbd3922.target;let _0x3715d8=_0x422608.y,_0x10ba92=_0x422608.x;_0x2d8f6e[_0x290053(3971)]?(_0x10ba92+=_0x2d8f6e.anchor[0],_0x3715d8+=_0x2d8f6e.anchor[1]):(_0x2d8f6e.offsetX&&(_0x10ba92+=_0x2d8f6e.offsetX),_0x2d8f6e[_0x290053(759)]&&(_0x3715d8+=_0x2d8f6e.offsetY));const _0x334bb9=this._container.offsetHeight,_0x57c70d=this._container.offsetWidth;_0x3715d8+_0x334bb9>this._map.scene.canvas.clientHeight?(_0x3715d8-=_0x334bb9-10,_0x3715d8<=0&&(_0x3715d8=0)):_0x3715d8+=10;let _0x1850eb=!![];_0x10ba92+_0x57c70d>this._map.scene[_0x290053(_0x294fcc._0x3c3acc)][_0x290053(3716)]?(_0x10ba92-=_0x57c70d-10,_0x1850eb=![],_0x10ba92<=0&&(_0x10ba92=0)):_0x10ba92+=10,this._container.style.left=_0x10ba92+"px",this[_0x290053(_0x294fcc._0x12577b)].style[_0x290053(_0x294fcc._0x5f1567)]=_0x3715d8+"px";const _0x49d7a9=this[_0x290053(_0x294fcc._0x2bf5b7)][_0x290053(_0x294fcc._0x340dc1)](_0x290053(_0x294fcc._0x13ec14));for(let r=0;r<_0x49d7a9[_0x290053(3402)];r++){const e=_0x49d7a9[r],t=Number(e[_0x290053(_0x294fcc._0x3c5c96)]("data-count")||1)*34;let i=_0x3715d8+e[_0x290053(_0x294fcc._0x4a9104)][_0x290053(4030)];e[_0x290053(_0x294fcc._0x28dfde)][_0x290053(1194)]="0",e.style[_0x290053(_0x294fcc._0x21d5a4)]=_0x290053(_0x294fcc._0x579984),i+t>this._map.scene.canvas.clientHeight&&(i-=t,i>0&&(e.style.top=_0x290053(_0x294fcc._0x579984),e.style.bottom="0")),_0x1850eb?e.style[_0x290053(_0x294fcc._0x38c863)]=_0x57c70d+10+"px":e[_0x290053(4114)].right=_0x57c70d+10+"px"}(_0x41e7aa=_0xbd3922.target)!==null&&_0x41e7aa!==void 0&&_0x41e7aa.fire?_0xbd3922[_0x290053(3132)].fire(EventType[_0x290053(4172)],{},!![]):this[_0x290053(_0x294fcc._0x18c2d3)].fire(EventType.contextMenuOpen)}_getItemHtml(_0x619940,_0x2697d7){const _0x1d1b63={_0x4cb1c4:575,_0x4972be:1399,_0x5c6a5d:3402,_0x40650f:1523,_0x2d45b7:931,_0x261636:1734,_0x176d99:4283,_0x323e2c:1492,_0x444563:4019,_0x182aac:1337,_0x32c0db:503,_0x57e342:877},_0xb8f919=_0x5e32ae;if(_0x619940[_0xb8f919(2856)]("show")){let _0x1d3f43=_0x619940.show;try{_0x2697d7.data=_0x619940,isFunction(_0x1d3f43)?_0x1d3f43=_0x619940[_0xb8f919(_0x1d1b63._0x4cb1c4)](_0x2697d7):isString(_0x1d3f43)&&(window._contextmenuItemClickShowResult=_0x2697d7,_0x1d3f43=eval(_0x1d3f43+"(window._contextmenuItemClickShowResult)"),delete window._contextmenuItemClickShowResult)}catch(r){logError$1(_0xb8f919(_0x1d1b63._0x4972be),r)}if(!_0x1d3f43)return}let _0x484a6;if(_0x619940[_0xb8f919(1260)]){let r="",e="",t=0;if(_0x619940.children){for(let s=0,n=_0x619940.children[_0xb8f919(_0x1d1b63._0x5c6a5d)];s<n;s++){const o=_0x619940[_0xb8f919(_0x1d1b63._0x40650f)][s];_0x2697d7[_0xb8f919(_0x1d1b63._0x2d45b7)]=o;const c=this[_0xb8f919(_0x1d1b63._0x261636)](o,_0x2697d7);c&&(r+=c,t++)}if(t===0)return;r='<ul class="mars3d-contextmenu-ul mars3d-sub-menu" data-count="'+t+'">'+r+"</ul>",e=_0xb8f919(1229)}this._menuIndex++,this[_0xb8f919(_0x1d1b63._0x176d99)][this._menuIndex]=_0x619940;const i=this[_0xb8f919(_0x1d1b63._0x323e2c)](_0x619940.icon||_0x619940[_0xb8f919(_0x1d1b63._0x444563)],null,"contextmenu-icon");_0x484a6=_0xb8f919(_0x1d1b63._0x182aac)+this._menuIndex+'" data-count="'+t+`">
                    <a href="javascript:void(0)">`+i+_0x619940.text+e+_0xb8f919(_0x1d1b63._0x32c0db)+r+`
                </li>`}else _0x484a6=_0xb8f919(_0x1d1b63._0x57e342);return _0x484a6}}register$1(_0x5e32ae(2786),ContextMenu);class KeyboardRoam extends BaseControl{constructor(e={}){const t={_0x463e9a:724},i=_0x5e32ae;super(e),this[i(t._0x463e9a)](e),this.flags={moveForward:![],moveBackward:![],moveUp:![],moveDown:![],moveLeft:![],moveRight:![]}}get moveStep(){return this._moveStep}set moveStep(e){const t=_0x5e32ae;this[t(2242)]=e}get dirStep(){return this._dirStep}set dirStep(e){const t=_0x5e32ae;this[t(761)]=e}get rotateStep(){return this[_0x5e32ae({_0x315275:4089}._0x315275)]}set rotateStep(e){this._rotateStep=e}get[_0x5e32ae(1275)](){return this._minPitch}set[_0x5e32ae(1275)](e){const t=_0x5e32ae;this[t(1840)]=e}get[_0x5e32ae(3629)](){return this[_0x5e32ae(1549)]}set maxPitch(e){const t={_0x1611d0:1549},i=_0x5e32ae;this[i(t._0x1611d0)]=e}get minHeight(){return this._minHeight}set minHeight(e){const t=_0x5e32ae;this[t(905)]=e}setOptions(e){const t=_0x5e32ae;return this.options={...this.options,...e},this._moveStep=this.options.moveStep??10,this._dirStep=this.options.dirStep??25,this[t(4089)]=this.options.rotateStep??1,this[t(1840)]=this.options.minPitch??.1,this._maxPitch=this.options.maxPitch??.95,this[t(905)]=this.options.minHeight??0,this}[_0x5e32ae(4158)](){const e={_0x1c0c9b:4141,_0x3bae6a:1768},t=_0x5e32ae;this._map.on(EventType[t(e._0x1c0c9b)],this._onKeyDown,this),this._map.on(EventType.keyup,this._onKeyUp,this),this._map.on(EventType[t(1213)],this[t(e._0x3bae6a)],this)}_removedHook(){const e={_0xebdc83:3412,_0x4f0482:1890,_0x18f93b:1768},t=_0x5e32ae;this._map.off(EventType.keydown,this[t(e._0xebdc83)],this),this[t(e._0x4f0482)].off(EventType.keyup,this._onKeyUp,this),this._map.off(EventType.clockTick,this[t(e._0x18f93b)],this)}[_0x5e32ae(3412)](e){const t={_0x5cf784:1219},i=_0x5e32ae;if(!this.enabled)return;const s=this[i(t._0x5cf784)](e.keyCode);typeof s<"u"&&(this[i(1990)][s]=!![])}_onKeyUp(e){const t={_0x52cc4c:1219,_0x575d25:1990},i=_0x5e32ae;if(!this.enabled)return;const s=this[i(t._0x52cc4c)](e.keyCode);typeof s!==i(1781)&&(this[i(t._0x575d25)][s]=![])}_getFlagForKeyCode(e){const t={_0x1465ee:1799,_0x53fff5:2728,_0x5aa222:1968,_0x41ff46:436},i=_0x5e32ae;switch(e){case"W".charCodeAt(0):return"moveForward";case"S"[i(t._0x1465ee)](0):return i(t._0x53fff5);case"D".charCodeAt(0):return"moveRight";case"A".charCodeAt(0):return i(t._0x5aa222);case"Q".charCodeAt(0):return"moveUp";case"E"[i(t._0x1465ee)](0):return"moveDown";case 38:this.rotateCamera(MoveType.TOP_ROTATE);break;case 37:this.rotateCamera(MoveType.LEFT_ROTATE);break;case 39:this.rotateCamera(MoveType.RIGHT_ROTATE);break;case 40:this.rotateCamera(MoveType.BOTTOM_ROTATE);break;case"I".charCodeAt(0):case 104:this.moveCamera(MoveType[i(t._0x41ff46)]);break;case"K".charCodeAt(0):case 101:this.moveCamera(MoveType.NARROW);break;case"J"[i(1799)](0):case 100:this[i(1044)](MoveType.LEFT_ROTATE);break;case"L".charCodeAt(0):case 102:this.moveCamera(MoveType.RIGHT_ROTATE);break;case"U".charCodeAt(0):case 103:this[i(1044)](MoveType.TOP_ROTATE);break;case"O".charCodeAt(0):case 105:this.moveCamera(MoveType.BOTTOM_ROTATE);break}}startMoveForward(){const e={_0x4ce6c3:1990},t=_0x5e32ae;this[t(e._0x4ce6c3)][t(1055)]=!![]}stopMoveForward(){const e={_0x4d2630:1990},t=_0x5e32ae;this[t(e._0x4d2630)].moveForward=![]}[_0x5e32ae(3474)](){this.flags.moveBackward=!![]}stopMoveBackward(){const e={_0x26bc8a:2728},t=_0x5e32ae;this.flags[t(e._0x26bc8a)]=![]}startMoveRight(){this.flags.moveRight=!![]}[_0x5e32ae(2183)](){const e=_0x5e32ae;this[e(1990)][e(4289)]=![]}[_0x5e32ae(822)](){this.flags.moveLeft=!![]}[_0x5e32ae(1181)](){this.flags.moveLeft=![]}moveForward(e){const t={_0x204793:3925,_0x1181a2:3029},i=_0x5e32ae,s=this[i(1890)][i(2792)];let n=s.direction;const o=Cesium__namespace[i(3916)].normalize(s.position,new Cesium__namespace.Cartesian3),c=Cesium__namespace.Cartesian3.cross(n,o,new Cesium__namespace.Cartesian3);n=Cesium__namespace.Cartesian3[i(t._0x204793)](o,c,new Cesium__namespace.Cartesian3),n=Cesium__namespace.Cartesian3[i(t._0x1181a2)](n,n),n=Cesium__namespace[i(3916)].multiplyByScalar(n,e,n),s.position=Cesium__namespace.Cartesian3.add(s.position,n,s[i(2180)])}_onClockTick(e){const t={_0x2b39e6:1990,_0x2abde3:4239,_0xb3bd62:3865,_0xe4f529:2145,_0x5a3126:1968},i=_0x5e32ae;if(!this.enabled)return;const s=this._map.camera,n=this.moveStep;this[i(t._0x2b39e6)][i(1055)]&&this.moveForward(n),this.flags[i(2728)]&&this.moveForward(-n),this.flags[i(4239)]&&s[i(t._0x2abde3)](n),this.flags.moveDown&&s.positionCartographic[i(t._0xb3bd62)]-n>=this.minHeight&&s[i(t._0xe4f529)](n),this[i(1990)][i(t._0x5a3126)]&&s[i(1968)](n),this.flags.moveRight&&s[i(4289)](n)}_resetCamera(e){const t={_0x3263bd:3858,_0x1cdc4c:2893},i=_0x5e32ae;e&&(this._map.scene.camera.position=e.position,this._map.scene.camera.direction=e[i(t._0x3263bd)],this[i(1890)][i(3107)].camera.right=e[i(t._0x1cdc4c)],this._map.scene[i(2792)].up=e.up)}_limitAngle(e,t,i){const s={_0x456088:3916},n=_0x5e32ae,o=Cesium__namespace[n(s._0x456088)][n(4318)](e,Cesium__namespace.Cartesian3.normalize(t,new Cesium__namespace.Cartesian3));return i==="up"&&o<this.minPitch?![]:i==="down"&&o>this.maxPitch?![]:!![]}[_0x5e32ae(2036)](e,t,i){const s={_0x2520e2:2048,_0x546886:916,_0x11a186:1531,_0x4a598d:2180,_0xd02a61:2893},n=_0x5e32ae,o=e.position,c=this._map.getCenter();if(!c)return;const _=c[n(s._0x2520e2)]();if(!_)return;const l=Cesium__namespace.Cartesian3.distance(_,o);let h=l/100;h=i?h*this.rotateStep:h;const f={};let m=new Cesium__namespace.Ray(o,t);if(f.position=Cesium__namespace[n(s._0x546886)].getPoint(m,h),f.direction=e.direction,f.right=e[n(2893)],f.up=e.up,i){const g=Cesium__namespace.Cartesian3.normalize(Cesium__namespace[n(3916)][n(s._0x11a186)](f[n(2180)],_,new Cesium__namespace.Cartesian3),new Cesium__namespace.Cartesian3);m=new Cesium__namespace[n(916)](_,g),f[n(2180)]=Cesium__namespace.Ray.getPoint(m,l),f.direction=Cesium__namespace.Cartesian3.negate(g,new Cesium__namespace.Cartesian3),f.up=Cesium__namespace.Cartesian3.normalize(f[n(s._0x4a598d)],new Cesium__namespace.Cartesian3),f[n(s._0xd02a61)]=Cesium__namespace[n(3916)].cross(f.direction,f.up,new Cesium__namespace.Cartesian3)}return f}[_0x5e32ae(1044)](e){const t={_0x116f70:2036,_0x21ad52:4246,_0x2493e0:2180,_0x108c70:726},i=_0x5e32ae,s=this._map.scene.camera;let n;switch(e){case MoveType.NARROW:n=this[i(t._0x116f70)](s,Cesium__namespace.Cartesian3.negate(s.direction,new Cesium__namespace.Cartesian3));break;case MoveType.LEFT_ROTATE:n=this._computedNewPos(s,Cesium__namespace.Cartesian3.negate(s.right,new Cesium__namespace.Cartesian3),!![]);break;case MoveType[i(2708)]:n=this._computedNewPos(s,s[i(2893)],!![]);break;case MoveType[i(4276)]:if(!this[i(4291)](Cesium__namespace.clone(s.up),Cesium__namespace.clone(s.position),"up"))return;n=this[i(2036)](s,Cesium__namespace.clone(s.up),!![]);break;case MoveType.BOTTOM_ROTATE:if(!this._limitAngle(Cesium__namespace.clone(s.up),Cesium__namespace[i(t._0x21ad52)](s[i(t._0x2493e0)]),"down"))return;n=this._computedNewPos(s,Cesium__namespace.Cartesian3.negate(s.up,new Cesium__namespace.Cartesian3),!![]);break;case MoveType[i(436)]:default:n=this._computedNewPos(s,s.direction);break}n&&this[i(t._0x108c70)](n)}rotateCamera(e){const t={_0xf65134:3300,_0x311634:1511,_0x42b6b0:4276,_0xf347aa:2054,_0x4ea393:2165,_0x535296:3916},i=_0x5e32ae;let s=[0,0];const n=this._map.scene[i(t._0xf65134)].clientWidth,o=this._map.scene.canvas.clientHeight,c=(n+o)/this[i(t._0x311634)];switch(e){case MoveType.LEFT_ROTATE:s=[-c*n/o,0];break;case MoveType.RIGHT_ROTATE:s=[c*n/o,0];break;case MoveType[i(t._0x42b6b0)]:s=[0,c];break;case MoveType[i(t._0xf347aa)]:s=[0,-c];break;default:return}const _=s[0]/n,l=s[1]/o,h=.05,f=this._map.camera;f.lookRight(_*h),f[i(t._0x4ea393)](l*h);const m=f.direction;let g=Cesium__namespace.Cartesian3.normalize(f[i(2180)],new Cesium__namespace.Cartesian3);const C=Cesium__namespace.Cartesian3.cross(m,g,new Cesium__namespace.Cartesian3);g=Cesium__namespace[i(t._0x535296)].cross(C,m,new Cesium__namespace[i(3916)]),f.up=g,f.right=C}}register$1(_0x5e32ae(1411),KeyboardRoam),KeyboardRoam.MoveType=MoveType;function getDefaultContextMenu(r){const e={_0x572710:2570,_0x5c5aec:4296,_0x53db19:4251,_0x11fe22:4296,_0x2b62c9:1507,_0x1433c9:1305,_0x245e11:1191,_0x1bbdf2:4296,_0x3a14bb:1380,_0x4fdc65:4296,_0x3ffed4:2894,_0x563cbe:3789,_0x1ce03c:4321,_0x501b1e:3325,_0x1f2f30:1433,_0x2a03ed:1754,_0x1e2d8b:3890,_0x5d0e49:4296,_0x5491a5:3539,_0x607f32:580,_0xe16d35:506,_0x480d69:3218,_0x259e9a:3623,_0x2c8cfd:2222,_0x30e059:3512,_0x4b6385:1276,_0x532278:4047,_0x19f5f9:1173,_0x481b15:2698,_0xa8bf39:4296,_0x3f7d53:1242,_0x2c6442:4296},t={_0x1b45b3:575},i={_0x11cd2c:3107},s={_0x55c59e:1702},n={_0xc5e848:737,_0x15dccb:4193},o={_0x5a5c41:3107,_0x8862f:575},c={_0x29858f:2955},_={_0x327890:2955},l={_0x44d9d7:3107},h={_0x8a6c49:3414,_0x78177d:2977},f={_0x3378eb:3070},m={_0x55d503:3414},g={_0x1a7092:3615},C={_0x2002e4:441},E={_0x6fe833:3414},P={_0x131d42:2637},w={_0x17152a:1307},M={_0x220358:3378},T={_0x58be25:3070},L={_0x5d93a3:2839},R={_0x1780a1:1860},D={_0x2f817e:2839},N={_0x2c7ac1:1982},k={_0x288fcf:2644},B={_0x55337e:669},$={_0x133e9e:669},H={_0x367b63:3107,_0x3dcf55:3076},W={_0x310d1f:3107,_0x40707e:1329},J={_0x630251:3519,_0x1b3115:3076},z={_0x961569:515,_0x252a5c:698},fe={_0x24f718:3861},q={_0x3e1f00:698,_0x303dd1:3509},te={_0x2de97a:698,_0x59bf69:2029},ie={_0x32c04f:2029},xe={_0xd90290:965},oe={_0x9987e4:698},de={_0x52722b:968},X={_0x13beb6:698,_0xebda43:2792,_0x2839dc:2792},he={_0x45000b:698},Se={_0x72965f:3916,_0x32953d:698},Te={_0x2f0aaa:3874},Re={_0x14bff3:1463},Be={_0x2b87d6:3107},ze={_0x427553:4296},Ve={_0x5c6ac1:3236,_0x45b1d7:3984,_0x5623a0:1029,_0x18868e:1251,_0x76872c:538,_0x152d25:4130},ye=_0x5e32ae,Fe=r[ye(e._0x572710)];return[{text:r.getLangText("_查看此处坐标"),icon:Icon.Coordinates,show:function(Ce){return Cesium__namespace[ye(515)](Ce.cartesian)},callback:function(Ce){const Q=ye,me=LngLatPoint[Q(Ve._0x5c6ac1)](Ce.cartesian),Ie=proj4Trans([me.lng,me.lat],Q(3178),CRS.CGCS2000_GK_Zone_3),De=`
         `+r.getLangText("_经度")+":"+me.lng+", "+r.getLangText(Q(1211))+":"+me.lat+", "+r.getLangText("_海拔")+":"+me[Q(Ve._0x45b1d7)]+`,
         `+r.getLangText("_横坐标")+":"+Ie[0][Q(Ve._0x5623a0)](1)+", "+r.getLangText("_纵坐标")+":"+Ie[1].toFixed(1)+` (CGCS2000)
        `;alert(De,r[Q(4296)](Q(Ve._0x18868e)));const Ee=formatNum$1(Ce.cartesian.x,1),Oe=formatNum$1(Ce.cartesian.y,1),le=formatNum$1(Ce.cartesian.z,1);logInfo(Q(Ve._0x76872c)+me[Q(Ve._0x152d25)]()+" , 笛卡尔："+Ee+","+Oe+","+le)}},{text:r[ye(4296)]("_查看当前视角"),icon:Icon.CameraInfo,callback:function(Ce){const Q=ye,me=JSON.stringify(r.getCameraView());logInfo(me),alert(me,r[Q(ze._0x427553)]("_当前视角信息"))}},{text:r.getLangText(ye(3585)),icon:Icon.Camera,children:[{text:r[ye(e._0x5c5aec)]("_允许进入地下"),icon:Icon[ye(e._0x53db19)],show:function(Ce){return r[ye(3107)].screenSpaceCameraController.enableCollisionDetection},callback:function(Ce){const Q=ye;r[Q(Be._0x2b87d6)].screenSpaceCameraController.enableCollisionDetection=![]}},{text:r[ye(e._0x11fe22)]("_禁止进入地下"),icon:Icon.UndergroundNo,show:function(Ce){return!r.scene.screenSpaceCameraController.enableCollisionDetection},callback:function(Ce){const Q=ye;r.scene.screenSpaceCameraController[Q(Re._0x14bff3)]=!![]}},{text:r[ye(4296)]("_绕此处环绕飞行"),icon:Icon[ye(e._0x2b62c9)],show:function(Ce){var Q;return Ce.cartesian&&(!Fe.rotatePoint||!((Q=Fe.rotatePoint)!==null&&Q!==void 0&&Q.isStart))},callback:function(Ce){const Q=ye;!Fe[Q(3318)]&&(Fe[Q(3318)]=new RotatePoint,r.addThing(Fe[Q(3318)])),Fe.rotatePoint[Q(2476)](Ce.cartesian)}},{text:r.getLangText("_关闭环绕飞行"),icon:Icon.RotatePointStop,show:function(Ce){const Q=ye;var me;return(me=Fe[Q(3318)])===null||me===void 0?void 0:me.isStart},callback:function(Ce){const Q=ye;Fe.rotatePoint&&Fe.rotatePoint[Q(Te._0x2f0aaa)]()}},{text:r.getLangText(ye(e._0x1433c9)),icon:Icon[ye(420)],show:function(Ce){return Cesium__namespace.defined(Ce.cartesian)},callback:function(Ce){const Q=ye,me=Cesium__namespace[Q(Se._0x72965f)].distance(Ce[Q(698)],r[Q(2792)].positionWC)*.1;r.flyToPoint(Ce[Q(Se._0x32953d)],{radius:me,maximumHeight:r.camera.positionCartographic.height})}},{text:r.getLangText("_第一视角站到此处"),icon:Icon[ye(2555)],show:function(Ce){const Q=ye;return Cesium__namespace.defined(Ce[Q(he._0x45000b)])},callback:function(Ce){const Q=ye;r.camera.flyTo({destination:addPositionsHeight(Ce[Q(X._0x13beb6)],10),orientation:{heading:r[Q(X._0xebda43)].heading,pitch:0,roll:0},maximumHeight:r[Q(X._0x2839dc)].positionCartographic.height})}},{text:r[ye(e._0x5c5aec)](ye(e._0x245e11)),icon:Icon.KeyboardRoamYes,show:function(Ce){const Q=ye;return!r.keyboardRoam[Q(de._0x52722b)]},callback:function(Ce){r.keyboardRoam.enabled=!![]}},{text:r[ye(e._0x1bbdf2)]("_关闭键盘漫游"),icon:Icon.KeyboardRoamNo,show:function(Ce){const Q=ye;return r.keyboardRoam[Q(968)]},callback:function(Ce){r.keyboardRoam.enabled=![]}},{text:r[ye(e._0x11fe22)](ye(e._0x3a14bb)),icon:Icon.TrackedEntityYes,show:function(Ce){const Q=ye,me=Ce[Q(2118)];return me?me.entity instanceof Cesium__namespace.Entity?!![]:me.trackedEntity instanceof Cesium__namespace.Entity?!![]:![]:![]},callback:function(Ce){r.trackedEntity=Ce.graphic}},{text:r.getLangText("_取消锁定"),icon:Icon.TrackedEntityNo,show:function(Ce){return r.trackedEntity!==void 0},callback:function(Ce){r.trackedEntity=void 0}}]},{text:r[ye(e._0x4fdc65)](ye(3482)),icon:Icon[ye(4317)],show:function(Ce){const Q=ye,me=r[Q(3861)](Ce[Q(oe._0x9987e4)]);return Cesium__namespace.defined(me)},children:[{text:r.getLangText("_显示三角网"),icon:Icon[ye(2683)],show:function(Ce){const Q=ye,me=r[Q(3861)](Ce.cartesian);return!me.debugWireframe&&me[Q(xe._0xd90290)]},callback:function(Ce){const Q=ye,me=r.pick3DTileset(Ce.cartesian);me[Q(ie._0x32c04f)]=!![]}},{text:r.getLangText("_关闭三角网"),icon:Icon[ye(e._0x3ffed4)],show:function(Ce){const Q=ye,me=r.pick3DTileset(Ce[Q(te._0x2de97a)]);return me[Q(te._0x59bf69)]&&me._enableDebugWireframe},callback:function(Ce){const Q=r.pick3DTileset(Ce.cartesian);Q.debugWireframe=![]}},{text:r.getLangText(ye(2239)),icon:Icon.TilesetBoundingVolumeYes,show:function(Ce){const Q=ye;return!r.pick3DTileset(Ce[Q(q._0x3e1f00)])[Q(q._0x303dd1)]},callback:function(Ce){const Q=ye,me=r.pick3DTileset(Ce.cartesian);me[Q(3509)]=!![]}},{text:r.getLangText(ye(e._0x563cbe)),icon:Icon[ye(e._0x1ce03c)],show:function(Ce){return r[ye(fe._0x24f718)](Ce.cartesian).debugShowBoundingVolume},callback:function(Ce){const Q=r.pick3DTileset(Ce.cartesian);Q.debugShowBoundingVolume=![]}}]},{text:r.getLangText("_地形服务"),icon:Icon.Terrain,show:function(Ce){const Q=ye;return Cesium__namespace[Q(z._0x961569)](Ce[Q(z._0x252a5c)])},children:[{text:r.getLangText(ye(e._0x501b1e)),icon:Icon[ye(e._0x1f2f30)],show:function(Ce){return!r[ye(2383)]},callback:function(Ce){r.hasTerrain=!![]}},{text:r.getLangText("_关闭地形"),icon:Icon.TerrainNo,show:function(Ce){return r.hasTerrain},callback:function(Ce){r.hasTerrain=![]}},{text:r.getLangText("_显示三角网"),icon:Icon.TerrainWireframeYes,show:function(Ce){return!r.scene.globe._surface.tileProvider._debug.wireframe},callback:function(Ce){const Q=ye;r.scene.globe[Q(J._0x630251)].tileProvider._debug[Q(J._0x1b3115)]=!![]}},{text:r.getLangText("_关闭三角网"),icon:Icon.TerrainWireframeNo,show:function(Ce){const Q=ye;return r[Q(W._0x310d1f)][Q(W._0x40707e)]._surface.tileProvider._debug.wireframe},callback:function(Ce){const Q=ye;r[Q(H._0x367b63)].globe._surface.tileProvider._debug[Q(H._0x3dcf55)]=![]}}]},{text:r.getLangText("_图上量算"),icon:Icon.Measure,children:[{text:r.getLangText("_距离"),icon:Icon.MeasureDistance,callback:function(Ce){const Q=ye;!Fe.measure&&(Fe.measure=new Measure,r[Q(3495)](Fe[Q($._0x133e9e)])),Fe[Q(669)].distance()}},{text:r[ye(e._0x5c5aec)]("_面积"),icon:Icon.MeasureArea,callback:function(Ce){const Q=ye;!Fe.measure&&(Fe[Q(669)]=new Measure,r.addThing(Fe.measure)),Fe.measure.area()}},{text:r.getLangText(ye(e._0x2a03ed)),icon:Icon.MeasureHeight,callback:function(Ce){!Fe.measure&&(Fe.measure=new Measure,r.addThing(Fe.measure)),Fe.measure.heightTriangle()}},{text:r.getLangText("_角度"),icon:Icon.MeasureAngle,callback:function(Ce){const Q=ye;!Fe.measure&&(Fe.measure=new Measure,r.addThing(Fe[Q(B._0x55337e)])),Fe.measure.angle()}},{text:r.getLangText("_删除测量"),icon:Icon[ye(506)],show:function(Ce){const Q=ye;return Fe.measure&&Fe.measure[Q(k._0x288fcf)]},callback:function(Ce){Fe.measure&&Fe.measure.clear()}}]},{text:r.getLangText(ye(e._0x1e2d8b)),icon:Icon.Draw,children:[{text:r.getLangText("_标记点"),icon:Icon.DrawPoint,callback:function(Ce){r.graphicLayer.startDraw({type:"point",style:{pixelSize:12,color:"#3388ff"},success:function(Q){const me=_0x5210;console[me(N._0x2c7ac1)](JSON[me(3957)](Q.coordinates))}})}},{text:r.getLangText("_标记线"),icon:Icon.DrawPolyline,callback:function(Ce){r.graphicLayer.startDraw({type:"polyline",style:{color:"#55ff33",width:3},success:function(Q){console.log(JSON[_0x5210(3957)](Q.coordinates))}})}},{text:r[ye(e._0x4fdc65)](ye(828)),icon:Icon.DrawPolygon,callback:function(Ce){r[ye(D._0x2f817e)].startDraw({type:"polygon",style:{color:"#29cf34",opacity:.5,outline:!![],outlineWidth:2},success:function(me){console.log(JSON.stringify(me.coordinates))}})}},{text:r.getLangText("_标记圆"),icon:Icon.DrawCircle,callback:function(Ce){const Q=ye;r.graphicLayer[Q(1860)]({type:"circle",style:{color:"#ffff00",opacity:.6},success:function(me){console.log(JSON.stringify(me.coordinates))}})}},{text:r.getLangText("_标记矩形"),icon:Icon.DrawRectangle,callback:function(Ce){const Q=ye;r.graphicLayer[Q(R._0x1780a1)]({type:"rectangle",style:{color:Q(1296),opacity:.6},success:function(me){console.log(JSON.stringify(me[Q(1743)]))}})}},{text:r[ye(e._0x5d0e49)]("_允许编辑"),icon:Icon[ye(e._0x5491a5)],show:function(Ce){return!r.graphicLayer.hasEdit},callback:function(Ce){r.graphicLayer.hasEdit=!![]}},{text:r[ye(4296)](ye(e._0x607f32)),icon:Icon.DrawEditNo,show:function(Ce){return r.graphicLayer.hasEdit},callback:function(Ce){r.graphicLayer.hasEdit=![]}},{text:r.getLangText("_导出GeoJSON"),icon:Icon.DrawDownJson,show:function(Ce){return r.graphicLayer.length>0},callback:function(Ce){downloadFile("图上标记.json",JSON.stringify(r[ye(L._0x5d93a3)].toGeoJSON()))}},{text:r.getLangText("_清除所有标记"),icon:Icon[ye(e._0xe16d35)],show:function(Ce){return r.graphicLayer.length>0},callback:function(Ce){r.graphicLayer.clear()}}]},{text:r.getLangText("_特效效果"),icon:Icon.Effect,children:[{text:r.getLangText(ye(e._0x480d69)),icon:Icon[ye(e._0x259e9a)],show:function(Ce){return!Fe[ye(972)]},callback:function(Ce){const Q=ye;!Fe.rainEffect&&(Fe.rainEffect=new RainEffect,r[Q(T._0x58be25)](Fe.rainEffect))}},{text:r.getLangText("_关闭下雨"),icon:Icon.RainEffectNo,show:function(Ce){return Fe.rainEffect},callback:function(Ce){const Q=ye;Fe.rainEffect&&(r.removeEffect(Fe.rainEffect,!![]),delete Fe[Q(972)])}},{text:r.getLangText("_开启下雪"),icon:Icon.SnowEffectYes,show:function(Ce){return!Fe.snowEffect},callback:function(Ce){!Fe[ye(3378)]&&(Fe.snowEffect=new SnowEffect,r.addEffect(Fe.snowEffect))}},{text:r[ye(4296)](ye(e._0x2c8cfd)),icon:Icon.SnowEffectNo,show:function(Ce){return Fe.snowEffect},callback:function(Ce){const Q=ye;Fe.snowEffect&&(r.removeEffect(Fe[Q(M._0x220358)],!![]),delete Fe.snowEffect)}},{text:r.getLangText(ye(1961)),icon:Icon.FogEffectYes,show:function(Ce){return!Fe.fogEffect},callback:function(Ce){if(!Fe.fogEffect){const Q=r.camera.positionCartographic.height*2;Fe.fogEffect=new FogEffect({fogByDistance:new Cesium__namespace.Cartesian4(.1*Q,.1,Q,.8)}),r.addEffect(Fe.fogEffect)}}},{text:r.getLangText(ye(e._0x30e059)),icon:Icon.FogEffectNo,show:function(Ce){return Fe.fogEffect},callback:function(Ce){const Q=ye;Fe.fogEffect&&(r.removeEffect(Fe[Q(w._0x17152a)],!![]),delete Fe.fogEffect)}},{text:r.getLangText("_开启泛光"),icon:Icon[ye(e._0x4b6385)],show:function(Ce){return!Fe.bloomEffect},callback:function(Ce){const Q=ye;!Fe.bloomEffect&&(Fe[Q(P._0x131d42)]=new BloomEffect,r[Q(3070)](Fe[Q(P._0x131d42)]))}},{text:r.getLangText("_关闭泛光"),icon:Icon.BloomEffectNo,show:function(Ce){return Fe.bloomEffect},callback:function(Ce){const Q=ye;Fe.bloomEffect&&(r[Q(E._0x6fe833)](Fe.bloomEffect,!![]),delete Fe.bloomEffect)}},{text:r[ye(e._0x1bbdf2)]("_开启亮度"),icon:Icon[ye(e._0x532278)],show:function(Ce){return!Fe.brightnessEffect},callback:function(Ce){const Q=ye;!Fe.brightnessEffect&&(Fe.brightnessEffect=new BrightnessEffect,r[Q(3070)](Fe.brightnessEffect))}},{text:r[ye(4296)]("_关闭亮度"),icon:Icon[ye(3187)],show:function(Ce){return Fe.brightnessEffect},callback:function(Ce){Fe[ye(C._0x2002e4)]&&(r.removeEffect(Fe.brightnessEffect,!![]),delete Fe.brightnessEffect)}},{text:r.getLangText("_开启夜视"),icon:Icon.NightVisionEffectYes,show:function(Ce){return!Fe.nightVisionEffect},callback:function(Ce){const Q=ye;!Fe[Q(3615)]&&(Fe[Q(g._0x1a7092)]=new NightVisionEffect,r.addEffect(Fe.nightVisionEffect))}},{text:r.getLangText("_关闭夜视"),icon:Icon.NightVisionEffectNo,show:function(Ce){return Fe.nightVisionEffect},callback:function(Ce){const Q=ye;Fe.nightVisionEffect&&(r[Q(m._0x55d503)](Fe[Q(3615)],!![]),delete Fe.nightVisionEffect)}},{text:r.getLangText(ye(1465)),icon:Icon.BlackAndWhiteEffectYes,show:function(Ce){return!Fe.blackAndWhiteEffect},callback:function(Ce){const Q=ye;!Fe[Q(2977)]&&(Fe.blackAndWhiteEffect=new BlackAndWhiteEffect,r[Q(f._0x3378eb)](Fe.blackAndWhiteEffect))}},{text:r.getLangText("_关闭黑白"),icon:Icon.BlackAndWhiteEffectNo,show:function(Ce){return Fe[ye(2977)]},callback:function(Ce){const Q=ye;Fe.blackAndWhiteEffect&&(r[Q(h._0x8a6c49)](Fe[Q(h._0x78177d)],!![]),delete Fe.blackAndWhiteEffect)}},{text:r.getLangText(ye(e._0x19f5f9)),icon:Icon.OutlineEffectYes,show:function(Ce){return!Fe.outlineEffect},callback:function(Ce){const Q=ye;!Fe.outlineEffect&&(Fe.outlineEffect=new OutlineEffect,r[Q(3070)](Fe.outlineEffect))}},{text:r.getLangText("_关闭拾取高亮"),icon:Icon[ye(e._0x481b15)],show:function(Ce){return Fe.outlineEffect},callback:function(Ce){const Q=ye;Fe.outlineEffect&&(r[Q(3414)](Fe.outlineEffect,!![]),delete Fe[Q(3317)])}}]},{text:r[ye(4296)]("_场景设置"),icon:Icon.Scene,children:[{text:r.getLangText("_开启深度监测"),icon:Icon.DepthTestYes,show:function(Ce){return!r[ye(l._0x44d9d7)].globe.depthTestAgainstTerrain},callback:function(Ce){const Q=ye;r.scene[Q(1329)].depthTestAgainstTerrain=!![]}},{text:r.getLangText(ye(1037)),icon:Icon.DepthTestNo,show:function(Ce){return r[ye(3107)].globe.depthTestAgainstTerrain},callback:function(Ce){const Q=ye;r.scene[Q(1329)].depthTestAgainstTerrain=![]}},{text:r.getLangText(ye(3096)),icon:Icon.SkyBoxYes,show:function(Ce){const Q=ye;return!r.scene[Q(_._0x327890)][Q(575)]},callback:function(Ce){r.scene.skyBox.show=!![],r.scene.moon.show=!![],r.scene.sun.show=!![]}},{text:r.getLangText("_关闭星空背景"),icon:Icon.SkyBoxNo,show:function(Ce){const Q=ye;return r.scene[Q(c._0x29858f)].show},callback:function(Ce){const Q=ye;r[Q(o._0x5a5c41)].skyBox.show=![],r.scene.moon.show=![],r.scene.sun[Q(o._0x8862f)]=![]}},{text:r[ye(e._0xa8bf39)](ye(e._0x3f7d53)),icon:Icon.ShadowYes,show:function(Ce){return!r.viewer.shadows},callback:function(Ce){const Q=ye;r.viewer[Q(4193)]=!![],r.viewer.terrainShadows=Cesium__namespace.ShadowMode.ENABLED,r.scene.globe.enableLighting=!![]}},{text:r[ye(4296)](ye(1474)),icon:Icon[ye(2762)],show:function(Ce){const Q=ye;return r[Q(n._0xc5e848)][Q(n._0x15dccb)]},callback:function(Ce){const Q=ye;r.viewer.shadows=![],r.viewer.terrainShadows=Cesium__namespace.ShadowMode[Q(2265)],r.scene.globe.enableLighting=![]}},{text:r.getLangText("_开启大气渲染"),icon:Icon.SkyAtmosphereYes,show:function(Ce){return!r.scene.skyAtmosphere.show},callback:function(Ce){const Q=ye;r[Q(3107)][Q(s._0x55c59e)].show=!![],r.scene.globe.showGroundAtmosphere=!![]}},{text:r.getLangText("_关闭大气渲染"),icon:Icon.SkyAtmosphereNo,show:function(Ce){return r[ye(i._0x11cd2c)].skyAtmosphere.show},callback:function(Ce){const Q=ye;r.scene.skyAtmosphere[Q(t._0x1b45b3)]=![],r.scene.globe[Q(475)]=![]}},{text:r[ye(e._0x2c6442)]("_场景出图"),icon:Icon.ExpImage,callback:function(Ce){r.expImage()}}]}]}function toChineseBeforeCreate(r){const e={_0x149ee4:507,_0x284549:695,_0x3a8840:2392},t={_0x3cc1f9:1455,_0x1e9819:527},i=_0x5e32ae;Cesium__namespace.AnimationViewModel.defaultDateFormatter=function(s,n){const o=_0x5210,c=Cesium__namespace.JulianDate[o(1455)](s);return formatDate(c,"yyyy-MM-dd")},Cesium__namespace[i(e._0x149ee4)][i(e._0x284549)]=function(s,n){const o=i,c=Cesium__namespace[o(527)].toDate(s);return formatDate(c,"HH:mm:ss")},Cesium__namespace.Timeline[i(e._0x3a8840)].makeLabel=function(s){const n=i,o=Cesium__namespace.JulianDate[n(t._0x3cc1f9)](this._startJulian),c=Cesium__namespace[n(t._0x1e9819)].toDate(this._endJulian),_=c.getFullYear()-o.getFullYear(),l=c[n(1911)]()-o.getMonth(),h=c.getDate()-o.getDate(),f=c.getHours()-o.getHours(),m=c.getMinutes()-o.getMinutes(),g=c.getSeconds()-o.getSeconds(),C=Cesium__namespace.JulianDate.toDate(s);return _===0?l===0&&h<10?h===0?f===0&&m===0&&g<10?g===0?formatDate(C,"S"):formatDate(C,"HH:mm:ss S"):formatDate(C,"HH:mm:ss"):formatDate(C,"MM月dd日 HH:mm"):formatDate(C,"MM月dd日"):formatDate(C,"yyyy-MM-dd")}}function toChineseCreateEnd(r,e){const t={_0x712b1f:3107},i={_0x3a791f:3645},s=_0x5e32ae,n=e.container;e[s(t._0x712b1f)][s(2380)].addEventListener(function(o,c){const _=s,l={"An error occurred while rendering.  Rendering has stopped.":_(i._0x3a791f),"Error constructing CesiumWidget.":"构造CesiumWidget时出错"};_updateDomInnerHtml(n,l,"cesium-widget-errorPanel-header")})}function _updateDomInnerHtml(r,e,t){const i={_0x16ad72:1908,_0x5042a8:624},s=_0x5e32ae,n=r[s(i._0x16ad72)](t);for(let o=0;o<n[s(3402)];o++)e[n[o].innerHTML]&&(n[o].innerHTML=e[n[o][s(i._0x5042a8)]])}const DefaultOptions={animation:![],timeline:![],fullscreenButton:![],vrButton:![],geocoder:![],sceneModePicker:![],homeButton:![],navigationHelpButton:![],navigationInstructionsInitiallyVisible:![],infoBox:![],selectionIndicator:![],shouldAnimate:!![],showRenderLoopErrors:!![],baseLayerPicker:![],requestRenderMode:![]};class Map extends BaseClass{constructor(e,t={}){const i={_0x49219e:1334,_0x20bf9a:3005,_0x4a412e:3798},s=_0x5e32ae;super(t),this.options=t,t[s(1190)]&&updateAll(t.token),t.lang=t.lang??LangType.ZH,(t.lang===LangType.ZH||t.lang===LangType.ZHHK)&&toChineseBeforeCreate(),initBeforeCreateDefaultValue(t),e instanceof Cesium__namespace[s(2725)]?this[s(i._0x49219e)]=e:this._viewer=this._createViewer(e,t),this._isFlyAnimation=![],this._highlightEnabled=!![],this._controlList=new MarsArray,this._thingList=new MarsArray,this._layerList=new MarsArray,this[s(556)]=new MarsArray,this._optionsLayersList=new MarsArray,this._lights=new MarsArray,this._visibilitys=new MarsArray,this._controls={},this._effects={},this[s(i._0x20bf9a)]=this[s(i._0x4a412e)].chinaCRS||ChinaCRS.WGS84,(t.lang===LangType.ZH||t.lang===LangType.ZHHK)&&toChineseCreateEnd(t,this._viewer),this._sceneEvent=new SceneEvent(this),this[s(1322)]=new MouseEvent(this,t[s(3588)]),this._sceneOption=new SceneOption(this),this[s(465)]=new ZoomNavigation(this[s(1334)]),this._initLayers(),this._initControls(),this[s(4219)](),this._sceneOption.setOptions(this.options.scene,this[s(3798)].scene)}get viewer(){return this[_0x5e32ae({_0x18e383:1334}._0x18e383)]}get[_0x5e32ae(3290)](){const e=_0x5e32ae;return this._viewer[e(3290)]}get toolbar(){return this._viewer._toolbar}get canvas(){var e;return(e=this._viewer)===null||e===void 0?void 0:e.scene.canvas}get[_0x5e32ae(3107)](){const e=_0x5e32ae;var t;return(t=this[e(1334)])===null||t===void 0?void 0:t[e(3107)]}get[_0x5e32ae(2792)](){return this._viewer.camera}get imageryLayers(){const e={_0x21865a:753},t=_0x5e32ae;return this._viewer[t(e._0x21865a)]}get dataSources(){return this[_0x5e32ae({_0x4532d9:1334}._0x4532d9)].dataSources}get[_0x5e32ae(887)](){const e=_0x5e32ae;return this._viewer[e(887)]}get clock(){return this._viewer.clock}get currentTime(){return this._viewer.clock.currentTime}set currentTime(e){const t={_0x1b5a94:1334},i=_0x5e32ae;this[i(t._0x1b5a94)][i(1949)].currentTime=e}get cesiumWidget(){return this[_0x5e32ae(1334)].cesiumWidget}get trackedEntity(){return this._viewer.trackedEntity}set trackedEntity(e){const t={_0x1a6274:3015,_0x47ad85:2638,_0x10ff2f:699},i=_0x5e32ae;e?e instanceof Cesium__namespace.Entity?this._viewer[i(2638)]=e:e[i(699)]instanceof Cesium__namespace[i(t._0x1a6274)]?this._viewer[i(t._0x47ad85)]=e[i(t._0x10ff2f)]:e.czmObject instanceof Cesium__namespace.Entity?this._viewer.trackedEntity=e.czmObject:e[i(t._0x47ad85)]instanceof Cesium__namespace[i(t._0x1a6274)]&&(this._viewer.trackedEntity=e.trackedEntity):this._viewer.trackedEntity=void 0}get[_0x5e32ae(1773)](){const e={_0x32fffd:1773},t=_0x5e32ae;return this._viewer[t(e._0x32fffd)]}set terrainProvider(e){const t={_0x5c30b5:1515,_0x7b6358:848,_0x1d4f16:1373},i={_0x584207:3751},s={_0xd2b924:1782},n=_0x5e32ae;if(e){if(e.then){e.then(o=>{this.terrainProvider=o});return}e[n(848)]=e._marsOptions||{},e._marsOptions[n(t._0x5c30b5)]=o=>{this[n(s._0xd2b924)](o)},e[n(t._0x7b6358)].onLoadError=o=>{this[n(i._0x584207)](o)}}this._viewer.terrainProvider=e,this._defaultTerrainProvider=e,e instanceof Cesium__namespace.EllipsoidTerrainProvider&&this.fire(EventType[n(t._0x1d4f16)])}get hasTerrain(){return!!this[_0x5e32ae({_0x297c34:1334}._0x297c34)].terrainProvider._layers}set hasTerrain(e){const t={_0x5233d7:3529,_0x2deae3:1773,_0x207f2b:1334},i=_0x5e32ae;e?this[i(t._0x5233d7)]==null?this.terrainProvider=createTerrainProvider(this._getTerrainOptions()):this[i(1334)][i(t._0x2deae3)]=this._defaultTerrainProvider:(this[i(t._0x207f2b)].terrainProvider=getNoTerrainProvider(),this.fire(EventType.terrainLoadSuccess))}get basemap(){const e={_0x224ff5:1334,_0x2f27df:1334},t=_0x5e32ae,i=this._optionsBasemapsList.values;if(i[t(3402)]===0)return this[t(e._0x224ff5)].baseLayerPicker?this[t(e._0x2f27df)].baseLayerPicker[t(865)].selectedImagery:void 0;for(let s=0;s<i.length;s++){const n=i[s];if(!n.hasEmptyGroup&&n.isAdded)return n}}set[_0x5e32ae(718)](e){const t={_0x43cac4:3402,_0x23c7f6:3947,_0x377496:3126,_0x5e7e16:2642},i={_0x329e4a:1404,_0x41cfa5:3769},s=_0x5e32ae;let n,o;e&&isObject(e)?(n=e.id,o=e.name):(n=e,o=e);const c=this._optionsBasemapsList.values;if(c[s(t._0x43cac4)]===0){if(this._viewer.baseLayerPicker){const _=this._viewer.baseLayerPicker.viewModel;let l;if(e){let h,f=-1;for(let m=0;m<this.options[s(1257)].length;m++){const g=this.options.basemaps[m];if(!(g.type===s(t._0x23c7f6)&&g.layers==null)&&(f++,o==g[s(3605)]||n==g.id)){h=f;break}}Cesium__namespace.defined(h)&&(l=_.imageryProviderViewModels[h])}_.selectedImagery=l,this.fire(EventType[s(3769)],{layer:l})}return}for(let _=0;_<c[s(3402)];_++){const l=c[_];l[s(470)]||(o==l.name||n==l.id?!l[s(t._0x377496)]&&(l.options.show=!![],this.addLayer(l).then(h=>{const f=s;l.toBottom&&l.toBottom(),this[f(i._0x329e4a)](EventType[f(i._0x41cfa5)],{layer:h})})):l.isAdded&&(delete l.options[s(575)],this[s(t._0x5e7e16)](l)))}}get onlyPickModelPosition(){const e={_0x4439b9:3107},t=_0x5e32ae;var i;return(i=this._viewer)===null||i===void 0?void 0:i[t(e._0x4439b9)].onlyPickModelPosition}set[_0x5e32ae(555)](e){this._viewer.scene.onlyPickModelPosition=e}get onlyPickTerrainPosition(){const e=_0x5e32ae;var t;return(t=this[e(1334)])===null||t===void 0?void 0:t.scene.onlyPickTerrainPosition}set[_0x5e32ae(3285)](e){const t=_0x5e32ae;this._viewer[t(3107)].onlyPickTerrainPosition=e}get tilesetMaxTotalMemory(){return this._tilesetMaxTotalMemory}set[_0x5e32ae(3836)](e){this._tilesetMaxTotalMemory=e}get mouseEvent(){return this._mouseEvent}get popup(){return this._popupMgr}get tooltip(){return this._tooltipMgr}get smallTooltip(){return this._smallTooltip}get contextmenu(){return this._contextmenuMgr}get[_0x5e32ae(1411)](){return this._keyboardRoam}get controls(){return this._controls}get effects(){return this._effects}get graphicLayer(){return this[_0x5e32ae({_0x37b76a:993}._0x37b76a)]==null&&(this._graphicLayer=new GraphicLayer({name:"默认数据图层",private:!![]}),this.addLayer(this._graphicLayer)),this._graphicLayer}get level(){const e=_0x5e32ae,t=Math.abs(this._viewer.camera[e(2868)].height);return t===this._prevCameraHeight?this._level:(this._level=heightToZoom(t),this._prevCameraHeight=t,this._level)}get[_0x5e32ae(1610)](){return this._fixedLight}set fixedLight(e){const t={_0x1a3dc6:3107,_0x4708cf:3916},i=_0x5e32ae;if(this._fixedLight=e,!this._sunlight&&(this[i(3970)]=this[i(t._0x1a3dc6)].light),e){const s=new Cesium__namespace.DirectionalLight({direction:new Cesium__namespace[i(t._0x4708cf)](.35492591601301104,-.8909182691839401,-.2833588392420772)});this.scene.light=s}else this.scene.light=this[i(3970)]}get lang(){return this[_0x5e32ae(3798)].lang||LangType.ZH}set lang(e){this.options.lang=e}get[_0x5e32ae(2491)](){return this.scene.screenSpaceCameraController._zoomFactor}set zoomFactor(e){const t={_0x4336a8:3107},i=_0x5e32ae;this[i(t._0x4336a8)][i(3595)][i(2152)]=e}get[_0x5e32ae(4248)](){return this[_0x5e32ae(970)]}set highlightEnabled(e){this._highlightEnabled=e,!e&&this.closeHighlight()}[_0x5e32ae(2387)](e,t){const i={_0x1aa8bc:1329,_0x5dea3c:515,_0x35bcf2:1329,_0x123702:2955,_0x7f84a3:2955,_0x50e962:1831,_0x35ef7c:4218,_0x392a33:1028,_0x5d50b6:2004},s=_0x5e32ae;if(!e)throw new Error("Map：id 不能为空");const n={...DefaultOptions,...t[s(3140)]||{},...t.scene||{},baseLayerPicker:![],timeline:![]};if(n.globe&&!(n[s(i._0x1aa8bc)]instanceof Cesium__namespace[s(3673)])&&delete n[s(i._0x1aa8bc)],n.cameraController&&delete n.cameraController,n.contextmenu&&delete n.contextmenu,n.location&&delete n.location,n.mouseDownView&&delete n.mouseDownView,n.navigation&&delete n.navigation,Cesium__namespace[s(515)](n.mapProjection)&&(n.mapProjection===CRS.EPSG3857?n.mapProjection=new Cesium__namespace[s(1644)](n.ellipsoid):n.mapProjection=new Cesium__namespace.GeographicProjection(n.ellipsoid)),Cesium__namespace[s(i._0x5dea3c)](n[s(3875)])&&(n[s(i._0x35bcf2)]=new Cesium__namespace.Globe(n[s(3875)])),Cesium__namespace.defined(n.skyBox)&&isPlainObject(n.skyBox))switch(n[s(2955)].type){case s(1089):case"GroundSkyBox":n[s(i._0x123702)]=new GroundSkyBox(n.skyBox);break;case s(1030):case"MultipleSkyBox":n[s(i._0x7f84a3)]=new MultipleSkyBox(n.skyBox);break;default:n.skyBox=new Cesium__namespace.SkyBox(n.skyBox);break}n[s(3695)]===s(i._0x50e962)&&t.lang===LangType.ZH&&(n.geocoder=new GaodePOIGeocoder(n[s(i._0x35ef7c)]),n.geocoder[s(3465)]=this);let o=![];if(n.baseLayerPicker){var c;if(!n[s(4187)]&&((c=t.basemaps)===null||c===void 0?void 0:c.length)>0){const h=getImageryProviderViewModels(t.basemaps,this[s(3798)][s(2645)]);n.imageryProviderViewModels=h.imageryProviderViewModels,h.selectedIndex===-1?o=!![]:n[s(3894)]=h.imageryProviderViewModels[h.selectedIndex]}if(!n.terrainProviderViewModels){var _;n.terrainProviderViewModels=getTerrainProviderViewModels(this._getTerrainOptions()),n[s(1854)]=n[s(2602)][(_=t.terrain)!==null&&_!==void 0&&_.show?1:0]}}else n.imageryProvider==null&&(o=!![],n.baseLayer=Cesium__namespace.ImageryLayer.fromProviderAsync(Cesium__namespace.TileMapServiceImageryProvider[s(3146)](Cesium__namespace.buildModuleUrl("Assets/Textures/NaturalEarthII")))),t.terrain&&t[s(i._0x392a33)].show?this.terrainProvider=createTerrainProvider(this._getTerrainOptions()):n.terrainProvider=getNoTerrainProvider();const l=new Cesium__namespace.Viewer(e,n);if(o){const h=l.imageryLayers,f=h.length;for(let m=0;m<f;m++){const g=h.get(0);h[s(i._0x5d50b6)](g,!![])}}return l}_terrain_onLoadSuccess(e){this.fire(EventType.terrainLoadSuccess,{data:e})}_terrain_onLoadError(e){this.hasTerrain=![],this.fire(EventType.terrainLoadError,{error:e})}_getTerrainOptions(){const e={_0x18709d:1028,_0x2ec39b:3798},t=_0x5e32ae;return this.options.terrain?{templateValues:this.options[t(2645)],marsOptions:{onLoadSuccess:s=>{this._terrain_onLoadSuccess(s)},onLoadError:s=>{this._terrain_onLoadError(s)}},...this[t(e._0x2ec39b)][t(1028)]}:this.options[t(e._0x18709d)]}setOptions(e){const t={_0x9e7cd0:3503,_0x380e06:3107,_0x172d27:3798,_0x41a830:4310,_0x501c0b:2378,_0xb0cad4:968,_0xd6495e:724,_0x5a9c1b:3382},i=_0x5e32ae;if(!e||Object[i(t._0x9e7cd0)](e).length===0)return this;this[i(3798)]=merge(this[i(3798)],e);for(const s in e){const n=e[s];switch(s){case"scene":{this._sceneOption.setOptions(this.options[i(t._0x380e06)],n);break}case"mouse":{this[i(1322)][i(724)](this[i(t._0x172d27)].mouse);break}case i(1028):{createTerrainProvider(this._getTerrainOptions()).then(o=>{const c=i;this[c(1773)]=o,this.controls.baseLayerPicker&&this.controls[c(3277)][c(3603)]()});break}case i(1257):{this.setBasemapsOptions(n);break}case i(t._0x41a830):{this.setLayersOptions(n);break}case i(3005):{this[i(3005)]=n||ChinaCRS.WGS84;break}case"lang":{(n===LangType.ZH||n===LangType[i(t._0x501c0b)])&&toChineseBeforeCreate(this.options);break}case"token":{updateAll(n);break}case i(3140):{for(const o in n){const c=this.options.control[o],_=this[i(1767)][o];if(_)!c||(c==null?void 0:c[i(968)])===![]?(_.show=![],_[i(t._0xb0cad4)]=![]):(_.show=!![],_[i(968)]=!![],_.setOptions&&c!==!![]&&_.setOptions(c));else{if(!c||c[i(968)]===![])continue;const l=create$1(o,c);l?this[i(1298)](l):logWarn("createControl:无该类型控件暂不能创建",o,c)}}break}case"effect":{for(const o in n){const c=this.options[i(3660)][o],_=this._effects[o];if(_)!c||(c==null?void 0:c.enabled)===![]?_.enabled=![]:(_.enabled=!![],_[i(t._0xd6495e)]&&_[i(724)](c));else{if(!c||c.enabled===![])continue;const l=create(o,c);l&&this.addEffect(l)}}break}default:{logWarn(i(t._0x5a9c1b),n);break}}}return this}[_0x5e32ae(980)](e){const t={_0x2bacff:3107},i=_0x5e32ae;return!e||Object[i(3503)](e)[i(3402)]===0?this:(this.options[i(t._0x2bacff)]=merge(this.options.scene,e),this._sceneOption.setOptions(this.options[i(3107)],e),this)}getOptions(){const e={_0x41ccfc:716},t=_0x5e32ae;return clone(this.options,["parent",t(e._0x41ccfc)])}[_0x5e32ae(2319)](){const e={_0x37a688:4310,_0x432c77:3852},t=_0x5e32ae,i=this.getOptions();i.scene.center=this.getCameraView(),i[t(e._0x37a688)]=[];const s=this.getLayers({basemaps:![]});for(let n=s.length-1;n>=0;n--){const o=s[n];o.isPrivate||o[t(3476)]||i.layers.push(o[t(e._0x432c77)]())}return i}[_0x5e32ae(3264)](){return getDefaultContextMenu(this)}getCenter(){return getCenter(this.scene)}getCameraDistance(){const e={_0x3b3e83:3916,_0x492db6:523},t=_0x5e32ae,i=this.getCenter();return i?Cesium__namespace[t(e._0x3b3e83)].distance(i.toCartesian(),this._viewer.camera[t(e._0x492db6)]):0}[_0x5e32ae(4039)](e){return getExtent(this,e)}[_0x5e32ae(690)](e){const t={_0x4cda1c:3798,_0x2ec4bb:3107,_0x31b506:3733},i=_0x5e32ae;var s,n;if(!((s=this[i(t._0x4cda1c)].scene)!==null&&s!==void 0&&(n=s.globe)!==null&&n!==void 0&&n.realAlt))return e;const o=this._viewer.scene.globe[i(3733)]||this._viewer[i(t._0x2ec4bb)][i(t._0x31b506)];return o?e/o:e}[_0x5e32ae(3033)](e){return expImage(this._viewer,e)}setCursor(e=""){this._default_cursor=e,this.container.style.cursor=e}[_0x5e32ae(3505)](e){const t=_0x5e32ae;this.container&&(e?this.container.style.cursor="crosshair":this.container.style.cursor=this[t(2940)]||"")}[_0x5e32ae(3861)](e){return pick3DTileset(this[_0x5e32ae({_0x25900d:3107}._0x25900d)],e)}pickTilesetLayer(e){const t=pick3DTileset(this.scene,e);return t?this.getLayerById(t._mars3d_layerId):null}on(e,t,i){return!this._sceneEvent.on(e,t,i||this)&&super.on(e,t,i),this}[_0x5e32ae(1220)](e,t,i){return!this[_0x5e32ae(2051)].off(e,t,i||this)&&super.off(e,t,i),this}[_0x5e32ae(1693)](e,t){const i={_0x54f88c:1693},s=_0x5e32ae;return this._sceneEvent.hasType(e)?this._sceneEvent[s(i._0x54f88c)](e):super[s(1693)](e,t)}_initLayers(){const e={_0x168d1b:3798,_0x5d31f2:3402,_0x3c276e:2316,_0xb396b7:1334,_0x39b369:3798,_0xd7287:575,_0x4e6169:556,_0x490f27:546,_0x20fb45:4310,_0x8e6a28:3559,_0x546524:3291,_0x3f5726:3476,_0x26fd7e:2326},t=_0x5e32ae;this.options.basemaps=this.options.basemaps||[],this[t(e._0x168d1b)].layers=this.options.layers||[],this._layerIdx=1,this._arrLayerIdx=[];const i=this.options.basemaps,s=this[t(e._0x168d1b)].layers;for(let c=0;c<i[t(e._0x5d31f2)];c++){const _=i[c];_.id&&(this._arrLayerIdx[t(e._0x3c276e)](_.id)!==-1&&(delete _.id,logWarn("addLayer:图层id存在冲突，已重新赋值id",_)),this._arrLayerIdx.push(_.id))}for(let c=0;c<s.length;c++){const _=s[c];_.id&&(this[t(1562)][t(2316)](_.id)!==-1&&(delete _.id,logWarn("addLayer:图层id存在冲突，已重新赋值id",_)),this[t(1562)].push(_.id))}const n=[],o=[];if(!this[t(e._0xb396b7)].baseLayerPicker)for(let c=0;c<i.length;c++){const _=i[c];!_.name&&(_.name=""),!_.id&&(_.id=this.getNextLayerId());const l=create$2(_,this[t(e._0x39b369)][t(2645)]);if(l){if(l._hasMapInit=!![],_.show){const h=this.addLayer(l);o.push(h)}else delete _[t(e._0xd7287)];if(this[t(e._0x4e6169)].set(_.id,l),n.push(_),l[t(e._0x490f27)]&&_.layers)for(let h=0;h<_[t(e._0x20fb45)].length;h++){const f=_.layers[h];f[t(1440)]=_.id,f.parent=l,!f.id&&(f.id=this.getNextLayerId()),n.push(f)}}}for(let c=0;c<s[t(3402)];c++){const _=s[c];!_.id&&(_.id=this.getNextLayerId());const l=create$2(_,this.options[t(2645)]);if(l){if(l[t(e._0x8e6a28)]=!![],_.show){const h=this.addLayer(l);o.push(h)}else delete _.show;if(this[t(e._0x546524)][t(1502)](_.id,l),n.push(_),l.hasChildLayer&&_[t(e._0x20fb45)])for(let h=0;h<_[t(4310)].length;h++){const f=_[t(4310)][h];f.pid=_.id,f[t(e._0x3f5726)]=l,!f.id&&(f.id=this.getNextLayerId()),n[t(3759)](f)}}}for(let c=0;c<n.length;c++){const _=n[c];let l=Number(_.zIndex);isNaN(l)&&(l=c),_.zIndex=l;const h=this._layerList.get(_.id);h&&(h.zIndex=l)}o.push(new Promise((c,_)=>{function l(h){h===0&&(this.off(EventType.tileLoadProgress,l),c(!![]))}this.on(EventType.tileLoadProgress,l)})),Promise[t(e._0x26fd7e)](o).then(c=>{this[t(1404)](EventType.load,{list:c})})}[_0x5e32ae(1340)](e,t=!![]){const i={_0x463ca1:556,_0x45662e:1888,_0x32a7ca:3605,_0x33cfcf:1262,_0x43e046:1502,_0x4ad0b1:1440,_0x245b16:3277},s={_0xc8ef64:2431},n=_0x5e32ae;if(!(!e||e.length===0)){if(this.options.basemaps=e,t){this._optionsBasemapsList.forEach(o=>{o.destroy()}),this[n(i._0x463ca1)][n(i._0x45662e)]();for(let o=0;o<e.length;o++){const c=e[o];!c.name&&(c[n(i._0x32a7ca)]=""),!c.id&&(c.id=this.getNextLayerId());let _=Number(c[n(i._0x33cfcf)]);isNaN(_)&&(_=o),c[n(i._0x33cfcf)]=_;const l=create$2(c,this.options.templateValues);if(l&&(c.show&&(this.addLayer(l),l.readyPromise.then(function(h){h[n(s._0xc8ef64)]&&h.toBottom()})),this[n(i._0x463ca1)][n(i._0x43e046)](c.id,l),l.hasChildLayer&&c.layers))for(let h=0;h<c.layers.length;h++){const f=c.layers[h];f[n(i._0x4ad0b1)]=c.id,f.parent=l,!f.id&&(f.id=this.getNextLayerId())}}}return this.controls[n(i._0x245b16)]&&this.controls[n(i._0x245b16)][n(3603)](),this._optionsBasemapsList.values}}setLayersOptions(e){const t={_0x42a638:4310,_0x35bca2:2324},i=_0x5e32ae;if(!(!e||e.length===0)){this[i(3291)].forEach(s=>{s.destroy()}),this._optionsLayersList.removeAll(),this.options[i(t._0x42a638)]=e;for(let s=0;s<e[i(3402)];s++){const n=e[s];!n.id&&(n.id=this.getNextLayerId());const o=create$2(n,this.options.templateValues);if(o&&(n.show&&this[i(2965)](o),this._optionsLayersList.set(n.id,o),o.hasChildLayer&&n[i(4310)]))for(let c=0;c<n.layers.length;c++){const _=n.layers[c];_.pid=n.id,_.parent=o,!_.id&&(_.id=this[i(t._0x35bca2)]())}}return this._optionsLayersList.values}}getNextLayerId(){const e={_0x19e4a8:471},t=_0x5e32ae;for(;this._arrLayerIdx.indexOf(this[t(e._0x19e4a8)])!==-1;)this._layerIdx++;return this._arrLayerIdx.push(this._layerIdx),this[t(471)]}addLayer(e,t){return new Promise((i,s)=>{const n=_0x5210;if(!e||!e._onAdd){i(![]);return}if(Cesium__namespace.defined(t)&&(e.show=t),e._state===State[n(4142)]){i(![]);return}e._onAdd(this);const o=this._layerList.get(e.id);o&&o!==e&&(e.id=this.getNextLayerId(),logWarn(n(2573),e)),this._layerList.set(e.id,e),e.readyPromise.then(function(c){i(!![])})})}removeLayer(e,t){const i={_0x1ee063:556,_0x307995:757},s=_0x5e32ae;if(!e)return this;if((isString(e)||isNumber(e))&&(e=this._layerList.get(e),!e))return this;if(e.isAdded)return this._layerList[s(2004)](e.id),t&&e[s(1387)]&&e.clear(),e._onRemove(),t&&(this[s(i._0x1ee063)].remove(e.id),this._optionsLayersList.remove(e.id),e[s(i._0x307995)]()),this}hasLayer(e){return e?(isObject(e)&&(e=e.id),this._layerList.contains(e)):![]}eachLayer(e,t){return this._layerList.forEach(e,t||this),this}[_0x5e32ae(4314)](e,t){return isObject(e)&&(e=e.id),this.getLayerByAttr(e,t)}[_0x5e32ae(3062)](e){const t={_0x1a7ce1:746},i=_0x5e32ae;let s=this._layerList.get(e);if(s||(s=this._optionsLayersList.get(e),s)||(s=this._optionsBasemapsList[i(1196)](e),s))return s;const n=this.getLayers({basemaps:!![],layers:!![]});for(let o=0,c=n.length;o<c;o++){const _=n[o];if(_.id===e)return _;if(_.hasChildLayer&&_.arrLayer)for(let l=0;l<_.arrLayer.length;l++){const h=_[i(t._0x1a7ce1)][l];if(h.id===e)return h}}}[_0x5e32ae(808)](e,t){const i=_0x5e32ae;let s=this._layerList.getByAttr(e,t);if(s||(s=this._optionsLayersList[i(4013)](e,t),s)||(s=this._optionsBasemapsList.getByAttr(e,t),s))return s}getLayersByAttr(e,t){const i={_0x357aac:2009},s=_0x5e32ae,n=this._layerList[s(i._0x357aac)](e,t);let o=this._optionsLayersList.getListByAttr(e,t);for(let c=0,_=o.length;c<_;c++){const l=o[c];!this._layerList.contains(l.id)&&n.push(l)}o=this._optionsBasemapsList.getListByAttr(e,t);for(let c=0,_=o.length;c<_;c++){const l=o[c];!this._layerList.contains(l.id)&&n.push(l)}return n}getLayers(e={}){const t={_0x1a5b80:3611},i={_0x264e2e:2212,_0x5d45d4:3068},s=_0x5e32ae;let n=[];return e.basemaps&&(n=n[s(t._0x1a5b80)](this._optionsBasemapsList.values)),e.layers&&(n=n[s(3611)](this._optionsLayersList.values)),e[s(3670)]&&(e.basemaps=![],e.layers=![]),this._layerList.forEach(o=>{const c=s;o[c(i._0x264e2e)]||e.childs===![]&&o.parent||Cesium__namespace[c(515)](e.basemaps)&&this._optionsBasemapsList[c(i._0x5d45d4)](o.id)||Cesium__namespace[c(515)](e[c(4310)])&&this._optionsLayersList.contains(o.id)||n.push(o)}),n}getBasemaps(e){const t={_0x219f15:3277,_0x11d8e2:556},i=_0x5e32ae;if(this[i(1334)][i(t._0x219f15)])return console.log(i(1081)),[];if(e){const s=[];return this[i(t._0x11d8e2)][i(2500)](n=>{n.hasEmptyGroup||s.push(n)}),s}else return this[i(t._0x11d8e2)].values}[_0x5e32ae(949)](){const e={_0x4e73be:2087},t={_0x37adb3:3068,_0x1f7922:3759},i=_0x5e32ae;let s=[];return s=s[i(3611)](this.getBasemaps(!![])),this._optionsLayersList.forEach(n=>{n[i(2847)]&&!n.isPrivate&&s.push(n)}),this[i(e._0x4e73be)].forEach(n=>{const o=i;!n.isTile||n.isPrivate||this._optionsBasemapsList.contains(n.id)||this._optionsLayersList[o(t._0x37adb3)](n.id)||s[o(t._0x1f7922)](n)}),s}_initControls(){const e={_0x32b6e6:3798,_0x36fc29:571,_0x4086bf:2212,_0xbfefbc:2577},t=_0x5e32ae;var i,s,n;const o=((i=this[t(3798)])===null||i===void 0?void 0:i[t(3140)])||{};add((s=this[t(1334)])===null||s===void 0?void 0:s.scene,this[t(e._0x32b6e6)].licenseUrl),this._popupMgr=new PopupMgr(o[t(2307)]),this._popupMgr.isPrivate=!![],this.addControl(this._popupMgr),this._tooltipMgr=new TooltipMgr(o[t(e._0x36fc29)]),this._tooltipMgr[t(2212)]=!![],this[t(1298)](this[t(850)]),this._contextmenuMgr=new ContextMenu(o.contextmenu),this._contextmenuMgr[t(e._0x4086bf)]=!![],this.addControl(this._contextmenuMgr),(((n=o[t(2570)])===null||n===void 0?void 0:n.hasDefault)??!![])&&this.bindContextMenu(this.getDefaultContextMenu()),this._smallTooltip=new SmallTooltip(o.smallTooltip),this[t(e._0xbfefbc)].isPrivate=!![],this.addControl(this._smallTooltip),this._keyboardRoam=new KeyboardRoam({enabled:![],...o.keyboardRoam||{}}),this._keyboardRoam[t(2212)]=!![],this.addControl(this._keyboardRoam);for(const c in o){const _=o[c];if(!_||_.enabled===![])continue;const l=create$1(c,_);l&&this.addControl(l)}}addControl(e,t){const i={_0x372821:1582,_0x47a7da:2078,_0xbd0a55:515,_0x4a0fc9:1298},s=_0x5e32ae;return!e||!e._onAdd?this:this._controls[e.type]?(logWarn(s(i._0x372821)+e.type+s(i._0x47a7da)+e.type+" 对象 ",this),this):(Cesium__namespace[s(i._0xbd0a55)](t)&&(e.enabled=t),e._onAdd(this),this._controlList.set(e.id,e),this._controls[e.type]=e,this.fire(EventType[s(i._0x4a0fc9)],{control:e}),this)}[_0x5e32ae(3174)](e,t){const i={_0x38d98a:1371,_0x2d15c3:2004},s=_0x5e32ae;return e?(this[s(i._0x38d98a)][s(i._0x2d15c3)](e.id),delete this._controls[e.type],e[s(2851)](),this[s(1404)](EventType.removeControl,{control:e}),t&&e[s(757)](),this):this}[_0x5e32ae(2634)](e){return this[_0x5e32ae({_0x7bb84c:1371}._0x7bb84c)].contains((e==null?void 0:e.id)||e)}eachControl(e,t){const i={_0xdd742e:2500},s=_0x5e32ae;return this._controlList[s(i._0xdd742e)](e,t||this),this}getControl(e,t="type"){return this[_0x5e32ae({_0x39b7ae:1371}._0x39b7ae)].getByAttr(e,t)}[_0x5e32ae(4219)](){const e={_0x160387:3660},t=_0x5e32ae;var i;const s=(i=this.options)===null||i===void 0?void 0:i[t(e._0x160387)];if(s)for(const n in s){const o=s[n];if(!o||o.enabled===![])continue;const c=create(n,o);c&&this.addEffect(c)}}addEffect(e){const t={_0xd4ddf1:3205,_0x469558:3205,_0x5bf804:2701},i=_0x5e32ae;if(!e||!e._onAdd)return this;if(this._effects[e[i(t._0xd4ddf1)]]){logError$1("地图上已有"+e.type+"特效,请直接使用 map.effects."+e[i(t._0x469558)]+" 对象 ",this);return}this.addThing(e),this[i(t._0x5bf804)][e.type]=e,this.fire(EventType.addEffect,{effect:e})}removeEffect(e,t){const i=_0x5e32ae;delete this._effects[e[i(3205)]],this.fire(EventType.removeEffect,{effect:e}),this.removeThing(e,t)}getEffect(e,t="type"){return this.getThing(e,t)}addThing(e){return!e||!e._onAdd?this:(e._onAdd(this),this._thingList.set(e.id,e),this)}removeThing(e,t){const i=_0x5e32ae;return e?(this[i(3420)].remove(e.id),t&&e.clear&&e.clear(),e._onRemove(),t&&e[i(757)](),this):this}[_0x5e32ae(950)](e){const t=_0x5e32ae;return this._thingList[t(3068)]((e==null?void 0:e.id)||e)}eachThing(e,t){const i=_0x5e32ae;return this._thingList[i(2500)](e,t||this),this}[_0x5e32ae(1555)](e,t){return this._thingList.getByAttr(e,t)}getLangText(e){return getLangText(e,this.lang)}zoomIn(e,t){const i={_0x19fe25:465},s=_0x5e32ae,n=this[s(i._0x19fe25)].zoomIn(e,t);return n&&this.fire(EventType[s(913)],{ztype:"zoomIn",relativeAmount:e,mandatory:t}),n}zoomOut(e,t){const i=_0x5e32ae,s=this._zoomNavigation.zoomOut(e,t);return s&&this.fire(EventType.zoom,{ztype:i(1704),relativeAmount:e,mandatory:t}),s}changeMouseModel(e){const t={_0x158972:3431,_0x2c0ea1:3107,_0x49f815:2928,_0x595819:2860,_0x550543:1936,_0x201533:3107,_0xd485c6:2928,_0x130e21:4152},i=_0x5e32ae;this[i(t._0x158972)]=e,e?(this._viewer[i(t._0x2c0ea1)][i(3595)].tiltEventTypes=[Cesium__namespace.CameraEventType.RIGHT_DRAG,Cesium__namespace[i(t._0x49f815)][i(t._0x595819)],{eventType:Cesium__namespace.CameraEventType.LEFT_DRAG,modifier:Cesium__namespace.KeyboardEventModifier.CTRL},{eventType:Cesium__namespace[i(2928)][i(t._0x550543)],modifier:Cesium__namespace.KeyboardEventModifier.CTRL}],this._viewer[i(t._0x201533)].screenSpaceCameraController.zoomEventTypes=[Cesium__namespace.CameraEventType.MIDDLE_DRAG,Cesium__namespace.CameraEventType.WHEEL,Cesium__namespace.CameraEventType.PINCH]):(this[i(1334)][i(3107)][i(3595)].tiltEventTypes=[Cesium__namespace[i(t._0xd485c6)].MIDDLE_DRAG,Cesium__namespace.CameraEventType.PINCH,{eventType:Cesium__namespace.CameraEventType.LEFT_DRAG,modifier:Cesium__namespace[i(t._0x130e21)].CTRL},{eventType:Cesium__namespace.CameraEventType.RIGHT_DRAG,modifier:Cesium__namespace.KeyboardEventModifier.CTRL}],this._viewer.scene.screenSpaceCameraController.zoomEventTypes=[Cesium__namespace.CameraEventType.RIGHT_DRAG,Cesium__namespace.CameraEventType.WHEEL,Cesium__namespace[i(2928)].PINCH]),this.controls.mouseDownView&&this.controls[i(1125)].changeMouseModel()}clearPitchRange(){const e={_0x4d1be8:2941,_0x1c7c3c:3087,_0x958ada:3107,_0x2d7afa:3406},t=_0x5e32ae;delete this._pitch_max,delete this[t(e._0x4d1be8)],delete this[t(e._0x1c7c3c)],this[t(1334)].scene.screenSpaceCameraController.inertiaSpin=.9,this._viewer[t(e._0x958ada)].screenSpaceCameraController.inertiaTranslate=.9,this.off(EventType.mouseDown,this._setPitchRange_rightDownHandler,this),this.off(EventType.mouseUp,this._setPitchRange_rightUpHandler,this),this.off(EventType.mouseMove,this[t(2531)],this),this.off(EventType[t(e._0x2d7afa)],this._setPitchRange_cameraChangedHandler,this)}setPitchRange(e,t=-90){const i={_0x3499e3:3107,_0x3640b4:3107},s=_0x5e32ae;this.clearPitchRange(),this[s(1334)][s(i._0x3499e3)][s(3595)].inertiaSpin=0,this._viewer[s(i._0x3640b4)].screenSpaceCameraController.inertiaTranslate=0,this._pitch_max=Cesium__namespace[s(1286)].toRadians(e),this._pitch_min=Cesium__namespace.Math.toRadians(t),this.on(EventType.mouseDown,this[s(1617)],this),this.on(EventType.mouseUp,this._setPitchRange_rightUpHandler,this)}_setPitchRange_rightDownHandler(e){const t={_0x3bc564:2868,_0x59117e:3865},i=_0x5e32ae;this._viewer.scene.mode===Cesium__namespace[i(3850)].SCENE3D&&(this._viewer.camera.positionCartographic.height>this[i(1334)][i(3107)].screenSpaceCameraController.minimumCollisionTerrainHeight||(this._pitch_minHeight=this[i(1334)].camera[i(t._0x3bc564)][i(t._0x59117e)],this.on(EventType.mouseMove,this._setPitchRange_mouseMoveHandler,this),this.on(EventType.cameraChanged,this._setPitchRange_cameraChangedHandler,this)))}_setPitchRange_rightUpHandler(e){this._viewer.scene.screenSpaceCameraController.enableTilt=!![],this.off(EventType.mouseMove,this._setPitchRange_mouseMoveHandler,this),this.off(EventType.cameraChanged,this._setPitchRange_cameraChangedHandler,this)}_setPitchRange_mouseMoveHandler(e){const t={_0x43711a:1274,_0x41c00f:1598,_0x1849d6:1334,_0x17f11f:2792,_0x748ce7:2941},i=_0x5e32ae;let s=!![];const n=e[i(t._0x43711a)].y<e[i(t._0x41c00f)].y;n&&this[i(t._0x1849d6)][i(t._0x17f11f)].pitch>this[i(1244)]?s=![]:!n&&this[i(1334)].camera.pitch<this[i(t._0x748ce7)]?s=![]:s=!![],this._viewer.scene.screenSpaceCameraController.enableTilt=s}_setPitchRange_cameraChangedHandler(e){const t={_0x33f4f2:3865,_0x26f0d3:3914,_0x21abba:1334},i=_0x5e32ae;if(this._viewer.scene.mode!==Cesium__namespace.SceneMode.SCENE3D||this._viewer.camera.positionCartographic[i(t._0x33f4f2)]>this._viewer.scene.screenSpaceCameraController.minimumCollisionTerrainHeight)return;let s=this._viewer.camera[i(2625)];if(s>this._pitch_max||s<this._pitch_min){this._viewer[i(3107)].screenSpaceCameraController[i(t._0x26f0d3)]=![],s>this._pitch_max?s=this._pitch_max:s<this._pitch_min&&(s=this._pitch_min);const n=Cesium__namespace.Cartesian3.fromRadians(this._viewer[i(2792)].positionCartographic.longitude,this._viewer.camera[i(2868)].latitude,Math.max(this[i(t._0x21abba)].camera.positionCartographic.height,this._pitch_minHeight));this._viewer.camera.cancelFlight(),this[i(1334)].camera.setView({destination:n,orientation:{pitch:s}}),this._viewer.scene.screenSpaceCameraController.enableTilt=!![]}}[_0x5e32ae(4103)](e,t={}){const i=_0x5e32ae,s=this.getCenter();if(!s)return Promise.resolve(![]);const n=Cesium__namespace.Cartesian3.distance(s.toCartesian(),this[i(1334)].camera[i(523)]);return this[i(3047)](s,{...t,radius:n,pitch:e})}cancelFlyTo(){const e={_0x43212b:1334},t=_0x5e32ae;return Route.clearLastCamera(),this._setCameraViewListState=![],this[t(e._0x43212b)].camera.cancelFlight(),this}cancelFlight(){return this.cancelFlyTo()}[_0x5e32ae(2811)](e){return getCameraView(this.camera,e)}[_0x5e32ae(1227)](e,t={}){const i={_0x5a7650:2792,_0xb705ed:3411,_0x537c27:448,_0x72badc:1286,_0x4f981b:1567,_0x4bd794:1334,_0x2a56e9:1557},s={_0x1823c7:4184};return new Promise((n,o)=>{const c=_0x5210;if(!e||e.lng===0&&e.lat===0&&e.alt===0){n(![]);return}isNumber(t)&&(t={duration:t});let _=t.minHeight??2500;this[c(1334)].camera.positionCartographic[c(3865)]<_&&(_=this._viewer[c(i._0x5a7650)][c(2868)].height),Cesium__namespace.defined(e.alt)&&(_=e.alt);let l;Cesium__namespace.defined(e[c(i._0xb705ed)])&&Cesium__namespace.defined(e.lat)?l=Cesium__namespace.Cartesian3.fromDegrees(e.lng,e[c(i._0x537c27)],_):Cesium__namespace.defined(e.x)&&Cesium__namespace[c(515)](e.y)?(Cesium__namespace.defined(e.z)&&(_=e.z),l=Cesium__namespace.Cartesian3.fromDegrees(e.x,e.y,_)):l=this[c(1334)].camera.position;const h={...t,destination:l,orientation:{heading:Cesium__namespace.Math[c(1567)](e.heading??0),pitch:Cesium__namespace[c(i._0x72badc)][c(i._0x4f981b)](e.pitch??-90),roll:Cesium__namespace[c(i._0x72badc)].toRadians(e.roll??0)},complete:()=>{t.complete&&t.complete(),n(!![])},cancel:()=>{const f=c;t.cancel&&t[f(s._0x1823c7)](),n(![])}};t.duration===0?(this[c(i._0x4bd794)].camera[c(i._0x2a56e9)](h),t.complete&&t.complete(),n(!![])):this._viewer.camera.flyTo(h)})}centerAt(e,t){return this.setCameraView(e,t)}flyHome(e){const t={_0x5c0ffd:3798,_0x44a879:3107,_0x24534c:4064},i=_0x5e32ae;var s,n,o,c;(s=this[i(t._0x5c0ffd)])!==null&&s!==void 0&&(n=s[i(t._0x44a879)])!==null&&n!==void 0&&n[i(t._0x24534c)]?this.setCameraView(this.options.scene[i(4064)],e):(o=this.options)!==null&&o!==void 0&&(c=o.scene)!==null&&c!==void 0&&c[i(3569)]&&this.flyToExtent(this.options.scene.extent,e)}setCameraViewList(e,t={}){const i={_0x214440:2485,_0x1a7b7f:1526},s=_0x5e32ae;this.cancelFlyTo(),this[s(i._0x214440)]=e,this[s(i._0x1a7b7f)]=t,this._setCameraViewListState=!![],this._setCameraViewListItem(0,t)}pauseCameraViewList(){this[_0x5e32ae(2824)]()}proceedCameraViewList(){const e={_0x4ee419:2050,_0x56ca50:1526},t=_0x5e32ae;this[t(e._0x4ee419)]=!![],this._setCameraViewListItem(this._setCameraViewListIndex,this[t(e._0x56ca50)])}[_0x5e32ae(1146)](e,t){const i={_0x665cf:2050,_0x21404a:2485,_0x4a7d5d:1971},s={_0x1e7be6:4184},n={_0x25709a:3874},o=_0x5e32ae,c=this;if(!this[o(i._0x665cf)]||e<0||e>=this[o(i._0x21404a)].length){this._setCameraViewListState=![],t!=null&&t.complete&&t.complete();return}this[o(4168)]=e;const _=this._setCameraViewListArr[e];_[o(1971)]&&_[o(i._0x4a7d5d)]();let l;this[o(1227)](_,{easingFunction:Cesium__namespace.EasingFunction.LINEAR_NONE,...t,duration:_.duration,complete:function(){const h=o;_.onEnd&&_.onEnd();const f=_[h(n._0x25709a)]??1;l=setTimeout(()=>{c._setCameraViewListItem(++e,t)},f*1e3)},cancle:function(){const h=o;this[h(2050)]=![],clearTimeout(l),t!=null&&t[h(4184)]&&t[h(s._0x1e7be6)]()}})}[_0x5e32ae(3576)](e,t){const i={_0x169195:1334},s=_0x5e32ae;if(e)return this[s(i._0x169195)].flyTo(e,t)}flyToGraphic(e,t={}){const i={_0x44854d:4056,_0x45afa7:3576,_0x58c2c6:3402,_0x4f6693:967,_0x3fb0d1:3460},s=_0x5e32ae;if(!e||e.length===0)return Promise[s(4056)](![]);if(e[s(3576)]){var n;return t.clampToGround=(n=e.style)===null||n===void 0?void 0:n.clampToGround,e.flyTo(t)}if(!Array.isArray(e))return Promise[s(i._0x44854d)](![]);if(e[s(3402)]===1)return e[0][s(i._0x45afa7)](t);let o;for(let c=0,_=e[s(i._0x58c2c6)];c<_;c++){const l=e[c];if(!l.getRectangle)continue;const h=l.getRectangle();Cesium__namespace.defined(h)&&(o?o=Cesium__namespace.Rectangle[s(i._0x4f6693)](h,o):o=h)}return this[s(i._0x3fb0d1)](o,t)}flyToPositions(e,t={}){const i={_0xaf0fa8:3183,_0x34f172:2498},s=_0x5e32ae;if(!e||e.length===0)return Promise.resolve(![]);if(e.length===1)return this.flyToPoint(e[0],t);const n=getRectangle(e,!![]);return n?n[s(i._0xaf0fa8)]===n.xmax&&n[s(i._0x34f172)]===n.ymax||n[s(2628)]-n.xmin>200?this.flyToPoint([n[s(3183)],n.ymin,n.height],t):(n.height=getMaxHeight(e),t.scale=t.scale||1.2,this.flyToExtent(n,t)):Promise.resolve(![])}flyToExtent(e,t={}){const i={_0x9fd876:1334,_0xf88521:3107,_0x7eba61:1124,_0x46497c:3875},s=_0x5e32ae;e instanceof Cesium__namespace.Rectangle&&(e=formatRectangle(e));const n=e.xmin,o=e.xmax,c=e.ymin,_=e.ymax,l=(n+o)/2,h=(c+_)/2;if(l===0&&h===0)return Promise.resolve(![]);let f=e.height??t.height??0;if(f===0){var m;f=getHeight((m=this[s(i._0x9fd876)])===null||m===void 0?void 0:m[s(i._0xf88521)],Cesium__namespace[s(3916)].fromDegrees(l,h))}const g=Cesium__namespace[s(3324)].fromDegrees(n,c,o,_),C=Math[s(i._0x7eba61)](g.height,g[s(4005)]);if(C>0){var E;t.radius=(t[s(3194)]??0)+Cesium__namespace.Math.chordLength(C,(E=this._viewer)===null||E===void 0?void 0:E[s(3107)].globe[s(i._0x46497c)].maximumRadius)}return this[s(3047)](new LngLatPoint(l,h,f),t)}flyToPoint(e,t={}){const i={_0x2d035c:2825,_0x3682d1:2383,_0x285b13:3107,_0x1ad009:515,_0x893ac3:1567,_0x376c50:515,_0x920d94:1286,_0x49ab89:515,_0x1882a0:4017,_0x19ba26:2792};return new Promise((s,n)=>{const o={_0x2e343c:1334,_0x3c73bb:2825},c=_0x5210;if(!e){s(![]);return}e=LngLatPoint.parse(e);let _=e.toCartesian();if(t[c(i._0x2d035c)])if(this[c(i._0x3682d1)]){getSurfaceHeight(this._viewer[c(i._0x285b13)],_,{has3dtiles:!![]}).then(C=>{const E=c;e.alt=C.height*(this[E(o._0x2e343c)].scene.globe.terrainExaggeration||1),delete t[E(o._0x3c73bb)],this.flyToPoint(e,t)[E(549)](P=>{s(P)})});return}else e.alt=0,_=e.toCartesian();let l=t.radius||this.getCameraDistance()||100;Cesium__namespace[c(i._0x1ad009)](t.scale)&&t.scale>0&&(l*=t.scale),Cesium__namespace[c(515)](t[c(4111)])&&l<t[c(4111)]&&(l=t.minHeight),Cesium__namespace.defined(t.maxHeight)&&l>t.maxHeight&&(l=t.maxHeight);let h;if(Cesium__namespace.defined(t[c(2625)]))h=Cesium__namespace.Math[c(i._0x893ac3)](t.pitch);else{h=this[c(1334)].camera.pitch;const C=Cesium__namespace.Math.toDegrees(h);Cesium__namespace[c(i._0x376c50)](t[c(1275)])&&C<t.minPitch&&(h=Cesium__namespace[c(i._0x920d94)].toRadians(t.minPitch)),Cesium__namespace[c(i._0x1ad009)](t[c(3629)])&&C>t.maxPitch&&(h=Cesium__namespace.Math.toRadians(t.maxPitch))}const f=Cesium__namespace[c(i._0x49ab89)](t.heading)?Cesium__namespace.Math.toRadians(t.heading):this._viewer.camera[c(3977)],m=new Cesium__namespace[c(3691)](f,h,l),g=new Cesium__namespace.BoundingSphere(_,0);t[c(i._0x1882a0)]===0?(this[c(1334)][c(i._0x19ba26)].lookAt(_,m),!t.lock&&!this._viewer.trackedEntity&&this._viewer.camera.lookAtTransform(Cesium__namespace[c(4102)].IDENTITY),t.complete&&t.complete(),s(!![])):this._viewer.camera.flyToBoundingSphere(g,{...t,offset:m,complete:()=>{t.complete&&t.complete(),s(!![])},cancel:()=>{t[c(4184)]&&t.cancel(),s(![])}})})}[_0x5e32ae(4143)](){return this[_0x5e32ae({_0x4bda6d:2067}._0x4bda6d)]}[_0x5e32ae(632)](e={}){const t={_0x254357:2792,_0x33f27a:3411},i=_0x5e32ae,s=this._viewer,n=e[i(4064)]||this.getCameraView();return new Promise((o,c)=>{const _=i;this._isFlyAnimation=!![];const l=this;function h(f){const m=_0x5210;o(f),e.callback&&e[m(2581)](f),l._isFlyAnimation=![],l[m(1503)]&&(l.openFlyAnimationEndFun(),delete l.openFlyAnimationEndFun)}s[_(t._0x254357)].setView({destination:Cesium__namespace[_(3916)].fromDegrees(-85.16,13.71,23e6)}),s.camera.flyTo({destination:Cesium__namespace.Cartesian3.fromDegrees(n[_(t._0x33f27a)],n[_(448)],23e6),duration:e.duration1||2,easingFunction:e.easingFunction1||Cesium__namespace.EasingFunction.LINEAR_NONE,complete:()=>{const f=_;let m=n[f(3984)]??9e4;m<2e5&&n.pitch!==-90?(m=m*1.2+8e3,s.camera.flyTo({destination:Cesium__namespace.Cartesian3.fromDegrees(n.lng,n.lat,m),duration:e.duration2,easingFunction:e[f(1671)],complete:()=>{const g=f;this.setCameraView(n,{duration:e.duration3||2,easingFunction:e[g(2415)],complete:()=>{h(!![])},cancel:()=>{h(![])}})},cancel:()=>{h(![])}})):this[f(1227)](n,{duration:e.duration3||2,easingFunction:e[f(2415)],complete:()=>{h(!![])},cancel:()=>{h(![])}})},cancel:()=>{h(![])}})})}[_0x5e32ae(1042)](e={}){const t={_0x3c663e:1286},i=this._viewer,s=e.center||this.getCameraView({simplify:![]}),n=(e.duration??10)/3;return new Promise((o,c)=>{const _={_0x515672:3576,_0x5ca6b5:3916,_0x2e9f4b:4175,_0x186b8b:1631},l=_0x5210;i.camera.flyTo({destination:Cesium__namespace.Cartesian3.fromDegrees(s.lng+120,s.lat,s.alt),orientation:{heading:Cesium__namespace.Math.toRadians(s.heading),pitch:Cesium__namespace.Math.toRadians(s.pitch),roll:Cesium__namespace[l(t._0x3c663e)].toRadians(s.roll||0)},duration:n,easingFunction:Cesium__namespace.EasingFunction.LINEAR_NONE,complete:function(){const h={_0x168ec1:3916,_0x20e198:3203,_0x285a44:3977,_0x405c75:1567},f=l;i.camera[f(_._0x515672)]({destination:Cesium__namespace[f(_._0x5ca6b5)].fromDegrees(s.lng+240,s.lat,s.alt),orientation:{heading:Cesium__namespace.Math.toRadians(s.heading),pitch:Cesium__namespace.Math.toRadians(s.pitch),roll:Cesium__namespace.Math.toRadians(s[f(_._0x2e9f4b)]||0)},duration:n,easingFunction:Cesium__namespace.EasingFunction[f(_._0x186b8b)],complete:function(){const m=f;i.camera.flyTo({destination:Cesium__namespace[m(h._0x168ec1)][m(h._0x20e198)](s.lng,s.lat,s.alt),orientation:{heading:Cesium__namespace.Math.toRadians(s[m(h._0x285a44)]),pitch:Cesium__namespace.Math[m(h._0x405c75)](s.pitch),roll:Cesium__namespace.Math.toRadians(s.roll||0)},duration:n,easingFunction:Cesium__namespace[m(1863)].LINEAR_NONE,complete:function(){o(!![])},cancel:()=>{o(![])}})},cancel:()=>{o(![])}})},cancel:()=>{o(![])}})})}closeHighlight(e){const t={_0x4474a2:567},i=_0x5e32ae;(e==null?void 0:e.graphic)!==this.last_highlighGraphic&&(this.last_highlighGraphic&&this.last_highlighGraphic[i(567)]&&this.last_highlighGraphic[i(t._0x4474a2)](),this._clearLastHighlight())}[_0x5e32ae(1297)](){const e={_0x1d9e4e:3317},t=_0x5e32ae;this.last_highlighGraphic&&(this.last_highlighGraphic=null),this.outlineEffect&&(this[t(e._0x1d9e4e)].selected=[])}[_0x5e32ae(2932)](e,t,i){const s={_0x214da6:3317,_0x4e2715:787,_0x1f8404:1334},n=_0x5e32ae;if(this._highlightEnabled){if(!e.openHighlight){logInfo("该对象暂不支持highlight高亮",e);return}this[n(567)](),t.outlineEffect?(!this.outlineEffect&&(this[n(s._0x214da6)]=new OutlineEffect({eventType:![]}),this.addEffect(this.outlineEffect)),this[n(3317)].setOptions(t),this.outlineEffect.selected=this.mouseEvent[n(1849)](i)):e.openHighlight(t,![],i==null?void 0:i.pickedObject),this[n(s._0x4e2715)]=e,this[n(s._0x1f8404)].scene.requestRender()}}openPopup(e,t,i){return this._popupMgr.open(e,{content:t,options:i}),this}[_0x5e32ae(3772)](){const e={_0x2d110c:769},t=_0x5e32ae;return this._popupMgr&&this[t(e._0x2d110c)].closeAll(),this}openTooltip(e,t,i={}){return this[_0x5e32ae({_0x3e2f70:850}._0x3e2f70)].open(e,{content:t,options:i,target:this}),this}[_0x5e32ae(1789)](){return this._tooltipMgr&&this._tooltipMgr.close(),this}[_0x5e32ae(3204)](){const e={_0x8dba0d:1283},t=_0x5e32ae;var i;return(i=this._contextmenuConfig)===null||i===void 0?void 0:i[t(e._0x8dba0d)]}bindContextMenu(e,t){return this._contextmenuConfig={content:e,options:t},this}unbindContextMenu(){const e={_0x5be684:3331},t=_0x5e32ae;return this[t(e._0x5be684)]=null,this}openContextMenu(e){return this[_0x5e32ae({_0x1d334c:3933}._0x1d334c)].open(e,this._contextmenuConfig),this}closeContextMenu(){const e=_0x5e32ae;return this._contextmenuMgr&&this._contextmenuMgr[e(1293)](),this}openSmallTooltip(e,t){return this[_0x5e32ae({_0x144ac1:2577}._0x144ac1)].open(e,t),this}closeSmallTooltip(){if(this._smallTooltip)return this._smallTooltip.close(),this}clear(e=!![]){const t={_0x3d5640:2383,_0x343b21:1888},i=_0x5e32ae;this._thingList.forEach(s=>{this.removeThing(s,e)},this,!![]),this._thingList[i(1888)](),this[i(1371)].forEach(s=>{!s||s.isPrivate||this.removeControl(s,e)},this,!![]),this[i(1371)].removeAll(),this._layerList.forEach(s=>{!s||s.isPrivate||this.removeLayer(s,e)},this,!![]),this[i(2087)].removeAll(),this[i(t._0x3d5640)]=![],this._lights[i(1888)](),this._visibilitys[i(t._0x343b21)](),this._controls={},this._effects={}}destroy(){const e={_0x1d244f:3420,_0x484115:4011,_0x42a01a:757},t=_0x5e32ae;if(this._viewer){try{this._controlList.destroy()}catch(i){logWarn("_controlList.destroy 异常",i)}try{this[t(e._0x1d244f)][t(757)]()}catch(i){logWarn(t(e._0x484115),i)}try{this._mouseEvent[t(757)]()}catch(i){logWarn("_mouseEvent.destroy 异常",i)}try{this._layerList[t(e._0x42a01a)]()}catch(i){logWarn("_layerList.destroy 异常",i)}try{this._viewer.destroy()}catch(i){logWarn(t(1279),i)}for(const i in this)delete this[i]}}}class MapCompare extends BaseControl{get mapEx(){return this._mapEx}[_0x5e32ae(3118)](){this._container=create$3("div",this.options.className||"mars3d-container  mars3d-mapCompare")}_addedHook(){const e={_0x53fec8:3268,_0x359bce:2545,_0x43f320:1758},t=_0x5e32ae;!this.options[t(e._0x53fec8)]&&(this._map[t(3290)][t(3720)].style.width="50%");let i={...this.options};!i.basemaps&&!i.layers&&(i=merge(i,this[t(1890)].getCurrentOptions()),i[t(3140)]=i[t(3140)]||{},i.control.baseLayerPicker=!![],i.control[t(e._0x359bce)]=![]),this[t(e._0x43f320)]=new Map(this._container,i),this._map.on(EventType.morphComplete,this._morphCompleteHandler,this),this._map.on(EventType.cameraChanged,this._map_extentChangeHandler,this),this[t(1890)].camera.percentageChanged=.001,this._mapEx.on(EventType.cameraChanged,this._mapEx_extentChangeHandler,this),this._mapEx[t(2792)].percentageChanged=.001,this._map_extentChangeHandler()}_removedBeforeHook(){const e={_0x4bbf41:2369,_0x6dbc81:1758},t=_0x5e32ae;this._map[t(1220)](EventType.morphComplete,this._morphCompleteHandler,this),this._map.off(EventType.cameraChanged,this[t(4066)],this),this._mapEx.off(EventType[t(e._0x4bbf41)],this._mapEx_extentChangeHandler,this),this._mapEx[t(757)](),delete this[t(e._0x6dbc81)]}_morphCompleteHandler(e){const t={_0x5682a9:3914,_0x5b80c5:1758},i=_0x5e32ae;this._map[i(3107)].mode===Cesium__namespace.SceneMode.SCENE2D?this._mapEx.scene[i(3595)][i(t._0x5682a9)]=![]:this[i(t._0x5b80c5)].scene.screenSpaceCameraController.enableTilt=!![]}_map_extentChangeHandler(e){const t=_0x5e32ae;clearTimeout(this._map_timeTik),this[t(1758)].off(EventType.cameraChanged,this._mapEx_extentChangeHandler,this),this[t(595)](this._map,this[t(1758)]),this._map_timeTik=setTimeout(()=>{this._mapEx.on(EventType.cameraChanged,this._mapEx_extentChangeHandler,this)},10)}_mapEx_extentChangeHandler(e){const t={_0x51d22f:2369,_0xc2fd24:4066,_0x3c2229:595},i=_0x5e32ae;clearTimeout(this._mapEx_timeTik),this._map.off(EventType[i(t._0x51d22f)],this[i(t._0xc2fd24)],this),this[i(t._0x3c2229)](this[i(1758)],this[i(1890)]),this._mapEx_timeTik=setTimeout(()=>{this._map.on(EventType.cameraChanged,this._map_extentChangeHandler,this)},10)}[_0x5e32ae(595)](e,t){const i=e.getCameraView({simplify:![]});t.setCameraView(i,{duration:0})}}register$1("mapCompare",MapCompare);class OverviewMap extends BaseControl{get smallMap(){return this._smallMap}get center(){return this._center}_mountedHook(){const e={_0x135136:3798,_0x405478:2909},t=_0x5e32ae;this[t(e._0x135136)].flyToOptions=this.options.flyToOptions||{},this._container=create$3("div","mars3d-overviewMap"),this.setStyle(this[t(3798)].style||{right:t(2909),top:t(e._0x405478)})}[_0x5e32ae(4158)](){const e={_0x59ae75:2213},t=_0x5e32ae;this.initMinMap(),this._map.camera.percentageChanged=.01,this[t(1890)].on(EventType.cameraChanged,this._map_cameraChanged,this),this[t(e._0x59ae75)]()}_removedHook(){const e=_0x5e32ae;this[e(1890)][e(1220)](EventType.cameraChanged,this._map_cameraChanged,this),this._smallMap.destroy(),delete this._smallMap}_map_cameraChanged(){const e={_0x484313:3324,_0x2ea0e0:3183,_0x4ba0aa:3324,_0x4312d1:4064},t=_0x5e32ae,i=this._map.getExtent();this[t(2854)]=Cesium__namespace[t(e._0x484313)].fromDegrees(i[t(e._0x2ea0e0)],i.ymin,i.xmax,i.ymax),this._center=Cesium__namespace.Cartographic.toCartesian(Cesium__namespace[t(e._0x4ba0aa)][t(e._0x4312d1)](this._rectangle)),this[t(4303)].flyToExtent(i,{duration:0,scale:2,...this.options.flyToOptions}),this.fire(EventType[t(809)])}initMinMap(){const e={_0x1e68da:3798,_0x42a889:3798,_0x166375:718,_0xbf23b:2498,_0x3fef6:1842,_0x27c173:3703},t=_0x5e32ae,i=this[t(1890)].getExtent(),s={scene:{sceneMode:Cesium__namespace.SceneMode[t(1183)],cameraController:{enableRotate:![],enableTranslate:![],enableTilt:![],enableZoom:![]},...this[t(e._0x1e68da)].scene,extent:i},control:{contextmenu:{hasDefault:![]},...this[t(e._0x42a889)].control},basemaps:[{...this.options[t(e._0x166375)],show:!![]}],layers:this.options.layers};this._smallMap=new Map(this[t(2899)],s),this.options.rectangle&&(this._rectangle=Cesium__namespace.Rectangle.fromDegrees(i.xmin,i[t(e._0xbf23b)],i.xmax,i.ymax),this[t(e._0x3fef6)]=new RectangleEntity({rectangle:new Cesium__namespace[t(e._0x27c173)](n=>this._rectangle,![]),style:{color:"rgba(0,0,255,0.2)",outline:!![],outlineWidth:1,outlineColor:"#ff7800",...this.options.rectangle}}),this._smallMap.graphicLayer.addGraphic(this._extentGraphic))}}register$1("overviewMap",OverviewMap);const icon$1=_0x5e32ae(670),icon=_0x5e32ae(3625);class ClockAnimate extends BaseControl{_mountedHook(){const e=_0x5e32ae;this[e(2899)]=create$3(e(1541),"mars3d-clockAnimate"),this._container[e(624)]=`
      <button id="btn-clockAnimate-start" class="mars3d-clockAnimate-btn" title="暂停">
        `+icon$1+`
      </button>
      <button id="btn-clockAnimate-now" class="mars3d-clockAnimate-btn" title="返回到当前时间" >
        <svg width="20" height="20" style="margin-top: 5px;" viewBox="0 0 48 58" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect width="48" height="48" fill="white" fill-opacity="0.01"/><rect width="48" height="58" fill="white" fill-opacity="0.01"/>
          <path d="M34.0234 6.68921C31.0764 4.97912 27.6525 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44C35.0457 44 44 35.0457 44 24C44 20.3727 43.0344 16.9709 41.3461 14.0377" stroke="#ffffff" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M31.9498 16.0502C31.9498 16.0502 28.5621 25.0947 27.0001 26.6568C25.438 28.2189 22.9053 28.2189 21.3432 26.6568C19.7811 25.0947 19.7811 22.562 21.3432 20.9999C22.9053 19.4378 31.9498 16.0502 31.9498 16.0502Z" fill="none" stroke="#ffffff" stroke-width="4" stroke-linejoin="round"/>
        </svg>
      </button>
      <span id="txt-clockAnimate-time" class="time" title="当前时间"> 2017-08-25 00:00:00 </span>
      <input id="txt-clockAnimate-speed" type="number" class="mars3d-clockAnimate-speed" value="1" title="速度（倍率）" />
    `}[_0x5e32ae(4158)](){const e={_0x599a6c:4020,_0x2644ae:2732,_0x4de4d8:1948,_0x7bc062:911,_0x61ce9:2899,_0x47e18d:1881,_0x2132bc:1263,_0x8e32f4:1949,_0x894db6:2732},t={_0x21b198:3961},i={_0xdf1c96:1890,_0x4c77b1:2454},s={_0x3867ab:1890,_0x4f2410:1949,_0x38b506:1050,_0x4355bd:1890},n=_0x5e32ae;this._container.querySelector("#btn-clockAnimate-now").addEventListener(n(1948),_=>{const l=n;this._map.clock[l(837)]=Cesium__namespace[l(527)].now(),this.updateStatus(),this.fire(EventType.click,{mouseEvent:_,targetType:"now",time:this._map[l(1949)].currentTime})});const c=this._container.querySelector(n(e._0x599a6c));c[n(e._0x2644ae)](n(e._0x4de4d8),_=>{const l=n;this[l(s._0x3867ab)][l(s._0x4f2410)][l(s._0x38b506)]=!this[l(s._0x4355bd)][l(1949)].shouldAnimate,this.updateStatus(),this[l(1404)](EventType.click,{mouseEvent:_,targetType:"state",state:this._map.clock.shouldAnimate})}),this._containerBtnStart=c,this._containerTime=this._container[n(1881)]("#txt-clockAnimate-time"),this[n(3992)][n(2732)]("click",_=>{this[n(1404)](EventType.click,{mouseEvent:_,targetType:"label"})}),this[n(e._0x7bc062)]=this[n(e._0x61ce9)][n(e._0x47e18d)](n(e._0x2132bc)),this._containerSpeed.setAttribute("value",this._map[n(e._0x8e32f4)].multiplier),this._containerSpeed[n(e._0x894db6)]("change",_=>{const l=n,h=Number(this._containerSpeed.value||1);!isNaN(h)&&(this[l(i._0xdf1c96)].clock[l(i._0x4c77b1)]=h,this.fire(EventType.change,{mouseEvent:_,speed:h}))}),setTimeout(()=>{this[n(t._0x21b198)](!![])},1e3),this[n(749)]=setInterval(()=>{this.clock_onTickHandler()},500),this[n(612)]()}_showHook(e){const t={_0x24ffed:4114,_0x37d1b5:3386,_0x4d4ba4:1890,_0x21103e:1654},i=_0x5e32ae;var s;const n=this._map.controls.timeline,o=n==null?void 0:n.container;if(o&&(o[i(t._0x24ffed)].left=e?this._container[i(t._0x37d1b5)]+1+"px":"0"),(s=this[i(t._0x4d4ba4)].controls)!==null&&s!==void 0&&s.distanceLegend){const c=e||o&&o.style[i(1648)]!=="none";this[i(t._0x4d4ba4)].controls[i(t._0x21103e)].setStyle({bottom:c?"27px":"2px"})}}[_0x5e32ae(2442)](){this.timeTik&&(clearInterval(this.timeTik),this.timeTik=null)}clock_onTickHandler(){const e={_0x2d7abb:4136},t=_0x5e32ae;this.updateStatus();const i=Number(this._containerSpeed.value);this[t(1890)].clock.multiplier!==i&&this[t(911)][t(e._0x2d7abb)](t(3427),this._map.clock.multiplier);const s=Cesium__namespace.JulianDate[t(1455)](this._map.clock.currentTime);this._containerTime.innerHTML=formatDate(s,this.options.format||"yyyy-MM-dd HH:mm:ss")}[_0x5e32ae(1466)](){const e={_0x60520f:3658,_0x1299f4:4114,_0xab170f:1648},t=_0x5e32ae;if(this[t(4118)]===this._map.clock.shouldAnimate)return;this.isAnimate=this[t(1890)].clock.shouldAnimate,this.isAnimate?(this[t(3658)][t(4136)]("title","暂停"),this[t(e._0x60520f)][t(624)]=icon$1,this._containerSpeed[t(e._0x1299f4)].display=t(3099)):(this._containerBtnStart.setAttribute("title","继续"),this._containerBtnStart.innerHTML=icon,this._containerSpeed[t(4114)][t(e._0xab170f)]=t(3432));const i=this[t(1890)].controls[t(1475)],s=i==null?void 0:i.container;s&&(s.style.left=this._container.offsetWidth+1+"px")}}register$1(_0x5e32ae(3408),ClockAnimate);var index$1={__proto__:null,BaseControl,Animation,BaseLayerPicker,FullscreenButton,Geocoder,HomeButton,NavigationHelpButton,ProjectionPicker,SceneModePicker,Timeline,VRButton,LocationBar,MouseDownView,Zoom,ToolButton,Compass,DistanceLegend,MapSplit,MapCompare,OverviewMap,ClockAnimate};class BaiduPOI{constructor(e={}){const t=_0x5e32ae;this._key_index=0,this[t(1394)]=e[t(3128)]||baiduArr,this._city=e.city||"全国"}get keys(){return this._keys}set keys(e){this._keys=e}get key(){const e=this._key_index++%this._keys.length;return this._keys[e]}_formatPOIData(e){const t={_0x31dd0f:3759,_0x2bdbab:2849,_0x2b2a97:4085,_0x36873e:3181},i=_0x5e32ae,s=[];for(let c=0;c<e.length;c++){var n,o;const _=e[c];let l=[];_.location&&(l=gcj2wgs([_.location.lng,_.location.lat])),s[i(t._0x31dd0f)]({id:_.uid,name:_.name,lng:l[0],lat:l[1],type:((n=_.detail_info)===null||n===void 0?void 0:n[i(t._0x2bdbab)])??_[i(2849)],xzqh:_.province+_.city+(_[i(2245)]||_.area||""),address:_[i(t._0x2b2a97)],tel:_[i(t._0x36873e)]||"",detailUrl:(o=_.detail_info)===null||o===void 0?void 0:o.detail_url,info:_,x:l[0],y:l[1],detail_info:_.detail_info})}return s}[_0x5e32ae(1913)](e){const t=_0x5e32ae;return isString(e)?e.replace(/ /gm,"$").replace(/,/gm,"$"):Array.isArray(e)?e[t(3560)]("$"):e}getAddress(e){const t={_0x46a5d0:456},i={_0x302202:2486},s=_0x5e32ae;if(this[s(t._0x46a5d0)])return Promise.resolve();const n={ak:this.key,output:"json",language:"zh-CN",coordtype:"wgs84ll",ret_coordtype:s(2734)},o=LngLatPoint.parse(e.location);return n.location=o.lat+","+o.lng,this._getAddress_ing=!![],Cesium__namespace.Resource.fetchJsonp({url:s(3117),...this.options,queryParameters:n}).then(c=>{const _=s;if(this._getAddress_ing=![],c.status!==0){console.log("未查询到相关结果！",c);return}const l=c[_(3430)],h={address:l[_(1405)],city:l.cityCode,component:l[_(3261)]};return e.success&&e[_(i._0x302202)](h),h}).catch(c=>{this._getAddress_ing=![],logError$1("BaiduPOI 请求出错",c),e.error&&e.error("请求出错",c)})}[_0x5e32ae(3259)](e){const t={_0xbf6fc4:2162,_0xcc7125:448},i={_0x50043d:2003,_0x3b30c4:3463,_0x39c4c:3430},s=_0x5e32ae,n={ak:this.key,output:"json",ret_coordtype:"gcj02ll"};if(Cesium__namespace.defined(this._city)&&(n.region=this[s(2742)],n.city_limit=!![]),Cesium__namespace.defined(e.city)&&(n.region=e[s(t._0xbf6fc4)],n.city_limit=!![]),Cesium__namespace[s(515)](e.citylimit)&&(n[s(692)]=e.citylimit),e.text&&(n.query=this._getKeywords(e.text)),e.location){n.coord_type=1;const o=LngLatPoint.parse(e.location);n.location=o[s(t._0xcc7125)]+","+o.lng}return Cesium__namespace.Resource.fetchJsonp({url:"https://api.map.baidu.com/place/v2/suggestion",...this.options,queryParameters:n})[s(549)](o=>{const c=s;if(o[c(i._0x50043d)]!==0){console.log("未查询到相关结果！",o);return}const _=this[c(i._0x3b30c4)](o[c(i._0x39c4c)]),l={allcount:o.total,count:_.length,list:_};return e.success&&e.success(l),l}).catch(o=>{const c=s;logError$1("BaiduPOI 请求出错",o),e.error&&e[c(455)]("请求出错",o)})}detail(e){const t={_0x547e17:455},i={_0x8f7c05:455},s=_0x5e32ae,n={ak:this.key,output:s(564),ret_coordtype:"gcj02ll",uid:e.id};return Cesium__namespace.Resource.fetchJsonp({url:"https://api.map.baidu.com/place/v2/detail",queryParameters:n,...this.options}).then(o=>{const c=s;if(o[c(2003)]!==0){console.log("未查询到相关结果！",o);return}if(!o.pois||o.pois.length===0){e[c(455)]&&e[c(i._0x8f7c05)]("未查询到相关结果！",o);return}const _=o;return e.success&&e[c(2486)](_),_}).catch(o=>{const c=s;logError$1("BaiduPOI 请求出错",o),e.error&&e[c(t._0x547e17)](c(3359),o)})}[_0x5e32ae(4093)](e){const t={_0x5e0c62:1323,_0x194e11:652,_0x25c398:3205},i=_0x5e32ae,s=e.graphic;return s?s.type===i(t._0x5e0c62)?(e[i(t._0x194e11)]=s.outlineCoordinates,this.queryPolygon(e)):s[i(t._0x25c398)]==="polygon"?(e.polygon=s.coordinates,this.queryPolygon(e)):s[i(3205)]==="circle"?(e.location=s.point,e.radius=s.radius,this.queryCircle(e)):Promise.resolve(![]):e.polygon?this.queryPolygon(e):this.queryText(e)}queryText(e){const t={_0x3158c0:3128,_0x380318:2162,_0x43b9de:515,_0x2e59a2:1260,_0x547e67:3194,_0xa56ee7:428},i={_0x651983:1005},s={_0x457eef:3448,_0x20d0f9:3194,_0x183dc6:1579,_0xca6aa5:4049},n=_0x5e32ae,o={ak:this[n(t._0x3158c0)],output:"json",ret_coordtype:"gcj02ll",scope:2,page_num:e.page||0,page_size:e[n(857)]||20,tag:e.types||""};if(Cesium__namespace.defined(this._city)&&(o.region=this._city,o[n(692)]=!![]),Cesium__namespace[n(515)](e.city)&&(o.region=e[n(t._0x380318)],o.city_limit=!![]),Cesium__namespace[n(t._0x43b9de)](e.citylimit)&&(o.city_limit=e[n(4045)]),e[n(t._0x2e59a2)]&&(o.query=this._getKeywords(e.text)),e[n(428)]){o.coord_type=1;const c=LngLatPoint.parse(e.location);o.location=c.lat+","+c.lng}return Cesium__namespace.defined(e[n(t._0x547e67)])&&(e.radius>5e6?delete o[n(t._0xa56ee7)]:o.radius=e.radius,Cesium__namespace.defined(e.radiuslimit)&&(o.radius_limit=e.radiuslimit)),Cesium__namespace.Resource.fetchJsonp({url:"https://api.map.baidu.com/place/v2/search",...this.options,queryParameters:o}).then(c=>{const _=n;if(c.status!==0){const f="POI 请求失败("+c.status+")："+c.message;e.error&&e.error(f);return}if(!c.results||c.result_type===_(s._0x457eef)||c.results.length===0)if(e[_(1579)]){const f={allcount:0,count:0,list:[]};return e.success&&e[_(2486)](f),f}else return delete e[_(s._0x20d0f9)],delete e.location,e[_(s._0x183dc6)]=1,this[_(s._0xca6aa5)](e);const l=this._formatPOIData(c.results),h={allcount:c[_(2746)],count:l.length,list:l};return e[_(2486)]&&e.success(h),h})[n(1201)](c=>{logError$1(n(i._0x651983),c),e.error&&e.error("请求出错",c)})}queryCircle(e){const t={_0x83a5f:428,_0x217cdd:807,_0x4037a7:428,_0x10515b:4093},i={_0x20b9a1:1005,_0x13f691:3359},s={_0x2aa138:1810,_0x54c69f:428,_0x92303:2486},n=_0x5e32ae,o={ak:this[n(3128)],output:"json",ret_coordtype:n(2734),scope:2,radius:e.radius||3e3,radius_limit:e.limit,page_num:e.page||0,page_size:e[n(857)]||20,tag:e.types||""};if(e[n(t._0x83a5f)]){o[n(t._0x217cdd)]=1;const c=LngLatPoint.parse(e[n(t._0x4037a7)]);o[n(t._0x4037a7)]=c.lat+","+c.lng}else logError$1("BaiduPOI: 请传入参location数");return e.text?o[n(4093)]=this._getKeywords(e.text):o[n(t._0x10515b)]=n(464),Cesium__namespace.Resource.fetchJsonp({url:"https://api.map.baidu.com/place/v2/search",...this[n(3798)],queryParameters:o}).then(c=>{const _=n;if(c.status!==0){const m="POI 请求失败("+c[_(2003)]+")："+c.message;e.error&&e[_(455)](m);return}if(!c[_(s._0x2aa138)]||c[_(1271)]==="city_type"||c.results[_(3402)]===0){e.error&&e.error("未查询到相关结果！",c);return}const l=this[_(3463)](c.results);let h;e.limit?h=this._filterPOIData_circle(l,e[_(s._0x54c69f)],o[_(3194)]):h=l;const f={allcount:c.total,count:h.length,list:h};return e[_(s._0x92303)]&&e.success(f),f}).catch(c=>{const _=n;logError$1(_(i._0x20b9a1),c),e[_(455)]&&e[_(455)](_(i._0x13f691),c)})}_filterPOIData_circle(e,t,i){const s={_0x372160:3402,_0x1fda53:3916,_0x1df835:3759},n=_0x5e32ae;if(!e||!t||!i)return e;const o=t[n(2048)](),c=[];for(let _=0;_<e[n(s._0x372160)];_++){const l=e[_],h=Cesium__namespace[n(s._0x1fda53)].fromDegrees(l.x,l.y,t.alt);Cesium__namespace.Cartesian3.distance(h,o)<i&&c[n(s._0x1df835)](l)}return c}[_0x5e32ae(1067)](e){const t={_0x15ec25:3194,_0xff8a64:3182,_0x2d984d:3081,_0x347369:4093,_0x4209b0:4093},i={_0xf610e9:3079,_0x1a0f23:1271,_0x373d33:3402,_0x5d12a3:455,_0x3461fc:3463},s=_0x5e32ae,n={ak:this.key,output:"json",ret_coordtype:"gcj02ll",scope:2,radius:e[s(3194)]||3e3,radius_limit:e.limit,page_num:e.page||0,page_size:e.count||20,tag:e.types||""},o=e[s(652)];let c=o;if(o.length===2){const _=o[0][0],l=o[1][0],h=o[0][1],f=o[1][1],m=(_+l)/2,g=(h+f)/2;c=[[_,f],[_,h],[l,h],[l,f],[_,f]],n[s(807)]=1,n.location=g+","+m,n[s(t._0x15ec25)]=Math.max(getDistance([[m,g],o[0]]),getDistance([[m,g],o[1]]))}else{const _=getExtentByGeoJSON({type:s(t._0xff8a64),properties:{},geometry:{type:"LineString",coordinates:o}}),l=(_.xmin+_.xmax)/2,h=(_.ymin+_[s(t._0x2d984d)])/2;n.coord_type=1,n.location=h+","+l,n.radius=Math.max(getDistance([[l,h],[_.xmin,_.ymin]]),getDistance([[l,h],[_.xmax,_.ymax]]))}return e[s(1260)]?n[s(t._0x347369)]=this[s(1913)](e.text):n[s(t._0x4209b0)]=s(464),Cesium__namespace.Resource.fetchJsonp({url:s(1370),queryParameters:n,...this[s(3798)]}).then(_=>{const l=s;if(_.status!==0){const g="POI 请求失败("+_.status+")："+_[l(i._0xf610e9)];e[l(455)]&&e.error(g);return}if(!_.results||_[l(i._0x1a0f23)]==="city_type"||_.results[l(i._0x373d33)]===0){e.error&&e[l(i._0x5d12a3)](l(2318),_);return}const h=this[l(i._0x3461fc)](_.results);let f;e[l(2295)]?f=this._filterPOIData_polygon(h,c):f=h;const m={allcount:_.total,count:f.length,list:f};return e.success&&e.success(m),m}).catch(_=>{logError$1("BaiduPOI 请求出错",_),e.error&&e.error("请求出错",_)})}[_0x5e32ae(535)](e,t){const i={_0x1d5138:3743},s=_0x5e32ae;if(!e||!t)return;t=t.concat([t[0]]);const n={type:"Polygon",coordinates:[t]},o=[];for(let c=0;c<e.length;c++){const _=e[c],l={type:"Feature",geometry:{type:s(i._0x1d5138),coordinates:[_.x,_.y]}};booleanPointInPolygon(l,n)&&o.push(_)}return o}}class GaodePOI{constructor(e={}){this._key_index=0,this._keys=e.key||gaodeArr}get keys(){return this[_0x5e32ae(1394)]}set keys(e){this._keys=e}get key(){const e=_0x5e32ae,t=this[e(3987)]++%this._keys.length;return this._keys[t]}[_0x5e32ae(3463)](e){const t={_0x2d74f6:3402,_0x459ca7:1717},i=_0x5e32ae,s=[];for(let n=0;n<e[i(t._0x2d74f6)];n++){const o=e[n];let c=[];o.location&&o.location.length>0&&(c=gcj2wgs(o.location.split(","))),s.push({id:o.id,name:o.name,lng:Number(c[0]),lat:Number(c[1]),type:o.type,xzqh:o.pname+o.cityname+o[i(t._0x459ca7)],address:o[i(4085)],tel:o.tel||"",info:o,x:Number(c[0]),y:Number(c[1])})}return s}_getKeywords(e){return isString(e)?e.replace(/ /gm,"|").replace(/,/gm,"|"):Array.isArray(e)?e.join("|"):e}[_0x5e32ae(3689)](e){const t={_0xcf160c:456,_0x181313:428},i={_0x5dd43e:2978,_0x5f0e24:3261,_0x2f193e:3261},s=_0x5e32ae;if(this[s(t._0xcf160c)])return Promise.resolve();const n={key:this.key,output:"json"};e.location=LngLatPoint.parse(e.location);const o=wgs2gcj([e[s(t._0x181313)].lng,e.location.lat]);return n.location=o[0]+","+o[1],this._getAddress_ing=!![],Cesium__namespace.Resource.fetchJsonp({url:s(2803),...this.options,queryParameters:n}).then(c=>{const _=s;var l;if(this._getAddress_ing=![],c.infocode!==_(1100)){console.log("未查询到相关结果！",c);return}const h=c[_(i._0x5dd43e)],f={address:h.formatted_address,city:(l=h[_(i._0x5f0e24)])===null||l===void 0?void 0:l.adcode,component:h[_(i._0x2f193e)]};return e.success&&e[_(2486)](f),f})[s(1201)](c=>{const _=s;this[_(456)]=![],logError$1(_(1621),c),e[_(455)]&&e.error(_(3359),c)})}[_0x5e32ae(3259)](e){const t={_0x4eb2f0:564,_0x45ca68:515,_0x2d573d:1260,_0x37d4de:428},i={_0x3ee46b:1982,_0x145502:3855,_0x47f39e:2486},s=_0x5e32ae,n={key:this.key,output:s(t._0x4eb2f0)};if(Cesium__namespace[s(t._0x45ca68)](e[s(2162)])&&(n.city=e.city,n.citylimit=!![]),Cesium__namespace[s(t._0x45ca68)](e.citylimit)&&(n.citylimit=e.citylimit),e[s(t._0x2d573d)]&&(n[s(1938)]=this._getKeywords(e.text)),e.location){e.location=LngLatPoint.parse(e.location);const o=wgs2gcj([e[s(t._0x37d4de)].lng,e.location.lat]);n.location=o[0]+","+o[1]}return fetchJson({url:s(1073),queryParameters:n,...this[s(3798)]}).then(o=>{const c=s;if(!o.tips){console[c(i._0x3ee46b)]("未查询到相关结果！",o);return}const _=this._formatPOIData(o[c(i._0x145502)]),l={allcount:o.count,count:_.length,list:_};return e.success&&e[c(i._0x47f39e)](l),l}).catch(o=>{logError$1("GaodePOI 请求出错",o),e.error&&e.error("请求出错",o)})}detail(e){const t={_0x1dd927:3128,_0x177343:564,_0x2985fb:1201},i={_0x12914b:455},s={_0x1b0015:455,_0x48b5a4:455,_0xc40ebf:2318,_0x8e88ed:3649},n=_0x5e32ae,o={key:this[n(t._0x1dd927)],id:e.id,output:n(t._0x177343)};return fetchJson({url:"https://restapi.amap.com/v3/place/detail",queryParameters:o,...this.options}).then(c=>{const _=n;if(c[_(3417)]!==_(1100)){const h="POI 请求失败("+c.infocode+")："+c.info;e[_(s._0x1b0015)]&&e.error(h);return}if(!c.pois||c.pois.length===0){e[_(s._0x48b5a4)]&&e.error(_(s._0xc40ebf),c);return}const l=c[_(s._0x8e88ed)][0];return e.success&&e.success(l),l})[n(t._0x2985fb)](c=>{const _=n;logError$1("GaodePOI 请求出错",c),e[_(i._0x12914b)]&&e.error("请求出错",c)})}[_0x5e32ae(4093)](e){const t={_0x17034e:3205,_0x3953ae:1323,_0x2d3d8e:1960,_0x3ed4b1:833},i=_0x5e32ae,s=e.graphic;return s?s[i(t._0x17034e)]===i(t._0x3953ae)?(e.polygon=s[i(t._0x2d3d8e)],this.queryPolygon(e)):s.type===i(652)?(e[i(652)]=s.coordinates,this.queryPolygon(e)):s.type===i(t._0x3ed4b1)?(e.location=s[i(3381)],e.radius=s.radius,this.queryCircle(e)):Promise[i(4056)]():e.polygon?this.queryPolygon(e):this.queryText(e)}queryText(e){const t={_0x252b31:3128,_0xe39276:3692,_0x3645be:857,_0x1cdf4d:515,_0x28390c:4045,_0x4a7cd7:1938,_0x21528a:1913,_0x4399f9:3014},i={_0xff5621:455},s=_0x5e32ae,n={key:this[s(t._0x252b31)],output:"json",page:(e[s(t._0xe39276)]||0)+1,offset:e[s(t._0x3645be)]||20,types:e.types||""};return Cesium__namespace[s(t._0x1cdf4d)](e.city)&&(n.city=e.city,n.citylimit=!![]),Cesium__namespace[s(t._0x1cdf4d)](e[s(t._0x28390c)])&&(n.citylimit=e.citylimit),e.text?n[s(t._0x4a7cd7)]=this[s(t._0x21528a)](e.text):!n.types&&(n[s(t._0x4399f9)]="120000|130000|190000"),fetchJson({url:"https://restapi.amap.com/v3/place/text",queryParameters:n,...this.options}).then(o=>{const c=s;if(o.infocode!=="10000"){const h="POI 请求失败("+o[c(3417)]+")："+o.info;e.error&&e.error(h);return}if(!o.pois){e.error&&e[c(i._0xff5621)]("未查询到相关结果！",o);return}const _=this._formatPOIData(o.pois),l={allcount:o.count,count:_.length,list:_};return e.success&&e.success(l),l}).catch(o=>{const c=s;logError$1("GaodePOI 请求出错",o),e.error&&e.error(c(3359),o)})}queryCircle(e){const t={_0x3234df:3128,_0x3e9325:3411,_0x288773:428,_0xa3ad45:1913},i={_0x5c014b:455,_0x170bad:2318,_0x4d0364:3649},s=_0x5e32ae,n={output:"json",key:this[s(t._0x3234df)],radius:e.radius||3e3,page:(e.page||0)+1,offset:e.count||20,types:e.types||""};if(e.location){e.location=LngLatPoint.parse(e.location);const o=wgs2gcj([e.location[s(t._0x3e9325)],e[s(t._0x288773)].lat]);n.location=o[0]+","+o[1]}else logError$1("GaodePOI: 请传入参location数");return e[s(1260)]?n[s(1938)]=this[s(t._0xa3ad45)](e.text):!n.types&&(n.types="120000|130000|190000"),fetchJson({url:"https://restapi.amap.com/v3/place/around",queryParameters:n,...this.options}).then(o=>{const c=s;if(o[c(3417)]!=="10000"){if(e[c(i._0x5c014b)]){const f="POI 请求失败("+o.infocode+")："+o.info;e.error(f)}return}if(!o[c(3649)]){e[c(455)]&&e.error(c(i._0x170bad),o);return}const _=this._formatPOIData(o[c(i._0x4d0364)]);let l;e.limit?l=this._filterPOIData_circle(_,e.location,n.radius):l=_;const h={allcount:o.count,count:l.length,list:l};return e.success&&e.success(h),h}).catch(o=>{logError$1("GaodePOI 请求出错",o),e.error&&e.error("请求出错",o)})}_filterPOIData_circle(e,t,i){const s=_0x5e32ae;if(!e||!t||!i)return e;const n=t.toCartesian(),o=[];for(let c=0;c<e.length;c++){const _=e[c],l=Cesium__namespace.Cartesian3.fromDegrees(_.x,_.y,t.alt);Cesium__namespace.Cartesian3[s(2776)](l,n)<i&&o.push(_)}return o}queryPolygon(e){const t={_0x1609b2:3611,_0x5b8a20:1488,_0x543790:4237,_0x5d91b6:1201},i={_0x3fc9e5:1621},s={_0x2bf382:3846,_0x37f67c:857},n=_0x5e32ae,o={key:this[n(3128)],output:"json",page:(e.page||0)+1,offset:e.count||20,types:e.types||""},c=e.polygon;let _=[];if(c.length===2){const l=wgs2gcj(c[0]),h=wgs2gcj(c[1]);o.polygon=l[0]+","+l[1]+"|"+h[0]+","+h[1],_=[c[0],[c[0][0],c[1][1]],c[1],[c[1][0],c[0][1]]]}else{_=c;let l="";const h=c[n(t._0x1609b2)]([c[0]]);for(let f=0;f<h.length;f++){const m=wgs2gcj(h[f]);f===h.length-1?l+=m[0]+","+m[1]:l+=m[0]+","+m[1]+"|"}o.polygon=l}return e.text?o.keywords=this._getKeywords(e.text):!o.types&&(o.types=n(t._0x5b8a20)),fetchJson({url:n(t._0x543790),queryParameters:o,...this.options}).then(l=>{const h=n;if(l.infocode!=="10000"){if(e.error){const C="POI 请求失败("+l.infocode+")："+l[h(s._0x2bf382)];e.error(C)}return}if(!l[h(3649)]){e.error&&e.error("未查询到相关结果！",l);return}const f=this[h(3463)](l.pois);let m;e.limit?m=this._filterPOIData_polygon(f,_):m=f;const g={allcount:l[h(s._0x37f67c)],count:m.length,list:m};return e.success&&e.success(g),g})[n(t._0x5d91b6)](l=>{const h=n;logError$1(h(i._0x3fc9e5),l),e.error&&e.error(h(3359),l)})}[_0x5e32ae(535)](e,t){const i={_0x3ba698:2056},s=_0x5e32ae;if(!e||!t)return;t=t.concat([t[0]]);const n={type:s(i._0x3ba698),coordinates:[t]},o=[];for(let c=0;c<e.length;c++){const _=e[c],l={type:"Feature",geometry:{type:"Point",coordinates:[_.x,_.y]}};booleanPointInPolygon(l,n)&&o.push(_)}return o}}class TdtPOI{constructor(e={}){this._key_index=0,this._keys=e.key||tiandituArr}get[_0x5e32ae(3503)](){return this[_0x5e32ae(1394)]}set[_0x5e32ae(3503)](e){this._keys=e}get key(){const e=_0x5e32ae,t=this._key_index++%this[e(1394)].length;return this._keys[t]}_formatPOIData(e){const t={_0x41f988:1552,_0x2e600:2177,_0x55d99d:2780},i=_0x5e32ae,s=[];for(let n=0;n<e.length;n++){const o=e[n];let c=[];o.lonlat&&o[i(1552)].length>0&&(c=o[i(t._0x41f988)].split(",")),s.push({id:o.hotPointID,name:o.name,lng:Number(c[0]),lat:Number(c[1]),type:o.typeName,xzqh:o.province+o[i(2162)]+o[i(t._0x2e600)],address:o.address,tel:o[i(t._0x55d99d)]||"",info:o,x:Number(c[0]),y:Number(c[1])})}return s}_getKeywords(e){return isString(e)?e.replace(/ /gm,"|").replace(/,/gm,"|"):Array.isArray(e)?e.join("|"):e}getAddress(e){const t={_0x55f057:428,_0x4690ea:3957},i={_0x86a8b9:2003,_0x334387:2872,_0x4ffb5b:2486},s=_0x5e32ae;if(this._getAddress_ing)return Promise.resolve();const n={ver:1};return e.location=LngLatPoint[s(1426)](e.location),n.lon=e[s(428)].lng,n.lat=e[s(t._0x55f057)].lat,this[s(456)]=!![],sendAjax({url:s(1308),...this.options,queryParameters:{type:"geocode",tk:this.key,postStr:JSON[s(t._0x4690ea)](n)}}).then(o=>{const c=s;var _,l;if(this._getAddress_ing=![],((_=o[c(i._0x86a8b9)])===null||_===void 0?void 0:_.infocode)!==1e3){console.log(c(2318),o);return}const h=o.result,f={address:h[c(1405)],city:(((l=h.addressComponent)===null||l===void 0?void 0:l[c(i._0x334387)])||"").replace("156",""),component:h.addressComponent};return e[c(i._0x4ffb5b)]&&e[c(i._0x4ffb5b)](f),f}).catch(o=>{this._getAddress_ing=![],logError$1("TdtPOI 请求出错",o),e.error&&e.error("请求出错",o)})}autoTip(e){const t={_0x7fae16:3179},i={_0x5c0b51:455,_0x3be12e:3359},s={_0x1e2608:2003,_0x50acc3:455},n=_0x5e32ae,o={queryType:7,show:1,level:e.level||18,mapBound:e.mapBound||n(t._0x7fae16),start:0,offset:10};return Cesium__namespace.defined(e.city)&&(o[n(1027)]="156"+e.city),Cesium__namespace.defined(e.types)&&(o.dataTypes=e.types),e.text&&(o.keyWord=this._getKeywords(e.text)),fetchJson({url:n(1186),queryParameters:{type:"query",tk:this[n(3128)],postStr:JSON.stringify(o)},...this.options})[n(549)](c=>{const _=n;var l;if(((l=c[_(s._0x1e2608)])===null||l===void 0?void 0:l[_(3417)])!==1e3){console[_(1982)]("未查询到相关结果！",c),e[_(455)]&&e[_(s._0x50acc3)](c.status.cndesc,c);return}if(!c.pois){e.error&&e[_(455)](_(2318),c);return}const h=this[_(3463)](c.pois),f={allcount:c[_(857)],count:h.length,list:h};return e.success&&e.success(f),f}).catch(c=>{const _=n;logError$1(_(1532),c),e[_(i._0x5c0b51)]&&e.error(_(i._0x3be12e),c)})}query(e){const t={_0x22b24d:3205,_0x230da6:652,_0x3f4dfe:4049},i=_0x5e32ae,s=e.graphic;return s?s[i(t._0x22b24d)]==="rectangle"?(e[i(t._0x230da6)]=s.outlineCoordinates,this[i(1067)](e)):s.type===i(652)?(e.polygon=s[i(1743)],this.queryPolygon(e)):s.type===i(833)?(e.location=s.point,e.radius=s.radius,this[i(3498)](e)):Promise.resolve():e.polygon?this.queryPolygon(e):this[i(t._0x3f4dfe)](e)}[_0x5e32ae(4049)](e){const t={_0x1ee7a6:3781,_0x49516d:1186},i={_0x5ddfef:3450,_0x1b443d:3649,_0x5dcefa:2486},s=_0x5e32ae,n=e.count||20,o={queryType:7,show:2,level:e.level||18,mapBound:e.mapBound||"70,18,134,51",start:(e.page||0)*n,offset:n};return Cesium__namespace.defined(e.city)&&(o.specify=s(t._0x1ee7a6)+e.city),Cesium__namespace.defined(e.types)&&(o.dataTypes=e.types),e[s(1260)]&&(o.keyWord=this[s(1913)](e.text)),fetchJson({url:s(t._0x49516d),queryParameters:{type:"query",tk:this.key,postStr:JSON[s(3957)](o)},...this.options})[s(549)](c=>{const _=s;var l;if(((l=c[_(2003)])===null||l===void 0?void 0:l.infocode)!==1e3){console.log("未查询到相关结果！",c),e.error&&e.error(c[_(2003)][_(i._0x5ddfef)],c);return}if(!c[_(i._0x1b443d)]){e.error&&e.error("未查询到相关结果！",c);return}const h=this._formatPOIData(c.pois),f={allcount:c.count,count:h[_(3402)],list:h};return e.success&&e[_(i._0x5dcefa)](f),f}).catch(c=>{logError$1("TdtPOI 请求出错",c),e.error&&e.error("请求出错",c)})}queryCircle(e){const t={_0x99b089:857,_0x33ab79:428,_0x4acd77:448,_0x3cc1c9:3945,_0x5c5d3b:1201},i=_0x5e32ae,s=e[i(t._0x99b089)]||20,n={queryType:3,show:2,queryRadius:formatNum$1(e[i(3194)]||3e3,0),start:(e.page||0)*s,offset:s};return e.location?(e.location=LngLatPoint.parse(e.location),n.pointLonlat=e[i(t._0x33ab79)].lng+","+e.location[i(t._0x4acd77)]):logError$1("TdtPOI: 请传入参location数"),Cesium__namespace.defined(e[i(3014)])&&(n.dataTypes=e.types),e.text&&(n[i(t._0x3cc1c9)]=this._getKeywords(e.text)),fetchJson({url:"http://api.tianditu.gov.cn/v2/search",queryParameters:{type:"query",tk:this.key,postStr:JSON.stringify(n)},...this.options}).then(o=>{var c;if(((c=o.status)===null||c===void 0?void 0:c.infocode)!==1e3){e.error&&e.error(o.status.cndesc,o);return}if(!o.pois){e.error&&e.error("未查询到相关结果！",o);return}const _=this._formatPOIData(o.pois);let l;e.limit?l=this._filterPOIData_circle(_,e.location,n.radius):l=_;const h={allcount:o.count,count:l.length,list:l};return e.success&&e.success(h),h})[i(t._0x5c5d3b)](o=>{const c=i;logError$1("TdtPOI 请求出错",o),e.error&&e.error(c(3359),o)})}[_0x5e32ae(3900)](e,t,i){const s={_0x3658ed:2048},n=_0x5e32ae;if(!e||!t||!i)return e;const o=t[n(s._0x3658ed)](),c=[];for(let _=0;_<e.length;_++){const l=e[_],h=Cesium__namespace[n(3916)].fromDegrees(l.x,l.y,t.alt);Cesium__namespace.Cartesian3.distance(h,o)<i&&c.push(l)}return c}[_0x5e32ae(1067)](e){const t={_0x2147e6:652,_0x1c0e5e:3014,_0x3e32ba:1913},i={_0x3b2328:1532},s={_0x4379cc:3417},n=_0x5e32ae,o=e.count||20,c={queryType:10,show:2,start:(e.page||0)*o,offset:o},_=LngLatArray.toArray(e[n(652)]);if(_.length===2)return e.extent=e.polygon,this[n(1360)](e);let l="";const h=_[n(3611)]([_[0]]);for(let f=0;f<h.length;f++){const m=h[f];f===h.length-1?l+=m[0]+","+m[1]:l+=m[0]+","+m[1]+","}return c[n(t._0x2147e6)]=l,Cesium__namespace[n(515)](e.types)&&(c.dataTypes=e[n(t._0x1c0e5e)]),e.text&&(c.keyWord=this[n(t._0x3e32ba)](e[n(1260)])),fetchJson({url:"http://api.tianditu.gov.cn/v2/search",queryParameters:{type:"query",tk:this.key,postStr:JSON[n(3957)](c)},...this.options}).then(f=>{const m=n;var g;if(((g=f.status)===null||g===void 0?void 0:g[m(s._0x4379cc)])!==1e3){e.error&&e.error(f.status.cndesc,f);return}if(!f.pois){e.error&&e.error(m(2318),f);return}const C=this._formatPOIData(f.pois);let E;e.limit?E=this._filterPOIData_polygon(C,_):E=C;const P={allcount:f.count,count:E.length,list:E};return e.success&&e.success(P),P}).catch(f=>{logError$1(n(i._0x3b2328),f),e.error&&e.error("请求出错",f)})}_filterPOIData_polygon(e,t){if(!e||!t)return;t=t.concat([t[0]]);const i={type:"Polygon",coordinates:[t]},s=[];for(let n=0;n<e.length;n++){const o=e[n],c={type:"Feature",geometry:{type:"Point",coordinates:[o.x,o.y]}};booleanPointInPolygon(c,i)&&s.push(o)}return s}queryExtent(e){const t={_0xfedd8f:1913},i={_0x4805b5:455},s={_0x1d9730:3450,_0x19918d:2318},n=_0x5e32ae,o=e.count||20,c={queryType:2,show:2,level:18,start:(e.page||0)*o,offset:o},_=e.extent[0],l=e.extent[1];return c.mapBound=_[0]+","+_[1]+","+l[0]+","+l[1],Cesium__namespace.defined(e[n(3014)])&&(c.dataTypes=e.types),e[n(1260)]&&(c.keyWord=this[n(t._0xfedd8f)](e.text)),fetchJson({url:"http://api.tianditu.gov.cn/v2/search",queryParameters:{type:n(4093),tk:this.key,postStr:JSON[n(3957)](c)},...this.options}).then(h=>{const f=n;var m;if(((m=h.status)===null||m===void 0?void 0:m.infocode)!==1e3){e.error&&e.error(h.status[f(s._0x1d9730)],h);return}if(!h[f(3649)]){e.error&&e.error(f(s._0x19918d),h);return}const g=this._formatPOIData(h.pois),C={allcount:h.count,count:g.length,list:g};return e.success&&e.success(C),C}).catch(h=>{const f=n;logError$1("TdtPOI 请求出错",h),e[f(i._0x4805b5)]&&e[f(455)](f(3359),h)})}}const RouteType={Walking:1,Bicycling:2,Driving:3};class GaodeRoute{constructor(e={}){this._key_index=0,this._keys=e.key||gaodeArr}get keys(){return this._keys}set keys(e){this._keys=e}get key(){const e={_0x366b55:3987},t=_0x5e32ae,i=this[t(e._0x366b55)]++%this[t(1394)].length;return this._keys[i]}_formatRouteData(e,t,i){const s={_0x3374f6:3402,_0x3c53b9:2776,_0x1f8334:4017,_0x1f9db8:3759},n=_0x5e32ae;let o,c;const _=[];if(e&&(o=gcj2wgs(e.split(","))),t&&(c=gcj2wgs(t.split(","))),i&&i.length>0)for(let l=0;l<i[n(s._0x3374f6)];l++){const h=[];h[n(3759)](o);const f=i[l],m=f[n(816)],g=[],C=[];for(let E=0;E<m.length;E++){const P={instruction:m[E].instruction,distance:m[E][n(s._0x3c53b9)],duration:m[E][n(s._0x1f8334)],points:[],route:m[E].road},w=m[E][n(1632)],M=w.split(";");for(let T=0;T<M.length;T++){const L=M[T],R=gcj2wgs(L.split(","));h.push(R),P.points.push(R)}C.push(P.route),g[n(3759)](P)}h[n(s._0x1f9db8)](c),_.push({allDistance:f.distance,allDuration:f[n(4017)],steps:g,points:h,road:C})}return{origin:o,destination:c,paths:_}}query(e){const t={_0x2b5bf9:3205,_0x2bd032:1662},i=_0x5e32ae;switch(e[i(t._0x2b5bf9)]){case RouteType.Bicycling:return this.queryBicycling(e);case RouteType.Driving:return this[i(3706)](e);case RouteType[i(t._0x2bd032)]:default:return this.queryWalking(e)}}queryArr(e){const t={_0x513a93:455};return new Promise((i,s)=>{const n=_0x5210,o=this;let c=-1;const _={};for(const m in e)m==="points"||m===n(2486)||m==="error"||(_[m]=e[m]);const l=e[n(2820)],h=[];function f(){const m={_0x34a378:493},g=n;c++,_.points=l[c],_.success=function(C){const E=_0x5210;C&&C.paths&&C[E(m._0x34a378)].length>0?h.push(C.paths[0]):h.push(null),c>=l.length-1?(e.success&&e.success(h),i(h)):f()},_[g(t._0x513a93)]=_.success,o[g(4093)](_)}f()})}getShortestPath(e){const t={_0x151305:3765},i=_0x5e32ae;let s=Number.MAX_VALUE,n=null,o=-1;for(let c=0;c<e[i(3402)];c++){const _=e[c];_&&_.allDistance<=s&&(n=_,o=c,s=_[i(t._0x151305)])}return{lineData:n,index:o}}queryWalking(e){const t={_0x399766:3128,_0x2b60b7:2218},i={_0x40dcb2:620,_0x3d3ae7:455,_0x1e9df5:1926,_0x5526f9:455},s=_0x5e32ae,n={key:this[s(t._0x399766)],output:s(564)},o=wgs2gcj(e.points[0]),c=wgs2gcj(e.points[e.points.length-1]);return n[s(495)]=o[0]+","+o[1],n[s(1823)]=c[0]+","+c[1],fetchJson({url:s(t._0x2b60b7),queryParameters:n,...this.options}).then(_=>{const l=s;if(_.infocode!=="10000"){if(e.error){const f=l(i._0x40dcb2)+_.infocode+")："+_.info;e[l(i._0x3d3ae7)](f)}return}if(!_[l(i._0x1e9df5)]||!_.route.paths){e[l(i._0x5526f9)]&&e.error("未查询到相关结果！");return}const h=this._formatRouteData(n.origin,n[l(1823)],_.route.paths);return e.success&&e.success(h),h}).catch(_=>{logError$1("GaodeRoute 请求出错",_),e.error&&e.error("请求出错",_)})}queryBicycling(e){const t={_0x1c20e5:495},i={_0xa08690:1078},s={_0x3e74f2:1926,_0x4e489f:493},n=_0x5e32ae,o={key:this.key,output:"json"},c=wgs2gcj(e.points[0]),_=wgs2gcj(e.points[e.points.length-1]);return o[n(t._0x1c20e5)]=c[0]+","+c[1],o.destination=_[0]+","+_[1],fetchJson({url:n(2877),queryParameters:o,...this.options})[n(549)](l=>{const h=n;if(l.infocode!==h(1100)){const m="路径规划 请求失败("+l.infocode+")："+l.info;e.error&&e.error(m);return}if(!l[h(s._0x3e74f2)]||!l.route.paths){e.error&&e.error("未查询到相关结果！");return}const f=this._formatRouteData(o.origin,o.destination,l[h(1926)][h(s._0x4e489f)]);return e[h(2486)]&&e[h(2486)](f),f}).catch(l=>{const h=n;logError$1(h(i._0xa08690),l),e[h(455)]&&e.error(h(3359),l)})}queryDriving(e){const t={_0x380cf7:1823,_0x9d5210:3782,_0x1f8fe1:3782,_0x376e17:3782},i={_0x3aac8f:1100,_0x2ee7f1:1926},s=_0x5e32ae;var n;const o={key:this.key,output:s(564),extensions:e.extensions||"base",strategy:e.strategy||0},c=wgs2gcj(e.points[0]),_=wgs2gcj(e.points[e[s(2820)].length-1]);if(o.origin=c[0]+","+c[1],o[s(t._0x380cf7)]=_[0]+","+_[1],e.points.length>2){let l="";for(let h=1,f=e[s(2820)].length-1;h<f;h++){const m=wgs2gcj(e.points[h]);l+=m[0]+","+m[1]+";"}o[s(477)]=l}if(((n=e[s(t._0x9d5210)])===null||n===void 0?void 0:n.length)>0){let l="";for(let h=0,f=e[s(3782)].length;h<f;h++){h>0&&(l+="|");const m=e[s(t._0x1f8fe1)][h];for(let g=0,C=m.length;g<C;g++){const E=wgs2gcj(m[g]);l+=E[0]+","+E[1]+";"}}o[s(t._0x376e17)]=l}return fetchJson({url:"https://restapi.amap.com/v3/direction/driving",queryParameters:o,...this.options}).then(l=>{const h=s;if(l.infocode!==h(i._0x3aac8f)){if(e.error){const m="路径规划 请求失败("+l.infocode+")："+l.info;e.error(m)}return}if(!l.route||!l.route.paths||l[h(i._0x2ee7f1)].paths[h(3402)]===0){e.error&&e.error("未查询到相关结果！");return}const f=this[h(4258)](o.origin,o.destination,l.route[h(493)]);return e.success&&e[h(2486)](f),f}).catch(l=>{const h=s;logError$1("GaodeRoute 请求出错",l),e[h(455)]&&e.error("请求出错",l)})}}GaodeRoute[_0x5e32ae(2446)]=RouteType;const Def_Parameters={service:"WFS",request:"GetFeature",version:"1.0.0",outputFormat:_0x5e32ae(971),maxFeatures:1e3};class QueryGeoServer extends BaseClass{get layer(){const e={_0x377580:3798},t=_0x5e32ae;if(!this._geoJsonLayer){const i={...this[t(e._0x377580)]};delete i.url,delete i.data,this._geoJsonLayer=new GeoJsonLayer(i),this._geoJsonLayer.on(EventType[t(2302)],this[t(3453)],this),this._geoJsonLayer.on(EventType.click,this[t(1599)],this)}return this._geoJsonLayer}[_0x5e32ae(4093)](e){const t={_0x20abfe:811,_0x314efe:1743,_0x35c60c:3081,_0x92da5:3183,_0xc39382:2628,_0x1c2c8e:3798,_0x55bcfc:3798,_0x82a4a4:2486,_0x33928f:455,_0x354fae:1260},i=_0x5e32ae;let s='<Filter xmlns="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml"><And>';if(e.text&&(Cesium__namespace.defaultValue(e[i(t._0x20abfe)],!![])?s+=` <PropertyIsLike wildCard="*" singleChar="#" escapeChar="!">
            <PropertyName>`+e.column+`</PropertyName>
            <Literal>*`+e.text+`*</Literal>
        </PropertyIsLike>`:s+=`<PropertyIsEqualTo>
                <PropertyName>`+e.column+`</PropertyName>
                <Literal>`+e.text+i(4092)),e.graphic){const o=e.graphic;let c;if(o.type==="rectangle"?c=o.outlineCoordinates:o.type==="polygon"?c=o[i(t._0x314efe)]:o[i(3205)]==="circle"?c=o[i(531)](!![],30):Cesium__namespace.defined(o.xmax)&&Cesium__namespace.defined(o.xmin)&&Cesium__namespace[i(515)](o.ymin)&&Cesium__namespace.defined(o[i(t._0x35c60c)])&&(c=[[o.xmin,o.ymax],[o[i(t._0x92da5)],o.ymin],[o[i(t._0xc39382)],o.ymin],[o.xmax,o[i(3081)]]]),c){c.push(c[0]);let _="";for(let l=0;l<c.length;l++){let h=c[l];this.options.crs&&this.options.crs!==CRS[i(1060)]&&this[i(t._0x1c2c8e)].crs!==CRS.EPSG4490&&(h=proj4Trans(h,i(3178),this[i(t._0x55bcfc)].crs)),_+=h[0]+","+h[1]+" "}s+=i(4031)+(e[i(2913)]||i(4250))+`</PropertyName>
                      <gml:Polygon>
                          <gml:outerBoundaryIs>
                              <gml:LinearRing>
                                  <gml:coordinates>`+_+`</gml:coordinates>
                              </gml:LinearRing>
                          </gml:outerBoundaryIs>
                      </gml:Polygon>
                  </Intersects>`}}s+="</And></Filter>";const n={...Def_Parameters,...e,typeName:this[i(3798)][i(1538)],filter:s};return delete n[i(t._0x82a4a4)],delete n[i(t._0x33928f)],delete n.graphic,delete n[i(t._0x354fae)],delete n.column,new Promise((o,c)=>{const _={_0x3c4278:1421};sendAjax({...this.options,queryParameters:n}).then(l=>{const h=_0x5210;e[h(3110)]={resolve:o,reject:c},this[h(_._0x3c4278)](l,e)}).catch(l=>{const h=_0x5210;logError$1("QueryGeoServer 请求出错",l),e.error&&e[h(455)]("请求出错",l)})})}queryBySql(e){const t={_0x3edb3d:4250,_0x178893:3205,_0x30a23c:1323,_0x287601:833,_0x536d00:515,_0xce8ffd:1983},i={_0x26bbfc:3798},s={_0x190c17:3110},n=_0x5e32ae;let o=e[n(668)]||n(510);if(e.graphic){let _=e.graphic;const l=e.geometryName||n(t._0x3edb3d);let h;if(_[n(t._0x178893)]===n(t._0x30a23c)){_=_.getRectangle({isFormat:!![]});const f=_.xmin+","+_.ymin+","+_.xmax+","+_.ymax;o+=" and BBOX("+l+", "+f+")"}else if(_.type===n(652))h=_.coordinates;else if(_[n(3205)]===n(t._0x287601))h=_.getOutlineCoordinates(!![],30);else if(Cesium__namespace.defined(_.xmax)&&Cesium__namespace[n(515)](_.xmin)&&Cesium__namespace.defined(_.ymin)&&Cesium__namespace[n(t._0x536d00)](_.ymax)){const f=_.xmin+","+_.ymin+","+_[n(2628)]+","+_[n(3081)];o+=n(1941)+l+", "+f+")"}if(h){h.push(h[0]);const f=[];for(let m=0;m<h.length;m++)f.push(h[m][0]+" "+h[m][1]);o+=n(t._0xce8ffd)+l+",POLYGON(("+f.join(",")+")))"}}const c={...Def_Parameters,...e,typeName:this.options.layer,cql_filter:o};return delete c.success,delete c[n(455)],delete c.graphic,new Promise((_,l)=>{const h=n;sendAjax({...this[h(i._0x26bbfc)],queryParameters:c}).then(f=>{const m=h;e[m(s._0x190c17)]={resolve:_,reject:l},this.processFeatureCollection(f,e)}).catch(f=>{const m=h;logError$1("QueryGeoServer 请求出错",f),e.error&&e.error(m(3359),f)})})}processFeatureCollection(e,t){const i={_0x3d1309:3402,_0x4a6a50:2486,_0x5d7412:2486,_0x8ec9a1:4056,_0x4eec3a:1435,_0x2ee040:3110},s=_0x5e32ae;if(e&&e[s(3205)]==="Feature"&&(e={type:"FeatureCollection",features:[e]}),!e||!e.features||e.features[s(i._0x3d1309)]===0){var n;t[s(i._0x4a6a50)]&&t[s(i._0x5d7412)]({count:0}),(n=t._promise)!==null&&n!==void 0&&n[s(i._0x8ec9a1)]&&t._promise.resolve({count:0})}else{const l=[];for(let h=0;h<e.features.length;h++){var o,c;const f=e.features[h];(f==null||(o=f.geometry)===null||o===void 0||(c=o.coordinates)===null||c===void 0?void 0:c.length)>0&&l.push(f)}if(e.features=l,this[s(i._0x4eec3a)])this._last_success=h=>{var f;const m={geojson:e,count:e.features.length,list:h};t.success&&t.success(m),(f=t._promise)!==null&&f!==void 0&&f.resolve&&t._promise.resolve(m)},this._geoJsonLayer.load({data:e});else{var _;const h={geojson:e,count:e[s(1906)].length};t[s(i._0x5d7412)]&&t.success(h),(_=t._promise)!==null&&_!==void 0&&_.resolve&&t[s(i._0x2ee040)].resolve(h)}}}geoJsonLayer_onLoadHandler(e){const t={_0x2c7ab2:657,_0x25b48f:1404},i=_0x5e32ae;this._last_success&&(this._last_success(e[i(t._0x2c7ab2)]),this[i(3159)]=null),this[i(t._0x25b48f)](EventType.load,e)}geoJsonLayer_onClickHandler(e){const t={_0x4448b0:1435},i=_0x5e32ae;this.fire(EventType.click,{...e,layer:this[i(t._0x4448b0)]})}[_0x5e32ae(1387)](){const e={_0x442d1d:3159},t=_0x5e32ae;this._last_success&&(this[t(e._0x442d1d)]=null),this._geoJsonLayer&&this._geoJsonLayer.clear()}}class QueryArcServer extends BaseClass{constructor(e={}){const t={_0x117720:1123},i=_0x5e32ae;super(e),this.options=e,this._pageSize=e.pageSize??10,this._allCount=0,this[i(t._0x117720)]=0,this._pageIndex=1,this.arrIDS=[]}get url(){return this.options.url}set url(e){const t={_0x4ac66c:1221},i=_0x5e32ae;this.options[i(t._0x4ac66c)]=e}get pageSize(){return this._pageSize}set[_0x5e32ae(3217)](e){this._pageSize=e}get[_0x5e32ae(2352)](){return this[_0x5e32ae({_0x37ea58:3329}._0x37ea58)]}get allPage(){return this[_0x5e32ae({_0x570015:1123}._0x570015)]}get pageIndex(){return this._pageIndex}set[_0x5e32ae(3753)](e){this._pageIndex=e,this.showPage(e)}get layer(){const e={_0x5765c5:1435},t=_0x5e32ae;if(!this[t(1435)]){const i={...this.options};delete i.url,delete i.data,this[t(e._0x5765c5)]=new GeoJsonLayer(i),this._geoJsonLayer.on(EventType.load,this.geoJsonLayer_onLoadHandler,this),this._geoJsonLayer.on(EventType.click,this.geoJsonLayer_onClickHandler,this)}return this._geoJsonLayer}showFirstPage(){this.showPage(1)}showPretPage(){const e={_0x2c0525:3471},t=_0x5e32ae;this._pageIndex=this._pageIndex-1,this._pageIndex<1&&(this._pageIndex=1),this.showPage(this[t(e._0x2c0525)])}[_0x5e32ae(492)](){const e={_0x1bbbe7:3471,_0x1779b1:3471},t=_0x5e32ae;this._pageIndex=this[t(e._0x1bbbe7)]+1,this[t(e._0x1bbbe7)]>this.allPage&&(this._pageIndex=this.allPage),this.showPage(this[t(e._0x1779b1)])}showPage(e){const t={_0x428ad7:3471},i=_0x5e32ae;this[i(t._0x428ad7)]=e,this._queryPageByIds()}query(e){const t={_0x226ee3:510,_0x501a96:3798,_0x2bfd39:1190,_0x2c8dfd:811,_0x54f991:2068,_0xdc0d43:1017,_0x155f09:515,_0x312d64:3125,_0x27afea:3205,_0x325b1f:3957},i={_0x465e81:3798},s={_0x2757be:3141,_0x13f027:1123,_0x20dc0d:3329},n=_0x5e32ae;this._pageIndex=1,this.arrIDS=[];const o={f:"json",inSr:4326,outSR:4326,outFields:"*",returnGeometry:!![],where:e.where||n(t._0x226ee3)};if(this[n(t._0x501a96)][n(1190)]&&(o.token=this.options[n(t._0x2bfd39)]),e.column){let c="";e[n(t._0x2c8dfd)]??!![]?c=e.column+n(t._0x54f991)+e.text+n(545):c=e.column+"='"+e.text+"'",o.where=c}if(e.graphic){const c=e.graphic;if(o.spatialRel=n(t._0xdc0d43),c.type==="rectangle"){const _=c.outlineCoordinates;o.geometryType=n(3594),o[n(788)]=JSON.stringify({xmin:_[0][0],ymin:_[0][1],xmax:_[2][0],ymax:_[2][1],spatialReference:{wkid:4326}})}else if(Cesium__namespace[n(t._0x155f09)](c.xmax)&&Cesium__namespace[n(t._0x155f09)](c.xmin)&&Cesium__namespace.defined(c.ymin)&&Cesium__namespace.defined(c.ymax))o[n(t._0x312d64)]=n(3594),o[n(788)]=JSON.stringify({xmin:c.xmin,ymin:c.ymin,xmax:c.xmax,ymax:c.ymax,spatialReference:{wkid:4326}});else{let _;c[n(t._0x27afea)]==="polygon"?_=c.toGeoJSON():c.type===n(833)?_={type:"Feature",geometry:{type:"Polygon",coordinates:[c.outlineCoordinates]}}:_=e.graphic,o.geometry=JSON[n(t._0x325b1f)](geojsonToArcGIS$1(_.geometry)),o.geometryType=geojsonTypeToArcGIS(_.geometry.type)}}return new Promise((c,_)=>{const l={_0x19d0c6:455},h=n;e[h(3110)]={resolve:c,reject:_},e.page??!![]?(o.returnIdsOnly=!![],sendAjax({...this[h(3798)],url:this.url+"/query",queryParameters:o}).then(f=>{const m=h,g=f.objectIds;g&&(this[m(s._0x2757be)]=g,this._allCount=g.length,this[m(s._0x13f027)]=Math.ceil(this[m(s._0x20dc0d)]/this._pageSize)),delete o[m(1338)],this._queryPageByIds(o,e)}).catch(f=>{const m=h;logError$1("QueryArcServer 请求出错",f),e.error&&e[m(l._0x19d0c6)](f,f.message)})):sendAjax({...this[h(i._0x465e81)],url:this.url+"/query",queryParameters:o}).then(f=>{const m=h,g=arcgisToGeoJSON$1(f);this[m(1421)](g,e)}).catch(f=>{const m=h;logError$1("QueryArcServer 请求出错",f),e[m(455)]&&e[m(455)](f,f.message)})})}_queryPageByIds(e,t){const i={_0xa1fb4d:3402,_0x108361:1289,_0x5e4c0b:2486,_0x489af1:3471,_0x2fea5a:1822,_0x11c259:1201},s={_0x102afe:1536,_0x1f4879:455},n=_0x5e32ae;if(e?this[n(1928)]=e:this.lastParameters&&(e=this.lastParameters),t?this.lastQueryOpts=t:this.lastParameters&&(t=this.lastQueryOpts),!this.arrIDS||this.arrIDS[n(i._0xa1fb4d)]===0||this._pageIndex<1||this._pageIndex>this[n(i._0x108361)]){var o;const h={geojson:null,count:0,allCount:this.allCount,pageSize:this.pageSize,allPage:this.allPage,pageIndex:this.pageIndex};t[n(i._0x5e4c0b)]&&t.success(h),(o=t._promise)!==null&&o!==void 0&&o.resolve&&t._promise.resolve(h);return}const c=(this._pageIndex-1)*this._pageSize,_=this[n(i._0x489af1)]*this[n(3516)],l=this.arrIDS.slice(c,_);e.objectIds=l.join(","),sendAjax({...this.options,url:this[n(1221)]+n(i._0x2fea5a),queryParameters:e}).then(h=>{const f=arcgisToGeoJSON$1(h);this.processFeatureCollection(f,t)})[n(i._0x11c259)](h=>{const f=n;logError$1(f(s._0x102afe),h),t[f(s._0x1f4879)]&&t[f(s._0x1f4879)](h,h[f(3079)])})}processFeatureCollection(e,t){const i={_0x55e575:3402,_0x339c14:2486,_0x1fca72:1289},s={_0x235d20:2486},n=_0x5e32ae;if(!e||!e.features||e[n(1906)][n(i._0x55e575)]===0){var o;const h={geojson:null,count:0,allCount:this.allCount,pageSize:this.pageSize,allPage:this.allPage,pageIndex:this.pageIndex};t[n(i._0x339c14)]&&t[n(2486)](h),(o=t._promise)!==null&&o!==void 0&&o.resolve&&t[n(3110)].resolve(h)}else{const h=[];for(let m=0;m<e.features.length;m++){var c,_;const g=e.features[m];(g==null||(c=g.geometry)===null||c===void 0||(_=c.coordinates)===null||_===void 0?void 0:_.length)>0&&h.push(g)}e[n(1906)]=h;const f={geojson:e,count:e[n(1906)].length,allCount:this.allCount,pageSize:this.pageSize,allPage:this[n(i._0x1fca72)],pageIndex:this[n(3753)]};if(this._geoJsonLayer)this._last_success=m=>{const g=n;var C;f.list=m,t.success&&t[g(s._0x235d20)](f),(C=t[g(3110)])!==null&&C!==void 0&&C.resolve&&t._promise.resolve(f)},this._geoJsonLayer.load({data:e});else{var l;t.success&&t.success(f),(l=t._promise)!==null&&l!==void 0&&l.resolve&&t._promise.resolve(f)}}}geoJsonLayer_onLoadHandler(e){const t={_0x375ab6:657,_0x47b2c9:1404},i=_0x5e32ae;this._last_success&&(this._last_success(e[i(t._0x375ab6)]),this[i(3159)]=null),this[i(t._0x47b2c9)](EventType.load,e)}geoJsonLayer_onClickHandler(e){this.fire(EventType.click,{...e,layer:this._geoJsonLayer})}[_0x5e32ae(1387)](){this[_0x5e32ae({_0x10b235:3159}._0x10b235)]&&(this._last_success=null),this._geoJsonLayer&&this._geoJsonLayer.clear()}}function geojsonTypeToArcGIS(r){const e={_0x4bd6de:1345,_0x1e2a9c:3131},t=_0x5e32ae;let i;switch(r){case"MultiPoint":i=t(4054);break;case t(1225):i=t(3904);break;case t(e._0x4bd6de):i="esriGeometryPolyline";break;case t(2056):i="esriGeometryPolygon";break;case"MultiPolygon":i=t(e._0x1e2a9c);break;case t(3743):default:i="esriGeometryPoint";break}return i}var index={__proto__:null,BaiduPOI,GaodePOI,TdtPOI,GaodeRoute,QueryGeoServer,QueryArcServer};const name="Mars3D三维可视化平台",website="http://mars3d.cn",author="合肥火星科技有限公司";exports[_0x5e32ae(2090)]=Cesium__namespace,Object.defineProperty(exports,"Resource",{enumerable:!![],get:function(){return Cesium.Resource}}),exports.BaseClass=BaseClass,exports.BaseMaterialConver=BaseMaterialConver,exports.BaseStyleConver=BaseStyleConver,exports.BaseThing=BaseThing,exports.BillboardStyleConver=BillboardStyleConver,exports[_0x5e32ae(3958)]=BoxStyleConver,exports[_0x5e32ae(2354)]=CRS,exports.ChinaCRS=ChinaCRS,exports.CircleStyleConver=CircleStyleConver,exports.ClipType=ClipType,exports[_0x5e32ae(1122)]=CloudStyleConver,exports[_0x5e32ae(2301)]=ColorOptsConver,exports.ControlType=ControlType,exports.ControlUtil=ControlUtil,exports.CorridorStyleConver=CorridorStyleConver,exports.CylinderStyleConver=CylinderStyleConver,exports.DivGraphicStyleConver=DivGraphicStyleConver,exports.DomUtil=DomUtil,exports.DrawUtil=DrawUtil,exports.EffectType=EffectType,exports.EffectUtil=EffectUtil,exports.EllipsoidStyleConver=EllipsoidStyleConver,exports[_0x5e32ae(2167)]=EventType,exports.GraphicType=GraphicType,exports.GraphicUtil=GraphicUtil,exports.GroundSkyBox=GroundSkyBox,exports.GroupThing=GroupThing,exports[_0x5e32ae(499)]=Icon,exports.ImageOptsConver=ImageOptsConver,exports.LabelStyleConver=LabelStyleConver,exports[_0x5e32ae(3094)]=Lang,exports.LangType=LangType,exports.LayerType=LayerType,exports.LayerUtil=LayerUtil,exports.LngLatArray=LngLatArray,exports[_0x5e32ae(1529)]=LngLatPoint,exports.LocalWorldTransform=LocalWorldTransform,exports.Log=Log,exports.Map=Map,exports[_0x5e32ae(3928)]=MarsArray,exports.MaterialType=MaterialType$1,exports.MaterialUtil=MaterialUtil,exports[_0x5e32ae(2209)]=MeasureUtil,exports[_0x5e32ae(3960)]=ModelStyleConver,exports.MoveType=MoveType,exports[_0x5e32ae(1952)]=MultipleSkyBox,exports.PathStyleConver=PathStyleConver,exports.PlaneStyleConver=PlaneStyleConver,exports[_0x5e32ae(1434)]=PointStyleConver,exports.PointTrans=PointTrans,exports.PointUtil=PointUtil,exports.PolyUtil=PolyUtil,exports.PolygonStyleConver=PolygonStyleConver,exports.PolylineStyleConver=PolylineStyleConver,exports.PolylineVolumeStyleConver=PolylineVolumeStyleConver,exports.RectangleStyleConver=RectangleStyleConver,exports.RectangularSensorStyleConver=RectangularSensorStyleConver,exports.State=State,exports.Texture3=Texture3,exports.Token=Token,exports[_0x5e32ae(2743)]=Util,exports.WallStyleConver=WallStyleConver,exports.author=author,exports[_0x5e32ae(3140)]=index$1,exports[_0x5e32ae(3660)]=index$2,exports[_0x5e32ae(2118)]=index$6,exports[_0x5e32ae(1538)]=index$4,exports[_0x5e32ae(1877)]=index$7,exports.name=name,exports[_0x5e32ae(1151)]=proj4,exports.provider=index$5,exports[_0x5e32ae(4093)]=index,exports.thing=index$3,exports[_0x5e32ae(932)]=update,exports.version=version,exports.website=website,Object.defineProperty(exports,"__esModule",{value:!![]})})})(mars3d,mars3d.exports);var mars3dExports=mars3d.exports;const _hoisted_1=["id"],_sfc_main$1=defineComponent({__name:"mars-map",props:{url:{default:""},mapKey:{default:"default"},options:{default:()=>({})}},emits:["onload"],setup(r,{emit:e}){const t=r;let i;const s=computed(()=>`mars3d-container-${t.mapKey}`);onMounted(()=>{mars3dExports.Util.fetchJson({url:t.url}).then(o=>{n({...o.map3d,...t.options})})});const n=o=>{i=new mars3dExports.Map(s.value,o),mars3dExports.Util.isPCBroswer()?(i.zoomFactor=2,window.navigator.userAgent.toLowerCase().indexOf("msie")>=0&&(i.viewer.targetFrameRate=20,i.scene.requestRenderMode=!1)):(i.zoomFactor=5,i.scene.requestRenderMode=!1,i.scene.fog.enabled=!1,i.scene.skyAtmosphere.show=!1,i.scene.globe.showGroundAtmosphere=!1),i.viewer.sceneModePicker&&(i.viewer.sceneModePicker.viewModel.duration=0),e("onload",i)};return onUnmounted(()=>{i&&(i.destroy(),i=null),console.log("map销毁完成",i)}),(o,c)=>(openBlock(),createElementBlock("div",{id:unref(s),class:"mars3d-container"},null,8,_hoisted_1))}}),marsMap_vue_vue_type_style_index_0_lang="";class CesiumRoleController{constructor(e,t){this.Cesium=e,this.viewer=t,this.hpRoll=new e.HeadingPitchRoll(0,0,0),this.position=null,this.speed=1,this.rolePrimitive=null,this.boundingSphere=null,this.speedVector=new e.Cartesian3,this.hpRange=new e.HeadingPitchRange,this.converter=e.Transforms.localFrameToFixedFrameGenerator("north","west"),this.cartographic_terrain=null,this.cartographic_3dtiles=null,this.event=!1,this.radian=e.Math.toRadians(1),this.flag={moveUp:!1,moveDown:!1,moveLeft:!1,moveRight:!1},this.options=null,document.addEventListener("keydown",i=>{this.event&&this.setFlagStatus(i,!0)}),document.addEventListener("keyup",i=>{this.event&&this.setFlagStatus(i,!1)}),t.clock.onTick.addEventListener(i=>{this.event&&(this.flag.moveUp&&(this.flag.moveLeft&&(this.hpRoll.heading-=this.radian),this.flag.moveRight&&(this.hpRoll.heading+=this.radian),this.move(!0)),this.flag.moveDown&&(this.flag.moveLeft&&(this.hpRoll.heading-=this.radian),this.flag.moveRight&&(this.hpRoll.heading+=this.radian),this.move(!1)),this.flag.moveLeft&&!this.flag.moveDown&&!this.flag.moveUp&&!this.flag.moveRight&&(this.hpRoll.heading-=this.radian,e.Transforms.headingPitchRollToFixedFrame(this.position,this.hpRoll,e.Ellipsoid.WGS84,this.converter,this.rolePrimitive.modelMatrix)),this.flag.moveRight&&!this.flag.moveDown&&!this.flag.moveUp&&!this.flag.moveLeft&&(this.hpRoll.heading+=this.radian,e.Transforms.headingPitchRollToFixedFrame(this.position,this.hpRoll,e.Ellipsoid.WGS84,this.converter,this.rolePrimitive.modelMatrix)))})}init(e){this.viewer.scene.preUpdate.addEventListener((o,c)=>{this.event&&this.rolePrimitive&&this.boundingSphere&&this.zoomToModel(e)}),this.options=e,this.options.speed?this.speed=this.options.speed:this.speed=1,this.position=this.Cesium.Cartesian3.fromDegrees(this.options.position[0],this.options.position[1]),this.event=!0;let t=this.Cesium.SceneTransforms.wgs84ToWindowCoordinates(this.viewer.scene,this.position);var i=this.viewer.camera.getPickRay(t),s=this.viewer.scene.globe.pick(i,this.viewer.scene),n=this.viewer.scene.pickPosition(t);s&&(this.cartographic_terrain=this.Cesium.Cartographic.fromCartesian(s)),n&&(this.cartographic_3dtiles=this.Cesium.Cartographic.fromCartesian(n)),this.cartographic_3dtiles&&this.cartographic_3dtiles.height>0?this.viewer.scene.clampToHeightMostDetailed([this.position]).then(o=>{this.Cesium.Cartographic.fromCartesian(o[0]).height>0&&(this.position=o[0],this.addModel(this.position,e))}):this.cartographic_terrain?this.cartographic_terrain.height>0?this.Cesium.sampleTerrainMostDetailed(this.viewer.terrainProvider,[this.viewer.scene.globe.ellipsoid.cartesianToCartographic(this.position)]).then(async o=>{this.position=this.viewer.scene.globe.ellipsoid.cartographicToCartesian(o[0]),this.addModel(this.position,e)}):this.addModel(this.position,e):this.addModel(this.position,e)}setFlagStatus(e,t){switch(e.keyCode){case 65:this.flag.moveLeft=t;break;case 87:this.validateKey(t),this.flag.moveUp=t;break;case 68:this.flag.moveRight=t;break;case 83:this.validateKey(t),this.flag.moveDown=t;break}}validateKey(e){e?this.viewer.clockViewModel.shouldAnimate=!0:this.viewer.clockViewModel.shouldAnimate=!1}zoomToModel(e){var t=2*Math.max(this.boundingSphere.radius,this.viewer.camera.frustum.near);let i=0,s=0,n=0;switch(e.pitch?i=e.pitch:i=-25,e.lockViewLevel?s=e.lockViewLevel:s=3,e.range?n=e.range:n=4,s){case 1:this.hpRange.heading=this.viewer.camera.heading,this.hpRange.pitch=this.viewer.camera.pitch;break;case 2:this.hpRange.heading=this.hpRoll.heading-this.Cesium.Math.toRadians(90),this.hpRange.pitch=this.viewer.camera.pitch;break;default:this.hpRange.heading=this.hpRoll.heading-this.Cesium.Math.toRadians(90),this.hpRange.pitch=this.Cesium.Math.toRadians(i);break}this.hpRange.range=t*n,this.viewer.camera.lookAt(this.boundingSphere.center,this.hpRange)}move(e){if(e>0?this.speedVector=this.Cesium.Cartesian3.multiplyByScalar(this.Cesium.Cartesian3.UNIT_Y,this.speed,this.speedVector):this.speedVector=this.Cesium.Cartesian3.multiplyByScalar(this.Cesium.Cartesian3.UNIT_Y,-this.speed,this.speedVector),this.position=this.Cesium.Matrix4.multiplyByPoint(this.rolePrimitive.modelMatrix,this.speedVector,this.position),this.cartographic_3dtiles&&this.cartographic_3dtiles.height>0)this.viewer.scene.clampToHeightMostDetailed([this.position]).then(t=>{this.Cesium.Cartographic.fromCartesian(t[0]).height>0&&(this.position=t[0],this.Cesium.Transforms.headingPitchRollToFixedFrame(this.position,this.hpRoll,this.Cesium.Ellipsoid.WGS84,this.converter,this.rolePrimitive.modelMatrix))});else if(this.cartographic_terrain)if(this.cartographic_terrain.height>0)this.Cesium.sampleTerrainMostDetailed(this.viewer.terrainProvider,[this.viewer.scene.globe.ellipsoid.cartesianToCartographic(this.position)]).then(t=>{this.position=this.viewer.scene.globe.ellipsoid.cartographicToCartesian(t[0]),this.Cesium.Transforms.headingPitchRollToFixedFrame(this.position,this.hpRoll,this.Cesium.Ellipsoid.WGS84,this.converter,this.rolePrimitive.modelMatrix)});else{let t=this.viewer.scene.globe.ellipsoid.cartesianToCartographic(this.position);t.height=0,this.position=this.viewer.scene.globe.ellipsoid.cartographicToCartesian(t),this.Cesium.Transforms.headingPitchRollToFixedFrame(this.position,this.hpRoll,this.Cesium.Ellipsoid.WGS84,this.converter,this.rolePrimitive.modelMatrix)}else{let t=this.viewer.scene.globe.ellipsoid.cartesianToCartographic(this.position);t.height=0,this.position=this.viewer.scene.globe.ellipsoid.cartographicToCartesian(t),this.Cesium.Transforms.headingPitchRollToFixedFrame(this.position,this.hpRoll,this.Cesium.Ellipsoid.WGS84,this.converter,this.rolePrimitive.modelMatrix)}}reset(){this.hpRoll=new this.Cesium.HeadingPitchRoll(0,0,0),this.position=null,this.speed=1,this.rolePrimitive=null,this.boundingSphere=null,this.speedVector=new this.Cesium.Cartesian3,this.hpRange=new this.Cesium.HeadingPitchRange,this.converter=this.Cesium.Transforms.localFrameToFixedFrameGenerator("north","west"),this.cartographic_terrain=null,this.cartographic_3dtiles=null,this.event=!1,this.radian=this.Cesium.Math.toRadians(1),this.flag={moveUp:!1,moveDown:!1,moveLeft:!1,moveRight:!1},this.options=null}destory(){this.event=!1,this.viewer.camera.lookAtTransform(this.Cesium.Matrix4.IDENTITY),this.viewer.scene.primitives.remove(this.rolePrimitive),this.reset()}async addModel(e,t){let i=await this.Cesium.Model.fromGltfAsync({url:t.url,modelMatrix:this.Cesium.Transforms.headingPitchRollToFixedFrame(e,this.hpRoll,this.Cesium.Ellipsoid.WGS84,this.converter),minimumPixelSize:128});this.rolePrimitive=this.viewer.scene.primitives.add(i),this.rolePrimitive.readyEvent.addEventListener(()=>{t.animation&&this.rolePrimitive.activeAnimations.add({name:t.animation,loop:this.Cesium.ModelAnimationLoop.REPEAT}),this.viewer.clockViewModel.shouldAnimate=!1,this.boundingSphere=this.rolePrimitive.boundingSphere,this.zoomToModel(this.options)})}}const _sfc_main=defineComponent({__name:"App",setup(r){const e="config/config.json",t=i=>{console.log("marsOnload"),i.on("click",s=>{var n=mars3dExports.LngLatPoint.fromCartesian(s.cartesian);new CesiumRoleController(mars3dExports.Cesium,i.viewer).init({position:[n.lng,n.lat],url:"http://devmodels.oss-cn-shenzhen.aliyuncs.com/devtest/liubofang/glb/foreigner_cesium.glb",animation:"run",lockViewLevel:2,pitch:-25,speed:10,range:1e3})})};return(i,s)=>(openBlock(),createBlock(_sfc_main$1,{url:e,"map-key":"test",onOnload:t}))}}),style="";createApp(_sfc_main).mount("#app");
